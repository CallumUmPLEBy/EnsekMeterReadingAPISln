(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8224],{94929:(H,T,e)=>{"use strict";e.d(T,{n:()=>c});var t=e(68404),n=e(29002);function c(s){const{children:r,instanceSettings:g}=s,f=(0,t.useMemo)(()=>({instanceSettings:g,meta:g.meta}),[g]);return t.createElement(n._.Provider,{value:f},r)}},29002:(H,T,e)=>{"use strict";e.d(T,{_:()=>n});var t=e(68404);const n=(0,t.createContext)(void 0)},20231:(H,T,e)=>{"use strict";e.d(T,{b:()=>c});var t=e(68404),n=e(29002);function c(s){const{children:r,...g}=s;return t.createElement(n._.Provider,{value:g},r)}},61345:(H,T,e)=>{"use strict";e.d(T,{v:()=>t});function t(n){return"instanceSettings"in n&&"meta"in n}},59417:(H,T,e)=>{"use strict";e.d(T,{g:()=>c});var t=e(68404),n=e(29002);function c(){const s=(0,t.useContext)(n._);if(!s)throw new Error("usePluginContext must be used within a PluginContextProvider");return s}},71398:(H,T,e)=>{"use strict";e.d(T,{i:()=>g});var t=e(20411),n=e(49319),c=e(16911);const s=f=>f;class r{constructor(o,l){this.source=o,this.prop=l,this.converter=s}get length(){return this.source.length}get(o){return this.converter(this.source[o][this.prop])}toArray(){return(0,n.n)(this)}toJSON(){return(0,n.n)(this)}}class g extends t.G{constructor(o,l){super(),this.source=o,this.fields=[],this.length=0,this.length=o.length;const a=o.length?o[0]:{};l?this.fields=l.map(m=>({name:m,type:(0,c._m)(m,a[m]),config:{},values:new r(o,m)})):this.setFieldsFromObject(a)}setFieldsFromObject(o){this.fields=Object.keys(o).map(l=>({name:l,type:(0,c._m)(l,o[l]),config:{},values:new r(this.source,l)}))}setFieldType(o,l,a){let m=this.fields.find(d=>d.name===o);return m?m.type=l:(m={name:o,type:l,config:{},values:new r(this.source,o)},this.fields.push(m)),m.values.converter=a??s,m}get(o){return this.source[o]}toJSON(){return(0,c.og)(this)}}},25091:(H,T,e)=>{"use strict";e.d(T,{a:()=>c});var t=e(98212),n=e(38685);class c extends n.v{constructor(r){super(void 0,g=>new t.d({...r,buffer:g}))}}},70006:(H,T,e)=>{"use strict";e.d(T,{Ib:()=>g,Jy:()=>r,Y:()=>l,vP:()=>o});var t=e(14582),n=e(19695),c=e(16911);const s={Inf:1/0,NegInf:-1/0,Undef:void 0,NaN:NaN};function r(a,m){for(const d in a){const p=s[d];for(const h of a[d])h<m.length&&(m[h]=p)}}function g(a,m){for(let d=0;d<m.length;d++)m[d]=a[m[d]]}function f(a,m){for(const d of m)if(d!=null)return(0,c._m)(a,d);return t.fS.other}function o(a){const{schema:m,data:d}=a;if(!m||!m.fields)throw new Error("JSON needs a fields definition");const p=d?d.values.reduce((y,v)=>Math.max(y,v.length),0):0,h=m.fields.map((y,v)=>{let i=d?d.values[v]:[],u=i.length,P=y.type;u!==p&&(i.length=p,i.fill(void 0,u));let E=d?.entities?.[v];E&&r(E,i);let C=d?.enums?.[v];return C&&(g(C,i),P=t.fS.string),{...y,type:P??f(y.name,i),config:y.config??{},values:new n.G(i),entities:E??{}}});return{...m,fields:h,length:p}}function l(a){const m={values:[]};return{schema:{refId:a.refId,meta:a.meta,name:a.name,fields:a.fields.map(p=>{const{values:h,state:y,display:v,...i}=p;return delete i.entities,m.values.push(h.toArray()),i})},data:m}}},50235:(H,T,e)=>{"use strict";e.d(T,{U:()=>n});var t=e(20411);class n extends t.G{constructor(s){super(),this.data=s,this.index=0;const r={},g={};for(let f=0;f<s.fields.length;f++){const o=s.fields[f];if(!o.name)continue;g[o.name]=o;const l=()=>o.values.get(this.index);r.hasOwnProperty(o.name)||Object.defineProperty(r,o.name,{enumerable:!0,get:l}),r.hasOwnProperty(f.toString())||Object.defineProperty(r,f,{enumerable:!1,get:l})}this.obj=r,this.fields=g}get dataFrame(){return this.data}get length(){return this.data.length}getFieldDisplayProcessor(s){if(!this.dataFrame||!this.dataFrame.fields)return;const r=this.dataFrame.fields[s];if(!(!r||!r.display))return r.display}get(s){return this.index=s,this.obj}toArray(){return new Array(this.data.length).fill(0).map((s,r)=>({...this.get(r)}))}}},71895:(H,T,e)=>{"use strict";e.d(T,{N:()=>c});var t=e(14582),n=e(16911);class c{constructor(r){this.fields=[],this.fieldByName={},this.fieldByType={},this.fields=r.fields.map((g,f)=>({...g,index:f}));for(let g=0;g<r.fields.length;g++){const f=r.fields[g];if(f.type===t.fS.other){const o=(0,n.fu)(f);o&&(f.type=o)}this.fieldByType[f.type]||(this.fieldByType[f.type]=[]),this.fieldByType[f.type].push({...f,index:g}),this.fieldByName[f.name]?console.warn("Duplicate field names in DataFrame: ",f.name):this.fieldByName[f.name]={...f,index:g}}}getFields(r){if(!r)return[...this.fields];const g=this.fieldByType[r];return g?[...g]:[]}hasFieldOfType(r){const g=this.fieldByType[r];return g&&g.length>0}getFirstFieldOfType(r,g=!1){return this.fieldByType[r].find(l=>g||!l.config.custom?.hidden)}hasFieldNamed(r){return!!this.fieldByName[r]}hasFieldWithNameAndType(r,g){return!!this.fieldByName[r]&&this.fieldByType[g].filter(f=>f.name===r).length>0}getFieldByName(r){return this.fieldByName[r]}getFieldsByLabel(r,g){return Object.values(this.fieldByName).filter(f=>f.labels&&f.labels[r]===g)}}},38685:(H,T,e)=>{"use strict";e.d(T,{Y:()=>f,v:()=>o});var t=e(82897),n=e(14582),c=e(16911);function s(l,a){return a.type||(a.name==="time"||a.name==="Time"?a.type=n.fS.time:a.type=(0,c.LI)(l)),a.type===n.fS.number?m=>parseFloat(m):a.type===n.fS.boolean?m=>!(m[0]==="F"||m[0]==="f"||m[0]==="0"):m=>m}var r=e(19695),g=e(20411);const f=void 0;class o extends g.G{constructor(a,m){if(super(),this.fields=[],this.first=new r.G,this.parsers=void 0,this.creator=m||(d=>new r.G(d)),a){const{name:d,refId:p,meta:h,fields:y}=a;if(d&&(this.name=d),p&&(this.refId=p),h&&(this.meta=h),y)for(const v of y)this.addField(v)}Object.defineProperty(this,"length",{enumerable:!0,get:()=>this.first.length})}get length(){return this.first.length}addFieldFor(a,m){return this.addField({name:m||"",type:(0,c.LI)(a)})}addField(a,m){let d;a.values&&(Array.isArray(a.values)?d=a.values:d=a.values.toArray());let p=a.type;!p&&(a.name==="time"||a.name==="Time")?p=n.fS.time:(!p&&d&&d.length&&(p=(0,c.LI)(d[0])),p||(p=n.fS.other));let h=a.name;h||(h=`Field ${this.fields.length+1}`);const y={...a,name:h,type:p,config:a.config||{},values:this.creator(d)};if(p===n.fS.other&&(p=(0,c.fu)(y),p&&(y.type=p)),this.fields.push(y),this.first=this.fields[0].values,m)for(;y.values.length<m;)y.values.add(f);else this.validate();return y}validate(){const a=this.fields.reduce((m,d)=>Math.max(m,d.values.length),0);for(const m of this.fields)for(;m.values.length!==a;)m.values.add(f)}reverse(){for(const a of this.fields)a.values.reverse()}setParser(a,m){return this.parsers||(this.parsers=new Map),this.parsers.set(a,m),m}parseValue(a,m){let d=this.parsers?.get(a);return d||(d=this.setParser(a,s(m,a))),d(m)}appendRow(a){for(let m=this.fields.length;m<a.length;m++)this.addField({name:`Field ${m+1}`,type:(0,c.LI)(a[m])});if(this.length<1)for(let m=0;m<this.fields.length;m++){const d=this.fields[m];(!d.type||d.type===n.fS.other)&&(d.type=(0,c.LI)(a[m]))}for(let m=0;m<this.fields.length;m++){const d=this.fields[m];let p=a[m];d.type!==n.fS.string&&(0,t.isString)(p)&&(p=this.parseValue(d,p)),d.values.add(p)}}add(a){const m=a;for(const d of this.fields){let p=m[d.name];d.type!==n.fS.string&&(0,t.isString)(p)&&(p=this.parseValue(d,p)),p===void 0&&(p=f),d.values.add(p)}}set(a,m){if(a>this.length)throw new Error("Unable to set value beyond current length");const d=m||{};for(const p of this.fields)p.values.set(a,d[p.name])}get(a){const m={};for(const d of this.fields)m[d.name]=d.values.get(a);return m}toJSON(){return(0,c.og)(this)}}},68219:(H,T,e)=>{"use strict";e.d(T,{$q:()=>c,GV:()=>n,YP:()=>g,jC:()=>s,q2:()=>t,r7:()=>r});const t=(f,o)=>({name:f,columns:o}),n=f=>f.columns,c=(f,o)=>f.columns[o],s=(f,o,l)=>f.columns[o].values.get(l),r=(f,o,l)=>f.columns.map(a=>a.values.get(l)),g=(f,o)=>f[o]},38067:(H,T,e)=>{"use strict";e.d(T,{Ch:()=>c,Vv:()=>g,nl:()=>s});var t=e(82897),n=e.n(t);function c(f,o,l){if(f===o)return!0;if(f?.fields?.length!==o?.fields?.length||f.name!==o.name)return!1;for(let a=0;a<f.fields.length;a++){const m=f.fields[a],d=o.fields[a];if(m.type!==d.type||m.name!==d.name)return!1;if(l)continue;if(m.labels&&d.labels&&!g(m.labels,d.labels))return!1;const p=m.config,h=d.config;let y=Object.keys(p),v=Object.keys(h);if(y.length!==v.length)return!1;for(const i of y){if(!(i in h))return!1;if(i!=="interval"&&!(0,t.isEqual)(p[i],h[i]))return!1}}return!0}function s(f,o,l){if(f===o)return!0;if(f?.length!==o?.length)return!1;for(let a=0;a<f.length;a++)if(!l(f[a],o[a]))return!1;return!0}const r=(f,o)=>f===o;function g(f,o,l=r){if(f===o)return!0;const a=Object.keys(f),m=Object.keys(o);if(a.length!==m.length)return!1;for(let d of a)if(!l(f[d],o[d]))return!1;return!0}},31815:(H,T,e)=>{"use strict";e.d(T,{$q:()=>g.$q,Aw:()=>r.Aw,Ch:()=>l.Ch,DP:()=>r.DP,F9:()=>r.F9,GV:()=>g.GV,Ib:()=>o.Ib,Ji:()=>r.Ji,Jy:()=>o.Jy,LI:()=>r.LI,N:()=>n.N,SX:()=>r.SX,US:()=>t.U,Vv:()=>l.Vv,Y:()=>o.Y,Y6:()=>r.Y6,YP:()=>g.YP,Yi:()=>s.Y,Zr:()=>r.Zr,_m:()=>r._m,a2:()=>c.a,aK:()=>r.aK,aY:()=>r.aY,fh:()=>r.fh,fu:()=>r.fu,g0:()=>r.g0,iB:()=>f.i,jC:()=>g.jC,m$:()=>a.m$,nl:()=>l.nl,og:()=>r.og,q2:()=>g.q2,r7:()=>g.r7,sV:()=>r.sV,vA:()=>s.v,vP:()=>o.vP});var t=e(50235),n=e(71895),c=e(25091),s=e(38685),r=e(16911),g=e(68219),f=e(71398),o=e(70006),l=e(38067),a=e(34472)},16911:(H,T,e)=>{"use strict";e.d(T,{Aw:()=>A,DP:()=>P,F9:()=>N,Ji:()=>S,LI:()=>E,SX:()=>b,Y6:()=>B,Zr:()=>O,_m:()=>u,aK:()=>L,aY:()=>M,fh:()=>w,fu:()=>C,g0:()=>x,og:()=>R,sV:()=>U});var t=e(82897),n=e.n(t),c=e(46519),s=e(62724),r=e(89890),g=e(14582),f=e(19695),o=e(12022),l=e(49319),a=e(71398),m=e(70006),d=e(38685);function p(F){const D=F.columns.map(Y=>{const{text:j,type:K,...z}=Y;return{name:j?.length?j:Y,config:z||{},values:new f.G,type:K&&Object.values(g.fS).includes(K)?K:g.fS.other}});if(!(0,t.isArray)(F.rows))throw new Error(`Expected table rows to be array, got ${typeof F.rows}.`);for(const Y of F.rows)for(let j=0;j<D.length;j++)D[j].values.buffer.push(Y[j]);for(const Y of D)if(Y.type===g.fS.other){const j=C(Y);j&&(Y.type=j)}return{fields:D,refId:F.refId,meta:F.meta,name:F.name,length:F.rows.length}}function h(F){const D=[],Y=[],j=F.datapoints||F.points;for(const z of j)Y.push(z[0]),D.push(z[1]);const K=[{name:g.Ls,type:g.fS.time,config:{},values:new f.G(D)},{name:g.M5,type:g.fS.number,config:{unit:F.unit},values:new f.G(Y),labels:F.tags}];return F.title&&(K[1].config.displayNameFromDS=F.title),{name:F.target||F.name,refId:F.refId,meta:F.meta,fields:K,length:Y.length}}function y(F){const D=new f.G,Y=new f.G;for(let j=0;j<F.data.length;j++){const K=F.data[j];D.buffer.push(K[1]),Y.buffer.push(K[0])}return{name:F.label,fields:[{name:F.label||g.M5,type:g.fS.number,config:{},values:D},{name:g.Ls,type:g.fS.time,config:{unit:"dateTimeAsIso"},values:Y}],length:D.buffer.length}}function v(F){const D=[{name:F.target,type:g.fS.other,labels:F.tags,config:{unit:F.unit,filterable:F.filterable},values:new f.G}];for(const Y of F.datapoints)D[0].values.buffer.push(Y);return{name:F.target,refId:F.target,meta:{json:!0},fields:D,length:F.datapoints.length}}const i=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function u(F,D){return F&&(F=F.toLowerCase(),F==="date"||F==="time")?g.fS.time:E(D)}function P(F){return F instanceof Date||(0,c.v9)(F)?g.fS.time:(0,t.isNumber)(F)?g.fS.number:(0,t.isString)(F)?g.fS.string:(0,t.isBoolean)(F)?g.fS.boolean:g.fS.other}function E(F){return F instanceof Date||(0,c.v9)(F)?g.fS.time:(0,t.isNumber)(F)?g.fS.number:(0,t.isString)(F)?i.test(F)?g.fS.number:F==="true"||F==="TRUE"||F==="True"||F==="false"||F==="FALSE"||F==="False"?g.fS.boolean:g.fS.string:(0,t.isBoolean)(F)?g.fS.boolean:g.fS.other}function C(F){if(F.name){const D=F.name.toLowerCase();if(D==="date"||D==="time")return g.fS.time}for(let D=0;D<F.values.length;D++){const Y=F.values.get(D);if(Y!=null)return E(Y)}}const b=(F,D=!1)=>{for(const Y of F.fields)if(!Y.type||Y.type===g.fS.other||D)return{...F,fields:F.fields.map(j=>j.type&&j.type!==g.fS.other&&!D?j:{...j,type:C(j)||g.fS.other})};return F},S=F=>Boolean(F&&F.hasOwnProperty("columns")),M=F=>Boolean(F&&F.hasOwnProperty("fields"));function x(F){if("fields"in F)return"length"in F&&F.fields[0]?.values?.get?F:new d.v(F);if(F.hasOwnProperty("type")&&F.type==="docs")return v(F);if(F.hasOwnProperty("datapoints")||F.hasOwnProperty("points"))return h(F);if(F.hasOwnProperty("data"))return F.hasOwnProperty("schema")?(0,m.vP)(F):y(F);if(F.hasOwnProperty("columns"))return p(F);if(Array.isArray(F))return new a.i(F);throw console.warn("Can not convert",F),new Error("Unsupported data format")}const O=F=>{const{fields:D}=F,Y=F.length,j=[];if(D.length===2){const{timeField:K,timeIndex:z}=U(F);if(K){const ae=D[z===0?1:0],J=D[z];for(let oe=0;oe<Y;oe++)j.push([ae.values.get(oe),J.values.get(oe)]);return{alias:F.name,target:(0,r.C)(ae,F),datapoints:j,unit:D[0].config?D[0].config.unit:void 0,refId:F.refId,meta:F.meta}}}for(let K=0;K<Y;K++){const z=[];for(let Z=0;Z<D.length;Z++)z.push(D[Z].values.get(K));j.push(z)}return F.meta&&F.meta.json?{alias:D[0].name||F.name,target:D[0].name||F.name,datapoints:D[0].values.toArray(),filterable:D[0].config?D[0].config.filterable:void 0,type:"docs"}:{columns:D.map(K=>{const{name:z,config:Z}=K;if(Z){const{...ae}=Z;return ae.text=z,ae}return{text:z}}),type:"table",refId:F.refId,meta:F.meta,rows:j}};function L(F,D,Y=!1){const j=F.fields[D];if(!j)return F;const K=[];for(let Z=0;Z<F.length;Z++)K.push(Z);const z=(0,s.Mo)(j,Y);return K.sort(z),{...F,fields:F.fields.map(Z=>({...Z,values:new o.o(Z.values,K)}))}}function B(F){return{...F,fields:F.fields.map(D=>{const Y=[...D.values.toArray()];return Y.reverse(),{...D,values:new f.G(Y)}})}}function w(F,D){const Y=[];for(const j of F.fields)Y.push(j.values.get(D));return Y}function R(F){return A(F)}function A(F,D){return{fields:(D?F.fields.filter(D):F.fields).map(K=>{let z=K.values.toArray();return z instanceof Float64Array&&(z=(0,l.n)(K.values)),{name:K.name,type:K.type,config:K.config,values:z,labels:K.labels}}),refId:F.refId,meta:F.meta,name:F.name}}const U=F=>{for(let D=0;D<F.fields.length;D++)if(F.fields[D].type===g.fS.time)return{timeField:F.fields[D],timeIndex:D};return{}};function I(F){const D=b(x(F));if(D.fields&&D.fields.length)for(const Y of D.fields)Y.state=null;return D}function N(F){return!F||!(0,t.isArray)(F)?[]:F.map(D=>I(D))}},34472:(H,T,e)=>{"use strict";e.d(T,{hZ:()=>s,m$:()=>r});var t=e(14582),n=e(16911);function c(g){return g.fields.length>2?!1:Boolean(g.fields.find(f=>f.type===t.fS.time))}function s(g){return!g.find(f=>!c(f))}function r(g){for(let f=0;f<g.length;f++){const o=(0,n.sV)(g[f]);if(o.timeField!==void 0&&o.timeIndex!==void 0)return!0}return!1}},99919:(H,T,e)=>{"use strict";e.d(T,{K:()=>c,Z:()=>s});var t=e(69311);let n=()=>t.Ys;const c=r=>{n=r??n},s=r=>r?.timeZone??n()??t.Ys},21053:(H,T,e)=>{"use strict";e.r(T),e.d(T,{isMathString:()=>r,isValid:()=>f,parse:()=>g,parseDateMath:()=>o,roundToFiscal:()=>l});var t=e(82897),n=e.n(t),c=e(46519);const s=["y","M","w","d","h","m","s","Q"];function r(a){return a?!!(typeof a=="string"&&(a.substring(0,3)==="now"||a.includes("||"))):!1}function g(a,m,d,p){if(a){if(typeof a!="string")return(0,c.v9)(a)?a:(0,t.isDate)(a)?(0,c.CQ)(a):void 0;{let h,y="",v,i;return a.substring(0,3)==="now"?(h=(0,c.GY)(d),y=a.substring(3)):(v=a.indexOf("||"),v===-1?(i=a,y=""):(i=a.substring(0,v),y=a.substring(v+2)),h=(0,c.CQ)(i,c.VJ)),y.length?o(y,h,m,p):h}}}function f(a){const m=g(a);return m&&(0,c.v9)(m)?m.isValid():!1}function o(a,m,d,p=0){const h=a.replace(/\s/g,""),y=m;let v=0;const i=h.length;for(;v<i;){const u=h.charAt(v++);let P,E,C,b=!1;if(u==="/")P=0;else if(u==="+")P=1;else if(u==="-")P=2;else return;if(isNaN(parseInt(h.charAt(v),10)))E=1;else if(h.length===2)E=parseInt(h.charAt(v),10);else{const S=v;for(;!isNaN(parseInt(h.charAt(v),10));)if(v++,v>10)return;E=parseInt(h.substring(S,v),10)}if(P===0&&E!==1)return;if(C=h.charAt(v++),C==="f"&&(C=h.charAt(v++),b=!0),(0,t.includes)(s,C))P===0?d?b?l(p,y,C,d):y.endOf(C):b?l(p,y,C,d):y.startOf(C):P===1?y.add(E,C):P===2&&y.subtract(E,C);else return}return y}function l(a,m,d,p){switch(d){case"y":return p?l(a,m,d,!1).add(11,"M").endOf("M"):m.subtract((m.month()-a+12)%12,"M").startOf("M"),m;case"Q":return p?l(a,m,d,!1).add(2,"M").endOf("M"):m.subtract((m.month()-a+3)%3,"M").startOf("M"),m;default:return}}},37556:(H,T,e)=>{"use strict";e.d(T,{IA:()=>a,Ks:()=>g,RA:()=>r,iX:()=>f,jO:()=>l,qb:()=>o,vT:()=>s});var t=e(81396),n=e(17454);const c={years:["y","Y","years"],months:["M","months"],weeks:["w","W","weeks"],days:["d","D","days"],hours:["h","H","hours"],minutes:["m","minutes"],seconds:["s","S","seconds"]};function s(m,d=!0){const p=(0,n.Z)(m);return Object.entries(p).reduce((h,[y,v])=>v&&v!==0&&!(y==="seconds"&&!d&&h)?h+`${h!==""?" ":""}${v}${c[y][0]}`:h,"")}function r(m){return m.split(" ").reduce((d,p)=>{const h=p.match(/(\d+)(.+)/),y=h?.[1],v=h?.[2];if(!(y&&v))return d;const i=Object.entries(c).find(([P,E])=>E?.includes(h[2])),u=parseInt(y,10);return i?{...d,[i[0]]:u}:d},{})}function g(m,d){return(0,t.Z)(m,d)}function f(m){const d=new Date;return g(d,m).getTime()-d.getTime()}function o(m){return!isNaN(Date.parse(m))}function l(m){for(const d of m.trim().split(" ")){const p=d.match(/(\d+)(.+)/);if(p===null||p.length!==3||!Object.entries(c).find(([y,v])=>v?.includes(p[2]))?.[0])return!1}return!0}function a(m){const d=["h","m","s","ms","us","\xB5s","ns"];for(const p of m.trim().split(" ")){const h=p.match(/([0-9]*[.]?[0-9]+)(.+)/);if(h===null||h.length!==3||!d.includes(h[2]))return!1}return!0}},47513:(H,T,e)=>{"use strict";e.d(T,{Ji:()=>s,U6:()=>r,zf:()=>c});const t="YYYY-MM-DD HH:mm:ss",n="YYYY-MM-DD HH:mm:ss.SSS";class c{constructor(){this.fullDate=t,this.fullDateMS=n,this.interval={millisecond:"HH:mm:ss.SSS",second:"HH:mm:ss",minute:"HH:mm",hour:"MM/DD HH:mm",day:"MM/DD",month:"YYYY-MM",year:"YYYY"}}update(o){this.fullDate=o.fullDate,this.interval=o.interval,o.useBrowserLocale&&this.useBrowserLocale()}useBrowserLocale(){this.fullDate=s({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.fullDateMS=this.fullDate.replace("ss","ss.SSS"),this.interval.millisecond=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second).replace("ss","ss.SSS"),this.interval.second=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second),this.interval.minute=s({hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.minute),this.interval.hour=s({month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.hour),this.interval.day=s({month:"2-digit",day:"2-digit",hour12:!1},null,this.interval.day),this.interval.month=s({year:"numeric",month:"2-digit",hour12:!1},null,this.interval.month)}getTimeFieldUnit(o){return`time:${o?this.fullDateMS:this.fullDate}`}}function s(f,o,l){if(g())return l??t;!o&&navigator&&(o=[...navigator.languages]);const a=new Intl.DateTimeFormat(o||void 0,f),m=a.formatToParts(new Date),p={year:"YYYY",month:"MM",day:"DD",hour:a.resolvedOptions().hour12?"hh":"HH",minute:"mm",second:"ss",weekday:"ddd",era:"N",dayPeriod:"A",timeZoneName:"Z"};return m.map(h=>p[h.type]||h.value).join("")}const r=new c,g=()=>!("DateTimeFormat"in Intl)||!("formatToParts"in Intl.DateTimeFormat.prototype)},38849:(H,T,e)=>{"use strict";e.d(T,{E8:()=>f,Fm:()=>o,Hk:()=>l,dq:()=>r,lf:()=>g});var t=e(92467),n=e.n(t),c=e(99919),s=e(47513);const r=(d,p)=>m(d,(0,c.Z)(p)).format(a(p)),g=(d,p)=>m(d,(0,c.Z)(p)).format(),f=(d,p)=>m(d,(0,c.Z)(p)).fromNow(),o=(d,p)=>m(d,(0,c.Z)(p)).format(`${s.U6.fullDate} z`),l=(d,p)=>m(d,(0,c.Z)(p)).format("z"),a=d=>d?.defaultWithMS?d?.format??s.U6.fullDateMS:d?.format??s.U6.fullDate,m=(d,p)=>{const h=d,y=n().tz.zone(p);if(y&&y.name)return n().utc(h).tz(y.name);switch(p){case"utc":return n().utc(h);default:return n().utc(h).local()}}},46034:(H,T,e)=>{"use strict";e.d(T,{$8:()=>s.$8,CQ:()=>c.CQ,C_:()=>c.C_,D2:()=>c.D2,E8:()=>g.E8,Fm:()=>g.Fm,GY:()=>c.GY,Hk:()=>g.Hk,IA:()=>o.IA,J:()=>f.J,Ji:()=>r.Ji,K7:()=>l.K,Kd:()=>c.Kd,Ks:()=>o.Ks,Ls:()=>c.Ls,Pr:()=>s.Pr,RA:()=>o.RA,RQ:()=>s.RQ,Rn:()=>t,U6:()=>r.U6,VJ:()=>c.VJ,Vs:()=>s.Vs,ZV:()=>s.ZV,Ze:()=>l.Z,cT:()=>n,dq:()=>g.dq,iX:()=>o.iX,i_:()=>c.i_,ig:()=>c.ig,jN:()=>c.jN,jO:()=>o.jO,k4:()=>c.k4,lf:()=>g.lf,np:()=>c.Ks,qb:()=>o.qb,v9:()=>c.v9,vT:()=>o.vT,zf:()=>r.zf,zh:()=>c.zh});var t=e(21053),n=e(33180),c=e(46519),s=e(38306),r=e(47513),g=e(38849),f=e(85052),o=e(37556),l=e(99919)},46519:(H,T,e)=>{"use strict";e.d(T,{CQ:()=>m,C_:()=>d,D2:()=>f,GY:()=>p,Kd:()=>r,Ks:()=>a,Ls:()=>v,VJ:()=>c,i_:()=>s,ig:()=>h,jN:()=>y,k4:()=>g,v9:()=>o,zh:()=>l});var t=e(36365),n=e.n(t);const c=n().ISO_8601,s=i=>{n().locale(i)},r=()=>n().locale(),g=()=>n().localeData(),f=i=>i===null||typeof i=="string"||typeof i=="number"||i instanceof Date||Array.isArray(i)&&i.every(u=>typeof u=="string"||typeof u=="number")||o(i),o=i=>n().isMoment(i),l=(i,u)=>n().utc(i,u),a=(i,u)=>n().duration(i,u),m=(i,u)=>n()(i,u),d=i=>m(i),p=(i,u,P)=>i==="utc"?l(u,P):m(u,P),h=i=>n().weekdays().findIndex(u=>u.toLowerCase()===i.toLowerCase()),y=i=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].findIndex(u=>u.toLowerCase()===i.toLowerCase()),v=i=>{const u="-weekStart",P=r().replace(u,""),E=i?y(i):-1;E!==-1?n().locale(P+u,{parentLocale:P,week:{dow:E}}):s(P)}},85052:(H,T,e)=>{"use strict";e.d(T,{J:()=>l});var t=e(82897),n=e.n(t),c=e(92467),s=e.n(c),r=e(99919),g=e(21053),f=e(47513),o=e(46519);const l=(d,p)=>(0,o.v9)(d)?d:typeof d=="string"?a(d,p):m(d,p),a=(d,p)=>{if(d.indexOf("now")!==-1)return(0,g.isValid)(d)&&(0,g.parse)(d,p?.roundUp,p?.timeZone,p?.fiscalYearStartMonth)||s()();const h=(0,r.Z)(p),y=s().tz.zone(h),v=p?.format??f.U6.fullDate;if(y&&y.name)return s().tz(d,v,y.name);switch((0,t.lowerCase)(h)){case"utc":return s().utc(d,v);default:return s()(d,v)}},m=(d,p)=>{const h=d,y=(0,r.Z)(p),v=s().tz.zone(y);if(v&&v.name)return s().tz(h,v.name);switch((0,t.lowerCase)(y)){case"utc":return s().utc(h);default:return s()(h)}}},33180:(H,T,e)=>{"use strict";e.r(T),e.d(T,{calculateInterval:()=>C,convertRawToRange:()=>y,describeInterval:()=>M,describeTextRange:()=>m,describeTimeRange:()=>d,describeTimeRangeAbbreviation:()=>h,intervalToMs:()=>O,intervalToSeconds:()=>x,isFiscal:()=>i,isRelativeTimeRange:()=>u,isValidTimeSpan:()=>p,msRangeToTimeString:()=>E,relativeToTimeRange:()=>w,roundInterval:()=>L,secondsToHms:()=>P,timeRangeToRelative:()=>B});var t=e(82897),n=e.n(t),c=e(21053),s=e(38849),r=e(46519),g=e(85052);const f={s:{display:"second"},m:{display:"minute"},h:{display:"hour"},d:{display:"day"},w:{display:"week"},M:{display:"month"},y:{display:"year"}},o=[{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],l=[{from:"now",to:"now+1m",display:"Next minute"},{from:"now",to:"now+5m",display:"Next 5 minutes"},{from:"now",to:"now+15m",display:"Next 15 minutes"},{from:"now",to:"now+30m",display:"Next 30 minutes"},{from:"now",to:"now+1h",display:"Next hour"},{from:"now",to:"now+3h",display:"Next 3 hours"},{from:"now",to:"now+6h",display:"Next 6 hours"},{from:"now",to:"now+12h",display:"Next 12 hours"},{from:"now",to:"now+24h",display:"Next 24 hours"},{from:"now",to:"now+2d",display:"Next 2 days"},{from:"now",to:"now+7d",display:"Next 7 days"},{from:"now",to:"now+30d",display:"Next 30 days"},{from:"now",to:"now+90d",display:"Next 90 days"},{from:"now",to:"now+6M",display:"Next 6 months"},{from:"now",to:"now+1y",display:"Next year"},{from:"now",to:"now+2y",display:"Next 2 years"},{from:"now",to:"now+5y",display:"Next 5 years"}],a={};(0,t.each)(o,R=>{a[R.from+" to "+R.to]=R}),(0,t.each)(l,R=>{a[R.from+" to "+R.to]=R});function m(R){const A=R.indexOf("+")!==0;R.indexOf("now")===-1&&(R=(A?"now-":"now")+R);let U=a[R+" to now"];if(U)return U;A?U={from:R,to:"now"}:U={from:"now",to:R};const I=/^now([-+])(\d+)(\w)/.exec(R);if(I){const N=I[3],F=parseInt(I[2],10),D=f[N];D&&(U.display=A?"Last ":"Next ",U.display+=F+" "+D.display,U.section=D.section,F>1&&(U.display+="s"))}else U.display=U.from+" to "+U.to,U.invalid=!0;return U}function d(R,A){const U=a[R.from.toString()+" to "+R.to.toString()];if(U)return U.display;const I={timeZone:A};if((0,r.v9)(R.from)&&(0,r.v9)(R.to))return(0,s.dq)(R.from,I)+" to "+(0,s.dq)(R.to,I);if((0,r.v9)(R.from)){const N=c.parse(R.to,!0,"utc");return N?(0,s.dq)(R.from,I)+" to "+(0,s.E8)(N,I):""}if((0,r.v9)(R.to)){const N=c.parse(R.from,!1,"utc");return N?(0,s.E8)(N,I)+" to "+(0,s.dq)(R.to,I):""}return R.to.toString()==="now"?m(R.from).display:R.from.toString()+" to "+R.to.toString()}const p=R=>R.indexOf("$")===0||R.indexOf("+$")===0?!0:m(R).invalid!==!0,h=(R,A)=>{if((0,r.v9)(R.from))return(0,s.Hk)(R.from,{timeZone:A});const U=c.parse(R.from,!0);return U?(0,s.Hk)(U,{timeZone:A}):""},y=(R,A,U)=>{const I=(0,g.J)(R.from,{roundUp:!1,timeZone:A,fiscalYearStartMonth:U}),N=(0,g.J)(R.to,{roundUp:!0,timeZone:A,fiscalYearStartMonth:U});return c.isMathString(R.from)||c.isMathString(R.to)?{from:I,to:N,raw:R}:{from:I,to:N,raw:{from:I,to:N}}};function v(R){return typeof R=="string"?R.indexOf("now")>=0:!1}function i(R){return typeof R.raw.from=="string"&&R.raw.from.indexOf("f")>0?!0:typeof R.raw.to=="string"&&R.raw.to.indexOf("f")>0}function u(R){return v(R.from)||v(R.to)}function P(R){const A=Math.floor(R/31536e3);if(A)return A+"y";const U=Math.floor(R%31536e3/86400);if(U)return U+"d";const I=Math.floor(R%31536e3%86400/3600);if(I)return I+"h";const N=Math.floor(R%31536e3%86400%3600/60);if(N)return N+"m";const F=Math.floor(R%31536e3%86400%3600%60);if(F)return F+"s";const D=Math.floor(R*1e3);return D?D+"ms":"less than a millisecond"}function E(R){const A=Number((R/1e3).toFixed()),U=Math.floor(A/60/60),I=Math.floor(A/60)-U*60,N=Number((A%60).toFixed());let F=U?U+"h":"",D=I?I+"min":"",Y=N?N+"sec":"";return F&&D?F=F+" ":F=F,(D||F)&&Y?D=D+" ":D=D,F+D+Y||"less than 1sec"}function C(R,A,U){let I=1;U&&(I=O(U));let N=L((R.to.valueOf()-R.from.valueOf())/A);return I>N&&(N=I),{intervalMs:N,interval:P(N/1e3)}}const b=/(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,S={y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001};function M(R){if(Number(R))return{sec:S.s,type:"s",count:parseInt(R,10)};const A=R.match(b);if(!A||!(0,t.has)(S,A[2]))throw new Error(`Invalid interval string, has to be either unit-less or end with one of the following units: "${Object.keys(S).join(", ")}"`);return{sec:S[A[2]],type:A[2],count:parseInt(A[1],10)}}function x(R){const A=M(R);return A.sec*A.count}function O(R){const A=M(R);return A.sec*1e3*A.count}function L(R){switch(!0){case R<10:return 1;case R<15:return 10;case R<35:return 20;case R<75:return 50;case R<150:return 100;case R<350:return 200;case R<750:return 500;case R<1500:return 1e3;case R<3500:return 2e3;case R<7500:return 5e3;case R<12500:return 1e4;case R<17500:return 15e3;case R<25e3:return 2e4;case R<45e3:return 3e4;case R<9e4:return 6e4;case R<21e4:return 12e4;case R<45e4:return 3e5;case R<75e4:return 6e5;case R<105e4:return 9e5;case R<15e5:return 12e5;case R<27e5:return 18e5;case R<54e5:return 36e5;case R<9e6:return 72e5;case R<162e5:return 108e5;case R<324e5:return 216e5;case R<864e5:return 432e5;case R<6048e5:return 864e5;case R<18144e5:return 6048e5;case R<36288e5:return 2592e6;default:return 31536e6}}function B(R,A=(0,r.CQ)()){const U=A.unix()-R.from.unix(),I=A.unix()-R.to.unix();return{from:U,to:I}}function w(R,A=(0,r.CQ)()){const U=(0,r.CQ)(A).subtract(R.from,"s"),I=R.to===0?(0,r.CQ)(A):(0,r.CQ)(A).subtract(R.to,"s");return{from:U,to:I,raw:{from:U,to:I}}}},38306:(H,T,e)=>{"use strict";e.d(T,{$8:()=>a,Pr:()=>o,RQ:()=>g,Vs:()=>f,ZV:()=>l});var t=e(82897),n=e.n(t),c=e(92467),s=e.n(c),r=e(99919),g=(v=>(v.default="",v.localBrowserTime="browser",v.utc="utc",v))(g||{});const f=v=>{switch((0,r.Z)({timeZone:v})){case"browser":return"Local browser time";case"utc":return"UTC";default:return v}},o=(v,i)=>{const u=m(v,i);return u||p(v,i)},l=(0,t.memoize)((v=!1)=>{const i=[];return v===!0?i.push("","browser","utc"):v&&i.push(...v),s().tz.names().reduce((u,P)=>{const E=y[P];return!Array.isArray(E)||E.length===0||u.push(P),u},i)}),a=(0,t.memoize)((v=!1)=>{const u=l(v).reduce((P,E)=>{const C=E.indexOf("/");if(C===-1){const S="";return P[S]=P[S]??[],P[S].push(E),P}const b=E.slice(0,C);return P[b]=P[b]??[],P[b].push(E),P},{});return Object.keys(u).map(P=>({name:P,zones:u[P]}))}),m=(v,i)=>{switch(v){case"utc":return{name:"Coordinated Universal Time",ianaName:"UTC",zone:v,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case"":{const u=(0,r.Z)(),E=(u==="browser"||u==="utc"?m(u,i):p(u,i))??{};return{countries:y[u]??[],abbreviation:"",offsetInMins:0,...E,ianaName:E.ianaName,name:"Default",zone:v}}case"browser":{const u=s().tz.guess(!0),P=p(u,i)??{};return{countries:y[u]??[],abbreviation:"Your local time",offsetInMins:new Date().getTimezoneOffset(),...P,name:"Browser Time",ianaName:P.ianaName,zone:v}}default:return}},d=v=>/^(\+|\-).+/.test(v)?"":v,p=(v,i)=>{const u=s().tz.zone(v);if(u)return{name:v,ianaName:u.name,zone:v,countries:y[v]??[],abbreviation:d(u.abbr(i)),offsetInMins:u.utcOffset(i)}},h={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},y=(()=>s().tz.countries().reduce((v,i)=>s().tz.zonesForCountry(i).reduce((P,E)=>{P[E]||(P[E]=[]);const C=h[i];return C&&P[E].push({code:i,name:C}),P},v),{}))()},85081:(H,T,e)=>{"use strict";e.d(T,{F:()=>r});var t=e(51125),n=e.n(t),c=e(46060),s=e(14542);class r{constructor(){this.subscribers=new Map,this.emitter=new(n())}publish(o){this.emitter.emit(o.type,o)}subscribe(o,l){return this.getStream(o).subscribe({next:l})}getStream(o){return new c.y(l=>{const a=m=>{l.next(m)};return this.emitter.on(o.type,a),this.subscribers.set(a,l),()=>{this.emitter.off(o.type,a),this.subscribers.delete(a)}})}newScopedBus(o,l){return new g([o],this,l)}emit(o,l){typeof o=="string"?this.emitter.emit(o,{type:o,payload:l}):this.emitter.emit(o.name,{type:o.name,payload:l})}on(o,l,a){if(l.wrapper=m=>{l(m.payload)},typeof o=="string"?this.emitter.on(o,l.wrapper):this.emitter.on(o.name,l.wrapper),a){const m=a.$on("$destroy",()=>{this.off(o,l),m()})}}off(o,l){if(typeof o=="string"){this.emitter.off(o,l.wrapper);return}this.emitter.off(o.name,l.wrapper)}removeAllListeners(){this.emitter.removeAllListeners();for(const[o,l]of this.subscribers)l.complete(),this.subscribers.delete(o)}}class g{constructor(o,l,a){this.path=o,this.eventBus=l,this.filter=m=>this.filterConfig.onlyLocal?m.origin===this:!0,this.filterConfig=a??{onlyLocal:!1}}publish(o){o.origin||(o.origin=this),this.eventBus.publish(o)}getStream(o){return this.eventBus.getStream(o).pipe((0,s.h)(this.filter))}subscribe(o,l){return this.getStream(o).subscribe({next:l})}removeAllListeners(){this.eventBus.removeAllListeners()}newScopedBus(o,l){return new g([...this.path,o],this,l)}}},55294:(H,T,e)=>{"use strict";e.d(T,{Pl:()=>g,es:()=>n,n1:()=>r,v9:()=>s,xH:()=>c});var t=e(62316);class n extends t.R{}n.type="data-hover";class c extends t.m{}c.type="data-hover-clear";class s extends t.R{}s.type="data-select";class r extends t.R{}r.type="annotation-event";class g extends t.R{}g.type="dashboard-loaded"},39253:(H,T,e)=>{"use strict";e.d(T,{X:()=>n});const t=new Set;function n(c){if(t.has(c))throw new Error(`There is already an event defined with type '${c}'`);return t.add(c),{name:c}}},60626:(H,T,e)=>{"use strict";e.d(T,{Fb:()=>c.F,Pl:()=>s.Pl,R_:()=>n.R,Xw:()=>t.X,es:()=>s.es,mA:()=>n.m,n1:()=>s.n1,v9:()=>s.v9,xH:()=>s.xH});var t=e(39253),n=e(62316),c=e(85081),s=e(55294)},62316:(H,T,e)=>{"use strict";e.d(T,{R:()=>n,m:()=>t});class t{constructor(){this.type=this.__proto__.constructor.type}}class n extends t{constructor(s){super(),this.payload=s}}},18359:(H,T,e)=>{"use strict";e.d(T,{Z:()=>n});var t=e(64140);class n extends t.B{}},36512:(H,T,e)=>{"use strict";e.d(T,{U:()=>d,g:()=>h});var t=e(82897),n=e.n(t),c=e(16911),s=e(85052),r=e(46519),g=e(14582),f=e(63279),o=e(67008),l=e(20112),a=e(59309);const m={dateTimeAsIso:!0,dateTimeAsIsoNoDateIfToday:!0,dateTimeAsUS:!0,dateTimeAsUSNoDateIfToday:!0,dateTimeAsLocal:!0,dateTimeAsLocalNoDateIfToday:!0,dateTimeFromNow:!0};function d(v){if(!v||(0,t.isEmpty)(v)||!v.field)return p;const i=v.field,u=i.config??{};let P=u.unit,E=P&&(m[P]||P.startsWith("time:")),C=!1;if(i.type===g.fS.time&&!E){if(P="dateTimeAsSystem",E=!0,i.values&&i.values.length>1){let w=i.values.get(0),R=i.values.get(i.values.length-1);typeof w=="string"?(w=(0,s.J)(w).unix(),R=(0,s.J)(R).unix()):(w/=1e3,R/=1e3),C=Math.abs(R-w)<60}}else i.type===g.fS.boolean?(0,l.br)(P)||(P="bool"):!P&&i.type===g.fS.string&&(P="string");const b=P?.startsWith("currency"),S=(0,l.br)(P),M=i.type===g.fS.number,O=!E&&!b&&!S&&!(P==="locale")&&M&&u.decimals==null,L=(0,l.Cf)(P||"none"),B=(0,a.NI)(i,v.theme);return(w,R)=>{const{mappings:A}=u,U=P==="string";E&&typeof w=="string"&&(w=(0,r.zh)(w).valueOf());let I=U?NaN:(0,f.I)(w),N,F,D,Y,j,K;if(A&&A.length>0){const Z=(0,o.vh)(A,w);Z&&(Z.text!=null&&(N=Z.text),Z.color!=null&&(Y=v.theme.visualization.getColorByName(Z.color)),Z.icon!=null&&(j=Z.icon))}if(!Number.isNaN(I)){if(N==null&&!(0,t.isBoolean)(w)){let Z;O&&R!=null?(Z=L(I,R,null,v.timeZone,C),Z.text=+Z.text+""):Z=L(I,u.decimals,null,v.timeZone,C),N=Z.text,D=Z.suffix,F=Z.prefix}if(Y==null){const Z=B(I);Y=Z.color,K=Z.percent}}if(N==null&&(0,t.isArray)(w)&&(N=(0,t.join)(w,", ")),N==null&&(N=(0,t.toString)(w),N||(u.noValue?N=u.noValue:N="")),!Y){const Z=B(-1/0);Y=Z.color,K=Z.percent}const z={text:N,numeric:I,prefix:F,suffix:D,color:Y};return j!=null&&(z.icon=j),K!=null&&(z.percent=K),z}}function p(v){return{text:(0,t.toString)(v),numeric:(0,f.I)(v)}}function h(){return v=>({text:(0,c.DP)(v)==="other"?`${JSON.stringify(v,y())}`:`${v}`,numeric:null})}const y=()=>{const v=new WeakSet;return(i,u)=>{if(typeof u=="object"&&u!==null){if(v.has(u))return;v.add(u)}return u}}},425:(H,T,e)=>{"use strict";e.d(T,{QY:()=>a,WO:()=>f,YO:()=>m,fD:()=>l});var t=e(32701),n=e(21760),c=e(66926),s=e(64140),r=e(59309),g=e(58230);const f=new s.B(()=>[{id:c.S.Fixed,name:"Single color",description:"Set a specific color",getCalculator:d},{id:c.S.Thresholds,name:"From thresholds",isByValue:!0,description:"Derive colors from thresholds",getCalculator:(p,h)=>(y,v,i)=>{const u=i??g.yM;return h.visualization.getColorByName(u.color)}},new o({id:c.S.PaletteClassic,name:"Classic palette",isContinuous:!1,isByValue:!1,getColors:p=>p.visualization.palette}),new o({id:"continuous-GrYlRd",name:"Green-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:p=>["green","yellow","red"]}),new o({id:"continuous-RdYlGr",name:"Red-Yellow-Green",isContinuous:!0,isByValue:!0,getColors:p=>["red","yellow","green"]}),new o({id:"continuous-BlYlRd",name:"Blue-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:p=>["dark-blue","super-light-yellow","dark-red"]}),new o({id:"continuous-YlRd",name:"Yellow-Red",isContinuous:!0,isByValue:!0,getColors:p=>["super-light-yellow","dark-red"]}),new o({id:"continuous-BlPu",name:"Blue-Purple",isContinuous:!0,isByValue:!0,getColors:p=>["blue","purple"]}),new o({id:"continuous-YlBl",name:"Yellow-Blue",isContinuous:!0,isByValue:!0,getColors:p=>["super-light-yellow","dark-blue"]}),new o({id:"continuous-blues",name:"Blues",isContinuous:!0,isByValue:!0,getColors:p=>["panel-bg","dark-blue"]}),new o({id:"continuous-reds",name:"Reds",isContinuous:!0,isByValue:!0,getColors:p=>["panel-bg","dark-red"]}),new o({id:"continuous-greens",name:"Greens",isContinuous:!0,isByValue:!0,getColors:p=>["panel-bg","dark-green"]}),new o({id:"continuous-purples",name:"Purples",isContinuous:!0,isByValue:!0,getColors:p=>["panel-bg","dark-purple"]})]);class o{constructor(h){this.id=h.id,this.name=h.name,this.description=h.description,this.getNamedColors=h.getColors,this.isContinuous=h.isContinuous,this.isByValue=h.isByValue}getColors(h){return this.getNamedColors?this.colorCache&&this.colorCacheTheme===h?this.colorCache:(this.colorCache=this.getNamedColors(h).map(h.visualization.getColorByName),this.colorCacheTheme=h,this.colorCache):[]}getInterpolator(){return this.interpolator||(this.interpolator=(0,t.hD)(this.colorCache)),this.interpolator}getCalculator(h,y){const v=this.getColors(y);return this.isByValue?this.isContinuous?(i,u,P)=>this.getInterpolator()(u):(i,u,P)=>v[u*(v.length-1)]:(i,u,P)=>{const E=h.state?.seriesIndex??0;return v[E%v.length]}}}function l(p){return f.get(p.config.color?.mode??c.S.Thresholds)}function a(p){return f.get(p??c.S.Thresholds)}function m(p,h){const y=l(p);if(!y.isByValue)return{color:y.getCalculator(p,h)(0,0),threshold:g.yM,percent:1};const v=(0,r.NI)(p,h),i=p.config.color?.seriesBy??"last",P=(0,n.Kx)({field:p,reducers:[i]})[i]??0;return v(P)}function d(p,h){return()=>h.visualization.getColorByName(p.config.color?.fixedColor??c.R)}},17128:(H,T,e)=>{"use strict";e.d(T,{E1:()=>p,HU:()=>m,cB:()=>v,dE:()=>y,gG:()=>C,nG:()=>i,n_:()=>d,pZ:()=>h,sg:()=>b});var t=e(82897),n=e.n(t),c=e(50235),s=e(16911),r=e(3249),g=e(21760),f=e(85854),o=e(14582),l=e(36512),a=e(89890);const m="__series.name",d="__field.displayName",p="__field.labels",h="__calc",y="__cell_",v=25,i=x=>{const{replaceVariables:O,reduceOptions:L,timeZone:B,theme:w}=x,R=L.calcs.length?L.calcs:[g.gz.last],A=[],U=(0,r.sq)(L.fields?{id:f.mi.byRegexp,options:L.fields}:{id:f.mi.numeric}),I=x.data??[],N=L.limit?L.limit:v,F={};let D=!1;for(let Y=0;Y<I.length&&!D;Y++){const j=I[Y],{timeField:K}=(0,s.sV)(j),z=new c.U(j);for(let Z=0;Z<j.fields.length&&!D;Z++){const ae=j.fields[Z],J=ae.getLinks;if(!U(ae,j,I))continue;let oe=ae.config;ae.state?.range&&(oe={...oe,...ae.state?.range});const Ee=ae.config.displayName??"",me=ae.display??(0,l.U)({field:ae,theme:x.theme,timeZone:B});if(L.values){const re=Ee.indexOf(y)>=0;for(let le=0;le<ae.values.length;le++){if(re)for(let Q=0;Q<j.fields.length;Q++){const q=j.fields[Q].values.get(le);F[y+Q]={value:q,text:(0,t.toString)(q)}}ae.state=P(ae,A.length);const pe=me(ae.values.get(le)),ee=u(j,ae,le,O,F),se=E(ee,x.fieldConfig,w);if(A.push({name:"",field:oe,display:{...pe,title:ee,color:se??pe.color},view:z,colIndex:Z,rowIndex:le,getLinks:J?()=>J({valueRowIndex:le}):()=>[],hasLinks:C(ae)}),A.length>=N){D=!0;break}}}else{const re=(0,g.Kx)({field:ae,reducers:R});for(const le of R){F[h]={value:le,text:le};const pe=me(re[le]);Ee!==""?pe.title=O(Ee,{...ae.state?.scopedVars,...F}):pe.title=(0,a.C)(ae,j,I);let ee;x.sparkline&&(ee={y:j.fields[Z],x:K},le===g.gz.last?ee.highlightIndex=ee.y.values.length-1:le===g.gz.first&&(ee.highlightIndex=0)),A.push({name:le,field:oe,display:pe,sparkline:ee,view:z,colIndex:Z,getLinks:J?()=>J({calculatedValue:pe}):()=>[],hasLinks:C(ae)})}}}}return A.length===0&&A.push(S(x)),A};function u(x,O,L,B,w){let R=[],A=0;if(O.config.displayName)return B(O.config.displayName,{...O.state?.scopedVars,...w});for(const U of x.fields)if(U!==O)if(U.type===o.fS.string){const I=U.values.get(L)??"",N=U.display?U.display(I).text:I;N.length>0&&R.push(N)}else U.type===o.fS.number&&A++;return(A||R.length===0)&&R.push((0,a.C)(O,x)),R.join(" ")}function P(x,O){return{...x.state,seriesIndex:O}}function E(x,O,L){for(const B of O.overrides)if(B.matcher.id==="byName"&&B.matcher.options===x){for(const w of B.properties)if(w.id==="color"&&w.value)return L.visualization.getColorByName(w.value.fixedColor)}return null}function C(x){return x.config?.links?.length?x.config.links.length>0:!1}function b(x){const O={title:"",text:""};let L=0,B=0;for(let w=0;w<x.length;w++){const R=x[w].display;R.text&&R.text.length>O.text.length&&(O.text=R.text),R.title&&R.title.length>O.title.length&&(O.title=R.title),R.prefix&&R.prefix.length>L&&(O.prefix=R.prefix,L=R.prefix.length),R.suffix&&R.suffix.length>B&&(O.suffix=R.suffix,B=R.suffix.length)}return O}function S(x){const O="No data",{fieldConfig:L,timeZone:B}=x,{defaults:w}=L,A=(0,l.U)({field:{type:o.fS.other,config:w},theme:x.theme,timeZone:B})(null),U=M(A,O);return{name:O,field:{...w,max:w.max??0,min:w.min??0},display:{text:U,numeric:0,color:A.color},hasLinks:!1}}function M(x,O){return!x||(0,t.isEmpty)(x.text)?O:x.text}},36998:(H,T,e)=>{"use strict";e.d(T,{SM:()=>C,Of:()=>B,Xu:()=>E,oB:()=>L,Cc:()=>w,gb:()=>O});var t=e(82897),n=e(68404),c=e(64076),s=e(16911),r=e(38067),g=e(64724),f=e(21760),o=e(3249),l=e(14582),a=e(66926),m=e(83383),d=e(89029),p=e(20112),h=e(36512),y=e(89890),v=e(94847),i=e(35363),u=e(15355);function P(R,A,U){return new Proxy({},{get:(I,N)=>{if(N==="name")return R.name;if(N==="displayName")return(0,y.C)(R,A,U);if(N==="labels"||N==="formattedLabels")return R.labels?{...R.labels,__values:Object.values(R.labels).sort().join(", "),toString:()=>(0,u.aA)(R.labels,"",!0)}:""}})}function E(R){let A=null,U=null;const I=[f.gz.min,f.gz.max];for(const N of R)for(const F of N.fields)if(F.type===l.fS.number){const D=(0,f.Kx)({field:F,reducers:I}),Y=D[f.gz.min],j=D[f.gz.max];(A===null||Y<A)&&(A=Y),(U===null||j>U)&&(U=j)}return{min:A,max:U,delta:(U??0)-(A??0)}}function C(R){if(!R.data)return[];const A=R.fieldConfig;if(!A)return R.data;const U=R.fieldConfigRegistry??i.N;let I=0,N;const F=[];if(A.overrides)for(const D of A.overrides){const Y=o.Ls.get(D.matcher.id);Y&&F.push({match:Y.get(D.matcher.options),properties:D.properties})}return R.data.map((D,Y)=>{const j={...D};j.fields=j.fields.map(z=>({...z,config:(0,t.cloneDeep)(z.config),state:{...z.state}}));const K={__series:{text:"Series",value:{name:(0,y.n)(j,Y)}}};for(const z of j.fields){const Z=z.config;z.state.scopedVars={...K,__field:{text:"Field",value:P(z,j,R.data)}};const ae={field:z,data:R.data,dataFrameIndex:Y,replaceVariables:R.replaceVariables,fieldConfigRegistry:U};M(Z,A.defaults,ae);for(const Ee of F)if(Ee.match(z,j,R.data))for(const me of Ee.properties)S(Z,me,ae);let J=z.type;if(!J||J===l.fS.other){const Ee=(0,s.fu)(z);Ee&&(J=Ee)}let oe;if(z.type===l.fS.number){!N&&(!(0,t.isNumber)(Z.min)||!(0,t.isNumber)(Z.max))&&(N=E(R.data));const Ee=Z.min??N.min,me=Z.max??N.max;oe={min:Ee,max:me,delta:me-Ee}}z.state.seriesIndex=I,z.state.range=oe,z.type=J,z.type!==l.fS.time&&I++,z.display=(0,h.U)({field:z,theme:R.theme,timeZone:R.timeZone}),z.config.unit!=="dateTimeFromNow"&&(z.display=b(z.display,2500)),z.getLinks=L(j,z,z.state.scopedVars,ae.replaceVariables,R.timeZone)}return j})}function b(R,A=2500){const U=new Map;for(let I=-1;I<=15;I++)U.set(I,new Map);return(I,N)=>{let F=U.get(N??-1),D=F.get(I);return D||(F.size===A&&F.clear(),D=R(I,N),D.color&&(D.color=(0,g.asHexString)(D.color)),F.set(I,D)),D}}function S(R,A,U){const N=U.fieldConfigRegistry.getIfExists(A.id);if(!N)return;const F=N.process(A.value,U,N.settings);F==null?N.isCustom&&R.custom?(0,t.unset)(R.custom,N.path):(0,t.unset)(R,N.path):N.isCustom?(R.custom||(R.custom={}),(0,t.set)(R.custom,N.path,F)):(0,t.set)(R,N.path,F)}function M(R,A,U){for(const I of U.fieldConfigRegistry.list())I.isCustom&&!R.custom&&(R.custom={}),x(I.isCustom?R.custom:R,I.isCustom?A.custom:A,I,U);O(R)}function x(R,A,U,I){const N=(0,t.get)(R,U.path);if(N==null){const F=I.fieldConfigRegistry.getIfExists(U.id);if(!F)return;if(F&&F.shouldApply(I.field)){const D=F.process((0,t.get)(A,F.path),I,F.settings);D!=null&&(0,t.set)(R,F.path,D)}}}function O(R){const{thresholds:A}=R;if(R.color?R.color.mode||delete R.color:A&&(R.color={mode:a.S.Thresholds}),R.hasOwnProperty("min")&&R.hasOwnProperty("max")&&R.min>R.max){const U=R.max;R.max=R.min,R.min=U}}const L=(R,A,U,I,N)=>F=>{if(!A.config.links||A.config.links.length===0)return[];const D=m.u.getTimeRangeUrlParams(),{timeField:Y}=(0,s.sV)(R);return A.config.links.map(j=>{const K=m.u.getVariablesUrlParams();let z={},Z={};if(F.valueRowIndex!==void 0&&!isNaN(F.valueRowIndex)){const Ee=(0,v.z)({frame:R,rowIndex:F.valueRowIndex,timeZone:N});Z={raw:A.values.get(F.valueRowIndex),numeric:Ee[A.name].numeric,text:Ee[A.name].text,time:Y?Y.values.get(F.valueRowIndex):void 0},z={__data:{value:{name:R.name,refId:R.refId,fields:Ee},text:"Data"}}}else F.calculatedValue&&(Z={raw:F.calculatedValue.numeric,numeric:F.calculatedValue.numeric,text:(0,p.zc)(F.calculatedValue)});const ae={...U,__value:{text:"Value",value:Z},...z,[d.W.keepTime]:{text:D,value:D},[d.W.includeVars]:{text:K,value:K}};if(j.onClick)return{href:j.url,title:I(j.title||"",ae),target:j.targetBlank?"_blank":void 0,onClick:(Ee,me)=>{j.onClick({origin:me??A,e:Ee,replaceVariables:re=>I(re,ae)})},origin:A};if(j.internal)return(0,d._)({link:j,internalLink:j.internal,scopedVars:ae,field:A,range:{},replaceVariables:I});let J=j.onBuildUrl?j.onBuildUrl({origin:A,replaceVariables:I}):j.url;return J&&(m.u.assureBaseUrl(J.replace(/\n/g,"")),J=I(J,ae),J=m.u.processUrl(J)),{href:J,title:I(j.title||"",ae),target:j.targetBlank?"_blank":void 0,origin:A}})};function B(R){if(!R||R.length===0)return[];const A=[...R],U=(0,h.g)();for(let I=0;I<A.length;I++){const N={...A[I]},F=[...N.fields];for(let D=0;D<F.length;D++)F[D]={...F[D],display:U};A[I]={...N,fields:F}}return A}function w(R,A,U,I,N,F){const D=R?.fieldConfigRegistry,Y=(0,n.useRef)(0),j=(0,c.Z)(U?.series);return(0,n.useMemo)(()=>{if(!D||!A||!U)return;const K=U?.series;return U.structureRev==null&&K&&j&&!(0,r.nl)(K,j,r.Ch)&&Y.current++,{structureRev:Y.current,...U,series:C({data:K,fieldConfig:A,fieldConfigRegistry:D,replaceVariables:F,theme:N,timeZone:I})}},[D,A,U,j,I,N,F])}},89890:(H,T,e)=>{"use strict";e.d(T,{C:()=>s,n:()=>c});var t=e(14582),n=e(15355);function c(o,l){if(o.name)return o.name;const a=[];for(const m of o.fields)m.labels&&Object.keys(m.labels).length>0&&a.push(m);return a.length===1?(0,n.aA)(a[0].labels):l===void 0?o.fields.filter(m=>m.type!==t.fS.time).map(m=>s(m,o)).join(", "):o.refId?`Series (${o.refId})`:`Series (${l})`}function s(o,l,a){const m=o.state?.displayName,d=Boolean(a&&a.length>1);if(m&&d===o.state?.multipleFrames)return m;const p=r(o,l,a);return o.state=o.state||{},o.state.displayName=p,o.state.multipleFrames=d,p}function r(o,l,a){const m=o.config?.displayName&&o.config?.displayName.length;let d=m?o.config.displayName:o.name;if(m)return d;if(l&&o.config?.displayNameFromDS)return o.config.displayNameFromDS;if(o.type===t.fS.time&&!o.labels)return d??t.Ls;let p=[],h=!1;if(a&&a.length>1){for(let i=1;i<a.length;i++)if(a[i].name!==a[i-1].name){h=!0;break}}let y=!1,v=!1;if(h&&l?.name&&(p.push(l.name),y=!0),o.name&&o.name!==t.M5&&p.push(o.name),o.labels&&l){let i=f(a??[l]);if(i)o.labels[i]&&(p.push(o.labels[i]),v=!0);else{let u=(0,n.aA)(o.labels);u&&(p.push(u),v=!0)}}return l&&!y&&!v&&o.name===t.M5&&l.name&&l.name.length>0&&(p.push(l.name),y=!0),p.length?d=p.join(" "):o.name?d=o.name:d=t.M5,d===o.name&&(d=g(o,l)),d}function g(o,l){let a=0,m=!1;if(l)for(let d=0;d<l.fields.length;d++){const p=l.fields[d];if(o===p){if(m=!0,a>0){a++;break}}else if(o.name===p.name&&(a++,m))break}return a?`${o.name} ${a}`:o.name}function f(o){let l=null;for(let a=0;a<o.length;a++){const m=o[a];for(const d of m.fields)if(d.labels){for(const p in d.labels)if(l===null)l=p;else if(p!==l)return null}}return l}},94847:(H,T,e)=>{"use strict";e.d(T,{z:()=>r});var t=e(82897),n=e.n(t),c=e(20112),s=e(36512);function r(g){return new Proxy({},{get:(f,o)=>{let l=g.frame.fields.find(p=>o===p.name);if(!l){const p=(0,t.toNumber)(o);l=g.frame.fields[p]}if(l||(l=g.frame.fields.find(p=>o===p.config.displayName)),l||(l=g.frame.fields.find(p=>p.labels?o===p.labels.name:!1)),!l)return;const a=l.display??(0,s.U)(),m=l.values.get(g.rowIndex),d=a(m);return d.toString=()=>(0,c.zc)(d),d}})}},37741:(H,T,e)=>{"use strict";e.d(T,{AE:()=>s.AE,CZ:()=>a.C,Cc:()=>o.Cc,E1:()=>t.E1,HU:()=>t.HU,N6:()=>c.N,NI:()=>m.NI,NN:()=>s.NN,Of:()=>o.Of,Oh:()=>s.Oh,QY:()=>r.QY,SM:()=>o.SM,SO:()=>c.S,U_:()=>n.U,VB:()=>s.VB,W0:()=>s.W0,W4:()=>s.W4,WO:()=>r.WO,YO:()=>r.YO,ZD:()=>g.Z,ZN:()=>s.ZN,bP:()=>f.bP,cB:()=>t.cB,dE:()=>t.dE,fD:()=>r.fD,gE:()=>n.g,gG:()=>t.gG,gb:()=>o.gb,kG:()=>s.kG,m1:()=>f.m1,nG:()=>t.nG,n_:()=>t.n_,nf:()=>a.n,op:()=>s.op,pZ:()=>t.pZ,sg:()=>t.sg,uj:()=>s.uj,xD:()=>m.xD,zv:()=>l.z});var t=e(17128),n=e(36512),c=e(35363),s=e(78798),r=e(425),g=e(18359),f=e(58230),o=e(36998),l=e(94847),a=e(89890),m=e(59309)},78798:(H,T,e)=>{"use strict";e.d(T,{AE:()=>g,NN:()=>s,Oh:()=>n,VB:()=>l,W0:()=>c,W4:()=>a,ZN:()=>o,kG:()=>t,op:()=>f,uj:()=>r});const t=(m,d,p)=>m,n=(m,d,p)=>{if(m!=null)return parseFloat(m)},c=(m,d,p)=>(delete d.field?.state?.displayName,f(m,d,p)),s=(m,d,p)=>m,r=(m,d,p)=>m,g=(m,d,p)=>m,f=(m,d,p)=>m==null?m:p&&p.expandTemplateVars&&d.replaceVariables?d.replaceVariables(m,d.field.state.scopedVars):`${m}`,o=(m,d,p)=>m,l=(m,d,p)=>m,a=(m,d,p)=>m},59309:(H,T,e)=>{"use strict";e.d(T,{NI:()=>f,dz:()=>l,xD:()=>a});var t=e(82897),n=e.n(t),c=e(21760),s=e(14582),r=e(425),g=e(58230);function f(m,d){if(m.type===s.fS.boolean)return o(m,d);const h=(0,r.fD)(m).getCalculator(m,d),y=m.state?.range??l(m);return v=>{let i=0;v!==-1/0&&(i=(v-y.min)/y.delta,Number.isNaN(i)&&(i=0));const u=(0,g.pD)(m,v,i);return{percent:i,threshold:u,color:h(v,i,u)}}}function o(m,d){const p={color:d.visualization.getColorByName("green"),percent:1,threshold:void 0},h={color:d.visualization.getColorByName("red"),percent:0,threshold:void 0},y=(0,r.fD)(m);if(y.isContinuous&&y.getColors){const v=y.getColors(d);p.color=v[v.length-1],h.color=v[0]}return v=>Boolean(v)?p:h}function l(m){if(m.type!==s.fS.number)return{min:0,max:100,delta:100};let d=m.config.min,p=m.config.max;if(!(0,t.isNumber)(d)||!(0,t.isNumber)(p))if(m.values&&m.values.length){const h=(0,c.Kx)({field:m,reducers:[c.gz.min,c.gz.max]});(0,t.isNumber)(d)||(d=h[c.gz.min]),(0,t.isNumber)(p)||(p=h[c.gz.max])}else d=0,p=100;return{min:d,max:p,delta:p-d}}function a(m,d){const{config:p}=m;let{min:h,max:y}=p;return(0,t.isNumber)(h)&&(0,t.isNumber)(y)?p:d||!m.state?.range?{...p,...l(m)}:{...p,...m.state.range}}},35363:(H,T,e)=>{"use strict";e.d(T,{N:()=>c,S:()=>s});var t=e(64140),n=e(18359);const c=new n.Z,s=new t.B},58230:(H,T,e)=>{"use strict";e.d(T,{bP:()=>g,m1:()=>s,pD:()=>r,yM:()=>c});var t=e(66926),n=e(24177);const c={value:0,color:t.R};function s(f,o){if(!o||o.length===0)return c;let l=o[0];for(const a of o)if(f>=a.value)l=a;else break;return l}function r(f,o,l){const{thresholds:a}=f.config;return a?.mode===n.H.Percentage?s(l*100,a?.steps):s(o,a?.steps)}function g(f){return f.sort((o,l)=>o.value-l.value)}},87456:(H,T,e)=>{"use strict";e.d(T,{q:()=>t.q1});var t=e(40538)},24034:(H,T,e)=>{"use strict";e.r(T),e.d(T,{AnnotationChangeEvent:()=>m.n1,AppendedVectors:()=>s.l$,ArrayDataFrame:()=>r.iB,ArrayVector:()=>s.Gt,AsNumberVector:()=>s.sq,BinaryOperationID:()=>t.LH,BinaryOperationVector:()=>s.rM,BusEventBase:()=>m.mA,BusEventWithPayload:()=>m.R_,ByNamesMatcherMode:()=>g.Ys,CSVHeaderStyle:()=>t.x5,CSVReader:()=>t.QM,CircularDataFrame:()=>r.a2,CircularVector:()=>s.dV,ConstantVector:()=>s.uI,DEFAULT_FIELD_DISPLAY_VALUES_LIMIT:()=>a.cB,DashboardLoadedEvent:()=>m.Pl,DataFrameView:()=>r.US,DataHoverClearEvent:()=>m.xH,DataHoverEvent:()=>m.es,DataLinkBuiltInVars:()=>t.WC,DataSelectEvent:()=>m.v9,DataSourcePluginContextProvider:()=>E.n,DataTransformerID:()=>g.Wk,DocsId:()=>t.xV,EventBusSrv:()=>m.Fb,FieldCache:()=>r.N,FieldConfigEditorBuilder:()=>t.vo,FieldConfigOptionsRegistry:()=>a.ZD,FieldMatcherID:()=>g.mi,FormattedVector:()=>s.$Y,FrameGeometrySourceMode:()=>h.q,FrameMatcherID:()=>g.E4,ISO_8601:()=>f.VJ,IndexVector:()=>s.rm,InternalTimeZones:()=>f.RQ,LayoutModes:()=>y.l,LegacyMappingType:()=>t.HU,LogsParsers:()=>t.bA,MISSING_VALUE:()=>r.Yi,MatcherID:()=>g.Ff,MutableDataFrame:()=>r.vA,NodeGraphDataFrameFieldNames:()=>t.zG,PanelOptionsEditorBuilder:()=>t.rt,PanelPlugin:()=>v.c,PluginContextProvider:()=>P.b,ReducerID:()=>g.gz,Registry:()=>t.Bz,SortedVector:()=>s.oH,SystemDateFormatsState:()=>f.zf,VAR_CALC:()=>a.pZ,VAR_CELL_PREFIX:()=>a.dE,VAR_FIELD_LABELS:()=>a.E1,VAR_FIELD_NAME:()=>a.n_,VAR_SERIES_NAME:()=>a.HU,ValueMatcherID:()=>g.mE,addDurationToDate:()=>f.Ks,addLogLevelToSeries:()=>t.Ar,anySeriesWithTimeField:()=>r.m$,anyToNumber:()=>t.IX,applyFieldOverrides:()=>a.SM,applyRawFieldOverrides:()=>a.Of,arrayUtils:()=>t.sq,binaryOperators:()=>t.nk,booleanOverrideProcessor:()=>a.W4,booleanValueFormatter:()=>l.IR,buildHistogram:()=>g.gY,calculateFieldStats:()=>t.zd,calculateLogsLabelStats:()=>t.lL,calculateStats:()=>t.i6,checkLogsError:()=>t.Mi,classicColors:()=>t.ZC,colorManipulator:()=>d.r,compareArrayValues:()=>r.nl,compareDataFrameStructures:()=>r.Ch,convertOldAngularValueMappings:()=>t.Jb,createDimension:()=>r.q2,createFieldConfigRegistry:()=>u.j,createTheme:()=>d.j,dataFrameFromJSON:()=>r.vP,dataFrameToJSON:()=>r.Y,dataLinksOverrideProcessor:()=>a.NN,dateMath:()=>f.Rn,dateTime:()=>f.CQ,dateTimeAsMoment:()=>f.C_,dateTimeForTimeZone:()=>f.GY,dateTimeFormat:()=>f.dq,dateTimeFormatISO:()=>f.lf,dateTimeFormatTimeAgo:()=>f.E8,dateTimeFormatWithAbbrevation:()=>f.Fm,dateTimeParse:()=>f.J,decodeFieldValueEntities:()=>r.Jy,decodeFieldValueEnums:()=>r.Ib,deprecationWarning:()=>t.d9,displayNameOverrideProcessor:()=>a.W0,doStandardCalcs:()=>g.uP,durationToMilliseconds:()=>f.iX,ensureTimeField:()=>g.J_,escapeRegex:()=>o.yI,escapeStringForRegex:()=>o.GE,escapeUnescapedString:()=>t.l3,eventFactory:()=>m.Xw,fieldColorModeRegistry:()=>a.WO,fieldMatchers:()=>g.Ls,fieldReducers:()=>g.TB,filterFieldConfigOverrides:()=>i.aS,findCommonLabels:()=>t.FT,findHighlightChunksInText:()=>o.Xt,findMatchesInText:()=>o.lu,findUniqueLabels:()=>t.IU,formatLabels:()=>t.aA,formattedValueToString:()=>l.zc,frameMatchers:()=>g.Ac,getActiveThreshold:()=>a.m1,getAllValuesFromDimension:()=>r.r7,getColumnFromDimension:()=>r.$q,getColumnsFromDimension:()=>r.GV,getDataFrameRow:()=>r.fh,getDataSourceRef:()=>t.iU,getDataSourceUID:()=>t.BT,getDimensionByName:()=>r.YP,getDisplayProcessor:()=>a.U_,getDisplayValueAlignmentFactors:()=>a.sg,getFieldColorMode:()=>a.QY,getFieldColorModeForField:()=>a.fD,getFieldConfigWithMinMax:()=>a.xD,getFieldDisplayName:()=>a.CZ,getFieldDisplayValues:()=>a.nG,getFieldDisplayValuesProxy:()=>a.zv,getFieldMatcher:()=>g.sq,getFieldSeriesColor:()=>a.YO,getFieldTypeFromValue:()=>r.DP,getFlotPairs:()=>t.k8,getFlotPairsConstant:()=>t.HE,getFrameDisplayName:()=>a.nf,getFrameMatchers:()=>g.b9,getHistogramFields:()=>g.qr,getLinksSupplier:()=>S.oB,getLocale:()=>f.Kd,getLocaleData:()=>f.k4,getLogLevel:()=>t.ZO,getLogLevelFromKey:()=>t.jx,getPanelOptionsWithDefaults:()=>i.d4,getParser:()=>t.MT,getProcessedDataFrames:()=>r.F9,getRawDisplayProcessor:()=>a.gE,getScaleCalculator:()=>a.NI,getSeriesTimeStep:()=>t.e4,getTimeField:()=>r.sV,getTimeZone:()=>f.Ze,getTimeZoneGroups:()=>f.$8,getTimeZoneInfo:()=>f.Pr,getTimeZones:()=>f.ZV,getValueFormat:()=>l.Cf,getValueFormats:()=>l.QW,getValueFormatterIndex:()=>l.Td,getValueFromDimension:()=>r.jC,getValueMatcher:()=>g.IG,getWeekdayIndex:()=>f.ig,getWeekdayIndexByEnglishName:()=>f.jN,guessDecimals:()=>t.dP,guessFieldTypeForField:()=>r.fu,guessFieldTypeFromNameAndValue:()=>r._m,guessFieldTypeFromValue:()=>r.LI,guessFieldTypes:()=>r.SX,hasLinks:()=>a.gG,hasMsResolution:()=>t.fp,histogramBucketSizes:()=>g.Zi,histogramFieldInfo:()=>g.py,histogramFieldsToFrame:()=>g.zM,histogramFrameBucketMaxFieldName:()=>g.cO,histogramFrameBucketMinFieldName:()=>g.wL,histogramTransformer:()=>g.Op,identityOverrideProcessor:()=>a.kG,incrRound:()=>g.Jz,incrRoundDn:()=>g.mB,incrRoundUp:()=>g.UO,intervalToAbbreviatedDurationString:()=>f.vT,isBooleanUnit:()=>l.br,isCustomFieldProp:()=>i.Lc,isDataFrame:()=>r.aY,isDataSourcePluginContext:()=>b.v,isDataSourceRef:()=>t.cv,isDateTime:()=>f.v9,isDateTimeInput:()=>f.D2,isHistogramFrameBucketMaxFieldName:()=>g.kl,isHistogramFrameBucketMinFieldName:()=>g.Ok,isStandardFieldProp:()=>i._k,isTableData:()=>r.Ji,isValidDate:()=>f.qb,isValidDuration:()=>f.jO,isValidGoDuration:()=>f.IA,localTimeFormat:()=>f.Ji,locale:()=>l.SP,locationUtil:()=>t.uT,makeClassES5Compatible:()=>t.s2,mapInternalLinkToExplore:()=>t._N,matchAllLabels:()=>t.VS,monacoLanguageRegistry:()=>p.F,numberOverrideProcessor:()=>a.Oh,objRemoveUndefined:()=>t.Hh,onUpdateDatasourceJsonDataOption:()=>t._R,onUpdateDatasourceJsonDataOptionChecked:()=>t.hz,onUpdateDatasourceJsonDataOptionSelect:()=>t.nx,onUpdateDatasourceOption:()=>t.z_,onUpdateDatasourceResetOption:()=>t.HD,onUpdateDatasourceSecureJsonDataOption:()=>t.fi,onUpdateDatasourceSecureJsonDataOptionSelect:()=>t.TX,outerJoinDataFrames:()=>g.JP,parseDuration:()=>f.RA,parseFlags:()=>o.TL,parseLabels:()=>t.J8,rangeUtil:()=>f.cT,readCSV:()=>t.uP,reduceField:()=>g.Kx,renderMarkdown:()=>o.ap,renderTextPanelMarkdown:()=>o.xH,restoreCustomOverrideRules:()=>i.__,reverseDataFrame:()=>r.Y6,roundDecimals:()=>t.O9,scaledUnits:()=>l.Qj,selectOverrideProcessor:()=>a.AE,serializeStateToUrlParam:()=>t.S,setLocale:()=>f.i_,setTimeZoneResolver:()=>f.K7,setWeekStart:()=>f.Ls,shallowCompare:()=>r.Vv,simpleCountUnit:()=>l.SR,sortDataFrame:()=>r.aK,sortInAscendingOrder:()=>t.DA,sortInDescendingOrder:()=>t.$8,sortLogRows:()=>t.$u,sortLogsResult:()=>t.j0,sortThresholds:()=>a.bP,standardEditorsRegistry:()=>a.SO,standardFieldConfigEditorRegistry:()=>a.N6,standardTransformers:()=>g.YR,standardTransformersRegistry:()=>g.Ze,stringFormater:()=>l.vb,stringOverrideProcessor:()=>a.op,stringStartsAsRegEx:()=>o.oH,stringToJsRegex:()=>o.jO,stringToMs:()=>o.e0,systemDateFormats:()=>f.U6,textUtil:()=>o.QX,thresholdsOverrideProcessor:()=>a.ZN,timeZoneAbbrevation:()=>f.Hk,timeZoneFormatUserFriendly:()=>f.Vs,toCSV:()=>t.MJ,toDataFrame:()=>r.g0,toDataFrameDTO:()=>r.og,toDuration:()=>f.np,toFilteredDataFrameDTO:()=>r.Aw,toFixed:()=>l.FH,toFixedScaled:()=>l.bn,toFixedUnit:()=>l.q2,toFloatOrUndefined:()=>o.dz,toIntegerOrUndefined:()=>o.By,toLegacyResponseData:()=>r.Zr,toNumberString:()=>o.PF,toOption:()=>t.Er,toPascalCase:()=>o.Mh,toUtc:()=>f.zh,transformDataFrame:()=>g.Hz,unEscapeStringFromRegex:()=>o.x6,unitOverrideProcessor:()=>a.VB,updateDatasourcePluginJsonDataOption:()=>t.tp,updateDatasourcePluginOption:()=>t.fd,updateDatasourcePluginResetOption:()=>t.Mf,updateDatasourcePluginSecureJsonDataOption:()=>t.uw,urlUtil:()=>t.Cj,useFieldOverrides:()=>a.Cc,usePluginContext:()=>C.g,validateFieldConfig:()=>a.gb,valueMappingsOverrideProcessor:()=>a.uj,valueMatchers:()=>g.U8,vectorator:()=>s.sD,withLoadingIndicator:()=>t.xc});var t=e(75463),n=e(19108),c={};for(const M in n)["default","LayoutModes","PanelPlugin","getPanelOptionsWithDefaults","filterFieldConfigOverrides","restoreCustomOverrideRules","isCustomFieldProp","isStandardFieldProp","createFieldConfigRegistry","PluginContextProvider","DataSourcePluginContextProvider","usePluginContext","isDataSourcePluginContext","getLinksSupplier","BinaryOperationID","CSVHeaderStyle","CSVReader","DataLinkBuiltInVars","DocsId","FieldConfigEditorBuilder","LegacyMappingType","LogsParsers","NodeGraphDataFrameFieldNames","PanelOptionsEditorBuilder","Registry","addLogLevelToSeries","anyToNumber","arrayUtils","binaryOperators","calculateFieldStats","calculateLogsLabelStats","calculateStats","checkLogsError","classicColors","convertOldAngularValueMappings","deprecationWarning","escapeUnescapedString","findCommonLabels","findUniqueLabels","formatLabels","getDataSourceRef","getDataSourceUID","getFlotPairs","getFlotPairsConstant","getLogLevel","getLogLevelFromKey","getParser","getSeriesTimeStep","guessDecimals","hasMsResolution","isDataSourceRef","locationUtil","makeClassES5Compatible","mapInternalLinkToExplore","matchAllLabels","objRemoveUndefined","onUpdateDatasourceJsonDataOption","onUpdateDatasourceJsonDataOptionChecked","onUpdateDatasourceJsonDataOptionSelect","onUpdateDatasourceOption","onUpdateDatasourceResetOption","onUpdateDatasourceSecureJsonDataOption","onUpdateDatasourceSecureJsonDataOptionSelect","parseLabels","readCSV","roundDecimals","serializeStateToUrlParam","sortInAscendingOrder","sortInDescendingOrder","sortLogRows","sortLogsResult","toCSV","toOption","updateDatasourcePluginJsonDataOption","updateDatasourcePluginOption","updateDatasourcePluginResetOption","updateDatasourcePluginSecureJsonDataOption","urlUtil","withLoadingIndicator"].indexOf(M)<0&&(c[M]=()=>n[M]);e.d(T,c);var s=e(78330),r=e(31815),g=e(42960),f=e(46034),o=e(8928),l=e(41024),a=e(37741),m=e(60626),d=e(4765),p=e(82513),h=e(87456),y=e(1762),v=e(48513),i=e(2118),u=e(39778),P=e(20231),E=e(94929),C=e(59417),b=e(61345),S=e(36998)},82513:(H,T,e)=>{"use strict";e.d(T,{F:()=>t.F});var t=e(87442)},87442:(H,T,e)=>{"use strict";e.d(T,{F:()=>n});var t=e(64140);const n=new t.B},48513:(H,T,e)=>{"use strict";e.d(T,{c:()=>o});var t=e(82897),n=e.n(t),c=e(18359),s=e(24699),r=e(99227),g=e(91171),f=e(39778);class o extends s.Sg{constructor(a){super(),this._fieldConfigDefaults={defaults:{},overrides:[]},this._initConfigRegistry=()=>new c.Z,this.dataSupport={annotations:!1,alertStates:!1},this.panel=a}get defaults(){let a=this._defaults||{};if(!this._defaults&&this.optionsSupplier){const m=new g.rt;this.optionsSupplier(m,{data:[]});for(const d of m.getItems())d.defaultValue!=null&&(0,t.set)(a,d.path,d.defaultValue)}return a}get fieldConfigDefaults(){const a=this._fieldConfigDefaults.defaults;a.custom={};for(const m of this.fieldConfigRegistry.list())m.defaultValue!==void 0&&(0,t.set)(a,m.id,m.defaultValue);return{defaults:{...a},overrides:this._fieldConfigDefaults.overrides}}setDefaults(a){return(0,r.d)("PanelPlugin","setDefaults","setPanelOptions"),this._defaults=a,this}get fieldConfigRegistry(){return this._fieldConfigRegistry||(this._fieldConfigRegistry=this._initConfigRegistry()),this._fieldConfigRegistry}setEditor(a){return(0,r.d)("PanelPlugin","setEditor","setPanelOptions"),this.editor=a,this}setNoPadding(){return this.noPadding=!0,this}setMigrationHandler(a){return this.onPanelMigration=a,this}setPanelChangeHandler(a){return this.onPanelTypeChanged=a,this}setPanelOptions(a){return this.optionsSupplier=a,this}getPanelOptionsSupplier(){return this.optionsSupplier??(()=>{})}setDataSupport(a){return this.dataSupport={...this.dataSupport,...a},this}useFieldConfig(a={}){return this._initConfigRegistry=()=>(0,f.j)(a,this.meta.name),this}setSuggestionsSupplier(a){return this.suggestionsSupplier=a,this}getSuggestionsSupplier(){return this.suggestionsSupplier}hasPluginId(a){return this.meta.id===a}}},2118:(H,T,e)=>{"use strict";e.d(T,{Lc:()=>h,__:()=>p,_k:()=>y,aS:()=>l,d4:()=>f});var t=e(82897),n=e.n(t),c=e(425),s=e(66926),r=e(68061),g=e(24177);function f({plugin:v,currentOptions:i,currentFieldConfig:u,isAfterPluginChange:P}){const E=(0,t.mergeWith)({},v.defaults,i||{},(S,M)=>{if((0,t.isArray)(M))return M}),C=o(u,v),b=m(v,C,P);return{options:E,fieldConfig:b}}function o(v,i){const u=i.fieldConfigDefaults,P={defaults:(0,t.mergeWith)({},u.defaults,v?v.defaults:{},(E,C)=>{if((0,t.isArray)(C))return C}),overrides:v?.overrides??[]};a(P.defaults,"",i.fieldConfigRegistry),P.defaults.thresholds&&d(P.defaults.thresholds),P.overrides=l(P.overrides,E=>i.fieldConfigRegistry.getIfExists(E.id)!==void 0);for(const E of P.overrides)for(const C of E.properties)C.id==="thresholds"&&d(C.value);return P}function l(v,i){return v.map(u=>{const P=u.properties.filter(i);return{...u,properties:P}}).filter(u=>u.properties.length>0)}function a(v,i,u){let P=!1;for(const E of Object.keys(v)){const C=v[E],b=`${i}${E}`,S=!!u.getIfExists(b);if(S){P=!0;continue}(0,t.isArray)(C)||!(0,t.isObject)(C)?S||(0,t.unset)(v,E):a(C,`${b}.`,u)||(0,t.unset)(v,E)}return P}function m(v,i,u){if(!u)return i;const P=v.fieldConfigRegistry.getIfExists(r.qb.Color);if(P&&P.settings){const E=P.settings,C=c.WO.getIfExists(i.defaults.color?.mode);if(!E.byValueSupport&&(!C||C.isByValue))return i.defaults.color={mode:s.S.PaletteClassic},i;if(E.byValueSupport&&E.preferThresholdsMode&&C?.id!==s.S.Fixed&&(!C||!C.isByValue))return i.defaults.color={mode:s.S.Thresholds},i;if(E.bySeriesSupport&&C?.isByValue)return i.defaults.color={mode:s.S.PaletteClassic},i}return i}function d(v){v.mode||(v.mode=g.H.Absolute),v.steps?v.steps.length&&(v.steps[0].value=-1/0):v.steps=[]}function p(v,i){const u={defaults:{...v.defaults,custom:i.defaults.custom},overrides:[...v.overrides]};for(const P of i.overrides)for(const E of P.properties)if(h(E)){const C=u.overrides.find(b=>(0,t.isEqual)(b.matcher,P.matcher));C?C!==P&&C.properties.push(E):u.overrides.push(P)}return u}function h(v){return v.id.startsWith("custom.")}function y(v){return!h(v)}},39778:(H,T,e)=>{"use strict";e.d(T,{j:()=>s});var t=e(18359),n=e(35363),c=e(91171);function s(g={},f){const o=new t.Z,l=n.N.list(),a={};if(g.useCustomConfig){const m=new c.vo;g.useCustomConfig(m);for(const d of m.getRegistry().list())if(d.isCustom=!0,d.id="custom."+d.id,r(d,l)){const p=a[d.category[0]]??[];p.push(d),a[d.category[0]]=p}else o.register(d)}for(let m of l)if(!(g.disableStandardOptions&&g.disableStandardOptions.indexOf(m.id)>-1)){if(g.standardOptions){const d=g.standardOptions[m.id]?.defaultValue,p=g.standardOptions[m.id]?.settings;d&&(m={...m,defaultValue:d}),p&&(m={...m,settings:m.settings?{...m.settings,...p}:p})}if(o.register(m),m.category&&a[m.category[0]])for(let d of a[m.category[0]])o.register(d)}for(const m of o.list())if(m.path.indexOf("[")>0)throw new Error(`[${f}] Field config paths do not support arrays: ${m.id}`);return o}function r(g,f){return Boolean(f.find(o=>g.category&&o.category&&g.category[0]===o.category[0]))}},8928:(H,T,e)=>{"use strict";e.d(T,{By:()=>t.By,GE:()=>t.GE,Mh:()=>t.Mh,PF:()=>t.PF,QX:()=>r,TL:()=>c.TL,Xt:()=>c.Xt,ap:()=>n.a,dz:()=>t.dz,e0:()=>t.e0,jO:()=>t.jO,lu:()=>c.lu,oH:()=>t.oH,x6:()=>t.x6,xH:()=>n.x,yI:()=>t.yI});var t=e(29076),n=e(41959),c=e(33399),s=e(68004);const r={escapeHtml:s.Xv,hasAnsiCodes:s.oT,sanitize:s.Nw,sanitizeTextPanelContent:s.he,sanitizeUrl:s.Nm}},41959:(H,T,e)=>{"use strict";e.d(T,{a:()=>r,x:()=>g});var t=e(99675),n=e(68004);let c=!1;const s={pedantic:!1,gfm:!0,smartLists:!0,smartypants:!1,xhtml:!1,breaks:!1};function r(f,o){c||(t.TU.setOptions({...s}),c=!0);let l;o?.breaks&&(l={...s,breaks:!0});const a=(0,t.TU)(f||"",l);return o?.noSanitize?a:(0,n.Nw)(a)}function g(f,o){c||(t.TU.setOptions({...s}),c=!0);const l=(0,t.TU)(f||"");return o?.noSanitize?l:(0,n.he)(l)}},68004:(H,T,e)=>{"use strict";e.d(T,{Nm:()=>l,Nw:()=>f,Xv:()=>m,he:()=>o,oT:()=>a});var t=e(13624),n=e(99731),c=e.n(n);const s=Object.keys(n.whiteList).reduce((d,p)=>(d[p]=n.whiteList[p]?.concat(["class","style"]),d),{}),r=new n.FilterXSS({whiteList:s}),g=new n.FilterXSS({whiteList:s,css:{whiteList:{...n.getDefaultCSSWhiteList(),"flex-direction":!0,"flex-wrap":!0,"flex-basis":!0,"flex-grow":!0,"flex-shrink":!0,"flex-flow":!0,gap:!0,order:!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"align-items":!0,"align-content":!0,"align-self":!0}}});function f(d){try{return r.process(d)}catch{return console.error("String could not be sanitized",d),d}}function o(d){try{return g.process(d)}catch{return console.error("String could not be sanitized",d),"Text string could not be sanitized"}}function l(d){return(0,t.N)(d)}function a(d){return/\u001b\[\d{1,2}m/.test(d)}function m(d){return String(d).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}},29076:(H,T,e)=>{"use strict";e.d(T,{By:()=>p,GE:()=>f,Mh:()=>y,PF:()=>d,dz:()=>h,e0:()=>m,jO:()=>a,oH:()=>l,x6:()=>o,yI:()=>v});var t=e(82897),n=e.n(t);const s="([\\"+["(","[","{","}","]",")","\\","|","*","+","-",".","?","<",">","#","&","^","$"].join("\\")+"])",r=new RegExp(s,"g"),g=new RegExp("(\\\\)"+s,"g");function f(i){return i&&i.replace(r,"\\$1")}function o(i){return i&&i.replace(g,"$2")}function l(i){return i?i[0]==="/":!1}function a(i){if(!l(i))return new RegExp(`^${i}$`);const u=i.match(new RegExp("^/(.*?)/(g?i?m?y?s?)$"));if(!u)throw new Error(`'${i}' is not a valid regular expression.`);return new RegExp(u[1],u[2])}function m(i){if(!i)return 0;const u=parseInt(i,10),P=i.slice(String(u).length),E=1e3,C=E*60,b=C*60,S=b*24;switch(P){case"s":return u*E;case"m":return u*C;case"h":return u*b;case"d":return u*S;default:if(!P)return isNaN(u)?0:u;throw new Error("Not supported unit: "+P)}}function d(i){return i!=null&&Number.isFinite(i)?i.toString():""}function p(i){if(!i)return;const u=parseInt(i,10);return isNaN(u)?void 0:u}function h(i){if(!i)return;const u=parseFloat(i);return isNaN(u)?void 0:u}function y(i){const u=(0,t.camelCase)(i);return u.charAt(0).toUpperCase()+u.substring(1)}function v(i){return i.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&")}},33399:(H,T,e)=>{"use strict";e.d(T,{TL:()=>g,Xt:()=>t,lu:()=>c});function t({searchWords:f,textToHighlight:o}){const l=[];for(const a of f)l.push(...c(o,a));return l}const n=f=>f.replace(/[[{(][\w,.\/:;<=>?:*+]+$/,"");function c(f,o){if(!f||!o)return[];const l=[],{cleaned:a,flags:m}=g(n(o));let d;try{d=new RegExp(`(?:${a})`,m)}catch{return l}return f.replace(d,(p,...h)=>{if(p){const y=h[h.length-2];l.push({text:p,start:y,length:p.length,end:y+p.length})}return""}),l}const s="-",r=/\(\?([ims-]+)\)/g;function g(f){const o=new Set(["g"]);return{cleaned:f.replace(r,(a,m)=>{const d=m.startsWith(s);for(let p=0;p<m.length;++p){const h=m.charAt(p);d||m.charAt(p-1)===s?o.delete(h):h!==s&&o.add(h)}return""}),flags:Array.from(o).join("")}}},64724:(H,T,e)=>{"use strict";e.r(T),e.d(T,{alpha:()=>y,asHexString:()=>f,asRgbString:()=>o,darken:()=>v,decomposeColor:()=>a,emphasize:()=>h,getContrastRatio:()=>d,getLuminance:()=>p,hexToRgb:()=>s,hslToRgb:()=>l,lighten:()=>i,recomposeColor:()=>m,rgbToHex:()=>g});var t=e(35008),n=e.n(t);function c(u,P=0,E=1){return Math.min(Math.max(P,u),E)}function s(u){u=u.slice(1);const P=new RegExp(`.{1,${u.length>=6?2:1}}`,"g");let E=u.match(P);return E&&E[0].length===1&&(E=E.map(C=>C+C)),E?`rgb${E.length===4?"a":""}(${E.map((C,b)=>b<3?parseInt(C,16):Math.round(parseInt(C,16)/255*1e3)/1e3).join(", ")})`:""}function r(u){const P=u.toString(16);return P.length===1?`0${P}`:P}function g(u){if(u.indexOf("#")===0)return u;const{values:P}=a(u);return`#${P.map(E=>r(E)).join("")}`}function f(u){if(u[0]==="#")return u;const P=n()(u);return P.getAlpha()===1?P.toHexString():P.toHex8String()}function o(u){return u.startsWith("rgb")?u:n()(u).toRgbString()}function l(u){const P=a(u),{values:E}=P,C=E[0],b=E[1]/100,S=E[2]/100,M=b*Math.min(S,1-S),x=(B,w=(B+C/30)%12)=>S-M*Math.max(Math.min(w-3,9-w,1),-1);let O="rgb";const L=[Math.round(x(0)*255),Math.round(x(8)*255),Math.round(x(4)*255)];return P.type==="hsla"&&(O+="a",L.push(E[3])),m({type:O,values:L})}function a(u){if(typeof u!="string")return u;if(u.charAt(0)==="#")return a(s(u));const P=u.indexOf("("),E=u.substring(0,P);if(["rgb","rgba","hsl","hsla","color"].indexOf(E)===-1)throw new Error(`Unsupported '${u}' color. The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()`);let C=u.substring(P+1,u.length-1),b;if(E==="color"){if(C=C.split(" "),b=C.shift(),C.length===4&&C[3].charAt(0)==="/"&&(C[3]=C[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(b)===-1)throw new Error(`Unsupported ${b} color space. The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`)}else C=C.split(",");return C=C.map(S=>parseFloat(S)),{type:E,values:C,colorSpace:b}}function m(u){const{type:P,colorSpace:E}=u;let C=u.values;return P.indexOf("rgb")!==-1?C=C.map((b,S)=>S<3?parseInt(b,10):b):P.indexOf("hsl")!==-1&&(C[1]=`${C[1]}%`,C[2]=`${C[2]}%`),P.indexOf("color")!==-1?C=`${E} ${C.join(" ")}`:C=`${C.join(", ")}`,`${P}(${C})`}function d(u,P,E){const C=p(u),b=p(P,E);return(Math.max(C,b)+.05)/(Math.min(C,b)+.05)}function p(u,P){const E=a(u);let C=E.type==="hsl"?a(l(u)).values:E.values;if(P&&E.type==="rgba"){const S=a(P),M=C[3];C[0]=C[0]*M+S.values[0]*(1-M),C[1]=C[1]*M+S.values[1]*(1-M),C[2]=C[2]*M+S.values[2]*(1-M)}const b=C.map(S=>(E.type!=="color"&&(S/=255),S<=.03928?S/12.92:((S+.055)/1.055)**2.4));return Number((.2126*b[0]+.7152*b[1]+.0722*b[2]).toFixed(3))}function h(u,P=.15){return p(u)>.5?v(u,P):i(u,P)}function y(u,P){if(u==="")return"#000000";if(P=c(P),u[0]==="#"){if(u.length===9)u=u.substring(0,7);else if(u.length<=5){let C="#";for(let b=1;b<4;b++)C+=u[b]+u[b];u=C}return u+Math.round(P*255).toString(16).padStart(2,"0")}else{if(u[3]==="(")return u.replace(")",`, ${P})`);if(u[4]==="(")return u.substring(0,u.lastIndexOf(","))+`, ${P})`}const E=a(u);return E.type==="color"?E.values[3]=`/${P}`:E.values[3]=P,m(E)}function v(u,P){const E=a(u);if(P=c(P),E.type.indexOf("hsl")!==-1)E.values[2]*=1-P;else if(E.type.indexOf("rgb")!==-1||E.type.indexOf("color")!==-1)for(let C=0;C<3;C+=1)E.values[C]*=1-P;return m(E)}function i(u,P){const E=a(u);if(P=c(P),E.type.indexOf("hsl")!==-1)E.values[2]+=(100-E.values[2])*P;else if(E.type.indexOf("rgb")!==-1)for(let C=0;C<3;C+=1)E.values[C]+=(255-E.values[C])*P;else if(E.type.indexOf("color")!==-1)for(let C=0;C<3;C+=1)E.values[C]+=(1-E.values[C])*P;return m(E)}},36328:(H,T,e)=>{"use strict";e.d(T,{j:()=>U});function t(){const N=["xs","sm","md","lg","xl","xxl"],F="px",D={xs:0,sm:544,md:769,lg:992,xl:1200,xxl:1440};function Y(K){return`@media (min-width:${typeof K=="number"?K:D[K]}${F})`}function j(K){return`@media (max-width:${(typeof K=="number"?K:D[K])-5/100}${F})`}return{values:D,up:Y,down:j,keys:N,unit:F}}var n=e(82897),c=e(64724);const s={white:"#FFFFFF",black:"#000000",gray25:"#2c3235",gray15:"#22252b",gray10:"#181b1f",gray05:"#111217",darkLayer0:"#18181A",darkLayer1:"#212124",darkLayer2:"#2a2a2f",darkBorder1:"#34343B",darkBorder2:"#64646B",gray90:"#F4F5F5",gray100:"#F4F5F5",gray80:"#D0D1D3",lightBorder1:"#E4E7E7",blueDarkMain:"#3D71D9",blueDarkText:"#6E9FFF",redDarkMain:"#D10E5C",redDarkText:"#FF5286",greenDarkMain:"#1A7F4B",greenDarkText:"#6CCF8E",orangeDarkMain:"#F5B73D",orangeDarkText:"#F8D06B",blueLightMain:"#3871DC",blueLightText:"#1F62E0",redLightMain:"#E0226E",redLightText:"#CF0E5B",greenLightMain:"#1B855E",greenLightText:"#0A764E",orangeLightMain:"#FAD34A",orangeLightText:"#8A6C00"};class r{constructor(){this.mode="dark",this.whiteBase="204, 204, 220",this.border={weak:`rgba(${this.whiteBase}, 0.07)`,medium:`rgba(${this.whiteBase}, 0.15)`,strong:`rgba(${this.whiteBase}, 0.25)`},this.text={primary:`rgb(${this.whiteBase})`,secondary:`rgba(${this.whiteBase}, 0.65)`,disabled:`rgba(${this.whiteBase}, 0.6)`,link:s.blueDarkText,maxContrast:s.white},this.primary={main:s.blueDarkMain,text:s.blueDarkText,border:s.blueDarkText},this.secondary={main:`rgba(${this.whiteBase}, 0.16)`,shade:`rgba(${this.whiteBase}, 0.20)`,text:this.text.primary,contrastText:`rgb(${this.whiteBase})`,border:this.border.strong},this.info=this.primary,this.error={main:s.redDarkMain,text:s.redDarkText},this.success={main:s.greenDarkMain,text:s.greenDarkText},this.warning={main:s.orangeDarkMain,text:s.orangeDarkText},this.background={canvas:s.gray05,primary:s.gray10,secondary:s.gray15},this.action={hover:`rgba(${this.whiteBase}, 0.16)`,selected:`rgba(${this.whiteBase}, 0.12)`,focus:`rgba(${this.whiteBase}, 0.16)`,hoverOpacity:.08,disabledText:this.text.disabled,disabledBackground:`rgba(${this.whiteBase}, 0.04)`,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(270deg, #F55F3E 0%, #FF8833 100%)",brandVertical:"linear-gradient(0.01deg, #F55F3E 0.01%, #FF8833 99.99%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.15}}class g{constructor(){this.mode="light",this.blackBase="36, 41, 46",this.primary={main:s.blueLightMain,border:s.blueLightText,text:s.blueLightText},this.text={primary:`rgba(${this.blackBase}, 1)`,secondary:`rgba(${this.blackBase}, 0.75)`,disabled:`rgba(${this.blackBase}, 0.50)`,link:this.primary.text,maxContrast:s.black},this.border={weak:`rgba(${this.blackBase}, 0.12)`,medium:`rgba(${this.blackBase}, 0.30)`,strong:`rgba(${this.blackBase}, 0.40)`},this.secondary={main:`rgba(${this.blackBase}, 0.16)`,shade:`rgba(${this.blackBase}, 0.20)`,contrastText:`rgba(${this.blackBase},  1)`,text:this.text.primary,border:this.border.strong},this.info={main:s.blueLightMain,text:s.blueLightText},this.error={main:s.redLightMain,text:s.redLightText,border:s.redLightText},this.success={main:s.greenLightMain,text:s.greenLightText},this.warning={main:s.orangeLightMain,text:s.orangeLightText},this.background={canvas:s.gray90,primary:s.white,secondary:s.gray100},this.action={hover:`rgba(${this.blackBase}, 0.12)`,selected:`rgba(${this.blackBase}, 0.08)`,hoverOpacity:.08,focus:`rgba(${this.blackBase}, 0.12)`,disabledBackground:`rgba(${this.blackBase}, 0.04)`,disabledText:this.text.disabled,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(90deg, #FF8833 0%, #F53E4C 100%)",brandVertical:"linear-gradient(0.01deg, #F53E4C -31.2%, #FF8833 113.07%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.2}}function f(I){const N=new r,F=new g,D=(I.mode??"dark")==="dark"?N:F,{primary:Y=D.primary,secondary:j=D.secondary,info:K=D.info,warning:z=D.warning,success:Z=D.success,error:ae=D.error,tonalOffset:J=D.tonalOffset,hoverFactor:oe=D.hoverFactor,contrastThreshold:Ee=D.contrastThreshold,...me}=I;function re(pe,ee=Ee){return(0,c.getContrastRatio)(N.text.maxContrast,pe,D.background.primary)>=ee?N.text.maxContrast:F.text.maxContrast}const le=({color:pe,name:ee})=>{if(pe={...pe,name:ee},!pe.main)throw new Error(`Missing main color for ${ee}`);return pe.text||(pe.text=pe.main),pe.border||(pe.border=pe.text),pe.shade||(pe.shade=D.mode==="light"?(0,c.darken)(pe.main,J):(0,c.lighten)(pe.main,J)),pe.transparent||(pe.transparent=D.mode==="light"?(0,c.alpha)(pe.main,.08):(0,c.alpha)(pe.main,.15)),pe.contrastText||(pe.contrastText=re(pe.main)),pe};return(0,n.merge)({...D,primary:le({color:Y,name:"primary"}),secondary:le({color:j,name:"secondary"}),info:le({color:K,name:"info"}),error:le({color:ae,name:"error"}),success:le({color:Z,name:"success"}),warning:le({color:z,name:"warning"}),getContrastText:re,emphasize:(pe,ee)=>(0,c.emphasize)(pe,ee??oe)},me)}function o(I,N){const F={padding:1,headerHeight:4,background:I.background.primary,borderColor:I.border.weak,boxShadow:"none"},D={borderColor:I.border.medium,borderHover:I.border.strong,text:I.text.primary,background:I.mode==="dark"?I.background.canvas:I.background.primary};return{height:{sm:3,md:4,lg:6},input:D,panel:F,dropdown:{background:D.background},tooltip:{background:I.background.secondary,text:I.text.primary},dashboard:{background:I.background.canvas,padding:1},overlay:{background:I.mode==="dark"?"rgba(63, 62, 62, 0.45)":"rgba(208, 209, 211, 0.24)"},sidemenu:{width:57},menuTabs:{height:41},textHighlight:{text:I.warning.contrastText,background:I.warning.main},horizontalDrawer:{defaultHeight:400}}}function l(I){return I.mode==="dark"?{z1:"0px 1px 2px rgba(24, 26, 27, 0.75)",z2:"0px 4px 8px rgba(24, 26, 27, 0.75)",z3:"0px 8px 24px rgb(1,4,9)"}:{z1:"0px 1px 2px rgba(24, 26, 27, 0.2)",z2:"0px 4px 8px rgba(24, 26, 27, 0.2)",z3:"0px 13px 20px 1px rgba(24, 26, 27, 0.18)"}}function a(I){const N=I.borderRadius??2;return{borderRadius:D=>`${(D??1)*N}px`}}function m(I={}){const{gridSize:N=8}=I,F=Y=>typeof Y=="string"?Y:Y*N,D=(...Y)=>(Y.length===0&&(Y[0]=1),Y.map(j=>{const K=F(j);return typeof K=="number"?`${K}px`:K}).join(" "));return D.gridSize=N,D}const d={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},p={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function h(I=["all"],N={}){const{duration:F=p.standard,easing:D=d.easeInOut,delay:Y=0}=N;return(Array.isArray(I)?I:[I]).map(j=>`${j} ${typeof F=="string"?F:v(F)} ${D} ${typeof Y=="string"?Y:v(Y)}`).join(",")}function y(I){if(!I)return 0;const N=I/36;return Math.round((4+15*N**.25+N/5)*10)}function v(I){return`${Math.round(I)}ms`}function i(){return{create:h,duration:p,easing:d,getAutoHeightDuration:y}}const u='"Inter", "Helvetica", "Arial", sans-serif',P="'Roboto Mono', monospace";function E(I,N={}){const{fontFamily:F=u,fontFamilyMonospace:D=P,fontSize:Y=14,fontWeightLight:j=300,fontWeightRegular:K=400,fontWeightMedium:z=500,fontWeightBold:Z=500,htmlFontSize:ae=14}=N,J=Y/14,oe=le=>`${le/ae*J}rem`,Ee=(le,pe,ee,se,Q)=>{if(ee%2!==0||pe%2!==0)throw new Error("Font size and line height should be integer multiples of 2 to prevent issues with alignment");return{fontFamily:F,fontWeight:le,fontSize:oe(pe),lineHeight:ee/pe,...F===u?{letterSpacing:`${C(se/pe)}em`}:{},...Q}},me={h1:Ee(K,28,32,-.25),h2:Ee(K,24,28,0),h3:Ee(K,22,24,0),h4:Ee(K,18,22,.25),h5:Ee(K,16,22,0),h6:Ee(z,14,22,.15),body:Ee(K,Y,22,.15),bodySmall:Ee(K,12,18,.15)};return{htmlFontSize:ae,pxToRem:oe,fontFamily:F,fontFamilyMonospace:D,fontSize:Y,fontWeightLight:j,fontWeightRegular:K,fontWeightMedium:z,fontWeightBold:Z,size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},...me}}function C(I){return Math.round(I*1e5)/1e5}var b=e(55422);function S(I){const N={name:"Grafana Default",typography:{fontFamily:{sansSerif:I.typography.fontFamily,monospace:I.typography.fontFamilyMonospace},size:{base:`${I.typography.fontSize}px`,xs:I.typography.size.xs,sm:I.typography.size.sm,md:I.typography.size.md,lg:I.typography.size.lg},heading:{h1:I.typography.h1.fontSize,h2:I.typography.h2.fontSize,h3:I.typography.h3.fontSize,h4:I.typography.h4.fontSize,h5:I.typography.h5.fontSize,h6:I.typography.h6.fontSize},weight:{light:I.typography.fontWeightLight,regular:I.typography.fontWeightRegular,semibold:I.typography.fontWeightMedium,bold:I.typography.fontWeightBold},lineHeight:{xs:I.typography.bodySmall.lineHeight,sm:I.typography.bodySmall.lineHeight,md:I.typography.body.lineHeight,lg:I.typography.h2.lineHeight},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:`${I.breakpoints.values.xs}px`,sm:`${I.breakpoints.values.sm}px`,md:`${I.breakpoints.values.md}px`,lg:`${I.breakpoints.values.lg}px`,xl:`${I.breakpoints.values.xl}px`,xxl:`${I.breakpoints.values.xxl}px`},spacing:{base:I.spacing.gridSize,insetSquishMd:I.spacing(.5,1),d:I.spacing(2),xxs:I.spacing(.25),xs:I.spacing(.5),sm:I.spacing(1),md:I.spacing(2),lg:I.spacing(3),xl:I.spacing(4),gutter:I.spacing(4),formSpacingBase:I.spacing.gridSize,formMargin:`${I.spacing.gridSize*4}px`,formFieldsetMargin:`${I.spacing.gridSize*2}px`,formInputHeight:I.spacing.gridSize*4,formButtonHeight:I.spacing.gridSize*4,formInputPaddingHorizontal:`${I.spacing.gridSize}px`,formInputAffixPaddingHorizontal:`${I.spacing.gridSize/2}px`,formInputMargin:`${I.spacing.gridSize*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${I.spacing.gridSize/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:I.shape.borderRadius(1),md:I.shape.borderRadius(2),lg:I.shape.borderRadius(3)},width:{sm:"1px"}},height:{sm:I.spacing.gridSize*I.components.height.sm,md:I.spacing.gridSize*I.components.height.md,lg:I.spacing.gridSize*I.components.height.lg},panelPadding:I.components.panel.padding*I.spacing.gridSize,panelHeaderHeight:I.spacing.gridSize*I.components.panel.headerHeight,zIndex:I.zIndex},F={...M,black:"#000000",white:"#ffffff",dark1:"#141414",dark2:"#161719",dark3:"#1f1f20",dark4:"#212124",dark5:"#222426",dark6:"#262628",dark7:"#292a2d",dark8:"#2f2f32",dark9:"#343436",dark10:"#424345",gray1:"#555555",gray2:"#8e8e8e",gray3:"#b3b3b3",gray4:"#d8d9da",gray5:"#ececec",gray6:"#f4f5f8",gray7:"#fbfbfb",redBase:"#e02f44",redShade:"#c4162a",greenBase:"#299c46",greenShade:"#23843b",red:"#d44a3a",yellow:"#ecbb13",purple:"#9933cc",variable:"#32d1df",orange:"#eb7b18",orangeDark:"#ff780a"},D={bg1:I.colors.background.primary,bg2:I.colors.background.secondary,bg3:I.colors.action.hover,dashboardBg:I.colors.background.canvas,bgBlue1:I.colors.primary.main,bgBlue2:I.colors.primary.shade},Y={border1:I.colors.border.weak,border2:I.colors.border.medium,border3:I.colors.border.strong},j={textStrong:I.colors.text.maxContrast,textHeading:I.colors.text.primary,text:I.colors.text.primary,textSemiWeak:I.colors.text.secondary,textWeak:I.colors.text.secondary,textFaint:I.colors.text.disabled,textBlue:I.colors.primary.text},K={formLabel:I.colors.text.primary,formDescription:I.colors.text.secondary,formInputBg:I.components.input.background,formInputBgDisabled:I.colors.action.disabledBackground,formInputBorder:I.components.input.borderColor,formInputBorderHover:I.components.input.borderHover,formInputBorderActive:I.colors.primary.border,formInputBorderInvalid:I.colors.error.border,formInputPlaceholderText:I.colors.text.disabled,formInputText:I.components.input.text,formInputDisabledText:I.colors.action.disabledText,formFocusOutline:I.colors.primary.main,formValidationMessageText:I.colors.error.contrastText,formValidationMessageBg:I.colors.error.main};return{...N,type:I.colors.mode==="dark"?b.Q.Dark:b.Q.Light,isDark:I.isDark,isLight:I.isLight,name:I.name,palette:{...F,brandPrimary:F.orange,brandSuccess:I.colors.success.main,brandWarning:I.colors.warning.main,brandDanger:I.colors.error.main,queryRed:I.colors.error.text,queryGreen:I.colors.success.text,queryPurple:"#fe85fc",queryOrange:F.orange,online:I.colors.success.main,warn:I.colors.success.main,critical:I.colors.success.main},colors:{...D,...Y,...K,...j,bodyBg:I.colors.background.canvas,panelBg:I.components.panel.background,panelBorder:I.components.panel.borderColor,pageHeaderBg:I.colors.background.canvas,pageHeaderBorder:I.colors.background.canvas,dropdownBg:K.formInputBg,dropdownShadow:F.black,dropdownOptionHoverBg:D.bg2,link:I.colors.text.primary,linkDisabled:I.colors.text.disabled,linkHover:I.colors.text.maxContrast,linkExternal:I.colors.text.link},shadows:{listItem:"none"},visualization:I.visualization}}const M={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"};var x=e(66926);function O(I){const N=I.mode==="light"?B():L(),F={};for(const j of N)for(const K of j.shades)if(F[K.name]=K.color,K.aliases)for(const z of K.aliases)F[z]=K.color;F.transparent="rgba(0,0,0,0)",F["panel-bg"]=I.background.primary,F.text=I.text.primary;const D=j=>{if(!j)return x.R;const K=F[j];if(K)return K;if(j[0]==="#"||j.indexOf("rgb")>-1)return j;const z=R[j.toLowerCase()];return z?(F[j]=z,z):j},Y=w();return{hues:N,palette:Y,getColorByName:D}}function L(){return[{name:"red",shades:[{color:"#FFA6B0",name:"super-light-red"},{color:"#FF7383",name:"light-red"},{color:"#F2495C",name:"red",primary:!0},{color:"#E02F44",name:"semi-dark-red"},{color:"#C4162A",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFCB7D",name:"super-light-orange",aliases:[]},{color:"#FFB357",name:"light-orange",aliases:[]},{color:"#FF9830",name:"orange",aliases:[],primary:!0},{color:"#FF780A",name:"semi-dark-orange",aliases:[]},{color:"#FA6400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFF899",name:"super-light-yellow",aliases:[]},{color:"#FFEE52",name:"light-yellow",aliases:[]},{color:"#FADE2A",name:"yellow",aliases:[],primary:!0},{color:"#F2CC0C",name:"semi-dark-yellow",aliases:[]},{color:"#E0B400",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#C8F2C2",name:"super-light-green",aliases:[]},{color:"#96D98D",name:"light-green",aliases:[]},{color:"#73BF69",name:"green",aliases:[],primary:!0},{color:"#56A64B",name:"semi-dark-green",aliases:[]},{color:"#37872D",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#C0D8FF",name:"super-light-blue",aliases:[]},{color:"#8AB8FF",name:"light-blue",aliases:[]},{color:"#5794F2",name:"blue",aliases:[],primary:!0},{color:"#3274D9",name:"semi-dark-blue",aliases:[]},{color:"#1F60C4",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#DEB6F2",name:"super-light-purple",aliases:[]},{color:"#CA95E5",name:"light-purple",aliases:[]},{color:"#B877D9",name:"purple",aliases:[],primary:!0},{color:"#A352CC",name:"semi-dark-purple",aliases:[]},{color:"#8F3BB8",name:"dark-purple",aliases:[]}]}]}function B(){return[{name:"red",shades:[{color:"#FF7383",name:"super-light-red"},{color:"#F2495C",name:"light-red"},{color:"#E02F44",name:"red",primary:!0},{color:"#C4162A",name:"semi-dark-red"},{color:"#AD0317",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFB357",name:"super-light-orange",aliases:[]},{color:"#FF9830",name:"light-orange",aliases:[]},{color:"#FF780A",name:"orange",aliases:[],primary:!0},{color:"#FA6400",name:"semi-dark-orange",aliases:[]},{color:"#E55400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFEE52",name:"super-light-yellow",aliases:[]},{color:"#FADE2A",name:"light-yellow",aliases:[]},{color:"#F2CC0C",name:"yellow",aliases:[],primary:!0},{color:"#E0B400",name:"semi-dark-yellow",aliases:[]},{color:"#CC9D00",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#96D98D",name:"super-light-green",aliases:[]},{color:"#73BF69",name:"light-green",aliases:[]},{color:"#56A64B",name:"green",aliases:[],primary:!0},{color:"#37872D",name:"semi-dark-green",aliases:[]},{color:"#19730E",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#8AB8FF",name:"super-light-blue",aliases:[]},{color:"#5794F2",name:"light-blue",aliases:[]},{color:"#3274D9",name:"blue",aliases:[],primary:!0},{color:"#1F60C4",name:"semi-dark-blue",aliases:[]},{color:"#1250B0",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#CA95E5",name:"super-light-purple",aliases:[]},{color:"#B877D9",name:"light-purple",aliases:[]},{color:"#A352CC",name:"purple",aliases:[],primary:!0},{color:"#8F3BB8",name:"semi-dark-purple",aliases:[]},{color:"#7C2EA3",name:"dark-purple",aliases:[]}]}]}function w(){return["green","semi-dark-yellow","light-blue","semi-dark-orange","red","blue","purple","#705DA0","dark-green","yellow","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"]}const R={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},A={navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061};function U(I={}){const{colors:N={},spacing:F={},shape:D={},typography:Y={}}=I,j=f(N),K=t(),z=m(F),Z=a(D),ae=E(j,Y),J=l(j),oe=i(),Ee=o(j,J),me=O(j),re={name:j.mode==="dark"?"Dark":"Light",isDark:j.mode==="dark",isLight:j.mode==="light",colors:j,breakpoints:K,spacing:z,shape:Z,components:Ee,typography:ae,shadows:J,transitions:oe,visualization:me,zIndex:{...A},flags:{}};return{...re,v1:S(re)}}},4765:(H,T,e)=>{"use strict";e.d(T,{j:()=>t.j,r:()=>n});var t=e(36328),n=e(64724)},21760:(H,T,e)=>{"use strict";e.d(T,{Kx:()=>f,TB:()=>o,gz:()=>g,uP:()=>l});var t=e(82897),n=e.n(t),c=e(49922),s=e(14582),r=e(64140),g=(i=>(i.sum="sum",i.max="max",i.min="min",i.logmin="logmin",i.mean="mean",i.variance="variance",i.stdDev="stdDev",i.last="last",i.first="first",i.count="count",i.range="range",i.diff="diff",i.diffperc="diffperc",i.delta="delta",i.step="step",i.firstNotNull="firstNotNull",i.lastNotNull="lastNotNull",i.changeCount="changeCount",i.distinctCount="distinctCount",i.allIsZero="allIsZero",i.allIsNull="allIsNull",i.allValues="allValues",i.uniqueValues="uniqueValues",i))(g||{});function f(i){const{field:u,reducers:P}=i;if(!u||!P||P.length<1)return{};if(u.state?.calcs){const O=[];for(const L of P)u.state.calcs.hasOwnProperty(L)||O.push(L);if(O.length<1)return{...u.state.calcs}}u.state||(u.state={});const E=o.list(P);if(u.values.length<1){const O={...u.state.calcs};for(const L of E)O[L.id]=L.emptyInputResult!==null?L.emptyInputResult:null;return u.state.calcs=O}const{nullValueMode:b}=u.config,S=b===c.Gl.Ignore,M=b===c.Gl.AsZero;if(E.length===1&&E[0].reduce){const O=E[0].reduce(u,S,M);return u.state.calcs={...u.state.calcs,...O},O}let x=l(u,S,M);for(const O of E)!x.hasOwnProperty(O.id)&&O.reduce&&(x={...x,...O.reduce(u,S,M)});return u.state.calcs={...u.state.calcs,...x},x}const o=new r.B(()=>[{id:"lastNotNull",name:"Last *",description:"Last non-null value",standard:!0,aliasIds:["current"],reduce:p},{id:"last",name:"Last",description:"Last value",standard:!0,reduce:d},{id:"firstNotNull",name:"First *",description:"First non-null value",standard:!0,reduce:m},{id:"first",name:"First",description:"First Value",standard:!0,reduce:a},{id:"min",name:"Min",description:"Minimum Value",standard:!0},{id:"max",name:"Max",description:"Maximum Value",standard:!0},{id:"mean",name:"Mean",description:"Average Value",standard:!0,aliasIds:["avg"]},{id:"variance",name:"Variance",description:"Variance of all values in a field",standard:!1,reduce:h},{id:"stdDev",name:"StdDev",description:"Standard deviation of all values in a field",standard:!1,reduce:h},{id:"sum",name:"Total",description:"The sum of all values",emptyInputResult:0,standard:!0,aliasIds:["total"]},{id:"count",name:"Count",description:"Number of values in response",emptyInputResult:0,standard:!0},{id:"range",name:"Range",description:"Difference between minimum and maximum values",standard:!0},{id:"delta",name:"Delta",description:"Cumulative change in value",standard:!0},{id:"step",name:"Step",description:"Minimum interval between values",standard:!0},{id:"diff",name:"Difference",description:"Difference between first and last values",standard:!0},{id:"logmin",name:"Min (above zero)",description:"Used for log min scale",standard:!0},{id:"allIsZero",name:"All Zeros",description:"All values are zero",emptyInputResult:!1,standard:!0},{id:"allIsNull",name:"All Nulls",description:"All values are null",emptyInputResult:!0,standard:!0},{id:"changeCount",name:"Change Count",description:"Number of times the value changes",standard:!1,reduce:y},{id:"distinctCount",name:"Distinct Count",description:"Number of distinct values",standard:!1,reduce:v},{id:"diffperc",name:"Difference percent",description:"Percentage difference between first and last values",standard:!0},{id:"allValues",name:"All values",description:"Returns an array with all values",standard:!1,reduce:i=>({allValues:i.values.toArray()})},{id:"uniqueValues",name:"All unique values",description:"Returns an array with all unique values",standard:!1,reduce:i=>({uniqueValues:[...new Set(i.values.toArray())]})}]);function l(i,u,P){const E={sum:0,max:-Number.MAX_VALUE,min:Number.MAX_VALUE,logmin:Number.MAX_VALUE,mean:null,last:null,first:null,lastNotNull:null,firstNotNull:null,count:0,nonNullCount:0,allIsNull:!0,allIsZero:!0,range:null,diff:null,delta:0,step:Number.MAX_VALUE,diffperc:0,previousDeltaUp:!0},C=i.values;E.count=u?C.length:C.toArray().filter(S=>S!=null).length;const b=i.type===s.fS.number||s.fS.time;for(let S=0;S<C.length;S++){let M=C.get(S);if(S===0&&(E.first=M),E.last=M,M===null){if(u)continue;P&&(M=0)}if(M!=null){const x=E.firstNotNull===null;if(x&&(E.firstNotNull=M),b){if(E.sum+=M,E.allIsNull=!1,E.nonNullCount++,!x){const O=M-E.lastNotNull;E.step>O&&(E.step=O),E.lastNotNull>M?(E.previousDeltaUp=!1,S===C.length-1&&(E.delta+=M)):(E.previousDeltaUp?E.delta+=O:E.delta+=M,E.previousDeltaUp=!0)}M>E.max&&(E.max=M),M<E.min&&(E.min=M),M<E.logmin&&M>0&&(E.logmin=M)}M!==0&&(E.allIsZero=!1),E.lastNotNull=M}}return E.max===-Number.MAX_VALUE&&(E.max=null),E.min===Number.MAX_VALUE&&(E.min=null),E.step===Number.MAX_VALUE&&(E.step=null),E.nonNullCount>0&&(E.mean=E.sum/E.nonNullCount),E.allIsNull&&(E.allIsZero=!1),E.max!==null&&E.min!==null&&(E.range=E.max-E.min),(0,t.isNumber)(E.firstNotNull)&&(0,t.isNumber)(E.lastNotNull)&&(E.diff=E.lastNotNull-E.firstNotNull),(0,t.isNumber)(E.firstNotNull)&&(0,t.isNumber)(E.diff)&&(E.diffperc=E.diff/E.firstNotNull),E}function a(i,u,P){return{first:i.values.get(0)}}function m(i,u,P){const E=i.values;for(let C=0;C<E.length;C++){const b=E.get(C);if(b!=null&&b!==void 0)return{firstNotNull:b}}return{firstNotNull:null}}function d(i,u,P){const E=i.values;return{last:E.get(E.length-1)}}function p(i,u,P){const E=i.values;let C=E.length-1;for(;C>=0;){const b=E.get(C--);if(b!=null&&b!==void 0)return{lastNotNull:b}}return{lastNotNull:null}}function h(i,u,P){if(!(i.type===s.fS.number||i.type===s.fS.time))return{variance:0,stdDev:0};let E=0,C=0,b=0;const S=i.values;for(let M=0;M<S.length;M++){const x=S.get(M);if(x!=null){b++;let O=C;C+=(x-O)/b,E+=(x-O)*(x-C)}}if(b>0){const M=E/b;return{variance:M,stdDev:Math.sqrt(M)}}return{variance:0,stdDev:0}}function y(i,u,P){const E=i.values;let C=0,b=!0,S=null;for(let M=0;M<E.length;M++){let x=E.get(M);if(x===null){if(u)continue;P&&(x=0)}!b&&S!==x&&C++,b=!1,S=x}return{changeCount:C}}function v(i,u,P){const E=i.values,C=new Set;for(let b=0;b<E.length;b++){let S=E.get(b);if(S===null){if(u)continue;P&&(S=0)}C.add(S)}return{distinctCount:C.size}}},42960:(H,T,e)=>{"use strict";e.d(T,{Ac:()=>c.Ac,E4:()=>t.E4,Ff:()=>t.Ff,Hz:()=>g.H,IG:()=>c.IG,JP:()=>l._9,J_:()=>m.J_,Jz:()=>a.Jz,Kx:()=>r.Kx,Ls:()=>c.Ls,Ok:()=>a.Ok,Op:()=>a.Op,TB:()=>r.TB,U8:()=>c.U8,UO:()=>a.UO,Wk:()=>n.W,YR:()=>s.Y,Ys:()=>o.Ys,Ze:()=>f.Z,Zi:()=>a.Zi,b9:()=>c.b9,cO:()=>a.cO,gY:()=>a.gY,gz:()=>r.gz,kl:()=>a.kl,mB:()=>a.mB,mE:()=>t.mE,mi:()=>t.mi,py:()=>a.py,qr:()=>a.qr,sq:()=>c.sq,uP:()=>r.uP,wL:()=>a.wL,zM:()=>a.zM});var t=e(85854),n=e(17130),c=e(3249),s=e(74940),r=e(21760),g=e(79720),f=e(20256),o=e(74188),l=e(98234),a=e(15128),m=e(2932)},3249:(H,T,e)=>{"use strict";e.d(T,{Ac:()=>p,IG:()=>i,Ls:()=>d,U8:()=>h,b9:()=>v,sq:()=>y});var t=e(64140),n=e(82346),c=e(74188),s=e(89771),r=e(95108),g=e(98876),f=e(29106),o=e(1521),l=e(95827),a=e(4728),m=e(85402);const d=new t.B(()=>[...(0,s.Ty)(),...(0,n.N)(),...(0,c.Lk)(),...(0,g.z)()]),p=new t.B(()=>[...(0,s.fX)(),...(0,c.cC)(),...(0,r.n)()]),h=new t.B(()=>[...(0,o.a)(),...(0,l.H)(),...(0,f.T)(),...(0,a.G)(),...(0,m.G)()]);function y(u){const P=d.get(u.id);if(!P)throw new Error("Unknown field matcher: "+u.id);return P.get(u.options)}function v(u){const P=p.get(u.id);if(!P)throw new Error("Unknown frame matcher: "+u.id);return P.get(u.options)}function i(u){const P=h.get(u.id);if(!P)throw new Error("Unknown value matcher: "+u.id);return P.get(u.options)}},74188:(H,T,e)=>{"use strict";e.d(T,{Lk:()=>d,Ys:()=>s,cC:()=>p});var t=e(89890),n=e(29076),c=e(85854),s=(h=>(h.exclude="exclude",h.include="include",h))(s||{});const r={id:c.mi.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:h=>(y,v,i)=>h===y.name||(0,t.C)(y,v,i)===h,getOptionsDisplayText:h=>`Field name: ${h}`},g={id:c.mi.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:"include",names:[]},get:h=>{const{names:y,mode:v="include"}=h,i=new Set(y??[]),u=(P,E,C)=>i.has(P.name)||i.has((0,t.C)(P,E,C));return v==="exclude"?(P,E,C)=>!u(P,E,C):u},getOptionsDisplayText:h=>{const{names:y,mode:v}=h,i=(y??[]).join(", ");return v==="exclude"?`All except: ${i}`:`All of: ${i}`}},f={id:c.mi.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:h=>{const y=a(h);return(v,i,u)=>{const P=(0,t.C)(v,i,u);return!!y&&y.test(P)}},getOptionsDisplayText:h=>`Field name by pattern: ${h}`},o={id:c.mi.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:h=>(y,v,i)=>v.refId===h,getOptionsDisplayText:h=>`Math all fields returned by query with reference ID: ${h}`},l={id:c.mi.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:h=>{const y=f.get(h?.pattern||""),v=g.get({mode:"include",names:h?.names??[]});return(i,u,P)=>v(i,u,P)||y(i,u,P)},getOptionsDisplayText:h=>{const y=h?.pattern??"",v=h?.names?.join(",")??"";return`Field name by pattern: ${y} or names: ${v}`}},a=h=>{if(h)try{return(0,n.jO)(h)}catch(y){console.error(y);return}},m={id:c.E4.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:h=>{const y=(0,n.jO)(h);return v=>y.test(v.name||"")},getOptionsDisplayText:h=>`Frame name: ${h}`};function d(){return[r,f,g,l,o]}function p(){return[m]}},89771:(H,T,e)=>{"use strict";e.d(T,{Qw:()=>p,Ty:()=>P,fX:()=>E,m3:()=>a});var t=e(14582),n=e(3249),c=e(85854);const s={id:c.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const b=C.map(S=>(0,n.sq)(S));return(S,M,x)=>{for(const O of b)if(O(S,M,x))return!0;return!1}},getOptionsDisplayText:C=>{let b="";for(const S of C){b.length>0&&(b+=" OR ");const M=n.Ls.get(S.id);b+=M.getOptionsDisplayText?M.getOptionsDisplayText(S):M.name}return b}},r={id:c.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const b=C.map(S=>(0,n.b9)(S));return S=>{for(const M of b)if(M(S))return!0;return!1}},getOptionsDisplayText:C=>{let b="";for(const S of C){b.length>0&&(b+=" OR ");const M=n.Ac.get(S.id);b+=M.getOptionsDisplayText?M.getOptionsDisplayText(S):M.name}return b}},g={id:c.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const b=C.map(S=>(0,n.sq)(S));return(S,M,x)=>{for(const O of b)if(!O(S,M,x))return!1;return!0}},getOptionsDisplayText:C=>{let b="";for(const S of C){b.length>0&&(b+=" AND ");const M=n.Ls.get(S.id);b+=M.getOptionsDisplayText?M.getOptionsDisplayText(S):M.name}return b}},f={id:c.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const b=C.map(S=>(0,n.b9)(S));return S=>{for(const M of b)if(!M(S))return!1;return!0}},getOptionsDisplayText:C=>{let b="";for(const S of C){b.length>0&&(b+=" AND ");const M=n.Ac.get(S.id);b+=M.getOptionsDisplayText?M.getOptionsDisplayText(S):M.name}return b}},o={id:c.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:C=>{const b=(0,n.sq)(C);return(S,M,x)=>!b(S,M,x)},getOptionsDisplayText:C=>{const b=n.Ls.get(C.id);return"NOT "+(b.getOptionsDisplayText?b.getOptionsDisplayText(C.options):b.name)}},l={id:c.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:C=>{const b=(0,n.b9)(C);return S=>!b(S)},getOptionsDisplayText:C=>{const b=n.Ac.get(C.id);return"NOT "+(b.getOptionsDisplayText?b.getOptionsDisplayText(C.options):b.name)}},a=C=>!0,m=C=>!0,d=C=>!1,p=C=>C.type!==t.fS.time,h=C=>!1,y={id:c.Ff.alwaysMatch,name:"All Fields",description:"Always Match",get:C=>a,getOptionsDisplayText:C=>"Always"},v={id:c.Ff.alwaysMatch,name:"All Frames",description:"Always Match",get:C=>m,getOptionsDisplayText:C=>"Always"},i={id:c.Ff.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:C=>d,getOptionsDisplayText:C=>"Never"},u={id:c.Ff.neverMatch,name:"No Frames",description:"Never Match",get:C=>h,getOptionsDisplayText:C=>"Never"};function P(){return[s,g,o,y,i]}function E(){return[r,f,l,v,u]}},20256:(H,T,e)=>{"use strict";e.d(T,{Z:()=>n});var t=e(64140);const n=new t.B},79720:(H,T,e)=>{"use strict";e.d(T,{H:()=>l});var t=e(53786),n=e(98356),c=e(2101),s=e(3249),r=e(20256);const g=(a,m)=>d=>{const p=r.Z.get(a.id);if(!p)return d;const y={...p.transformation.defaultOptions??{},...a.options},v=a.filter?.options?(0,s.b9)(a.filter):void 0;return d.pipe((0,n.z)(i=>(0,t.of)(f(i,v)).pipe(p.transformation.operator(y,m),o(i,p,v))))};function f(a,m){return m?a.filter(d=>m(d)):a}const o=(a,m,d)=>p=>p.pipe((0,c.U)(h=>{if(h===a)return h;for(const y of h)y.meta||(y.meta={}),y.meta.transformations?y.meta.transformations=[...y.meta.transformations,m.id]:y.meta.transformations=[m.id];if(d){let y=0;const v=a.filter((i,u)=>{const P=!d(i);return P&&!y&&(y=u),P});v.length&&h.splice(y,0,...v)}return h}));function l(a,m,d){const p=(0,t.of)(m);if(!a.length)return p;const h=[],y=d??{interpolate:v=>v};for(let v=0;v<a.length;v++){const i=a[v];i.disabled||h.push(g(i,y))}return p.pipe.apply(p,h)}},74940:(H,T,e)=>{"use strict";e.d(T,{Y:()=>ee});var t=e(89984),n=e(42074),c=e(2932),s=e(78313),r=e(33723),g=e(84931),f=e(85854),o=e(17130);const l={id:o.W.filterByRefId,name:"Filter data by query refId",description:"select a subset of results",defaultOptions:{},operator:(se,Q)=>G=>{const q={};return se.include&&(q.include={id:f.E4.byRefId,options:se.include}),se.exclude&&(q.exclude={id:f.E4.byRefId,options:se.exclude}),G.pipe(r.u.operator(q,Q))}};var a=e(86789),m=e(88861),d=e(2101),p=e(38685),h=e(89890),y=e(16217),v=e(14582);const i="Time",u="Time",P="Value",E=y.U.Empty,C={id:o.W.groupingToMatrix,name:"Grouping to Matrix",description:"Groups series by field and return a matrix visualisation",defaultOptions:{columnField:i,rowField:u,valueField:P},operator:se=>Q=>Q.pipe((0,d.U)(G=>{const q=se.columnField||i,X=se.rowField||u,de=se.valueField||P,Be=se.emptyValue||E;if(G.length!==1)return G;const ke=G[0],He=S(ke,q),ue=S(ke,X),Oe=S(ke,de),Fe=`${X}\\${q}`;if(!He||!ue||!Oe)return G;const Ie=b(He.values),we=b(ue.values),Re={};for(let et=0;et<Oe.values.length;et++){const qe=He.values.get(et),Je=ue.values.get(et),lt=Oe.values.get(et);Re[qe]||(Re[qe]={}),Re[qe][Je]=lt}const _e=new p.v;_e.addField({name:Fe,values:we,type:v.fS.string});for(const et of Ie){let qe=[];for(const Je of we){const lt=Re[et][Je]??M(Be);qe.push(lt)}_e.addField({name:et.toString(),values:qe,config:Oe.config,type:Oe.type})}return[_e]}))};function b(se){const Q=new Set;for(let G=0;G<se.length;G++)Q.add(se.get(G));return Array.from(Q)}function S(se,Q){for(let G=0;G<se.fields.length;G++){const q=se.fields[G];if(Q===(0,h.C)(q))return q}return null}function M(se){switch(se){case y.U.False:return!1;case y.U.True:return!0;case y.U.Null:return null;case y.U.Empty:default:return""}}var x=e(15128),O=e(75176),L=e(1052),B=e(19695);const w=10,R={id:o.W.limit,name:"Limit",description:"Limit the number of items to the top N",defaultOptions:{limitField:w},operator:se=>Q=>Q.pipe((0,d.U)(G=>{const q=se.limitField||w;return G.map(X=>X.length>q?{...X,fields:X.fields.map(de=>{const Be=de.values.toArray();return{...de,values:new B.G(Be.slice(0,q))}}),length:q}:X)}))};var A=e(10158),U=e(21398),I=e(7582);const N={id:o.W.rename,name:"Rename fields by name",description:"Rename fields based on configuration given by user",defaultOptions:{renameByName:{}},operator:se=>Q=>Q.pipe((0,d.U)(G=>{const q=F(se.renameByName);return!Array.isArray(G)||G.length===0?G:G.map(X=>({...X,fields:q(X)}))}))},F=se=>Q=>!se||Object.keys(se).length===0?Q.fields:Q.fields.map(G=>{const q=(0,h.C)(G,Q),X=se[q];return typeof X!="string"||X.length===0?G:{...G,config:{...G.config,displayName:X},state:{...G.state,displayName:X}}}),D={id:o.W.organize,name:"Organize fields by name",description:"Order, filter and rename fields based on configuration given by user",defaultOptions:{excludeByName:{},indexByName:{},renameByName:{}},operator:(se,Q)=>G=>G.pipe(g.w.operator({exclude:{names:Y(se.excludeByName)}},Q),I.t.operator(se,Q),N.operator(se,Q))},Y=se=>se?Object.keys(se).filter(Q=>se[Q]):[];var j=e(4157),K=e(29076);const z={id:o.W.renameByRegex,name:"Rename fields by regex",description:"Rename fields based on regular expression by users.",defaultOptions:{regex:"(.*)",renamePattern:"$1"},operator:se=>Q=>Q.pipe((0,d.U)(G=>!Array.isArray(G)||G.length===0?G:G.map(Z(se))))},Z=se=>Q=>{const G=(0,K.jO)(se.regex),q=Q.fields.map(X=>{const de=(0,h.C)(X,Q);if(!G.test(de))return X;const Be=de.replace(G,se.renamePattern);return{...X,config:{...X.config,displayName:Be},state:{...X.state,displayName:Be}}});return{...Q,fields:q}};var ae=e(82897),J=e(16911),oe=e(34472);const Ee={id:o.W.seriesToRows,name:"Series to rows",description:"Combines multiple series into a single serie and appends a column with metric name per value.",defaultOptions:{},operator:se=>Q=>Q.pipe((0,d.U)(G=>{if(!Array.isArray(G)||G.length<=1||!(0,oe.hZ)(G))return G;const q={},X=new Set,de=new p.v,Be={name:v.rN,values:new B.G,config:{},type:v.fS.string};for(let ke=0;ke<G.length;ke++){const He=G[ke];for(let ue=0;ue<He.fields.length;ue++){const Oe=He.fields[ue];if(Oe.type===v.fS.time){q[ke]=ue,X.has(v.Ls)||(de.addField(me(Oe,v.Ls)),de.addField(Be),X.add(v.Ls));continue}X.has(v.M5)||(de.addField(me(Oe,v.M5)),X.add(v.M5))}}for(let ke=0;ke<G.length;ke++){const He=G[ke];for(let ue=0;ue<He.length;ue++){const Oe=q[ke],Fe=Oe===0?1:0;de.add({[v.Ls]:He.fields[Oe].values.get(ue),[v.rN]:(0,h.n)(He),[v.M5]:He.fields[Fe].values.get(ue)})}}return[(0,J.aK)(de,0,!0)]}))},me=(se,Q)=>({...(0,ae.omit)(se,["values","state","labels","config","name"]),name:Q,values:new B.G,config:{...(0,ae.omit)(se.config,["displayName","displayNameFromDS"])}}),re={id:o.W.sortBy,name:"Sort by",description:"Sort fields in a frame",defaultOptions:{fields:{}},operator:se=>Q=>Q.pipe((0,d.U)(G=>!Array.isArray(G)||G.length===0||!se?.sort?.length?G:le(G,se.sort)))};function le(se,Q){return se.map(G=>{const q=pe(G,Q);return q.length&&q[0].index!=null?(0,J.aK)(G,q[0].index,q[0].desc):G})}function pe(se,Q){return Q.map(G=>G.index!=null?G:{...G,index:se.fields.findIndex(q=>G.field===(0,h.C)(q,se))})}const ee={noopTransformer:U.d,filterFieldsTransformer:r.P,filterFieldsByNameTransformer:g.w,filterFramesTransformer:r.u,filterFramesByRefIdTransformer:l,filterByValueTransformer:a.JA,orderFieldsTransformer:I.t,organizeFieldsTransformer:D,reduceTransformer:j.mf,concatenateTransformer:n.aE,calculateFieldTransformer:t.U,joinByFieldTransformer:O.M,seriesToColumnsTransformer:O.M,seriesToRowsTransformer:Ee,renameFieldsTransformer:N,labelsToFieldsTransformer:L.r,ensureColumnsTransformer:s.W,groupByTransformer:m.i,sortByTransformer:re,mergeTransformer:A.R,renameByRegexTransformer:z,histogramTransformer:x.Op,convertFieldTypeTransformer:c.mg,groupingToMatrixTransformer:C,limitTransformer:R}},89984:(H,T,e)=>{"use strict";e.d(T,{ie:()=>E,U:()=>S,h:()=>L});var t=e(82897),n=e(2101),c=e(16911),s=e(89890),r=e(14582),g=e(49922),f=e(98082),o=e(19695),l=e(1473),a=e(30664),m=e(52674),d=e(49319);class p{constructor(w){this.columns=w,this.rowIndex=0}get length(){return this.columns.length}get(w){return this.columns[w].get(this.rowIndex)}toArray(){return(0,d.n)(this)}toJSON(){return(0,d.n)(this)}}var h=e(21760),y=e(3249),v=e(85854),i=e(78313),u=e(17130),P=e(21398),E=(B=>(B.ReduceRow="reduceRow",B.BinaryOperation="binary",B))(E||{});const C={reducer:h.gz.sum},b={left:"",operator:f.L.Add,right:""},S={id:u.W.calculateField,name:"Add field from calculation",description:"Use the row values to calculate a new field",defaultOptions:{mode:"reduceRow",reduce:{reducer:h.gz.sum}},operator:(B,w)=>R=>{const A=B&&B.timeSeries!==!1?i.W.operator(null,w):P.d.operator({},w);return B.alias!=null&&(B.alias=w.interpolate(B.alias)),R.pipe(A,(0,n.U)(U=>{const I=B.mode??"reduceRow";let N;if(I==="reduceRow")N=M((0,t.defaults)(B.reduce,C),U);else if(I==="binary"){const F={...B.binary,left:w.interpolate(B.binary?.left),right:w.interpolate(B.binary?.right)};N=O((0,t.defaults)(F,b),U)}return N?U.map(F=>{const D=N(F);if(!D)return F;const Y={name:L(B),type:r.fS.number,config:{},values:D};let j=[];if(B.replaceFields){const{timeField:K}=(0,c.sV)(F);K&&B.timeSeries!==!1?j=[K,Y]:j=[Y]}else j=[...F.fields,Y];return{...F,fields:j}}):U}))}};function M(B,w){let R=(0,y.sq)({id:v.mi.numeric});B.include&&B.include.length&&(R=(0,y.sq)({id:v.mi.byNames,options:{names:B.include}}));const A=h.TB.get(B.reducer);if(!A)throw new Error(`Unknown reducer: ${B.reducer}`);const U=A.reduce??h.uP,I=B.nullValueMode===g.Gl.Ignore,N=B.nullValueMode===g.Gl.AsZero;return F=>{const D=[];for(const z of F.fields)R(z,F,w)&&D.push(z.values);const Y=new p(D),j={name:"temp",values:Y,type:r.fS.number,config:{}},K=[];for(let z=0;z<F.length;z++){Y.rowIndex=z;const Z=U(j,I,N)[B.reducer];K.push(Z)}return new o.G(K)}}function x(B,w,R){if(!w)return;for(const U of B.fields)if(w===(0,s.C)(U,B,R))return U.type===r.fS.boolean?new m.s(U.values):U.values;const A=parseFloat(w);if(!isNaN(A))return new l.u(A,B.length)}function O(B,w){const R=f.n.getIfExists(B.operator);return A=>{const U=x(A,B.left,w),I=x(A,B.right,w);if(!(!U||!I||!R))return new a.r(U,I,R.operation)}}function L(B){if(B.alias?.length)return B.alias;if(B.mode==="binary"){const{binary:w}=B;return`${w?.left??""} ${w?.operator??""} ${w?.right??""}`}if(B.mode==="reduceRow"){const w=h.TB.getIfExists(B.reduce?.reducer);if(w)return w.name}return"math"}},42074:(H,T,e)=>{"use strict";e.d(T,{HO:()=>r,aE:()=>g});var t=e(2101),n=e(14582),c=e(19695),s=e(17130),r=(o=>(o.Drop="drop",o.FieldName="field",o.Label="label",o))(r||{});const g={id:s.W.concatenate,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",defaultOptions:{frameNameMode:"field",frameNameLabel:"frame"},operator:o=>l=>l.pipe((0,t.U)(a=>!Array.isArray(a)||a.length<2?a:[f(a,o)]))};function f(o,l){let a=!0,m=o[0].length;const d=l.frameNameLabel??"frame";let p=[];for(const h of o){m!==h.length&&(a=!1,m=Math.max(m,h.length));for(const y of h.fields){const v={...y};v.state=void 0,h.name&&(l.frameNameMode==="drop"||(l.frameNameMode==="label"?(v.labels={...y.labels},v.labels[d]=h.name):!v.name||v.name===n.M5?v.name=h.name:v.name=`${h.name} \xB7 ${y.name}`)),p.push(v)}}return a||(p=p.map(h=>{if(h.values.length===m)return h;const y=h.values.toArray();return y.length=m,{...h,values:new c.G(y)}})),{fields:p,length:m}}},2932:(H,T,e)=>{"use strict";e.d(T,{J_:()=>i,mg:()=>o});var t=e(2101),n=e(85052),c=e(14582),s=e(19695),r=e(3249),g=e(85854),f=e(17130);const o={id:f.W.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0}]},operator:(u,P)=>E=>E.pipe((0,t.U)(C=>o.transformer(u,P)(C))),transformer:u=>P=>{if(!Array.isArray(P)||P.length===0)return P;const E=l(u,P);return E||[]}};function l(u,P){if(!u.conversions.length)return P;const E=P.map(C=>({...C}));for(const C of u.conversions){if(!C.targetField)continue;const b=r.Ls.get(g.mi.byName).get(C.targetField);for(const S of E)S.fields=S.fields.map(M=>b(M,S,E)?a(M,C):M)}return E}function a(u,P){switch(P.destinationType){case c.fS.time:return i(u,P.dateFormat);case c.fS.number:return p(u);case c.fS.string:return y(u);case c.fS.boolean:return h(u);case c.fS.other:return v(u);default:return u}}const m=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3})?Z$/;function d(u,P){let E=P?{format:P}:void 0;const C=u.values.toArray().slice();let b=C.find(M=>M!=null),S=typeof b=="string"&&m.test(b);for(let M=0;M<C.length;M++)if(C[M]){let x=S?Date.parse(C[M]):(0,n.J)(C[M],E).valueOf();C[M]=Number.isFinite(x)?x:null}else C[M]=null;return{...u,type:c.fS.time,values:new s.G(C)}}function p(u){const P=u.values.toArray().slice(),E=P.some(C=>typeof C=="string");for(let C=0;C<P.length;C++){let b=P[C];E&&(b=b.replace(/,/g,""));const S=+b;P[C]=Number.isFinite(S)?S:null}return{...u,type:c.fS.number,values:new s.G(P)}}function h(u){const P=u.values.toArray().slice();for(let E=0;E<P.length;E++)P[E]=Boolean(!!P[E]);return{...u,type:c.fS.boolean,values:new s.G(P)}}function y(u){const P=u.values.toArray().slice();for(let E=0;E<P.length;E++)P[E]=`${P[E]}`;return{...u,type:c.fS.string,values:new s.G(P)}}function v(u){const P=u.values.toArray().slice();for(let E=0;E<P.length;E++)try{P[E]=JSON.parse(P[E])}catch{P[E]=null}return{...u,type:c.fS.other,values:new s.G(P)}}function i(u,P){const E=typeof u.values.get(0)=="number";return u.type===c.fS.time&&E?u:E?{...u,type:c.fS.time}:d(u,P)}},78313:(H,T,e)=>{"use strict";e.d(T,{W:()=>r});var t=e(2101),n=e(16911),c=e(17130),s=e(75176);const r={id:c.W.ensureColumns,name:"Ensure Columns Transformer",description:"Will check if current data frames is series or columns. If in series it will convert to columns.",operator:(f,o)=>l=>l.pipe((0,t.U)(a=>r.transformer(f,o)(a))),transformer:(f,o)=>l=>{const a=g(l);return l.length>1&&a?s.M.transformer({byField:a},o)(l):l}};function g(f){let o;for(const l of f){const{timeField:a}=(0,n.sV)(l);if(!a)return;if(!o)o=a.name;else if(o!==a.name)return}return o}},33723:(H,T,e)=>{"use strict";e.d(T,{P:()=>r,u:()=>g});var t=e(2101),n=e(3249),c=e(17130),s=e(21398);const r={id:c.W.filterFields,name:"Filter Fields",description:"select a subset of fields",defaultOptions:{},operator:(f,o)=>l=>!f.include&&!f.exclude?l.pipe(s.d.operator({},o)):(typeof f.include?.options=="string"?f.include.options=o.interpolate(f.include?.options):typeof f.include?.options?.pattern=="string"&&(f.include.options.pattern=o.interpolate(f.include?.options.pattern)),typeof f.exclude?.options=="string"?f.exclude.options=o.interpolate(f.exclude?.options):typeof f.exclude?.options?.pattern=="string"&&(f.exclude.options.pattern=o.interpolate(f.exclude?.options.pattern)),l.pipe((0,t.U)(a=>{const m=f.include?(0,n.sq)(f.include):null,d=f.exclude?(0,n.sq)(f.exclude):null,p=[];for(const h of a){const y=[];for(let i=0;i<h.fields.length;i++){const u=h.fields[i];if(d){if(d(u,h,a))continue;m||y.push(u)}m&&m(u,h,a)&&y.push(u)}if(!y.length)continue;const v={...h,fields:y};p.push(v)}return p})))},g={id:c.W.filterFrames,name:"Filter Frames",description:"select a subset of frames",defaultOptions:{},operator:(f,o)=>l=>!f.include&&!f.exclude?l.pipe(s.d.operator({},o)):l.pipe((0,t.U)(a=>{const m=f.include?(0,n.b9)(f.include):null,d=f.exclude?(0,n.b9)(f.exclude):null,p=[];for(const h of a){if(d){if(d(h))continue;m||p.push(h)}m&&m(h)&&p.push(h)}return p}))}},84931:(H,T,e)=>{"use strict";e.d(T,{f:()=>r,w:()=>s});var t=e(85854),n=e(33723),c=e(17130);const s={id:c.W.filterFieldsByName,name:"Filter fields by name",description:"select a subset of fields",defaultOptions:{},operator:(g,f)=>o=>o.pipe(n.P.operator({include:r(g.include),exclude:r(g.exclude)},f))},r=g=>{if(!g)return;const{names:f,pattern:o}=g;if(!((!Array.isArray(f)||f.length===0)&&!o))return o?!Array.isArray(f)||f.length===0?{id:t.mi.byRegexp,options:o}:{id:t.mi.byRegexpOrNames,options:g}:{id:t.mi.byNames,options:{names:f}}}},86789:(H,T,e)=>{"use strict";e.d(T,{ER:()=>o,JA:()=>l,PQ:()=>f});var t=e(2101),n=e(89890),c=e(19695),s=e(3249),r=e(17130),g=e(21398),f=(d=>(d.exclude="exclude",d.include="include",d))(f||{}),o=(d=>(d.all="all",d.any="any",d))(o||{});const l={id:r.W.filterByValue,name:"Filter data by values",description:"select a subset of results based on values",defaultOptions:{filters:[],type:"include",match:"any"},operator:(d,p)=>h=>{const y=d.filters,v=d.match==="all",i=d.type==="include";return!Array.isArray(y)||y.length===0?h.pipe(g.d.operator({},p)):h.pipe((0,t.U)(u=>{if(!Array.isArray(u)||u.length===0)return u;const P=new Set;for(const b of u){const S=m(b,u),M=a(y,S);for(let x=0;x<b.length;x++){if(P.has(x))continue;let O=!0;for(const L of M){const B=L(x,b,u);if(!v&&B){O=!0;break}if(v&&!B){O=!1;break}O=B}O&&P.add(x)}}const E=[],C=i?P.size:u[0].length-P.size;for(const b of u){const S=[];for(const M of b.fields){const x=[];for(let O=0;O<b.length;O++){if(i&&P.has(O)){x.push(M.values.get(O));continue}if(!i&&!P.has(O)){x.push(M.values.get(O));continue}}S.push({...M,values:new c.G(x),state:{}})}E.push({...b,fields:S,length:C})}return E}))}},a=(d,p)=>{const h=()=>!1;return d.map(y=>{const v=p[y.fieldName]??-1;if(v<0)return console.warn(`[FilterByValue] Could not find index for field name: ${y.fieldName}`),h;const i=(0,s.IG)(y.config);return(u,P,E)=>i(u,P.fields[v],P,E)})},m=(d,p)=>d.fields.reduce((h,y,v)=>{const i=(0,n.C)(y,d,p);return h[i]=v,h},{})},88861:(H,T,e)=>{"use strict";e.d(T,{i:()=>l,x:()=>o});var t=e(2101),n=e(16911),c=e(89890),s=e(14582),r=e(19695),g=e(21760),f=e(17130),o=(p=>(p.aggregate="aggregate",p.groupBy="groupby",p))(o||{});const l={id:f.W.groupBy,name:"Group by",description:"Group the data by a field values then process calculations for each group",defaultOptions:{fields:{}},operator:p=>h=>h.pipe((0,t.U)(y=>{if(!Object.keys(p.fields).find(u=>p.fields[u].operation==="groupby"))return y;const i=[];for(const u of y){const P=[];for(const b of u.fields)a(b,p)&&P.push(b);if(P.length===0)continue;const E=new Map;for(let b=0;b<u.length;b++){const S=String(P.map(x=>x.values.get(b))),M=E.get(S)??{};E.has(S)||E.set(S,M);for(let x of u.fields){const O=(0,c.C)(x);M[O]||(M[O]={name:O,type:x.type,config:{...x.config},values:new r.G}),M[O].values.add(x.values.get(b))}}const C=[];for(const b of P){const S=new r.G,M=(0,c.C)(b);E.forEach(x=>{S.add(x[M].values.get(0))}),C.push({name:b.name,type:b.type,config:{...b.config},values:S})}for(const b of u.fields){if(!m(b,p))continue;const S=(0,c.C)(b),M=p.fields[S].aggregations,x={};E.forEach(O=>{const L=O[S],B=(0,g.Kx)({field:L,reducers:M});for(const w of M)Array.isArray(x[w])||(x[w]=[]),x[w].push(B[w])});for(const O of M){const L={name:`${S} (${O})`,values:new r.G(x[O]),type:s.fS.other,config:{}};L.type=d(O,b,L),C.push(L)}}i.push({fields:C,length:E.size})}return i}))},a=(p,h)=>{const y=(0,c.C)(p);return h?.fields[y]?.operation==="groupby"},m=(p,h)=>{const y=(0,c.C)(p);return h?.fields[y]?.operation==="aggregate"&&Array.isArray(h?.fields[y].aggregations)&&h?.fields[y].aggregations.length>0},d=(p,h,y)=>{switch(p){case g.gz.allIsNull:return s.fS.boolean;case g.gz.last:case g.gz.lastNotNull:case g.gz.first:case g.gz.firstNotNull:return h.type;default:return(0,n.fu)(y)??s.fS.string}}},15128:(H,T,e)=>{"use strict";e.d(T,{Jz:()=>b,Ok:()=>v,Op:()=>h,UO:()=>S,Zi:()=>a,cO:()=>i,gY:()=>C,kl:()=>u,mB:()=>M,py:()=>p,qr:()=>P,wL:()=>y,zM:()=>O});var t=e(2101),n=e(36512),c=e(36328),s=e(88432),r=e(14582),g=e(43211),f=e(19695),o=e(17130),l=e(98234);const a=[1e-9,2e-9,25e-10,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],m=[null],d=(L,B)=>L-B,p={bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},h={id:o.W.histogram,name:"Histogram",description:"Calculate a histogram from input data",defaultOptions:{fields:{}},operator:(L,B)=>w=>w.pipe((0,t.U)(R=>h.transformer(L,B)(R))),transformer:L=>B=>{if(!Array.isArray(B)||B.length===0)return B;const w=C(B,L);return w==null?[]:[O(w)]}},y="xMin";function v(L){return L===y||L==="BucketMin"}const i="xMax";function u(L){return L===i||L==="BucketMax"}function P(L){let B,w;const R=[];for(const A of L.fields)v(A.name)?B=A:u(A.name)?w=A:A.type===r.fS.number&&R.push(A);if(!w&&B&&B.values.length>1){let A=B.values.toArray(),U=(0,g.O)(A[1]-A[0],6);w={...B,name:i,values:new f.G(A.map(I=>I+U))}}if(!B&&w&&w?.values.length>1){let A=w.values.toArray(),U=(0,g.O)(A[1]-A[0],6);B={...w,name:y,values:new f.G(A.map(I=>I-U))}}if(B&&w&&R.length)return{xMin:B,xMax:w,counts:R}}const E=20;function C(L,B){let w=B?.bucketSize,R=B?.bucketOffset??0;if(!w||w<0){let K=[];for(const Ee of L)for(const me of Ee.fields)me.type===r.fS.number&&(K=K.concat(me.values.toArray()));K=K.filter(Ee=>Ee!=null),K.sort((Ee,me)=>Ee-me);let z=1/0;if(K.length===1)z=1;else for(let Ee=1;Ee<K.length;Ee++){let me=K[Ee]-K[Ee-1];me!==0&&(z=Math.min(z,me))}let Z=K[0];const oe=(K[K.length-1]-Z)/E;for(let Ee=0;Ee<a.length;Ee++){let me=a[Ee];if(oe<me&&me>=z){w=me;break}}}const A=K=>M(K-R,w)+R;let U=((""+w).match(/\.\d+$/)??["."])[0].length-1,I=[],N=[],F;for(const K of L)for(const z of K.fields)if(z.type===r.fS.number){let Z=x(z.values.toArray(),A,m,d);I.push(Z),N.push({...z,config:{...z.config,unit:z.config.unit==="short"?"short":void 0}}),!F&&z.config.unit&&(F=z.config)}if(!N.length)return null;let D=(0,l.v_)(I);for(let K=1;K<D.length;K++){let z=D[K];for(let Z=0;Z<z.length;Z++)z[Z]==null&&(z[Z]=0)}const Y={name:y,values:new f.G(D[0]),type:r.fS.number,state:void 0,config:U===0?F??{}:{...F,decimals:U}},j={...Y,name:i,values:new f.G(D[0].map(K=>K+w))};if(B?.combine){const K=new Array(D[0].length).fill(0);for(let z=1;z<D.length;z++)for(let Z=0;Z<K.length;Z++)K[Z]+=D[z][Z];N=[{...N[0],name:"count",values:new f.G(K),type:r.fS.number,state:void 0}]}else N.forEach((K,z)=>{K.values=new f.G(D[z+1])});return{xMin:Y,xMax:j,counts:N}}function b(L,B){return Math.round(L/B)*B}function S(L,B){return Math.ceil(L/B)*B}function M(L,B){return Math.floor(L/B)*B}function x(L,B,w,R){let A=new Map;for(let F=0;F<L.length;F++){let D=L[F];D!=null&&(D=B(D));let Y=A.get(D);Y?Y.count++:A.set(D,{value:D,count:1})}w&&w.forEach(F=>A.delete(F));let U=[...A.values()];R&&U.sort((F,D)=>R(F.value,D.value));let I=Array(U.length),N=Array(U.length);for(let F=0;F<U.length;F++)I[F]=U[F].value,N[F]=U[F].count;return[I,N]}function O(L,B){if(!L.xMin.display){const w=(0,n.U)({field:L.xMin,theme:B??(0,c.j)()});L.xMin.display=w,L.xMax.display=w}return L.counts[0].display=(0,n.U)({field:L.counts[0],theme:B??(0,c.j)()}),{length:L.xMin.values.length,meta:{type:s.P.Histogram},fields:[L.xMin,L.xMax,...L.counts]}}},75176:(H,T,e)=>{"use strict";e.d(T,{M:()=>f,c:()=>g});var t=e(2101),n=e(3249),c=e(85854),s=e(17130),r=e(98234),g=(o=>(o.outer="outer",o.inner="inner",o))(g||{});const f={id:s.W.joinByField,aliasIds:[s.W.seriesToColumns],name:"Join by field",description:"Combine rows from two or more tables, based on a related field between them.  This can be used to outer join multiple time series on the _time_ field to show many time series in one table.",defaultOptions:{byField:void 0,mode:"outer"},operator:(o,l)=>a=>a.pipe((0,t.U)(m=>f.transformer(o,l)(m))),transformer:o=>{let l;return a=>{if(a.length>1){o.byField&&!l&&(l=n.Ls.get(c.mi.byName).get(o.byField));const m=(0,r._9)({frames:a,joinBy:l,mode:o.mode});if(m)return[m]}return a}}}},98234:(H,T,e)=>{"use strict";e.d(T,{Y3:()=>a,_9:()=>m,v_:()=>v});var t=e(39963),n=e(16911),c=e(14582),s=e(19695),r=e(3249),g=e(85854),f=e(75176);function o(u){const{timeField:P}=(0,n.sV)(u[0]);if(P)return r.Ls.get(g.mi.firstTimeField).get({});let E=[];for(const C of u[0].fields)C.type===c.fS.number&&E.push(C.name);for(let C=1;C<u.length;C++){const b=[];for(const S of u[0].fields)S.type===c.fS.number&&b.push(S.name);E=E.filter(S=>!b.includes(S))}return r.Ls.get(g.mi.byName).get(E[0])}function l(u){return u.joinBy??o(u.frames)}function a(u,P){if(P>=0){let E=u.fields[P];E.type!==c.fS.string&&!i(E.values)&&(u=(0,n.aK)(u,P))}return u}function m(u){if(!u.frames?.length)return;if(u.frames.length===1){let M=u.frames[0],x=M;const O=l(u);let L=x.fields.findIndex(B=>O(B,x,u.frames));if(u.keepOriginIndices&&(x={...M,fields:M.fields.map((B,w)=>{const R={...B},A={frameIndex:0,fieldIndex:w};return R.state?R.state.origin=A:R.state={origin:A},R})},L>0)){const B=x.fields[L],w=x.fields.filter((R,A)=>A!==L);w.unshift(B),x.fields=w,L=0}if(L>=0&&(x=a(x,L)),u.keep){let B=x.fields.filter((w,R)=>R===L||u.keep(w,x,u.frames));M!==x?x.fields=B:x={...M,fields:B}}return x}const P=[],E=[],C=[],b=l(u);for(let M=0;M<u.frames.length;M++){const x=u.frames[M];if(!x||!x.fields?.length)continue;const O=[d];let L,B=[];for(let R=0;R<x.fields.length;R++){const A=x.fields[R];if(A.state=A.state||{},!L&&b(A,x,u.frames))L=A;else{if(u.keep&&!u.keep(A,x,u.frames))continue;let U=A.config.custom?.spanNulls;O.push(U===!0?d:U===-1?p:h);let I=A.labels??{};x.name&&(I={...I,name:x.name}),B.push({...A,labels:I})}u.keepOriginIndices&&(A.state.origin={frameIndex:M,fieldIndex:R})}if(!L)continue;C.length===0&&C.push(L),P.push(O);const w=[L.values.toArray()];for(const R of B)w.push(R.values.toArray()),C.push(R),delete R.state?.displayName;E.push(w)}const S=v(E,P,u.mode);return{length:S[0].length,fields:C.map((M,x)=>({...M,values:new s.G(S[x])}))}}const d=0,p=1,h=2;function y(u,P,E){for(let C=0,b,S=-1;C<P.length;C++){let M=P[C];if(M>S){for(b=M-1;b>=0&&u[b]==null;)u[b--]=null;for(b=M+1;b<E&&u[b]==null;)u[S=b++]=null}}}function v(u,P,E=f.c.outer){let C;if(E===f.c.inner)C=new Set((0,t.Z)(u.map(x=>x[0])));else{C=new Set;for(let x=0;x<u.length;x++){let L=u[x][0],B=L.length;for(let w=0;w<B;w++)C.add(L[w])}}let b=[Array.from(C).sort((x,O)=>x-O)],S=b[0].length,M=new Map;for(let x=0;x<S;x++)M.set(b[0][x],x);for(let x=0;x<u.length;x++){let O=u[x],L=O[0];for(let B=1;B<O.length;B++){let w=O[B],R=Array(S).fill(void 0),A=P?P[x][B]:p,U=[];for(let I=0;I<w.length;I++){let N=w[I],F=M.get(L[I]);N===null?A!==d&&(R[F]=N,A===h&&U.push(F)):R[F]=N}y(R,U,S),b.push(R)}}return b}function i(u,P=50){const E=u.length;if(E<=1)return!0;let C=0,b=E-1;for(;C<=b&&u.get(C)==null;)C++;for(;b>=C&&u.get(b)==null;)b--;if(b<=C)return!0;const S=Math.max(1,Math.floor((b-C+1)/P));for(let M=u.get(C),x=C+S;x<=b;x+=S){const O=u.get(x);if(O!=null){if(O<=M)return!1;M=O}}return!0}},1052:(H,T,e)=>{"use strict";e.d(T,{k:()=>g,r:()=>f});var t=e(2101),n=e(89890),c=e(14582),s=e(19695),r=e(17130),g=(l=>(l.Columns="columns",l.Rows="rows",l))(g||{});const f={id:r.W.labelsToFields,name:"Labels to fields",description:"Extract time series labels to fields (columns or rows)",defaultOptions:{},operator:(l,a)=>m=>m.pipe((0,t.U)(d=>f.transformer(l,a)(d))),transformer:l=>a=>{if(l.mode==="rows")return o(a,l.keepLabels);const m=[],d=l.keepLabels?.length?new Set(l.keepLabels):void 0;for(const p of a){const h=[],y={};for(const v of p.fields){if(!v.labels){h.push(v);continue}const i={...v,config:{...v.config,displayName:void 0,displayNameFromDS:void 0},labels:void 0};h.push(i);for(const u of Object.keys(v.labels)){if(d&&!d.has(u))continue;if(l.valueLabel===u){i.name=v.labels[u];continue}(y[u]??(y[u]=new Set)).add(v.labels[u])}}for(const v in y)for(const i of y[v]){const u=new Array(p.length).fill(i);h.push({name:v,type:c.fS.string,values:new s.G(u),config:{}})}m.push({...p,fields:h,length:p.length})}return m}};function o(l,a){const m=[];for(const d of l)for(const p of d.fields)if(p.labels){const h=[],y=[];if(a)for(const v of a)h.push(v),y.push(p.labels[v]);else for(const[v,i]of Object.entries(p.labels))h.push(v),y.push(i);y.length&&m.push({...d,name:(0,n.C)(p,d,l),fields:[{name:"label",type:c.fS.string,config:{},values:new s.G(h)},{name:"value",type:c.fS.string,config:{},values:new s.G(y)}],length:y.length})}return m}},10158:(H,T,e)=>{"use strict";e.d(T,{R:()=>f});var t=e(82897),n=e.n(t),c=e(2101),s=e(38685),r=e(19695),g=e(17130);const f={id:g.W.merge,name:"Merge series/tables",description:"Merges multiple series/tables into a single serie/table",defaultOptions:{},operator:h=>y=>y.pipe((0,c.U)(v=>{if(!Array.isArray(v)||v.length<=1)return v;const i=v.filter(O=>O.fields.length>0);if(i.length===0)return[v[0]];const u=new Set,P={},E=[],C=new s.v;for(let O=0;O<i.length;O++){const L=i[O];for(let B=0;B<L.fields.length;B++){const w=L.fields[B];u.has(w.name)||(C.addField(o(w)),u.add(w.name)),P[w.name]=P[w.name]||{},P[w.name][O]=B,i.length-1===O&&d(P,w,i)&&E.push(w.name)}}if(E.length===0)return v;const b={},S=[],M=l(i,P,E),x=a(i,u,P);for(let O=0;O<i.length;O++){const L=i[O];for(let B=0;B<L.length;B++){const w=M(O,B),R=x(O,B);if(!Array.isArray(b[w])){b[w]=[R],S.push(p(w,b));continue}let A=!1;b[w]=b[w].map(U=>m(U,R)?(A=!0,{...U,...R}):U),A||(b[w].push(R),S.push(p(w,b)))}}for(const O of S){const L=b[O.key][O.index];L&&C.add(L)}return[C]}))},o=h=>({...(0,t.omit)(h,["values","state","labels","config"]),values:new r.G,config:{...(0,t.omit)(h.config,"displayName")}}),l=(h,y,v)=>{const i=v.reduce((u,P)=>Object.keys(y[P]).reduce((E,C)=>(E[C]=E[C]||[],E[C].push(y[P][C]),E),u),{});return(u,P)=>i[u].reduce((E,C)=>E+h[u].fields[C].values.get(P),"")},a=(h,y,v)=>(i,u)=>{const P={},E=Array.from(y);for(const C of E){const b=v[C];if(!b)continue;const S=b[i];if(typeof S!="number")continue;const M=h[i];if(!M||!M.fields)continue;const x=M.fields[S];!x||!x.values||(P[C]=x.values.get(u))}return P},m=(h,y)=>{let v=!0;for(const i in y)if(!(typeof h[i]>"u")&&h[i]!==null&&h[i]!==y[i]){v=!1;break}return v},d=(h,y,v)=>Object.keys(h[y.name]).length===v.length,p=(h,y)=>({key:h,index:y[h].length-1})},21398:(H,T,e)=>{"use strict";e.d(T,{d:()=>n});var t=e(17130);const n={id:t.W.noop,name:"noop",description:"No-operation transformer",defaultOptions:{},operator:c=>s=>s,transformer:c=>s=>s}},7582:(H,T,e)=>{"use strict";e.d(T,{$:()=>f,t:()=>g});var t=e(82897),n=e.n(t),c=e(2101),s=e(89890),r=e(17130);const g={id:r.W.order,name:"Order fields by name",description:"Order fields based on configuration given by user",defaultOptions:{indexByName:{}},operator:a=>m=>m.pipe((0,c.U)(d=>{const p=o(a.indexByName);return!Array.isArray(d)||d.length===0?d:d.map(h=>({...h,fields:p(h.fields,d,h)}))}))},f=a=>(m,d)=>l(m,a)-l(d,a),o=a=>(m,d,p)=>{if(!Array.isArray(m)||m.length===0||!a||Object.keys(a).length===0)return m;const h=f(a);return(0,t.clone)(m).sort((y,v)=>h((0,s.C)(y,p,d),(0,s.C)(v,p,d)))},l=(a,m)=>Number.isInteger(m[a])?m[a]:Number.MAX_SAFE_INTEGER},4157:(H,T,e)=>{"use strict";e.d(T,{AL:()=>a,mf:()=>m});var t=e(2101),n=e(16911),c=e(89890),s=e(14582),r=e(19695),g=e(21760),f=e(3249),o=e(89771),l=e(17130),a=(v=>(v.SeriesToRows="seriesToRows",v.ReduceFields="reduceFields",v))(a||{});const m={id:l.W.reduce,name:"Reduce",description:"Reduce all rows or data points to a single value using a function like max, min, mean or last",defaultOptions:{reducers:[g.gz.max]},operator:v=>i=>i.pipe((0,t.U)(u=>{if(!v?.reducers?.length)return u;const P=v.fields?(0,f.sq)(v.fields):v.includeTimeField&&v.mode==="reduceFields"?o.m3:o.Qw;if(v.mode==="reduceFields")return y(u,P,v.reducers);const E=d(u,P,v.reducers,v.labelsToFields);return E?[E]:[]}))};function d(v,i,u,P){const E=g.TB.list(u),C=E.map(M=>M.id),b=[],S=P?p(v):[];for(const M of v){const x=M.fields.filter(A=>i(A,M,v)),O=x.length,L=[],B=new r.G(new Array(O));L.push({name:"Field",type:s.fS.string,values:B,config:{}});const w={};if(P)for(const A of S)w[A]=new r.G(new Array(O)),L.push({name:A,type:s.fS.string,values:w[A],config:{}});const R={};for(const A of E)R[A.id]=new r.G(new Array(O)),L.push({name:A.name,type:s.fS.other,values:R[A.id],config:{}});for(let A=0;A<x.length;A++){const U=x[A],I=(0,g.Kx)({field:U,reducers:C});if(P){if(B.buffer[A]=U.name,U.labels)for(const N of Object.keys(U.labels))w[N].set(A,U.labels[N])}else B.buffer[A]=(0,c.C)(U,M,v);for(const N of E){const F=I[N.id];R[N.id].buffer[A]=F}}for(const A of L)if(A.type===s.fS.other){const U=(0,n.fu)(A);U&&(A.type=U)}b.push({...M,fields:L,length:O})}return h(b)}function p(v){const i=new Set;for(const u of v)for(const P of u.fields)if(P.labels)for(const E of Object.keys(P.labels))i.add(E);return[...i]}function h(v){if(!v?.length)return;const i=v[0];for(let u=1;u<v.length;u++){const P=v[u];for(let E=0;E<i.fields.length;E++){const C=i.fields[E];for(let b=0;b<P.fields.length;b++){const S=P.fields[b],M=E===0&&b===0,x=C.type===S.type&&C.name===S.name;if(M||x){const O=C.values.toArray(),L=S.values.toArray();C.values.buffer=O.concat(L)}}}}return i.name=void 0,i.length=i.fields[0].values.length,i}function y(v,i,u){const E=g.TB.list(u).map(b=>b.id),C=[];for(const b of v){const S=[];for(const M of b.fields)if(i(M,b,v)){const x=(0,g.Kx)({field:M,reducers:E});for(const O of E){const L=x[O],B={...M,values:new r.G([L])};B.state=void 0,E.length>1&&(B.labels||(B.labels={}),B.labels.reducer=g.TB.get(O).name),S.push(B)}}S.length&&C.push({...b,fields:S,length:1})}return C}},17179:()=>{"use strict"},14633:()=>{"use strict"},23309:(H,T,e)=>{"use strict";e.d(T,{Z:()=>t});var t=(n=>(n.NoData="no_data",n.Paused="paused",n.Alerting="alerting",n.OK="ok",n.Pending="pending",n.Unknown="unknown",n))(t||{})},20442:(H,T,e)=>{"use strict";e.d(T,{L:()=>t});var t=(n=>(n.Field="field",n.Text="text",n.Skip="skip",n))(t||{})},40400:(H,T,e)=>{"use strict";e.d(T,{CQ:()=>s,k8:()=>c,zj:()=>n});var t=e(24699),n=(r=>(r.CloudAlerting="cloud-alerting",r.UnifiedAlerting="unified-alerting",r.Dashboard="dashboard",r.Explore="explore",r.Correlations="correlations",r.Unknown="unknown",r.PanelEditor="panel-editor",r.PanelViewer="panel-viewer",r))(n||{});class c extends t.Sg{init(g){}setRootPage(g){return this.root=g,this}setComponentsFromLegacyExports(g){if(g.ConfigCtrl&&(this.angularConfigCtrl=g.ConfigCtrl),this.meta&&this.meta.includes){for(const f of this.meta.includes)if(f.type===t.$_.page&&f.component&&!g[f.component]){console.warn("App Page uses unknown component: ",f.component,this.meta);continue}}}}var s=(r=>(r.alpha="alpha",r.beta="beta",r))(s||{})},66847:(H,T,e)=>{"use strict";e.d(T,{Hx:()=>t,Z3:()=>n,bm:()=>c});const t=0,n=100,c="SAML"},29431:(H,T,e)=>{"use strict";e.d(T,{m:()=>t});var t=(n=>(n[n.Off=0]="Off",n[n.Crosshair=1]="Crosshair",n[n.Tooltip=2]="Tooltip",n))(t||{})},49922:(H,T,e)=>{"use strict";e.d(T,{Gl:()=>c,Gu:()=>t,dC:()=>n,fQ:()=>s});var t=(r=>(r.NotStarted="NotStarted",r.Loading="Loading",r.Streaming="Streaming",r.Done="Done",r.Error="Error",r))(t||{});const n=["graph","table","logs","trace","nodeGraph","flamegraph","rawPrometheus"];var c=(r=>(r.Null="null",r.Ignore="connected",r.AsZero="null as zero",r))(c||{});const s=r=>Boolean(r)},14582:(H,T,e)=>{"use strict";e.d(T,{Ls:()=>c,M5:()=>n,fS:()=>t,rN:()=>s});var t=(r=>(r.time="time",r.number="number",r.string="string",r.boolean="boolean",r.trace="trace",r.geo="geo",r.other="other",r))(t||{});const n="Value",c="Time",s="Metric"},88432:(H,T,e)=>{"use strict";e.d(T,{P:()=>t});var t=(n=>(n.TimeSeriesWide="timeseries-wide",n.TimeSeriesLong="timeseries-long",n.TimeSeriesMany="timeseries-many",n.TimeSeriesMulti="timeseries-multi",n.DirectoryListing="directory-listing",n.HeatmapRows="heatmap-rows",n.HeatmapCells="heatmap-cells",n.Histogram="histogram",n))(t||{})},28151:(H,T,e)=>{"use strict";e.d(T,{L:()=>t,o:()=>n});var t=(c=>(c.Series="series",c.Field="field",c.Fields="fields",c.Value="value",c.BuiltIn="built-in",c.Template="template",c))(t||{}),n=(c=>(c.Values="values",c))(n||{})},7238:(H,T,e)=>{"use strict";e.d(T,{MF:()=>s,Ru:()=>r,eA:()=>g,hf:()=>c,iL:()=>f});var t=e(77345),n=e(24699);class c extends n.Sg{constructor(l){super(),this.DataSourceClass=l,this.components={}}setConfigEditor(l){return this.components.ConfigEditor=l,this}setConfigCtrl(l){return this.angularConfigCtrl=l,this}setQueryCtrl(l){return this.components.QueryCtrl=l,this}setAnnotationQueryCtrl(l){return this.components.AnnotationsQueryCtrl=l,this}setQueryEditor(l){return this.components.QueryEditor=l,this}setExploreQueryField(l){return this.components.ExploreQueryField=l,this}setExploreMetricsQueryField(l){return this.components.ExploreMetricsQueryField=l,this}setExploreLogsQueryField(l){return this.components.ExploreLogsQueryField=l,this}setQueryEditorHelp(l){return this.components.QueryEditorHelp=l,this}setExploreStartPage(l){return this.setQueryEditorHelp(l)}setVariableQueryEditor(l){return this.components.VariableQueryEditor=l,this}setMetadataInspector(l){return this.components.MetadataInspector=l,this}setComponentsFromLegacyExports(l){this.angularConfigCtrl=l.ConfigCtrl,this.components.QueryCtrl=l.QueryCtrl,this.components.AnnotationsQueryCtrl=l.AnnotationsQueryCtrl,this.components.ExploreQueryField=l.ExploreQueryField,this.components.QueryEditor=l.QueryEditor,this.components.QueryEditorHelp=l.QueryEditorHelp,this.components.VariableQueryEditor=l.VariableQueryEditor}}class s{constructor(l){this.name=l.name,this.id=l.id,this.type=l.type,this.meta=l.meta,this.uid=l.uid}getRef(){return{type:this.type,uid:this.uid}}}var r=(o=>(o.Logs="Logs",o.Metrics="Metrics",o.Tracing="Tracing",o))(r||{}),g=(o=>(o.Cancelled="cancelled",o.Timeout="timeout",o.Unknown="unknown",o))(g||{});class f{}f=(0,t.s)(f),s=(0,t.s)(s)},93893:()=>{"use strict"},21921:()=>{"use strict"},66926:(H,T,e)=>{"use strict";e.d(T,{R:()=>n,S:()=>t});var t=(c=>(c.Thresholds="thresholds",c.PaletteClassic="palette-classic",c.PaletteSaturated="palette-saturated",c.ContinuousGrYlRd="continuous-GrYlRd",c.Fixed="fixed",c))(t||{});const n="gray"},68061:(H,T,e)=>{"use strict";e.d(T,{Y4:()=>t,qb:()=>c,v3:()=>n});function t(s){return r=>r.__systemRef===s}const n=s=>typeof s?.__systemRef=="string";var c=(s=>(s.Unit="unit",s.Min="min",s.Max="max",s.Decimals="decimals",s.DisplayName="displayName",s.NoValue="noValue",s.Thresholds="thresholds",s.Mappings="mappings",s.Links="links",s.Color="color",s))(c||{})},88723:()=>{"use strict"},45072:()=>{"use strict"},9785:()=>{"use strict"},43565:(H,T,e)=>{"use strict";e.d(T,{Mo:()=>n,_S:()=>t,iJ:()=>c});const t={google:!0,microsoft:!0,github:!0,gitlab:!0,okta:!0,anchor:!0,"adjust-circle":!0,"angle-double-down":!0,"angle-double-right":!0,"angle-double-up":!0,"angle-down":!0,"angle-left":!0,"angle-right":!0,"angle-up":!0,apps:!0,arrow:!0,"arrow-down":!0,"arrow-from-right":!0,"arrow-left":!0,"arrow-random":!0,"arrow-right":!0,"arrow-to-right":!0,"arrow-up":!0,"arrows-h":!0,"arrows-v":!0,backward:!0,bars:!0,bell:!0,"bell-slash":!0,bolt:!0,book:!0,bookmark:!0,"book-open":!0,"brackets-curly":!0,bug:!0,building:!0,"calculator-alt":!0,"calendar-alt":!0,camera:!0,capture:!0,"channel-add":!0,"chart-line":!0,check:!0,"check-circle":!0,"check-square":!0,circle:!0,"circle-mono":!0,"clipboard-alt":!0,"clock-nine":!0,cloud:!0,"cloud-download":!0,"cloud-upload":!0,"code-branch":!0,cog:!0,columns:!0,"comment-alt":!0,"comment-alt-message":!0,"comment-alt-share":!0,"comments-alt":!0,compass:!0,copy:!0,"create-dashboard":!0,"credit-card":!0,crosshair:!0,cube:!0,dashboard:!0,database:!0,"dice-three":!0,"document-info":!0,"download-alt":!0,draggabledots:!0,edit:!0,"ellipsis-v":!0,envelope:!0,"exchange-alt":!0,"exclamation-triangle":!0,"exclamation-circle":!0,"external-link-alt":!0,eye:!0,"eye-slash":!0,"ellipsis-h":!0,"fa fa-spinner":!0,favorite:!0,"file-alt":!0,"file-blank":!0,"file-copy-alt":!0,"file-download":!0,filter:!0,flip:!0,folder:!0,font:!0,fire:!0,"folder-open":!0,"folder-plus":!0,"folder-upload":!0,forward:!0,"gf-bar-alignment-after":!0,"gf-bar-alignment-before":!0,"gf-bar-alignment-center":!0,"gf-glue":!0,"gf-grid":!0,"gf-interpolation-linear":!0,"gf-interpolation-smooth":!0,"gf-interpolation-step-after":!0,"gf-interpolation-step-before":!0,"gf-landscape":!0,"gf-layout-simple":!0,"gf-logs":!0,"gf-movepane-left":!0,"gf-movepane-right":!0,"gf-portrait":!0,"gf-service-account":!0,"gf-show-context":!0,grafana:!0,"graph-bar":!0,"grafana-ml":!0,heart:!0,"heart-rate":!0,"heart-break":!0,history:!0,"history-alt":!0,home:!0,"home-alt":!0,"horizontal-align-center":!0,"horizontal-align-left":!0,"horizontal-align-right":!0,hourglass:!0,import:!0,info:!0,"info-circle":!0,k6:!0,"key-skeleton-alt":!0,keyboard:!0,"layer-group":!0,"library-panel":!0,"line-alt":!0,link:!0,"list-ui-alt":!0,"list-ul":!0,lock:!0,"map-marker":!0,message:!0,minus:!0,"minus-circle":!0,"mobile-android":!0,monitor:!0,palette:!0,"panel-add":!0,"pathfinder-unite":!0,pause:!0,pen:!0,percentage:!0,play:!0,plug:!0,plus:!0,"plus-circle":!0,"plus-square":!0,power:!0,"presentation-play":!0,process:!0,"question-circle":!0,"record-audio":!0,repeat:!0,rocket:!0,"ruler-combined":!0,save:!0,search:!0,"search-minus":!0,"search-plus":!0,"share-alt":!0,shield:!0,"shield-exclamation":!0,signal:!0,signin:!0,signout:!0,sitemap:!0,slack:!0,"sliders-v-alt":!0,"sort-amount-down":!0,"sort-amount-up":!0,"square-shape":!0,star:!0,"step-backward":!0,"stopwatch-slash":!0,sync:!0,table:!0,"tag-alt":!0,"telegram-alt":!0,"text-fields":!0,"thumbs-up":!0,times:!0,"times-circle":!0,"toggle-on":!0,"toggle-off":!0,"trash-alt":!0,unlock:!0,upload:!0,user:!0,"users-alt":!0,"user-arrows":!0,"vertical-align-bottom":!0,"vertical-align-center":!0,"vertical-align-top":!0,"wrap-text":!0,rss:!0,x:!0};function n(s){return!s||typeof s!="string"?!1:s in t}function c(s){if(n(s))return s}},19108:(H,T,e)=>{"use strict";e.r(T),e.d(T,{AbstractLabelOperator:()=>f.K2,AlertState:()=>re.Z,AnnotationEventFieldSource:()=>o.L,AppEvents:()=>Z.SI,AppPlugin:()=>L.k8,CoreApp:()=>L.zj,CustomVariableSupport:()=>J.Mg,DEFAULT_SAML_NAME:()=>t.bm,DashboardCursorSync:()=>g.m,DataFrameType:()=>s.P,DataQueryErrorType:()=>B.eA,DataSourceApi:()=>B.MF,DataSourcePlugin:()=>B.hf,DataSourceVariableSupport:()=>J.gv,DataTopic:()=>f.w5,DefaultTimeZone:()=>h.Ys,ExploreMode:()=>B.Ru,FALLBACK_COLOR:()=>U.R,FeatureState:()=>L.CQ,FieldColorModeId:()=>U.S,FieldConfigProperty:()=>M.qb,FieldType:()=>c.fS,GAUGE_DEFAULT_MAXIMUM:()=>t.Z3,GAUGE_DEFAULT_MINIMUM:()=>t.Hx,GrafanaPlugin:()=>R.Sg,GrafanaThemeType:()=>I.Q,LanguageProvider:()=>B.iL,LegacyGraphHoverClearEvent:()=>Z.oi,LegacyGraphHoverEvent:()=>Z.IA,LiveChannelConnectionState:()=>ae.yS,LiveChannelEventType:()=>ae.FU,LiveChannelScope:()=>ae.z,LiveChannelType:()=>ae.SK,LoadingState:()=>n.Gu,LogLevel:()=>l.in,LogsDedupDescription:()=>l.Uv,LogsDedupStrategy:()=>l.Y4,LogsMetaKind:()=>l.Ku,LogsSortOrder:()=>l.UV,MappingType:()=>v.H,NavMenuItemType:()=>m.VO,NavSection:()=>m.yV,NullValueMode:()=>n.Gl,OrgRole:()=>N.B,PageLayoutType:()=>m.Qz,PanelEvents:()=>Z.Kh,PluginErrorCode:()=>R.w2,PluginIncludeType:()=>R.$_,PluginSignatureStatus:()=>R.Xy,PluginSignatureType:()=>R._Z,PluginState:()=>R.BV,PluginType:()=>R.zV,SpecialValue:()=>S.U,SpecialValueMatch:()=>v.e,StandardVariableSupport:()=>J.v6,SupplementaryQueryType:()=>l.v8,TIME_FORMAT:()=>h.T_,TIME_SERIES_METRIC_FIELD_NAME:()=>c.rN,TIME_SERIES_TIME_FIELD_NAME:()=>c.Ls,TIME_SERIES_VALUE_FIELD_NAME:()=>c.M5,ThresholdsMode:()=>y.H,VariableHide:()=>A.bU,VariableOrigin:()=>r.L,VariableRefresh:()=>A.Bd,VariableSort:()=>A.$U,VariableSuggestionsScope:()=>r.o,VariableSupportBase:()=>J.Tq,VariableSupportType:()=>J.j2,VisualizationSuggestionScore:()=>w._,VisualizationSuggestionsBuilder:()=>w.mi,VisualizationSuggestionsListAppender:()=>w.sf,VizOrientation:()=>w.wm,availableIconsIndex:()=>G._S,getDefaultRelativeTimeRange:()=>h.Rr,getDefaultTimeRange:()=>h.JK,hasLogsContextSupport:()=>l.Q4,hasLogsContextUiSupport:()=>l.xW,hasLogsVolumeSupport:()=>a.O,hasQueryExportSupport:()=>f.p,hasQueryImportSupport:()=>f.CZ,hasSupplementaryQuerySupport:()=>l.mN,isIconName:()=>G.Mo,isLiveChannelJoinEvent:()=>ae.mx,isLiveChannelLeaveEvent:()=>ae.gH,isLiveChannelMessageEvent:()=>ae.RL,isLiveChannelStatusEvent:()=>ae.se,isSystemOverride:()=>M.v3,isSystemOverrideWithRef:()=>M.Y4,isTruthy:()=>n.fQ,isUnsignedPluginSignature:()=>me.x,isValidLiveChannelAddress:()=>ae.nU,parseLiveChannelAddress:()=>ae.H7,preferredVisualizationTypes:()=>n.dC,toIconName:()=>G.iJ,toLiveChannelId:()=>ae.Aj});var t=e(66847),n=e(49922),c=e(14582),s=e(88432),r=e(28151),g=e(29431),f=e(62163),o=e(20442),l=e(90595),a=e(16642),m=e(24844),d=e(45671),p=e.n(d),Q={};for(const q in d)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType"].indexOf(q)<0&&(Q[q]=()=>d[q]);e.d(T,Q);var h=e(69311),y=e(24177),v=e(26031),i=e(93893),u=e.n(i),Q={};for(const q in i)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(q)<0&&(Q[q]=()=>i[q]);e.d(T,Q);var P=e(9785),E=e.n(P),Q={};for(const q in P)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(q)<0&&(Q[q]=()=>P[q]);e.d(T,Q);var C=e(17179),b=e.n(C),Q={};for(const q in C)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(q)<0&&(Q[q]=()=>C[q]);e.d(T,Q);var S=e(16217),M=e(68061),x=e(72901),O=e.n(x),Q={};for(const q in x)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef"].indexOf(q)<0&&(Q[q]=()=>x[q]);e.d(T,Q);var L=e(40400),B=e(7238),w=e(20251),R=e(24699),A=e(22107),U=e(66926),I=e(55422),N=e(74020),F=e(88723),D=e.n(F),Q={};for(const q in F)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(q)<0&&(Q[q]=()=>F[q]);e.d(T,Q);var Y=e(68368),j=e.n(Y),Q={};for(const q in Y)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(q)<0&&(Q[q]=()=>Y[q]);e.d(T,Q);var K=e(21921),z=e.n(K),Q={};for(const q in K)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(q)<0&&(Q[q]=()=>K[q]);e.d(T,Q);var Z=e(25318),ae=e(62626),J=e(59670),oe=e(45072),Ee=e.n(oe),Q={};for(const q in oe)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType"].indexOf(q)<0&&(Q[q]=()=>oe[q]);e.d(T,Q);var me=e(81850),re=e(23309),le=e(33559),pe=e.n(le),Q={};for(const q in le)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(q)<0&&(Q[q]=()=>le[q]);e.d(T,Q);var ee=e(14633),se=e.n(ee),Q={};for(const q in ee)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(q)<0&&(Q[q]=()=>ee[q]);e.d(T,Q);var G=e(43565)},1762:(H,T,e)=>{"use strict";e.d(T,{l:()=>t});var t=(n=>(n.Grid="grid",n.List="list",n))(t||{})},25318:(H,T,e)=>{"use strict";e.d(T,{IA:()=>r,Kh:()=>s,SI:()=>c,oi:()=>g});var t=e(39253),n=e(62316);const c={alertSuccess:(0,t.X)("alert-success"),alertWarning:(0,t.X)("alert-warning"),alertError:(0,t.X)("alert-error")},s={refresh:(0,t.X)("refresh"),componentDidMount:(0,t.X)("component-did-mount"),dataReceived:(0,t.X)("data-received"),dataError:(0,t.X)("data-error"),dataFramesReceived:(0,t.X)("data-frames-received"),dataSnapshotLoad:(0,t.X)("data-snapshot-load"),editModeInitialized:(0,t.X)("init-edit-mode"),initPanelActions:(0,t.X)("init-panel-actions"),initialized:(0,t.X)("panel-initialized"),panelTeardown:(0,t.X)("panel-teardown"),render:(0,t.X)("render")};class r extends n.R{}r.type="graph-hover";class g extends n.m{constructor(){super(...arguments),this.payload={point:{}}}}g.type="graph-hover-clear"},62626:(H,T,e)=>{"use strict";e.d(T,{Aj:()=>m,FU:()=>s,H7:()=>l,RL:()=>o,SK:()=>n,gH:()=>f,mx:()=>g,nU:()=>a,se:()=>r,yS:()=>c,z:()=>t});var t=(d=>(d.DataSource="ds",d.Plugin="plugin",d.Grafana="grafana",d.Stream="stream",d))(t||{}),n=(d=>(d.DataStream="stream",d.DataFrame="frame",d.JSON="json",d))(n||{}),c=(d=>(d.Pending="pending",d.Connected="connected",d.Connecting="connecting",d.Disconnected="disconnected",d.Shutdown="shutdown",d.Invalid="invalid",d))(c||{}),s=(d=>(d.Status="status",d.Join="join",d.Leave="leave",d.Message="message",d))(s||{});function r(d){return d.type==="status"}function g(d){return d.type==="join"}function f(d){return d.type==="leave"}function o(d){return d.type==="message"}function l(d){if(d?.length){let p=d.trim().split("/");if(p.length>=3)return{scope:p[0],namespace:p[1],path:p.slice(2).join("/")}}}function a(d){return!!(d?.path&&d.namespace&&d.scope)}function m(d){if(!d.scope)return"";let p=d.scope;return!d.namespace||(p+="/"+d.namespace,!d.path)?p:p+"/"+d.path}},90595:(H,T,e)=>{"use strict";e.d(T,{Ku:()=>n,Q4:()=>g,UV:()=>c,Uv:()=>r,Y4:()=>s,in:()=>t,mN:()=>o,v8:()=>f,xW:()=>l});var t=(a=>(a.emerg="critical",a.fatal="critical",a.alert="critical",a.crit="critical",a.critical="critical",a.warn="warning",a.warning="warning",a.err="error",a.eror="error",a.error="error",a.info="info",a.information="info",a.informational="info",a.notice="info",a.dbug="debug",a.debug="debug",a.trace="trace",a.unknown="unknown",a))(t||{}),n=(a=>(a[a.Number=0]="Number",a[a.String=1]="String",a[a.LabelsMap=2]="LabelsMap",a[a.Error=3]="Error",a))(n||{}),c=(a=>(a.Descending="Descending",a.Ascending="Ascending",a))(c||{}),s=(a=>(a.none="none",a.exact="exact",a.numbers="numbers",a.signature="signature",a))(s||{}),r=(a=>(a.none="No de-duplication",a.exact="De-duplication of successive lines that are identical, ignoring ISO datetimes.",a.numbers="De-duplication of successive lines that are identical when ignoring numbers, e.g., IP addresses, latencies.",a.signature="De-duplication of successive lines that have identical punctuation and whitespace.",a))(r||{});const g=a=>{if(!a)return!1;const m=a;return m.getLogRowContext!==void 0&&m.showContextToggle!==void 0};var f=(a=>(a.LogsVolume="LogsVolume",a.LogsSample="LogsSample",a))(f||{});const o=(a,m)=>{if(!a)return!1;const d=a;return d.getDataProvider!==void 0&&d.getSupplementaryQuery!==void 0&&d.getSupportedSupplementaryQueryTypes().includes(m)},l=a=>a?a.getLogRowContextUi!==void 0:!1},16642:(H,T,e)=>{"use strict";e.d(T,{O:()=>t});const t=n=>n.getLogsVolumeDataProvider!==void 0},24844:(H,T,e)=>{"use strict";e.d(T,{Qz:()=>c,VO:()=>n,yV:()=>t});var t=(s=>(s.Core="core",s.Plugin="plugin",s.Config="config",s))(t||{}),n=(s=>(s.Section="section",s.Item="item",s))(n||{}),c=(s=>(s[s.Standard=0]="Standard",s[s.Canvas=1]="Canvas",s[s.Custom=2]="Custom",s))(c||{})},74020:(H,T,e)=>{"use strict";e.d(T,{B:()=>t});var t=(n=>(n.Admin="Admin",n.Editor="Editor",n.Viewer="Viewer",n))(t||{})},20251:(H,T,e)=>{"use strict";e.d(T,{_:()=>r,mi:()=>g,sf:()=>f,wm:()=>s});var t=e(82897),n=e.n(t),c=e(14582),s=(o=>(o.Auto="auto",o.Vertical="vertical",o.Horizontal="horizontal",o))(s||{}),r=(o=>(o[o.Best=100]="Best",o[o.Good=70]="Good",o[o.OK=50]="OK",o))(r||{});class g{constructor(l,a){this.list=[],this.data=l,this.panel=a,this.dataSummary=this.computeDataSummary()}getListAppender(l){return new f(this.list,l)}computeDataSummary(){const l=this.data?.series||[];let a=0,m=0,d=0,p=0,h=0,y=0,v;for(const i of l){p+=i.length,i.meta?.preferredVisualisationType&&(v=i.meta.preferredVisualisationType);for(const u of i.fields)switch(y++,u.type){case c.fS.number:a+=1;break;case c.fS.time:m+=1;break;case c.fS.string:d+=1;break}i.length>h&&(h=i.length)}return{numberFieldCount:a,timeFieldCount:m,stringFieldCount:d,rowCountTotal:p,rowCountMax:h,fieldCount:y,preferredVisualisationType:v,frameCount:l.length,hasData:p>0,hasTimeField:m>0,hasNumberField:a>0,hasStringField:d>0}}getList(){return this.list}}class f{constructor(l,a){this.list=l,this.defaults=a}append(l){this.list.push((0,t.defaultsDeep)(l,this.defaults))}}},24699:(H,T,e)=>{"use strict";e.d(T,{$_:()=>g,BV:()=>t,Sg:()=>f,Xy:()=>c,_Z:()=>s,w2:()=>r,zV:()=>n});var t=(o=>(o.alpha="alpha",o.beta="beta",o.stable="stable",o.deprecated="deprecated",o))(t||{}),n=(o=>(o.panel="panel",o.datasource="datasource",o.app="app",o.renderer="renderer",o.secretsmanager="secretsmanager",o))(n||{}),c=(o=>(o.internal="internal",o.valid="valid",o.invalid="invalid",o.modified="modified",o.missing="missing",o))(c||{}),s=(o=>(o.grafana="grafana",o.commercial="commercial",o.community="community",o.private="private",o.core="core",o))(s||{}),r=(o=>(o.missingSignature="signatureMissing",o.invalidSignature="signatureInvalid",o.modifiedSignature="signatureModified",o))(r||{}),g=(o=>(o.dashboard="dashboard",o.page="page",o.panel="panel",o.datasource="datasource",o))(g||{});class f{addConfigPage(l){return this.configPages||(this.configPages=[]),this.configPages.push(l),this}setChannelSupport(l){return console.warn("[deprecation] plugin is using ignored option: setChannelSupport",this.meta),this}constructor(){this.meta={}}}},81850:(H,T,e)=>{"use strict";e.d(T,{x:()=>n});var t=e(24699);function n(c){return c&&c!==t.Xy.valid&&c!==t.Xy.internal}},62163:(H,T,e)=>{"use strict";e.d(T,{CZ:()=>c,K2:()=>n,p:()=>s,w5:()=>t});var t=(r=>(r.Annotations="annotations",r))(t||{}),n=(r=>(r.Equal="Equal",r.NotEqual="NotEqual",r.EqualRegEx="EqualRegEx",r.NotEqualRegEx="NotEqualRegEx",r))(n||{});const c=r=>r.importFromAbstractQueries!==void 0,s=r=>r.exportToAbstractQueries!==void 0},45671:()=>{"use strict"},33559:()=>{"use strict"},22107:(H,T,e)=>{"use strict";e.d(T,{$U:()=>n,Bd:()=>t,bU:()=>c});var t=(s=>(s[s.never=0]="never",s[s.onDashboardLoad=1]="onDashboardLoad",s[s.onTimeRangeChanged=2]="onTimeRangeChanged",s))(t||{}),n=(s=>(s[s.disabled=0]="disabled",s[s.alphabeticalAsc=1]="alphabeticalAsc",s[s.alphabeticalDesc=2]="alphabeticalDesc",s[s.numericalAsc=3]="numericalAsc",s[s.numericalDesc=4]="numericalDesc",s[s.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",s[s.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",s))(n||{}),c=(s=>(s[s.dontHide=0]="dontHide",s[s.hideLabel=1]="hideLabel",s[s.hideVariable=2]="hideVariable",s))(c||{})},55422:(H,T,e)=>{"use strict";e.d(T,{Q:()=>t});var t=(n=>(n.Light="light",n.Dark="dark",n))(t||{})},24177:(H,T,e)=>{"use strict";e.d(T,{H:()=>t});var t=(n=>(n.Absolute="absolute",n.Percentage="percentage",n))(t||{})},69311:(H,T,e)=>{"use strict";e.d(T,{JK:()=>r,Rr:()=>g,T_:()=>s,Ys:()=>c});var t=e(40538),n=e(46519);const c=t.iT,s="YYYY-MM-DD HH:mm:ss";function r(){const f=(0,n.CQ)();return{from:(0,n.CQ)(f).subtract(6,"hour"),to:f,raw:{from:"now-6h",to:"now"}}}function g(){return{from:600,to:0}}},68368:()=>{"use strict"},16217:(H,T,e)=>{"use strict";e.d(T,{U:()=>t});var t=(n=>(n.True="true",n.False="false",n.Null="null",n.Empty="empty",n))(t||{})},26031:(H,T,e)=>{"use strict";e.d(T,{H:()=>t,e:()=>n});var t=(c=>(c.ValueToText="value",c.RangeToText="range",c.RegexToText="regex",c.SpecialValue="special",c))(t||{}),n=(c=>(c.True="true",c.False="false",c.Null="null",c.NaN="nan",c.NullAndNaN="null+nan",c.Empty="empty",c))(n||{})},59670:(H,T,e)=>{"use strict";e.d(T,{Mg:()=>s,Tq:()=>n,gv:()=>r,j2:()=>t,v6:()=>c});var t=(g=>(g.Legacy="legacy",g.Standard="standard",g.Custom="custom",g.Datasource="datasource",g))(t||{});class n{}class c extends n{getType(){return"standard"}}class s extends n{getType(){return"custom"}}class r extends n{getType(){return"datasource"}}},72901:()=>{"use strict"},91171:(H,T,e)=>{"use strict";e.d(T,{vo:()=>r,rt:()=>o,j:()=>f});var t=e(35363),n=e(78798),c=e(64140);class s{constructor(){this.properties=[]}addCustomEditor(a){return this.properties.push(a),this}getRegistry(){return new c.B(()=>this.properties)}getItems(){return this.properties}}class r extends s{addNumberInput(a){return this.addCustomEditor({...a,id:a.path,override:t.S.get("number").editor,editor:t.S.get("number").editor,process:n.Oh,shouldApply:a.shouldApply??(()=>!0),settings:a.settings||{}})}addSliderInput(a){return this.addCustomEditor({...a,id:a.path,override:t.S.get("slider").editor,editor:t.S.get("slider").editor,process:n.Oh,shouldApply:a.shouldApply??(()=>!0),settings:a.settings||{}})}addTextInput(a){return this.addCustomEditor({...a,id:a.path,override:t.S.get("text").editor,editor:t.S.get("text").editor,process:n.op,shouldApply:a.shouldApply??(()=>!0),settings:a.settings||{}})}addSelect(a){return this.addCustomEditor({...a,id:a.path,override:t.S.get("select").editor,editor:t.S.get("select").editor,process:n.AE,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{options:[]}})}addRadio(a){return this.addCustomEditor({...a,id:a.path,override:t.S.get("radio").editor,editor:t.S.get("radio").editor,process:n.AE,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{options:[]}})}addBooleanSwitch(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("boolean").editor,override:t.S.get("boolean").editor,process:n.W4,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{}})}addColorPicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("color").editor,override:t.S.get("color").editor,process:n.kG,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{}})}addUnitPicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("unit").editor,override:t.S.get("unit").editor,process:n.VB,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{}})}addFieldNamePicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("field-name").editor,override:t.S.get("field-name").editor,process:n.kG,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{}})}}class g{constructor(a){this.cfg=a,this.path="",this.id="nested-panel-options",this.name="nested",this.editor=()=>null,this.getBuilder=()=>this.cfg.build,this.getNestedValueAccess=m=>{const d=this.cfg.values;return d?d(m):{getValue:p=>m.getValue(`${this.path}.${p}`),onChange:(p,h)=>m.onChange(`${this.path}.${p}`,h)}},this.path=a.path,this.category=a.category,this.defaultValue=a.defaultValue}}function f(l){return l.id==="nested-panel-options"}class o extends s{addNestedOptions(a){const m=new g(a);return this.addCustomEditor(m)}addNumberInput(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("number").editor})}addSliderInput(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("slider").editor})}addTextInput(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("text").editor})}addStringArray(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("strings").editor})}addSelect(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("select").editor})}addMultiSelect(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("multi-select").editor})}addRadio(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("radio").editor})}addBooleanSwitch(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("boolean").editor})}addColorPicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("color").editor,settings:a.settings||{}})}addTimeZonePicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("timezone").editor,settings:a.settings||{}})}addUnitPicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("unit").editor})}addFieldNamePicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("field-name").editor})}addDashboardPicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("dashboard-uid").editor})}}},63279:(H,T,e)=>{"use strict";e.d(T,{I:()=>c});var t=e(82897),n=e.n(t);function c(s){return typeof s=="number"?s:s===""||s===null||s===void 0||Array.isArray(s)?NaN:typeof s=="boolean"?s?1:0:(0,t.toNumber)(s)}},76553:(H,T,e)=>{"use strict";e.r(T),e.d(T,{moveItemImmutably:()=>n,sortValues:()=>r});var t=e(40538);function n(g,f,o){const l=[...g];return Array.prototype.splice.call(l,o,0,Array.prototype.splice.call(l,f,1)[0]),l}const c=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),s=(g,f)=>g-f;function r(g){return(f,o)=>{if(f===o)return 0;if(o==null||typeof o=="string"&&o.trim()==="")return-1;if(f==null||typeof f=="string"&&f?.trim()==="")return 1;let l=c.compare;return typeof f=="number"&&typeof o=="number"&&(l=s),g===t.As.Descending?l(o,f):l(f,o)}}},98082:(H,T,e)=>{"use strict";e.d(T,{L:()=>n,n:()=>c});var t=e(64140),n=(s=>(s.Add="+",s.Subtract="-",s.Divide="/",s.Multiply="*",s))(n||{});const c=new t.B(()=>[{id:"+",name:"Add",operation:(s,r)=>s+r},{id:"-",name:"Subtract",operation:(s,r)=>s-r},{id:"*",name:"Multiply",operation:(s,r)=>s*r},{id:"/",name:"Divide",operation:(s,r)=>s/r}])},89230:(H,T,e)=>{"use strict";e.d(T,{MJ:()=>u,QM:()=>p,uP:()=>m,x5:()=>a});var t=e(82897),n=e.n(t),c=e(26389),s=e.n(c),r=e(38685),g=e(16911),f=e(89890),o=e(14582),l=e(20112),a=(P=>(P[P.full=0]="full",P[P.name=1]="name",P[P.none=2]="none",P))(a||{});function m(P,E){return new p(E).readCSV(P)}var d=(P=>(P[P.Starting=0]="Starting",P[P.InHeader=1]="InHeader",P[P.ReadingRows=2]="ReadingRows",P))(d||{});class p{constructor(E){this.chunk=(C,b)=>{for(let S=0;S<C.data.length;S++){const M=C.data[S];if(M.length<1)continue;const x=M[0];if(x){if(x.startsWith("#")){const O=x.indexOf("#",2);if(O>0){const L=x.slice(1,O),B=L==="name";if(B||{unit:"#"}.hasOwnProperty(L)){this.state===2&&(this.current=new r.v({fields:[]}),this.data.push(this.current));const R=x.slice(O+1);if(B){this.current.addFieldFor(void 0,R);for(let A=1;A<M.length;A++)this.current.addFieldFor(void 0,M[A])}else{const{fields:A}=this.current;for(let U=0;U<A.length;U++){A[U].config||(A[U].config={});const I=A[U].config;I[L]=U===0?R:M[U]}}this.state=1;continue}}else if(this.state===0){this.state=1;continue}continue}if(this.state===0){if((0,g.LI)(x)===o.fS.string){for(const L of M)this.current.addFieldFor(void 0,L);this.state=1;continue}this.state=1}}if(this.state,this.state=2,M.length>this.current.fields.length){const{fields:O}=this.current;for(let L=O.length;L<M.length;L++)this.current.addFieldFor(M[L]);this.callback&&this.callback.onHeader(this.current.fields)}this.current.appendRow(M),this.callback&&this.callback.onRow(M)}},E||(E={}),this.config=E.config||{},this.callback=E.callback,this.current=new r.v({fields:[]}),this.state=0,this.data=[]}readCSV(E){this.current=new r.v({fields:[]}),this.data=[this.current];const C={...this.config,dynamicTyping:!1,skipEmptyLines:!0,comments:!1,chunk:this.chunk};return s().parse(E,C),this.data}}function h(P,E){const C=P.toString();return C.includes('"')?E.quoteChar+C.replace(/"/gi,'""')+E.quoteChar:C.includes(`
`)||C.includes(E.delimiter)?E.quoteChar+C+E.quoteChar:C}function y(P,E){return P.display?C=>{const b=P.display(C);return h((0,l.zc)(b),E)}:C=>h(C,E)}function v(P,E,C){const b=P==="name",S=P==="type";for(const M of E){const x=M.config;if(b||S||x&&x.hasOwnProperty(P)){let O="#"+P+"#";for(let L=0;L<E.length;L++){L>0&&(O=O+C.delimiter);let B=E[L].name;S?B=E[L].type:b||(B=E[L].config[P]),B&&(O=O+h(B,C))}return O+C.newline}}return""}function i(){const P=["x","y"];return P.toLocaleString?P.toLocaleString().charAt(1):","}function u(P,E){if(!P)return"";E=(0,t.defaults)(E,{delimiter:i(),newline:`\r
`,quoteChar:'"',encoding:"",headerStyle:1,useExcelHeader:!1});let C=E.useExcelHeader?`sep=${E.delimiter}${E.newline}`:"";for(const b of P){const{fields:S}=b;if(S.length===0)continue;if(E.headerStyle===0)C=C+v("name",S,E)+v("type",S,E)+v("unit",S,E)+v("dateFormat",S,E);else if(E.headerStyle===1){for(let x=0;x<S.length;x++)x>0&&(C+=E.delimiter),C+=`"${(0,f.C)(S[x],b).replace(/"/g,'""')}"`;C+=E.newline}const M=S[0].values.length;if(M>0){const x=S.map(O=>y(O,E));for(let O=0;O<M;O++){for(let L=0;L<S.length;L++){L>0&&(C=C+E.delimiter);const B=S[L].values.get(O);B!==null&&(C=C+x[L](B))}C=C+E.newline}}C=C+E.newline}return C}},89029:(H,T,e)=>{"use strict";e.d(T,{W:()=>c,_:()=>s});var t=e(83383),n=e(27677);const c={keepTime:"__url_time_range",timeRangeFrom:"__from",timeRangeTo:"__to",includeVars:"__all_variables",seriesName:"__series.name",fieldName:"__field.name",valueTime:"__value.time",valueNumeric:"__value.numeric",valueText:"__value.text",valueRaw:"__value.raw",valueCalc:"__value.calc"};function s(o){const{onClickFn:l,replaceVariables:a,link:m,scopedVars:d,range:p,field:h,internalLink:y}=o,v=g(m.internal?.query,d,a),i=g(m.internal?.panelsState,d,a),u=m.title?m.title:y.datasourceName;return{title:a(u,d),href:r(y.datasourceUid,v,p,i),onClick:l?()=>{l({datasourceUid:y.datasourceUid,query:v,panelsState:i,range:p})}:void 0,target:m?.targetBlank?"_blank":"_self",origin:h}}function r(o,l,a,m){return t.u.assureBaseUrl(`/explore?left=${encodeURIComponent((0,n.S)({range:a.raw,datasource:o,queries:[l],panelsState:m}))}`)}function g(o,l,a){if(!o)return o;if(typeof o=="string")return a(o,l);const m=JSON.parse(JSON.stringify(o));return f(m,l,a)}function f(o,l,a){for(const m of Object.keys(o))typeof o[m]=="string"?o[m]=a(o[m],l):typeof o[m]=="object"&&o[m]!==null&&(o[m]=f(o[m],l,a));return o}},5916:(H,T,e)=>{"use strict";e.d(T,{BT:()=>r,HD:()=>d,Mf:()=>v,TX:()=>m,_R:()=>f,cv:()=>s,fd:()=>p,fi:()=>o,hz:()=>a,iU:()=>c,nx:()=>l,tp:()=>h,uw:()=>y,z_:()=>g});var t=e(82897),n=e.n(t);function c(i){return{uid:i.uid,type:i.type}}function s(i){return typeof i=="object"&&typeof i?.uid=="string"}function r(i){if(s(i))return i.uid;if((0,t.isString)(i))return i}const g=(i,u)=>P=>{p(i,u,P.currentTarget.value)},f=(i,u)=>P=>{h(i,u,P.currentTarget.value)},o=(i,u)=>P=>{y(i,u,P.currentTarget.value)},l=(i,u)=>P=>{h(i,u,P.value)},a=(i,u)=>P=>{h(i,u,P.currentTarget.checked)},m=(i,u)=>P=>{y(i,u,P.value)},d=(i,u)=>P=>{v(i,u)};function p(i,u,P){const E=i.options;i.onOptionsChange({...E,[u]:P})}const h=(i,u,P)=>{const E=i.options;i.onOptionsChange({...E,jsonData:{...E.jsonData,[u]:P}})},y=(i,u,P)=>{const E=i.options;i.onOptionsChange({...E,secureJsonData:{...E.secureJsonData?E.secureJsonData:{},[u]:P}})},v=(i,u)=>{const P=i.options;i.onOptionsChange({...P,secureJsonData:{...P.secureJsonData?P.secureJsonData:{},[u]:""},secureJsonFields:{...P.secureJsonFields,[u]:!1}})}},99227:(H,T,e)=>{"use strict";e.d(T,{d:()=>n});const t={},n=(c,s,r)=>{let g=`[Deprecation warning] ${c}: ${s} is deprecated`;r&&(g+=`. Use ${r} instead`);const f=Date.now(),o=t[g];(!o||f-o>1e4)&&(console.warn(g),t[g]=f)}},80548:(H,T,e)=>{"use strict";e.d(T,{x:()=>t});var t=(n=>(n[n.Transformations=0]="Transformations",n[n.FieldConfig=1]="FieldConfig",n[n.FieldConfigOverrides=2]="FieldConfigOverrides",n))(t||{})},72788:(H,T,e)=>{"use strict";e.d(T,{H:()=>c,k:()=>n});var t=e(49922);function n({xField:s,yField:r,nullValueMode:g}){const f=s.values,o=r.values,l=f.length;if(o.length!==l)throw new Error("Unexpected field length");const a=g===t.Gl.Ignore,m=g===t.Gl.AsZero,d=[];for(let p=0;p<l;p++){const h=f.get(p);let y=o.get(p);if(y===null){if(a)continue;m&&(y=0)}h!==null&&d.push([h,y])}return d}function c(s,r){if(!r.from||!r.to||!s||s.length===0)return[];const g=r.from.valueOf(),f=r.to.valueOf(),o=s[0][1];return[[g,o],[f,o]]}},75463:(H,T,e)=>{"use strict";e.d(T,{LH:()=>d.L,x5:()=>r.x5,QM:()=>r.QM,WC:()=>P.W,xV:()=>E.x,vo:()=>y.vo,HU:()=>M.HU,bA:()=>g.bA,zG:()=>p.z,rt:()=>y.rt,Bz:()=>n.B,Ar:()=>g.Ar,IX:()=>b.I,sq:()=>t,nk:()=>d.n,zd:()=>g.zd,lL:()=>g.lL,i6:()=>g.i6,Mi:()=>g.Mi,ZC:()=>a,Jb:()=>M.Jb,d9:()=>s.d,l3:()=>g.l3,FT:()=>f.FT,IU:()=>f.IU,aA:()=>f.aA,iU:()=>c.iU,BT:()=>c.BT,k8:()=>v.k,HE:()=>v.H,ZO:()=>g.ZO,jx:()=>g.jx,MT:()=>g.MT,e4:()=>m.e,dP:()=>o.d,fp:()=>m.f,cv:()=>c.cv,uT:()=>i.u,s2:()=>C.s,_N:()=>P._,VS:()=>f.VS,Hh:()=>l,_R:()=>c._R,hz:()=>c.hz,nx:()=>c.nx,z_:()=>c.z_,HD:()=>c.HD,fi:()=>c.fi,TX:()=>c.TX,J8:()=>f.J8,uP:()=>r.uP,O9:()=>o.O,S:()=>u.S,DA:()=>g.DA,$8:()=>g.$8,$u:()=>g.$u,j0:()=>g.j0,MJ:()=>r.MJ,Er:()=>h.E,tp:()=>c.tp,fd:()=>c.fd,Mf:()=>c.Mf,uw:()=>c.uw,Cj:()=>u.Cj,xc:()=>S.x});var t=e(76553),n=e(64140),c=e(5916),s=e(99227),r=e(89230),g=e(35864),f=e(15355),o=e(43211);const l=x=>Object.keys(x).reduce((O,L)=>(x[L]!==void 0&&(O[L]=x[L]),O),{}),a=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];var m=e(7370),d=e(98082),p=e(5367),h=e(63134),y=e(91171),v=e(72788),i=e(83383),u=e(27677),P=e(89029),E=e(80548),C=e(77345),b=e(63279),S=e(83849),M=e(67008)},15355:(H,T,e)=>{"use strict";e.d(T,{FT:()=>c,IU:()=>s,J8:()=>n,VS:()=>r,aA:()=>g});const t=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function n(f){const o={};return f.replace(t,(l,a,m,d)=>(o[a]=d,"")),o}function c(f){return f.reduce((o,l)=>{if(!l)throw new Error("Need parsed labels to find common labels.");return o?(Object.keys(l).forEach(a=>{(o[a]===void 0||o[a]!==l[a])&&delete o[a]}),Object.keys(o).forEach(a=>{l[a]===void 0&&delete o[a]})):o={...l},o},void 0)}function s(f,o){const l={...f};return Object.keys(o).forEach(a=>{delete l[a]}),l}function r(f,o){if(!f)return!0;for(const[l,a]of Object.entries(f))if(!o||o[l]!==a)return!1;return!0}function g(f,o="",l){if(!f||Object.keys(f).length===0)return o;const m=Object.keys(f).sort().map(d=>`${d}="${f[d]}"`).join(", ");return l?m:["{",m,"}"].join("")}},83383:(H,T,e)=>{"use strict";e.d(T,{u:()=>m});var t=e(8928),n=e(27677);let c={appSubUrl:""},s,r;const g=d=>{try{return new URL(d)}catch{return}},f=d=>{const p=g(d);if(p&&p.origin!==window.location.origin)return d;const h=c.appSubUrl??"",y=h.endsWith("/")?1:0,v=d.startsWith("http");let i=h;return(!d.startsWith("/")||v)&&(i=`${window.location.origin}${h}`),d.length>0&&d.indexOf(i)===0?d.slice(i.length-y):d},o=d=>d.startsWith("/")?`${c.appSubUrl}${f(d)}`:d,m={initialize:d=>{c=d.config,s=d.getTimeRangeForUrl,r=d.getVariablesUrlParams},stripBaseFromUrl:f,assureBaseUrl:o,updateSearchParams:(d,p)=>{const h=new URLSearchParams(p);try{const y=new URL(d);return h.forEach((v,i)=>y.searchParams.set(i,v)),y.href}catch{const y=new URLSearchParams(d);return h.forEach((v,i)=>{y.set(i,v)}),"?"+y.toString()}},getTimeRangeUrlParams:()=>s?n.Cj.toUrlParams(s()):null,getVariablesUrlParams:d=>{if(!r)return null;const p=r(d);return n.Cj.toUrlParams(p)},getUrlForPartial:(d,p)=>{const h=n.Cj.parseKeyValue(d.search.startsWith("?")?d.search.substring(1):d.search);for(const y of Object.keys(p))p[y]===null||p[y]===void 0?delete h[y]:h[y]=p[y];return o(n.Cj.renderUrl(d.pathname,h))},processUrl:d=>c.disableSanitizeHtml?d:t.QX.sanitizeUrl(d)}},35864:(H,T,e)=>{"use strict";e.d(T,{$8:()=>i,$u:()=>P,Ar:()=>l,DA:()=>v,MT:()=>y,Mi:()=>E,ZO:()=>f,bA:()=>a,i6:()=>p,j0:()=>u,jx:()=>o,l3:()=>C,lL:()=>d,zd:()=>m});var t=e(82897),n=e.n(t),c=e(14582),s=e(90595),r=e(19695);const g=/(?:^|\s)([\w\(\)\[\]\{\}]+)=(""|(?:".*?[^\\]"|[^"\s]\S*))/;function f(b){if(!b)return s.in.unknown;let S=s.in.unknown,M;for(const x of Object.keys(s.in)){const L=new RegExp(`\\b${x}\\b`,"i").exec(b);L&&(M===void 0||L.index<M)&&(S=s.in[x],M=L.index)}return S}function o(b){const S=s.in[b.toString().toLowerCase()];return S||s.in.unknown}function l(b,S){const M=new r.G,x=b.fields[S];for(let O=0;O<x.values.length;O++){const L=x.values.get(S);M.buffer.push(f(L))}return{...b,fields:[...b.fields,{name:"LogLevel",type:c.fS.string,values:M,config:{}}]}}const a={JSON:{buildMatcher:b=>new RegExp(`(?:{|,)\\s*"${b}"\\s*:\\s*"?([\\d\\.]+|[^"]*)"?`),getFields:b=>{try{const S=JSON.parse(b);return Object.keys(S).map(M=>`"${M}":${JSON.stringify(S[M])}`)}catch{}return[]},getLabelFromField:b=>(b.match(/^"([^"]+)"\s*:/)||[])[1],getValueFromField:b=>(b.match(/:\s*(.*)$/)||[])[1],test:b=>{let S;try{S=JSON.parse(b)}catch{}return typeof S=="object"}},logfmt:{buildMatcher:b=>new RegExp(`(?:^|\\s)${(0,t.escapeRegExp)(b)}=("[^"]*"|\\S+)`),getFields:b=>{const S=[];return b.replace(new RegExp(g,"g"),M=>(S.push(M.trim()),"")),S},getLabelFromField:b=>(b.match(g)||[])[1],getValueFromField:b=>(b.match(g)||[])[2],test:b=>g.test(b)}};function m(b,S){const M=b.filter(L=>S.test(L.entry)),x=M.length,O=(0,t.countBy)(M,L=>{const w=L.entry.match(S);return w?w[1]:null});return h(O,x)}function d(b,S){const M=b.filter(L=>L.labels[S]!==void 0),x=M.length,O=(0,t.countBy)(M,L=>L.labels[S]);return h(O,x)}function p(b){const S=b.filter(x=>x!=null),M=(0,t.countBy)(S);return h(M,S.length)}const h=(b,S)=>(0,t.chain)(b).map((M,x)=>({count:M,value:x,proportion:M/S})).sortBy("count").reverse().value();function y(b){let S;try{a.JSON.test(b)&&(S=a.JSON)}catch{}return!S&&a.logfmt.test(b)&&(S=a.logfmt),S}const v=(b,S)=>b.timeEpochMs<S.timeEpochMs?-1:b.timeEpochMs>S.timeEpochMs?1:b.timeEpochNs<S.timeEpochNs?-1:b.timeEpochNs>S.timeEpochNs?1:0,i=(b,S)=>b.timeEpochMs>S.timeEpochMs?-1:b.timeEpochMs<S.timeEpochMs?1:b.timeEpochNs>S.timeEpochNs?-1:b.timeEpochNs<S.timeEpochNs?1:0,u=(b,S)=>{const M=b?P(b.rows,S):[];return b?{...b,rows:M}:{hasUniqueLabels:!1,rows:M}},P=(b,S)=>S===s.UV.Ascending?b.sort(v):b.sort(i),E=b=>b.labels.__error__?{hasError:!0,errorMessage:b.labels.__error__}:{hasError:!1},C=b=>b.replace(/\\r\\n|\\n|\\t|\\r/g,S=>S.slice(1)==="t"?"	":`
`)},77345:(H,T,e)=>{"use strict";e.d(T,{s:()=>t});function t(n){return new Proxy(n,{apply(c,s,r){return(typeof Reflect>"u"||!Reflect.construct)&&alert("Browser is too old"),Reflect.construct(c,r,s.constructor)}})}},5367:(H,T,e)=>{"use strict";e.d(T,{z:()=>t});var t=(n=>(n.id="id",n.title="title",n.subTitle="subtitle",n.mainStat="mainstat",n.secondaryStat="secondarystat",n.source="source",n.target="target",n.detail="detail__",n.arc="arc__",n.color="color",n))(t||{})},43211:(H,T,e)=>{"use strict";e.d(T,{O:()=>t,d:()=>n});function t(c,s=0){if(Number.isInteger(c))return c;let r=10**s,g=c*r*(1+Number.EPSILON);return Math.round(g)/r}function n(c){return((""+c).split(".")[1]||"").length}},63134:(H,T,e)=>{"use strict";e.d(T,{E:()=>t});const t=n=>({label:n,value:n})},7370:(H,T,e)=>{"use strict";e.d(T,{e:()=>t,f:()=>n});const t=c=>{let s,r,g=Number.MAX_VALUE;for(let f=0;f<c.values.length;f++){const o=c.values.get(f);if(s!==void 0){const l=o-s;r===void 0&&(g=l),l<g&&(g=l)}s=o}return g},n=c=>{for(let s=0;s<c.values.length;s++){const r=c.values.get(s);if(r!=null){const g=r.toString();if(g.length===13&&g%1e3!==0)return!0}}return!1}},27677:(H,T,e)=>{"use strict";e.d(T,{Cj:()=>o,S:()=>l});/**
 * @preserve jquery-param (c) 2015 KNOWLEDGECODE | MIT
 */function t(a,m){return m&&Object.keys(m).length>0&&(a+="?"+c(m)),a}function n(a,m){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,m?"%20":"+").replace(/[!'()*]/g,function(d){return"%"+d.charCodeAt(0).toString(16).toUpperCase()})}function c(a){const m=[],d=/\[\]$/,p=v=>Object.prototype.toString.call(v)==="[object Array]",h=(v,i)=>{if(i=typeof i=="function"?i():i===null||i===void 0?"":i,typeof i!="boolean")m[m.length]=n(v,!0)+"="+n(i,!0);else{const u=i?"":"="+n("false",!0);m[m.length]=n(v,!0)+u}},y=(v,i)=>{let u,P,E;if(v)if(p(i))for(u=0,P=i.length;u<P;u++)d.test(v)?h(v,i[u]):y(v,i[u]);else if(i&&String(i)==="[object Object]")for(E in i)y(v+"["+E+"]",i[E]);else h(v,i);else if(p(i))for(u=0,P=i.length;u<P;u++)h(i[u].name,i[u].value);else for(E in i)y(E,i[E]);return m};return y("",a).join("&")}function s(a,m){if(m!=null&&m!==""){const d=a.indexOf("?");d!==-1?a.length-d>1&&(a+="&"):a+="?",a+=m}return a}function r(){const m=window.location.search.substring(1).split("&"),d={};for(const p of m){const h=p.split("=");if(h.length>1){const y=decodeURIComponent(h[0]),v=decodeURIComponent(h[1]);y in d?d[y]=[...d[y],v]:d[y]=[v]}else if(h.length===1){const y=decodeURIComponent(h[0]);d[y]=!0}}return d}function g(a){const m={},d=(a||"").split("&");for(let p of d){let h,y,v;if(p&&(y=p=p.replace(/\+/g,"%20"),h=p.indexOf("="),h!==-1&&(y=p.substring(0,h),v=p.substring(h+1)),y=f(y),y!==void 0)){v=v!==void 0?f(v):!0;let i;typeof v=="string"&&v!==""?i=v==="true"||v==="false"?v==="true":v:i=v,m.hasOwnProperty(y)?Array.isArray(m[y])?m[y].push(v):m[y]=[m[y],isNaN(i)?v:i]:m[y]=isNaN(i)?v:i}}return m}function f(a){try{return decodeURIComponent(a)}catch{return}}const o={renderUrl:t,toUrlParams:c,appendQueryToUrl:s,getUrlSearchParams:r,parseKeyValue:g};function l(a,m){return m!==void 0&&console.warn("`compact` parameter is deprecated and will be removed in a future release"),JSON.stringify(a)}},67008:(H,T,e)=>{"use strict";e.d(T,{HU:()=>g,Jb:()=>f,vh:()=>s});var t=e(58230),n=e(29076),c=e(26031);function s(l,a){for(const m of l)switch(m.type){case c.H.ValueToText:if(a==null)continue;const d=m.options[a];if(d)return d;break;case c.H.RangeToText:if(a==null)continue;const p=parseFloat(a);if(isNaN(p)||!isNaN(m.options.from)&&p<m.options.from||!isNaN(m.options.to)&&p>m.options.to)continue;return m.options.result;case c.H.RegexToText:if(a==null||typeof a!="string")continue;const v=(0,n.jO)(m.options.pattern);if(a.match(v)){const i={...m.options.result};return i.text!=null&&(i.text=a.replace(v,m.options.result.text||"")),i}case c.H.SpecialValue:switch(m.options.match){case c.e.Null:{if(a==null)return m.options.result;break}case c.e[NaN]:{if(isNaN(a))return m.options.result;break}case c.e.NullAndNaN:{if(isNaN(a)||a==null)return m.options.result;break}case c.e.True:{if(a===!0||a==="true")return m.options.result;break}case c.e.False:{if(a===!1||a==="false")return m.options.result;break}case c.e.Empty:{if(a==="")return m.options.result;break}}}return null}function r(l){return(typeof l=="number"||typeof l=="string"&&l.trim()!=="")&&!isNaN(l)}var g=(l=>(l[l.ValueToText=1]="ValueToText",l[l.RangeToText=2]="RangeToText",l))(g||{});function f(l,a){const m=[];let d=l.mappingType;if(l.mappingType||(l.valueMaps&&l.valueMaps.length?d=1:l.rangeMaps&&l.rangeMaps.length&&(d=2)),d===1)for(let p=0;p<l.valueMaps.length;p++){const h=l.valueMaps[p];m.push(o({...h,id:p,type:c.H.ValueToText},l.fieldConfig?.defaults?.thresholds||a))}else if(d===2)for(let p=0;p<l.rangeMaps.length;p++){const h=l.rangeMaps[p];m.push(o({...h,id:p,type:c.H.RangeToText},l.fieldConfig?.defaults?.thresholds||a))}return m}function o(l,a){const m={type:c.H.ValueToText,options:{}},d=[];let p;const h=parseFloat(l.text);if(a&&!isNaN(h)){const y=(0,t.m1)(h,a.steps);y&&y.color&&(p=y.color)}switch(l.type){case 1:case c.H.ValueToText:l.value!=null&&(l.value==="null"?d.push({type:c.H.SpecialValue,options:{match:c.e.Null,result:{text:l.text,color:p}}}):m.options[String(l.value)]={text:l.text,color:p});break;case 2:case c.H.RangeToText:l.from==="null"||l.to==="null"?d.push({type:c.H.SpecialValue,options:{match:c.e.Null,result:{text:l.text,color:p}}}):d.push({type:c.H.RangeToText,options:{from:+l.from,to:+l.to,result:{text:l.text,color:p}}});break}return Object.keys(m.options).length>0&&d.unshift(m),d[0]}},83849:(H,T,e)=>{"use strict";e.d(T,{x:()=>r});var t=e(16313),n=e(4561),c=e(7356),s=e(67305);function r({whileLoading:g,source:f}){return(0,t.T)((0,n.H)(200).pipe((0,c.h)(g),(0,s.R)(f)),f)}},41024:(H,T,e)=>{"use strict";e.d(T,{Cf:()=>t.Cf,FH:()=>t.FH,IR:()=>t.IR,QW:()=>t.QW,Qj:()=>t.Qj,SP:()=>t.SP,SR:()=>t.SR,Td:()=>t.Td,bn:()=>t.bn,br:()=>t.br,q2:()=>t.q2,vb:()=>t.vb,zc:()=>t.zc});var t=e(20112)},8428:(H,T,e)=>{"use strict";e.d(T,{Aq:()=>n,Yh:()=>f,dT:()=>r,i7:()=>o});var t=e(20112);function n(l,a){const m=["","K","M","B","T"],d=(0,t.Qj)(1e3,m);return(p,h,y)=>{if(p===null)return{text:""};const v=d(p,h,y);return a?v.suffix=v.suffix!==void 0?`${v.suffix}${l}`:void 0:v.prefix=l,v}}const c=["f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],s=c.indexOf("");function r(l){const a=c.findIndex(m=>m.normalize("NFKD")===l.normalize("NFKD"));return a<0?0:a-s}const g=["","Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"];function f(l,a=0){const m=g.map(d=>" "+d+l);return(0,t.Qj)(1024,m,a)}function o(l,a=0){const m=c.map(d=>" "+d+l);return(0,t.Qj)(1e3,m,s+a)}},20112:(H,T,e)=>{"use strict";e.d(T,{IR:()=>ee,zc:()=>Z,Cf:()=>Be,QW:()=>He,Td:()=>ke,br:()=>pe,SP:()=>G,Qj:()=>Q,SR:()=>q,vb:()=>X,FH:()=>Ee,bn:()=>re,q2:()=>le});var t=e(82897);function n(ue,Oe){return ue===null?{text:""}:{text:Ee(ue,Oe),suffix:"%"}}function c(ue,Oe){return ue===null?{text:""}:{text:Ee(100*ue,Oe),suffix:"%"}}function s(ue,Oe){if(ue==null)return{text:""};const Fe=r(ue,Oe);return Fe.text.substring(0,1)==="-"?Fe.text="-0x"+Fe.text.substring(1):Fe.text="0x"+Fe.text,Fe}function r(ue,Oe){return ue==null?{text:""}:{text:parseFloat(Ee(ue,Oe)).toString(16).toUpperCase()}}function g(ue,Oe){return ue==null?{text:""}:{text:ue.toExponential(Oe)}}var f=e(38849),o=e(47513),l=e(46519),a=(ue=>(ue.Year="year",ue.Month="month",ue.Week="week",ue.Day="day",ue.Hour="hour",ue.Minute="minute",ue.Second="second",ue.Millisecond="millisecond",ue))(a||{});const m=["year","month","week","day","hour","minute","second","millisecond"],d={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1,millisecond:.001};function p(ue,Oe){return ue===null?{text:""}:Math.abs(ue)<1e3?{text:Ee(ue,Oe),suffix:" ns"}:Math.abs(ue)<1e6?re(ue/1e3,Oe," \xB5s"):Math.abs(ue)<1e9?re(ue/1e6,Oe," ms"):Math.abs(ue)<6e10?re(ue/1e9,Oe," s"):Math.abs(ue)<36e11?re(ue/6e10,Oe," min"):Math.abs(ue)<864e11?re(ue/36e11,Oe," hour"):re(ue/864e11,Oe," day")}function h(ue,Oe){return ue===null?{text:""}:Math.abs(ue)<1e3?{text:Ee(ue,Oe),suffix:" \xB5s"}:Math.abs(ue)<1e6?re(ue/1e3,Oe," ms"):re(ue/1e6,Oe," s")}function y(ue,Oe,Fe){return ue===null?{text:""}:Math.abs(ue)<1e3?{text:Ee(ue,Oe),suffix:" ms"}:Math.abs(ue)<6e4?re(ue/1e3,Oe," s"):Math.abs(ue)<36e5?re(ue/6e4,Oe," min"):Math.abs(ue)<864e5?re(ue/36e5,Oe," hour"):Math.abs(ue)<31536e6?re(ue/864e5,Oe," day"):re(ue/31536e6,Oe," year")}function v(ue,Oe){if(ue!=null&&Oe!==null&&Oe!==void 0)return ue-Oe}function i(ue,Oe){return ue===null?{text:""}:ue===0?{text:"0",suffix:" s"}:Math.abs(ue)<1e-6?re(ue*1e9,Oe," ns"):Math.abs(ue)<.001?re(ue*1e6,Oe," \xB5s"):Math.abs(ue)<1?re(ue*1e3,Oe," ms"):Math.abs(ue)<60?{text:Ee(ue,Oe),suffix:" s"}:Math.abs(ue)<3600?re(ue/60,Oe," min"):Math.abs(ue)<86400?re(ue/3600,Oe," hour"):Math.abs(ue)<604800?re(ue/86400,Oe," day"):Math.abs(ue)<31536e3?re(ue/604800,Oe," week"):re(ue/31556900,Oe," year")}function u(ue,Oe){return ue===null?{text:""}:Math.abs(ue)<60?{text:Ee(ue,Oe),suffix:" min"}:Math.abs(ue)<1440?re(ue/60,Oe," hour"):Math.abs(ue)<10080?re(ue/1440,Oe," day"):Math.abs(ue)<604800?re(ue/10080,Oe," week"):re(ue/525948,Oe," year")}function P(ue,Oe){return ue===null?{text:""}:Math.abs(ue)<24?{text:Ee(ue,Oe),suffix:" hour"}:Math.abs(ue)<168?re(ue/24,Oe," day"):Math.abs(ue)<8760?re(ue/168,Oe," week"):re(ue/8760,Oe," year")}function E(ue,Oe){return ue===null?{text:""}:Math.abs(ue)<7?{text:Ee(ue,Oe),suffix:" day"}:Math.abs(ue)<365?re(ue/7,Oe," week"):re(ue/365,Oe," year")}function C(ue,Oe,Fe){if(ue===null)return{text:""};if(ue===0)return{text:"0",suffix:" "+Fe+"s"};if(ue<0){const _e=C(-ue,Oe,Fe);return _e.suffix||(_e.suffix=""),_e.suffix+=" ago",_e}ue*=d[Fe]*1e3;const Ie=[];let we=!1,Re=0;Oe!=null&&(Re=Oe);for(let _e=0;_e<m.length&&Re>=0;_e++){const et=d[m[_e]]*1e3,qe=ue/et;if(qe>=1||we){we=!0;const Je=Math.floor(qe),lt=m[_e]+(Je!==1?"s":"");Ie.push(Je+" "+lt),ue=ue%et,Re--}}return{text:Ie.join(", ")}}function b(ue,Oe){if(ue===null)return{text:""};if(ue<1e3)return{text:(0,l.zh)(ue).format("SSS\\m\\s")};if(ue<6e4){let Re="ss\\s:SSS\\m\\s";return Oe===0&&(Re="ss\\s"),{text:(0,l.zh)(ue).format(Re)}}if(ue<36e5){let Re="mm\\m:ss\\s:SSS\\m\\s";return Oe===0?Re="mm\\m":Oe===1&&(Re="mm\\m:ss\\s"),{text:(0,l.zh)(ue).format(Re)}}let Fe="mm\\m:ss\\s:SSS\\m\\s";const Ie=`${("0"+Math.floor((0,l.Ks)(ue,"milliseconds").asHours())).slice(-2)}h`;return Oe===0?Fe="":Oe===1?Fe="mm\\m":Oe===2&&(Fe="mm\\m:ss\\s"),{text:Fe?`${Ie}:${(0,l.zh)(ue).format(Fe)}`:Ie}}function S(ue,Oe){return C(ue,Oe,"millisecond")}function M(ue,Oe){return C(ue,Oe,"second")}function x(ue){if(ue<0){const Re=x(-ue);return Re.suffix||(Re.suffix=""),Re.suffix+=" ago",Re}const Oe=[],Fe=Math.floor(ue/3600),Ie=Math.floor(ue%3600/60),we=Math.floor(ue%3600%60);return Fe>9?Oe.push(""+Fe):Oe.push("0"+Fe),Ie>9?Oe.push(""+Ie):Oe.push("0"+Ie),we>9?Oe.push(""+we):Oe.push("0"+we),{text:Oe.join(":")}}function O(ue){if(ue<0){const we=O(-ue);return we.suffix||(we.suffix=""),we.suffix+=" ago",we}let Oe="";const Fe=Math.floor(ue/(24*3600));Fe>0&&(Oe=Fe+" d ");const Ie=x(ue-Fe*24*3600);return{text:Oe+Ie.text}}function L(ue,Oe){return i(ue/100,Oe)}function B(ue,Oe){return b(ue,Oe)}function w(ue,Oe){return b(ue*1e3,Oe)}function R(ue,Oe){return(Fe,Ie,we,Re)=>Oe&&(0,l.CQ)().isSame(Fe,"day")?{text:(0,f.dq)(Fe,{format:Oe,timeZone:Re})}:{text:(0,f.dq)(Fe,{format:ue,timeZone:Re})}}const A=R("YYYY-MM-DD HH:mm:ss"),U=R("YYYY-MM-DD HH:mm:ss","HH:mm:ss"),I=R("MM/DD/YYYY h:mm:ss a"),N=R("MM/DD/YYYY h:mm:ss a","h:mm:ss a");function F(){return R((0,o.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function D(){return R((0,o.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),(0,o.Ji)({hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function Y(ue,Oe,Fe,Ie,we){return{text:(0,f.dq)(ue,{format:we?o.U6.fullDateMS:o.U6.fullDate,timeZone:Ie})}}function j(ue,Oe,Fe,Ie){return{text:(0,f.E8)(ue,{timeZone:Ie})}}var K=e(8428);const z=()=>[{name:"Misc",formats:[{name:"Number",id:"none",fn:le("")},{name:"String",id:"string",fn:X},{name:"short",id:"short",fn:Q(1e3,[""," K"," Mil"," Bil"," Tri"," Quadr"," Quint"," Sext"," Sept"])},{name:"Percent (0-100)",id:"percent",fn:n},{name:"Percent (0.0-1.0)",id:"percentunit",fn:c},{name:"Humidity (%H)",id:"humidity",fn:le("%H")},{name:"Decibel",id:"dB",fn:le("dB")},{name:"Hexadecimal (0x)",id:"hex0x",fn:s},{name:"Hexadecimal",id:"hex",fn:r},{name:"Scientific notation",id:"sci",fn:g},{name:"Locale format",id:"locale",fn:G},{name:"Pixels",id:"pixel",fn:le("px")}]},{name:"Acceleration",formats:[{name:"Meters/sec\xB2",id:"accMS2",fn:le("m/sec\xB2")},{name:"Feet/sec\xB2",id:"accFS2",fn:le("f/sec\xB2")},{name:"G unit",id:"accG",fn:le("g")}]},{name:"Angle",formats:[{name:"Degrees (\xB0)",id:"degree",fn:le("\xB0")},{name:"Radians",id:"radian",fn:le("rad")},{name:"Gradian",id:"grad",fn:le("grad")},{name:"Arc Minutes",id:"arcmin",fn:le("arcmin")},{name:"Arc Seconds",id:"arcsec",fn:le("arcsec")}]},{name:"Area",formats:[{name:"Square Meters (m\xB2)",id:"areaM2",fn:le("m\xB2")},{name:"Square Feet (ft\xB2)",id:"areaF2",fn:le("ft\xB2")},{name:"Square Miles (mi\xB2)",id:"areaMI2",fn:le("mi\xB2")}]},{name:"Computation",formats:[{name:"FLOP/s",id:"flops",fn:(0,K.i7)("FLOPS")},{name:"MFLOP/s",id:"mflops",fn:(0,K.i7)("FLOPS",2)},{name:"GFLOP/s",id:"gflops",fn:(0,K.i7)("FLOPS",3)},{name:"TFLOP/s",id:"tflops",fn:(0,K.i7)("FLOPS",4)},{name:"PFLOP/s",id:"pflops",fn:(0,K.i7)("FLOPS",5)},{name:"EFLOP/s",id:"eflops",fn:(0,K.i7)("FLOPS",6)},{name:"ZFLOP/s",id:"zflops",fn:(0,K.i7)("FLOPS",7)},{name:"YFLOP/s",id:"yflops",fn:(0,K.i7)("FLOPS",8)}]},{name:"Concentration",formats:[{name:"parts-per-million (ppm)",id:"ppm",fn:le("ppm")},{name:"parts-per-billion (ppb)",id:"conppb",fn:le("ppb")},{name:"nanogram per cubic meter (ng/m\xB3)",id:"conngm3",fn:le("ng/m\xB3")},{name:"nanogram per normal cubic meter (ng/Nm\xB3)",id:"conngNm3",fn:le("ng/Nm\xB3")},{name:"microgram per cubic meter (\u03BCg/m\xB3)",id:"con\u03BCgm3",fn:le("\u03BCg/m\xB3")},{name:"microgram per normal cubic meter (\u03BCg/Nm\xB3)",id:"con\u03BCgNm3",fn:le("\u03BCg/Nm\xB3")},{name:"milligram per cubic meter (mg/m\xB3)",id:"conmgm3",fn:le("mg/m\xB3")},{name:"milligram per normal cubic meter (mg/Nm\xB3)",id:"conmgNm3",fn:le("mg/Nm\xB3")},{name:"gram per cubic meter (g/m\xB3)",id:"congm3",fn:le("g/m\xB3")},{name:"gram per normal cubic meter (g/Nm\xB3)",id:"congNm3",fn:le("g/Nm\xB3")},{name:"milligrams per decilitre (mg/dL)",id:"conmgdL",fn:le("mg/dL")},{name:"millimoles per litre (mmol/L)",id:"conmmolL",fn:le("mmol/L")}]},{name:"Currency",formats:[{name:"Dollars ($)",id:"currencyUSD",fn:(0,K.Aq)("$")},{name:"Pounds (\xA3)",id:"currencyGBP",fn:(0,K.Aq)("\xA3")},{name:"Euro (\u20AC)",id:"currencyEUR",fn:(0,K.Aq)("\u20AC")},{name:"Yen (\xA5)",id:"currencyJPY",fn:(0,K.Aq)("\xA5")},{name:"Rubles (\u20BD)",id:"currencyRUB",fn:(0,K.Aq)("\u20BD")},{name:"Hryvnias (\u20B4)",id:"currencyUAH",fn:(0,K.Aq)("\u20B4")},{name:"Real (R$)",id:"currencyBRL",fn:(0,K.Aq)("R$")},{name:"Danish Krone (kr)",id:"currencyDKK",fn:(0,K.Aq)("kr",!0)},{name:"Icelandic Kr\xF3na (kr)",id:"currencyISK",fn:(0,K.Aq)("kr",!0)},{name:"Norwegian Krone (kr)",id:"currencyNOK",fn:(0,K.Aq)("kr",!0)},{name:"Swedish Krona (kr)",id:"currencySEK",fn:(0,K.Aq)("kr",!0)},{name:"Czech koruna (czk)",id:"currencyCZK",fn:(0,K.Aq)("czk")},{name:"Swiss franc (CHF)",id:"currencyCHF",fn:(0,K.Aq)("CHF")},{name:"Polish Z\u0142oty (PLN)",id:"currencyPLN",fn:(0,K.Aq)("PLN")},{name:"Bitcoin (\u0E3F)",id:"currencyBTC",fn:(0,K.Aq)("\u0E3F")},{name:"Milli Bitcoin (\u0E3F)",id:"currencymBTC",fn:(0,K.Aq)("mBTC")},{name:"Micro Bitcoin (\u0E3F)",id:"currency\u03BCBTC",fn:(0,K.Aq)("\u03BCBTC")},{name:"South African Rand (R)",id:"currencyZAR",fn:(0,K.Aq)("R")},{name:"Indian Rupee (\u20B9)",id:"currencyINR",fn:(0,K.Aq)("\u20B9")},{name:"South Korean Won (\u20A9)",id:"currencyKRW",fn:(0,K.Aq)("\u20A9")},{name:"Indonesian Rupiah (Rp)",id:"currencyIDR",fn:(0,K.Aq)("Rp")},{name:"Philippine Peso (PHP)",id:"currencyPHP",fn:(0,K.Aq)("PHP")},{name:"Vietnamese Dong (VND)",id:"currencyVND",fn:(0,K.Aq)("\u0111",!0)}]},{name:"Data",formats:[{name:"bytes(IEC)",id:"bytes",fn:(0,K.Yh)("B")},{name:"bytes(SI)",id:"decbytes",fn:(0,K.i7)("B")},{name:"bits(IEC)",id:"bits",fn:(0,K.Yh)("b")},{name:"bits(SI)",id:"decbits",fn:(0,K.i7)("b")},{name:"kibibytes",id:"kbytes",fn:(0,K.Yh)("B",1)},{name:"kilobytes",id:"deckbytes",fn:(0,K.i7)("B",1)},{name:"mebibytes",id:"mbytes",fn:(0,K.Yh)("B",2)},{name:"megabytes",id:"decmbytes",fn:(0,K.i7)("B",2)},{name:"gibibytes",id:"gbytes",fn:(0,K.Yh)("B",3)},{name:"gigabytes",id:"decgbytes",fn:(0,K.i7)("B",3)},{name:"tebibytes",id:"tbytes",fn:(0,K.Yh)("B",4)},{name:"terabytes",id:"dectbytes",fn:(0,K.i7)("B",4)},{name:"pebibytes",id:"pbytes",fn:(0,K.Yh)("B",5)},{name:"petabytes",id:"decpbytes",fn:(0,K.i7)("B",5)}]},{name:"Data rate",formats:[{name:"packets/sec",id:"pps",fn:(0,K.i7)("p/s")},{name:"bytes/sec(IEC)",id:"binBps",fn:(0,K.Yh)("B/s")},{name:"bytes/sec(SI)",id:"Bps",fn:(0,K.i7)("B/s")},{name:"bits/sec(IEC)",id:"binbps",fn:(0,K.Yh)("b/s")},{name:"bits/sec(SI)",id:"bps",fn:(0,K.i7)("b/s")},{name:"kibibytes/sec",id:"KiBs",fn:(0,K.Yh)("B/s",1)},{name:"kibibits/sec",id:"Kibits",fn:(0,K.Yh)("b/s",1)},{name:"kilobytes/sec",id:"KBs",fn:(0,K.i7)("B/s",1)},{name:"kilobits/sec",id:"Kbits",fn:(0,K.i7)("b/s",1)},{name:"mebibytes/sec",id:"MiBs",fn:(0,K.Yh)("B/s",2)},{name:"mebibits/sec",id:"Mibits",fn:(0,K.Yh)("b/s",2)},{name:"megabytes/sec",id:"MBs",fn:(0,K.i7)("B/s",2)},{name:"megabits/sec",id:"Mbits",fn:(0,K.i7)("b/s",2)},{name:"gibibytes/sec",id:"GiBs",fn:(0,K.Yh)("B/s",3)},{name:"gibibits/sec",id:"Gibits",fn:(0,K.Yh)("b/s",3)},{name:"gigabytes/sec",id:"GBs",fn:(0,K.i7)("B/s",3)},{name:"gigabits/sec",id:"Gbits",fn:(0,K.i7)("b/s",3)},{name:"tebibytes/sec",id:"TiBs",fn:(0,K.Yh)("B/s",4)},{name:"tebibits/sec",id:"Tibits",fn:(0,K.Yh)("b/s",4)},{name:"terabytes/sec",id:"TBs",fn:(0,K.i7)("B/s",4)},{name:"terabits/sec",id:"Tbits",fn:(0,K.i7)("b/s",4)},{name:"pebibytes/sec",id:"PiBs",fn:(0,K.Yh)("B/s",5)},{name:"pebibits/sec",id:"Pibits",fn:(0,K.Yh)("b/s",5)},{name:"petabytes/sec",id:"PBs",fn:(0,K.i7)("B/s",5)},{name:"petabits/sec",id:"Pbits",fn:(0,K.i7)("b/s",5)}]},{name:"Date & time",formats:[{name:"Datetime ISO",id:"dateTimeAsIso",fn:A},{name:"Datetime ISO (No date if today)",id:"dateTimeAsIsoNoDateIfToday",fn:U},{name:"Datetime US",id:"dateTimeAsUS",fn:I},{name:"Datetime US (No date if today)",id:"dateTimeAsUSNoDateIfToday",fn:N},{name:"Datetime local",id:"dateTimeAsLocal",fn:F()},{name:"Datetime local (No date if today)",id:"dateTimeAsLocalNoDateIfToday",fn:D()},{name:"Datetime default",id:"dateTimeAsSystem",fn:Y},{name:"From Now",id:"dateTimeFromNow",fn:j}]},{name:"Energy",formats:[{name:"Watt (W)",id:"watt",fn:(0,K.i7)("W")},{name:"Kilowatt (kW)",id:"kwatt",fn:(0,K.i7)("W",1)},{name:"Megawatt (MW)",id:"megwatt",fn:(0,K.i7)("W",2)},{name:"Gigawatt (GW)",id:"gwatt",fn:(0,K.i7)("W",3)},{name:"Milliwatt (mW)",id:"mwatt",fn:(0,K.i7)("W",-1)},{name:"Watt per square meter (W/m\xB2)",id:"Wm2",fn:le("W/m\xB2")},{name:"Volt-Ampere (VA)",id:"voltamp",fn:(0,K.i7)("VA")},{name:"Kilovolt-Ampere (kVA)",id:"kvoltamp",fn:(0,K.i7)("VA",1)},{name:"Volt-Ampere reactive (VAr)",id:"voltampreact",fn:(0,K.i7)("VAr")},{name:"Kilovolt-Ampere reactive (kVAr)",id:"kvoltampreact",fn:(0,K.i7)("VAr",1)},{name:"Watt-hour (Wh)",id:"watth",fn:(0,K.i7)("Wh")},{name:"Watt-hour per Kilogram (Wh/kg)",id:"watthperkg",fn:(0,K.i7)("Wh/kg")},{name:"Kilowatt-hour (kWh)",id:"kwatth",fn:(0,K.i7)("Wh",1)},{name:"Kilowatt-min (kWm)",id:"kwattm",fn:(0,K.i7)("W-Min",1)},{name:"Ampere-hour (Ah)",id:"amph",fn:(0,K.i7)("Ah")},{name:"Kiloampere-hour (kAh)",id:"kamph",fn:(0,K.i7)("Ah",1)},{name:"Milliampere-hour (mAh)",id:"mamph",fn:(0,K.i7)("Ah",-1)},{name:"Joule (J)",id:"joule",fn:(0,K.i7)("J")},{name:"Electron volt (eV)",id:"ev",fn:(0,K.i7)("eV")},{name:"Ampere (A)",id:"amp",fn:(0,K.i7)("A")},{name:"Kiloampere (kA)",id:"kamp",fn:(0,K.i7)("A",1)},{name:"Milliampere (mA)",id:"mamp",fn:(0,K.i7)("A",-1)},{name:"Volt (V)",id:"volt",fn:(0,K.i7)("V")},{name:"Kilovolt (kV)",id:"kvolt",fn:(0,K.i7)("V",1)},{name:"Millivolt (mV)",id:"mvolt",fn:(0,K.i7)("V",-1)},{name:"Decibel-milliwatt (dBm)",id:"dBm",fn:(0,K.i7)("dBm")},{name:"Ohm (\u03A9)",id:"ohm",fn:(0,K.i7)("\u03A9")},{name:"Kiloohm (k\u03A9)",id:"kohm",fn:(0,K.i7)("\u03A9",1)},{name:"Megaohm (M\u03A9)",id:"Mohm",fn:(0,K.i7)("\u03A9",2)},{name:"Farad (F)",id:"farad",fn:(0,K.i7)("F")},{name:"Microfarad (\xB5F)",id:"\xB5farad",fn:(0,K.i7)("F",-2)},{name:"Nanofarad (nF)",id:"nfarad",fn:(0,K.i7)("F",-3)},{name:"Picofarad (pF)",id:"pfarad",fn:(0,K.i7)("F",-4)},{name:"Femtofarad (fF)",id:"ffarad",fn:(0,K.i7)("F",-5)},{name:"Henry (H)",id:"henry",fn:(0,K.i7)("H")},{name:"Millihenry (mH)",id:"mhenry",fn:(0,K.i7)("H",-1)},{name:"Microhenry (\xB5H)",id:"\xB5henry",fn:(0,K.i7)("H",-2)},{name:"Lumens (Lm)",id:"lumens",fn:(0,K.i7)("Lm")}]},{name:"Flow",formats:[{name:"Gallons/min (gpm)",id:"flowgpm",fn:le("gpm")},{name:"Cubic meters/sec (cms)",id:"flowcms",fn:le("cms")},{name:"Cubic feet/sec (cfs)",id:"flowcfs",fn:le("cfs")},{name:"Cubic feet/min (cfm)",id:"flowcfm",fn:le("cfm")},{name:"Litre/hour",id:"litreh",fn:le("L/h")},{name:"Litre/min (L/min)",id:"flowlpm",fn:le("L/min")},{name:"milliLitre/min (mL/min)",id:"flowmlpm",fn:le("mL/min")},{name:"Lux (lx)",id:"lux",fn:le("lux")}]},{name:"Force",formats:[{name:"Newton-meters (Nm)",id:"forceNm",fn:(0,K.i7)("Nm")},{name:"Kilonewton-meters (kNm)",id:"forcekNm",fn:(0,K.i7)("Nm",1)},{name:"Newtons (N)",id:"forceN",fn:(0,K.i7)("N")},{name:"Kilonewtons (kN)",id:"forcekN",fn:(0,K.i7)("N",1)}]},{name:"Hash rate",formats:[{name:"hashes/sec",id:"Hs",fn:(0,K.i7)("H/s")},{name:"kilohashes/sec",id:"KHs",fn:(0,K.i7)("H/s",1)},{name:"megahashes/sec",id:"MHs",fn:(0,K.i7)("H/s",2)},{name:"gigahashes/sec",id:"GHs",fn:(0,K.i7)("H/s",3)},{name:"terahashes/sec",id:"THs",fn:(0,K.i7)("H/s",4)},{name:"petahashes/sec",id:"PHs",fn:(0,K.i7)("H/s",5)},{name:"exahashes/sec",id:"EHs",fn:(0,K.i7)("H/s",6)}]},{name:"Mass",formats:[{name:"milligram (mg)",id:"massmg",fn:(0,K.i7)("g",-1)},{name:"gram (g)",id:"massg",fn:(0,K.i7)("g")},{name:"pound (lb)",id:"masslb",fn:le("lb")},{name:"kilogram (kg)",id:"masskg",fn:(0,K.i7)("g",1)},{name:"metric ton (t)",id:"masst",fn:le("t")}]},{name:"Length",formats:[{name:"millimeter (mm)",id:"lengthmm",fn:(0,K.i7)("m",-1)},{name:"inch (in)",id:"lengthin",fn:le("in")},{name:"feet (ft)",id:"lengthft",fn:le("ft")},{name:"meter (m)",id:"lengthm",fn:(0,K.i7)("m")},{name:"kilometer (km)",id:"lengthkm",fn:(0,K.i7)("m",1)},{name:"mile (mi)",id:"lengthmi",fn:le("mi")}]},{name:"Pressure",formats:[{name:"Millibars",id:"pressurembar",fn:(0,K.i7)("bar",-1)},{name:"Bars",id:"pressurebar",fn:(0,K.i7)("bar")},{name:"Kilobars",id:"pressurekbar",fn:(0,K.i7)("bar",1)},{name:"Pascals",id:"pressurepa",fn:(0,K.i7)("Pa")},{name:"Hectopascals",id:"pressurehpa",fn:le("hPa")},{name:"Kilopascals",id:"pressurekpa",fn:le("kPa")},{name:"Inches of mercury",id:"pressurehg",fn:le('"Hg')},{name:"PSI",id:"pressurepsi",fn:Q(1e3,["psi","ksi","Mpsi"])}]},{name:"Radiation",formats:[{name:"Becquerel (Bq)",id:"radbq",fn:(0,K.i7)("Bq")},{name:"curie (Ci)",id:"radci",fn:(0,K.i7)("Ci")},{name:"Gray (Gy)",id:"radgy",fn:(0,K.i7)("Gy")},{name:"rad",id:"radrad",fn:(0,K.i7)("rad")},{name:"Sievert (Sv)",id:"radsv",fn:(0,K.i7)("Sv")},{name:"milliSievert (mSv)",id:"radmsv",fn:(0,K.i7)("Sv",-1)},{name:"microSievert (\xB5Sv)",id:"radusv",fn:(0,K.i7)("Sv",-2)},{name:"rem",id:"radrem",fn:(0,K.i7)("rem")},{name:"Exposure (C/kg)",id:"radexpckg",fn:(0,K.i7)("C/kg")},{name:"roentgen (R)",id:"radr",fn:(0,K.i7)("R")},{name:"Sievert/hour (Sv/h)",id:"radsvh",fn:(0,K.i7)("Sv/h")},{name:"milliSievert/hour (mSv/h)",id:"radmsvh",fn:(0,K.i7)("Sv/h",-1)},{name:"microSievert/hour (\xB5Sv/h)",id:"radusvh",fn:(0,K.i7)("Sv/h",-2)}]},{name:"Rotational Speed",formats:[{name:"Revolutions per minute (rpm)",id:"rotrpm",fn:le("rpm")},{name:"Hertz (Hz)",id:"rothz",fn:(0,K.i7)("Hz")},{name:"Radians per second (rad/s)",id:"rotrads",fn:le("rad/s")},{name:"Degrees per second (\xB0/s)",id:"rotdegs",fn:le("\xB0/s")}]},{name:"Temperature",formats:[{name:"Celsius (\xB0C)",id:"celsius",fn:le("\xB0C")},{name:"Fahrenheit (\xB0F)",id:"fahrenheit",fn:le("\xB0F")},{name:"Kelvin (K)",id:"kelvin",fn:le("K")}]},{name:"Time",formats:[{name:"Hertz (1/s)",id:"hertz",fn:(0,K.i7)("Hz")},{name:"nanoseconds (ns)",id:"ns",fn:p},{name:"microseconds (\xB5s)",id:"\xB5s",fn:h},{name:"milliseconds (ms)",id:"ms",fn:y},{name:"seconds (s)",id:"s",fn:i},{name:"minutes (m)",id:"m",fn:u},{name:"hours (h)",id:"h",fn:P},{name:"days (d)",id:"d",fn:E},{name:"duration (ms)",id:"dtdurationms",fn:S},{name:"duration (s)",id:"dtdurations",fn:M},{name:"duration (hh:mm:ss)",id:"dthms",fn:x},{name:"duration (d hh:mm:ss)",id:"dtdhms",fn:O},{name:"Timeticks (s/100)",id:"timeticks",fn:L},{name:"clock (ms)",id:"clockms",fn:B},{name:"clock (s)",id:"clocks",fn:w}]},{name:"Throughput",formats:[{name:"counts/sec (cps)",id:"cps",fn:q("c/s")},{name:"ops/sec (ops)",id:"ops",fn:q("ops/s")},{name:"requests/sec (rps)",id:"reqps",fn:q("req/s")},{name:"reads/sec (rps)",id:"rps",fn:q("rd/s")},{name:"writes/sec (wps)",id:"wps",fn:q("wr/s")},{name:"I/O ops/sec (iops)",id:"iops",fn:q("io/s")},{name:"counts/min (cpm)",id:"cpm",fn:q("c/m")},{name:"ops/min (opm)",id:"opm",fn:q("ops/m")},{name:"reads/min (rpm)",id:"rpm",fn:q("rd/m")},{name:"writes/min (wpm)",id:"wpm",fn:q("wr/m")}]},{name:"Velocity",formats:[{name:"meters/second (m/s)",id:"velocityms",fn:le("m/s")},{name:"kilometers/hour (km/h)",id:"velocitykmh",fn:le("km/h")},{name:"miles/hour (mph)",id:"velocitymph",fn:le("mph")},{name:"knot (kn)",id:"velocityknot",fn:le("kn")}]},{name:"Volume",formats:[{name:"millilitre (mL)",id:"mlitre",fn:(0,K.i7)("L",-1)},{name:"litre (L)",id:"litre",fn:(0,K.i7)("L")},{name:"cubic meter",id:"m3",fn:le("m\xB3")},{name:"Normal cubic meter",id:"Nm3",fn:le("Nm\xB3")},{name:"cubic decimeter",id:"dm3",fn:le("dm\xB3")},{name:"gallons",id:"gallons",fn:le("gal")}]},{name:"Boolean",formats:[{name:"True / False",id:"bool",fn:ee("True","False")},{name:"Yes / No",id:"bool_yes_no",fn:ee("Yes","No")},{name:"On / Off",id:"bool_on_off",fn:ee("On","Off")}]}];function Z(ue){return`${ue.prefix??""}${ue.text}${ue.suffix??""}`}let ae=[];const J={};let oe=!1;function Ee(ue,Oe){if(ue===null)return"";if(ue===Number.NEGATIVE_INFINITY||ue===Number.POSITIVE_INFINITY)return ue.toLocaleString();if(Oe==null&&(Oe=me(ue)),ue===0)return ue.toFixed(Oe);const Fe=Oe?Math.pow(10,Math.max(0,Oe)):1,Ie=String(Math.round(ue*Fe)/Fe);if(Ie.indexOf("e")!==-1||ue===0)return Ie;const we=Ie.indexOf("."),Re=we===-1?0:Ie.length-we-1;return Re<Oe?(Re?Ie:Ie+".")+String(Fe).slice(1,Oe-Re+1):Ie}function me(ue){const Oe=Math.abs(ue);let Ie=-Math.floor(Math.log(Oe)/Math.LN10)+1;const we=Math.pow(10,-Ie);return Oe/we>2.25&&++Ie,ue%1===0&&(Ie=0),Math.max(0,Ie)}function re(ue,Oe,Fe){return{text:Ee(ue,Oe),suffix:Fe}}function le(ue,Oe){return(Fe,Ie)=>{if(Fe===null)return{text:""};const we=Ee(Fe,Ie);return ue?Oe?{text:we,prefix:ue}:{text:we,suffix:" "+ue}:{text:we}}}function pe(ue){return ue&&ue.startsWith("bool")}function ee(ue,Oe){return Fe=>({text:Fe?ue:Oe})}const se=(ue,Oe)=>Math.log10(Oe)/Math.log10(ue);function Q(ue,Oe,Fe=0){return(Ie,we)=>{if(Ie===null)return{text:""};if(Ie===Number.NEGATIVE_INFINITY||Ie===Number.POSITIVE_INFINITY||isNaN(Ie))return{text:Ie.toLocaleString()};const Re=Ie===0?0:Math.floor(se(ue,Math.abs(Ie))),_e=Oe[(0,t.clamp)(Fe+Re,0,Oe.length-1)];return{text:Ee(Ie/ue**(0,t.clamp)(Re,-Fe,Oe.length-Fe-1),we),suffix:_e}}}function G(ue,Oe){return ue==null?{text:""}:{text:ue.toLocaleString(void 0,{maximumFractionDigits:Oe})}}function q(ue){const Fe=Q(1e3,["","K","M","B","T"]);return(Ie,we,Re)=>{if(Ie===null)return{text:""};const _e=Fe(Ie,we,Re);return _e.suffix+=" "+ue,_e}}function X(ue){return{text:`${ue}`}}function de(){ae=z();for(const ue of ae)for(const Oe of ue.formats)J[Oe.id]=Oe.fn;[{from:"farenheit",to:"fahrenheit"}].forEach(ue=>{const Oe=J[ue.to];Oe&&(J[ue.from]=Oe)}),oe=!0}function Be(ue){if(!ue)return le("");oe||de();const Oe=J[ue];if(!Oe&&ue){let Fe=ue.indexOf(":");if(Fe>0){const Ie=ue.substring(0,Fe),we=ue.substring(Fe+1);if(Ie==="prefix")return le(we,!0);if(Ie==="suffix")return le(we,!1);if(Ie==="time")return R(we);if(Ie==="si"){const Re=(0,K.dT)(we.charAt(0)),_e=Re===0?we:we.substring(1);return(0,K.i7)(_e,Re)}if(Ie==="count")return q(we);if(Ie==="currency")return(0,K.Aq)(we);if(Ie==="bool"){if(Fe=we.indexOf("/"),Fe>=0){const Re=we.substring(0,Fe),_e=we.substring(Fe+1);return ee(Re,_e)}return ee(we,"-")}}return le(ue)}return Oe}function ke(){return oe||de(),J}function He(){return oe||de(),ae.map(ue=>({text:ue.name,submenu:ue.formats.map(Oe=>({text:Oe.name,value:Oe.id}))}))}},52674:(H,T,e)=>{"use strict";e.d(T,{s:()=>n});var t=e(20411);class n extends t.G{constructor(s){super(),this.field=s}get length(){return this.field.length}get(s){return+this.field.get(s)}}},30664:(H,T,e)=>{"use strict";e.d(T,{r:()=>n});var t=e(49319);class n{constructor(s,r,g){this.left=s,this.right=r,this.operation=g}get length(){return this.left.length}get(s){return this.operation(this.left.get(s),this.right.get(s))}toArray(){return(0,t.n)(this)}toJSON(){return(0,t.n)(this)}}},98212:(H,T,e)=>{"use strict";e.d(T,{d:()=>c});var t=e(20411),n=e(49319);class c extends t.G{constructor(r){super(),this.buffer=r.buffer||[],this.capacity=this.buffer.length,this.tail=r.append!=="head",this.index=0,this.add=this.getAddFunction(),r.capacity&&this.setCapacity(r.capacity)}getAddFunction(){return this.capacity>this.buffer.length?this.tail?r=>{this.buffer.push(r),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:r=>{this.buffer.unshift(r),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:this.tail?r=>{this.buffer[this.index]=r,this.index=(this.index+1)%this.buffer.length}:r=>{let g=this.index-1;g<0&&(g=this.buffer.length-1),this.buffer[g]=r,this.index=g}}setCapacity(r){if(this.capacity===r)return;const g=this.toArray();if(r>this.length)this.buffer=g;else if(r<this.capacity){const f=this.length-r;this.tail?this.buffer=g.slice(f,g.length):this.buffer=g.slice(0,g.length-f)}this.capacity=r,this.index=0,this.add=this.getAddFunction()}setAppendMode(r){const g=r!=="head";g!==this.tail&&(this.buffer=this.toArray().reverse(),this.index=0,this.tail=g,this.add=this.getAddFunction())}reverse(){this.buffer.reverse()}get(r){return this.buffer[(r+this.index)%this.buffer.length]}set(r,g){this.buffer[(r+this.index)%this.buffer.length]=g}get length(){return this.buffer.length}toArray(){return(0,n.n)(this)}toJSON(){return(0,n.n)(this)}}},1473:(H,T,e)=>{"use strict";e.d(T,{u:()=>t});class t{constructor(c,s){this.value=c,this.len=s}get length(){return this.len}get(c){return this.value}toArray(){return new Array(this.length).fill(this.value)}toJSON(){return this.toArray()}}},20411:(H,T,e)=>{"use strict";e.d(T,{G:()=>n,s:()=>c});var t=e(49319);class n{*iterator(){for(let r=0;r<this.length;r++)yield this.get(r)}[Symbol.iterator](){return this.iterator()}forEach(r){return c(this).forEach(r)}map(r){return c(this).map(r)}filter(r){return c(this).filter(r)}toArray(){return(0,t.n)(this)}toJSON(){return this.toArray()}}function c(s){return{*[Symbol.iterator](){for(let r=0;r<s.length;r++)yield s.get(r)},forEach(r){for(let g=0;g<s.length;g++)r(s.get(g))},map(r){const g=[];for(let f=0;f<s.length;f++)g.push(r(s.get(f),f));return g},filter(r){const g=[];for(const f of this)r(f)&&g.push(f);return g}}}},44405:(H,T,e)=>{"use strict";e.d(T,{r:()=>c});var t=e(14582),n=e(20411);class c extends n.G{constructor(r){super(),this.len=r}get length(){return this.len}get(r){return r}static newField(r){return{name:"",values:new c(r),type:t.fS.number,config:{min:0,max:r-1}}}}},78330:(H,T,e)=>{"use strict";e.d(T,{l$:()=>n,Gt:()=>c.G,sq:()=>d.s,rM:()=>g.r,dV:()=>s.d,uI:()=>r.u,$Y:()=>a,rm:()=>m.r,oH:()=>f.o,sD:()=>l.s});var t=e(49319);class n{constructor(h=0){this.length=0,this.source=[],this.length=h}setLength(h){if(h>this.length)this.length=h;else if(h<this.length){const y=[];for(const v of this.source)if(y.push(v),v.end>h){v.end=h;break}this.source=y,this.length=h}}append(h){const y={start:this.length,end:this.length+h.length,values:h};return this.length=y.end,this.source.push(y),y}get(h){for(let y=0;y<this.source.length;y++){const v=this.source[y];if(h>=v.start&&h<v.end)return v.values.get(h-v.start)}}toArray(){return(0,t.n)(this)}toJSON(){return(0,t.n)(this)}}var c=e(19695),s=e(98212),r=e(1473),g=e(30664),f=e(12022),o=e(20112),l=e(20411);class a extends l.G{constructor(h,y){super(),this.source=h,this.formatter=y}get length(){return this.source.length}get(h){const y=this.source.get(h);return(0,o.zc)(this.formatter(y))}}var m=e(44405),d=e(52674)},75552:(H,T,e)=>{"use strict";e.d(T,{Si:()=>n,ct:()=>t,fV:()=>c,mR:()=>s});var t=(r=>(r.DashboardView="dashboard-view",r.DataRequest="data-request",r))(t||{});const n=r=>Boolean(r.payload.page),c=r=>Boolean(r.payload.interactionName),s=r=>Boolean(r.payload.experimentId)},41818:(H,T,e)=>{"use strict";e.d(T,{SZ:()=>f,ff:()=>g,r_:()=>s,sm:()=>r});var t=e(35645),n=e(37932),c=e(5494);const s=o=>{(0,c.RP)().addEvent({type:c.ee.MetaAnalytics,payload:o})},r=()=>{const o=n.E1.getLocation(),l=`${t.v.appSubUrl??""}${o.pathname}${o.search}${o.hash}`;(0,c.RP)().addEvent({type:c.ee.Pageview,payload:{page:l}})},g=(o,l)=>{(0,c.RP)().addEvent({type:c.ee.Interaction,payload:{interactionName:o,properties:l}})},f=(o,l,a)=>{(0,c.RP)().addEvent({type:c.ee.ExperimentView,payload:{experimentId:o,experimentGroup:l,experimentVariant:a}})}},53117:(H,T,e)=>{"use strict";e.d(T,{q:()=>a});var t=e(68404),n=e(5916),c=e(81850),s=e(68183),r=e(53217),g=e(52081),f=e(51613),o=e(86647),l=e(22069);class a extends t.PureComponent{constructor(d){super(d),this.dataSourceSrv=(0,o.F)(),this.state={},this.onChange=(p,h)=>{if(h.action==="clear"&&this.props.onClear){this.props.onClear();return}const y=this.dataSourceSrv.getInstanceSettings(p.value);y&&(this.props.onChange(y),this.setState({error:void 0}))}}componentDidMount(){const{current:d}=this.props;this.dataSourceSrv.getInstanceSettings(d)||this.setState({error:"Could not find data source "+d})}getCurrentValue(){const{current:d,hideTextValue:p,noDefault:h}=this.props;if(!d&&h)return;const y=this.dataSourceSrv.getInstanceSettings(d);if(y)return{label:y.name.slice(0,37),value:y.uid,imgUrl:y.meta.info.logos.small,hideText:p,meta:y.meta};const v=(0,n.BT)(d);return v===l.hr.uid||v===l.hr.name?{label:v,value:v,hideText:p}:{label:(v??"no name")+" - not found",value:v??void 0,imgUrl:"",hideText:p}}getDataSourceOptions(){const{alerting:d,tracing:p,metrics:h,mixed:y,dashboard:v,variables:i,annotations:u,pluginId:P,type:E,filter:C,logs:b}=this.props;return this.dataSourceSrv.getList({alerting:d,tracing:p,metrics:h,logs:b,dashboard:v,mixed:y,variables:i,annotations:u,pluginId:P,filter:C,type:E}).map(M=>({value:M.name,label:`${M.name}${M.isDefault?" (default)":""}`,imgUrl:M.meta.info.logos.small,meta:M.meta}))}render(){const{autoFocus:d,onBlur:p,onClear:h,openMenuOnFocus:y,placeholder:v,width:i,inputId:u,disabled:P=!1,isLoading:E=!1}=this.props,{error:C}=this.state,b=this.getDataSourceOptions(),S=this.getCurrentValue(),M=typeof h=="function";return t.createElement("div",{"aria-label":s.wl.components.DataSourcePicker.container},t.createElement(r.Ph,{isLoading:E,disabled:P,"aria-label":s.wl.components.DataSourcePicker.inputV2,inputId:u||"data-source-picker",className:"ds-picker select-container",isMulti:!1,isClearable:M,backspaceRemovesValue:!1,onChange:this.onChange,options:b,autoFocus:d,onBlur:p,width:i,openMenuOnFocus:y,maxMenuHeight:500,placeholder:v,noOptionsMessage:"No datasources found",value:S??null,invalid:Boolean(C)||Boolean(this.props.invalid),getOptionLabel:x=>x.meta&&(0,c.x)(x.meta.signature)&&x!==S?t.createElement(g.Lh,{align:"center",justify:"space-between",height:"auto"},t.createElement("span",null,x.label)," ",t.createElement(f.o,{status:x.meta.signature})):x.label||""}))}}a.defaultProps={autoFocus:!1,openMenuOnFocus:!1,placeholder:"Select data source"}},87670:(H,T,e)=>{"use strict";e.d(T,{$:()=>c,Z:()=>n});var t=e(68404);let n=({message:s})=>t.createElement("div",null,"Unable to render data: ",s,".");function c(s){n=s}},98825:(H,T,e)=>{"use strict";e.d(T,{$:()=>n,L:()=>c});var t=e(68404);let n=()=>t.createElement("div",null,"PanelRenderer can only be used after Grafana instance has been started.");function c(s){n=s}},87221:(H,T,e)=>{"use strict";e.d(T,{T:()=>n,t:()=>c});var t=e(68404);let n=({children:s})=>t.createElement("div",null,s);function c(s){n=s}},35645:(H,T,e)=>{"use strict";e.d(T,{O:()=>r,v:()=>m});var t=e(82897),n=e.n(t),c=e(47513),s=e(36328);class r{constructor(p){this.snapshotEnabled=!0,this.datasources={},this.panels={},this.auth={},this.minRefreshInterval="",this.appUrl="",this.appSubUrl="",this.windowTitlePrefix="",this.newPanelTitle="",this.externalUserMngLinkUrl="",this.externalUserMngLinkName="",this.externalUserMngInfo="",this.allowOrgCreate=!1,this.feedbackLinksEnabled=!0,this.disableLoginForm=!1,this.defaultDatasource="",this.alertingEnabled=!1,this.alertingErrorOrTimeout="",this.alertingNoDataOrNullValues="",this.alertingMinInterval=1,this.angularSupportEnabled=!1,this.authProxyEnabled=!1,this.exploreEnabled=!1,this.queryHistoryEnabled=!1,this.helpEnabled=!1,this.profileEnabled=!1,this.ldapEnabled=!1,this.jwtHeaderName="",this.jwtUrlLogin=!1,this.sigV4AuthEnabled=!1,this.azureAuthEnabled=!1,this.samlEnabled=!1,this.samlName="",this.autoAssignOrg=!0,this.verifyEmailEnabled=!1,this.oauth={},this.rbacEnabled=!0,this.disableUserSignUp=!1,this.loginHint="",this.passwordHint="",this.loginError=void 0,this.viewersCanEdit=!1,this.editorsCanAdmin=!1,this.disableSanitizeHtml=!1,this.liveEnabled=!0,this.pluginsToPreload=[],this.featureToggles={},this.anonymousEnabled=!1,this.licenseInfo={},this.rendererAvailable=!1,this.dashboardPreviews={systemRequirements:{met:!1,requiredImageRendererPluginVersion:""},thumbnailsExist:!1},this.rendererVersion="",this.secretsManagerPluginEnabled=!1,this.supportBundlesEnabled=!1,this.http2Enabled=!1,this.sentry={enabled:!1,dsn:"",customEndpoint:"",sampleRate:1},this.grafanaJavascriptAgent={enabled:!1,customEndpoint:"",apiKey:"",errorInstrumentalizationEnabled:!0,consoleInstrumentalizationEnabled:!1,webVitalsInstrumentalizationEnabled:!1},this.pluginCatalogURL="https://grafana.com/grafana/plugins/",this.pluginAdminEnabled=!0,this.pluginAdminExternalManageEnabled=!1,this.pluginCatalogHiddenPlugins=[],this.pluginsCDNBaseURL="",this.expressionsEnabled=!1,this.awsAllowedAuthProviders=[],this.awsAssumeRoleEnabled=!1,this.azure={managedIdentityEnabled:!1},this.caching={enabled:!1},this.unifiedAlertingEnabled=!1,this.unifiedAlerting={minInterval:""},this.recordedQueries={enabled:!0},this.featureHighlights={enabled:!1},this.reporting={enabled:!0},this.googleAnalytics4SendManualPageViews=!1,this.bootData=p.bootData,this.bootData.user.lightTheme=g(p)==="light",this.isPublicDashboardView=p.bootData.settings.isPublicDashboardView;const h={datasources:{},windowTitlePrefix:"Grafana - ",panels:{},newPanelTitle:"Panel Title",playlist_timespan:"1m",unsaved_changes_warning:!0,appUrl:"",appSubUrl:"",buildInfo:{version:"1.0",commit:"1",env:"production"},viewersCanEdit:!1,editorsCanAdmin:!1,disableSanitizeHtml:!1};(0,t.merge)(this,h,p),this.buildInfo=p.buildInfo||h.buildInfo,this.dateFormats&&c.U6.update(this.dateFormats),o(this),this.theme2=(0,s.j)(f(this)),this.theme=this.theme2.v1,this.theme2.flags.topnav=this.featureToggles.topnav}}function g(d){let p="dark";const h=d.bootData.user.theme;return h==="light"||h==="dark"?p=h:h==="system"&&(p=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),p}function f(d){return{colors:{mode:d.bootData.user.lightTheme?"light":"dark"}}}function o(d){if(window.location.href.indexOf("__feature")===-1)return;new URLSearchParams(window.location.search).forEach((h,y)=>{if(y.startsWith("__feature.")){const v=y.substring(10),i=h==="true";i!==d.featureToggles[y]&&(d.featureToggles[v]=i,console.log(`Setting feature toggle ${v} = ${i}`))}})}const l=window.grafanaBootData||{settings:{},user:{},navTree:[]},a=l.settings;a.bootData=l;const m=new r(a)},35670:(H,T,e)=>{"use strict";e.r(T),e.d(T,{CopyPanelEvent:()=>a.EK,DataSourcePicker:()=>M.q,DataSourceWithBackend:()=>i.CK,EchoEventType:()=>r.ee,FakeEchoSrv:()=>r.rX,GrafanaBootConfig:()=>m.O,HealthCheckError:()=>i.ZA,HealthStatus:()=>i.QO,HistoryWrapper:()=>l._i,MetaAnalyticsEventName:()=>d.ct,PanelDataErrorView:()=>E.Z,PanelRenderer:()=>P.$,PluginPage:()=>S.T,RefreshEvent:()=>a.U5,StreamingFrameAction:()=>o.T0,SystemJS:()=>p.i3,ThemeChangedEvent:()=>a.hD,TimeRangeUpdatedEvent:()=>a.md,config:()=>m.v,createDataSourcePluginEventProperties:()=>O,createPluginEventProperties:()=>x,createQueryRunner:()=>b.AQ,featureEnabled:()=>y.v,frameToMetricFindValue:()=>u.S9,getAngularLoader:()=>n.w,getAppEvents:()=>a.N$,getBackendSrv:()=>t.i,getDataSourceSrv:()=>c.F,getEchoSrv:()=>r.RP,getGrafanaLiveSrv:()=>o.gj,getLegacyAngularInjector:()=>f.V,getLocationSrv:()=>s.w,getPluginImportUtils:()=>p.bP,getRunRequest:()=>b.Pl,getTemplateSrv:()=>g.J,isExperimentViewEvent:()=>d.mR,isFetchError:()=>t.kW,isInteractionEvent:()=>d.fV,isPageviewEvent:()=>d.Si,loadPluginCss:()=>p.iS,locationSearchToObject:()=>l.Ox,locationService:()=>l.E1,logDebug:()=>v.o7,logError:()=>v.H,logInfo:()=>v.PN,logWarning:()=>v.KE,navigationLogger:()=>l.GQ,registerEchoBackend:()=>r.e6,reportExperimentView:()=>h.SZ,reportInteraction:()=>h.ff,reportMetaAnalytics:()=>h.r_,reportPageview:()=>h.sm,setAngularLoader:()=>n.W,setAppEvents:()=>a.Xw,setBackendSrv:()=>t.jW,setDataSourceSrv:()=>c.w,setEchoSrv:()=>r.tz,setGrafanaLiveSrv:()=>o.cA,setLegacyAngularInjector:()=>f.t,setLocationService:()=>l.ZG,setLocationSrv:()=>s.x,setPluginImportUtils:()=>p.Qf,setQueryRunnerFactory:()=>b.pD,setRunRequest:()=>b.Iw,setTemplateSrv:()=>g.l,toDataQueryError:()=>C.P,toDataQueryResponse:()=>u.z1,usePluginInteractionReporter:()=>A});var t=e(54899),n=e(11484),c=e(86647),s=e(47458),r=e(5494),g=e(40885),f=e(70926),o=e(75118),l=e(37932),a=e(82378),m=e(35645),d=e(75552),p=e(19920),h=e(41818),y=e(66121),v=e(54408),i=e(22069),u=e(32689),P=e(98825),E=e(87670),C=e(77599),b=e(36535),S=e(87221),M=e(53117);function x(I){return{grafana_version:m.v.buildInfo.version,plugin_type:String(I.type),plugin_version:I.info.version,plugin_id:I.id,plugin_name:I.name}}function O(I){return{...x(I.meta),datasource_uid:I.uid}}var L=e(68404),B=e(59417),w=e(61345);const R="grafana_plugin_";function A(){const I=(0,B.g)();return(0,L.useMemo)(()=>{const N=(0,w.v)(I)?O(I.instanceSettings):x(I.meta);return(F,D)=>{if(!U(F))throw new Error(`Interactions reported in plugins should start with: "${R}".`);return(0,h.ff)(F,{...D,...N})}},[I])}function U(I){return I.startsWith(R)&&I.length>R.length}},11484:(H,T,e)=>{"use strict";e.d(T,{W:()=>n,w:()=>c});let t;function n(s){t=s}function c(){return t}},5494:(H,T,e)=>{"use strict";e.d(T,{RP:()=>s,e6:()=>r,ee:()=>t,rX:()=>g,tz:()=>c});var t=(f=>(f.Performance="performance",f.MetaAnalytics="meta-analytics",f.Sentry="sentry",f.Pageview="pageview",f.Interaction="interaction",f.ExperimentView="experimentview",f.GrafanaJavascriptAgent="grafana-javascript-agent",f))(t||{});let n;function c(f){n=f}function s(){return n||(n=new g),n}const r=f=>{s().addBackend(f)};class g{constructor(){this.events=[]}flush(){this.events=[]}addBackend(o){}addEvent(o,l){this.events.push(o)}}},37932:(H,T,e)=>{"use strict";e.d(T,{E1:()=>l,GQ:()=>d,Ox:()=>o,ZG:()=>a,_i:()=>f});var t=e(97594),n=e(27677),c=e(99227),s=e(88383),r=e(73289),g=e(35645);class f{constructor(h){this.history=h||t.lX({basename:g.v.appSubUrl??"/"}),this.partial=this.partial.bind(this),this.push=this.push.bind(this),this.replace=this.replace.bind(this),this.getSearch=this.getSearch.bind(this),this.getHistory=this.getHistory.bind(this),this.getLocation=this.getLocation.bind(this)}getHistory(){return this.history}getSearch(){return new URLSearchParams(this.history.location.search)}partial(h,y){const v=this.history.location,i=this.getSearchObject();for(const P of Object.keys(h))h[P]===null||h[P]===void 0?delete i[P]:i[P]=h[P];const u=n.Cj.renderUrl(v.pathname,i);y?this.history.replace(u,this.history.location.state):this.history.push(u,this.history.location.state)}push(h){this.history.push(h)}replace(h){this.history.replace(h)}reload(){const h=this.history.location.state?.routeReloadCounter;this.history.replace({...this.history.location,state:{routeReloadCounter:h?h+1:1}})}getLocation(){return this.history.location}getSearchObject(){return o(this.history.location.search)}update(h){if((0,c.d)("LocationSrv","update","partial, push or replace"),h.partial&&h.query)this.partial(h.query,h.partial);else{const y={pathname:h.path};h.query&&(y.search=n.Cj.toUrlParams(h.query)),h.replace?this.replace(y):this.push(y)}}}function o(p){let h=typeof p=="number"?String(p):p;return h.length>0?h.startsWith("?")?n.Cj.parseKeyValue(h.substring(1)):n.Cj.parseKeyValue(h):{}}let l=new f;const a=p=>{throw new Error("locationService can be only overriden in test environment")},m=(0,s.h)("Router"),d=m.logger;(0,r.x)("location",l,m)},47458:(H,T,e)=>{"use strict";e.d(T,{w:()=>c,x:()=>n});let t;function n(s){t=s}function c(){return t}},36535:(H,T,e)=>{"use strict";e.d(T,{AQ:()=>c,Iw:()=>r,Pl:()=>g,pD:()=>n});let t;const n=f=>{if(t)throw new Error("Runner should only be set when Grafana is starting.");t=f},c=()=>{if(!t)throw new Error("`createQueryRunner` can only be used after Grafana instance has started.");return t()};let s;function r(f){if(s)throw new Error("runRequest function should only be set once, when Grafana is starting.");s=f}function g(){if(!s)throw new Error("getRunRequest can only be used after Grafana instance has started.");return s}},82378:(H,T,e)=>{"use strict";e.d(T,{EK:()=>r,N$:()=>o,U5:()=>n,Xw:()=>f,hD:()=>c,md:()=>s});var t=e(62316);class n extends t.m{}n.type="refresh";class c extends t.R{}c.type="theme-changed";class s extends t.R{}s.type="time-range-updated";class r extends t.R{}r.type="copy-panel";let g;function f(l){g=l}function o(){return g}},54899:(H,T,e)=>{"use strict";e.d(T,{i:()=>s,jW:()=>c,kW:()=>t});function t(r){return typeof r=="object"&&r!==null&&"status"in r&&"data"in r}let n;const c=r=>{n=r},s=()=>n},86647:(H,T,e)=>{"use strict";e.d(T,{F:()=>c,w:()=>n});let t;function n(s){t=s}function c(){return t}},70926:(H,T,e)=>{"use strict";e.d(T,{V:()=>c,t:()=>n});let t;const n=s=>{t=s},c=()=>t},75118:(H,T,e)=>{"use strict";e.d(T,{T0:()=>t,cA:()=>c,gj:()=>s});var t=(r=>(r.Append="append",r.Replace="replace",r))(t||{});let n;const c=r=>{n=r},s=()=>n},40885:(H,T,e)=>{"use strict";e.d(T,{J:()=>c,l:()=>n});let t;const n=s=>{t=s},c=()=>t},22069:(H,T,e)=>{"use strict";e.d(T,{B9:()=>b,CK:()=>C,PI:()=>S,Pr:()=>i,QO:()=>P,ZA:()=>u,hr:()=>v});var t=e(53786),n=e(3363),c=e(16313),s=e(13016),r=e(94514),g=e(7238),f=e(5916),o=e(62626),l=e(70006),a=e(77345),m=e(35645),d=e(86647),p=e(75118),h=e(54899),y=e(32689);const v=Object.freeze({type:"__expr__",uid:"__expr__",name:"Expression"});function i(M){if(!M)return!1;const x=typeof M=="string"?M:M.type;return x===v.type||x==="-100"}class u extends Error{constructor(x,O){super(x),this.details=O,this.name="HealthCheckError"}}var P=(M=>(M.Unknown="UNKNOWN",M.OK="OK",M.Error="ERROR",M))(P||{}),E=(M=>(M.PluginID="X-Plugin-Id",M.DatasourceUID="X-Datasource-Uid",M.DashboardUID="X-Dashboard-Uid",M.PanelID="X-Panel-Id",M))(E||{});class C extends g.MF{constructor(x){super(x),this.streamOptionsProvider=S}query(x){const{intervalMs:O,maxDataPoints:L,range:B,requestId:w,hideFromInspector:R=!1}=x;let A=x.targets;this.filterQuery&&(A=A.filter(K=>this.filterQuery(K)));let U=!1;const I=new Set,N=new Set,F=A.map(K=>{let z=this.getRef(),Z=this.id,ae=!0;if(i(K.datasource))return U=!0,{...K,datasource:v};if(K.datasource){const J=(0,d.F)().getInstanceSettings(K.datasource,x.scopedVars);if(!J)throw new Error(`Unknown Datasource: ${JSON.stringify(K.datasource)}`);const oe=J.rawRef??(0,f.iU)(J),Ee=J.id;(oe.uid!==z.uid||Z!==Ee)&&(z=oe,Z=Ee,ae=!1)}return z.type?.length&&I.add(z.type),z.uid?.length&&N.add(z.uid),{...ae?this.applyTemplateVariables(K,x.scopedVars):K,datasource:z,datasourceId:Z,intervalMs:O,maxDataPoints:L}});if(!F.length)return(0,t.of)({data:[]});const D={queries:F};if(B&&(D.range=B,D.from=B.from.valueOf().toString(),D.to=B.to.valueOf().toString()),m.v.featureToggles.queryOverLive)return(0,p.gj)().getQueryData({request:x,body:D});let Y="/api/ds/query";U&&(Y+="?expression=true");const j={};return j["X-Plugin-Id"]=Array.from(I).join(", "),j["X-Datasource-Uid"]=Array.from(N).join(", "),x.dashboardUID&&(j["X-Dashboard-Uid"]=x.dashboardUID),x.panelId&&(j["X-Panel-Id"]=`${x.panelId}`),(0,h.i)().fetch({url:Y,method:"POST",data:D,requestId:w,hideFromInspector:R,headers:j}).pipe((0,s.w)(K=>{const z=(0,y.z1)(K,F);return z.data?.length&&z.data.find(Z=>Z.meta?.channel)?b(z,x,this.streamOptionsProvider):(0,t.of)(z)}),(0,r.K)(K=>(0,t.of)((0,y.z1)(K))))}getRequestHeaders(){const x={};return x["X-Plugin-Id"]=this.type,x["X-Datasource-Uid"]=this.uid,x}interpolateVariablesInQueries(x,O){return x.map(L=>this.applyTemplateVariables(L,O))}applyTemplateVariables(x,O){return x}async getResource(x,O,L){const B=this.getRequestHeaders();return(await(0,n.n)((0,h.i)().fetch({...L,method:"GET",headers:L?.headers?{...L.headers,...B}:B,params:O??L?.params,url:`/api/datasources/uid/${this.uid}/resources/${x}`}))).data}async postResource(x,O,L){const B=this.getRequestHeaders();return(await(0,n.n)((0,h.i)().fetch({...L,method:"POST",headers:L?.headers?{...L.headers,...B}:B,data:O??{...O},url:`/api/datasources/uid/${this.uid}/resources/${x}`}))).data}async callHealthCheck(){return(0,n.n)((0,h.i)().fetch({method:"GET",url:`/api/datasources/uid/${this.uid}/health`,showErrorAlert:!1,headers:this.getRequestHeaders()})).then(x=>x.data).catch(x=>x.data)}async testDatasource(){return this.callHealthCheck().then(x=>{if(x.status==="OK")return{status:"success",message:x.message};throw new u(x.message,x.details)})}}function b(M,x,O){const L=(0,p.gj)();if(!L)return(0,t.of)(M);const B=[],w=[];for(const R of M.data){const A=(0,o.H7)(R.meta?.channel);if(A){const U=R;w.push(L.getDataStream({addr:A,buffer:O(x,U),frame:(0,l.Y)(R)}))}else B.push(R)}return B.length&&w.push((0,t.of)({...M,data:B})),w.length===1?w[0]:(0,c.T)(...w)}const S=(M,x)=>{const O={maxLength:M.maxDataPoints??500,action:p.T0.Append};return M.rangeRaw?.to==="now"&&(O.maxDelta=M.range.to.valueOf()-M.range.from.valueOf()),O};C=(0,a.s)(C)},66121:(H,T,e)=>{"use strict";e.d(T,{v:()=>n});var t=e(35645);const n=c=>{const{enabledFeatures:s}=t.v.licenseInfo;return s&&s[c]}},54408:(H,T,e)=>{"use strict";e.d(T,{H:()=>l,KE:()=>f,PN:()=>g,o7:()=>o});var t=e(37916),n=e(48606),c=e(53843),s=e(56986),r=e(35645);function g(a,m){r.v.grafanaJavascriptAgent.enabled&&c.s.api.pushLog([a],{level:s.in.INFO,context:m}),r.v.sentry.enabled&&(0,t.uT)(a,{level:n.z.Info,contexts:m})}function f(a,m){r.v.grafanaJavascriptAgent.enabled&&c.s.api.pushLog([a],{level:s.in.WARN,context:m}),r.v.sentry.enabled&&(0,t.uT)(a,{level:n.z.Warning,contexts:m})}function o(a,m){r.v.grafanaJavascriptAgent.enabled&&c.s.api.pushLog([a],{level:s.in.DEBUG,context:m}),r.v.sentry.enabled&&(0,t.uT)(a,{level:n.z.Debug,contexts:m})}function l(a,m){r.v.grafanaJavascriptAgent.enabled&&c.s.api.pushLog([a.message],{level:s.in.ERROR,context:m}),r.v.sentry.enabled&&(0,t.Tb)(a,{contexts:m})}},19920:(H,T,e)=>{"use strict";e.d(T,{Qf:()=>f,bP:()=>o,i3:()=>s,iS:()=>r});var t=e(59587),n=e.n(t),c=e(35645);const s=n();function r(l){const a=c.v.bootData.user.lightTheme?l.light:l.dark;return s.import(`${a}!css`)}let g;function f(l){if(g)throw new Error("pluginImportUtils should only be set once, when Grafana is starting.");g=l}function o(){if(!g)throw new Error("pluginImportUtils can only be used after Grafana instance has started.");return g}},32689:(H,T,e)=>{"use strict";e.d(T,{S9:()=>m,z1:()=>f});var t=e(49922),n=e(70006),c=e(16911),s=e(14582),r=e(77599);const g={severity:"info",text:"Cached response"};function f(d,p){const h={data:[],state:t.Gu.Done};if(d.data?.results){const y=d.data.results,v=p?.length?p.map(P=>P.refId):Object.keys(y),i=o(d),u=[];for(const P of v){const E=y[P];E&&(E.refId=P,u.push(E))}for(const P of u){if(P.error&&(h.error||(h.error={refId:P.refId,message:P.error},h.state=t.Gu.Error)),P.frames?.length){for(let E of P.frames){i&&(E=l(E));const C=(0,n.vP)(E);C.refId||(C.refId=P.refId),h.data.push(C)}continue}if(P.series?.length)for(const E of P.series)E.refId||(E.refId=P.refId),h.data.push((0,c.g0)(E));if(P.tables?.length)for(const E of P.tables)E.refId||(E.refId=P.refId),h.data.push((0,c.g0)(E))}}return d.status&&d.status!==200&&(h.state!==t.Gu.Error&&(h.state=t.Gu.Error),h.error||(h.error=(0,r.P)(d))),h}function o(d){const p=d?.headers;return!p||!p.get?!1:p.get("X-Cache")==="HIT"}function l(d){return{...d,schema:{...d.schema,fields:[...d.schema?.fields??[]],meta:{...d.schema?.meta,notices:[...d.schema?.meta?.notices??[],g],isCachedResponse:!0}}}}function a(d){const p=f(d);if(p.error?.data?.message)return{status:"error",message:p.error.data.message,details:p.error?.data?.error?{message:p.error.data.error}:void 0};if(p.error?.refId&&p.error?.message)return{status:"error",message:p.error.message};throw d}function m(d){if(!d||!d.length)return[];const p=[];let h=d.fields.find(y=>y.type===s.fS.string);if(h||(h=d.fields.find(y=>y.type!==s.fS.time)),h)for(let y=0;y<h.values.length;y++)p.push({text:""+h.values.get(y)});return p}},45253:(H,T,e)=>{"use strict";e.d(T,{b:()=>l});var t=e(52423),n=e(68404),c=e(68183),s=e(72648),r=e(31403),g=e(39904),f=e(8180);function o(m){switch(m){case"error":case"warning":return"exclamation-triangle";case"info":return"info-circle";case"success":return"check"}}const l=n.forwardRef(({title:m,onRemove:d,children:p,buttonContent:h,elevated:y,bottomSpacing:v,topSpacing:i,className:u,severity:P="error",...E},C)=>{const b=(0,s.l4)(),S=Boolean(m),M=a(b,P,S,y,v,i),x={error:"alert",warning:"alert",info:"status",success:"status"},O=E.role||x[P],L=E["aria-label"]||m;return n.createElement("div",{ref:C,className:(0,t.cx)(M.alert,u),"data-testid":c.wl.components.Alert.alertV2(P),role:O,"aria-label":L,...E},n.createElement("div",{className:M.icon},n.createElement(g.J,{size:"xl",name:o(P)})),n.createElement("div",{className:M.body},n.createElement("div",{className:M.title},m),p&&n.createElement("div",{className:M.content},p)),d&&!h&&n.createElement("div",{className:M.close},n.createElement(f.h,{"aria-label":"Close alert",name:"times",onClick:d,size:"lg",type:"button"})),d&&h&&n.createElement("div",{className:M.buttonWrapper},n.createElement(r.zx,{"aria-label":"Close alert",variant:"secondary",onClick:d,type:"button"},h)))});l.displayName="Alert";const a=(m,d,p,h,y,v)=>{const i=m.colors[d],u=m.shape.borderRadius();return{alert:t.css`
      flex-grow: 1;
      position: relative;
      border-radius: ${u};
      display: flex;
      flex-direction: row;
      align-items: stretch;
      background: ${m.colors.background.secondary};
      box-shadow: ${h?m.shadows.z3:m.shadows.z1};
      margin-bottom: ${m.spacing(y??2)};
      margin-top: ${m.spacing(v??0)};

      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: ${m.colors.background.primary};
        z-index: -1;
      }
    `,icon:t.css`
      padding: ${m.spacing(2,3)};
      background: ${i.main};
      border-radius: ${u} 0 0 ${u};
      color: ${i.contrastText};
      display: flex;
      align-items: center;
      justify-content: center;
    `,title:t.css`
      font-weight: ${m.typography.fontWeightMedium};
      color: ${m.colors.text.primary};
    `,body:t.css`
      color: ${m.colors.text.secondary};
      padding: ${m.spacing(2)};
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      overflow-wrap: break-word;
      word-break: break-word;
    `,content:t.css`
      color: ${m.colors.text.secondary};
      padding-top: ${p?m.spacing(1):0};
      max-height: 50vh;
      overflow-y: auto;
    `,buttonWrapper:t.css`
      padding: ${m.spacing(1)};
      background: none;
      display: flex;
      align-items: center;
    `,close:t.css`
      padding: ${m.spacing(2,1)};
      background: none;
      display: flex;
    `}}},19985:(H,T,e)=>{"use strict";e.d(T,{C:()=>l});var t=e(52423),n=e(68404),c=e(35008),s=e.n(c),r=e(72648),g=e(39904),f=e(52081),o=e(61860);const l=n.memo(({icon:m,color:d,text:p,tooltip:h,className:y,...v})=>{const i=(0,r.wW)((0,n.useCallback)(P=>a(P,d),[d])),u=n.createElement("div",{className:(0,t.cx)(i.wrapper,y),...v},n.createElement(f.Lh,{align:"center",spacing:"xs"},m&&n.createElement(g.J,{name:m,size:"sm"}),n.createElement("span",null,p)));return h?n.createElement(o.u,{content:h,placement:"auto"},u):u});l.displayName="Badge";const a=(m,d)=>{let p=m.visualization.getColorByName(d),h="",y="",v="";return m.isDark?(y=s()(p).setAlpha(.15).toString(),h=s()(p).darken(30).toString(),v=s()(p).lighten(15).toString()):(y=s()(p).setAlpha(.15).toString(),h=s()(p).lighten(20).toString(),v=s()(p).darken(20).toString()),{wrapper:t.css`
      font-size: ${m.typography.size.sm};
      display: inline-flex;
      padding: 1px 4px;
      border-radius: 3px;
      background: ${y};
      border: 1px solid ${h};
      color: ${v};
      font-weight: ${m.typography.fontWeightRegular};

      > span {
        position: relative;
        top: 1px;
        margin-left: 2px;
      }
    `}}},19670:(H,T,e)=>{"use strict";e.d(T,{xf:()=>b});var t=e(52423),n=e(68404),c=e(35008),s=e.n(c),r=e(66847),g=e(20251),f=e(24177),o=e(20112),l=e(66926),a=e(425),m=e(68183),d=e(40538),p=e(4176),h=e(31403),y=e(72777);const v=18,i=50,u=150,P=1.5,E=1,C=10;class b extends n.PureComponent{render(){const{onClick:N,className:F,theme:D}=this.props,{title:Y}=this.props.value,j=x(this.props);return N?n.createElement("button",{type:"button",style:j.wrapper,onClick:N,className:(0,t.cx)((0,h.gN)(D),F)},n.createElement("div",{style:j.title},Y),this.renderBarAndValue()):n.createElement("div",{style:j.wrapper,className:F},Y&&n.createElement("div",{style:j.title},Y),this.renderBarAndValue())}renderBarAndValue(){switch(this.props.displayMode){case"lcd":return this.renderRetroBars();case"basic":case"gradient":default:return this.renderBasicAndGradientBars()}}renderBasicAndGradientBars(){const{value:N,showUnfilled:F}=this.props,D=w(this.props);return n.createElement("div",{style:D.wrapper},n.createElement(y.W,{"data-testid":m.wl.components.Panels.Visualization.BarGauge.valueV2,value:N,style:D.value}),F&&n.createElement("div",{style:D.emptyBar}),n.createElement("div",{style:D.bar}))}renderRetroBars(){const{display:N,field:F,value:D,itemSpacing:Y,alignmentFactors:j,orientation:K,lcdCellWidth:z,text:Z}=this.props,{valueHeight:ae,valueWidth:J,maxBarHeight:oe,maxBarWidth:Ee,wrapperWidth:me,wrapperHeight:re}=O(this.props),le=F.min??r.Hx,pe=F.max??r.Z3,ee=S(K),se=pe-le,Q=ee?oe:Ee,G=Y,q=Math.floor(Q/z),X=Math.floor((Q-G*q)/q),de=A(this.props),ke=U(j||D,de,J,ae,K,Z),He={width:`${me}px`,height:`${re}px`,display:"flex"};ee?(He.flexDirection="column-reverse",He.alignItems="center"):(He.flexDirection="row",He.alignItems="center",ke.justifyContent="flex-end");const ue=[];for(let Oe=0;Oe<q;Oe++){const Fe=le+se/q*Oe,Ie=L(Fe,D,N),we={borderRadius:"2px"};Ie.isLit?we.backgroundImage=`radial-gradient(${Ie.background} 10%, ${Ie.backgroundShade})`:we.backgroundColor=Ie.background,ee?(we.height=`${X}px`,we.width=`${Ee}px`,we.marginTop=`${G}px`):(we.width=`${X}px`,we.height=`${oe}px`,we.marginRight=`${G}px`),ue.push(n.createElement("div",{key:Oe.toString(),style:we}))}return n.createElement("div",{style:He},ue,n.createElement(y.W,{"data-testid":m.wl.components.Panels.Visualization.BarGauge.valueV2,value:D,style:ke}))}}b.defaultProps={lcdCellWidth:12,value:{text:"100",numeric:100},displayMode:d.QH.Gradient,orientation:g.wm.Horizontal,field:{min:0,max:100,thresholds:{mode:f.H.Absolute,steps:[]}},itemSpacing:8,showUnfilled:!0};function S(I){return I===g.wm.Vertical}function M(I){const{height:N,width:F,alignmentFactors:D,orientation:Y,text:j}=I,K=D?D.title:I.value.title;if(!K)return{fontSize:0,width:0,height:0,placement:"above"};if(S(Y)){const Ee=j?.titleSize??14;return{fontSize:Ee,width:F,height:Ee*P,placement:"below"}}if(N>40){if(j?.titleSize)return{fontSize:j?.titleSize,width:0,height:j.titleSize*P,placement:"above"};const me=Math.max(Math.min(N*.45,i),17);return{fontSize:me/P,width:0,height:me,placement:"above"}}const ae=Math.max(N*.6,v)/P,J=(0,p.X1)(K,ae),oe=Math.min(J.width+15,F*.4);return{fontSize:j?.titleSize??ae,height:0,width:oe,placement:"left"}}function x(I){const N={display:"flex",overflow:"hidden",width:"100%"},F=M(I),D={fontSize:`${F.fontSize}px`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",alignItems:"center",alignSelf:"center"};return S(I.orientation)?(N.flexDirection="column-reverse",D.textAlign="center"):F.placement==="above"?N.flexDirection="column":(N.flexDirection="row",D.width=`${F.width}px`,D.textAlign="right",D.paddingRight="10px"),{wrapper:N,title:D}}function O(I){const{height:N,width:F,orientation:D,text:Y,alignmentFactors:j}=I,K=M(I),z=j??I.value,Z=(0,o.zc)(z);let ae=0,J=0,oe=0,Ee=0,me=0,re=0;const le=Y?.valueSize??Math.max(K.fontSize,12),ee=(0,p.X1)(Z,le).width+C*2;return S(D)?(Y?.valueSize?oe=Y.valueSize*E:oe=Math.min(Math.max(N*.1,v),i),Ee=F,ae=N-(K.height+oe),J=F,me=F,re=N-K.height):(oe=N-K.height,Ee=Math.max(Math.min(F*.2,u),ee),ae=N-K.height,J=F-Ee-K.width,K.placement==="above"?(me=F,re=N-K.height):(me=F-K.width,re=N)),{valueWidth:Ee,valueHeight:oe,maxBarWidth:J,maxBarHeight:ae,wrapperHeight:re,wrapperWidth:me}}function L(I,N,F){if(I===null)return{background:l.R,border:l.R};const D=F?F(I).color:null;return D?N===null||isNaN(N.numeric)||I!==null&&I>N.numeric?{background:s()(D).setAlpha(.18).toRgbString(),border:"transparent",isLit:!1}:{background:s()(D).setAlpha(.95).toRgbString(),backgroundShade:s()(D).setAlpha(.55).toRgbString(),border:s()(D).setAlpha(.9).toRgbString(),isLit:!0}:{background:l.R,border:l.R}}function B(I,N,F){const D=Math.min((I-N)/(F-N),1);return isNaN(D)?0:D}function w(I){const{displayMode:N,field:F,value:D,alignmentFactors:Y,orientation:j,theme:K,text:z}=I,{valueWidth:Z,valueHeight:ae,maxBarHeight:J,maxBarWidth:oe}=O(I),Ee=F.min??r.Hx,me=F.max??r.Z3,re=B(D.numeric,Ee,me),le=A(I),ee=U(Y||D,le,Z,ae,j,z),se=N==="basic",Q={display:"flex",flexGrow:1},G={borderRadius:"3px",position:"relative",zIndex:1},q={background:K.colors.background.secondary,flexGrow:1,display:"flex",borderRadius:"3px",position:"relative"};if(S(j)){const X=Math.max(re*J,1);Q.flexDirection="column",Q.justifyContent="flex-end",G.transition="height 1s",G.height=`${X}px`,G.width=`${oe}px`,q.bottom="-3px",q.width=`${Z}px`,se?(G.background=`${s()(le).setAlpha(.35).toRgbString()}`,G.borderTop=`2px solid ${le}`):G.background=R(I,J)}else{const X=Math.max(re*oe,1);Q.flexDirection="row-reverse",Q.justifyContent="flex-end",Q.alignItems="stretch",G.transition="width 1s",G.height=`${J}px`,G.width=`${X}px`,q.left="-3px",q.height=`${ae}px`,se?(G.background=`${s()(le).setAlpha(.35).toRgbString()}`,G.borderRight=`2px solid ${le}`):G.background=R(I,oe)}return{wrapper:Q,bar:G,value:ee,emptyBar:q}}function R(I,N){const{field:F,value:D,orientation:Y,theme:j}=I,K=S(Y)?"0deg":"90deg",z=F.min,Z=F.max;let ae="",J=0,oe=(0,a.QY)(F.color?.mode);if(oe.id===l.S.Thresholds){const Ee=F.thresholds;for(let me=0;me<Ee.steps.length;me++){const re=Ee.steps[me],le=I.theme.visualization.getColorByName(re.color),pe=Ee.mode===f.H.Percentage?re.value/100:B(re.value,z,Z),ee=pe*N,se=Math.round(ee-(ee-J)/2),Q=Ee.mode===f.H.Percentage?z+(Z-z)*pe:re.value;if(ae==="")ae=`linear-gradient(${K}, ${le}, ${le}`;else{if(D.numeric<Q)break;J=ee,ae+=` ${se}px, ${le}`}}return ae+")"}if(oe.isContinuous&&oe.getColors){const Ee=oe.getColors(j);for(let me=0;me<Ee.length;me++){const re=Ee[me];if(ae==="")ae=`linear-gradient(${K}, ${re} 0px`;else{const pe=me/(Ee.length-1)*N;ae+=`, ${re} ${pe}px`}}return ae+")"}return D.color??l.R}function A(I){const{value:N}=I;return N.color?N.color:l.R}function U(I,N,F,D,Y,j){const K={color:N,height:`${D}px`,width:`${F}px`,display:"flex",alignItems:"center",lineHeight:E};let z=F;const Z=(0,o.zc)(I);return S(Y)?(K.fontSize=j?.valueSize??(0,p.MX)(Z,z,D,E),K.justifyContent="center"):(K.fontSize=j?.valueSize??(0,p.MX)(Z,z-C*2,D,E),K.justifyContent="flex-end",K.paddingLeft=`${C}px`,K.paddingRight=`${C}px`,z-=C),K}},57426:(H,T,e)=>{"use strict";e.d(T,{w6:()=>B,pc:()=>M,IG:()=>x,ap:()=>O,jG:()=>L});var t=e(52423),n=e(68404),c=e(31403),s=e(72777),r=e(35008),g=e.n(r),f=e(20251),o=e(14582),l=e(20112),a=e(40538),m=e(16514),d=e(4176),p=e(67307);const h=1.2,y=30;class v{constructor(R){this.props=R;const{width:A,height:U,value:I,text:N}=R;this.valueColor=I.color??"gray",this.panelPadding=U>100?12:8,this.textValues=S(R),this.justifyCenter=b(R.justifyMode,this.textValues.title),this.valueToAlignTo=this.textValues.valueToAlignTo,this.titleToAlignTo=this.textValues.titleToAlignTo,this.titleFontSize=0,this.valueFontSize=0,this.chartHeight=0,this.chartWidth=0,this.maxTextWidth=A-this.panelPadding*2,this.maxTextHeight=U-this.panelPadding*2,N&&(N.titleSize&&(this.titleFontSize=N.titleSize,this.titleToAlignTo=void 0),N.valueSize&&(this.valueFontSize=N.valueSize,this.valueToAlignTo=""))}getTitleStyles(){const R={fontSize:`${this.titleFontSize}px`,lineHeight:h};return this.props.parentOrientation===f.wm.Horizontal&&this.justifyCenter&&(R.paddingRight="0.75ch"),this.props.colorMode===M.Background&&(R.color=(0,m.bM)(this.valueColor,this.props.theme.isDark)),R}getValueStyles(){const R={fontSize:this.valueFontSize,fontWeight:500,lineHeight:h,position:"relative",zIndex:1};switch(this.justifyCenter&&(R.textAlign="center"),this.props.colorMode){case M.Value:R.color=this.valueColor;break;case M.Background:R.color=(0,m.bM)(this.valueColor,this.props.theme.isDark);break;case M.None:R.color=this.props.theme.colors.text.primary;break}return R}getValueAndTitleContainerStyles(){const R={display:"flex"};return this.justifyCenter&&(R.alignItems="center",R.justifyContent="center",R.flexGrow=1),R}getPanelStyles(){const{width:R,height:A,theme:U,colorMode:I}=this.props,N={width:`${R}px`,height:`${A}px`,padding:`${this.panelPadding}px`,borderRadius:"3px",position:"relative",display:"flex"},F=U.isDark?1:-.7;switch(I){case M.Background:const D=g()(this.valueColor).darken(15*F).spin(8).toRgbString(),Y=g()(this.valueColor).darken(5*F).spin(-8).toRgbString();N.background=`linear-gradient(120deg, ${D}, ${Y})`;break;case M.Value:N.background="transparent";break}return this.justifyCenter&&(N.alignItems="center",N.flexDirection="row"),N}renderChart(){const{sparkline:R,colorMode:A}=this.props;if(!R||R.y?.type!==o.fS.number)return null;let U,I;switch(A){case M.Background:U="rgba(255,255,255,0.4)",I=g()(this.valueColor).brighten(40).toRgbString();break;case M.None:case M.Value:default:I=this.valueColor,U=g()(this.valueColor).setAlpha(.2).toRgbString();break}const N={custom:{drawStyle:a.l8.Line,lineWidth:1,fillColor:U,lineColor:I}};return n.createElement("div",{style:this.getChartStyles()},n.createElement(p.b,{height:this.chartHeight,width:this.chartWidth,sparkline:R,config:N,theme:this.props.theme}))}getChartStyles(){return{position:"absolute",right:0,bottom:0}}}class i extends v{constructor(R){super(R);const A=this.titleToAlignTo?.length?.3:1;this.valueToAlignTo.length&&(this.valueFontSize=(0,d.MX)(this.valueToAlignTo,this.maxTextWidth*A,this.maxTextHeight,h)),this.titleToAlignTo?.length&&(this.titleFontSize=(0,d.MX)(this.titleToAlignTo,this.maxTextWidth*.6,this.maxTextHeight,h,y),this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const R=super.getValueAndTitleContainerStyles();return R.flexDirection="row",R.alignItems="center",R.flexGrow=1,this.justifyCenter||(R.justifyContent="space-between"),R}renderChart(){return null}getPanelStyles(){const R=super.getPanelStyles();return R.alignItems="center",R}}class u extends v{constructor(R){super(R);const{width:A,height:U}=R,I=.5,N=.6,F=1-N,D=.4;this.chartWidth=A,this.chartHeight=U*I,this.titleToAlignTo?.length&&(this.titleFontSize=(0,d.MX)(this.titleToAlignTo,this.maxTextWidth*N,this.maxTextHeight*D,h,y)),this.valueToAlignTo.length&&(this.valueFontSize=(0,d.MX)(this.valueToAlignTo,this.maxTextWidth*F,this.maxTextHeight*I,h))}getValueAndTitleContainerStyles(){const R=super.getValueAndTitleContainerStyles();return R.flexDirection="row",R.flexGrow=1,this.justifyCenter||(R.justifyContent="space-between"),R}getPanelStyles(){const R=super.getPanelStyles();return R.flexDirection="row",R.justifyContent="space-between",R}}class P extends v{constructor(R){super(R);const{width:A,height:U}=R,I=.15,N=.25;let F=0;this.chartHeight=U*N,this.chartWidth=A,this.titleToAlignTo?.length&&(this.titleFontSize=(0,d.MX)(this.titleToAlignTo,this.maxTextWidth,U*I,h,y),F=this.titleFontSize*h),this.valueToAlignTo.length&&(this.valueFontSize=(0,d.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-this.chartHeight-F,h)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize)),this.chartHeight=U-this.titleFontSize*h-this.valueFontSize*h}getValueAndTitleContainerStyles(){const R=super.getValueAndTitleContainerStyles();return R.flexDirection="column",R.justifyContent="center",R}getPanelStyles(){const R=super.getPanelStyles();return R.flexDirection="column",R}}class E extends v{constructor(R){super(R);const{height:A}=R,U=.15;let I=0;this.titleToAlignTo?.length&&(this.titleFontSize=(0,d.MX)(this.titleToAlignTo,this.maxTextWidth,A*U,h,y),I=this.titleFontSize*h),this.valueToAlignTo.length&&(this.valueFontSize=(0,d.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-I,h)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const R=super.getValueAndTitleContainerStyles();return R.flexDirection="column",R.flexGrow=1,R}renderChart(){return null}getPanelStyles(){const R=super.getPanelStyles();return R.alignItems="center",R}}function C(w){const{width:R,height:A,sparkline:U}=w;return R/A>2.5?A>50&&U&&U.y.values.length>1?new u(w):new i(w):A>100&&U&&U.y.values.length>1?new P(w):new E(w)}function b(w,R){return w===O.Center?!0:(R??"").length===0}function S(w){const{value:R,alignmentFactors:A,count:U}=w;let{textMode:I}=w;const N=A?A.title:R.title,F=(0,l.zc)(A||R);switch(I===L.Auto&&(U??1)===1&&(I=L.Value),I){case L.Name:return{...R,title:void 0,prefix:void 0,suffix:void 0,text:R.title||"",titleToAlignTo:void 0,valueToAlignTo:N??"",tooltip:(0,l.zc)(R)};case L.Value:return{...R,title:void 0,titleToAlignTo:void 0,valueToAlignTo:F,tooltip:R.title};case L.None:return{numeric:R.numeric,color:R.color,title:void 0,text:"",titleToAlignTo:void 0,valueToAlignTo:"1",tooltip:`Name: ${R.title}
Value: ${(0,l.zc)(R)}`};case L.ValueAndName:default:return{...R,titleToAlignTo:N,valueToAlignTo:F}}}var M=(w=>(w.Value="value",w.Background="background",w.None="none",w))(M||{}),x=(w=>(w.None="none",w.Line="line",w.Area="area",w))(x||{}),O=(w=>(w.Auto="auto",w.Center="center",w))(O||{}),L=(w=>(w.Auto="auto",w.Value="value",w.ValueAndName="value_and_name",w.Name="name",w.None="none",w))(L||{});class B extends n.PureComponent{render(){const{onClick:R,className:A,hasLinks:U,theme:I}=this.props,N=C(this.props),F=N.getPanelStyles(),D=N.getValueAndTitleContainerStyles(),Y=N.getValueStyles(),j=N.getTitleStyles(),K=N.textValues,z=U?void 0:K.tooltip;return R?n.createElement("button",{type:"button",className:(0,t.cx)((0,c.gN)(I),A),style:F,onClick:R,title:z},n.createElement("div",{style:D},K.title&&n.createElement("div",{style:j},K.title),n.createElement(s.W,{value:K,style:Y})),N.renderChart()):n.createElement("div",{className:A,style:F,title:z},n.createElement("div",{style:D},K.title&&n.createElement("div",{style:j},K.title),n.createElement(s.W,{value:K,style:Y})),N.renderChart())}}B.defaultProps={justifyMode:"auto"}},85951:(H,T,e)=>{"use strict";e.d(T,{_:()=>f});var t=e(52423),n=e(68404),c=e(14677),s=e.n(c),r=e(72648),g=e(69636);const f=(0,n.forwardRef)(({name:l,value:a,hidden:m,facets:d,onClick:p,className:h,loading:y,searchTerm:v,active:i,style:u,title:P,highlightParts:E,...C},b)=>{const S=(0,r.l4)(),M=o(S),x=v?[v]:[],O=(0,n.useCallback)(B=>{p&&!m&&p(l,a,B)},[p,l,m,a]);let L=a||l;return d&&(L=`${L} (${d})`),n.createElement("button",{key:L,ref:b,onClick:O,style:u,title:P||L,type:"button",role:"option","aria-selected":!!i,className:(0,t.cx)(M.base,i&&M.active,y&&M.loading,m&&M.hidden,h,p&&!m&&M.hover),...C},E!==void 0?n.createElement(g.H,{text:L,highlightClassName:M.matchHighLight,highlightParts:E}):n.createElement(s(),{textToHighlight:L,searchWords:x,autoEscape:!0,highlightClassName:M.matchHighLight}))});f.displayName="Label";const o=l=>({base:t.css`
    display: inline-block;
    cursor: pointer;
    font-size: ${l.typography.size.sm};
    line-height: ${l.typography.bodySmall.lineHeight};
    background-color: ${l.colors.background.secondary};
    color: ${l.colors.text.primary};
    white-space: nowrap;
    text-shadow: none;
    padding: ${l.spacing(.5)};
    border-radius: ${l.shape.borderRadius()};
    border: none;
    margin-right: ${l.spacing(1)};
    margin-bottom: ${l.spacing(.5)};
  `,loading:t.css`
    font-weight: ${l.typography.fontWeightMedium};
    background-color: ${l.colors.primary.shade};
    color: ${l.colors.text.primary};
    animation: pulse 3s ease-out 0s infinite normal forwards;
    @keyframes pulse {
      0% {
        color: ${l.colors.text.primary};
      }
      50% {
        color: ${l.colors.text.secondary};
      }
      100% {
        color: ${l.colors.text.disabled};
      }
    }
  `,active:t.css`
    font-weight: ${l.typography.fontWeightMedium};
    background-color: ${l.colors.primary.main};
    color: ${l.colors.primary.contrastText};
  `,matchHighLight:t.css`
    background: inherit;
    color: ${l.components.textHighlight.text};
    background-color: ${l.components.textHighlight.background};
  `,hidden:t.css`
    opacity: 0.6;
    cursor: default;
    border: 1px solid transparent;
  `,hover:t.css`
    &:hover {
      opacity: 0.85;
      cursor: pointer;
    }
  `})},31403:(H,T,e)=>{"use strict";e.d(T,{Qj:()=>d,_7:()=>u,c9:()=>v,fW:()=>p,gN:()=>i,zx:()=>m});var t=e(52423),n=e(68404),c=e(64724),s=e(72648),r=e(85419),g=e(73267),f=e(39904),o=e(61860);const l=null,a=null,m=n.forwardRef(({variant:P="primary",size:E="md",fill:C="solid",icon:b,fullWidth:S,children:M,className:x,type:O="button",...L},B)=>{const w=(0,s.l4)(),R=p({theme:w,size:E,variant:P,fill:C,fullWidth:S,iconOnly:!M});return n.createElement("button",{className:(0,t.cx)(R.button,x),type:O,...L,ref:B},b&&n.createElement(f.J,{name:b,size:E,className:R.icon}),M&&n.createElement("span",{className:R.content},M))});m.displayName="Button";const d=n.forwardRef(({variant:P="primary",size:E="md",fill:C="solid",icon:b,fullWidth:S,children:M,className:x,onBlur:O,onFocus:L,disabled:B,tooltip:w,tooltipPlacement:R,...A},U)=>{const I=(0,s.l4)(),N=p({theme:I,fullWidth:S,size:E,variant:P,fill:C,iconOnly:!M}),F=(0,t.cx)(N.button,{[(0,t.css)(N.disabled,{pointerEvents:"none"})]:B},x),D=n.createElement("a",{className:F,...A,tabIndex:B?-1:0,ref:U},b&&n.createElement(f.J,{name:b,size:E,className:N.icon}),M&&n.createElement("span",{className:N.content},M));return w?n.createElement(o.u,{content:w,placement:R},D):D});d.displayName="LinkButton";const p=P=>{const{theme:E,variant:C,fill:b="solid",size:S,iconOnly:M,fullWidth:x}=P,{height:O,padding:L,fontSize:B}=(0,g.iL)(S,E),w=v(E,C,b),R=y(E,C,b),A=(0,r.getFocusStyles)(E),U=E.spacing.gridSize*L-1;return{button:(0,t.css)({label:"button",display:"inline-flex",alignItems:"center",fontSize:B,fontWeight:E.typography.fontWeightMedium,fontFamily:E.typography.fontFamily,padding:`0 ${U}px`,height:E.spacing(O),lineHeight:`${E.spacing.gridSize*O-2}px`,verticalAlign:"middle",cursor:"pointer",borderRadius:E.shape.borderRadius(1),"&:focus":A,"&:focus-visible":A,"&:focus:not(:focus-visible)":(0,r.getMouseFocusStyles)(E),...x&&{flexGrow:1,justifyContent:"center"},...w,":disabled":R,"&[disabled]":R}),disabled:(0,t.css)(R),img:t.css`
      width: 16px;
      height: 16px;
      margin: ${E.spacing(0,1,0,.5)};
    `,icon:M?(0,t.css)({marginRight:E.spacing(-L/2),marginLeft:E.spacing(-L/2)}):(0,t.css)({marginRight:E.spacing(L/2)}),content:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      white-space: nowrap;
      height: 100%;
    `}};function h(P,E,C){return C==="outline"?{background:"transparent",color:E.text,border:`1px solid ${E.border}`,transition:P.transitions.create(["background-color","border-color","color"],{duration:P.transitions.duration.short}),"&:hover":{background:c.alpha(E.main,P.colors.action.hoverOpacity),borderColor:P.colors.emphasize(E.border,.25),color:E.text}}:C==="text"?{background:"transparent",color:E.text,border:"1px solid transparent",transition:P.transitions.create(["background-color","color"],{duration:P.transitions.duration.short}),"&:focus":{outline:"none",textDecoration:"none"},"&:hover":{background:c.alpha(E.shade,P.colors.action.hoverOpacity),textDecoration:"none"}}:{background:E.main,color:E.contrastText,border:"1px solid transparent",transition:P.transitions.create(["background-color","box-shadow","border-color","color"],{duration:P.transitions.duration.short}),"&:hover":{background:E.shade,color:E.contrastText,boxShadow:P.shadows.z1}}}function y(P,E,C){const b={cursor:"not-allowed",boxShadow:"none",color:P.colors.text.disabled,transition:"none"};return C==="text"?{...b,background:"transparent",border:"1px solid transparent"}:C==="outline"?{...b,background:"transparent",border:`1px solid ${P.colors.action.disabledText}`}:{...b,background:P.colors.action.disabledBackground,border:"1px solid transparent"}}function v(P,E,C){switch(E){case"secondary":return h(P,P.colors.secondary,C);case"destructive":return h(P,P.colors.error,C);case"success":return h(P,P.colors.success,C);case"primary":default:return h(P,P.colors.primary,C)}}const i=P=>t.css`
    background: transparent;
    color: ${P.colors.text.primary};
    border: none;
    padding: 0;
  `,u=P=>t.css`
    background: transparent;
    border: none;
    padding: 0;
    font-family: inherit;
    color: inherit;
    height: 100%;
    &:hover {
      background: transparent;
      color: inherit;
    }
  `},26202:(H,T,e)=>{"use strict";e.d(T,{h:()=>s});var t=e(52423),n=e(68404),c=e(72648);const s=(0,n.forwardRef)(({className:g,children:f,...o},l)=>{const a=(0,c.wW)(r);return n.createElement("div",{ref:l,className:(0,t.cx)("button-group",a.wrapper,g),...o},f)});s.displayName="ButtonGroup";const r=g=>({wrapper:t.css`
    display: flex;

    > .button-group:not(:first-child) > button,
    > button:not(:first-child) {
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }

    > .button-group:not(:last-child) > button,
    > button:not(:last-child) {
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
      border-right-width: 0;
    }
  `})},97389:(H,T,e)=>{"use strict";e.d(T,{f:()=>s});var t=e(52423),n=e(68404),c=e(7804);const s=({className:g,children:f})=>{const o=r();return n.createElement("div",{className:(0,t.cx)(o,g)},f)},r=(0,c.B)(()=>t.css`
    display: flex;

    button {
      flex-grow: 1;
      justify-content: center;
    }

    > * {
      flex-grow: 1;
    }

    label {
      flex-grow: 1;
      text-align: center;
    }
  `)},19974:(H,T,e)=>{"use strict";e.d(T,{O:()=>a});var t=e(52423),n=e(17416),c=e(68404),s=e(7804),r=e(72648),g=e(31403),f=e(94229),o=e(39904);const l=(0,s.B)(m=>({popup:t.css`
      label: popup;
      z-index: ${m.zIndex.dropdown};
    `,icons:{right:t.css`
        margin: 1px 0 0 4px;
      `,left:t.css`
        margin: -1px 4px 0 0;
      `}})),a=m=>{const{onChange:d,className:p,loadData:h,icon:y,buttonProps:v,hideDownIcon:i,variant:u,disabled:P,...E}=m,C=(0,r.l4)(),b=l(C);let S=m.children;return i||(S=[m.children,c.createElement(o.J,{key:"down-icon",name:"angle-down",className:b.icons.right})]),c.createElement(n.Z,{onChange:(0,f.K)(d),loadData:(0,f.p)(h),dropdownClassName:b.popup,...E,expandIcon:null},c.createElement(g.zx,{icon:y,disabled:P,variant:u,...v??{}},S))};a.displayName="ButtonCascader"},97097:(H,T,e)=>{"use strict";e.d(T,{_:()=>s});var t=e(52423),n=e(68404),c=e(72648);const s=({message:g,callToActionElement:f,footer:o,className:l})=>{const a=(0,c.wW)(r);return n.createElement("div",{className:(0,t.cx)([a.wrapper,l])},g&&n.createElement("div",{className:a.message},g),f,o&&n.createElement("div",{className:a.footer},o))},r=g=>({wrapper:t.css`
    label: call-to-action-card;
    padding: ${g.spacing(3)};
    background: ${g.colors.background.secondary};
    border-radius: ${g.shape.borderRadius(2)};
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-grow: 1;
  `,message:t.css`
    margin-bottom: ${g.spacing(3)};
    font-style: italic;
  `,footer:t.css`
    margin-top: ${g.spacing(3)}};
  `})},72948:(H,T,e)=>{"use strict";e.d(T,{L:()=>b,Z:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(85419),r=e(35633);const g=n.createContext(null),f=({disabled:S,href:M,onClick:x,children:O,isSelected:L,className:B,...w})=>{const R=(0,n.useMemo)(()=>n.Children.toArray(O).some(F=>n.isValidElement(F)&&F.type.displayName===o.displayName),[O]),A=S||!x&&!M,U=x&&!S?x:void 0,I=(0,c.l4)(),N=(0,r.$)(I,S,A,L);return n.createElement(r._,{disableEvents:S,disableHover:A,isSelected:L,className:(0,t.cx)(N.container,B),...w},n.createElement(g.Provider,{value:{href:M,onClick:U,disabled:S,isSelected:L}},!R&&n.createElement(o,null),O))},o=({children:S,className:M,"aria-label":x})=>{const O=(0,n.useContext)(g),L=(0,c.wW)(l),{href:B,onClick:w,isSelected:R}=O??{href:void 0,onClick:void 0,isSelected:void 0};return n.createElement("h2",{className:(0,t.cx)(L.heading,M)},B?n.createElement("a",{href:B,className:L.linkHack,"aria-label":x,onClick:w},S):w?n.createElement("button",{onClick:w,className:L.linkHack,"aria-label":x,type:"button"},S):n.createElement(n.Fragment,null,S),R!==void 0&&n.createElement("input",{"aria-label":"option",type:"radio",readOnly:!0,checked:R}))};o.displayName="Heading";const l=S=>({heading:(0,t.css)({gridArea:"Heading",justifySelf:"start",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:0,fontSize:S.typography.size.md,letterSpacing:"inherit",lineHeight:S.typography.body.lineHeight,color:S.colors.text.primary,fontWeight:S.typography.fontWeightMedium}),linkHack:(0,t.css)({all:"unset","&::after":{position:"absolute",content:'""',top:0,bottom:0,left:0,right:0,borderRadius:S.shape.borderRadius(1)},"&:focus-visible":{outline:"none",outlineOffset:0,boxShadow:"none","&::after":{...(0,s.getFocusStyles)(S),zIndex:1}}})}),a=({children:S,className:M})=>{const x=(0,c.wW)(m);return n.createElement("div",{className:(0,t.cx)(x.tagList,M)},S)};a.displayName="Tags";const m=S=>({tagList:(0,t.css)({position:"relative",gridArea:"Tags",alignSelf:"center"})}),d=({children:S,className:M})=>{const x=(0,c.wW)(p);return n.createElement("p",{className:(0,t.cx)(x.description,M)},S)};d.displayName="Description";const p=S=>({description:(0,t.css)({width:"100%",gridArea:"Description",margin:S.spacing(1,0,0),color:S.colors.text.secondary,lineHeight:S.typography.body.lineHeight})}),h=({children:S,align:M="start",className:x})=>{const O=(0,c.wW)(y);return n.createElement("div",{className:(0,t.cx)(O.media,x,t.css`
          align-self: ${M};
        `)},S)};h.displayName="Figure";const y=S=>({media:(0,t.css)({position:"relative",gridArea:"Figure",marginRight:S.spacing(2),width:"40px","> img":{width:"100%"},"&:empty":{display:"none"}})}),v=(0,n.memo)(({children:S,className:M,separator:x="|"})=>{const O=(0,c.wW)(i);let L=S;const B=n.Children.toArray(S).filter(Boolean);return B.length?(L=B.map((w,R)=>n.createElement("div",{key:`element_${R}`,className:O.metadataItem},w)),B.length>1&&x&&(L=B.reduce((w,R,A)=>[w,n.createElement("span",{key:`separator_${A}`,className:O.separator},x),R])),n.createElement("div",{className:(0,t.cx)(O.metadata,M)},L)):null});v.displayName="Meta";const i=S=>({metadata:(0,t.css)({gridArea:"Meta",display:"flex",alignItems:"center",width:"100%",fontSize:S.typography.size.sm,color:S.colors.text.secondary,margin:S.spacing(.5,0,0),lineHeight:S.typography.bodySmall.lineHeight,overflowWrap:"anywhere"}),metadataItem:(0,t.css)({zIndex:0}),separator:(0,t.css)({margin:`0 ${S.spacing(1)}`})}),u=({children:S,disabled:M,variant:x,className:O})=>{const L=(0,c.wW)(P),w=(0,n.useContext)(g)?.disabled||M,R=x==="primary"?L.actions:L.secondaryActions;return n.createElement("div",{className:(0,t.cx)(R,O)},n.Children.map(S,A=>n.isValidElement(A)?(0,n.cloneElement)(A,{disabled:w,...A.props}):null))},P=S=>({actions:(0,t.css)({gridArea:"Actions",marginTop:S.spacing(2),"& > *":{marginRight:S.spacing(1)}}),secondaryActions:(0,t.css)({display:"flex",gridArea:"Secondary",alignSelf:"center",color:S.colors.text.secondary,marginTtop:S.spacing(2),"& > *":{marginRight:`${S.spacing(1)} !important`}})}),E=({children:S,disabled:M,className:x})=>n.createElement(u,{variant:"primary",disabled:M,className:x},S);E.displayName="Actions";const C=({children:S,disabled:M,className:x})=>n.createElement(u,{variant:"secondary",disabled:M,className:x},S);C.displayName="SecondaryActions";const b=S=>({inner:t.css`
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      flex-wrap: wrap;
    `,...l(S),...i(S),...p(S),...y(S),...P(S),...m(S)});f.Heading=o,f.Tags=a,f.Figure=h,f.Meta=v,f.Actions=E,f.SecondaryActions=C,f.Description=d},35633:(H,T,e)=>{"use strict";e.d(T,{$:()=>l,_:()=>o});var t=e(52423),n=e(68404),c=e(72648),s=e(7804),r=e(85419);const g=({children:a,href:m})=>{const{inner:d}=(0,c.wW)(f);return m?n.createElement("a",{className:d,href:m},a):n.createElement(n.Fragment,null,a)},f=a=>({inner:(0,t.css)({display:"flex",width:"100%",padding:a.spacing(2)})}),o=({children:a,disableEvents:m,disableHover:d,isSelected:p,className:h,href:y,...v})=>{const i=(0,c.l4)(),{oldContainer:u}=l(i,m,d,p);return n.createElement("div",{...v,className:(0,t.cx)(u,h)},n.createElement(g,{href:y},a))},l=(0,s.B)((a,m=!1,d=!1,p)=>{const h=p!==void 0;return{container:(0,t.css)({display:"grid",position:"relative",gridTemplateColumns:"auto 1fr auto",gridTemplateRows:"1fr auto auto auto",gridAutoColumns:"1fr",gridAutoFlow:"row",gridTemplateAreas:`
        "Figure Heading Tags"
        "Figure Meta Tags"
        "Figure Description Tags"
        "Figure Actions Secondary"`,width:"100%",padding:a.spacing(2),background:a.colors.background.secondary,borderRadius:a.shape.borderRadius(),marginBottom:"8px",pointerEvents:m?"none":"auto",transition:a.transitions.create(["background-color","box-shadow","border-color","color"],{duration:a.transitions.duration.short}),...!d&&{"&:hover":{background:a.colors.emphasize(a.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":r.getFocusStyles(a)},...h&&{cursor:"pointer"},...p&&{outline:`solid 2px ${a.colors.primary.border}`}}),oldContainer:(0,t.css)({display:"flex",width:"100%",background:a.colors.background.secondary,borderRadius:a.shape.borderRadius(),position:"relative",pointerEvents:m?"none":"auto",marginBottom:a.spacing(1),transition:a.transitions.create(["background-color","box-shadow","border-color","color"],{duration:a.transitions.duration.short}),...!d&&{"&:hover":{background:a.colors.emphasize(a.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":r.getFocusStyles(a)}})}})},95093:(H,T,e)=>{"use strict";e.d(T,{v:()=>m});var t=e(52423),n=e(58635),c=e(17416),s=e(68404),r=e(39904),g=e(46967),f=e(53217),o=e(94229);const l=(0,t.css)(`
&:focus{
  outline: none;
}
`),a="/";class m extends s.PureComponent{constructor(p){super(p),this.flattenOptions=(i,u=[])=>{let P=[];for(const E of i){const C=[...u];C.push(E),E.items?P=[...P,...this.flattenOptions(E.items,C)]:P.push({singleLabel:C[C.length-1].label,label:C.map(b=>b.label).join(this.props.separator||` ${a} `),value:C.map(b=>b.value)})}return P},this.getSearchableOptions=(0,n.Z)(i=>this.flattenOptions(i)),this.onChange=(i,u)=>{const P=this.props.hideActiveLevelLabel?"":this.props.displayAllSelectedLevels?u.map(E=>E.label).join(this.props.separator||a):u[u.length-1].label;this.setState({rcValue:i,focusCascade:!0,activeLabel:P}),this.props.onSelect(u[u.length-1].value)},this.onSelect=i=>{const u=i.value||[];this.setState({activeLabel:this.props.displayAllSelectedLevels?i.label:i.singleLabel||"",rcValue:u,isSearching:!1}),this.props.onSelect(u[u.length-1])},this.onCreateOption=i=>{this.setState({activeLabel:i,rcValue:[],isSearching:!1}),this.props.onSelect(i)},this.onBlur=()=>{this.setState({isSearching:!1,focusCascade:!1}),this.state.activeLabel===""&&this.setState({rcValue:[]}),this.props.onBlur?.()},this.onBlurCascade=()=>{this.setState({focusCascade:!1}),this.props.onBlur?.()},this.onInputKeyDown=i=>{["ArrowDown","ArrowUp","Enter","ArrowLeft","ArrowRight","Backspace"].includes(i.key)||this.setState({focusCascade:!1,isSearching:!0})},this.onSelectInputChange=i=>{i===""&&this.setState({isSearching:!1})};const h=this.getSearchableOptions(p.options),{rcValue:y,activeLabel:v}=this.setInitialValue(h,p.initialValue);this.state={isSearching:!1,focusCascade:!1,rcValue:y,activeLabel:v}}setInitialValue(p,h){if(!h)return{rcValue:[],activeLabel:""};for(const y of p){const v=y.value||[];if(v.indexOf(h)===v.length-1)return{rcValue:v,activeLabel:this.props.displayAllSelectedLevels?y.label:y.singleLabel||""}}return this.props.allowCustomValue?{rcValue:[],activeLabel:h}:{rcValue:[],activeLabel:""}}render(){const{allowCustomValue:p,formatCreateLabel:h,placeholder:y,width:v,changeOnSelect:i,options:u}=this.props,{focusCascade:P,isSearching:E,rcValue:C,activeLabel:b}=this.state,S=this.getSearchableOptions(u);return s.createElement("div",null,E?s.createElement(f.Ph,{allowCustomValue:p,placeholder:y,autoFocus:!P,onChange:this.onSelect,onBlur:this.onBlur,options:S,onCreateOption:this.onCreateOption,formatCreateLabel:h,width:v,onInputChange:this.onSelectInputChange}):s.createElement(c.Z,{onChange:(0,o.K)(this.onChange),options:u,changeOnSelect:i,value:C.value,fieldNames:{label:"label",value:"value",children:"items"},expandIcon:null,open:this.props.alwaysOpen},s.createElement("div",{className:l},s.createElement(g.I,{autoFocus:this.props.autoFocus,width:v,placeholder:y,onBlur:this.onBlurCascade,value:b,onKeyDown:this.onInputKeyDown,onChange:()=>{},suffix:P?s.createElement(r.J,{name:"angle-up"}):s.createElement(r.J,{name:"angle-down",style:{marginBottom:0,marginLeft:"4px"}})}))))}}m.defaultProps={changeOnSelect:!0}},94229:(H,T,e)=>{"use strict";e.d(T,{K:()=>t,p:()=>n});const t=r=>(g,f)=>{r&&r(g.map(o=>String(o)),c(f))},n=r=>g=>{r&&r(c(g))},c=r=>r.map(s),s=r=>({value:r.value??"",label:r.label})},94437:(H,T,e)=>{"use strict";e.d(T,{L:()=>n});var t=e(68404);class n extends t.PureComponent{constructor(){super(...arguments),this.myRef=(0,t.createRef)(),this.state={hasEventListener:!1},this.onOutsideClick=s=>{const r=this.myRef.current;(!r||!r.contains(s.target))&&this.props.onClick()}}componentDidMount(){this.props.parent.addEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.addEventListener("keyup",this.onOutsideClick,this.props.useCapture)}componentWillUnmount(){this.props.parent.removeEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.removeEventListener("keyup",this.onOutsideClick,this.props.useCapture)}render(){return t.createElement("div",{ref:this.myRef},this.props.children)}}n.defaultProps={includeButtonPress:!0,parent:typeof window<"u"?window:null,useCapture:!1}},94599:(H,T,e)=>{"use strict";e.d(T,{m:()=>l});var t=e(52423),n=e(68404),c=e(37951),s=e(72648),r=e(31403),g=e(39904),f=e(4784);const o=2*1e3;function l({onClipboardCopy:d,onClipboardError:p,children:h,getText:y,icon:v,variant:i,...u}){const P=(0,s.wW)(m),[E,C]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let M;return E&&(M=setTimeout(()=>{C(!1)},o)),()=>{window.clearTimeout(M)}},[E]);const b=(0,n.useRef)(null),S=(0,n.useCallback)(async()=>{const M=y();try{await a(M,b),C(!0),d?.(M)}catch(x){p?.(M,x)}},[y,d,p]);return n.createElement(n.Fragment,null,E&&n.createElement(f.K,{placement:"top",referenceElement:b.current},n.createElement(c.c,{i18nKey:"clipboard-button.inline-toast.success"},"Copied")),n.createElement(r.zx,{onClick:S,icon:v,variant:E?"success":i,"aria-label":E?"Copied":void 0,...u,className:(0,t.cx)(P.button,E&&P.successButton),ref:b},h,E&&n.createElement("div",{className:P.successOverlay},n.createElement(g.J,{name:"check"}))))}const a=async(d,p)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(d);{const h=document.createElement("textarea");p.current?.appendChild(h),h.value=d,h.focus(),h.select(),document.execCommand("copy"),h.remove()}},m=d=>({button:(0,t.css)({position:"relative"}),successButton:(0,t.css)({"> *":(0,t.css)({visibility:"hidden"})}),successOverlay:(0,t.css)({position:"absolute",top:0,bottom:0,right:0,left:0,visibility:"visible"})})},20941:(H,T,e)=>{"use strict";e.d(T,{s:()=>l});var t=e(52423),n=e(82897),c=e.n(n),s=e(68404),r=e(67487),g=e(39904),f=e(72648),o=e(85419);const l=({label:m,isOpen:d,onToggle:p,className:h,contentClassName:y,children:v,labelId:i,loading:u=!1,headerDataTestId:P,contentDataTestId:E})=>{const[C,b]=(0,s.useState)(d),S=(0,f.wW)(a),M=L=>{L.target instanceof HTMLElement&&L.target.tagName==="A"||(L.preventDefault(),L.stopPropagation(),p?.(!C),b(!C))},{current:x}=(0,s.useRef)((0,n.uniqueId)()),O=i??`collapse-label-${x}`;return s.createElement(s.Fragment,null,s.createElement("div",{onClick:M,className:(0,t.cx)(S.header,h)},s.createElement("button",{id:`collapse-button-${x}`,className:S.button,onClick:M,"aria-expanded":C&&!u,"aria-controls":`collapse-content-${x}`,"aria-labelledby":O},u?s.createElement(r.$,{className:S.spinner}):s.createElement(g.J,{name:C?"angle-up":"angle-down",className:S.icon})),s.createElement("div",{className:S.label,id:`collapse-label-${x}`,"data-testid":P},m)),C&&s.createElement("div",{id:`collapse-content-${x}`,className:(0,t.cx)(S.content,y),"data-testid":E},v))},a=m=>({header:(0,t.css)({display:"flex",cursor:"pointer",boxSizing:"border-box",flexDirection:"row-reverse",position:"relative",justifyContent:"space-between",fontSize:m.typography.size.lg,padding:`${m.spacing(.5)} 0`,"&:focus-within":(0,o.getFocusStyles)(m)}),button:(0,t.css)({all:"unset","&:focus-visible":{outline:"none",outlineOffset:"unset",transition:"none",boxShadow:"none"}}),icon:(0,t.css)({color:m.colors.text.secondary}),content:(0,t.css)({padding:`${m.spacing(2)} 0`}),spinner:(0,t.css)({display:"flex",alignItems:"center",width:m.spacing(2)}),label:(0,t.css)({display:"flex"})})},2352:(H,T,e)=>{"use strict";e.d(T,{U:()=>o,y:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(31403),r=e(39904);const g=l=>({collapse:t.css`
    label: collapse;
    margin-bottom: ${l.spacing(1)};
    background-color: ${l.colors.background.primary};
    border: 1px solid ${l.colors.border.medium};
    position: relative;
    border-radius: 3px;
    width: 100%;
    display: flex;
    flex-direction: column;
    flex: 1 1 0;
  `,collapseBody:t.css`
    label: collapse__body;
    padding: ${l.spacing(l.components.panel.padding)};
    padding-top: 0;
    flex: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  `,bodyContentWrapper:t.css`
    label: bodyContentWrapper;
    flex: 1;
    overflow: hidden;
  `,loader:t.css`
    label: collapse__loader;
    height: 2px;
    position: relative;
    overflow: hidden;
    background: none;
    margin: ${l.spacing(.5)};
  `,loaderActive:t.css`
    label: collapse__loader_active;
    &:after {
      content: ' ';
      display: block;
      width: 25%;
      top: 0;
      top: -50%;
      height: 250%;
      position: absolute;
      animation: loader 2s cubic-bezier(0.17, 0.67, 0.83, 0.67) 500ms;
      animation-iteration-count: 100;
      left: -25%;
      background: ${l.colors.primary.main};
    }
    @keyframes loader {
      from {
        left: -25%;
        opacity: 0.1;
      }
      to {
        left: 100%;
        opacity: 1;
      }
    }
  `,header:t.css`
    label: collapse__header;
    padding: ${l.spacing(1,2,1,2)};
    display: flex;
    transition: all 0.1s linear;
  `,headerCollapsed:t.css`
    label: collapse__header--collapsed;
    padding: ${l.spacing(1,2,1,2)};
  `,headerLabel:t.css`
    label: collapse__header-label;
    font-weight: ${l.typography.fontWeightMedium};
    margin-right: ${l.spacing(1)};
    font-size: ${l.typography.size.md};
  `,icon:t.css`
    label: collapse__icon;
    margin: ${l.spacing(.25,1,0,-1)};
  `}),f=({isOpen:l,onToggle:a,...m})=>{const[d,p]=(0,n.useState)(l);return n.createElement(o,{isOpen:d,collapsible:!0,...m,onToggle:()=>{p(!d),a&&a(!d)}})},o=({isOpen:l,label:a,loading:m,collapsible:d,onToggle:p,className:h,children:y})=>{const v=(0,c.wW)(s.gN),i=(0,c.wW)(g),u=()=>{p&&p(!l)},P=(0,t.cx)([i.collapse,h]),E=m?(0,t.cx)([i.loader,i.loaderActive]):(0,t.cx)([i.loader]),C=d?(0,t.cx)([i.header]):(0,t.cx)([i.headerCollapsed]);return n.createElement("div",{className:P},n.createElement("button",{type:"button",className:(0,t.cx)(v,C),onClick:u},d&&n.createElement(r.J,{className:i.icon,name:l?"angle-down":"angle-right"}),n.createElement("div",{className:(0,t.cx)([i.headerLabel])},a)),l&&n.createElement("div",{className:(0,t.cx)([i.collapseBody])},n.createElement("div",{className:E}),n.createElement("div",{className:i.bodyContentWrapper},y)))};o.displayName="Collapse"},76161:(H,T,e)=>{"use strict";e.d(T,{Z:()=>a});var t=e(52423),n=e(82897),c=e.n(n),s=e(68404),r=e(35008),g=e.n(r),f=e(72648),o=e(46967);const l=(0,s.forwardRef)(({color:p,onChange:h,isClearable:y=!1,onClick:v,onBlur:i,disabled:u,buttonAriaLabel:P,...E},C)=>{const[b,S]=(0,s.useState)(p),[M,x]=(0,s.useState)(p),O=(0,s.useMemo)(()=>(0,n.debounce)(h,100),[]);(0,s.useEffect)(()=>{const w=g()(p);w.isValid()&&p!==M&&(S(w.toString()),x(p))},[p,M]);const L=w=>{const{value:R}=w.currentTarget;if(S(R),R===""&&y){O(R);return}const A=g()(R);A.isValid()&&O(A.toString())},B=w=>{g()(b).isValid()||S(p),i?.(w)};return s.createElement(o.I,{...E,value:b,onChange:L,disabled:u,onClick:v,onBlur:B,addonBefore:s.createElement(m,{onClick:v,ariaLabel:P,disabled:u,color:p}),ref:C})});l.displayName="ColorInput";const a=l,m=({color:p,onClick:h,disabled:y,ariaLabel:v})=>{const i=(0,f.wW)(d);return s.createElement("button",{type:"button",onClick:h,"aria-label":v,disabled:y||!h,className:(0,t.cx)(i,t.css`
          background-color: ${p};
        `)})},d=p=>t.css`
  height: 100%;
  width: ${p.spacing.gridSize*4}px;
  border-radius: ${p.shape.borderRadius()} 0 0 ${p.shape.borderRadius()};
  border: 1px solid ${p.colors.border.medium};
`},90208:(H,T,e)=>{"use strict";e.d(T,{sp:()=>p,zH:()=>d});var t=e(52423),n=e(68404),c=e(72648),s=e(7804),r=e(66120),g=e(56921),f=e(39604),o=e(560),l=e(98671),a=e(43598);const m=(y,v="ColorPicker")=>{var i;return i=class extends n.Component{constructor(){super(...arguments),this.pickerTriggerRef=(0,n.createRef)()}render(){const{theme:u,children:P,onChange:E}=this.props,C=h(u),b=n.createElement(y,{...this.props,children:null,onChange:E});return n.createElement(f.D,{content:b,hideAfter:300},(S,M,x)=>n.createElement(n.Fragment,null,this.pickerTriggerRef.current&&n.createElement(g.J,{...x,referenceElement:this.pickerTriggerRef.current,wrapperClassName:C.colorPicker,onMouseLeave:M,onMouseEnter:S,onKeyDown:O=>(0,r.i)(O,M)}),P?P({ref:this.pickerTriggerRef,showColorPicker:S,hideColorPicker:M}):n.createElement(l.b,{ref:this.pickerTriggerRef,onClick:S,onMouseLeave:M,color:u.visualization.getColorByName(this.props.color||"#000000")})))}},i.displayName=v,i},d=(0,c.HE)(m(o.h,"ColorPicker")),p=(0,c.HE)(m(a.j,"SeriesColorPicker")),h=(0,s.B)(y=>({colorPicker:t.css`
      position: absolute;
      z-index: ${y.zIndex.tooltip};
      color: ${y.colors.text.primary};
      max-width: 400px;
      font-size: ${y.typography.size.sm};
      // !important because these styles are also provided to popper via .popper classes from Tooltip component
      // hope to get rid of those soon
      padding: 15px !important;
      & [data-placement^='top'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='bottom'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='left'] {
        padding-top: 0 !important;
      }
      & [data-placement^='right'] {
        padding-top: 0 !important;
      }
    `}))},83957:(H,T,e)=>{"use strict";e.d(T,{T:()=>a});var t=e(52423),n=e(68404),c=e(35206),s=e(20053),r=e(64724),g=e(72648),f=e(94437),o=e(76161),l=e(96639);const a=(0,n.forwardRef)(({value:d="",onChange:p,returnColorAs:h="rgb",...y},v)=>{const[i,u]=(0,n.useState)(d),[P,E]=(0,n.useState)(!1),C=(0,g.l4)(),b=(0,g.wW)(m),S=(0,g.wW)(l.W);return(0,s.Z)(M=>{if(M===d)return;if(!M){p("");return}const x=C.visualization.getColorByName(M);p(h==="rgb"?r.asRgbString(x):r.asHexString(x))},500,[i]),n.createElement(f.L,{onClick:()=>E(!1)},n.createElement("div",{className:b.wrapper},P&&!y.disabled&&n.createElement(c.ef,{"data-testid":"color-popover",color:i,onChange:u,className:(0,t.cx)(S.root,b.picker)}),n.createElement(o.Z,{...y,theme:C,color:i,onChange:u,buttonAriaLabel:"Open color picker",onClick:()=>E(!0),onBlur:()=>E(!1),ref:v,isClearable:!0})))});a.displayName="ColorPickerInput";const m=d=>({wrapper:t.css`
      position: relative;
    `,picker:t.css`
      &.react-colorful {
        position: absolute;
        width: 100%;
        z-index: 11;
        bottom: 36px;
      }
    `,inner:t.css`
      position: absolute;
    `})},560:(H,T,e)=>{"use strict";e.d(T,{h:()=>i});var t=e(52423),n=e(81699),c=e(68404),s=e(64724),r=e(72648),g=e(7804),f=e(98671),o=e(82897);function l(P,E){const C=new Array(P.length);for(let b=0;b<P.length;b++){const S=P.length-1-b;C[b]=E(P[S],S,P)}return C}const m=({hue:P,selectedColor:E,onColorSelect:C,...b})=>{const S=(0,o.upperFirst)(P.name),M=(0,r.wW)(d);return c.createElement("div",{className:M.colorRow},c.createElement("div",{className:M.colorLabel},S),c.createElement("div",{...b,className:M.swatchRow},l(P.shades,x=>c.createElement(f.b,{key:x.name,"aria-label":x.name,variant:x.primary?f.$.Large:f.$.Small,isSelected:x.name===E,color:x.color,onClick:()=>C(x.name)}))))},d=P=>({colorRow:t.css`
      display: grid;
      grid-template-columns: 25% 1fr;
      grid-column-gap: ${P.spacing(2)};
      padding: ${P.spacing(.5,0)};

      &:hover {
        background: ${P.colors.background.secondary};
      }
    `,colorLabel:t.css`
      padding-left: ${P.spacing(2)};
      display: flex;
      align-items: center;
    `,swatchRow:t.css`
      display: flex;
      gap: ${P.spacing(1)};
      align-items: center;
      justify-content: space-around;
      flex-direction: row;
    `}),p=({color:P,onChange:E})=>{const C=(0,r.l4)(),b=(0,r.wW)(h),S=[];for(const M of C.visualization.hues)S.push(c.createElement(m,{key:M.name,selectedColor:P,hue:M,onColorSelect:E}));return c.createElement(c.Fragment,null,c.createElement("div",{className:b.swatches},S),c.createElement("div",{className:b.extraColors},c.createElement(f.b,{isSelected:P==="transparent",color:"rgba(0,0,0,0)",label:"Transparent",onClick:()=>E("transparent")}),c.createElement(f.b,{isSelected:P==="text",color:C.colors.text.primary,label:"Text color",onClick:()=>E("text")})))},h=P=>({container:t.css`
      display: flex;
      flex-direction: column;
    `,extraColors:t.css`
      display: flex;
      align-items: center;
      justify-content: space-around;
      gap: ${P.spacing(1)};
      padding: ${P.spacing(1,0)};
    `,swatches:t.css`
      display: grid;
      flex-grow: 1;
    `});var y=e(96639);class v extends c.Component{constructor(E){super(E),this.getTabClassName=C=>{const{activePicker:b}=this.state;return`ColorPickerPopover__tab ${b===C&&"ColorPickerPopover__tab--active"}`},this.handleChange=C=>{const{onChange:b,enableNamedColors:S,theme:M}=this.props;if(S)return b(C);b(s.asHexString(M.visualization.getColorByName(C)))},this.onTabChange=C=>()=>this.setState({activePicker:C}),this.renderPicker=()=>{const{activePicker:C}=this.state,{color:b}=this.props;switch(C){case"spectrum":return c.createElement(y.Z,{color:b,onChange:this.handleChange});case"palette":return c.createElement(p,{color:b,onChange:this.handleChange});default:return this.renderCustomPicker(C)}},this.renderCustomPicker=C=>{const{customPickers:b,color:S,theme:M}=this.props;return b?c.createElement(b[C].tabComponent,{color:S,theme:M,onChange:this.handleChange}):null},this.renderCustomPickerTabs=()=>{const{customPickers:C}=this.props;return C?c.createElement(c.Fragment,null,Object.keys(C).map(b=>c.createElement("button",{className:this.getTabClassName(b),onClick:this.onTabChange(b),key:b},C[b].name))):null},this.state={activePicker:"palette"}}render(){const{theme:E}=this.props,C=u(E);return c.createElement(n.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},c.createElement("div",{tabIndex:-1,className:C.colorPickerPopover},c.createElement("div",{className:C.colorPickerPopoverTabs},c.createElement("button",{className:this.getTabClassName("palette"),onClick:this.onTabChange("palette")},"Colors"),c.createElement("button",{className:this.getTabClassName("spectrum"),onClick:this.onTabChange("spectrum")},"Custom"),this.renderCustomPickerTabs()),c.createElement("div",{className:C.colorPickerPopoverContent},this.renderPicker())))}}const i=(0,r.HE)(v);i.displayName="ColorPickerPopover";const u=(0,g.B)(P=>({colorPickerPopover:t.css`
      border-radius: ${P.shape.borderRadius()};
      box-shadow: ${P.shadows.z3};
      background: ${P.colors.background.primary};
      border: 1px solid ${P.colors.border.medium};

      .ColorPickerPopover__tab {
        width: 50%;
        text-align: center;
        padding: ${P.spacing(1,0)};
        background: ${P.colors.background.secondary};
        color: ${P.colors.text.secondary};
        font-size: ${P.typography.bodySmall.fontSize};
        cursor: pointer;
        border: none;

        &:focus:not(:focus-visible) {
          outline: none;
          box-shadow: none;
        }

        :focus-visible {
          position: relative;
        }
      }

      .ColorPickerPopover__tab--active {
        color: ${P.colors.text.primary};
        font-weight: ${P.typography.fontWeightMedium};
        background: ${P.colors.background.primary};
      }
    `,colorPickerPopoverContent:t.css`
      width: 246px;
      font-size: ${P.typography.bodySmall.fontSize};
      min-height: 184px;
      padding: ${P.spacing(1)};
      display: flex;
      flex-direction: column;
    `,colorPickerPopoverTabs:t.css`
      display: flex;
      width: 100%;
      border-radius: ${P.shape.borderRadius()} ${P.shape.borderRadius()} 0 0;
    `}))},98671:(H,T,e)=>{"use strict";e.d(T,{$:()=>o,b:()=>l});var t=e(52423),n=e(81699),c=e(68404),s=e(35008),r=e.n(s),g=e(68183),f=e(72648),o=(m=>(m.Small="small",m.Large="large",m))(o||{});const l=c.forwardRef(({color:m,label:d,variant:p="small",isSelected:h,"aria-label":y,...v},i)=>{const u=(0,f.l4)(),{isFocusVisible:P,focusProps:E}=(0,n.Fx)(),C=a(u,p,m,P,h),b=!!d,S=`${y||d} color`;return c.createElement("div",{ref:i,className:C.wrapper,"data-testid":g.wl.components.ColorSwatch.name,...v},b&&c.createElement("span",{className:C.label},d),c.createElement("button",{className:C.swatch,...E,"aria-label":S}))}),a=(m,d,p,h,y)=>{const v=r()(p),u=d==="small"?"16px":"32px";let P="none";return v.getAlpha()<.1&&(P=`2px solid ${m.colors.border.medium}`),{wrapper:(0,t.css)({display:"flex",alignItems:"center",cursor:"pointer"}),label:(0,t.css)({marginRight:m.spacing(1)}),swatch:(0,t.css)({width:u,height:u,background:`${p}`,border:P,borderRadius:"50%",outlineOffset:"1px",outline:h?`2px solid  ${m.colors.primary.main}`:"none",boxShadow:y?`inset 0 0 0 2px ${p}, inset 0 0 0 4px ${m.colors.getContrastText(p)}`:"none",transition:m.transitions.create(["transform"],{duration:m.transitions.duration.short}),"&:hover":{transform:"scale(1.1)"}})}};l.displayName="ColorSwatch"},43598:(H,T,e)=>{"use strict";e.d(T,{j:()=>g,q:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(18979),r=e(560);const g=l=>{const a=(0,c.wW)(o),{yaxis:m,onToggleAxis:d,color:p,...h}=l,y=d?{yaxis:{name:"Y-Axis",tabComponent(){return n.createElement(s.r,{key:"yaxisSwitch",label:"Use right y-axis",className:a.colorPickerAxisSwitch,labelClass:a.colorPickerAxisSwitchLabel,checked:m===2,onChange:()=>{d&&d()}})}}}:void 0;return n.createElement(r.h,{...h,color:p||"#000000",customPickers:y})},f=(0,c.HE)(g),o=()=>({colorPickerAxisSwitch:t.css`
      width: 100%;
    `,colorPickerAxisSwitchLabel:t.css`
      display: flex;
      flex-grow: 1;
    `})},96639:(H,T,e)=>{"use strict";e.d(T,{W:()=>m,Z:()=>d});var t=e(52423),n=e(68404),c=e(35206),s=e(20053),r=e(35008),g=e.n(r),f=e(64724),o=e(72648),l=e(76161);const a=({color:p,onChange:h})=>{const[y,v]=(0,n.useState)(p);(0,s.Z)(E=>{h(f.asHexString(i.visualization.getColorByName(E)))},500,[y]);const i=(0,o.l4)(),u=(0,o.wW)(m),P=(0,n.useMemo)(()=>y.startsWith("rgba")?y:g()(i.visualization.getColorByName(p)).toRgbString(),[y,i,p]);return n.createElement("div",{className:u.wrapper},n.createElement(c.ef,{className:u.root,color:P,onChange:v}),n.createElement(l.Z,{theme:i,color:P,onChange:v,className:u.colorInput}))},m=p=>({wrapper:t.css`
    flex-grow: 1;
  `,root:t.css`
    &.react-colorful {
      width: auto;
    }

    .react-colorful {
      &__saturation {
        border-radius: ${p.shape.borderRadius(1)} ${p.shape.borderRadius(1)} 0 0;
      }
      &__alpha {
        border-radius: 0 0 ${p.shape.borderRadius(1)} ${p.shape.borderRadius(1)};
      }
      &__alpha,
      &__hue {
        height: ${p.spacing(2)};
        position: relative;
      }
      &__pointer {
        height: ${p.spacing(2)};
        width: ${p.spacing(2)};
      }
    }
  `,colorInput:t.css`
    margin-top: ${p.spacing(2)};
  `}),d=a},71657:(H,T,e)=>{"use strict";e.d(T,{p:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(7804),r=e(31403);class g extends n.PureComponent{constructor(){super(...arguments),this.mainButtonRef=n.createRef(),this.confirmButtonRef=n.createRef(),this.state={showConfirm:!1},this.onClickButton=a=>{a&&a.preventDefault(),this.setState({showConfirm:!0},()=>{this.props.autoFocus&&this.confirmButtonRef.current&&this.confirmButtonRef.current.focus()}),this.props.onClick&&this.props.onClick()},this.onClickCancel=a=>{a&&a.preventDefault(),this.setState({showConfirm:!1},()=>{this.mainButtonRef.current?.focus()}),this.props.onCancel&&this.props.onCancel()},this.onConfirm=a=>{a&&a.preventDefault(),this.props.onConfirm(),this.props.closeOnConfirm&&this.setState({showConfirm:!1})}}render(){const{theme:a,className:m,size:d,disabled:p,confirmText:h,confirmVariant:y,children:v}=this.props,i=o(a),u=(0,t.cx)(m,this.state.showConfirm?i.buttonHide:i.buttonShow,p&&i.buttonDisabled),P=(0,t.cx)(i.confirmButton,this.state.showConfirm?i.confirmButtonShow:i.confirmButtonHide),E=p?()=>{}:this.onClickButton;return n.createElement("span",{className:i.buttonContainer},n.createElement("div",{className:(0,t.cx)(p&&i.disabled)},typeof v=="string"?n.createElement("span",{className:u},n.createElement(r.zx,{size:d,fill:"text",onClick:E,ref:this.mainButtonRef},v)):n.createElement("span",{className:u,onClick:E},v)),n.createElement("span",{className:P},n.createElement(r.zx,{size:d,variant:y,onClick:this.onConfirm,ref:this.confirmButtonRef},h),n.createElement(r.zx,{size:d,fill:"text",onClick:this.onClickCancel},"Cancel")))}}const f=(0,c.HE)(g),o=(0,s.B)(l=>({buttonContainer:t.css`
      display: flex;
      align-items: center;
      justify-content: flex-end;
    `,buttonDisabled:t.css`
      text-decoration: none;
      color: ${l.colors.text.primary};
      opacity: 0.65;
      pointer-events: none;
    `,buttonShow:t.css`
      opacity: 1;
      transition: opacity 0.1s ease;
      z-index: 2;
    `,buttonHide:t.css`
      opacity: 0;
      transition: opacity 0.1s ease, visibility 0 0.1s;
      visibility: hidden;
      z-index: 0;
    `,confirmButton:t.css`
      align-items: flex-start;
      background: ${l.colors.background.primary};
      display: flex;
      position: absolute;
      pointer-events: none;
    `,confirmButtonShow:t.css`
      z-index: 1;
      opacity: 1;
      transition: opacity 0.08s ease-out, transform 0.1s ease-out;
      transform: translateX(0);
      pointer-events: all;
    `,confirmButtonHide:t.css`
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.12s ease-in, transform 0.14s ease-in, visibility 0s 0.12s;
      transform: translateX(100px);
    `,disabled:t.css`
      cursor: not-allowed;
    `}));f.defaultProps={size:"md",confirmText:"Save",disabled:!1,confirmVariant:"primary"},f.displayName="ConfirmButton"},13626:(H,T,e)=>{"use strict";e.d(T,{m:()=>s});var t=e(68404),n=e(31403),c=e(71657);const s=({size:r,disabled:g,onConfirm:f,"aria-label":o,closeOnConfirm:l})=>t.createElement(c.p,{confirmText:"Delete",confirmVariant:"destructive",size:r||"md",disabled:g,onConfirm:f,closeOnConfirm:l},t.createElement(n.zx,{"aria-label":o,variant:"destructive",icon:"times",size:r||"sm"}))},98102:(H,T,e)=>{"use strict";e.d(T,{s:()=>l});var t=e(52423),n=e(68404),c=e(68183),s=e(52081),r=e(46967),g=e(72648),f=e(31403),o=e(35029);const l=({isOpen:m,title:d,body:p,description:h,confirmText:y,confirmVariant:v="destructive",confirmationText:i,dismissText:u="Cancel",dismissVariant:P="secondary",alternativeText:E,modalClass:C,icon:b="exclamation-triangle",onConfirm:S,onDismiss:M,onAlternative:x,confirmButtonVariant:O="destructive"})=>{const[L,B]=(0,n.useState)(Boolean(i)),w=(0,g.wW)(a),R=(0,n.useRef)(null),A=U=>{B(i?.localeCompare(U.currentTarget.value)!==0)};return(0,n.useEffect)(()=>{m&&R.current?.focus()},[m]),(0,n.useEffect)(()=>{m&&B(Boolean(i))},[m,i]),n.createElement(o.u,{className:(0,t.cx)(w.modal,C),title:d,icon:b,isOpen:m,onDismiss:M},n.createElement("div",{className:w.modalText},p,h?n.createElement("div",{className:w.modalDescription},h):null,i?n.createElement("div",{className:w.modalConfirmationInput},n.createElement(s.Lh,null,n.createElement(r.I,{placeholder:`Type ${i} to confirm`,onChange:A}))):null),n.createElement(o.u.ButtonRow,null,n.createElement(f.zx,{variant:P,onClick:M,fill:"outline"},u),n.createElement(f.zx,{variant:O,onClick:S,disabled:L,ref:R,"aria-label":c.wl.pages.ConfirmModal.delete},y),x?n.createElement(f.zx,{variant:"primary",onClick:x},E):null))},a=m=>({modal:t.css`
    width: 500px;
  `,modalText:(0,t.css)({fontSize:m.typography.h5.fontSize,color:m.colors.text.primary}),modalDescription:(0,t.css)({fontSize:m.typography.body.fontSize}),modalConfirmationInput:(0,t.css)({paddingTop:m.spacing(1)})})},30909:(H,T,e)=>{"use strict";e.d(T,{x:()=>g});var t=e(68404),n=e(86889),c=e(68183),s=e(38484),r=e(85511);const g=t.memo(({x:f,y:o,onClose:l,focusOnOpen:a=!0,renderMenuItems:m,renderHeader:d})=>{const p=(0,t.useRef)(null),[h,y]=(0,t.useState)({});(0,t.useLayoutEffect)(()=>{const E=p.current;if(E){const C=E.getBoundingClientRect(),b=5,S={right:window.innerWidth<f+C.width,bottom:window.innerHeight<o+C.height+b};y({position:"fixed",left:S.right?f-C.width-b:f-b,top:S.bottom?o-C.height-b:o+b})}},[f,o]),(0,n.Z)(p,()=>{l?.()});const v=d?.(),i=m?.(),u=E=>{a&&E(0)},P=E=>{E.key==="Escape"&&(E.preventDefault(),E.stopPropagation(),l?.())};return t.createElement(r.h_,null,t.createElement(s.v,{header:v,ref:p,style:h,ariaLabel:c.wl.components.Menu.MenuComponent("Context"),onOpen:u,onClick:l,onKeyDown:P},i))});g.displayName="ContextMenu"},74285:(H,T,e)=>{"use strict";e.d(T,{z:()=>c});var t=e(68404),n=e(30909);const c=({children:s,renderMenuItems:r,focusOnOpen:g=!0})=>{const[f,o]=(0,t.useState)(!1),[l,a]=(0,t.useState)({x:0,y:0});return t.createElement(t.Fragment,null,s({openMenu:m=>{o(!0),a({x:m.pageX,y:m.pageY})}}),f&&t.createElement(n.x,{onClose:()=>o(!1),x:l.x,y:l.y,renderMenuItems:r,focusOnOpen:g}))}},68226:(H,T,e)=>{"use strict";e.d(T,{$:()=>a,Z:()=>m});var t=e(52423),n=e(68404),c=e(20201),s=e(72648),r=e(9085),g=e.n(r),f=e(39904);const o=({children:p})=>{const[h,y]=(0,n.useState)(!1),[v,i]=(0,n.useState)(!1),u=(0,n.useRef)(null),P=(0,n.useRef)(null),E=(0,s.wW)(l);return(0,n.useEffect)(()=>{const C=new IntersectionObserver(b=>{b.forEach(S=>{S.target===u.current?y(!S.isIntersecting):S.target===P.current&&i(!S.isIntersecting)})});return[u,P].forEach(b=>{b.current&&C.observe(b.current)}),()=>C.disconnect()},[]),n.createElement(n.Fragment,null,n.createElement("div",{className:(0,t.cx)(E.scrollIndicator,E.scrollTopIndicator,{[E.scrollIndicatorVisible]:h})},n.createElement(f.J,{className:g()(E.scrollIcon,E.scrollTopIcon),name:"angle-up"})),n.createElement("div",{className:E.scrollContent},n.createElement("div",{ref:u}),p,n.createElement("div",{ref:P})),n.createElement("div",{className:(0,t.cx)(E.scrollIndicator,E.scrollBottomIndicator,{[E.scrollIndicatorVisible]:v})},n.createElement(f.J,{className:g()(E.scrollIcon,E.scrollBottomIcon),name:"angle-down"})))},l=p=>({scrollContent:(0,t.css)({flex:1,position:"relative"}),scrollIndicator:(0,t.css)({height:p.spacing(6),left:0,opacity:0,pointerEvents:"none",position:"absolute",right:0,transition:p.transitions.create("opacity"),zIndex:1}),scrollTopIndicator:(0,t.css)({background:`linear-gradient(0deg, transparent, ${p.colors.background.canvas})`,top:0}),scrollBottomIndicator:(0,t.css)({background:`linear-gradient(180deg, transparent, ${p.colors.background.canvas})`,bottom:0}),scrollIndicatorVisible:(0,t.css)({opacity:1}),scrollIcon:(0,t.css)({left:"50%",position:"absolute",transform:"translateX(-50%)"}),scrollTopIcon:(0,t.css)({top:0}),scrollBottomIcon:(0,t.css)({bottom:0})}),a=({autoHide:p=!1,autoHideTimeout:h=200,setScrollTop:y,className:v,testId:i,autoHeightMin:u="0",autoHeightMax:P="100%",hideTracksWhenNotNeeded:E=!1,hideHorizontalTrack:C,hideVerticalTrack:b,scrollRefCallback:S,showScrollIndicators:M=!1,updateAfterMountMs:x,scrollTop:O,onScroll:L,children:B})=>{const w=(0,n.useRef)(null),R=(0,s.wW)(d);(0,n.useEffect)(()=>{w.current&&S&&S(w.current.view)},[w,S]),(0,n.useEffect)(()=>{w.current&&O!=null&&w.current.scrollTop(O)},[O]),(0,n.useEffect)(()=>{x&&setTimeout(()=>{const j=w.current;j?.update&&j.update()},x)},[x]);function A(j,K,z){return z.style&&K&&(z.style.display="none"),n.createElement("div",{...z,className:j})}const U=(0,n.useCallback)(j=>A("track-horizontal",C,j),[C]),I=(0,n.useCallback)(j=>A("track-vertical",b,j),[b]),N=(0,n.useCallback)(j=>n.createElement("div",{...j,className:"thumb-horizontal"}),[]),F=(0,n.useCallback)(j=>n.createElement("div",{...j,className:"thumb-vertical"}),[]),D=(0,n.useCallback)(j=>n.createElement("div",{...j,className:"scrollbar-view"}),[]),Y=(0,n.useCallback)(()=>{w.current&&y&&y(w.current.getValues())},[y]);return n.createElement(c.ZP,{"data-testid":i,ref:w,className:(0,t.cx)(R.customScrollbar,v,{[R.scrollbarWithScrollIndicators]:M}),onScrollStop:Y,autoHeight:!0,autoHide:p,autoHideTimeout:h,hideTracksWhenNotNeeded:E,autoHeightMax:P,autoHeightMin:u,renderTrackHorizontal:U,renderTrackVertical:I,renderThumbHorizontal:N,renderThumbVertical:F,renderView:D,onScroll:L},M?n.createElement(o,null,B):B)},m=a,d=p=>({customScrollbar:t.css`
      // Fix for Firefox. For some reason sometimes .view container gets a height of its content, but in order to
      // make scroll working it should fit outer container size (scroll appears only when inner container size is
      // greater than outer one).
      display: flex;
      flex-grow: 1;
      .scrollbar-view {
        display: flex;
        flex-grow: 1;
        flex-direction: column;
      }
      .track-vertical {
        border-radius: ${p.shape.borderRadius(2)};
        width: ${p.spacing(1)} !important;
        right: 0px;
        bottom: ${p.spacing(.25)};
        top: ${p.spacing(.25)};
      }
      .track-horizontal {
        border-radius: ${p.shape.borderRadius(2)};
        height: ${p.spacing(1)} !important;
        right: ${p.spacing(.25)};
        bottom: ${p.spacing(.25)};
        left: ${p.spacing(.25)};
      }
      .thumb-vertical {
        background: ${p.colors.action.focus};
        border-radius: ${p.shape.borderRadius(2)};
        opacity: 0;
      }
      .thumb-horizontal {
        background: ${p.colors.action.focus};
        border-radius: ${p.shape.borderRadius(2)};
        opacity: 0;
      }
      &:hover {
        .thumb-vertical,
        .thumb-horizontal {
          opacity: 1;
          transition: opacity 0.3s ease-in-out;
        }
      }
    `,scrollbarWithScrollIndicators:t.css`
      .scrollbar-view {
        position: static !important;
      }
    `})},89719:(H,T,e)=>{"use strict";e.d(T,{k:()=>c});var t=e(68404),n=e(31403);function c({link:s,buttonProps:r}){return t.createElement("a",{href:s.href,target:s.target,rel:"noreferrer",onClick:s.onClick?g=>{!(g.ctrlKey||g.metaKey||g.shiftKey)&&s.onClick&&(g.preventDefault(),s.onClick(g))}:void 0},t.createElement(n.zx,{icon:"external-link-alt",variant:"primary",size:"sm",...r},s.title))}},35919:(H,T,e)=>{"use strict";e.d(T,{v:()=>B});var t=e(52423),n=e(57706),c=e.n(n),s=e(68404),r=e(73934),g=e(64076),f=e(40246),o=e(56747),l=e(28151),a=e(89029),m=e(12724),d=e(67660),p=e(72648),h=e(68226),y=e(46967),v=e(85511),i=e(82897),u=e(92787),P=e(56766);const E=R=>({list:t.css`
      border-bottom: 1px solid ${R.colors.border.weak};
      &:last-child {
        border: none;
      }
    `,wrapper:t.css`
      background: ${R.colors.background.primary};
      width: 250px;
    `,item:t.css`
      background: none;
      padding: 2px 8px;
      color: ${R.colors.text.primary};
      cursor: pointer;
      &:hover {
        background: ${R.colors.action.hover};
      }
    `,label:t.css`
      color: ${R.colors.text.secondary};
    `,activeItem:t.css`
      background: ${R.colors.background.secondary};
      &:hover {
        background: ${R.colors.background.secondary};
      }
    `,itemValue:t.css`
      font-family: ${R.typography.fontFamilyMonospace};
      font-size: ${R.typography.size.sm};
    `}),C=({suggestions:R,...A})=>{const U=(0,s.useRef)(null);(0,u.Z)(U,()=>{A.onClose&&A.onClose()});const I=(0,s.useMemo)(()=>(0,i.groupBy)(R,F=>F.origin),[R]),N=(0,p.wW)(E);return s.createElement("div",{role:"menu",ref:U,className:N.wrapper},Object.keys(I).map((F,D)=>{const Y=D===0?0:Object.keys(I).reduce((j,K,z)=>z>=D?j:j+I[K].length,0);return s.createElement(b,{...A,suggestions:I[F],label:`${(0,i.capitalize)(F)}`,activeIndex:A.activeIndex,activeIndexOffset:Y,key:F})}))};C.displayName="DataLinkSuggestions";const b=s.memo(({activeIndex:R,activeIndexOffset:A,label:U,onClose:I,onSuggestionSelect:N,suggestions:F,activeRef:D})=>{const Y=(0,p.wW)(E);return s.createElement(s.Fragment,null,s.createElement(P.a,{className:Y.list,items:F,renderItem:(j,K)=>{const z=K+A===R;return s.createElement("div",{role:"menuitem",tabIndex:0,className:(0,t.cx)(Y.item,z&&Y.activeItem),ref:z?D:void 0,onClick:()=>{N(j)},title:j.documentation},s.createElement("span",{className:Y.itemValue},s.createElement("span",{className:Y.label},U)," ",j.label))}}))});b.displayName="DataLinkSuggestionsList";class S{getBoundingClientRect(){const A=window.getSelection(),U=A&&A.anchorNode;return U&&U.parentElement?U.parentElement.getBoundingClientRect():{top:0,left:0,bottom:0,right:0,width:0,height:0,x:0,y:0,toJSON:()=>{}}}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const M=(R,A)=>R-A*Math.floor(R/A),x={builtInVariable:{pattern:/(\${\S+?})/}},O=[(0,d.Z)({onlyIn:R=>R.type==="code_block",getSyntax:()=>"links"},{...c().languages,links:x})],L=R=>({input:(0,y.H)({theme:R,invalid:!1}).input,editor:t.css`
    .token.builtInVariable {
      color: ${R.colors.success.text};
    }
    .token.variable {
      color: ${R.colors.primary.text};
    }
  `,suggestionsWrapper:t.css`
    box-shadow: ${R.shadows.z2};
  `,wrapperOverrides:t.css`
    width: 100%;
    > .slate-query-field__wrapper {
      padding: 0;
      background-color: transparent;
      border: none;
    }
  `}),B=(0,s.memo)(({value:R,onChange:A,suggestions:U,placeholder:I="http://your-grafana.com/d/000000010/annotations"})=>{const N=(0,s.useRef)(null),F=(0,p.wW)(L),[D,Y]=(0,s.useState)(!1),[j,K]=(0,s.useState)(0),[z,Z]=(0,s.useState)((0,m.l1)(R)),ae=(0,g.Z)(z),[J,oe]=(0,s.useState)(0),Ee=(0,s.useRef)({showingSuggestions:D,suggestions:U,suggestionsIndex:j,linkUrl:z,onChange:A});Ee.current={showingSuggestions:D,suggestions:U,suggestionsIndex:j,linkUrl:z,onChange:A};const me=(0,s.useRef)(null);(0,s.useEffect)(()=>{oe(w(me.current,j))},[j]);const re=(0,s.useMemo)(()=>new S,[]),le=s.useCallback((Q,G)=>{if(!Ee.current.showingSuggestions)return Q.key==="="||Q.key==="$"||Q.keyCode===32&&Q.ctrlKey?Y(!0):G();switch(Q.key){case"Backspace":case"Escape":return Y(!1),K(0);case"Enter":return Q.preventDefault(),ee(Ee.current.suggestions[Ee.current.suggestionsIndex]);case"ArrowDown":case"ArrowUp":Q.preventDefault();const q=Q.key==="ArrowDown"?1:-1;return K(X=>M(X+q,Ee.current.suggestions.length));default:return G()}},[]);(0,s.useEffect)(()=>{ae&&ae.selection.isFocused&&!z.selection.isFocused&&Ee.current.onChange(f.Z.serialize(z))},[z,ae]);const pe=s.useCallback(({value:Q})=>{Z(Q)},[]),ee=(Q,G=N.current)=>{const X=se()==="$";Q.origin!==l.L.Template||Q.value===a.W.includeVars?G.insertText(`${X?"":"$"}{${Q.value}}`):G.insertText(`${X?"":"$"}{${Q.value}:queryparam}`),Z(G.value),Y(!1),K(0),Ee.current.onChange(f.Z.serialize(G.value))},se=()=>{const Q=document.getElementById("data-link-input");let G="",q,X;return window.getSelection&&(q=window.getSelection(),q&&q.rangeCount>0&&(X=q.getRangeAt(0).cloneRange(),X.collapse(!0),X.setStart(Q,0),G=X.toString().slice(-1))),G};return s.createElement("div",{className:F.wrapperOverrides},s.createElement("div",{className:"slate-query-field__wrapper"},s.createElement("div",{id:"data-link-input",className:"slate-query-field"},D&&s.createElement(v.h_,null,s.createElement(r.r,{referenceElement:re,placement:"bottom-end",modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"arrow",enabled:!1},{name:"offset",options:{offset:[250,0]}}]},({ref:Q,style:G,placement:q})=>s.createElement("div",{ref:Q,style:G,"data-placement":q,className:F.suggestionsWrapper},s.createElement(h.Z,{scrollTop:J,autoHeightMax:"300px",setScrollTop:({scrollTop:X})=>oe(X)},s.createElement(C,{activeRef:me,suggestions:Ee.current.suggestions,onSuggestionSelect:ee,onClose:()=>Y(!1),activeIndex:j}))))),s.createElement(o.ML,{schema:m.Yi,ref:N,placeholder:I,value:Ee.current.linkUrl,onChange:pe,onKeyDown:(Q,G,q)=>le(Q,q),plugins:O,className:(0,t.cx)(F.editor,F.input,t.css`
                  padding: 3px 8px;
                `)}))))});B.displayName="DataLinkInput";function w(R,A){return(R?.clientHeight??0)*A}},18543:(H,T,e)=>{"use strict";e.d(T,{V:()=>o});var t=e(52423),n=e(68404),c=e(68183),s=e(79406),r=e(74285),g=e(14391),f=e(42044);const o=({children:l,links:a,style:m})=>{const d=[{items:(0,s.R)(a),label:"Data links"}],p=d[0].items.length,h=()=>d.map((v,i)=>n.createElement(g.k,{key:`${v.label}${i}`,label:v.label},(v.items||[]).map(u=>n.createElement(f.s,{key:u.label,url:u.url,label:u.label,target:u.target,icon:u.icon,active:u.active,onClick:u.onClick})))),y=t.css`
    cursor: context-menu;
  `;if(p>1)return n.createElement(r.z,{renderMenuItems:h},({openMenu:v})=>l({openMenu:v,targetClassName:y}));{const v=a()[0];return n.createElement("a",{href:v.href,onClick:v.onClick,target:v.target,title:v.title,style:{...m,overflow:"hidden",display:"flex"},"aria-label":c.wl.components.DataLinksContextMenu.singleLink},l({}))}}},68037:(H,T,e)=>{"use strict";e.d(T,{d:()=>E});var t=e(52423),n=e(82897),c=e(68404),s=e(72648),r=e(7804),g=e(31403),f=e(35029),o=e(79406),l=e(24799),a=e(46967),m=e(8944),d=e(35919);const p=b=>({listItem:t.css`
    margin-bottom: ${b.spacing()};
  `,infoText:t.css`
    padding-bottom: ${b.spacing(2)};
    margin-left: 66px;
    color: ${b.colors.text.secondary};
  `}),h=c.memo(({index:b,value:S,onChange:M,suggestions:x,isLast:O})=>{const L=(0,s.wW)(p),B=(A,U)=>{M(b,{...S,url:A},U)},w=A=>{M(b,{...S,title:A.target.value})},R=()=>{M(b,{...S,targetBlank:!S.targetBlank})};return c.createElement("div",{className:L.listItem},c.createElement(l.g,{label:"Title"},c.createElement(a.I,{value:S.title,onChange:w,placeholder:"Show details"})),c.createElement(l.g,{label:"URL",invalid:(0,o.g)(S.url),error:"Data link is an Explore URL in a deprecated format. Please visit the URL to be redirected, and edit this data link to use that URL."},c.createElement(d.v,{value:S.url,onChange:B,suggestions:x})),c.createElement(l.g,{label:"Open in new tab"},c.createElement(m.r,{value:S.targetBlank||!1,onChange:R})),O&&c.createElement("div",{className:L.infoText},"With data links you can reference data variables like series name, labels and values. Type CMD+Space, CTRL+Space, or $ to open variable suggestions."))});h.displayName="DataLinkEditor";const y=({link:b,index:S,getSuggestions:M,onSave:x,onCancel:O})=>{const[L,B]=(0,c.useState)(b);return c.createElement(c.Fragment,null,c.createElement(h,{value:L,index:S,isLast:!1,suggestions:M(),onChange:(w,R)=>{B(R)}}),c.createElement(f.u.ButtonRow,null,c.createElement(g.zx,{variant:"secondary",onClick:()=>O(S),fill:"outline"},"Cancel"),c.createElement(g.zx,{onClick:()=>{x(S,L)}},"Save")))};var v=e(57227),i=e(8180);const u=({link:b,onEdit:S,onRemove:M})=>{const x=(0,s.l4)(),O=P(x),{title:L="",url:B=""}=b,w=L.trim()!=="",R=B.trim()!=="",A=(0,o.g)(B);return c.createElement("div",{className:O.wrapper},c.createElement("div",{className:O.titleWrapper},c.createElement("div",{className:(0,t.cx)(O.url,!R&&O.notConfigured,A&&O.errored)},w?L:"Data link title not provided"),c.createElement("div",{className:O.actionButtons},c.createElement(i.h,{name:"pen",onClick:S}),c.createElement(i.h,{name:"times",onClick:M}))),c.createElement("div",{className:(0,t.cx)(O.url,!R&&O.notConfigured,A&&O.errored),title:B},R?B:"Data link url not provided"),A&&c.createElement(v.S,null,"Explore data link may not work in the future. Please edit."))},P=(0,r.B)(b=>({wrapper:t.css`
      margin-bottom: ${b.spacing(2)};
      width: 100%;
      &:last-child {
        margin-bottom: 0;
      }
      display: flex;
      flex-direction: column;
    `,titleWrapper:t.css`
      label: data-links-list-item-title;
      justify-content: space-between;
      display: flex;
      width: 100%;
      align-items: center;
    `,actionButtons:t.css`
      margin-left: ${b.spacing(1)};
      display: flex;
    `,errored:t.css`
      color: ${b.colors.error.text};
      font-style: italic;
    `,notConfigured:t.css`
      font-style: italic;
    `,title:t.css`
      color: ${b.colors.text.primary};
      font-size: ${b.typography.size.sm};
      font-weight: ${b.typography.fontWeightMedium};
    `,url:t.css`
      color: ${b.colors.text.secondary};
      font-size: ${b.typography.size.sm};
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 90%;
    `})),E=({links:b,onChange:S,getSuggestions:M,data:x})=>{const O=(0,s.l4)(),[L,B]=(0,c.useState)(null),[w,R]=(0,c.useState)(!1),A=C(O),U=b??[],I=L!==null,N=(j,K)=>{if(w)if(K.title.trim()===""&&K.url.trim()===""){R(!1),B(null);return}else B(null),R(!1);const z=(0,n.cloneDeep)(U);z[j]=K,S(z),B(null)},F=()=>{let j=(0,n.cloneDeep)(U);B(j.length),R(!0)},D=j=>{w&&R(!1),B(null)},Y=j=>{const K=(0,n.cloneDeep)(U);K.splice(j,1),S(K)};return c.createElement(c.Fragment,null,U.length>0&&c.createElement("div",{className:A.wrapper},U.map((j,K)=>c.createElement(u,{key:`${j.title}/${K}`,index:K,link:j,onChange:N,onEdit:()=>B(K),onRemove:()=>Y(K),data:x}))),I&&L!==null&&c.createElement(f.u,{title:"Edit link",isOpen:!0,closeOnBackdropClick:!1,onDismiss:()=>{D(L)}},c.createElement(y,{index:L,link:w?{title:"",url:""}:U[L],data:x,onSave:N,onCancel:D,getSuggestions:M})),c.createElement(g.zx,{size:"sm",icon:"plus",onClick:F,variant:"secondary"},"Add link"))},C=(0,r.B)(b=>({wrapper:t.css`
      margin-bottom: ${b.spacing(2)};
    `}))},45576:(H,T,e)=>{"use strict";e.d(T,{Z:()=>g});var t=e(52423),n=e(68404),c=e(72648),s=e(39904),r=e(89719);function g({links:o}){const l=(0,c.wW)(f);if(o.length===1)return n.createElement(r.k,{link:o[0]});const a=o.filter(d=>d.target==="_blank"),m=o.filter(d=>d.target==="_self");return n.createElement(n.Fragment,null,m.map((d,p)=>n.createElement(r.k,{key:p,link:d})),n.createElement("div",{className:l.wrapper},n.createElement("p",{className:l.externalLinksHeading},"External links"),a.map((d,p)=>n.createElement("a",{key:p,href:d.href,target:d.target,className:l.externalLink},n.createElement(s.J,{name:"external-link-alt"}),d.title))))}const f=o=>({wrapper:t.css`
    flex-basis: 150px;
    width: 100px;
    margin-top: ${o.spacing(1)};
  `,externalLinksHeading:t.css`
    color: ${o.colors.text.secondary};
    font-weight: ${o.typography.fontWeightRegular};
    font-size: ${o.typography.size.sm};
    margin: 0;
  `,externalLink:t.css`
    color: ${o.colors.text.link};
    font-weight: ${o.typography.fontWeightRegular};
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;

    &:hover {
      text-decoration: underline;
    }

    div {
      margin-right: ${o.spacing(1)};
    }
  `})},64260:(H,T,e)=>{"use strict";e.d(T,{O:()=>s});var t=e(68404),n=e(8944),c=e(81764);function s({options:r,onOptionsChange:g}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Alerting"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(c._,{labelWidth:26,label:"Manage alerts via Alerting UI",disabled:r.readOnly},t.createElement(n.x,{value:r.jsonData.manageAlerts!==!1,onChange:f=>g({...r,jsonData:{...r.jsonData,manageAlerts:f.currentTarget.checked}})}))))))}},85615:(H,T,e)=>{"use strict";e.d(T,{W:()=>f});var t=e(68404),n=e(31403),c=e(81764),s=e(11543),r=e(46967),g=e(97379);const f=({hasCert:o,label:l,onChange:a,onClick:m,placeholder:d})=>t.createElement(s.Z,null,t.createElement(c._,{label:l,labelWidth:14,disabled:o},o?t.createElement(r.I,{type:"text",value:"configured",width:24}):t.createElement(g.K,{rows:7,onChange:a,placeholder:d,required:!0})),o&&t.createElement(n.zx,{variant:"secondary",onClick:m,style:{marginLeft:4}},"Reset"))},92099:(H,T,e)=>{"use strict";e.d(T,{H:()=>d});var t=e(52423),n=e(82897),c=e.n(n),s=e(68404),r=e(7804),g=e(31403),f=e(95569),o=e(39904),l=e(34517);const a=(0,r.B)(()=>({layout:t.css`
      display: flex;
      align-items: center;
      margin-bottom: 4px;
      > * {
        margin-left: 4px;
        margin-bottom: 0;
        height: 100%;
        &:first-child,
        &:last-child {
          margin-left: 0;
        }
      }
    `})),m=({header:h,onBlur:y,onChange:v,onRemove:i,onReset:u})=>{const P=a();return s.createElement("div",{className:P.layout},s.createElement(f.W,{label:"Header",name:"name",placeholder:"X-Custom-Header",labelWidth:5,value:h.name||"",onChange:E=>v({...h,name:E.target.value}),onBlur:y}),s.createElement(l.c,{label:"Value","aria-label":"Value",name:"value",isConfigured:h.configured,value:h.value,labelWidth:5,inputWidth:h.configured?11:12,placeholder:"Header Value",onReset:()=>u(h.id),onChange:E=>v({...h,value:E.target.value}),onBlur:y}),s.createElement(g.zx,{type:"button","aria-label":"Remove header",variant:"secondary",size:"xs",onClick:E=>i(h.id)},s.createElement(o.J,{name:"trash-alt"})))};m.displayName="CustomHeaderRow";class d extends s.PureComponent{constructor(y){super(y),this.state={headers:[]},this.updateSettings=()=>{const{headers:P}=this.state,E=Object.fromEntries(Object.entries(this.props.dataSourceConfig.jsonData).filter(([b,S])=>!b.startsWith("httpHeaderName"))),C=Object.fromEntries(Object.entries(this.props.dataSourceConfig.secureJsonData||{}).filter(([b,S])=>!b.startsWith("httpHeaderValue")));for(const[b,S]of P.entries())E[`httpHeaderName${b+1}`]=S.name,S.configured||(C[`httpHeaderValue${b+1}`]=S.value);this.props.onChange({...this.props.dataSourceConfig,jsonData:E,secureJsonData:C})},this.onHeaderAdd=()=>{this.setState(P=>({headers:[...P.headers,{id:(0,n.uniqueId)(),name:"",value:"",configured:!1}]}))},this.onHeaderChange=(P,E)=>{this.setState(({headers:C})=>({headers:C.map((b,S)=>P!==S?b:{...E})}))},this.onHeaderReset=P=>{this.setState(({headers:E})=>({headers:E.map((C,b)=>C.id!==P?C:{...C,value:"",configured:!1})}))},this.onHeaderRemove=P=>{this.setState(({headers:E})=>({headers:E.filter(C=>C.id!==P)}),this.updateSettings)};const{jsonData:v,secureJsonData:i,secureJsonFields:u}=this.props.dataSourceConfig;this.state={headers:Object.keys(v).sort().filter(P=>P.startsWith("httpHeaderName")).map((P,E)=>({id:(0,n.uniqueId)(),name:v[P],value:i!==void 0?i[P]:"",configured:u&&u[`httpHeaderValue${E+1}`]||!1}))}}render(){const{headers:y}=this.state,{dataSourceConfig:v}=this.props;return s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("h6",null,"Custom HTTP Headers")),s.createElement("div",null,y.map((i,u)=>s.createElement(m,{key:i.id,header:i,onChange:P=>{this.onHeaderChange(u,P)},onBlur:this.updateSettings,onRemove:this.onHeaderRemove,onReset:this.onHeaderReset}))),!v.readOnly&&s.createElement("div",{className:"gf-form"},s.createElement(g.zx,{variant:"secondary",icon:"plus",type:"button",onClick:i=>{this.onHeaderAdd()}},"Add header")))}}var p=null},12006:(H,T,e)=>{"use strict";e.d(T,{E:()=>S});var t=e(52423),n=e(68404),c=e(68183),s=e(72648),r=e(95569),g=e(19426),f=e(81764),o=e(50869),l=e(39904),a=e(53217),m=e(8944),d=e(43339),p=e(34517);const h=({dataSourceConfig:M,onChange:x})=>{const O=M.secureJsonData?M.secureJsonData.basicAuthPassword:"",L=()=>{x({...M,secureJsonData:{...M.secureJsonData,basicAuthPassword:""},secureJsonFields:{...M.secureJsonFields,basicAuthPassword:!1}})},B=w=>{x({...M,secureJsonData:{...M.secureJsonData,basicAuthPassword:w.currentTarget.value}})};return n.createElement(n.Fragment,null,n.createElement(f._,{disabled:M.readOnly},n.createElement(r.W,{label:"User",labelWidth:10,inputWidth:18,placeholder:"user",value:M.basicAuthUser,onChange:w=>x({...M,basicAuthUser:w.currentTarget.value})})),n.createElement(f._,{disabled:M.readOnly},n.createElement(p.c,{isConfigured:!!(M.secureJsonFields&&M.secureJsonFields.basicAuthPassword),value:O||"",inputWidth:18,labelWidth:10,onReset:L,onChange:B})))};var y=e(92099);const v=26,i=({dataSourceConfig:M,onChange:x,showForwardOAuthIdentityOption:O=!0})=>n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement(f._,{label:"TLS Client Auth",labelWidth:v,disabled:M.readOnly},n.createElement(m.x,{id:"http-settings-tls-client-auth",value:M.jsonData.tlsAuth||!1,onChange:L=>x({...M.jsonData,tlsAuth:L.currentTarget.checked})})),n.createElement(f._,{label:"With CA Cert",tooltip:"Needed for verifying self-signed TLS Certs",labelWidth:v,disabled:M.readOnly},n.createElement(m.x,{id:"http-settings-ca-cert",value:M.jsonData.tlsAuthWithCACert||!1,onChange:L=>x({...M.jsonData,tlsAuthWithCACert:L.currentTarget.checked})}))),n.createElement("div",{className:"gf-form-inline"},n.createElement(f._,{label:"Skip TLS Verify",labelWidth:v,disabled:M.readOnly},n.createElement(m.x,{id:"http-settings-skip-tls-verify",value:M.jsonData.tlsSkipVerify||!1,onChange:L=>x({...M.jsonData,tlsSkipVerify:L.currentTarget.checked})}))),O&&n.createElement("div",{className:"gf-form-inline"},n.createElement(f._,{label:"Forward OAuth Identity",tooltip:"Forward the user's upstream OAuth identity to the data source (Their access token gets passed along).",labelWidth:v,disabled:M.readOnly},n.createElement(m.x,{id:"http-settings-forward-oauth",value:M.jsonData.oauthPassThru||!1,onChange:L=>x({...M.jsonData,oauthPassThru:L.currentTarget.checked})}))));var u=e(23622);const P=[{label:"Server (default)",value:"proxy"},{label:"Browser",value:"direct"}],E={label:"Server (default)",value:"proxy"},C=()=>n.createElement("div",{className:"grafana-info-box m-t-2"},n.createElement("p",null,"Access mode controls how requests to the data source will be handled.",n.createElement("strong",null,"\xA0",n.createElement("i",null,"Server"))," ","should be the preferred way if nothing else is stated."),n.createElement("div",{className:"alert-title"},"Server access mode (Default):"),n.createElement("p",null,"All requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source and by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the grafana backend/server if you select this access mode."),n.createElement("div",{className:"alert-title"},"Browser access mode:"),n.createElement("p",null,"All requests will be made from the browser directly to the data source and may be subject to Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this access mode.")),b=26,S=M=>{const{defaultUrl:x,dataSourceConfig:O,onChange:L,showAccessOptions:B,sigV4AuthToggleEnabled:w,showForwardOAuthIdentityOption:R,azureAuthSettings:A,renderSigV4Editor:U}=M;let I;const[N,F]=(0,n.useState)(!1),D=(0,s.l4)(),Y=(0,n.useCallback)(oe=>{L({...O,...oe})},[O,L]);switch(O.access){case"direct":I=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.");break;case"proxy":I=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.");break;default:I="Specify a complete HTTP URL (for example http://your_server:8080)"}const j=n.createElement(a.Ph,{"aria-label":"Access",className:"width-20 gf-form-input",options:P,value:P.filter(oe=>oe.value===O.access)[0]||E,onChange:oe=>Y({access:oe.value}),disabled:O.readOnly}),K=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(O.url),z=t.css`
    box-shadow: inset 0 0px 5px ${D.v1.palette.red};
  `,Z=(0,t.cx)({["width-20"]:!0,[z]:!K}),ae=n.createElement(o.I,{className:Z,placeholder:x,value:O.url,"aria-label":c.wl.components.DataSource.DataSourceHttpSettings.urlInput,onChange:oe=>Y({url:oe.currentTarget.value}),disabled:O.readOnly}),J=A?.azureAuthSupported&&A.getAzureAuthEnabled(O)||!1;return n.createElement("div",{className:"gf-form-group"},n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"HTTP"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(r.W,{label:"URL",labelWidth:13,tooltip:I,inputEl:ae})),B&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(r.W,{label:"Access",labelWidth:13,inputWidth:20,inputEl:j})),n.createElement("div",{className:"gf-form"},n.createElement("button",{type:"button",className:"gf-form-label query-keyword pointer",onClick:()=>F(oe=>!oe)},"Help\xA0",n.createElement(l.J,{name:N?"angle-down":"angle-right",style:{marginBottom:0}})))),N&&n.createElement(C,null)),O.access==="proxy"&&n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(g.c,{width:13,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source."},"Allowed cookies"),n.createElement(d.B,{tags:O.jsonData.keepCookies,width:40,onChange:oe=>Y({jsonData:{...O.jsonData,keepCookies:oe}}),disabled:O.readOnly})),n.createElement("div",{className:"gf-form"},n.createElement(r.W,{label:"Timeout",type:"number",labelWidth:13,inputWidth:20,tooltip:"HTTP request timeout in seconds",placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:O.jsonData.timeout,onChange:oe=>{Y({jsonData:{...O.jsonData,timeout:parseInt(oe.currentTarget.value,10)}})},disabled:O.readOnly}))))),n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"Auth"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement(f._,{label:"Basic auth",labelWidth:b,disabled:O.readOnly},n.createElement(m.x,{id:"http-settings-basic-auth",value:O.basicAuth,onChange:oe=>{Y({basicAuth:oe.currentTarget.checked})}})),n.createElement(f._,{label:"With Credentials",tooltip:"Whether credentials such as cookies or auth headers should be sent with cross-site requests.",labelWidth:b,disabled:O.readOnly},n.createElement(m.x,{id:"http-settings-with-credentials",value:O.withCredentials,onChange:oe=>{Y({withCredentials:oe.currentTarget.checked})}}))),A?.azureAuthSupported&&n.createElement("div",{className:"gf-form-inline"},n.createElement(f._,{label:"Azure Authentication",tooltip:"Use Azure authentication for Azure endpoint.",labelWidth:b,disabled:O.readOnly},n.createElement(m.x,{id:"http-settings-azure-auth",value:J,onChange:oe=>{Y(A.setAzureAuthEnabled(O,oe.currentTarget.checked))}}))),w&&n.createElement("div",{className:"gf-form-inline"},n.createElement(f._,{label:"SigV4 auth",labelWidth:b,disabled:O.readOnly},n.createElement(m.x,{id:"http-settings-sigv4-auth",value:O.jsonData.sigV4Auth||!1,onChange:oe=>{Y({jsonData:{...O.jsonData,sigV4Auth:oe.currentTarget.checked}})}}))),O.access==="proxy"&&n.createElement(i,{dataSourceConfig:O,onChange:oe=>Y({jsonData:oe}),showForwardOAuthIdentityOption:R})),O.basicAuth&&n.createElement(n.Fragment,null,n.createElement("h6",null,"Basic Auth Details"),n.createElement("div",{className:"gf-form-group"},n.createElement(h,{...M}))),A?.azureAuthSupported&&J&&A.azureSettingsUI&&n.createElement(A.azureSettingsUI,{dataSourceConfig:O,onChange:L}),O.jsonData.sigV4Auth&&w&&U,(O.jsonData.tlsAuth||O.jsonData.tlsAuthWithCACert)&&n.createElement(u.s,{dataSourceConfig:O,onChange:L}),O.access==="proxy"&&n.createElement(y.H,{dataSourceConfig:O,onChange:L})))}},12580:(H,T,e)=>{"use strict";e.d(T,{i:()=>s});var t=e(68404),n=e(8944),c=e(81764);function s({options:r,onOptionsChange:g}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Secure Socks Proxy"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(c._,{labelWidth:26,label:"Enabled",tooltip:"Connect to this datasource via the secure socks proxy."},t.createElement(n.x,{value:r.jsonData.enableSecureSocksProxy??!1,onChange:f=>g({...r,jsonData:{...r.jsonData,enableSecureSocksProxy:f.currentTarget.checked}})}))))))}},23622:(H,T,e)=>{"use strict";e.d(T,{s:()=>f});var t=e(52423),n=e(68404),c=e(95569),s=e(39904),r=e(61860),g=e(85615);const f=({dataSourceConfig:o,onChange:l})=>{const a=o.secureJsonFields&&o.secureJsonFields.tlsCACert,m=o.secureJsonFields&&o.secureJsonFields.tlsClientCert,d=o.secureJsonFields&&o.secureJsonFields.tlsClientKey,p=o.jsonData&&o.jsonData.serverName,h=i=>u=>{u.preventDefault();const P={...o.secureJsonFields};P[i]=!1,l({...o,secureJsonFields:P})},y=i=>u=>{const P={...o.secureJsonData};P[i]=u.currentTarget.value,l({...o,secureJsonData:P})},v=i=>{const u={...o.jsonData,serverName:i.currentTarget.value};l({...o,jsonData:u})};return n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:(0,t.cx)("gf-form",t.css`
            align-items: baseline;
          `)},n.createElement("h6",null,"TLS/SSL Auth Details"),n.createElement(r.u,{placement:"right-end",content:"TLS/SSL Certs are encrypted and stored in the Grafana database.",theme:"info"},n.createElement("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal"},n.createElement(s.J,{name:"info-circle",size:"xs",style:{marginLeft:"10px"}})))),n.createElement("div",null,o.jsonData.tlsAuthWithCACert&&n.createElement(g.W,{hasCert:!!a,onChange:y("tlsCACert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",label:"CA Cert",onClick:h("tlsCACert")}),o.jsonData.tlsAuth&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form"},n.createElement(c.W,{label:"ServerName",labelWidth:7,inputWidth:30,placeholder:"domain.example.com",value:p&&o.jsonData.serverName,onChange:v})),n.createElement(g.W,{hasCert:!!m,label:"Client Cert",onChange:y("tlsClientCert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",onClick:h("tlsClientCert")}),n.createElement(g.W,{hasCert:!!d,label:"Client Key",placeholder:"Begins with -----BEGIN RSA PRIVATE KEY-----",onChange:y("tlsClientKey"),onClick:h("tlsClientKey")}))))}},77239:(H,T,e)=>{"use strict";e.d(T,{M:()=>o});var t=e(52423),n=e(68404),c=e(41644),s=e(72648),r=e(94437),g=e(39904),f=e(36290);const o=(0,n.memo)(m=>{const d=(0,s.wW)(a),{isOpen:p,onClose:h}=m;return p?n.createElement(r.L,{useCapture:!0,includeButtonPress:!1,onClick:h},n.createElement("div",{className:d.modal,"data-testid":"date-picker"},n.createElement(l,{...m}))):null});o.displayName="DatePicker";const l=(0,n.memo)(({value:m,minDate:d,maxDate:p,onChange:h})=>{const y=(0,s.wW)(f.mg);return n.createElement(c.ZP,{className:y.body,tileClassName:y.title,value:m||new Date,minDate:d,maxDate:p,nextLabel:n.createElement(g.J,{name:"angle-right"}),prevLabel:n.createElement(g.J,{name:"angle-left"}),onChange:v=>{Array.isArray(v)||h(v)},locale:"en"})});l.displayName="Body";const a=m=>({modal:t.css`
      z-index: ${m.zIndex.modal};
      position: absolute;
      box-shadow: ${m.shadows.z3};
      background-color: ${m.colors.background.primary};
      border: 1px solid ${m.colors.border.weak};
      border-radius: 2px 0 0 2px;

      button:disabled {
        color: ${m.colors.text.disabled};
      }
    `})},86348:(H,T,e)=>{"use strict";e.d(T,{d:()=>o});var t=e(52423),n=e(68404),c=e(46519),s=e(72648),r=e(46967),g=e(77239);const f=a=>(0,c.CQ)(a).format("L"),o=({value:a,minDate:m,maxDate:d,onChange:p,closeOnSelect:h,placeholder:y="Date",...v})=>{const[i,u]=n.useState(!1),P=(0,s.wW)(l);return n.createElement("div",{className:P.container},n.createElement(r.I,{type:"text",autoComplete:"off",placeholder:y,value:a&&f(a),onClick:()=>u(!0),onChange:E=>{E.target.value===""&&p("")},className:P.input,...v}),n.createElement(g.M,{isOpen:i,value:a&&typeof a!="string"?a:(0,c.CQ)().toDate(),minDate:m,maxDate:d,onChange:E=>{p(E),h&&u(!1)},onClose:()=>u(!1)}))},l=()=>({container:t.css`
      position: relative;
    `,input:t.css`
    /* hides the native Calendar picker icon given when using type=date */
    input[type='date']::-webkit-inner-spin-button,
    input[type='date']::-webkit-calendar-picker-indicator {
    display: none;
    -webkit-appearance: none;
    `})},35575:(H,T,e)=>{"use strict";e.d(T,{x:()=>M});var t=e(52423),n=e(99510),c=e(81699),s=e(6665),r=e(68404),g=e(41644),f=e(11979),o=e(47597),l=e(38849),a=e(46519),m=e(85511),d=e(31403),p=e(81764),h=e(46967),y=e(39904),v=e(52081),i=e(72648),u=e(27581),P=e(91942),E=e(36290),C=e(21053),b=e(85052);function S(B,w,R){return(0,a.v9)(B)?B.isValid():C.isMathString(B)?C.isValid(B):(0,b.J)(B,{roundUp:w,timeZone:R}).isValid()}const M=({date:B,maxDate:w,label:R,onChange:A})=>{const[U,I]=(0,r.useState)(!1),N=(0,r.useRef)(null),{overlayProps:F,underlayProps:D}=(0,s.Ir)({onClose:()=>I(!1),isDismissable:!0,isOpen:U},N),{dialogProps:Y}=(0,n.R)({},N),j=(0,i.l4)(),{modalBackdrop:K}=(0,u.J)(j),z=(0,o.Z)(`(min-width: ${j.breakpoints.values.lg}px)`),Z=(0,i.wW)(L),[ae,J]=(0,r.useState)(),[oe,Ee]=(0,r.useState)(),me=(0,f.D)(ae,oe,{placement:"bottom-start"}),re=(0,r.useCallback)(pe=>{I(!1),A(pe)},[A]),le=(0,r.useCallback)(pe=>{pe.preventDefault(),I(!0)},[I]);return r.createElement("div",{"data-testid":"date-time-picker",style:{position:"relative"}},r.createElement(x,{date:B,onChange:A,isFullscreen:z,onOpen:le,label:R,ref:J}),U?z?r.createElement(m.h_,null,r.createElement(c.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},r.createElement("div",{ref:N,...F,...Y},r.createElement(O,{date:B,onChange:re,isFullscreen:!0,onClose:()=>I(!1),maxDate:w,ref:Ee,style:me.styles.popper})))):r.createElement(m.h_,null,r.createElement("div",{className:K,...D}),r.createElement(c.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},r.createElement("div",{ref:N,...F,...Y},r.createElement("div",{className:Z.modal},r.createElement(O,{date:B,onChange:re,isFullscreen:!1,onClose:()=>I(!1)}))))):null)},x=r.forwardRef(({date:B,label:w,onChange:R,isFullscreen:A,onOpen:U},I)=>{const[N,F]=(0,r.useState)(()=>({value:B?(0,l.dq)(B):(0,l.dq)((0,a.CQ)()),invalid:!1}));(0,r.useEffect)(()=>{B&&F({invalid:!S((0,l.dq)(B)),value:(0,a.v9)(B)?(0,l.dq)(B):B})},[B]);const D=(0,r.useCallback)(K=>{const z=!S(K.currentTarget.value);F({value:K.currentTarget.value,invalid:z})},[]),Y=(0,r.useCallback)(()=>{(0,a.v9)(N.value)&&R((0,a.CQ)(N.value))},[N.value,R]),j=r.createElement(d.zx,{"aria-label":"Time picker",icon:"calendar-alt",variant:"secondary",onClick:U});return r.createElement(p._,{label:w,invalid:!!(N.value&&N.invalid),className:t.css`
          margin-bottom: 0;
        `},r.createElement(h.I,{onChange:D,addonAfter:j,value:N.value,onBlur:Y,"data-testid":"date-time-input",placeholder:"Select date/time",ref:I}))});x.displayName="DateTimeInput";const O=r.forwardRef(({date:B,onClose:w,onChange:R,isFullscreen:A,maxDate:U,style:I},N)=>{const F=(0,i.wW)(E.mg),D=(0,i.wW)(L),[Y,j]=(0,r.useState)(()=>B&&B.isValid()?B.toDate():new Date),K=(0,r.useCallback)(Z=>{Array.isArray(Z)||j(ae=>(Z.setHours(ae.getHours()),Z.setMinutes(ae.getMinutes()),Z.setSeconds(ae.getSeconds()),Z))},[]),z=(0,r.useCallback)(Z=>{j(Z.toDate())},[]);return r.createElement("div",{className:(0,t.cx)(D.container,{[D.fullScreen]:A}),style:I,ref:N},r.createElement(g.ZP,{next2Label:null,prev2Label:null,value:Y,nextLabel:r.createElement(y.J,{name:"angle-right"}),nextAriaLabel:"Next month",prevLabel:r.createElement(y.J,{name:"angle-left"}),prevAriaLabel:"Previous month",onChange:K,locale:"en",className:F.body,tileClassName:F.title,maxDate:U}),r.createElement("div",{className:D.time},r.createElement(P.y,{showSeconds:!0,onChange:z,value:(0,a.CQ)(Y)})),r.createElement(v.Lh,null,r.createElement(d.zx,{type:"button",onClick:()=>R((0,a.CQ)(Y))},"Apply"),r.createElement(d.zx,{variant:"secondary",type:"button",onClick:w},"Cancel")))});O.displayName="DateTimeCalendar";const L=B=>({container:t.css`
    padding: ${B.spacing(1)};
    border: 1px ${B.colors.border.weak} solid;
    border-radius: ${B.shape.borderRadius(1)};
    background-color: ${B.colors.background.primary};
    z-index: ${B.zIndex.modal};
  `,fullScreen:t.css`
    position: absolute;
  `,time:t.css`
    margin-bottom: ${B.spacing(2)};
  `,modal:t.css`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: ${B.zIndex.modal};
    max-width: 280px;
  `})},19115:(H,T,e)=>{"use strict";e.d(T,{x:()=>C});var t=e(52423),n=e(99510),c=e(81699),s=e(6665),r=e(68404),g=e(11979),f=e(72648),o=e(37951),l=e(31403),a=e(68226),m=e(24799),d=e(39904),p=e(46967),h=e(85511),y=e(61860),v=e(65012),i=e(98574),u=e(21356),P=e(25482);const E=u.r.filter(O=>(0,P.jD)(O.from));function C(O){const{timeRange:L,onChange:B}=O,[w,R]=(0,r.useState)(!1),A=(0,r.useCallback)(()=>R(!1),[]),U=(0,P.C_)(L),[I,N]=(0,r.useState)({value:U.from,validation:(0,P.x5)(U.from)}),[F,D]=(0,r.useState)({value:U.to,validation:(0,P.x5)(U.to)}),Y=(0,r.useRef)(null),{overlayProps:j,underlayProps:K}=(0,s.Ir)({onClose:()=>R(!1),isDismissable:!0,isOpen:w},Y),{dialogProps:z}=(0,n.R)({},Y),[Z,ae]=(0,r.useState)(null),[J,oe]=(0,r.useState)(null),Ee=(0,g.D)(Z,J,{placement:"auto-start"}),me=(0,f.wW)(M(I.validation.errorMessage,F.validation.errorMessage)),re=ee=>{const se=(0,P.aw)(ee);se&&(A(),N({...I,value:ee.from}),D({...F,value:ee.to}),B(se))},le=(0,r.useCallback)(ee=>{ee.stopPropagation(),ee.preventDefault(),R(!w)},[w]),pe=ee=>{if(ee.preventDefault(),!F.validation.isValid||!I.validation.isValid)return;const se=(0,P.aw)({from:I.value,to:F.value,display:""});se&&(B(se),R(!1))};return r.createElement("div",{className:me.container,ref:ae},r.createElement("button",{className:me.pickerInput,type:"button",onClick:le},r.createElement("span",{className:me.clockIcon},r.createElement(d.J,{name:"clock-nine"})),r.createElement("span",null,U.from," to ",U.to),r.createElement("span",{className:me.caretIcon},r.createElement(d.J,{name:w?"angle-up":"angle-down",size:"lg"}))),w&&r.createElement(h.h_,null,r.createElement("div",{role:"presentation",className:me.backdrop,...K}),r.createElement(c.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},r.createElement("div",{ref:Y,...j,...z},r.createElement("div",{className:me.content,ref:oe,style:Ee.styles.popper,...Ee.attributes},r.createElement("div",{className:me.body},r.createElement(a.Z,{className:me.leftSide,hideHorizontalTrack:!0},r.createElement(i.V,{title:(0,o.t)("time-picker.time-range.example-title","Example time ranges"),options:E,onChange:re,value:U})),r.createElement("div",{className:me.rightSide},r.createElement("div",{className:me.title},r.createElement(v.r,null,r.createElement(y.u,{content:r.createElement(b,null),placement:"bottom",theme:"info"},r.createElement("div",null,r.createElement(o.c,{i18nKey:"time-picker.time-range.specify"},"Specify time range ",r.createElement(d.J,{name:"info-circle"})))))),r.createElement(m.g,{label:"From",invalid:!I.validation.isValid,error:I.validation.errorMessage},r.createElement(p.I,{onClick:ee=>ee.stopPropagation(),onBlur:()=>N({...I,validation:(0,P.x5)(I.value)}),onChange:ee=>N({...I,value:ee.currentTarget.value}),value:I.value})),r.createElement(m.g,{label:"To",invalid:!F.validation.isValid,error:F.validation.errorMessage},r.createElement(p.I,{onClick:ee=>ee.stopPropagation(),onBlur:()=>D({...F,validation:(0,P.x5)(F.value)}),onChange:ee=>D({...F,value:ee.currentTarget.value}),value:F.value})),r.createElement(l.zx,{"aria-label":"TimePicker submit button",onClick:pe},"Apply time range"))))))))}const b=()=>{const O=(0,f.wW)(S);return r.createElement(r.Fragment,null,r.createElement("div",{className:O.supported},"Supported formats: ",r.createElement("code",{className:O.tooltip},"now-[digit]s/m/h/d/w")),r.createElement("div",null,"Example: to select a time range from 10 minutes ago to now"),r.createElement("code",{className:O.tooltip},"From: now-10m To: now"),r.createElement("div",{className:O.link},"For more information see"," ",r.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/"},"docs ",r.createElement(d.J,{name:"external-link-alt"})),"."))},S=O=>({supported:t.css`
    margin-bottom: ${O.spacing(1)};
  `,tooltip:t.css`
    margin: 0;
  `,link:t.css`
    margin-top: ${O.spacing(1)};
  `}),M=(O,L)=>B=>{const w=(0,p.H)({theme:B,invalid:!1}),A=250+x(B,O)+x(B,L);return{backdrop:t.css`
      position: fixed;
      z-index: ${B.zIndex.modalBackdrop};
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    `,container:t.css`
      display: flex;
      position: relative;
    `,pickerInput:(0,t.cx)(w.input,w.wrapper,t.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        padding-left: 0;
        line-height: ${B.spacing.gridSize*B.components.height.md-2}px;
      `),caretIcon:(0,t.cx)(w.suffix,t.css`
        position: relative;
        margin-left: ${B.spacing(.5)};
      `),clockIcon:(0,t.cx)(w.prefix,t.css`
        position: relative;
        margin-right: ${B.spacing(.5)};
      `),content:t.css`
      background: ${B.colors.background.primary};
      box-shadow: ${B.shadows.z3};
      position: absolute;
      z-index: ${B.zIndex.modal};
      width: 500px;
      top: 100%;
      border-radius: 2px;
      border: 1px solid ${B.colors.border.weak};
      left: 0;
      white-space: normal;
    `,body:t.css`
      display: flex;
      height: ${A}px;
    `,description:t.css`
      color: ${B.colors.text.secondary};
      font-size: ${B.typography.size.sm};
    `,leftSide:t.css`
      width: 50% !important;
      border-right: 1px solid ${B.colors.border.medium};
    `,rightSide:t.css`
      width: 50%;
      padding: ${B.spacing(1)};
    `,title:t.css`
      margin-bottom: ${B.spacing(1)};
    `}};function x(O,L){return L?L.length>34?O.spacing.gridSize*6.5:O.spacing.gridSize*4:0}},25482:(H,T,e)=>{"use strict";e.d(T,{C_:()=>c,aw:()=>n,jD:()=>r,x5:()=>s});const t=/^now$|^now\-(\d{1,10})([wdhms])$/,n=l=>({from:g(l.from),to:g(l.to)}),c=l=>{const a=o(l.from),m=o(l.to);return{from:a,to:m,display:`${a} to ${m}`}},s=(l,a=Date.now())=>r(l)?g(l)>Math.ceil(a/1e3)?{isValid:!1,errorMessage:"Can not enter value prior to January 1, 1970."}:{isValid:!0}:{isValid:!1,errorMessage:"Value not in relative time format."},r=l=>t.test(l),g=l=>{const a=t.exec(l);if(!a||a.length!==3)return 0;const[,m,d]=a,p=parseInt(m,10);return isNaN(p)?0:p*f[d]},f={w:604800,d:86400,h:3600,m:60,s:1},o=l=>l<=0?"now":l>=f.w&&l%f.w===0?`now-${l/f.w}w`:l>=f.d&&l%f.d===0?`now-${l/f.d}d`:l>=f.h&&l%f.h===0?`now-${l/f.h}h`:l>=f.m&&l%f.m===0?`now-${l/f.m}m`:`now-${l}s`},91942:(H,T,e)=>{"use strict";e.d(T,{y:()=>l});var t=e(52423),n=e(63960),c=e(68404),s=e(46519),r=e(72648),g=e(39904),f=e(85419),o=e(73267);const l=({minuteStep:d=1,showHour:p=!0,showSeconds:h=!1,onChange:y,value:v,size:i="auto",disabled:u})=>{const P=(0,r.wW)(m);return c.createElement(n.Z,{className:(0,t.cx)((0,o.ht)()[i],P.input),popupClassName:P.picker,defaultValue:(0,s.C_)(),onChange:E=>y((0,s.CQ)(E)),allowEmpty:!1,showSecond:h,value:(0,s.C_)(v),showHour:p,minuteStep:d,inputIcon:c.createElement(a,{wrapperStyle:P.caretWrapper}),disabled:u})},a=({wrapperStyle:d=""})=>c.createElement("div",{className:d},c.createElement(g.J,{name:"angle-down"})),m=d=>{const p=d.components.input.background,h=d.v1.palette.black,y=d.colors.background.secondary,v=d.shape.borderRadius(1),i=d.components.input.borderColor;return{caretWrapper:t.css`
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      text-align: right;
      color: ${d.colors.text.secondary};
    `,picker:t.css`
      .rc-time-picker-panel-select {
        font-size: 14px;
        background-color: ${p};
        border-color: ${i};
        li {
          outline-width: 2px;
          &.rc-time-picker-panel-select-option-selected {
            background-color: inherit;
            border: 1px solid ${d.v1.palette.orange};
            border-radius: ${v};
          }

          &:hover {
            background: ${y};
          }
        }
      }

      .rc-time-picker-panel-inner {
        box-shadow: 0px 4px 4px ${h};
        background-color: ${p};
        border-color: ${i};
        border-radius: ${v};
        margin-top: 3px;

        .rc-time-picker-panel-input-wrap {
          margin-right: 2px;

          &,
          .rc-time-picker-panel-input {
            background-color: ${p};
            padding-top: 2px;
          }
        }

        .rc-time-picker-panel-combobox {
          display: flex;
        }
      }
    `,input:t.css`
      .rc-time-picker-input {
        background-color: ${p};
        border-radius: ${v};
        border-color: ${i};
        height: ${d.spacing(4)};

        &:focus {
          ${(0,f.focusCss)(d)}
        }

        &:disabled {
          background-color: ${d.colors.action.disabledBackground};
          color: ${d.colors.action.disabledText};
          border: 1px solid ${d.colors.action.disabledBackground};
          &:focus {
            box-shadow: none;
          }
        }
      }
    `}}},95794:(H,T,e)=>{"use strict";e.d(T,{K:()=>i});var t=e(52423),n=e(68404),c=e(21053),s=e(46519),r=e(69311),g=e(68183),f=e(7804),o=e(72648),l=e(94437),a=e(39904),m=e(46967),d=e(3630),p=e(99489),h=e(21356);const y=P=>c.isValid(P.from)&&c.isValid(P.to),v=()=>{},i=({value:P,onChange:E,onChangeTimeZone:C=v,clearable:b,hideTimeZone:S=!0,timeZone:M="browser",placeholder:x="Select time range",isReversed:O=!0,hideQuickRanges:L=!1,disabled:B=!1})=>{const[w,R]=(0,n.useState)(!1),A=(0,o.l4)(),U=u(A,B),I=Y=>{Y.stopPropagation(),Y.preventDefault(),!B&&R(!w)},N=()=>{R(!1)},F=Y=>{N(),E(Y)},D=Y=>{Y.stopPropagation();const j=(0,s.CQ)(null),K=(0,s.CQ)(null);E({from:j,to:K,raw:{from:j,to:K}})};return n.createElement("div",{className:U.container},n.createElement("button",{type:"button",className:U.pickerInput,"aria-label":g.wl.components.TimePicker.openButton,onClick:I},y(P)?n.createElement(d.sU,{value:P,timeZone:M}):n.createElement("span",{className:U.placeholder},x),!B&&n.createElement("span",{className:U.caretIcon},y(P)&&b&&n.createElement(a.J,{className:U.clearIcon,name:"times",size:"lg",onClick:D}),n.createElement(a.J,{name:w?"angle-up":"angle-down",size:"lg"}))),w&&n.createElement(l.L,{includeButtonPress:!1,onClick:N},n.createElement(p.x,{timeZone:M,value:y(P)?P:(0,r.JK)(),onChange:F,quickOptions:h.r,onChangeTimeZone:C,className:U.content,hideTimeZone:S,isReversed:O,hideQuickRanges:L})))},u=(0,f.B)((P,E=!1)=>{const C=(0,m.H)({theme:P,invalid:!1});return{container:t.css`
      display: flex;
      position: relative;
    `,content:t.css`
      margin-left: 0;
      position: absolute;
      top: 116%;
      z-index: ${P.zIndex.dropdown};
    `,pickerInput:(0,t.cx)(C.input,E&&C.inputDisabled,C.wrapper,t.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        line-height: ${P.spacing.gridSize*4-2}px;
      `),caretIcon:(0,t.cx)(C.suffix,t.css`
        position: relative;
        top: -1px;
        margin-left: ${P.spacing(.5)};
      `),clearIcon:t.css`
      margin-right: ${P.spacing(.5)};
      &:hover {
        color: ${P.colors.text.maxContrast};
      }
    `,placeholder:t.css`
      color: ${P.colors.text.disabled};
      opacity: 1;
    `}})},3630:(H,T,e)=>{"use strict";e.d(T,{IF:()=>b,Xc:()=>E,sU:()=>S});var t=e(52423),n=e(99510),c=e(81699),s=e(6665),r=e(68404),g=e(46519),f=e(38849),o=e(38306),l=e(33180),a=e(21053),m=e(68183),d=e(72648),p=e(37951),h=e(26202),y=e(27581),v=e(64319),i=e(61860),u=e(99489),P=e(21356);function E(L){const[B,w]=(0,r.useState)(!1),{value:R,onMoveBackward:A,onMoveForward:U,onZoom:I,timeZone:N,fiscalYearStartMonth:F,timeSyncButton:D,isSynced:Y,history:j,onChangeTimeZone:K,onChangeFiscalYearStartMonth:z,hideQuickRanges:Z,widthOverride:ae,isOnCanvas:J}=L,oe=Be=>{L.onChange(Be),w(!1)},Ee=Be=>{Be.stopPropagation(),Be.preventDefault(),w(!B)},me=()=>{w(!1)},re=(0,r.createRef)(),{overlayProps:le,underlayProps:pe}=(0,s.Ir)({onClose:me,isDismissable:!0,isOpen:B},re),{dialogProps:ee}=(0,n.R)({},re),se=(0,d.l4)(),Q=(0,d.wW)(x),{modalBackdrop:G}=(0,y.J)(se),q=(0,g.v9)(R.raw.from)||(0,g.v9)(R.raw.to),X=Y?"active":J?"canvas":"default",de=M(R,N);return r.createElement(h.h,{className:Q.container},q&&r.createElement(v.h,{"aria-label":(0,p.t)("time-picker.range-picker.backwards-time-aria-label","Move time range backwards"),variant:X,onClick:A,icon:"angle-left",narrow:!0}),r.createElement(i.u,{content:r.createElement(b,{timeRange:R,timeZone:N}),placement:"bottom",interactive:!0},r.createElement(v.h,{"data-testid":m.wl.components.TimePicker.openButton,"aria-label":(0,p.t)("time-picker.range-picker.current-time-selected","Time range selected: {{currentTimeRange}}",{currentTimeRange:de}),"aria-controls":"TimePickerContent",onClick:Ee,icon:"clock-nine",isOpen:B,variant:X},r.createElement(S,{...L}))),B&&r.createElement("div",null,r.createElement("div",{role:"presentation",className:(0,t.cx)(G,Q.backdrop),...pe}),r.createElement(c.MT,{contain:!0,autoFocus:!0},r.createElement("section",{className:Q.content,ref:re,...le,...ee},r.createElement(u.x,{timeZone:N,fiscalYearStartMonth:F,value:R,onChange:oe,quickOptions:P.r,history:j,showHistory:!0,widthOverride:ae,onChangeTimeZone:K,onChangeFiscalYearStartMonth:z,hideQuickRanges:Z})))),D,q&&r.createElement(v.h,{"aria-label":(0,p.t)("time-picker.range-picker.forwards-time-aria-label","Move time range forwards"),onClick:U,icon:"angle-right",narrow:!0,variant:X}),r.createElement(i.u,{content:C,placement:"bottom"},r.createElement(v.h,{"aria-label":(0,p.t)("time-picker.range-picker.zoom-out-button","Zoom out time range"),onClick:I,icon:"search-minus",variant:X})))}E.displayName="TimeRangePicker";const C=()=>r.createElement(r.Fragment,null,r.createElement(p.c,{i18nKey:"time-picker.range-picker.zoom-out-tooltip"},"Time range zoom out ",r.createElement("br",null)," CTRL+Z")),b=({timeRange:L,timeZone:B})=>{const w=(0,d.wW)(O);return r.createElement(r.Fragment,null,(0,f.dq)(L.from,{timeZone:B}),r.createElement("div",{className:"text-center"},r.createElement(p.c,{i18nKey:"time-picker.range-picker.to"},"to")),(0,f.dq)(L.to,{timeZone:B}),r.createElement("div",{className:"text-center"},r.createElement("span",{className:w.utc},(0,o.Vs)(B))))},S=(0,r.memo)(({hideText:L,value:B,timeZone:w})=>{const R=(0,d.wW)(O);return L?null:r.createElement("span",{className:R.container},r.createElement("span",null,M(B,w)),r.createElement("span",{className:R.utc},l.describeTimeRangeAbbreviation(B,w)))});S.displayName="TimePickerButtonLabel";const M=(L,B)=>{const w={to:a.isMathString(L.raw.to)?L.raw.to:L.to,from:a.isMathString(L.raw.from)?L.raw.from:L.from};return l.describeTimeRange(w,B)},x=L=>({container:t.css`
      position: relative;
      display: flex;
      vertical-align: middle;
    `,backdrop:(0,t.css)({display:"none",[L.breakpoints.down("sm")]:{display:"block"}}),content:(0,t.css)({position:"absolute",right:0,top:"116%",zIndex:L.zIndex.dropdown,[L.breakpoints.down("sm")]:{position:"fixed",right:"50%",top:"50%",transform:"translate(50%, -50%)",zIndex:L.zIndex.modal}})}),O=L=>({container:t.css`
      display: flex;
      align-items: center;
      white-space: nowrap;
    `,utc:t.css`
      color: ${L.v1.palette.orange};
      font-size: ${L.typography.size.sm};
      padding-left: 6px;
      line-height: 28px;
      vertical-align: bottom;
      font-weight: ${L.typography.fontWeightMedium};
    `})},36290:(H,T,e)=>{"use strict";e.d(T,{mg:()=>d,uT:()=>o});var t=e(52423),n=e(68404),c=e(41644),s=e(46519),r=e(85052),g=e(72648),f=e(39904);function o({onChange:p,from:h,to:y,timeZone:v}){const i=l(h,y),u=a(p,v),P=(0,g.wW)(d);return n.createElement(c.ZP,{selectRange:!0,next2Label:null,prev2Label:null,className:P.body,tileClassName:P.title,value:i,nextLabel:n.createElement(f.J,{name:"angle-right"}),prevLabel:n.createElement(f.J,{name:"angle-left"}),onChange:u,locale:"en"})}o.displayName="Body";function l(p,h,y=new Date){const v=p.toDate(),i=h.toDate(),u=(0,s.CQ)(v).isValid()?v:y,P=(0,s.CQ)(i).isValid()?i:y;return u>P?[P,u]:[u,P]}function a(p,h){return(0,n.useCallback)(y=>{if(!Array.isArray(y))return console.error("onCalendarChange: should be run in selectRange={true}");const v=(0,r.J)(m(y[0]),{timeZone:h}),i=(0,r.J)(m(y[1]),{timeZone:h});p(v,i)},[p,h])}function m(p){return[p.getFullYear(),p.getMonth(),p.getDate(),p.getHours(),p.getMinutes(),p.getSeconds()]}const d=p=>{const h=".react-calendar__tile--hasActive:not(.react-calendar__tile--range)";return{title:t.css`
      color: ${p.colors.text.primary};
      background-color: ${p.colors.background.primary};
      font-size: ${p.typography.size.md};
      border: 1px solid transparent;

      &:hover {
        position: relative;
      }
    `,body:t.css`
      z-index: ${p.zIndex.modal};
      background-color: ${p.colors.background.primary};
      width: 268px;

      .react-calendar__navigation {
        display: flex;
      }

      .react-calendar__navigation__label,
      .react-calendar__navigation__arrow,
      .react-calendar__navigation {
        padding-top: 4px;
        background-color: inherit;
        color: ${p.colors.text.primary};
        border: 0;
        font-weight: ${p.typography.fontWeightMedium};
      }

      .react-calendar__month-view__weekdays {
        background-color: inherit;
        text-align: center;
        color: ${p.colors.primary.text};

        abbr {
          border: 0;
          text-decoration: none;
          cursor: default;
          display: block;
          padding: 4px 0 4px 0;
        }
      }

      .react-calendar__month-view__days {
        background-color: inherit;
      }

      .react-calendar__tile,
      .react-calendar__tile--now {
        margin-bottom: 4px;
        background-color: inherit;
        height: 26px;
      }

      .react-calendar__navigation__label,
      .react-calendar__navigation > button:focus,
      .time-picker-calendar-tile:focus {
        outline: 0;
      }

      ${h},
      .react-calendar__tile--active,
      .react-calendar__tile--active:hover {
        color: ${p.colors.primary.contrastText};
        font-weight: ${p.typography.fontWeightMedium};
        background: ${p.colors.primary.main};
        box-shadow: none;
        border: 0px;
      }

      .react-calendar__tile--rangeEnd,
      .react-calendar__tile--rangeStart {
        padding: 0;
        border: 0px;
        color: ${p.colors.primary.contrastText};
        font-weight: ${p.typography.fontWeightMedium};
        background: ${p.colors.primary.main};

        abbr {
          background-color: ${p.colors.primary.main};
          border-radius: 100px;
          display: block;
          padding-top: 2px;
          height: 26px;
        }
      }

      ${h},
      .react-calendar__tile--rangeStart {
        border-top-left-radius: 20px;
        border-bottom-left-radius: 20px;
      }

      ${h},
      .react-calendar__tile--rangeEnd {
        border-top-right-radius: 20px;
        border-bottom-right-radius: 20px;
      }
    `}}},99489:(H,T,e)=>{"use strict";e.d(T,{x:()=>X});var t=e(52423),n=e(68404),c=e(46519),s=e(33180),r=e(68183),g=e(14747),f=e(72648),o=e(7804),l=e(85419),a=e(37951),m=e(68226),d=e(39904),p=e(82897),h=e(38306),y=e(2594),v=e(24799),i=e(53217),u=e(31403),P=e(52566),E=e(64612),C=e(4883),b=e(10516),S=e(21356);const M=Re=>{const{timeZone:_e,fiscalYearStartMonth:et,timestamp:qe=Date.now(),onChangeTimeZone:Je,onChangeFiscalYearStartMonth:lt}=Re,[at,Xe]=(0,n.useState)(!1),[gt,ot]=(0,n.useState)("tz"),Ye=(0,n.useCallback)(Te=>{Te&&Te.stopPropagation(),Xe(!at)},[at,Xe]),mt=(0,f.l4)(),ce=x(mt);if(!(0,p.isString)(_e))return null;const be=(0,h.Pr)(_e,qe);return be?n.createElement("div",null,n.createElement("section",{"aria-label":(0,a.t)("time-picker.footer.time-zone-selection","Time zone selection"),className:ce.container},n.createElement("div",{className:ce.timeZoneContainer},n.createElement("div",{className:ce.timeZone},n.createElement(b.d,{title:be.name}),n.createElement("div",{className:ce.spacer}),n.createElement(E.K,{info:be})),n.createElement(C.v,{timeZone:_e,timestamp:qe})),n.createElement("div",{className:ce.spacer}),n.createElement(u.zx,{variant:"secondary",onClick:Ye,size:"sm"},n.createElement(a.c,{i18nKey:"time-picker.footer.change-settings-button"},"Change time settings"))),at?n.createElement("div",{className:ce.editContainer},n.createElement("div",null,n.createElement(y.S,{value:gt,options:[{label:(0,a.t)("time-picker.footer.time-zone-option","Time zone"),value:"tz"},{label:(0,a.t)("time-picker.footer.fiscal-year-option","Fiscal year"),value:"fy"}],onChange:ot})),gt==="tz"?n.createElement("section",{"data-testid":r.wl.components.TimeZonePicker.containerV2,className:(0,t.cx)(ce.timeZoneContainer,ce.timeSettingContainer)},n.createElement(P.O,{includeInternal:!0,onChange:Te=>{Ye(),(0,p.isString)(Te)&&Je(Te)},onBlur:Ye})):n.createElement("section",{"aria-label":r.wl.components.TimeZonePicker.containerV2,className:(0,t.cx)(ce.timeZoneContainer,ce.timeSettingContainer)},n.createElement(v.g,{className:ce.fiscalYearField,label:(0,a.t)("time-picker.footer.fiscal-year-start","Fiscal year start month")},n.createElement(i.Ph,{value:et,menuShouldPortal:!1,options:S.E,onChange:Te=>{lt&&lt(Te.value??0)}})))):null):null},x=(0,o.B)(Re=>({container:t.css`
      border-top: 1px solid ${Re.colors.border.weak};
      padding: 11px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
    `,editContainer:t.css`
      border-top: 1px solid ${Re.colors.border.weak};
      padding: 11px;
      justify-content: space-between;
      align-items: center;
      padding: 7px;
    `,spacer:t.css`
      margin-left: 7px;
    `,timeSettingContainer:t.css`
      padding-top: ${Re.spacing(1)};
    `,fiscalYearField:t.css`
      margin-bottom: 0px;
    `,timeZoneContainer:t.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      flex-grow: 1;
    `,timeZone:t.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
      flex-grow: 1;
    `}));var O=e(65012),L=e(85052),B=e(38849),w=e(21053),R=e(61860),A=e(46967),U=e(99510),I=e(81699),N=e(6665),F=e(27581),D=e(36290);function Y({onClose:Re,onApply:_e}){const et=(0,f.wW)(j);return n.createElement("div",{className:et.container},n.createElement(u.zx,{className:et.apply,onClick:_e},n.createElement(a.c,{i18nKey:"time-picker.calendar.apply-button"},"Apply time range")),n.createElement(u.zx,{variant:"secondary",onClick:Re},n.createElement(a.c,{i18nKey:"time-picker.calendar.cancel-button"},"Cancel")))}Y.displayName="Footer";const j=Re=>({container:t.css`
      background-color: ${Re.colors.background.primary};
      display: flex;
      justify-content: center;
      padding: 10px;
      align-items: stretch;
    `,apply:t.css`
      margin-right: 4px;
      width: 100%;
      justify-content: center;
    `});function K({onClose:Re}){const _e=(0,f.wW)(z);return n.createElement("div",{className:_e.container},n.createElement(O.r,null,n.createElement(a.c,{i18nKey:"time-picker.calendar.select-time"},"Select a time range")),n.createElement(u.zx,{"aria-label":r.wl.components.TimePicker.calendar.closeButton,icon:"times",variant:"secondary",onClick:Re}))}K.displayName="Header";const z=Re=>({container:t.css`
      background-color: ${Re.colors.background.primary};
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 7px;
    `}),Z=(Re,_e=!1)=>({container:t.css`
      top: 0px;
      position: absolute;
      ${_e?"left":"right"}: 544px;
      box-shadow: ${Re.shadows.z3};
      background-color: ${Re.colors.background.primary};
      z-index: -1;
      border: 1px solid ${Re.colors.border.weak};
      border-radius: 2px 0 0 2px;

      &:after {
        display: block;
        background-color: ${Re.colors.background.primary};
        width: 19px;
        height: 100%;
        content: ${_e?"":" "};
        position: absolute;
        top: 0;
        right: -19px;
        border-left: 1px solid ${Re.colors.border.weak};
      }
    `,modal:t.css`
      box-shadow: ${Re.shadows.z3};
      left: 50%;
      position: fixed;
      top: 50%;
      transform: translate(-50%, -50%);
      z-index: ${Re.zIndex.modal};
    `,content:t.css`
      margin: 0 auto;
      width: 268px;
    `});function ae(Re){const _e=(0,f.l4)(),{modalBackdrop:et}=(0,F.J)(_e),qe=Z(_e,Re.isReversed),{isOpen:Je,isFullscreen:lt,onClose:at}=Re,Xe=n.createRef(),{dialogProps:gt}=(0,U.R)({"aria-label":r.wl.components.TimePicker.calendar.label},Xe),{overlayProps:ot}=(0,N.Ir)({isDismissable:!0,isOpen:Je,onClose:at},Xe);return Je?lt?n.createElement(I.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},n.createElement("section",{className:qe.container,ref:Xe,...ot,...gt},n.createElement(K,{...Re}),n.createElement(D.uT,{...Re}))):n.createElement(N.Xj,null,n.createElement("div",{className:et}),n.createElement(I.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},n.createElement("section",{className:qe.modal,ref:Xe,...ot,...gt},n.createElement("div",{className:qe.content,"aria-label":r.wl.components.TimePicker.calendar.label},n.createElement(K,{...Re}),n.createElement(D.uT,{...Re}),n.createElement(Y,{...Re}))))):null}const J=(0,n.memo)(ae);ae.displayName="TimePickerCalendar";const oe={default:()=>(0,a.t)("time-picker.range-content.default-error",'Please enter a past date or "now"'),range:()=>(0,a.t)("time-picker.range-content.range-error",`"From" can't be after "To"`)},Ee=Re=>{const{value:_e,isFullscreen:et=!1,timeZone:qe,onApply:Je,isReversed:lt,fiscalYearStartMonth:at}=Re,[Xe,gt]=re(_e.raw.from,_e.raw.to,qe),ot=(0,f.wW)(ee),[Ye,mt]=(0,n.useState)(Xe),[ce,be]=(0,n.useState)(gt),[Te,Ke]=(0,n.useState)(!1);(0,n.useEffect)(()=>{const[Ze,Se]=re(_e.raw.from,_e.raw.to,qe);mt(Ze),be(Se)},[_e.raw.from,_e.raw.to,qe]);const ge=(0,n.useCallback)(Ze=>{Ze.preventDefault(),Ke(!0)},[Ke]),Me=(0,n.useCallback)(()=>{if(ce.invalid||Ye.invalid)return;const Ze={from:Ye.value,to:ce.value},Se=s.convertRawToRange(Ze,qe,at);Je(Se)},[Ye.invalid,Ye.value,Je,qe,ce.invalid,ce.value,at]),ye=(0,n.useCallback)((Ze,Se)=>{const[Ue,Qe]=re(Ze,Se,qe);mt(Ue),be(Qe)},[qe]),fe=Ze=>{Ze.key==="Enter"&&Me()},he=s.convertRawToRange({from:"now/fy",to:"now/fy"},qe,at),De=(0,a.t)("time-picker.range-content.fiscal-year","Fiscal year"),Ae=n.createElement("div",{className:ot.tooltip},s.isFiscal(_e)?n.createElement(R.u,{content:`${De}: ${he.from.format("MMM-DD")} - ${he.to.format("MMM-DD")}`},n.createElement(d.J,{name:"info-circle"})):null),Ne=n.createElement(u.zx,{"aria-label":r.wl.components.TimePicker.calendar.openButton,icon:"calendar-alt",variant:"secondary",type:"button",onClick:ge});return n.createElement("div",null,n.createElement("div",{className:ot.fieldContainer},n.createElement(v.g,{label:(0,a.t)("time-picker.range-content.from-input","From"),invalid:Ye.invalid,error:Ye.errorMessage},n.createElement(A.I,{onClick:Ze=>Ze.stopPropagation(),onChange:Ze=>ye(Ze.currentTarget.value,ce.value),addonAfter:Ne,onKeyDown:fe,"aria-label":r.wl.components.TimePicker.fromField,value:Ye.value})),Ae),n.createElement("div",{className:ot.fieldContainer},n.createElement(v.g,{label:(0,a.t)("time-picker.range-content.to-input","To"),invalid:ce.invalid,error:ce.errorMessage},n.createElement(A.I,{onClick:Ze=>Ze.stopPropagation(),onChange:Ze=>ye(Ye.value,Ze.currentTarget.value),addonAfter:Ne,onKeyDown:fe,"aria-label":r.wl.components.TimePicker.toField,value:ce.value})),Ae),n.createElement(u.zx,{"data-testid":r.wl.components.TimePicker.applyTimeRange,type:"button",onClick:Me},n.createElement(a.c,{i18nKey:"time-picker.range-content.apply-button"},"Apply time range")),n.createElement(J,{isFullscreen:et,isOpen:Te,from:(0,L.J)(Ye.value),to:(0,L.J)(ce.value),onApply:Me,onClose:()=>Ke(!1),onChange:ye,timeZone:qe,isReversed:lt}))};function me(Re,_e,et){const qe={from:Re,to:_e},Je=s.convertRawToRange(qe,et);return!(Je.from.isSame(Je.to)||Je.from.isBefore(Je.to))}function re(Re,_e,et){const qe=le(Re,et),Je=le(_e,et),lt=!pe(qe,!1,et),at=!pe(Je,!0,et),Xe=me(qe,Je,et)&&!at;return[{value:qe,invalid:lt||Xe,errorMessage:Xe&&!lt?oe.range():oe.default()},{value:Je,invalid:at,errorMessage:oe.default()}]}function le(Re,_e){return(0,c.v9)(Re)?(0,B.dq)(Re,{timeZone:_e}):Re}function pe(Re,_e,et){return(0,c.v9)(Re)?Re.isValid():w.isMathString(Re)?w.isValid(Re):(0,L.J)(Re,{roundUp:_e,timeZone:et}).isValid()}function ee(Re){return{fieldContainer:t.css`
      display: flex;
    `,tooltip:t.css`
      padding-left: ${Re.spacing(1)};
      padding-top: ${Re.spacing(3)};
    `}}var se=e(98574);const Q=(Re,_e)=>s.convertRawToRange({from:Re.from,to:Re.to},_e),G=(Re,_e)=>{const et=(0,B.dq)(Re.from,{timeZone:_e}),qe=(0,B.dq)(Re.to,{timeZone:_e});return{from:et,to:qe,display:`${et} to ${qe}`}},q=Re=>{const{quickOptions:_e=[],isReversed:et,isFullscreen:qe,hideQuickRanges:Je,timeZone:lt,fiscalYearStartMonth:at,value:Xe,onChange:gt,history:ot,showHistory:Ye,className:mt,hideTimeZone:ce,onChangeTimeZone:be,onChangeFiscalYearStartMonth:Te}=Re,Ke=!ot?.length,ge=qe&&Ye||!qe&&(Ye&&!Ke||!Je),Me=(0,f.l4)(),ye=Oe(Me,et,Je,ge,qe),fe=He(ot,lt),he=ue(Xe.raw,_e),[De,Ae]=(0,n.useState)(""),Ne=_e.filter(Se=>Se.display.toLowerCase().includes(De.toLowerCase())),Ze=Se=>gt(Q(Se));return n.createElement("div",{id:"TimePickerContent",className:(0,t.cx)(ye.container,mt)},n.createElement("div",{className:ye.body},(!qe||!Je)&&n.createElement("div",{className:ye.rightSide},n.createElement("div",{className:ye.timeRangeFilter},n.createElement(g.H,{width:0,autoFocus:!0,value:De,onChange:Ae,placeholder:(0,a.t)("time-picker.content.filter-placeholder","Search quick ranges")})),n.createElement(m.$,null,!qe&&n.createElement(de,{...Re,historyOptions:fe}),!Je&&n.createElement(se.V,{options:Ne,onChange:Ze,value:he}))),qe&&n.createElement("div",{className:ye.leftSide},n.createElement(Be,{...Re,historyOptions:fe}))),!ce&&qe&&n.createElement(M,{timeZone:lt,fiscalYearStartMonth:at,onChangeTimeZone:be,onChangeFiscalYearStartMonth:Te}))},X=Re=>{const{widthOverride:_e}=Re,et=(0,f.l4)(),qe=(_e||window.innerWidth)>=et.breakpoints.values.lg;return n.createElement(q,{...Re,isFullscreen:qe})},de=Re=>{const{value:_e,hideQuickRanges:et,onChange:qe,timeZone:Je,historyOptions:lt=[],showHistory:at}=Re,Xe=(0,f.l4)(),gt=Fe(Xe),ot=(0,c.v9)(_e.raw.from)||(0,c.v9)(_e.raw.to),[Ye,mt]=(0,n.useState)(!ot),ce=et?!1:Ye,be=Te=>qe(Q(Te,Je));return n.createElement("fieldset",null,n.createElement("div",{className:gt.header},n.createElement("button",{type:"button",className:gt.expandButton,onClick:()=>{et||mt(!ce)},"data-testid":r.wl.components.TimePicker.absoluteTimeRangeTitle,"aria-expanded":!ce,"aria-controls":"expanded-timerange"},n.createElement(O.r,null,n.createElement(a.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range")),!et&&n.createElement(d.J,{name:ce?"angle-down":"angle-up"}))),!ce&&n.createElement("div",{className:gt.body,id:"expanded-timerange"},n.createElement("div",{className:gt.form},n.createElement(Ee,{value:_e,onApply:qe,timeZone:Je,isFullscreen:!1})),at&&n.createElement(se.V,{title:(0,a.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:lt,onChange:be,placeholderEmpty:null})))},Be=Re=>{const{onChange:_e,value:et,timeZone:qe,fiscalYearStartMonth:Je,isReversed:lt,historyOptions:at}=Re,Xe=(0,f.l4)(),gt=Ie(Xe,Re.hideQuickRanges),ot=Ye=>_e(Q(Ye,qe));return n.createElement(n.Fragment,null,n.createElement("div",{className:gt.container},n.createElement("div",{className:gt.title,"data-testid":r.wl.components.TimePicker.absoluteTimeRangeTitle},n.createElement(O.r,null,n.createElement(a.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range"))),n.createElement(Ee,{value:et,timeZone:qe,fiscalYearStartMonth:Je,onApply:_e,isFullscreen:!0,isReversed:lt})),Re.showHistory&&n.createElement("div",{className:gt.recent},n.createElement(se.V,{title:(0,a.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:at||[],onChange:ot,placeholderEmpty:n.createElement(ke,null)})))},ke=(0,n.memo)(()=>{const Re=(0,f.l4)(),_e=we(Re);return n.createElement("div",{className:_e.container},n.createElement(a.c,{i18nKey:"time-picker.content.empty-recent-list"},n.createElement("div",null,n.createElement("span",null,"It looks like you haven't used this time picker before. As soon as you enter some time intervals, recently used intervals will appear here.")),n.createElement("div",null,n.createElement("a",{className:_e.link,href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls",target:"_new"},"Read the documentation"),n.createElement("span",null," to find out more about how to enter custom time ranges."))))});function He(Re,_e){return!Array.isArray(Re)||Re.length===0?[]:Re.map(et=>G(et,_e))}ke.displayName="EmptyRecentList";const ue=(Re,_e)=>(0,n.useMemo)(()=>{if(s.isRelativeTimeRange(Re))return _e.find(et=>et.from===Re.from&&et.to===Re.to)},[Re,_e]),Oe=(0,o.B)((Re,_e,et,qe,Je)=>({container:t.css`
      background: ${Re.colors.background.primary};
      box-shadow: ${Re.shadows.z3};
      width: ${Je?"546px":"262px"};
      border-radius: 2px;
      border: 1px solid ${Re.colors.border.weak};
      ${_e?"left":"right"}: 0;
    `,body:t.css`
      display: flex;
      flex-direction: row-reverse;
      height: ${qe?"381px":"217px"};
    `,leftSide:t.css`
      display: flex;
      flex-direction: column;
      border-right: ${_e?"none":`1px solid ${Re.colors.border.weak}`};
      width: ${et?"100%":"60%"};
      overflow: hidden;
      order: ${_e?1:0};
    `,rightSide:t.css`
      width: ${Je?"40%":"100%"}; !important;
      border-right: ${_e?`1px solid ${Re.colors.border.weak}`:"none"};
      display: flex;
      flex-direction: column;
    `,timeRangeFilter:t.css`
      padding: ${Re.spacing(1)};
    `,spacing:t.css`
      margin-top: 16px;
    `})),Fe=(0,o.B)(Re=>({header:t.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid ${Re.colors.border.weak};
      padding: 7px 9px 7px 9px;
    `,expandButton:t.css`
      background-color: transparent;
      border: none;
      display: flex;
      width: 100%;

      &:focus-visible {
        ${(0,l.getFocusStyles)(Re)}
      }
    `,body:t.css`
      border-bottom: 1px solid ${Re.colors.border.weak};
    `,form:t.css`
      padding: 7px 9px 7px 9px;
    `})),Ie=(0,o.B)((Re,_e)=>({container:t.css`
      padding-top: 9px;
      padding-left: 11px;
      padding-right: ${_e?"11px":"20%"};
    `,title:t.css`
      margin-bottom: 11px;
    `,recent:t.css`
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding-top: ${Re.spacing(1)};
    `})),we=(0,o.B)(Re=>({container:t.css`
      padding: 12px;
      margin: 12px;

      a,
      span {
        font-size: 13px;
      }\
    `,link:t.css`
      color: ${Re.colors.text.link};
    `}))},65012:(H,T,e)=>{"use strict";e.d(T,{r:()=>r});var t=e(52423),n=e(68404),c=e(72648);const s=g=>({text:t.css`
      font-size: ${g.typography.size.md};
      font-weight: ${g.typography.fontWeightMedium};
      color: ${g.colors.text.primary};
      margin: 0;
      display: flex;
    `}),r=(0,n.memo)(({children:g})=>{const f=(0,c.wW)(s);return n.createElement("h3",{className:f.text},g)});r.displayName="TimePickerTitle"},98574:(H,T,e)=>{"use strict";e.d(T,{V:()=>p});var t=e(52423),n=e(68404),c=e(7804),s=e(37951),r=e(65012),g=e(44288),f=e(72648),o=e(85419);const l=i=>({container:t.css`
      display: flex;
      align-items: center;
      flex-direction: row-reverse;
      justify-content: space-between;
    `,selected:t.css`
      background: ${i.colors.action.selected};
      font-weight: ${i.typography.fontWeightMedium};
    `,radio:t.css`
      opacity: 0;
      width: 0 !important;

      &:focus-visible + label {
        ${(0,o.getFocusStyles)(i)};
      }
    `,label:t.css`
      cursor: pointer;
      flex: 1;
      padding: 7px 9px 7px 9px;

      &:hover {
        background: ${i.colors.action.hover};
        cursor: pointer;
      }
    `}),a=(0,n.memo)(({value:i,onSelect:u,selected:P=!1,name:E})=>{const C=(0,f.wW)(l),b=(0,g.Z)();return n.createElement("li",{className:(0,t.cx)(C.container,P&&C.selected)},n.createElement("input",{className:C.radio,checked:P,name:E,type:"checkbox",id:b,onChange:()=>u(i)}),n.createElement("label",{className:C.label,htmlFor:b},i.display))});a.displayName="TimeRangeOption";const m=(0,c.B)(()=>({title:t.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 16px 5px 9px;
    `})),d=(0,c.B)(()=>({grow:t.css`
      flex-grow: 1;
      align-items: flex-start;
    `})),p=i=>{const u=m(),{title:P,options:E,placeholderEmpty:C}=i;return typeof C<"u"&&E.length<=0?n.createElement(n.Fragment,null,C):P?n.createElement("section",{"aria-label":P},n.createElement("fieldset",null,n.createElement("div",{className:u.title},n.createElement(r.r,null,P)),n.createElement(h,{...i}))):n.createElement(h,{...i})},h=({options:i,value:u,onChange:P,title:E})=>{const C=d();return n.createElement(n.Fragment,null,n.createElement("ul",{"aria-roledescription":(0,s.t)("time-picker.time-range.aria-role","Time range selection")},i.map((b,S)=>n.createElement(a,{key:y(b,S),value:b,selected:v(b,u),onSelect:P,name:E??(0,s.t)("time-picker.time-range.default-title","Time ranges")}))),n.createElement("div",{className:C.grow}))};function y(i,u){return`${i.from}-${i.to}-${u}`}function v(i,u){return!u||!i?!1:u.from===i.from&&u.to===i.to}},52566:(H,T,e)=>{"use strict";e.d(T,{O:()=>P});var t=e(82897),n=e(68404),c=e(38306),s=e(37951),r=e(53217),g=e(52423),f=e(72648);const o=x=>{const{children:O,label:L}=x,B=(0,f.wW)(l);return L?n.createElement("div",null,n.createElement("div",{className:B.header},n.createElement("span",{className:B.label},L)),O):n.createElement("div",null,O)},l=x=>({header:g.css`
      padding: 7px 10px;
      width: 100%;
      border-top: 1px solid ${x.colors.border.weak};
      text-transform: capitalize;
    `,label:g.css`
      font-size: ${x.typography.size.sm};
      color: ${x.colors.text.secondary};
      font-weight: ${x.typography.fontWeightMedium};
    `});var a=e(4883),m=e(7804),d=e(39904),p=e(64612),h=e(10516);const y="tz-utc-offset",v=(x,O)=>{const{children:L,innerProps:B,innerRef:w,data:R,isSelected:A,isFocused:U}=x,I=(0,f.l4)(),N=u(I),F=Date.now(),D=(0,g.cx)(N.container,U&&N.containerFocused);if(!(0,t.isString)(R.value))return null;const Y=(0,c.Pr)(R.value,F);return n.createElement("div",{className:D,...B,ref:w,"aria-label":"Select option"},n.createElement("div",{className:(0,g.cx)(N.leftColumn,N.row)},n.createElement("div",{className:(0,g.cx)(N.leftColumn,N.wideRow)},n.createElement(h.d,{title:L}),n.createElement("div",{className:N.spacer}),n.createElement(p.K,{info:Y})),n.createElement("div",{className:N.rightColumn},n.createElement(a.v,{timeZone:Y?.ianaName||R.value,timestamp:F,className:y}),A&&n.createElement("span",null,n.createElement(d.J,{name:"check"})))))},i=(x,O)=>{const{children:L,innerProps:B,innerRef:w,data:R,isSelected:A,isFocused:U}=x,I=(0,f.l4)(),N=u(I),F=Date.now(),D=(0,g.cx)(N.container,U&&N.containerFocused);if(!(0,t.isString)(R.value))return null;const Y=(0,c.Pr)(R.value,F);return n.createElement("div",{className:D,...B,ref:w,"aria-label":"Select option"},n.createElement("div",{className:N.body},n.createElement("div",{className:N.row},n.createElement("div",{className:N.leftColumn},n.createElement(h.d,{title:L})),n.createElement("div",{className:N.rightColumn},A&&n.createElement("span",null,n.createElement(d.J,{name:"check"})))),n.createElement("div",{className:N.row},n.createElement("div",{className:N.leftColumn},n.createElement(p.K,{info:Y})),n.createElement("div",{className:N.rightColumn},n.createElement(a.v,{timestamp:F,timeZone:Y?.ianaName||R.value,className:y})))))},u=(0,m.B)(x=>({container:g.css`
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      padding: 6px 8px 4px;

      &:hover {
        background: ${x.colors.action.hover};
      }
    `,containerFocused:g.css`
      background: ${x.colors.action.hover};
    `,body:g.css`
      display: flex;
      font-weight: ${x.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,row:g.css`
      display: flex;
      flex-direction: row;
    `,leftColumn:g.css`
      flex-grow: 1;
      text-overflow: ellipsis;
    `,rightColumn:g.css`
      justify-content: flex-end;
      align-items: center;
    `,wideRow:g.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
    `,spacer:g.css`
      margin-left: 6px;
    `})),P=x=>{const{onChange:O,width:L,autoFocus:B=!1,onBlur:w,value:R,includeInternal:A=!1,disabled:U=!1,inputId:I}=x,N=E(A),F=C(N,R),D=S(),Y=L&&L<=45?i:v,j=(0,n.useCallback)(K=>{if(!K||!(0,t.isString)(K.value))return O(R);O(K.value)},[O,R]);return n.createElement(r.Ph,{inputId:I,value:F,placeholder:(0,s.t)("time-picker.zone.select-search-input","Type to search (country, city, abbreviation)"),autoFocus:B,menuShouldPortal:!1,openMenuOnFocus:!0,width:L,filterOption:D,options:N,onChange:j,onBlur:w,components:{Option:Y,Group:o},disabled:U,"aria-label":(0,s.t)("time-picker.zone.select-aria-label","Time zone picker")})},E=x=>{const O=Date.now();return(0,c.$8)(x).map(B=>{const w=B.zones.reduce((R,A)=>{const U=(0,c.Pr)(A,O);return U&&R.push({label:U.name,value:U.zone,searchIndex:M(U,O)}),R},[]);return{label:B.name,options:w}})},C=(x,O)=>(0,n.useMemo)(()=>{if(O===void 0)return;const L=(0,t.toLower)(O);return x.find(w=>w.label?L.startsWith((0,t.toLower)(w.label)):b(L))?.options.find(w=>(0,t.isEmpty)(L)?w.value===c.RQ.default:(0,t.toLower)(w.value)===L)},[x,O]),b=x=>{switch(x){case c.RQ.default:case c.RQ.localBrowserTime:case c.RQ.utc:return!0;default:return!1}},S=()=>(0,n.useCallback)((x,O)=>!O||!x.data||!x.data.searchIndex?!0:x.data.searchIndex.indexOf((0,t.toLower)(O))>-1,[]),M=(x,O)=>{const L=[(0,t.toLower)(x.name),(0,t.toLower)(x.abbreviation),(0,t.toLower)((0,a.k)(O,x.zone))];for(const B of x.countries)L.push((0,t.toLower)(B.name)),L.push((0,t.toLower)(B.code));return L.join("|")}},64612:(H,T,e)=>{"use strict";e.d(T,{K:()=>s});var t=e(52423),n=e(68404),c=e(72648);const s=({info:f})=>{const o=(0,c.wW)(g),l=r(f);return f?n.createElement("div",{className:o.description},l):null},r=f=>(0,n.useMemo)(()=>{const o=[];if(!f)return"";if(f.countries.length>0){const l=f.countries[0];o.push(l.name)}return f.abbreviation&&o.push(f.abbreviation),o.join(", ")},[f]),g=f=>({description:t.css`
      font-weight: normal;
      font-size: ${f.typography.size.sm};
      color: ${f.colors.text.secondary};
      white-space: normal;
      text-overflow: ellipsis;
    `})},4883:(H,T,e)=>{"use strict";e.d(T,{k:()=>o,v:()=>f});var t=e(52423),n=e(82897),c=e.n(n),s=e(68404),r=e(38849),g=e(72648);const f=a=>{const{timestamp:m,timeZone:d,className:p}=a,h=(0,g.wW)(l);return(0,n.isString)(d)?s.createElement(s.Fragment,null,s.createElement("span",{className:(0,t.cx)(h.offset,p)},o(m,d))):null},o=(a,m)=>{const d=(0,r.dq)(a,{timeZone:m,format:"Z"});return d==="+00:00"?"UTC":`UTC${d}`},l=a=>{const m=t.css`
    font-weight: normal;
    font-size: ${a.typography.size.sm};
    color: ${a.colors.text.secondary};
    white-space: normal;
  `;return{offset:t.css`
      ${m};
      color: ${a.colors.text.primary};
      background: ${a.colors.background.secondary};
      padding: 2px 5px;
      border-radius: 2px;
      margin-left: 4px;
    `}}},10516:(H,T,e)=>{"use strict";e.d(T,{d:()=>s});var t=e(52423),n=e(68404),c=e(72648);const s=({title:g})=>{const f=(0,c.wW)(r);return g?n.createElement("span",{className:f.title},g):null},r=g=>({title:t.css`
      font-weight: ${g.typography.fontWeightRegular};
      text-overflow: ellipsis;
    `})},80124:(H,T,e)=>{"use strict";e.d(T,{z:()=>r});var t=e(68404),n=e(68183),c=e(53217);const s=[{value:"",label:"Default"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"}],r=g=>{const{onChange:f,width:o,autoFocus:l=!1,onBlur:a,value:m,disabled:d=!1,inputId:p}=g,h=(0,t.useCallback)(y=>{y.value!==void 0&&f(y.value)},[f]);return t.createElement(c.Ph,{inputId:p,value:s.find(y=>y.value===m)?.value,placeholder:n.wl.components.WeekStartPicker.placeholder,autoFocus:l,openMenuOnFocus:!0,width:o,options:s,onChange:h,onBlur:a,disabled:d})}},21356:(H,T,e)=>{"use strict";e.d(T,{E:()=>n,r:()=>t});const t=[{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],n=[{label:"January",value:0},{label:"February",value:1},{label:"March",value:2},{label:"April",value:3},{label:"May",value:4},{label:"June",value:5},{label:"July",value:6},{label:"August",value:7},{label:"September",value:8},{label:"October",value:9},{label:"November",value:10},{label:"December",value:11}]},30979:(H,T,e)=>{"use strict";e.d(T,{d:()=>m});var t=e(52423),n=e(99510),c=e(81699),s=e(6665),r=e(15352),g=e(68404),f=e(68183),o=e(72648),l=e(68226),a=e(8180);function m({children:p,inline:h=!1,onClose:y,closeOnMaskClick:v=!0,scrollableContent:i=!1,title:u,subtitle:P,width:E="40%",expandable:C=!1,tabs:b}){const S=(0,o.wW)(d),[M,x]=(0,g.useState)(!1),[O,L]=(0,g.useState)(!1),B=M?"100%":E,w=g.useRef(null),{dialogProps:R,titleProps:A}=(0,n.R)({},w),{overlayProps:U}=(0,s.Ir)({isDismissable:!1,isOpen:O,onClose:y},w);(0,g.useEffect)(()=>{L(!0)},[]);const I=g.createElement("div",{className:S.content},p),N={};return h&&(N.position="absolute"),g.createElement(r.Z,{open:O,onClose:y,placement:"right",width:B,getContainer:h?void 0:"body",style:N,className:S.drawerContent,rootClassName:S.drawer,motion:{motionAppear:!0,motionName:S.drawerMotion},maskClassName:S.mask,maskClosable:v,maskMotion:{motionAppear:!0,motionName:S.maskMotion}},g.createElement(c.MT,{restoreFocus:!0,contain:!0,autoFocus:!0},g.createElement("div",{"aria-label":typeof u=="string"?f.wl.components.Drawer.General.title(u):f.wl.components.Drawer.General.title("no title"),className:S.container,...U,...R,ref:w},typeof u=="string"&&g.createElement("div",{className:S.header},g.createElement("div",{className:S.actions},C&&!M&&g.createElement(a.h,{name:"angle-left",size:"xl",onClick:()=>x(!0),"aria-label":f.wl.components.Drawer.General.expand}),C&&M&&g.createElement(a.h,{name:"angle-right",size:"xl",onClick:()=>x(!1),"aria-label":f.wl.components.Drawer.General.contract}),g.createElement(a.h,{name:"times",size:"xl",onClick:y,"aria-label":f.wl.components.Drawer.General.close})),g.createElement("div",{className:S.titleWrapper},g.createElement("h3",{...A},u),typeof P=="string"&&g.createElement("div",{className:"muted"},P),typeof P!="string"&&P,b&&g.createElement("div",{className:S.tabsWrapper},b))),typeof u!="string"&&u,g.createElement("div",{className:S.contentScroll},i?g.createElement(l.$,{autoHeightMin:"100%"},I):I))))}const d=p=>({container:t.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      flex: 1 1 0;
    `,drawer:t.css`
      .rc-drawer-content-wrapper {
        box-shadow: ${p.shadows.z3};

        ${p.breakpoints.down("sm")} {
          width: 100% !important;
        }
      }
    `,drawerContent:t.css`
      background-color: ${p.colors.background.primary} !important;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      z-index: ${p.zIndex.dropdown};
    `,drawerMotion:t.css`
      &-appear {
        transform: translateX(100%);
        transition: none !important;

        &-active {
          transition: ${p.transitions.create("transform")} !important;
          transform: translateX(0);
        }
      }
    `,mask:t.css`
      background-color: ${p.components.overlay.background} !important;
      backdrop-filter: blur(1px);
    `,maskMotion:t.css`
      &-appear {
        opacity: 0;

        &-active {
          opacity: 1;
          transition: ${p.transitions.create("opacity")};
        }
      }
    `,header:t.css`
      background-color: ${p.colors.background.canvas};
      flex-grow: 0;
      padding-top: ${p.spacing(.5)};
    `,actions:t.css`
      display: flex;
      align-items: baseline;
      justify-content: flex-end;
    `,titleWrapper:t.css`
      margin-bottom: ${p.spacing(3)};
      padding: ${p.spacing(0,1,0,3)};
      overflow-wrap: break-word;
    `,content:(0,t.css)({padding:p.spacing(2),height:"100%",flexGrow:1}),contentScroll:(0,t.css)({minHeight:0,flex:1}),tabsWrapper:(0,t.css)({paddingLeft:p.spacing(2),margin:p.spacing(3,-1,-3,-3)})})},44342:(H,T,e)=>{"use strict";e.d(T,{d:()=>h});var t=e(52423),n=e(35210),c=e(81699),s=e(9815),r=e(91053),g=e(68404),f=e(72648),o=e(26202),l=e(94437),a=e(38484),m=e(42044),d=e(64319);const p=v=>{const{className:i,options:u,value:P,onChange:E,narrow:C,variant:b,...S}=v,M=(0,f.wW)(y),x=(0,r.W)({}),O=g.useRef(null),{menuTriggerProps:L,menuProps:B}=(0,s.u4)({},x,O),{buttonProps:w}=(0,n.U)(L,O),R=A=>{E(A),x.close()};return g.createElement(o.h,{className:M.wrapper},g.createElement(d.h,{className:i,isOpen:x.isOpen,narrow:C,variant:b,ref:O,...w,...S},P?.label||P?.value),x.isOpen&&g.createElement("div",{className:M.menuWrapper},g.createElement(l.L,{onClick:x.close,parent:document,includeButtonPress:!1},g.createElement(c.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},g.createElement(a.v,{tabIndex:-1,onClose:x.close,...B},u.map(A=>g.createElement(m.s,{key:`${A.value}`,label:A.label||A.value,onClick:()=>R(A),active:A.value===P?.value,ariaChecked:A.value===P?.value,ariaLabel:A.ariaLabel||A.label,role:"menuitemradio"})))))))};p.displayName="ButtonSelect";const h=g.memo(p),y=v=>({wrapper:t.css`
      position: relative;
      display: inline-flex;
    `,menuWrapper:t.css`
      position: absolute;
      z-index: ${v.zIndex.dropdown};
      top: ${v.spacing(4)};
      right: 0;
    `})},71698:(H,T,e)=>{"use strict";e.d(T,{L:()=>o});var t=e(52423),n=e(81699),c=e(68404),s=e(85361),r=e(22163),g=e(61970),f=e(85511);const o=c.memo(({children:a,overlay:m,placement:d,offset:p,onVisibleChange:h})=>{const[y,v]=(0,c.useState)(!1),i=(0,c.useRef)(null);(0,c.useEffect)(()=>{h?.(y)},[h,y]);const{getArrowProps:u,getTooltipProps:P,setTooltipRef:E,setTriggerRef:C,visible:b}=(0,s.O)({visible:y,placement:d,onVisibleChange:v,interactive:!0,delayHide:0,delayShow:0,offset:p??[0,8],trigger:["click"]}),S=150,M=l(S),x=()=>{v(!1)},O=L=>{(L.key==="Escape"||L.key==="Tab")&&v(!1)};return c.createElement(c.Fragment,null,c.cloneElement(typeof a=="function"?a(b):a,{ref:C}),b&&c.createElement(f.h_,null,c.createElement(n.MT,{autoFocus:!0,restoreFocus:!0,contain:!0},c.createElement("div",{ref:E,...P(),onClick:x,onKeyDown:O},c.createElement("div",{...u({className:"tooltip-arrow"})}),c.createElement(r.Z,{nodeRef:i,appear:!0,in:!0,timeout:{appear:S,exit:0,enter:0},classNames:M},c.createElement("div",{ref:i},g.renderOrCallToRender(m)))))))});o.displayName="Dropdown";const l=a=>({appear:(0,t.css)({opacity:"0",position:"relative",transform:"scaleY(0.5)",transformOrigin:"top"}),appearActive:(0,t.css)({opacity:"1",transform:"scaleY(1)",transition:`transform ${a}ms cubic-bezier(0.2, 0, 0.2, 1), opacity ${a}ms cubic-bezier(0.2, 0, 0.2, 1)`})})},69097:(H,T,e)=>{"use strict";e.d(T,{K:()=>s});var t=e(52423),n=e(68404),c=e(72648);const s=({children:g})=>{const f=(0,c.wW)(r);return n.createElement("div",{className:f.container},g)},r=g=>({container:t.css`
      border-left: 3px solid ${g.colors.info.main};
      background-color: ${g.colors.background.secondary};
      padding: ${g.spacing(2)};
      min-width: 350px;
      border-radius: ${g.shape.borderRadius(2)};
      margin-bottom: ${g.spacing(4)};
    `})},53546:(H,T,e)=>{"use strict";e.d(T,{Pf:()=>f,SV:()=>r,z4:()=>g});var t=e(37916),n=e(68404),c=e(45253),s=e(39198);class r extends n.PureComponent{constructor(){super(...arguments),this.state={error:null,errorInfo:null}}componentDidCatch(l,a){(0,t.Tb)(l,{contexts:{react:{componentStack:a.componentStack}}}),this.setState({error:l,errorInfo:a}),this.props.onError&&this.props.onError(l)}componentDidUpdate(l){const{dependencies:a,onRecover:m}=this.props;if(this.state.error&&a&&l.dependencies){for(let d=0;d<a.length;d++)if(a[d]!==l.dependencies[d]){this.setState({error:null,errorInfo:null}),m&&m();break}}}render(){const{children:l}=this.props,{error:a,errorInfo:m}=this.state;return l({error:a,errorInfo:m})}}class g extends n.PureComponent{render(){const{title:l,children:a,style:m,dependencies:d}=this.props;return n.createElement(r,{dependencies:d},({error:p,errorInfo:h})=>h?m==="alertbox"?n.createElement(c.b,{title:l||""},n.createElement("details",{style:{whiteSpace:"pre-wrap"}},p&&p.toString(),n.createElement("br",null),h.componentStack)):n.createElement(s.X,{title:l||"",error:p,errorInfo:h}):a)}}g.defaultProps={title:"An unexpected error happened",style:"alertbox"};function f(o,l={}){const a=m=>n.createElement(g,{...l},n.createElement(o,{...m}));return a.displayName="WithErrorBoundary",a}},39198:(H,T,e)=>{"use strict";e.d(T,{X:()=>r});var t=e(52423),n=e(68404),c=e(7804);const s=(0,c.B)(()=>t.css`
    width: 500px;
    margin: 64px auto;
  `),r=({error:g,errorInfo:f,title:o})=>n.createElement("div",{className:s()},n.createElement("h2",null,o),n.createElement("details",{style:{whiteSpace:"pre-wrap"}},g&&g.toString(),n.createElement("br",null),f&&f.componentStack));r.displayName="ErrorWithStack"},30784:(H,T,e)=>{"use strict";e.d(T,{A_:()=>y,Yo:()=>d});var t=e(52423),n=e(82897),c=e.n(n),s=e(68404),r=e(47469),g=e(91134),f=e(20112),o=e(72648),l=e(45253),a=e(39904),m=e(27119);function d({options:E,children:C,readAs:b,onLoad:S,fileListRenderer:M,onFileRemove:x}){const[O,L]=(0,s.useState)([]),[B,w]=(0,s.useState)([]),R=(0,f.Cf)("decbytes")(E?.maxSize?E?.maxSize:0),A=(0,s.useCallback)((J,oe)=>{L(Ee=>Ee.map(me=>(me.id===J.id&&oe(me),me)))},[]),U=(0,s.useCallback)((J,oe,Ee)=>{let me=J.map(u);if(E?.multiple===!1?L(me):L(re=>[...re,...me]),z(oe),E?.onDrop)E.onDrop(J,oe,Ee);else for(const re of me){const le=new FileReader,pe=()=>{b?le[b](re.file):le.readAsText(re.file)};A(re,ee=>{ee.abortUpload=()=>{le.abort()},ee.retryUpload=()=>{A(re,se=>{se.error=null,se.progress=void 0}),pe()}}),le.onabort=()=>{A(re,ee=>{ee.error=new DOMException("Aborted")})},le.onprogress=ee=>{A(re,se=>{se.progress=ee.loaded})},le.onload=()=>{S?.(le.result)},le.onerror=()=>{A(re,ee=>{ee.error=le.error})},pe()}},[S,E,b,A]),I=J=>{const oe=O.filter(Ee=>J.id!==Ee.id);L(oe),x?.(J)},{getRootProps:N,getInputProps:F,isDragActive:D}=(0,r.uI)({...E,useFsAccessApi:!1,onDrop:U,accept:h(E?.accept)}),Y=(0,o.l4)(),j=P(Y,D),K=O.map(J=>M?M(J,I):s.createElement(m.K,{key:J.id,file:J,removeFile:I})),z=J=>{let oe=[];J.map(Ee=>{Ee.errors.map(me=>{oe.findIndex(re=>re.code===me.code&&re.message===me.message)===-1&&oe.push(me)})}),w(oe)},Z=J=>s.createElement("div",{className:j.errorAlert},s.createElement(l.b,{title:"Upload failed",severity:"error",onRemove:ae},J.map(oe=>{switch(oe.code){case g.jK.FileTooLarge:return s.createElement("div",{key:oe.message+oe.code},"File is larger than ",(0,f.zc)(R));default:return s.createElement("div",{key:oe.message+oe.code},oe.message)}}))),ae=()=>{w([])};return s.createElement("div",{className:j.container},s.createElement("div",{"data-testid":"dropzone",...N({className:j.dropzone})},s.createElement("input",{...F()}),C??s.createElement(y,{primaryText:v(O,E)})),B.length>0&&Z(B),s.createElement("div",{className:j.acceptContainer},E?.accept&&s.createElement("small",{className:(0,t.cx)(j.small,j.acceptMargin,j.acceptedFiles)},i(E.accept)),E?.maxSize&&s.createElement("small",{className:(0,t.cx)(j.small,j.acceptMargin)},`Max file size: ${(0,f.zc)(R)}`)),K)}function p(E){return["txt","json","csv","xls","yml"].some(C=>E.match(C))?"text/plain":"application/octet-stream"}function h(E){return(0,n.isString)(E)?{[p(E)]:[E]}:Array.isArray(E)?E.reduce((C,b)=>{const S=p(b);return C[S]=C[S]?[...C[S],b]:[b],C},{}):E}function y({primaryText:E="Upload file",secondaryText:C="Drag and drop here or browse"}){const b=(0,o.l4)(),S=P(b);return s.createElement("div",{className:S.iconWrapper},s.createElement(a.J,{name:"upload",size:"xxl"}),s.createElement("h3",null,E),s.createElement("small",{className:S.small},C))}function v(E,C){return C?.multiple===void 0||C?.multiple?"Upload file":E.length?"Replace file":"Upload file"}function i(E){return(0,n.isString)(E)?`Accepted file type: ${E}`:Array.isArray(E)?`Accepted file types: ${E.join(", ")}`:`Accepted file types: ${Object.values(E).flat().join(", ")}`}function u(E){return{id:(0,n.uniqueId)("file"),file:E,error:null}}function P(E,C){return{container:t.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:t.css`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${E.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${E.colors.border.medium};
      background-color: ${C?E.colors.background.secondary:E.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:t.css`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptContainer:t.css`
      display: flex;
    `,acceptedFiles:t.css`
      flex-grow: 1;
    `,acceptMargin:t.css`
      margin: ${E.spacing(2,0,1)};
    `,small:t.css`
      color: ${E.colors.text.secondary};
    `,errorAlert:t.css`
      padding-top: 10px;
    `}}},27119:(H,T,e)=>{"use strict";e.d(T,{K:()=>a});var t=e(52423),n=e(68404),c=e(20112),s=e(72648),r=e(39027),g=e(31403),f=e(39904),o=e(8180);const l="Remove file";function a({file:d,removeFile:p}){const h=(0,s.wW)(m),{file:y,progress:v,error:i,abortUpload:u,retryUpload:P}=d,E=()=>i?n.createElement(n.Fragment,null,n.createElement("span",{className:h.error},i.message),P&&n.createElement(o.h,{type:"button","aria-label":"Retry",name:"sync",tooltip:"Retry",tooltipPlacement:"top",onClick:P}),p&&n.createElement(o.h,{className:P?h.marginLeft:"",type:"button",name:"trash-alt",onClick:()=>p(d),tooltip:l,"aria-label":l})):v&&y.size>v?n.createElement(n.Fragment,null,n.createElement("progress",{className:h.progressBar,max:y.size,value:v}),n.createElement("span",{className:h.paddingLeft},Math.round(v/y.size*100),"%"),u&&n.createElement(g.zx,{variant:"secondary",type:"button",fill:"text",onClick:u},"Cancel upload")):p&&n.createElement(o.h,{name:"trash-alt",onClick:()=>p(d),tooltip:l,"aria-label":l,type:"button",tooltipPlacement:"top"}),C=(0,c.Cf)("decbytes")(y.size);return n.createElement("div",{className:h.fileListContainer},n.createElement("span",{className:h.fileNameWrapper},n.createElement(f.J,{name:"file-blank",size:"lg","aria-hidden":!0}),n.createElement("span",{className:h.padding},(0,r.O)(y.name)),n.createElement("span",null,(0,c.zc)(C))),n.createElement("div",{className:h.fileNameWrapper},E()))}function m(d){return{fileListContainer:t.css`
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      padding: ${d.spacing(2)};
      border: 1px dashed ${d.colors.border.medium};
      background-color: ${d.colors.background.secondary};
      margin-top: ${d.spacing(1)};
    `,fileNameWrapper:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
    `,padding:t.css`
      padding: ${d.spacing(0,1)};
    `,paddingLeft:t.css`
      padding-left: ${d.spacing(2)};
    `,marginLeft:t.css`
      margin-left: ${d.spacing(1)};
    `,error:t.css`
      padding-right: ${d.spacing(2)};
      color: ${d.colors.error.text};
    `,progressBar:t.css`
      border-radius: ${d.spacing(1)};
      height: 4px;
      ::-webkit-progress-bar {
        background-color: ${d.colors.border.weak};
        border-radius: ${d.spacing(1)};
      }
      ::-webkit-progress-value {
        background-color: ${d.colors.primary.main};
        border-radius: ${d.spacing(1)};
      }
    `}}},47556:(H,T,e)=>{"use strict";e.d(T,{A_:()=>t.A_,K$:()=>n.K,Yo:()=>t.Yo});var t=e(30784),n=e(27119)},82381:(H,T,e)=>{"use strict";e.d(T,{p:()=>a});var t=e(52423),n=e(68404),c=e(44288),s=e(68183),r=e(72648),g=e(85419),f=e(39027),o=e(31403),l=e(39904);const a=({onFileUpload:d,className:p,children:h="Upload file",accept:y="*",size:v="md"})=>{const i=(0,r.wW)(m(v)),[u,P]=(0,n.useState)(""),E=(0,c.Z)(),C=(0,n.useCallback)(b=>{const S=b.currentTarget?.files?.[0];S&&P(S.name??""),d(b)},[d]);return n.createElement(n.Fragment,null,n.createElement("input",{type:"file",id:E,className:i.fileUpload,onChange:C,multiple:!1,accept:y,"data-testid":s.wl.components.FileUpload.inputField}),n.createElement("label",{htmlFor:E,className:(0,t.cx)(i.labelWrapper,p)},n.createElement(l.J,{name:"upload",className:i.icon}),h),u&&n.createElement("span",{"aria-label":"File name",className:i.fileName,"data-testid":s.wl.components.FileUpload.fileNameSpan},(0,f.O)(u)))},m=d=>p=>{const h=(0,o.fW)({theme:p,variant:"primary",size:d,iconOnly:!1}),y=(0,g.getFocusStyles)(p);return{fileUpload:(0,t.css)({height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute",width:"0.1px",zIndex:-1,"&:focus + label":y,"&:focus-visible + label":y}),labelWrapper:h.button,icon:h.icon,fileName:(0,t.css)({marginLeft:p.spacing(.5)})}}},14747:(H,T,e)=>{"use strict";e.d(T,{H:()=>f});var t=e(68404),n=e(29076);function c(...o){const l=t.useRef(null);return t.useEffect(()=>{o.forEach(a=>{a&&(typeof a=="function"?a(l.current):a.current=l.current)})},[o]),l}var s=e(31403),r=e(39904),g=e(46967);const f=t.forwardRef(({value:o,width:l,onChange:a,escapeRegex:m=!0,...d},p)=>{const h=t.useRef(null),y=c(p,h),v=o!==""?t.createElement(s.zx,{icon:"times",fill:"text",size:"sm",onClick:i=>{h.current?.focus(),a(""),i.stopPropagation()}},"Clear"):null;return t.createElement(g.I,{prefix:t.createElement(r.J,{name:"search"}),suffix:v,width:l,type:"text",value:m?(0,n.x6)(o??""):o,onChange:i=>a(m?(0,n.GE)(i.currentTarget.value):i.currentTarget.value),...d,ref:y})});f.displayName="FilterInput"},41165:(H,T,e)=>{"use strict";e.d(T,{B:()=>g});var t=e(52423),n=e(68404),c=e(72648),s=e(31403),r=e(39904);const g=({label:o,selected:l,onClick:a,icon:m="check"})=>{const d=(0,c.wW)(f),p=(0,c.wW)(s.gN);return n.createElement("button",{type:"button",className:(0,t.cx)(p,d.wrapper,l&&d.selected),onClick:a},n.createElement("span",null,o),l&&n.createElement(r.J,{name:m,className:d.icon}))},f=o=>({wrapper:t.css`
      background: ${o.colors.background.secondary};
      border-radius: ${o.shape.borderRadius(8)};
      padding: ${o.spacing(0,2)};
      font-size: ${o.typography.bodySmall.fontSize};
      font-weight: ${o.typography.fontWeightMedium};
      line-height: ${o.typography.bodySmall.lineHeight};
      color: ${o.colors.text.secondary};
      display: flex;
      align-items: center;
      height: 32px;

      &:hover {
        background: ${o.colors.action.hover};
        color: ${o.colors.text.primary};
      }
    `,selected:t.css`
      color: ${o.colors.text.primary};
      background: ${o.colors.action.selected};

      &:hover {
        background: ${o.colors.action.focus};
      }
    `,icon:t.css`
      margin-left: ${o.spacing(.5)};
    `})},95569:(H,T,e)=>{"use strict";e.d(T,{W:()=>r});var t=e(52423),n=e(68404),c=e(19426);const s={labelWidth:6,inputWidth:12},r=({label:f,tooltip:o,labelWidth:l,inputWidth:a,inputEl:m,className:d,interactive:p,...h})=>{const y=g();return n.createElement("div",{className:(0,t.cx)(y.formField,d)},n.createElement(c.c,{width:l,tooltip:o,interactive:p},f),m||n.createElement("input",{type:"text",className:`gf-form-input ${a?`width-${a}`:""}`,...h,disabled:h.disabled}))};r.displayName="FormField",r.defaultProps=s;const g=()=>({formField:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
    `})},19426:(H,T,e)=>{"use strict";e.d(T,{c:()=>f});var t=e(9085),n=e.n(t),c=e(68404),s=e(39904),r=e(61860);const f=({children:o,isFocused:l,isInvalid:a,className:m,htmlFor:d,tooltip:p,width:h,interactive:y,...v})=>{const i=n()(m,`gf-form-label width-${h||"10"}`,{"gf-form-label--is-focused":l,"gf-form-label--is-invalid":a});return c.createElement("label",{className:i,...v,htmlFor:d},o,p&&c.createElement(r.u,{placement:"top",content:p,theme:"info",interactive:y},c.createElement(s.J,{tabIndex:0,name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))}},72777:(H,T,e)=>{"use strict";e.d(T,{W:()=>c});var t=e(68404);function n(s){return s<20?.9:s<26?.8:.6}const c=({value:s,className:r,style:g,...f})=>{const o=(s.prefix??"").length>0,l=(s.suffix??"").length>0;let a;if(g&&g.fontSize&&typeof g.fontSize=="number"){const m=g.fontSize,d=n(m);a={fontSize:m*d}}return t.createElement("div",{className:r,style:g,...f},t.createElement("div",null,o&&t.createElement("span",null,s.prefix),t.createElement("span",null,s.text),l&&t.createElement("span",{style:a},s.suffix)))};c.displayName="FormattedDisplayValue"},58255:(H,T,e)=>{"use strict";e.d(T,{X:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(7804),r=e(85419),g=e(64353);const f=n.forwardRef(({label:l,description:a,value:m,htmlValue:d,onChange:p,disabled:h,className:y,...v},i)=>{const u=(0,n.useCallback)(E=>{p&&p(E)},[p]),P=(0,c.wW)(o);return n.createElement("label",{className:(0,t.cx)(P.wrapper,y)},n.createElement("div",null,n.createElement("input",{type:"checkbox",className:P.input,checked:m,disabled:h,onChange:u,value:d,...v,ref:i}),n.createElement("span",{className:P.checkmark})),n.createElement("div",null,l&&n.createElement("span",{className:P.label},l),a&&n.createElement("span",{className:P.description},a)))}),o=(0,s.B)(l=>{const a=(0,g.F)(l),m=2,d=1;return{wrapper:t.css`
      display: inline-flex;
      gap: ${l.spacing(d)};
      align-items: baseline;
      position: relative;
      vertical-align: middle;
      font-size: 0;
    `,input:t.css`
      position: absolute;
      z-index: 1;
      top: 0;
      left: 0;
      width: 100% !important; // global styles unset this
      height: 100%;
      opacity: 0;

      &:focus + span,
      &:focus-visible + span {
        ${(0,r.getFocusStyles)(l)}
      }

      &:focus:not(:focus-visible) + span {
        ${(0,r.getMouseFocusStyles)(l)}
      }

      /**
       * Using adjacent sibling selector to style checked state.
       * Primarily to limit the classes necessary to use when these classes will be used
       * for angular components styling
       * */
      &:checked + span {
        background: blue;
        background: ${l.colors.primary.main};
        border: none;

        &:hover {
          background: ${l.colors.primary.shade};
        }

        &:after {
          content: '';
          position: absolute;
          z-index: 2;
          left: 5px;
          top: 1px;
          width: 6px;
          height: 12px;
          border: solid ${l.colors.primary.contrastText};
          border-width: 0 3px 3px 0;
          transform: rotate(45deg);
        }
      }

      &:disabled + span {
        background-color: ${l.colors.action.disabledBackground};
        cursor: not-allowed;

        &:hover {
          background-color: ${l.colors.action.disabledBackground};
        }

        &:after {
          border-color: ${l.colors.action.disabledText};
        }
      }
    `,checkmark:t.css`
      position: relative; /* Checkbox should be layered on top of the invisible input so it recieves :hover */
      z-index: 2;
      display: inline-block;
      width: ${l.spacing(m)};
      height: ${l.spacing(m)};
      border-radius: ${l.shape.borderRadius()};
      background: ${l.components.input.background};
      border: 1px solid ${l.components.input.borderColor};

      &:hover {
        cursor: pointer;
        border-color: ${l.components.input.borderHover};
      }
    `,label:(0,t.cx)(a.label,t.css`
        position: relative;
        z-index: 2;
        cursor: pointer;
        top: -3px;
        max-width: fit-content;
        line-height: ${l.typography.bodySmall.lineHeight};
        margin-bottom: 0;
      `),description:(0,t.cx)(a.description,t.css`
        line-height: ${l.typography.bodySmall.lineHeight};
        margin-top: 0; /* The margin effectively comes from the top: -2px on the label above it */
      `)}});f.displayName="Checkbox"},24799:(H,T,e)=>{"use strict";e.d(T,{g:()=>l});var t=e(52423),n=e(68404),c=e(7804),s=e(72648),r=e(61970),g=e(57227),f=e(64353);const o=(0,c.B)(m=>({field:t.css`
      display: flex;
      flex-direction: column;
      margin-bottom: ${m.spacing(2)};
    `,fieldHorizontal:t.css`
      flex-direction: row;
      justify-content: space-between;
      flex-wrap: wrap;
    `,fieldValidationWrapper:t.css`
      margin-top: ${m.spacing(.5)};
    `,fieldValidationWrapperHorizontal:t.css`
      flex: 1 1 100%;
    `,validationMessageHorizontalOverflow:t.css`
      width: 0;
      overflow-x: visible;

      & > * {
        white-space: nowrap;
      }
    `})),l=({label:m,description:d,horizontal:p,invalid:h,loading:y,disabled:v,required:i,error:u,children:P,className:E,validationMessageHorizontalOverflow:C,htmlFor:b,...S})=>{const M=(0,s.l4)(),x=o(M),O=b??(0,r.getChildId)(P),L=typeof m=="string"?n.createElement(f._,{htmlFor:O,description:d},`${m}${i?" *":""}`):m,B=a({invalid:h,disabled:v,loading:y});return n.createElement("div",{className:(0,t.cx)(x.field,p&&x.fieldHorizontal,E),...S},L,n.createElement("div",null,n.cloneElement(P,B),h&&u&&!p&&n.createElement("div",{className:(0,t.cx)(x.fieldValidationWrapper,{[x.validationMessageHorizontalOverflow]:!!C})},n.createElement(g.S,null,u))),h&&u&&p&&n.createElement("div",{className:(0,t.cx)(x.fieldValidationWrapper,x.fieldValidationWrapperHorizontal,{[x.validationMessageHorizontalOverflow]:!!C})},n.createElement(g.S,null,u)))};function a(m){for(const d in m)m[d]===void 0&&delete m[d];return m}},70132:(H,T,e)=>{"use strict";e.d(T,{F:()=>n});var t=e(59052);const n=({name:c,control:s,children:r,...g})=>{const{fields:f,append:o,prepend:l,remove:a,swap:m,move:d,insert:p}=(0,t.Dq)({control:s,name:c,...g});return r({fields:f,append:o,prepend:l,remove:a,swap:m,move:d,insert:p})}},13393:(H,T,e)=>{"use strict";e.d(T,{C:()=>g});var t=e(52423),n=e(68404),c=e(72648),s=e(7804),r=e(19825);const g=({label:o,children:l,className:a,...m})=>{const d=(0,c.l4)(),p=f(d);return n.createElement("fieldset",{className:(0,t.cx)(p.wrapper,a),...m},o&&n.createElement(r.D,null,o),l)},f=(0,s.B)(o=>({wrapper:t.css`
      margin-bottom: ${o.spacing(4)};

      &:last-child {
        margin-bottom: 0;
      }
    `}))},57227:(H,T,e)=>{"use strict";e.d(T,{S:()=>f});var t=e(52423),n=e(68404),c=e(7804),s=e(72648),r=e(39904);const g=(0,c.B)(o=>{const l=`
      font-size: ${o.typography.size.sm};
      font-weight: ${o.typography.fontWeightMedium};
      padding: ${o.spacing(.5,1)};
      color: ${o.colors.error.contrastText};
      background: ${o.colors.error.main};
      border-radius: ${o.shape.borderRadius()};
      position: relative;
      display: inline-block;

      a {
        color: ${o.colors.error.contrastText};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `;return{vertical:t.css`
      ${l}
      margin: ${o.spacing(.5,0,0,0)};

      &:before {
        content: '';
        position: absolute;
        left: 9px;
        top: -5px;
        width: 0;
        height: 0;
        border-width: 0 4px 5px 4px;
        border-color: transparent transparent ${o.colors.error.main} transparent;
        border-style: solid;
      }
    `,horizontal:t.css`
      ${l}
      margin-left: 10px;

      &:before {
        content: '';
        position: absolute;
        left: -5px;
        top: 9px;
        width: 0;
        height: 0;
        border-width: 4px 5px 4px 0;
        border-color: transparent #e02f44 transparent transparent;
        border-style: solid;
      }
    `,fieldValidationMessageIcon:t.css`
      margin-right: ${o.spacing()};
    `}}),f=({children:o,horizontal:l,className:a})=>{const m=(0,s.l4)(),d=g(m),p=(0,t.cx)(l?d.horizontal:d.vertical,a);return n.createElement("div",{role:"alert",className:p},n.createElement(r.J,{className:d.fieldValidationMessageIcon,name:"exclamation-triangle"}),o)}},94270:(H,T,e)=>{"use strict";e.d(T,{l:()=>s});var t=e(52423),n=e(68404),c=e(59052);function s({defaultValues:r,onSubmit:g,validateOnMount:f=!1,validateFieldsOnMount:o,children:l,validateOn:a="onSubmit",maxWidth:m=600,...d}){const{handleSubmit:p,trigger:h,formState:y,...v}=(0,c.cI)({mode:a,defaultValues:r});return(0,n.useEffect)(()=>{f&&h(o)},[h,o,f]),n.createElement("form",{className:t.css`
        max-width: ${m!=="none"?m+"px":m};
        width: 100%;
      `,onSubmit:p(g),...d},l({errors:y.errors,formState:y,...v}))}},81764:(H,T,e)=>{"use strict";e.d(T,{_:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(61970),r=e(57227),g=e(77117);const f=({children:l,label:a,tooltip:m,labelWidth:d="auto",invalid:p,loading:h,disabled:y,required:v,className:i,htmlFor:u,grow:P,shrink:E,error:C,transparent:b,interactive:S,...M})=>{const x=(0,c.l4)(),O=o(x,P,E),L=u??(0,s.getChildId)(l),B=typeof a=="string"?n.createElement(g.W,{interactive:S,width:d,tooltip:m,htmlFor:L,transparent:b},`${a}${v?" *":""}`):a;return n.createElement("div",{className:(0,t.cx)(O.container,i),...M},B,n.createElement("div",{className:O.childContainer},n.cloneElement(l,{invalid:p,disabled:y,loading:h}),p&&C&&n.createElement("div",{className:(0,t.cx)(O.fieldValidationWrapper)},n.createElement(r.S,null,C))))};f.displayName="InlineField";const o=(l,a,m)=>({container:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${a?1:0} ${m?1:0} auto;
      margin: 0 ${l.spacing(.5)} ${l.spacing(.5)} 0;
    `,childContainer:t.css`
      flex: ${a?1:0} ${m?1:0} auto;
    `,fieldValidationWrapper:t.css`
      margin-top: ${l.spacing(.5)};
    `})},11543:(H,T,e)=>{"use strict";e.d(T,{Z:()=>s});var t=e(52423),n=e(68404),c=e(72648);const s=({children:g,className:f,...o})=>{const l=(0,c.wW)(r);return n.createElement("div",{className:(0,t.cx)(l.container,f),...o},g)},r=g=>({container:t.css`
      label: InlineFieldRow;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      align-content: flex-start;
      row-gap: ${g.spacing(.5)};
    `})},77117:(H,T,e)=>{"use strict";e.d(T,{W:()=>g});var t=e(52423),n=e(68404),c=e(72648),s=e(39904),r=e(61860);const g=({children:o,className:l,tooltip:a,width:m,transparent:d,interactive:p,as:h="label",...y})=>{const v=(0,c.wW)((0,n.useCallback)(i=>f(i,d,m),[d,m]));return n.createElement(h,{className:(0,t.cx)(v.label,l),...y},o,a&&n.createElement(r.u,{interactive:p,placement:"top",content:a,theme:"info"},n.createElement(s.J,{tabIndex:0,name:"info-circle",size:"sm",className:v.icon})))},f=(o,l=!1,a)=>({label:t.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-shrink: 0;
      padding: 0 ${o.spacing(1)};
      font-weight: ${o.typography.fontWeightMedium};
      font-size: ${o.typography.size.sm};
      background-color: ${l?"transparent":o.colors.background.secondary};
      height: ${o.spacing(o.components.height.md)};
      line-height: ${o.spacing(o.components.height.md)};
      margin-right: ${o.spacing(.5)};
      border-radius: ${o.shape.borderRadius(2)};
      border: none;
      width: ${a?a!=="auto"?`${8*a}px`:a:"100%"};
      color: ${o.colors.text.primary};
    `,icon:t.css`
      color: ${o.colors.text.secondary};
      margin-left: 10px;

      :hover {
        color: ${o.colors.text.primary};
      }
    `})},62157:(H,T,e)=>{"use strict";e.d(T,{m:()=>s});var t=e(52423),n=e(68404),c=e(72648);const s=({children:g,className:f,grow:o,...l})=>{const a=(0,c.wW)(m=>r(m,o));return n.createElement("div",{className:(0,t.cx)(a.container,f),...l},g)};s.displayName="InlineSegmentGroup";const r=(g,f)=>({container:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${f?1:0} 0 auto;
      margin-bottom: ${g.spacing(.5)};
    `})},64353:(H,T,e)=>{"use strict";e.d(T,{F:()=>g,_:()=>f});var t=e(52423),n=e(68404),c=e(7804),s=e(72648),r=e(39904);const g=(0,c.B)(o=>({label:t.css`
      label: Label;
      font-size: ${o.typography.size.sm};
      font-weight: ${o.typography.fontWeightMedium};
      line-height: 1.25;
      margin-bottom: ${o.spacing(.5)};
      color: ${o.colors.text.primary};
      max-width: 480px;
    `,labelContent:t.css`
      display: flex;
      align-items: center;
    `,description:t.css`
      label: Label-description;
      color: ${o.colors.text.secondary};
      font-size: ${o.typography.size.sm};
      font-weight: ${o.typography.fontWeightRegular};
      margin-top: ${o.spacing(.25)};
      display: block;
    `,categories:t.css`
      label: Label-categories;
      display: inline-flex;
      align-items: center;
    `,chevron:t.css`
      margin: 0 ${o.spacing(.25)};
    `})),f=({children:o,description:l,className:a,category:m,...d})=>{const p=(0,s.l4)(),h=g(p),y=m?.map((v,i)=>n.createElement("span",{className:h.categories,key:`${v}/${i}`},n.createElement("span",null,v),n.createElement(r.J,{name:"angle-right",className:h.chevron})));return n.createElement("div",{className:(0,t.cx)(h.label,a)},n.createElement("label",{...d},n.createElement("div",{className:h.labelContent},y,o),l&&n.createElement("span",{className:h.description},l)))}},50869:(H,T,e)=>{"use strict";e.d(T,{G:()=>r,I:()=>g});var t=e(9085),n=e.n(t),c=e(68404),s=e(59481),r=(f=>(f.Invalid="invalid",f.Valid="valid",f))(r||{});class g extends c.PureComponent{constructor(){super(...arguments),this.state={error:null},this.validatorAsync=o=>l=>{const a=(0,s.Gu)(l.target.value,o);this.setState(m=>({...m,error:a?a[0]:null}))},this.populateEventPropsWithStatus=(o,l)=>{const a={...o};return l&&Object.keys(s.JU).forEach(m=>{((0,s.z3)(m,l)||o[m])&&(a[m]=async d=>{d.persist(),(0,s.z3)(m,l)&&await this.validatorAsync(l[m]).apply(this,[d]),o[m]&&o[m].apply(null,[d,this.status])})}),a}}get status(){return this.state.error?"invalid":"valid"}get isInvalid(){return this.status==="invalid"}render(){const{validationEvents:o,className:l,hideErrorMessage:a,inputRef:m,...d}=this.props,{error:p}=this.state,h=n()("gf-form-input",{invalid:this.isInvalid},l),y=this.populateEventPropsWithStatus(d,o);return c.createElement("div",{style:{flexGrow:1}},c.createElement("input",{...y,ref:m,className:h}),p&&!a&&c.createElement("span",null,p))}}g.defaultProps={className:""}},21662:(H,T,e)=>{"use strict";e.d(T,{B:()=>s,Z:()=>r});var t=e(68404),n=e(8887),c=e(39904);const s=g=>{const f=g.selectProps.menuIsOpen;return t.createElement(n.c.IndicatorsContainer,{...g},t.createElement(c.J,{name:f?"angle-up":"angle-down",style:{marginTop:"7px"}}))},r=s},76603:(H,T,e)=>{"use strict";e.d(T,{P:()=>c,Z:()=>s});var t=e(68404),n=e(8887);const c=r=>{const{children:g}=r;return t.createElement(n.c.NoOptionsMessage,{...r},t.createElement("div",{className:"gf-form-select-box__desc-option"},t.createElement("div",{className:"gf-form-select-box__desc-option__body"},g)))},s=c},29418:(H,T,e)=>{"use strict";e.d(T,{qb:()=>b,Ph:()=>C});var t=e(9085),n=e.n(t),c=e(68404),s=e(8887),r=e(37826),g=e(30250),f=e(83238),o=e(72648),l=e(68226),a=e(874),m=e(24901),d=e(54897),p=e(61860),h=e(21662),y=e(76603),v=e(39904);const i=x=>{const{children:O,isSelected:L,data:B}=x;return c.createElement(s.c.Option,{...x},c.createElement("div",{className:"gf-form-select-box__desc-option"},B.imgUrl&&c.createElement("img",{className:"gf-form-select-box__desc-option__img",src:B.imgUrl,alt:""}),c.createElement("div",{className:"gf-form-select-box__desc-option__body"},c.createElement("div",null,O),B.description&&c.createElement("div",{className:"gf-form-select-box__desc-option__desc"},B.description)),L&&c.createElement(v.J,{name:"check","aria-hidden":"true"})))},u=null,P=x=>c.createElement(s.c.MenuList,{...x},c.createElement(l.$,{autoHide:!1,autoHeightMax:"inherit"},x.children)),E=class extends c.PureComponent{render(){const{defaultValue:x,getOptionLabel:O,getOptionValue:L,onChange:B,options:w,placeholder:R,width:A,value:U,className:I,isDisabled:N,isLoading:F,isSearchable:D,isClearable:Y,backspaceRemovesValue:j,isMulti:K,autoFocus:z,openMenuOnFocus:Z,onBlur:ae,maxMenuHeight:J,noOptionsMessage:oe,isOpen:Ee,components:me,tooltipContent:re,tabSelectsValue:le,onCloseMenu:pe,onOpenMenu:ee,allowCustomValue:se,formatCreateLabel:Q,"aria-label":G}=this.props;let q="";A&&(q="width-"+A);let X=r.ZP;const de={};se&&(X=f.Z,de.formatCreateLabel=Q??(He=>He));const Be=n()("gf-form-input","gf-form-input--form-dropdown",q,I),ke={...E.defaultProps.components,...me};return c.createElement(S,{onCloseMenu:pe,onOpenMenu:ee,tooltipContent:re,isOpen:Ee},(He,ue)=>c.createElement(X,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:Be,components:ke,defaultValue:x,value:U,getOptionLabel:O,getOptionValue:L,menuShouldScrollIntoView:!1,isSearchable:D,onChange:B,options:w,placeholder:R||"Choose",styles:(0,d.Z)(this.context),isDisabled:N,isLoading:F,isClearable:Y,autoFocus:z,onBlur:ae,openMenuOnFocus:Z,maxMenuHeight:J,noOptionsMessage:oe,isMulti:K,backspaceRemovesValue:j,menuIsOpen:Ee,onMenuOpen:He,onMenuClose:ue,tabSelectsValue:le,"aria-label":G,...de}))}};let C=E;C.contextType=o.Ni,C.defaultProps={className:"",isDisabled:!1,isSearchable:!0,isClearable:!1,isMulti:!1,openMenuOnFocus:!1,autoFocus:!1,isLoading:!1,backspaceRemovesValue:!0,maxMenuHeight:300,tabSelectsValue:!0,allowCustomValue:!1,components:{Option:i,SingleValue:m.P,IndicatorsContainer:h.Z,MenuList:P,Group:a.n}};class b extends c.PureComponent{render(){const{defaultValue:O,getOptionLabel:L,getOptionValue:B,onChange:w,placeholder:R,width:A,value:U,className:I,loadOptions:N,defaultOptions:F,isLoading:D,loadingMessage:Y,noOptionsMessage:j,isDisabled:K,isSearchable:z,isClearable:Z,backspaceRemovesValue:ae,autoFocus:J,onBlur:oe,openMenuOnFocus:Ee,maxMenuHeight:me,isMulti:re,tooltipContent:le,onCloseMenu:pe,onOpenMenu:ee,isOpen:se}=this.props;let Q="";A&&(Q="width-"+A);const G=n()("gf-form-input","gf-form-input--form-dropdown",Q,I);return c.createElement(S,{onCloseMenu:pe,onOpenMenu:ee,tooltipContent:le,isOpen:se},(q,X)=>c.createElement(g.Z,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:G,components:{Option:i,SingleValue:m.P,IndicatorsContainer:h.Z,NoOptionsMessage:y.Z},defaultValue:O,value:U,getOptionLabel:L,getOptionValue:B,menuShouldScrollIntoView:!1,onChange:w,loadOptions:N,isLoading:D,defaultOptions:F,placeholder:R||"Choose",styles:(0,d.Z)(this.context),loadingMessage:Y,noOptionsMessage:j,isDisabled:K,isSearchable:z,isClearable:Z,autoFocus:J,onBlur:oe,openMenuOnFocus:Ee,maxMenuHeight:me,isMulti:re,backspaceRemovesValue:ae}))}}b.contextType=o.Ni,b.defaultProps={className:"",components:{},loadingMessage:()=>"Loading...",isDisabled:!1,isClearable:!1,isMulti:!1,isSearchable:!0,backspaceRemovesValue:!0,autoFocus:!1,openMenuOnFocus:!1,maxMenuHeight:300};class S extends c.PureComponent{constructor(){super(...arguments),this.state={isOpenInternal:!1},this.onOpenMenu=()=>{const{onOpenMenu:O}=this.props;O&&O(),this.setState({isOpenInternal:!0})},this.onCloseMenu=()=>{const{onCloseMenu:O}=this.props;O&&O(),this.setState({isOpenInternal:!1})}}render(){const{children:O,isOpen:L,tooltipContent:B}=this.props,{isOpenInternal:w}=this.state;let R;return(w||L)&&(R=!1),B?c.createElement(p.u,{show:R,content:B,placement:"bottom"},c.createElement("div",null,O(this.onOpenMenu,this.onCloseMenu))):c.createElement("div",null,O(this.onOpenMenu,this.onCloseMenu))}}const M=null},18979:(H,T,e)=>{"use strict";e.d(T,{r:()=>g});var t=e(82897),n=e.n(t),c=e(68404),s=e(39904),r=e(61860);class g extends c.PureComponent{constructor(){super(...arguments),this.state={id:(0,t.uniqueId)()},this.internalOnChange=o=>{o.stopPropagation(),this.props.onChange(o)}}render(){const{labelClass:o="",switchClass:l="",label:a,checked:m,transparent:d,className:p,tooltip:h,tooltipPlacement:y}=this.props,v=this.state.id,i=`gf-form-label ${o} ${d?"gf-form-label--transparent":""} pointer`,u=`gf-form-switch ${l} ${d?"gf-form-switch--transparent":""}`;return c.createElement("div",{className:"gf-form-switch-container-react"},c.createElement("label",{htmlFor:v,className:`gf-form gf-form-switch-container ${p||""}`},a&&c.createElement("div",{className:i},a,h&&c.createElement(r.u,{placement:y||"auto",content:h,theme:"info"},c.createElement("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal"},c.createElement(s.J,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))),c.createElement("div",{className:u},c.createElement("input",{id:v,type:"checkbox",checked:m,onChange:this.internalOnChange}),c.createElement("span",{className:"gf-form-switch__slider"}))))}}},19825:(H,T,e)=>{"use strict";e.d(T,{D:()=>r});var t=e(52423),n=e(68404),c=e(72648);const s=g=>({legend:t.css`
      font-size: ${g.typography.h3.fontSize};
      font-weight: ${g.typography.fontWeightRegular};
      margin: 0 0 ${g.spacing(2)} 0;
    `}),r=({children:g,className:f,...o})=>{const l=(0,c.wW)(s);return n.createElement("legend",{className:(0,t.cx)(l.legend,f),...o},g)}},2594:(H,T,e)=>{"use strict";e.d(T,{S:()=>d});var t=e(52423),n=e(82897),c=e(68404),s=e(43565),r=e(72648),g=e(39904),f=e(7804),o=e(85419),l=e(73267);const a=c.forwardRef(({children:h,active:y=!1,disabled:v=!1,size:i="md",onChange:u,onClick:P,id:E,name:C=void 0,description:b,fullWidth:S,"aria-label":M},x)=>{const O=(0,r.l4)(),L=m(O,i,S);return c.createElement(c.Fragment,null,c.createElement("input",{type:"radio",className:L.radio,onChange:u,onClick:P,disabled:v,id:E,checked:y,name:C,"aria-label":M,ref:x}),c.createElement("label",{className:L.radioLabel,htmlFor:E,title:b},h))});a.displayName="RadioButton";const m=(0,f.B)((h,y,v)=>{const{fontSize:i,height:u,padding:P}=(0,l.iL)(y,h),E=h.colors.text.secondary,C=h.colors.text.primary,b=u*h.spacing.gridSize-4-2;return{radio:t.css`
      position: absolute;
      opacity: 0;
      z-index: -1000;

      &:checked + label {
        color: ${h.colors.text.primary};
        font-weight: ${h.typography.fontWeightMedium};
        background: ${h.colors.action.selected};
        z-index: 3;
      }

      &:focus + label,
      &:focus-visible + label {
        ${(0,o.getFocusStyles)(h)};
      }

      &:focus:not(:focus-visible) + label {
        ${(0,o.getMouseFocusStyles)(h)}
      }

      &:disabled + label {
        color: ${h.colors.text.disabled};
        cursor: not-allowed;
      }
    `,radioLabel:t.css`
      display: inline-block;
      position: relative;
      font-size: ${i};
      height: ${b}px;
      // Deduct border from line-height for perfect vertical centering on windows and linux
      line-height: ${b}px;
      color: ${E};
      padding: ${h.spacing(0,P)};
      border-radius: ${h.shape.borderRadius()};
      background: ${h.colors.background.primary};
      cursor: pointer;
      z-index: 1;
      flex: ${v?"1 0 0":"none"};
      text-align: center;
      user-select: none;
      white-space: nowrap;

      &:hover {
        color: ${C};
      }
    `}});function d({options:h,value:y,onChange:v,onClick:i,disabled:u,disabledOptions:P,size:E="md",id:C,className:b,fullWidth:S=!1,autoFocus:M=!1}){const x=(0,c.useCallback)(A=>()=>{v&&v(A.value)},[v]),O=(0,c.useCallback)(A=>()=>{i&&i(A.value)},[i]),L=C??(0,n.uniqueId)("radiogroup-"),B=(0,c.useRef)(L),w=(0,r.wW)(p),R=(0,c.useRef)(null);return(0,c.useEffect)(()=>{M&&R.current&&R.current.focus()},[M]),c.createElement("div",{className:(0,t.cx)(w.radioGroup,S&&w.fullWidth,b)},h.map((A,U)=>{const I=P&&A.value&&P.includes(A.value),N=A.icon?(0,s.iJ)(A.icon):void 0;return c.createElement(a,{size:E,disabled:I||u,active:y===A.value,key:`o.label-${U}`,"aria-label":A.ariaLabel,onChange:x(A),onClick:O(A),id:`option-${A.value}-${L}`,name:B.current,description:A.description,fullWidth:S,ref:y===A.value?R:void 0},N&&c.createElement(g.J,{name:N,className:w.icon}),A.imgUrl&&c.createElement("img",{src:A.imgUrl,alt:A.label,className:w.img}),A.label," ",A.component?c.createElement(A.component,null):null)}))}d.displayName="RadioButtonGroup";const p=h=>({radioGroup:(0,t.css)({display:"inline-flex",flexDirection:"row",flexWrap:"nowrap",border:`1px solid ${h.components.input.borderColor}`,borderRadius:h.shape.borderRadius(),padding:"2px"}),fullWidth:(0,t.css)({display:"flex"}),icon:t.css`
      margin-right: 6px;
    `,img:t.css`
      width: ${h.spacing(2)};
      height: ${h.spacing(2)};
      margin-right: ${h.spacing(1)};
    `})},29395:(H,T,e)=>{"use strict";e.d(T,{x:()=>f});var t=e(52423),n=e(82897),c=e(68404),s=e(72648);const r=({id:l,name:a,label:m,checked:d,disabled:p,description:h,onChange:y})=>{const v=(0,s.wW)(g);return c.createElement("label",{title:h,className:v.label},c.createElement("input",{id:l,name:a,type:"radio",checked:d,disabled:p,className:v.input,onChange:()=>y&&y(l)}),m)},g=l=>({input:t.css`
    position: relative;
    appearance: none;
    outline: none;
    background-color: ${l.colors.background.canvas};
    margin: 0;
    width: ${l.spacing(2)} !important; /* TODO How to overcome this? Checkbox does the same 🙁 */
    height: ${l.spacing(2)};
    border: 1px solid ${l.colors.border.medium};
    border-radius: 50%;
    margin: 3px 0; /* Space for box-shadow when focused */

    :checked {
      background-color: ${l.v1.palette.white};
      border: 5px solid ${l.colors.primary.main};
    }

    :disabled {
      background-color: ${l.colors.action.disabledBackground} !important;
      border-color: ${l.colors.border.weak};
    }

    :disabled:checked {
      border: 1px solid ${l.colors.border.weak};
    }

    :disabled:checked::after {
      content: '';
      width: 6px;
      height: 6px;
      background-color: ${l.colors.text.disabled};
      border-radius: 50%;
      display: inline-block;
      position: absolute;
      top: 4px;
      left: 4px;
    }

    :focus {
      outline: none !important;
      box-shadow: 0 0 0 1px ${l.colors.background.canvas}, 0 0 0 3px ${l.colors.primary.main};
    }
  `,label:t.css`
    font-size: ${l.typography.fontSize};
    line-height: 22px; /* 16px for the radio button and 6px for the focus shadow */
    display: grid;
    grid-template-columns: ${l.spacing(2)} auto;
    gap: ${l.spacing(1)};
  `});function f({name:l,id:a,options:m,value:d,onChange:p,className:h,disabled:y,disabledOptions:v=[]}){const i=(0,s.wW)(o),u=a??(0,n.uniqueId)("radiogroup-list-");return c.createElement("div",{id:a,className:(0,t.cx)(i.container,h),role:"radiogroup"},m.map((P,E)=>{const C=`${u}-${E}`,b=d&&d===P.value,S=y||v.some(x=>x===P.value),M=()=>p&&P.value&&p(P.value);return c.createElement(r,{key:C,id:C,name:l,label:P.label,description:P.description,checked:b,disabled:S,onChange:M})}))}const o=l=>({container:t.css`
    display: grid;
    gap: ${l.spacing(1)};
  `})},73267:(H,T,e)=>{"use strict";e.d(T,{GL:()=>c,RK:()=>s,ht:()=>g,iL:()=>o,nf:()=>r});var t=e(52423),n=e(85419);const c=l=>t.css`
  &:focus {
    ${(0,n.focusCss)(l)}
  }
`,s=(l,a=!1)=>{const m=a?l.colors.error.border:l.components.input.borderColor,d=a?l.colors.error.shade:l.components.input.borderHover,p=l.components.input.background,h=l.components.input.text,y=l.isDark?"#2e2f35":"#bab4ca";return(0,t.cx)(r(l),t.css`
      background: ${p};
      line-height: ${l.typography.body.lineHeight};
      font-size: ${l.typography.size.md};
      color: ${h};
      border: 1px solid ${m};

      &:-webkit-autofill,
      &:-webkit-autofill:hover {
        /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${p}!important;
        -webkit-text-fill-color: ${h} !important;
        border-color: ${y};
      }

      &:-webkit-autofill:focus {
        /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
        box-shadow: 0 0 0 2px ${l.colors.background.primary}, 0 0 0px 4px ${l.colors.primary.main},
          inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${p}!important;
        -webkit-text-fill-color: ${h} !important;
      }

      &:hover {
        border-color: ${d};
      }

      &:focus {
        outline: none;
      }

      &:disabled {
        background-color: ${l.colors.action.disabledBackground};
        color: ${l.colors.action.disabledText};
        border: 1px solid ${l.colors.action.disabledBackground};

        &:hover {
          border-color: ${m};
        }
      }

      &::placeholder {
        color: ${l.colors.text.disabled};
        opacity: 1;
      }
    `)},r=l=>t.css`
    padding: ${l.spacing(0,1,0,1)};
  `,g=()=>({sm:t.css`
      width: ${f("sm")};
    `,md:t.css`
      width: ${f("md")};
    `,lg:t.css`
      width: ${f("lg")};
    `,auto:t.css`
      width: ${f("auto")};
    `}),f=l=>{switch(l){case"sm":return"200px";case"md":return"320px";case"lg":return"580px";case"auto":default:return"auto"}};function o(l,a){switch(l){case"sm":return{padding:1,fontSize:a.typography.size.sm,height:a.components.height.sm};case"lg":return{padding:3,fontSize:a.typography.size.lg,height:a.components.height.lg};case"md":default:return{padding:2,fontSize:a.typography.size.md,height:a.components.height.md}}}},69823:(H,T,e)=>{"use strict";e.d(T,{a:()=>h});var t=e(21256),n=e.n(t),c=e(68404),s=e(20112),r=e(66847),g=e(24177),f=e(4176),o=e(31403),l=e(66926),a=e(58230);const m={mode:g.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]};function d(y,v,i){const u=i!=null,P=Math.min(y*.15/1.5,20),E=P*1.5,C=u?v-E:v,b=Math.min(C,y);return{showLabel:u,gaugeHeight:b,titleFontSize:P}}function p(y,v,i,u){if(v.color?.mode!==l.S.Thresholds)return[{value:v.min??r.Hx,color:i.color??l.R}];const P=v.thresholds??m,E=P.mode===g.H.Percentage,C=P.steps;let b=v.min??r.Hx,S=v.max??r.Z3;E&&(b=0,S=100);const M=(0,a.m1)(b,C),x=(0,a.m1)(S,C),O=[{value:+b.toFixed(y),color:u.visualization.getColorByName(M.color)}];let L=!0;for(let B=0;B<C.length;B++){const w=C[B];if(L){M===w&&(L=!1);continue}const R=C[B-1];if(O.push({value:w.value,color:u.visualization.getColorByName(R.color)}),w===x)break}return O.push({value:+S.toFixed(y),color:u.visualization.getColorByName(x.color)}),O}class h extends c.PureComponent{constructor(){super(...arguments),this.canvasElement=null,this.renderVisualization=()=>{const{width:v,value:i,height:u,onClick:P,text:E,theme:C}=this.props,b=d(v,u,i.title),S=c.createElement("div",{style:{height:`${b.gaugeHeight}px`,width:"100%"},ref:M=>this.canvasElement=M});return c.createElement(c.Fragment,null,P?c.createElement("button",{className:(0,o.gN)(C),type:"button",onClick:P},S):S,b.showLabel&&c.createElement("div",{style:{textAlign:"center",fontSize:E?.titleSize??b.titleFontSize,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative",width:"100%",top:"-4px",cursor:"default"}},i.title))}}componentDidMount(){this.draw()}componentDidUpdate(){this.draw()}draw(){const{field:v,showThresholdLabels:i,showThresholdMarkers:u,width:P,height:E,theme:C,value:b}=this.props,S=d(P,E,b.title),M=Math.min(P,S.gaugeHeight),x=C.colors.background.secondary,O=i?1.5:1,L=Math.min(M/5.5,40)/O,B=L/5,w=(0,s.zc)(b),A=Math.min(P,M*1.3)*.9-((L+(u?B:0)+(i?10:0))*2+10),U=this.props.text?.valueSize??(0,f.MX)(w,A,M,1,L*1.7),I=Math.max(U/2.5,12);let N=v.min??r.Hx,F=v.max??r.Z3,D=b.numeric;v.thresholds?.mode===g.H.Percentage&&(N=0,F=100,b.percent===void 0?D=(D-N)/(F-N)*100:D=b.percent*100);const Y=v.decimals===void 0?2:v.decimals;u&&(N=+N.toFixed(Y),F=+F.toFixed(Y));const j={series:{gauges:{gauge:{min:N,max:F,neutralValue:v.custom?.neutral,background:{color:x},border:{color:null},shadow:{show:!1},width:L},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0,vMargin:0},cell:{border:{width:0}},threshold:{values:p(Y,v,b,C),label:{show:i,margin:B+1,font:{size:I}},show:u,width:B},value:{color:b.color,formatter:()=>w,font:{size:U,family:C.typography.fontFamily}},show:!0}}},K={data:[[0,D]],label:b.title};try{this.canvasElement&&n().plot(this.canvasElement,[K],j)}catch(z){console.error("Gauge rendering error",z,j,b)}}render(){return c.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},className:this.props.className},this.renderVisualization())}}h.defaultProps={showThresholdMarkers:!0,showThresholdLabels:!1,field:{min:0,max:100,thresholds:m}}},87691:(H,T,e)=>{"use strict";e.d(T,{k:()=>v});var t=e(21256),n=e.n(t),c=e(82897),s=e(68404),r=e(68219),g=e(40538),f=e(24505),o=e(65987),l=e(50800),a=e(31438);const m=({dimensions:u,activeDimensions:P,pos:E,timeZone:C})=>{let b=null;if(P.xAxis===null)return null;P.yAxis&&(b=P.yAxis[0]);const S=P.xAxis[1]?(0,r.jC)(u.xAxis,P.xAxis[0],P.xAxis[1]):E.x,M=(0,a.wu)(u.yAxis.columns,u.xAxis.columns,S,C),x=M.time,O=M.results.map((L,B)=>({color:L.color,label:L.label,value:L.value,isActive:b===B}));return s.createElement(l.c,{series:O,timestamp:x})};m.displayName="MultiModeGraphTooltip";var d=e(20112),p=e(89890);const h=({dimensions:u,activeDimensions:P,timeZone:E})=>{if(P.yAxis===null||P.yAxis[1]===void 0||P.xAxis===null||P.xAxis[1]===void 0)return null;const C=(0,r.jC)(u.xAxis,P.xAxis[0],P.xAxis[1]),b=(0,r.$q)(u.xAxis,P.xAxis[0]),S=b.display?(0,d.zc)(b.display(C)):C,M=(0,r.$q)(u.yAxis,P.yAxis[0]),x=(0,r.jC)(u.yAxis,P.yAxis[0],P.yAxis[1]),O=M.display,L=O(x);return s.createElement(l.c,{series:[{color:L.color,label:(0,p.C)(M),value:(0,d.zc)(L)}],timestamp:S})};h.displayName="SingleModeGraphTooltip";const y=({mode:u=g.f3.Single,dimensions:P,activeDimensions:E,pos:C,timeZone:b})=>!E||!E.xAxis?null:u==="single"?s.createElement(h,{dimensions:P,activeDimensions:E,timeZone:b}):s.createElement(m,{dimensions:P,activeDimensions:E,pos:C,timeZone:b});y.displayName="GraphTooltip";class v extends s.PureComponent{constructor(){super(...arguments),this.state={isTooltipVisible:!1,isContextVisible:!1},this.element=null,this.onPlotSelected=(P,E)=>{const{onHorizontalRegionSelected:C}=this.props;C&&C(E.xaxis.from,E.xaxis.to)},this.onPlotHover=(P,E,C)=>{this.setState({isTooltipVisible:!0,activeItem:C,pos:E})},this.onPlotClick=(P,E,C)=>{this.setState({isContextVisible:!0,isTooltipVisible:!1,contextItem:C,contextPos:E})},this.renderTooltip=()=>{const{children:P,series:E,timeZone:C}=this.props,{pos:b,activeItem:S,isTooltipVisible:M}=this.state;let x=null;if(!M||!b||E.length===0||(s.Children.forEach(P,N=>{if(x)return;(N&&N.type&&(N.type.displayName||N.type.name))===f.I.displayName&&(x=N)}),!x))return null;const O=x.props,L=O.mode||"single";if(!S&&L==="single")return null;const B=O.tooltipComponent||y,w=S?S.series.seriesIndex:0,R=S?S.dataIndex:void 0,A={xAxis:[w,R],yAxis:S?[S.series.seriesIndex,S.dataIndex]:null},U={dimensions:{xAxis:(0,r.q2)("xAxis",E.map(N=>N.timeField)),yAxis:(0,r.q2)("yAxis",E.map(N=>N.valueField))},activeDimensions:A,pos:b,mode:O.mode||g.f3.Single,timeZone:C},I=s.createElement(B,{...U});return s.cloneElement(x,{content:I,position:{x:b.pageX,y:b.pageY},offset:{x:10,y:10}})},this.renderContextMenu=()=>{const{series:P}=this.props,{contextPos:E,contextItem:C,isContextVisible:b}=this.state;if(!b||!E||!C||P.length===0)return null;const S=C?C.series.seriesIndex:0,M=C?C.dataIndex:void 0,x={xAxis:[S,M],yAxis:C?[C.series.seriesIndex,C.dataIndex]:null},O={xAxis:(0,r.q2)("xAxis",P.map(R=>R.timeField)),yAxis:(0,r.q2)("yAxis",P.map(R=>R.valueField))},L=()=>this.setState({isContextVisible:!1}),B=()=>({datapoint:C.datapoint,dataIndex:C.dataIndex,series:C.series,seriesIndex:C.series.seriesIndex,pageX:E.pageX,pageY:E.pageY}),w={x:E.pageX,y:E.pageY,onClose:L,getContextMenuSource:B,timeZone:this.props.timeZone,dimensions:O,contextDimensions:x};return s.createElement(o.w,{...w})},this.getBarWidth=()=>{const{series:P}=this.props;return Math.min(...P.map(E=>E.timeStep))}}componentDidUpdate(P,E){P!==this.props&&this.draw()}componentDidMount(){this.draw(),this.element&&(this.$element=n()(this.element),this.$element.bind("plotselected",this.onPlotSelected),this.$element.bind("plothover",this.onPlotHover),this.$element.bind("plotclick",this.onPlotClick))}componentWillUnmount(){this.$element&&this.$element.unbind("plotselected",this.onPlotSelected)}getYAxes(P){return P.length===0?[{show:!0,min:-1,max:1}]:(0,c.uniqBy)(P.map(E=>{const C=E.yAxis?E.yAxis.index:1,b=E.yAxis&&E.yAxis.min&&!isNaN(E.yAxis.min)?E.yAxis.min:null,S=E.yAxis&&E.yAxis.tickDecimals&&!isNaN(E.yAxis.tickDecimals)?E.yAxis.tickDecimals:null;return{show:!0,index:C,position:C===1?"left":"right",min:b,tickDecimals:S}}),E=>E.index)}draw(){if(this.element===null)return;const{width:P,series:E,timeRange:C,showLines:b,showBars:S,showPoints:M,isStacked:x,lineWidth:O,timeZone:L,onHorizontalRegionSelected:B}=this.props;if(!P)return;const w=P/100,R=C.from.valueOf(),A=C.to.valueOf(),U=this.getYAxes(E),I={legend:{show:!1},series:{stack:x,lines:{show:b,lineWidth:O,zero:!1},points:{show:M,fill:1,fillColor:!1,radius:2},bars:{show:S,fill:1,barWidth:S?this.getBarWidth()/1.5:1,zero:!1,lineWidth:O},shadowSize:0},xaxis:{timezone:L,show:!0,mode:"time",min:R,max:A,label:"Datetime",ticks:w,timeformat:(0,a.mc)(w,R,A),tickFormatter:a.sV},yaxes:U,grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:B?"x":null,color:"#666"},crosshair:{mode:"x"}};try{n().plot(this.element,E.filter(N=>N.isVisible),I)}catch(N){throw console.error("Graph rendering error",N,I,E),new Error("Error rendering panel")}}render(){const{ariaLabel:P,height:E,width:C,series:b}=this.props,S=b.length===0,M=this.renderTooltip(),x=this.renderContextMenu();return s.createElement("div",{className:"graph-panel","aria-label":P},s.createElement("div",{className:"graph-panel__chart",ref:O=>this.element=O,style:{height:E,width:C},onMouseLeave:()=>{this.setState({isTooltipVisible:!1})}}),S&&s.createElement("div",{className:"datapoints-warning"},"No data"),M,x)}}v.defaultProps={showLines:!0,showPoints:!1,showBars:!1,isStacked:!1,lineWidth:1};const i=null},65987:(H,T,e)=>{"use strict";e.d(T,{b:()=>p,w:()=>d});var t=e(52423),n=e(68404),c=e(68219),s=e(38849),r=e(72648),g=e(30909),f=e(72777),o=e(52081),l=e(14391),a=e(42044),m=e(6264);const d=({getContextMenuSource:y,timeZone:v,itemsGroup:i,dimensions:u,contextDimensions:P,...E})=>{const C=y(),b=i?i.map(x=>({...x,items:x.items?.filter(O=>O.label)})):[],S=()=>{if(!C)return null;let x;if(u?.yAxis&&P?.yAxis?.[1]){const L=(0,c.jC)(u.yAxis,P.yAxis[0],P.yAxis[1]),B=C.series.valueField.display;x=B(L)}const O=(0,s.dq)(C.datapoint[0],{defaultWithMS:C.series.hasMsResolution,timeZone:v});return n.createElement(p,{timestamp:O,seriesColor:C.series.color,displayName:C.series.alias||C.series.label,displayValue:x})},M=()=>b?.map((x,O)=>n.createElement(l.k,{key:`${x.label}${O}`,label:x.label},(x.items||[]).map(L=>n.createElement(a.s,{key:`${L.label}`,url:L.url,label:L.label,target:L.target,icon:L.icon,active:L.active,onClick:L.onClick}))));return n.createElement(g.x,{...E,renderMenuItems:M,renderHeader:S})},p=({timestamp:y,seriesColor:v,displayName:i,displayValue:u})=>{const P=(0,r.wW)(h);return n.createElement("div",{className:P.wrapper},n.createElement("strong",null,y),n.createElement(o.Lh,null,n.createElement("div",null,n.createElement(m.F,{color:v}),n.createElement("span",{className:P.displayName},i)),u&&n.createElement(f.W,{value:u})))};function h(y){return{wrapper:t.css`
      padding: ${y.spacing(.5)} ${y.spacing(1)};
      font-size: ${y.typography.size.sm};
      z-index: ${y.zIndex.tooltip};
    `,displayName:t.css`
      white-space: nowrap;
      padding-left: ${y.spacing(.5)};
    `}}},56506:(H,T,e)=>{"use strict";e.d(T,{U:()=>s});var t=e(82897),n=e.n(t),c=e(68404);class s extends c.Component{constructor(g){super(g),this.onSeriesToggle=this.onSeriesToggle.bind(this),this.state={hiddenSeries:[],toggledSeries:g.series}}componentDidUpdate(g){const{series:f}=this.props;(0,t.isEqual)(g.series,f)||this.setState({hiddenSeries:[],toggledSeries:f})}onSeriesToggle(g,f){const{series:o,onHiddenSeriesChanged:l}=this.props,{hiddenSeries:a}=this.state;if(f.ctrlKey||f.metaKey||f.shiftKey){const h=a.indexOf(g)>-1?a.filter(v=>v!==g):a.concat([g]),y=o.map(v=>({...v,isVisible:h.indexOf(v.label)===-1}));this.setState({hiddenSeries:h,toggledSeries:y},()=>l?l(h):void 0);return}const m=o.map(h=>h.label),d=a.length+1===m.length?[]:(0,t.difference)(m,[g]),p=o.map(h=>({...h,isVisible:d.indexOf(h.label)===-1}));this.setState({hiddenSeries:d,toggledSeries:p},()=>l?l(d):void 0)}render(){const{children:g}=this.props,{toggledSeries:f}=this.state;return g({onSeriesToggle:this.onSeriesToggle,toggledSeries:f})}}},29781:(H,T,e)=>{"use strict";e.d(T,{U:()=>l});var t=e(52423),n=e(68404),c=e(7804),s=e(68226),r=e(78056),g=e(87691);const f=(0,c.B)(({placement:a})=>({wrapper:t.css`
    display: flex;
    flex-direction: ${a==="bottom"?"column":"row"};
  `,graphContainer:t.css`
    min-height: 65%;
    flex-grow: 1;
  `,legendContainer:t.css`
    padding: 10px 0;
    max-height: ${a==="bottom"?"35%":"none"};
  `})),o=(a,m=!1,d=!1)=>{const p=a.reduce((y,v)=>y+(v[1]||0),0)===0,h=!a.reduce((y,v)=>y&&v[1]!==null,!0);return m&&h||d&&p},l=a=>{const{series:m,timeRange:d,width:p,height:h,showBars:y,showLines:v,showPoints:i,sortLegendBy:u,sortLegendDesc:P,legendDisplayMode:E,legendVisibility:C,placement:b,onSeriesToggle:S,onToggleSort:M,hideEmpty:x,hideZero:O,isStacked:L,lineWidth:B,onHorizontalRegionSelected:w,timeZone:R,children:A,ariaLabel:U}=a,{graphContainer:I,wrapper:N,legendContainer:F}=f(a),D=m.reduce((Y,j)=>o(j.data,x,O)?Y:Y.concat([{label:j.label,color:j.color||"",disabled:!j.isVisible,yAxis:j.yAxis.index,getDisplayValues:()=>j.info||[]}]),[]);return n.createElement("div",{className:N,"aria-label":U},n.createElement("div",{className:I},n.createElement(g.k,{series:m,timeRange:d,timeZone:R,showLines:v,showPoints:i,showBars:y,width:p,height:h,isStacked:L,lineWidth:B,onHorizontalRegionSelected:w},A)),C&&n.createElement("div",{className:F},n.createElement(s.$,{hideHorizontalTrack:!0},n.createElement(r.l,{items:D,displayMode:E,placement:b,sortBy:u,sortDesc:P,onLabelClick:(Y,j)=>{S&&S(Y.label,j)},onToggleSort:M}))))}},31438:(H,T,e)=>{"use strict";e.d(T,{mc:()=>o,sV:()=>f,wu:()=>g});var t=e(20112),n=e(89890),c=e(38849),s=e(47513);const r=(l,a)=>{let m=0,d=l.values.length-1,p;for(;;){if(m>d)return Math.max(d,0);p=Math.floor((m+d)/2);const h=l.values.get(p);if(h===a)return p;h&&h<a?m=p+1:d=p-1}},g=(l,a,m,d)=>{let p,h,y,v,i;const u=[];let P,E;for(p=0;p<l.length;p++){h=l[p];const C=a[p];y=r(C,m),v=m-C.values.get(y),i=C.values.get(y),(P===void 0||v>=0&&(v<P||P<0)||v<0&&v>P)&&(P=v,E=C.display?(0,t.zc)(C.display(i)):i);const b=h.display(h.values.get(y));u.push({value:(0,t.zc)(b),datapointIndex:y,seriesIndex:p,color:b.color,label:(0,n.C)(h),time:C.display?(0,t.zc)(C.display(i)):i})}return{results:u,time:E}},f=(l,a)=>(0,c.dq)(l,{format:a?.options?.timeformat,timeZone:a?.options?.timezone}),o=(l,a,m)=>{if(a&&m&&l){const d=m-a,p=d/l/1e3,h=86400010,y=31536e6;return p<=10?s.U6.interval.millisecond:p<=45?s.U6.interval.second:d<=h?s.U6.interval.minute:p<=8e4?s.U6.interval.hour:d<=y?s.U6.interval.day:p<=31536e3?s.U6.interval.month:s.U6.interval.year}return s.U6.interval.minute}},72269:(H,T,e)=>{"use strict";e.d(T,{d:()=>y,j:()=>p});var t=e(68404),n=e(95484),c=e(95027),s=e(3249),r=e(85854),g=e(55294),f=e(25318),o=e(60325),l=e(729),a=e(3200),m=e(2445),d=e(86979);const p="__fixed";function h(v,i,u=[]){for(const P of u)if(typeof P=="function"){if(!P(v,i))return!1}else if(i[P]!==v[P])return!1;return!0}class y extends t.Component{constructor(i){super(i),this.panelContext={},this.subscription=new n.w0,this.getTimeRange=()=>this.props.timeRange;let u=this.prepState(i);u.alignedData=u.config.prepData([u.alignedFrame]),this.state=u,this.plotInstance=t.createRef()}prepState(i,u=!0){let P=null;const{frames:E,fields:C,preparePlotFrame:b}=i,M=(b||d.R)(E,C||{x:s.Ls.get(r.mi.firstTimeField).get({}),y:s.Ls.get(r.mi.numeric).get({})},i.timeRange);if((0,m.Zp)("GraphNG",!1,"data aligned",M),M){let x=this.state?.config;u&&(x=i.prepConfig(M,this.props.frames,this.getTimeRange),(0,m.Zp)("GraphNG",!1,"config prepared",x)),P={alignedFrame:M,config:x},(0,m.Zp)("GraphNG",!1,"data prepared",P.alignedData)}return P}handleCursorUpdate(i){const u=i.payload?.point?.time,P=this.plotInstance.current;if(P&&u){const E=P.valToPos(u,"x");let C;if(E&&(C=(0,m.ah)(P,P.posToIdx(E))),!C||!E)return;P.setCursor({left:E,top:C})}}componentDidMount(){this.panelContext=this.context;const{eventBus:i}=this.panelContext;this.subscription.add(i.getStream(g.es).pipe((0,c.p)(50)).subscribe({next:u=>{i!==u.origin&&this.handleCursorUpdate(u)}})),this.subscription.add(i.getStream(f.IA).pipe((0,c.p)(50)).subscribe({next:u=>this.handleCursorUpdate(u)})),this.subscription.add(i.getStream(g.xH).pipe((0,c.p)(50)).subscribe({next:()=>{const u=this.plotInstance?.current;u&&u.setCursor({left:-10,top:-10})}}))}componentDidUpdate(i){const{frames:u,structureRev:P,timeZone:E,propsToDiff:C}=this.props,b=!h(i,this.props,C);if(u!==i.frames||b||E!==i.timeZone){let S=this.prepState(this.props,!1);S&&((this.state.config===void 0||E!==i.timeZone||P!==i.structureRev||!P||b)&&(S.config=this.props.prepConfig(S.alignedFrame,this.props.frames,this.getTimeRange),(0,m.Zp)("GraphNG",!1,"config recreated",S.config)),S.alignedData=S.config.prepData([S.alignedFrame]),this.setState(S))}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:i,height:u,children:P,timeRange:E,renderLegend:C}=this.props,{config:b,alignedFrame:S,alignedData:M}=this.state;return b?t.createElement(l.AY,{width:i,height:u,legend:C(b)},(x,O)=>t.createElement(a.N,{config:b,data:M,width:x,height:O,timeRange:E,plotRef:L=>this.plotInstance.current=L},P?P(b,S):null)):null}}y.contextType=o.bb},16566:(H,T,e)=>{"use strict";e.d(T,{z:()=>c});var t=e(68404);const n=t.createContext({}),c=()=>{const{data:s,dimFields:r,mapSeriesIndexToDataFrameFieldIndex:g}=(0,t.useContext)(n),f=(0,t.useCallback)(()=>{const o=r.x;let l=null;for(let a=0;a<s.fields.length;a++)if(o(s.fields[a],s,[s])){l=s.fields[a];break}return l},[s,r]);return{dimFields:r,mapSeriesIndexToDataFrameFieldIndex:g,getXAxisField:f,alignedData:s}}},45778:(H,T,e)=>{"use strict";e.d(T,{w:()=>r});var t=e(14582),n=e(19695),c=e(15128);const s={threshold:(f,o,l)=>f+l,midpoint:(f,o,l)=>(f+o)/2,plusone:(f,o,l)=>f+1};function r(f){if(f.frame.length===0)return f.frame;let o=!0,{frame:l,refFieldName:a,refFieldPseudoMax:m,refFieldPseudoMin:d,insertMode:p}=f;p||(p=s.threshold);const h=l.fields.find(i=>a!=null?i.name===a:i.type===t.fS.time);if(h==null)return l;h.state={...h.state,nullThresholdApplied:!0};const y=l.fields.map(i=>i.config.custom?.insertNulls??h.config.interval??null),v=new Set(y);if(v.delete(null),v.size===0)return l;if(v.size===1){const i=v.values().next().value;if(i<=0)return l;const u=h.values.toArray(),P=l.fields.map(C=>C.values.toArray()),E=g(u,P,i,d,m,p,o);return E===P?l:{...l,length:E[0].length,fields:l.fields.map((C,b)=>({...C,values:new n.G(E[b])}))}}return l}function g(f,o,l,a=null,m=null,d,p){const h=f.length,y=[];if(a!=null&&a<f[0]){let P=(0,c.mB)(a,l);for(;P<f[0];)y.push(d(P-l,P,l)),P+=l}y.push(f[0]);let v=f[0];for(let P=1;P<h;P++){const E=f[P];for(;E-v>l&&(y.push(d(v,E,l)),v+=l,!!p););y.push(E),v=E}if(m!=null&&m>v)for(;v+l<m;)y.push(d(v,m,l)),v+=l;const i=y.length;if(i===h)return o;const u=[];for(let P of o){let E;if(P!==f){E=Array(i);for(let C=0,b=0;C<i;C++)E[C]=f[b]===y[C]?P[b++]:null}else E=y;u.push(E)}return u}},45389:(H,T,e)=>{"use strict";e.d(T,{I:()=>n});var t=e(19695);function n(c){return{...c,fields:c.fields.map(s=>{const r=+s.config?.noValue;if(Number.isNaN(r))return s;{const g=s.values.toArray().slice();for(let f=0;f<g.length;f++)g[f]===null&&(g[f]=r);return{...s,values:new t.G(g)}}})}}},86979:(H,T,e)=>{"use strict";e.d(T,{z:()=>m,R:()=>a});var t=e(14582),n=e(19695),c=e(98234),s=e(40538),r=e(72269),g=e(45778);function f(p,h,y){let v,i;for(let u=0;u<h.length;u++)if(h[u]==null)i==null&&v!=null&&(i=u);else{if(i!=null){if(p[u]-v<y)for(;i<u;)h[i++]=void 0;i=null}v=p[u]}return h}function o(p){return p.type===t.fS.number&&p.config.custom?.drawStyle===s.l8.Bars&&!p.config.custom?.hideFrom?.viz}function l(p){let h=p.fields.find(v=>v.type===t.fS.time),y=h?.values.toArray();for(let v=0;v<p.fields.length;v++){let i=p.fields[v];if(i===h||o(i))continue;let u=i.config.custom?.spanNulls;typeof u=="number"&&u!==-1&&(i.values=new n.G(f(y,i.values.toArray(),u)))}return p}function a(p,h,y){p=p.map(P=>P.fields[0].state?.nullThresholdApplied?P:(0,g.w)({frame:P,refFieldName:null,refFieldPseudoMin:y?.from.valueOf(),refFieldPseudoMax:y?.to.valueOf()}));let v=0;p.forEach(P=>{P.fields.forEach(E=>{o(E)&&(E.config.custom={...E.config.custom,spanNulls:-1},v++)})});let i=1/0;v>1&&p.forEach(P=>{if(!P.fields.some(o))return;const E=P.fields[0].values.toArray();for(let C=0;C<E.length;C++)C>0&&(i=Math.min(i,E[C]-E[C-1]))});let u=(0,c._9)({frames:p,joinBy:h.x,keep:h.y,keepOriginIndices:!0});return u?(u=l(u),i!==1/0&&(u.fields.forEach((P,E)=>{let C=P.values.toArray();if(E===0){let b=C[C.length-1];C.push(b+i,b+2*i)}else o(P)?C.push(null,null):C.push(void 0,void 0)}),u.length+=2),u):null}function m(p){const h="na",y=`${p.min!==void 0?p.min:h}-${p.max!==void 0?p.max:h}`,v=`${p.custom?.axisSoftMin!==void 0?p.custom.axisSoftMin:h}-${p.custom?.axisSoftMax!==void 0?p.custom.axisSoftMax:h}`,i=`${p.custom?.axisPlacement!==void 0?p.custom?.axisPlacement:s.LB.Auto}`,u=p.unit??r.j,P=p.custom?.scaleDistribution?d(p.custom.scaleDistribution):s.wf.Linear,E=Boolean(p.custom?.axisLabel)?p.custom.axisLabel:h;return`${u}/${y}/${v}/${i}/${P}/${E}`}function d(p){return p.type===s.wf.Log?`${p.type}${p.log}`:p.type}},39904:(H,T,e)=>{"use strict";e.d(T,{J:()=>it});var t=e(52423),n=e(68404),c=e(95148),s=e(43565),r=e(72648),g=e(94654),f=e(70726),o=e(30735),l=e(97048),a=e(43053),m=e(76059),d=e(41477),p=e(25173),h=e(89833),y=e(24465),v=e(85429),i=e(26925),u=e(22346),P=e(85334),E=e(84060),C=e(92270),b=e(7803),S=e(26183),M=e(94526),x=e(49893),O=e(79691),L=e(35644),B=e(47255),w=e(76375),R=e(88921),A=e(59622),U=e(35988),I=e(63536),N=e(69343),F=e(38958),D=e(95e3),Y=e(53505),j=e(45299),K=e(65774),z=e(39239),Z=e(53516),ae=e(94149),J=e(62373),oe=e(42601),Ee=e(39295),me=e(19570),re=e(369),le=e(71942),pe=e(97623),ee=e(7955),se=e(41429),Q=e(61501),G=e(47069),q=e(48509),X=e(43305),de=e(16584),Be=e(42644),ke=e(79603),He=e(65291),ue=e(7835),Oe=e(63050),Fe=e(49024),Ie=e(67226),we=e(49162),Re=e(88297),_e=e(70973),et=e(26055),qe=e(56271),Je=e(5810),lt=e(3408),at=e(67628),Xe=e(50778),gt=e(7274),ot=e(70471),Ye=e(75603),mt=e(91196),ce=e(48411),be=e(16243),Te=e(78372),Ke=e(8380),ge=e(48578),Me=e(83143),ye=e(18625),fe=e(91157),he=e(24062),De=e(46990),Ae=e(26407),Ne=e(23841),Ze=e(19827),Se=e(5386),Ue=e(60093),Qe=e(69980),pt=e(50319),bt=e(67743),yt=e(27207),Mt=e(7532),At=e(6127),Pt=e(61449),rn=e(79748),Fn=e(80384),kn=e(51164),Jn=e(98723),qn=e(90577),Ut=e(52677),ut=e(98851),nt=e(20323),vt=e(2533),ht=e(51284),It=e(63742),Ft=e(35398),en=e(57710),sn=e(91290),Mn=e(27714),En=e(42148),yn=e(1316),Bn=e(39423),ea=e(31277),Qn=e(71580),Kn=e(71171),Ua=e(36746),pa=e(4403),va=e(80579),za=e(3802),ja=e(22465),Ea=e(11774),ma=e(98361),Xa=e(45453),Oa=e(99703),ss=e(52370),Ks=e(34924),Ss=e(40159),Bs=e(76419),ls=e(26216),ws=e(96864),qs=e(25119),Da=e(95428),Vs=e(37917),Es=e(72461),er=e(39228),dr=e(59619),es=e(43743),tr=e(24099),Is=e(55054),ts=e(8),Zs=e(3265),Xt=e(13965),kt=e(6666),vn=e(97091),An=e(34604),Wn=e(75864),Xn=e(28122),Ha=e(48491),Qa=e(97612),ka=e(32411),ys=e(36319),xs=e(96861),Ga=e(25169),or=e(34052),bs=e(88175),ur=e(36277),mr=e(62695),Sr=e(65023),Wr=e(51433),ms=e(46558);let Mr=!1,ir="public/img/icons/";function tn(Lt,Gt){c.V[ir+Gt]={content:Lt,status:"loaded"}}function pr(){Mr=!0;const Lt=typeof window<"u"&&window.__grafana_public_path__;Lt&&(ir=Lt+"img/icons/"),tn(g,"unicons/adjust-circle.svg"),tn(f,"unicons/angle-double-down.svg"),tn(o,"unicons/angle-double-right.svg"),tn(l,"unicons/angle-down.svg"),tn(a,"unicons/angle-left.svg"),tn(m,"unicons/angle-right.svg"),tn(d,"unicons/angle-up.svg"),tn(p,"unicons/apps.svg"),tn(h,"unicons/arrow.svg"),tn(y,"unicons/arrow-down.svg"),tn(v,"unicons/arrow-from-right.svg"),tn(i,"unicons/arrow-left.svg"),tn(u,"unicons/arrow-random.svg"),tn(P,"unicons/arrow-right.svg"),tn(E,"unicons/arrow-up.svg"),tn(C,"unicons/arrows-h.svg"),tn(b,"unicons/backward.svg"),tn(S,"unicons/bars.svg"),tn(M,"unicons/bell.svg"),tn(x,"unicons/bell-slash.svg"),tn(O,"unicons/bolt.svg"),tn(L,"unicons/book.svg"),tn(B,"unicons/book-open.svg"),tn(w,"unicons/brackets-curly.svg"),tn(R,"unicons/bug.svg"),tn(A,"unicons/building.svg"),tn(U,"unicons/calculator-alt.svg"),tn(I,"unicons/calendar-alt.svg"),tn(N,"unicons/camera.svg"),tn(F,"unicons/channel-add.svg"),tn(D,"unicons/chart-line.svg"),tn(Y,"unicons/check.svg"),tn(j,"unicons/check-circle.svg"),tn(K,"unicons/circle.svg"),tn(z,"unicons/clipboard-alt.svg"),tn(Z,"unicons/clock-nine.svg"),tn(ae,"unicons/cloud.svg"),tn(J,"unicons/cloud-download.svg"),tn(oe,"unicons/code-branch.svg"),tn(Ee,"unicons/cog.svg"),tn(me,"unicons/columns.svg"),tn(re,"unicons/comment-alt.svg"),tn(le,"unicons/comment-alt-share.svg"),tn(pe,"unicons/comments-alt.svg"),tn(ee,"unicons/compass.svg"),tn(se,"unicons/copy.svg"),tn(Q,"unicons/cube.svg"),tn(G,"unicons/dashboard.svg"),tn(q,"unicons/database.svg"),tn(X,"unicons/document-info.svg"),tn(de,"unicons/download-alt.svg"),tn(Be,"unicons/draggabledots.svg"),tn(ke,"unicons/edit.svg"),tn(He,"unicons/ellipsis-v.svg"),tn(ue,"unicons/envelope.svg"),tn(Oe,"unicons/exchange-alt.svg"),tn(Fe,"unicons/exclamation-triangle.svg"),tn(Ie,"unicons/external-link-alt.svg"),tn(we,"unicons/eye.svg"),tn(Re,"unicons/eye-slash.svg"),tn(_e,"unicons/file-alt.svg"),tn(et,"unicons/file-blank.svg"),tn(qe,"unicons/filter.svg"),tn(Je,"unicons/folder.svg"),tn(lt,"unicons/folder-open.svg"),tn(at,"unicons/folder-plus.svg"),tn(Xe,"unicons/folder-upload.svg"),tn(gt,"unicons/forward.svg"),tn(ot,"unicons/graph-bar.svg"),tn(Ye,"unicons/history.svg"),tn(mt,"unicons/home-alt.svg"),tn(ce,"unicons/import.svg"),tn(be,"unicons/info.svg"),tn(Te,"unicons/info-circle.svg"),tn(Ke,"unicons/k6.svg"),tn(ge,"unicons/key-skeleton-alt.svg"),tn(Me,"unicons/keyboard.svg"),tn(ye,"unicons/link.svg"),tn(fe,"unicons/list-ul.svg"),tn(he,"unicons/lock.svg"),tn(De,"unicons/minus.svg"),tn(Ae,"unicons/minus-circle.svg"),tn(Ne,"unicons/mobile-android.svg"),tn(Ze,"unicons/monitor.svg"),tn(Se,"unicons/pause.svg"),tn(Ue,"unicons/pen.svg"),tn(Qe,"unicons/play.svg"),tn(pt,"unicons/plug.svg"),tn(bt,"unicons/plus.svg"),tn(yt,"unicons/plus-circle.svg"),tn(Mt,"unicons/power.svg"),tn(At,"unicons/presentation-play.svg"),tn(Pt,"unicons/process.svg"),tn(rn,"unicons/question-circle.svg"),tn(Fn,"unicons/repeat.svg"),tn(kn,"unicons/rocket.svg"),tn(Jn,"unicons/save.svg"),tn(qn,"unicons/search.svg"),tn(Ut,"unicons/search-minus.svg"),tn(ut,"unicons/search-plus.svg"),tn(nt,"unicons/share-alt.svg"),tn(vt,"unicons/shield.svg"),tn(ht,"unicons/signal.svg"),tn(It,"unicons/signin.svg"),tn(Ft,"unicons/signout.svg"),tn(en,"unicons/sitemap.svg"),tn(sn,"unicons/slack.svg"),tn(Mn,"unicons/sliders-v-alt.svg"),tn(En,"unicons/sort-amount-down.svg"),tn(yn,"unicons/sort-amount-up.svg"),tn(Bn,"unicons/square-shape.svg"),tn(ea,"unicons/star.svg"),tn(Qn,"unicons/step-backward.svg"),tn(Kn,"unicons/sync.svg"),tn(Ua,"unicons/table.svg"),tn(pa,"unicons/tag-alt.svg"),tn(va,"unicons/times.svg"),tn(za,"unicons/trash-alt.svg"),tn(ja,"unicons/unlock.svg"),tn(Ea,"unicons/upload.svg"),tn(ma,"unicons/user.svg"),tn(Xa,"unicons/users-alt.svg"),tn(Oa,"unicons/wrap-text.svg"),tn(ss,"unicons/cloud-upload.svg"),tn(Ks,"unicons/credit-card.svg"),tn(Ss,"unicons/file-copy-alt.svg"),tn(Bs,"unicons/fire.svg"),tn(ls,"unicons/hourglass.svg"),tn(ws,"unicons/layer-group.svg"),tn(qs,"unicons/line-alt.svg"),tn(Da,"unicons/list-ui-alt.svg"),tn(Vs,"unicons/message.svg"),tn(Es,"unicons/palette.svg"),tn(er,"unicons/percentage.svg"),tn(dr,"unicons/shield-exclamation.svg"),tn(es,"unicons/plus-square.svg"),tn(tr,"unicons/x.svg"),tn(Is,"unicons/capture.svg"),tn(ts,"custom/gf-grid.svg"),tn(Zs,"custom/gf-landscape.svg"),tn(Xt,"custom/gf-layout-simple.svg"),tn(kt,"custom/gf-portrait.svg"),tn(vn,"custom/gf-bar-alignment-after.svg"),tn(An,"custom/gf-bar-alignment-before.svg"),tn(Wn,"custom/gf-bar-alignment-center.svg"),tn(Xn,"custom/gf-interpolation-linear.svg"),tn(Ha,"custom/gf-interpolation-smooth.svg"),tn(Qa,"custom/gf-interpolation-step-after.svg"),tn(ka,"custom/gf-interpolation-step-before.svg"),tn(ys,"custom/gf-logs.svg"),tn(xs,"custom/gf-movepane-left.svg"),tn(Ga,"custom/gf-movepane-right.svg"),tn(or,"mono/favorite.svg"),tn(bs,"mono/grafana.svg"),tn(ur,"mono/heart.svg"),tn(mr,"mono/heart-break.svg"),tn(Sr,"mono/panel-add.svg"),tn(Wr,"mono/library-panel.svg"),tn(ms,"unicons/record-audio.svg")}var $r=e(37532);const Br=Lt=>({container:t.css`
      label: Icon;
      display: inline-block;
      line-height: 0;
    `,icon:t.css`
      vertical-align: middle;
      display: inline-block;
      fill: currentColor;
    `,orange:t.css`
      fill: ${Lt.v1.palette.orange};
    `}),it=n.forwardRef(({size:Lt="md",type:Gt="default",name:Zt,className:cn,style:hn,title:Tn="",...fn},Rt)=>{const ya=(0,r.wW)(Br);if(Zt?.startsWith("fa fa-"))return n.createElement("i",{className:Dt(Zt,cn),...fn,style:hn});if(Zt==="panel-add"&&(Lt="xl"),Mr||pr(),(0,s.Mo)(Zt)||console.warn("Icon component passed an invalid icon name",Zt),!Zt||Zt.includes(".."))return n.createElement("div",{ref:Rt},"invalid icon name");const Sa=(0,$r.B)(Lt),Ca=Sa,wa=Zt.startsWith("gf-bar-align")?16:Zt.startsWith("gf-interp")?30:Sa,rs=(0,$r.y)(Zt,Gt),Fa=`${ir}${rs}/${Zt}.svg`;return n.createElement("div",{className:ya.container,...fn,ref:Rt},n.createElement(c.Z,{src:Fa,width:wa,height:Ca,title:Tn,className:(0,t.cx)(ya.icon,cn,Gt==="mono"?{[ya.orange]:Zt==="favorite"}:""),style:hn}))});it.displayName="Icon";function Dt(Lt,Gt){return(0,t.cx)(Lt,{"fa-spin":Lt==="fa fa-spinner"},Gt)}},37532:(H,T,e)=>{"use strict";e.d(T,{B:()=>c,y:()=>n});const t=["grafana","favorite","heart-break","heart","panel-add","library-panel","circle-mono"];function n(s,r){return s?.startsWith("gf-")?"custom":t.includes(s)?"mono":r==="default"?"unicons":r==="solid"?"solid":"mono"}function c(s){switch(s){case"xs":return 12;case"sm":return 14;case"md":return 16;case"lg":return 18;case"xl":return 24;case"xxl":return 36;case"xxxl":return 48}}},8180:(H,T,e)=>{"use strict";e.d(T,{h:()=>a});var t=e(52423),n=e(68404),c=e(64724),s=e(72648),r=e(85419),g=e(7804),f=e(39904),o=e(37532),l=e(61860);const a=n.forwardRef(({name:d,size:p="md",iconType:h,tooltip:y,tooltipPlacement:v,ariaLabel:i,className:u,variant:P="secondary",...E},C)=>{const b=(0,s.l4)(),S=m(b,p,P),M=typeof y=="string"?y:"",x=n.createElement("button",{ref:C,"aria-label":i||M,...E,className:(0,t.cx)(S.button,u)},n.createElement(f.J,{name:d,size:p,className:S.icon,type:h}));return y?n.createElement(l.u,{content:y,placement:v},x):x});a.displayName="IconButton";const m=(0,g.B)((d,p,h)=>{const y=(0,o.B)(p),v=Math.max(y/3,8);let i=d.colors.text.primary;return h==="primary"?i=d.colors.primary.text:h==="destructive"&&(i=d.colors.error.text),{button:t.css`
      width: ${y}px;
      height: ${y}px;
      background: transparent;
      border: none;
      color: ${i};
      padding: 0;
      margin: 0;
      outline: none;
      box-shadow: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      border-radius: ${d.shape.borderRadius()};
      z-index: 0;
      margin-right: ${d.spacing(.5)};

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        color: ${d.colors.action.disabledText};
        opacity: 0.65;
        box-shadow: none;
      }

      &:before {
        content: '';
        display: block;
        opacity: 1;
        position: absolute;
        transition-duration: 0.2s;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        z-index: -1;
        bottom: -${v}px;
        left: -${v}px;
        right: -${v}px;
        top: -${v}px;
        background: none;
        border-radius: 50%;
        box-sizing: border-box;
        transform: scale(0);
        transition-property: transform, opacity;
      }

      &:focus,
      &:focus-visible {
        ${(0,r.getFocusStyles)(d)}
      }

      &:focus:not(:focus-visible) {
        ${(0,r.getMouseFocusStyles)(d)}
      }

      &:hover {
        color: ${i};

        &:before {
          background-color: ${h==="secondary"?d.colors.action.hover:c.alpha(i,.12)};
          border: none;
          box-shadow: none;
          opacity: 1;
          transform: scale(0.8);
        }
      }
    `,icon:t.css`
      vertical-align: baseline;
      display: flex;
    `}})},26338:(H,T,e)=>{"use strict";e.d(T,{Z:()=>f,a:()=>l});var t=e(52423),n=e(68404),c=e(40400),s=e(72648),r=e(19985),g=e(17784);const f=n.memo(n.forwardRef(({title:m,featureState:d,...p},h)=>{const y=(0,s.wW)(o),v=d?n.createElement(n.Fragment,null,n.createElement("div",{className:y.badge},n.createElement(l,{featureState:d})),n.createElement("h3",null,m)):n.createElement("h3",null,m);return n.createElement(g.v,{branded:!0,title:v,urlTitle:"Read documentation",ref:h,...p})}));f.displayName="FeatureInfoBox";const o=m=>({badge:t.css`
      margin-bottom: ${m.spacing(1)};
    `}),l=({featureState:m,tooltip:d})=>{const p=a(m);return n.createElement(r.C,{text:p.text,color:p.color,icon:p.icon,tooltip:d})};function a(m){switch(m){case c.CQ.alpha:return{text:"Alpha",icon:"exclamation-triangle",color:"orange"}}return{text:"Beta",icon:"rocket",color:"blue"}}},17784:(H,T,e)=>{"use strict";e.d(T,{v:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(7804),r=e(45253),g=e(39904);const f=n.memo(n.forwardRef(({title:l,className:a,children:m,branded:d,url:p,urlTitle:h,onDismiss:y,severity:v="info",...i},u)=>{const P=(0,c.wW)(o);return n.createElement(r.b,{severity:v,className:a,...i,ref:u,title:l},n.createElement("div",null,m),p&&n.createElement("a",{href:p,className:(0,t.cx)("external-link",P.docsLink),target:"_blank",rel:"noreferrer"},n.createElement(g.J,{name:"book"})," ",h||"Read more"))}));f.displayName="InfoBox";const o=(0,s.B)(l=>({docsLink:t.css`
      display: inline-block;
      margin-top: ${l.spacing(2)};
    `}))},4784:(H,T,e)=>{"use strict";e.d(T,{K:()=>f});var t=e(52423),n=e(68404),c=e(11979),s=e(72648),r=e(39904),g=e(85511);function f({referenceElement:m,children:d,suffixIcon:p,placement:h}){const[y,v]=(0,n.useState)(null),i=(0,c.D)(m,y,{placement:h}),u=(0,s.wW)(o),P=(0,s.wW)(a);return n.createElement(g.h_,null,n.createElement("div",{style:{display:"inline-block",...i.styles.popper},...i.attributes.popper,ref:v},n.createElement("span",{className:(0,t.cx)(u.root,P[h])},d&&n.createElement("span",null,d),p&&n.createElement(r.J,{name:p}))))}const o=m=>({root:(0,t.css)({...m.typography.bodySmall,willChange:"transform",background:m.components.tooltip.background,color:m.components.tooltip.text,padding:m.spacing(.5,1.5),borderRadius:100,display:"inline-flex",gap:m.spacing(.5),alignItems:"center"})}),l=(m,d)=>(0,t.keyframes)({from:{opacity:0,transform:`translate(${m}, ${d})`},to:{opacity:1,transform:"translate(0, 0px)"}}),a=m=>{const p=l(0,m.spacing(1)),h=l(0,m.spacing(1*-1)),y=l(m.spacing(1),0),v=l(m.spacing(1*-1),0);return{top:(0,t.css)({marginBottom:m.spacing(1),animation:`${p} ease-out 100ms`}),bottom:(0,t.css)({marginTop:m.spacing(1),animation:`${h} ease-out 100ms`}),left:(0,t.css)({marginRight:m.spacing(1),animation:`${y} ease-out 100ms`}),right:(0,t.css)({marginLeft:m.spacing(1),animation:`${v} ease-out 100ms`})}}},68668:(H,T,e)=>{"use strict";e.d(T,{H:()=>s});var t=e(68404),n=e(4176),c=e(46967);const s=t.forwardRef((g,f)=>{const{defaultValue:o="",minWidth:l=10,maxWidth:a,onCommitChange:m,onKeyDown:d,onBlur:p,...h}=g,[y,v]=t.useState(o),[i,u]=t.useState(l);return(0,t.useEffect)(()=>{u(r(y.toString(),l,a))},[y,a,l]),t.createElement(c.I,{...h,ref:f,value:y.toString(),onChange:P=>{v(P.currentTarget.value)},width:i,onBlur:P=>{p?p(P):m&&m(P)},onKeyDown:P=>{d?d(P):P.key==="Enter"&&m&&m(P)},"data-testid":"autosize-input"})});function r(g,f,o){if(!g)return f;const l=3,a=(0,n.X1)(g.toString(),14).width/8+l;return f&&a<f?f:o&&a>o?o:a}s.displayName="AutoSizeInput"},46967:(H,T,e)=>{"use strict";e.d(T,{H:()=>l,I:()=>o});var t=e(52423),n=e(68404),c=e(10025),s=e(72648),r=e(7804),g=e(73267),f=e(67487);const o=n.forwardRef((a,m)=>{const{className:d,addonAfter:p,addonBefore:h,prefix:y,suffix:v,invalid:i,loading:u,width:P=0,...E}=a,[C,b]=(0,c.Z)(),[S,M]=(0,c.Z)(),x=(0,s.l4)(),O=l({theme:x,invalid:!!i,width:P});return n.createElement("div",{className:(0,t.cx)(O.wrapper,d),"data-testid":"input-wrapper"},!!h&&n.createElement("div",{className:O.addon},h),n.createElement("div",{className:O.inputWrapper},y&&n.createElement("div",{className:O.prefix,ref:C},y),n.createElement("input",{ref:m,className:O.input,...E,style:{paddingLeft:y?b.width+12:void 0,paddingRight:v||u?M.width+12:void 0}}),(v||u)&&n.createElement("div",{className:O.suffix,ref:S},u&&n.createElement(f.$,{className:O.loadingIndicator,inline:!0}),v)),!!p&&n.createElement("div",{className:O.addon},p))});o.displayName="Input";const l=(0,r.B)(({theme:a,invalid:m=!1,width:d})=>{const p="28px",h=t.css`
    position: absolute;
    top: 0;
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-grow: 0;
    flex-shrink: 0;
    font-size: ${a.typography.size.md};
    height: 100%;
    /* Min width specified for prefix/suffix classes used outside React component*/
    min-width: ${p};
    color: ${a.colors.text.secondary};
  `;return{wrapper:(0,t.cx)(t.css`
        label: input-wrapper;
        display: flex;
        width: ${d?`${a.spacing(d)}`:"100%"};
        height: ${a.spacing(a.components.height.md)};
        border-radius: ${a.shape.borderRadius()};
        &:hover {
          > .prefix,
          .suffix,
          .input {
            border-color: ${m?a.colors.error.border:a.colors.primary.border};
          }

          // only show number buttons on hover
          input[type='number'] {
            -moz-appearance: number-input;
            -webkit-appearance: number-input;
            appearance: textfield;
          }

          input[type='number']::-webkit-inner-spin-button,
          input[type='number']::-webkit-outer-spin-button {
            -webkit-appearance: inner-spin-button !important;
            opacity: 1;
          }
        }
      `),inputWrapper:t.css`
      label: input-inputWrapper;
      position: relative;
      flex-grow: 1;
      /* we want input to be above addons, especially for focused state */
      z-index: 1;

      /* when input rendered with addon before only*/
      &:not(:first-child):last-child {
        > input {
          border-left: none;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      /* when input rendered with addon after only*/
      &:first-child:not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      /* when rendered with addon before and after */
      &:not(:first-child):not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      input {
        /* paddings specified for classes used outside React component */
        &:not(:first-child) {
          padding-left: ${p};
        }
        &:not(:last-child) {
          padding-right: ${p};
        }
        &[readonly] {
          cursor: default;
        }
      }
    `,input:(0,t.cx)((0,g.GL)(a),(0,g.RK)(a,m),t.css`
        label: input-input;
        position: relative;
        z-index: 0;
        flex-grow: 1;
        border-radius: ${a.shape.borderRadius()};
        height: 100%;
        width: 100%;
      `),inputDisabled:t.css`
      background-color: ${a.colors.action.disabledBackground};
      color: ${a.colors.action.disabledText};
      border: 1px solid ${a.colors.action.disabledBackground};
      &:focus {
        box-shadow: none;
      }
    `,addon:t.css`
      label: input-addon;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-grow: 0;
      flex-shrink: 0;
      position: relative;

      &:first-child {
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
        > :last-child {
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      &:last-child {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        > :first-child {
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }
      > *:focus {
        /* we want anything that has focus and is an addon to be above input */
        z-index: 2;
      }
    `,prefix:(0,t.cx)(h,t.css`
        label: input-prefix;
        padding-left: ${a.spacing(1)};
        padding-right: ${a.spacing(.5)};
        border-right: none;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
      `),suffix:(0,t.cx)(h,t.css`
        label: input-suffix;
        padding-left: ${a.spacing(1)};
        padding-right: ${a.spacing(1)};
        margin-bottom: -2px;
        border-left: none;
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        right: 0;
      `),loadingIndicator:t.css`
      & + * {
        margin-left: ${a.spacing(.5)};
      }
    `}})},63619:(H,T,e)=>{"use strict";e.d(T,{g:()=>n});var t=e(59052);const n=t.Qr},65455:(H,T,e)=>{"use strict";e.d(T,{e:()=>h});var t=e(52423),n=e(82897),c=e(68404),s=e(91742),r=e(49922),g=e(72648),f=e(39904),o=e(8180);const l=t.css`
  display: flex;
  align-items: center;
  height: 100%;
`;function a({row:u,__rowID:P}){return c.createElement("div",{className:l},c.createElement(o.h,{tooltip:"toggle row expanded","aria-controls":P,name:u.isExpanded?"angle-down":"angle-right","aria-expanded":u.isExpanded,...u.getToggleRowExpandedProps()}))}const m="__expander";function d(u){return[{id:m,Cell:a,disableSortBy:!0,width:0},...u.map(P=>({id:P.id,accessor:P.id,Header:P.header||(()=>null),sortType:P.sortType||"alphanumeric",disableSortBy:!Boolean(P.sortType),width:P.disableGrow?0:void 0,visible:P.visible,...P.cell&&{Cell:P.cell}}))]}const p=u=>({table:t.css`
    border-radius: ${u.shape.borderRadius()};
    border: solid 1px ${u.colors.border.weak};
    background-color: ${u.colors.background.secondary};
    width: 100%;

    td {
      padding: ${u.spacing(1)};
    }

    td,
    th {
      min-width: ${u.spacing(3)};
    }
  `,evenRow:t.css`
    background: ${u.colors.background.primary};
  `,disableGrow:t.css`
    width: 0%;
  `,header:t.css`
    &,
    & > button {
      position: relative;
      white-space: nowrap;
      padding: ${u.spacing(1)};
    }
    & > button {
      &:after {
        content: '\\00a0';
      }
      width: 100%;
      height: 100%;
      background: none;
      border: none;
      padding-right: ${u.spacing(2.5)};
      text-align: left;
      &:hover {
        background-color: ${u.colors.emphasize(u.colors.background.secondary,.05)};
      }
    }
  `,sortableHeader:t.css`
    /* increases selector's specificity so that it always takes precedence over default styles  */
    && {
      padding: 0;
    }
  `});function h({data:u,className:P,columns:E,renderExpandedRow:C,getRowId:b}){const S=(0,g.wW)(p),M=(0,c.useMemo)(()=>d(E),[E]),x=y(),O=(0,c.useCallback)(U=>`${x}-${U.id}`.replace(/\s/g,""),[x]),{getTableProps:L,getTableBodyProps:B,headerGroups:w,rows:R,prepareRow:A}=(0,s.useTable)({columns:M,data:u,autoResetExpanded:!1,autoResetSortBy:!1,disableMultiSort:!0,getRowId:b,initialState:{hiddenColumns:[!C&&m,...M.filter(U=>!(!U.visible||U.visible(u))).map(U=>U.id).filter(r.fQ)].filter(r.fQ)}},s.useSortBy,s.useExpanded);return R.forEach(A),c.createElement("table",{...L(),className:(0,t.cx)(S.table,P)},c.createElement("thead",null,w.map(U=>{const{key:I,...N}=U.getHeaderGroupProps();return c.createElement("tr",{key:I,...N},U.headers.map(F=>{const{key:D,...Y}=F.getHeaderProps();return c.createElement("th",{key:D,className:(0,t.cx)(S.header,{[S.disableGrow]:F.width===0,[S.sortableHeader]:F.canSort}),...Y,...F.isSorted&&{"aria-sort":F.isSortedDesc?"descending":"ascending"}},c.createElement(i,{column:F}))}))})),c.createElement("tbody",{...B()},R.map((U,I)=>{const N=(0,t.cx)(I%2===0&&S.evenRow),{key:F,...D}=U.getRowProps(),Y=O(U);return c.createElement(c.Fragment,{key:F},c.createElement("tr",{className:N,...D},U.cells.map(j=>{const{key:K,...z}=j.getCellProps();return c.createElement("td",{key:K,...z},j.render("Cell",{__rowID:Y}))})),U.isExpanded&&C&&c.createElement("tr",{className:N,...D,id:Y},c.createElement("td",{colSpan:U.cells.length},C(U.original))))})))}const y=()=>(0,c.useMemo)(()=>(0,n.uniqueId)("InteractiveTable"),[]),v=u=>({sortIcon:t.css`
    position: absolute;
    top: ${u.spacing(1)};
  `});function i({column:{canSort:u,render:P,isSorted:E,isSortedDesc:C,getSortByToggleProps:b}}){const S=(0,g.wW)(v),{onClick:M}=b(),x=c.createElement(c.Fragment,null,P("Header"),E&&c.createElement("span",{"aria-hidden":"true",className:S.sortIcon},c.createElement(f.J,{name:C?"angle-down":"angle-up"})));return u?c.createElement("button",{type:"button",onClick:M},x):x}},16065:(H,T,e)=>{"use strict";e.d(T,{g:()=>c});var t=e(68404),n=e(73892);class c extends t.PureComponent{constructor(){super(...arguments),this.wrapperRef=(0,t.createRef)(),this.renderJson=()=>{const{json:r,config:g,open:f,onDidRender:o}=this.props,l=this.wrapperRef.current,a=new n.u(r,f,g);l.hasChildNodes()?l.replaceChild(a.render(),l.lastChild):l.appendChild(a.render()),o&&o(a.json)}}componentDidMount(){this.renderJson()}componentDidUpdate(){this.renderJson()}render(){const{className:r}=this.props;return t.createElement("div",{className:r,ref:this.wrapperRef})}}c.defaultProps={open:3,config:{animateOpen:!0}}},73892:(H,T,e)=>{"use strict";e.d(T,{u:()=>i});var t=e(82897);function n(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function c(u){return!!u&&typeof u==="object"}function s(u){if(u===void 0)return"";if(u===null||typeof u=="object"&&!u.constructor)return"Object";const E=/function ([^(]*)/.exec(u.constructor.toString());return E&&E.length>1?E[1]:""}function r(u){return u===null?"null":typeof u}function g(u,P){const E=r(u);return E==="null"||E==="undefined"?E:(E==="string"&&(P='"'+n(P)+'"'),E==="function"?u.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{\u2026}":P)}let f="";function o(u){return c(u)?(f=s(u),Array.isArray(u)&&(f+="["+u.length+"]")):f=g(u,u.toString()),f}function l(u){return`json-formatter-${u}`}function a(u,P,E){const C=document.createElement(u);return P&&C.classList.add(l(P)),E!==void 0&&(E instanceof Node?C.appendChild(E):C.appendChild(document.createTextNode(String(E)))),C}const m=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,d=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,p=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,h=10,y=typeof window<"u"&&window.requestAnimationFrame||(u=>(u(),0)),v={animateOpen:!0,animateClose:!0};class i{constructor(P,E=1,C=v,b){this.json=P,this.open=E,this.config=C,this.key=b,this._isOpen=null,this.element=null,this.skipChildren=!1}get isOpen(){return this._isOpen!==null?this._isOpen:this.open>0}set isOpen(P){this._isOpen=P}get isDate(){return this.type==="string"&&(m.test(this.json)||p.test(this.json)||d.test(this.json))}get isUrl(){return this.type==="string"&&this.json.indexOf("http")===0}get isArray(){return Array.isArray(this.json)}get isObject(){return c(this.json)}get isEmptyObject(){return!this.keys.length&&!this.isArray}get isEmpty(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray}get hasKey(){return typeof this.key<"u"}get constructorName(){return s(this.json)}get type(){return r(this.json)}get keys(){return this.isObject?Object.keys(this.json).map(P=>P||'""'):[]}toggleOpen(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(l("open")))}openAtDepth(P=1){P<0||(this.open=P,this.isOpen=P!==0,this.element&&(this.removeChildren(!1),P===0?this.element.classList.remove(l("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(l("open")))))}isNumberArray(){return this.json.length>0&&this.json.length<4&&((0,t.isNumber)(this.json[0])||(0,t.isNumber)(this.json[1]))}renderArray(){const P=a("span");return P.appendChild(a("span","bracket","[")),this.isNumberArray()?(this.json.forEach((E,C)=>{C>0&&P.appendChild(a("span","array-comma",",")),P.appendChild(a("span","number",E))}),this.skipChildren=!0):P.appendChild(a("span","number",this.json.length)),P.appendChild(a("span","bracket","]")),P}render(P=!1){this.element=a("div","row");const E=a("a","toggler-link"),C=a("span","toggler");if(this.isObject&&E.appendChild(C),this.hasKey&&E.appendChild(a("span","key",`${this.key}:`)),this.isObject){const S=a("span","value"),M=a("span"),x=a("span","constructor-name",this.constructorName);if(M.appendChild(x),this.isArray){const O=this.renderArray();M.appendChild(O)}S.appendChild(M),E.appendChild(S)}else{const S=this.isUrl?a("a"):a("span");S.classList.add(l(this.type)),this.isDate&&S.classList.add(l("date")),this.isUrl&&(S.classList.add(l("url")),S.setAttribute("href",this.json));const M=g(this.json,this.json);S.appendChild(document.createTextNode(M)),E.appendChild(S)}const b=a("div","children");return this.isObject&&b.classList.add(l("object")),this.isArray&&b.classList.add(l("array")),this.isEmpty&&b.classList.add(l("empty")),this.config&&this.config.theme&&this.element.classList.add(l(this.config.theme)),this.isOpen&&this.element.classList.add(l("open")),P||this.element.appendChild(E),this.skipChildren?E.removeChild(C):this.element.appendChild(b),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&E.addEventListener("click",this.toggleOpen.bind(this)),this.element}appendChildren(P=!1){const E=this.element&&this.element.querySelector(`div.${l("children")}`);if(!(!E||this.isEmpty))if(P){let C=0;const b=()=>{const S=this.keys[C],M=new i(this.json[S],this.open-1,this.config,S);E.appendChild(M.render()),C+=1,C<this.keys.length&&(C>h?b():y(b))};y(b)}else this.keys.forEach(C=>{const b=new i(this.json[C],this.open-1,this.config,C);E.appendChild(b.render())})}removeChildren(P=!1){const E=this.element&&this.element.querySelector(`div.${l("children")}`);if(P){let C=0;const b=()=>{E&&E.children.length&&(E.removeChild(E.children[0]),C+=1,C>h?b():y(b))};y(b)}else E&&(E.innerHTML="")}}},52081:(H,T,e)=>{"use strict";e.d(T,{Ar:()=>r,Lh:()=>g,W2:()=>o,wc:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=(d=>(d[d.Horizontal=0]="Horizontal",d[d.Vertical=1]="Vertical",d))(s||{});const r=({children:d,orientation:p=0,spacing:h="sm",justify:y="flex-start",align:v="normal",wrap:i=!1,width:u="100%",height:P="100%",...E})=>{const C=(0,c.wW)((0,n.useCallback)(b=>l(b,p,h,y,v,i),[v,y,p,h,i]));return n.createElement("div",{className:C.layout,style:{width:u,height:P},...E},n.Children.toArray(d).filter(Boolean).map((b,S)=>n.createElement("div",{className:C.childWrapper,key:S},b)))},g=({children:d,spacing:p,justify:h,align:y="center",wrap:v,width:i,height:u})=>n.createElement(r,{spacing:p,justify:h,orientation:0,align:y,width:i,height:u,wrap:v},d),f=({children:d,spacing:p,justify:h,align:y,width:v,height:i})=>n.createElement(r,{spacing:p,justify:h,orientation:1,align:y,width:v,height:i},d),o=({children:d,padding:p,margin:h,grow:y,shrink:v})=>{const i=(0,c.wW)((0,n.useCallback)(u=>m(u,p,h),[p,h]));return n.createElement("div",{className:(0,t.cx)(i.wrapper,y!==void 0&&t.css`
            flex-grow: ${y};
          `,v!==void 0&&t.css`
            flex-shrink: ${v};
          `)},d)},l=(d,p,h,y,v,i)=>{const u=h!=="none"?d.spacing(a[h]):0,P=p===0&&!i||p===1?0:`-${u}`,E=p===1?"vertical-group":"horizontal-group";return{layout:t.css`
      label: ${E};
      display: flex;
      flex-direction: ${p===1?"column":"row"};
      flex-wrap: ${i?"wrap":"nowrap"};
      justify-content: ${y};
      align-items: ${v};
      height: 100%;
      max-width: 100%;
      // compensate for last row margin when wrapped, horizontal layout
      margin-bottom: ${P};
    `,childWrapper:t.css`
      label: layoutChildrenWrapper;
      margin-bottom: ${p===0&&!i?0:u};
      margin-right: ${p===0?u:0};
      display: flex;
      align-items: ${v};

      &:last-child {
        margin-bottom: ${p===1&&0};
        margin-right: ${p===0&&0};
      }
    `}},a={none:0,xs:.5,sm:1,md:2,lg:3},m=(d,p,h)=>{const y=p&&p!=="none"&&d.spacing(a[p])||0,v=h&&h!=="none"&&d.spacing(a[h])||0;return{wrapper:t.css`
      label: container;
      margin: ${v};
      padding: ${y};
    `}}},29460:(H,T,e)=>{"use strict";e.d(T,{r:()=>r});var t=e(68404),n=e(16144),c=e(83383),s=e(8928);const r=(0,t.forwardRef)(({href:g,children:f,...o},l)=>{const a=c.u.stripBaseFromUrl(s.QX.sanitizeUrl(g??""));return t.createElement(n.Link,{ref:l,to:a,...o},f)});r.displayName="Link"},398:(H,T,e)=>{"use strict";e.d(T,{L:()=>r});var t=e(52423),n=e(68404),c=e(7804);const s=(0,c.B)((g=!1)=>({list:t.css`
    list-style-type: none;
    margin: 0;
    padding: 0;
  `,item:t.css`
    display: ${g&&"inline-block"||"block"};
  `}));class r extends n.PureComponent{constructor(f){super(f)}render(){const{items:f,renderItem:o,getItemKey:l,className:a,inline:m}=this.props,d=s(m);return n.createElement("ul",{className:(0,t.cx)(d.list,a)},f.map((p,h)=>n.createElement("li",{className:d.item,key:l?l(p):h},o(p,h))))}}},19882:(H,T,e)=>{"use strict";e.d(T,{Y:()=>c});var t=e(68404),n=e(398);class c extends t.PureComponent{render(){return t.createElement(n.L,{inline:!0,...this.props})}}},56766:(H,T,e)=>{"use strict";e.d(T,{a:()=>c});var t=e(68404),n=e(398);class c extends t.PureComponent{render(){return t.createElement(n.L,{...this.props})}}},74750:(H,T,e)=>{"use strict";e.d(T,{F:()=>f});var t=e(52423),n=e(68404),c=e(72648);const s=2.4,r=500,g=4e3;function f({width:l,ariaLabel:a="Loading bar"}){const m=(0,c.wW)(o),d=Math.min(Math.max(Math.round(l*s),r),g),p={width:"100%",animation:`${m.animation} ${d}ms infinite linear`,willChange:"transform"};return n.createElement("div",{style:p},n.createElement("div",{"aria-label":a,className:m.bar}))}const o=()=>({animation:(0,t.keyframes)({"0%":{transform:"translateX(-50%)"},"100%":{transform:"translateX(100%)"}}),bar:(0,t.css)({width:"28%",height:1,background:"linear-gradient(90deg, rgba(110, 159, 255, 0) 0%, #6E9FFF 80.75%, rgba(110, 159, 255, 0) 100%)"})})},61744:(H,T,e)=>{"use strict";e.d(T,{u:()=>r});var t=e(52423),n=e(68404),c=e(72648),s=e(67487);const r=({text:f,className:o,...l})=>{const a=(0,c.wW)(g);return n.createElement("div",{className:(0,t.cx)(a.container,o),...l},f," ",n.createElement(s.$,{inline:!0}))},g=f=>({container:t.css`
      margin-bottom: ${f.spacing(4)};
    `})},58321:(H,T,e)=>{"use strict";e.d(T,{j:()=>r});var t=e(52423),n=e(68404),c=e(72648);const s=["level","lvl","filename"],r=({labels:f})=>{const o=(0,c.wW)(g),l=Object.keys(f).filter(a=>!a.startsWith("_")&&!s.includes(a));return l.length===0?n.createElement("span",{className:(0,t.cx)([o.logsLabels])},n.createElement("span",{className:(0,t.cx)([o.logsLabel])},"(no unique labels)")):n.createElement("span",{className:(0,t.cx)([o.logsLabels])},l.sort().map(a=>{const m=f[a];if(!m)return;const d=`${a}: ${m}`;return n.createElement("span",{key:a,className:(0,t.cx)([o.logsLabel])},n.createElement("span",{className:(0,t.cx)([o.logsLabelValue]),title:d},m))}))},g=f=>({logsLabels:t.css`
      display: flex;
      flex-wrap: wrap;
      font-size: ${f.typography.size.xs};
    `,logsLabel:t.css`
      label: logs-label;
      display: flex;
      padding: 0 2px;
      background-color: ${f.colors.background.secondary};
      border-radius: ${f.shape.borderRadius(1)};
      margin: 1px 4px 0 0;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:t.css`
      label: logs-label__value;
      display: inline-block;
      max-width: 20em;
      text-overflow: ellipsis;
      overflow: hidden;
    `})},12402:(H,T,e)=>{"use strict";e.d(T,{Q:()=>l});var t=e(2525),n=e(68404),c=e(14677),s=e.n(c),r=e(33399),g=e(72648);function f(a,m){return m.split(/;\s*/).reduce((d,p)=>{if(p==="color:rgba(0,0,0,0.5)")return{color:a.colors.text.secondary};const h=p.match(/([^:\s]+)\s*:\s*(.+)/);if(h&&h[1]&&h[2]){const y=h[1].replace(/-([a-z])/g,(v,i)=>i.toUpperCase());d[y]=h[2]}return d},{})}class o extends n.PureComponent{constructor(){super(...arguments),this.state={chunks:[],prevValue:""}}static getDerivedStateFromProps(m,d){return m.value===d.prevValue?null:{chunks:t.ZP.parse(m.value).spans.map(h=>h.css?{style:f(m.theme,h.css),text:h.text}:{text:h.text}),prevValue:m.value}}render(){const{chunks:m}=this.state;return m.map((d,p)=>{const h=this.props.highlight?.searchWords?n.createElement(s(),{key:p,textToHighlight:d.text,searchWords:this.props.highlight.searchWords,findChunks:r.Xt,highlightClassName:this.props.highlight.highlightClassName}):d.text;return d.style?n.createElement("span",{key:p,style:d.style,"data-testid":"ansiLogLine"},h):h})}}const l=(0,g.HE)(o);l.displayName="LogMessageAnsi"},63512:(H,T,e)=>{"use strict";e.d(T,{w:()=>Je});var t=e(58635),n=e(68404),c=e(35864),s=e(90595),r=e(72648),g=e(52423),f=e(38849),o=e(85419),l=e(39904),a=e(61860),m=e(94599),d=e(89719),p=e(8180),h=e(7804);const y=lt=>({logsStatsRow:g.css`
    label: logs-stats-row;
    margin: ${parseInt(lt.spacing(2),10)/1.75}px 0;
  `,logsStatsRowActive:g.css`
    label: logs-stats-row--active;
    color: ${lt.colors.primary.text};
    position: relative;
  `,logsStatsRowLabel:g.css`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:g.css`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:g.css`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: 0.5em;
  `,logsStatsRowPercent:g.css`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: 0.5em;
    width: 3em;
  `,logsStatsRowBar:g.css`
    label: logs-stats-row__bar;
    height: 4px;
    overflow: hidden;
    background: ${lt.colors.text.disabled};
  `,logsStatsRowInnerBar:g.css`
    label: logs-stats-row__innerbar;
    height: 4px;
    overflow: hidden;
    background: ${lt.colors.primary.main};
  `}),v=({active:lt,count:at,proportion:Xe,value:gt})=>{const ot=(0,r.wW)(y),Ye=`${Math.round(Xe*100)}%`,mt={width:Ye},ce=lt?(0,g.cx)([ot.logsStatsRow,ot.logsStatsRowActive]):(0,g.cx)([ot.logsStatsRow]);return n.createElement("div",{className:ce},n.createElement("div",{className:(0,g.cx)([ot.logsStatsRowLabel])},n.createElement("div",{className:(0,g.cx)([ot.logsStatsRowValue]),title:gt},gt),n.createElement("div",{className:(0,g.cx)([ot.logsStatsRowCount])},at),n.createElement("div",{className:(0,g.cx)([ot.logsStatsRowPercent])},Ye)),n.createElement("div",{className:(0,g.cx)([ot.logsStatsRowBar])},n.createElement("div",{className:(0,g.cx)([ot.logsStatsRowInnerBar]),style:mt})))};v.displayName="LogLabelStatsRow";const i=5,u=(0,h.B)(lt=>({logsStats:g.css`
      label: logs-stats;
      background: inherit;
      color: ${lt.colors.text.primary};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:g.css`
      label: logs-stats__header;
      border-bottom: 1px solid ${lt.colors.border.medium};
      display: flex;
    `,logsStatsTitle:g.css`
      label: logs-stats__title;
      font-weight: ${lt.typography.fontWeightMedium};
      padding-right: ${lt.spacing(2)};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:g.css`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:g.css`
      label: logs-stats__body;
      padding: 5px 0;
    `}));class P extends n.PureComponent{render(){const{label:at,rowCount:Xe,stats:gt,value:ot,theme:Ye,isLabel:mt}=this.props,ce=u(Ye),be=gt.slice(0,i);let Te=be.find(De=>De.value===ot),Ke=gt.slice(i);const ge=!Te;ge&&(Te=Ke.find(De=>De.value===ot),Ke=Ke.filter(De=>De.value!==ot));const Me=Ke.reduce((De,Ae)=>De+Ae.count,0),fe=be.reduce((De,Ae)=>De+Ae.count,0)+Me,he=Me/fe;return n.createElement("div",{className:ce.logsStats,"data-testid":"logLabelStats"},n.createElement("div",{className:ce.logsStatsHeader},n.createElement("div",{className:ce.logsStatsTitle},at,": ",fe," of ",Xe," rows have that ",mt?"label":"field")),n.createElement("div",{className:ce.logsStatsBody},be.map(De=>n.createElement(v,{key:De.value,...De,active:De.value===ot})),ge&&Te&&n.createElement(v,{key:Te.value,...Te,active:!0}),Me>0&&n.createElement(v,{key:"__OTHERS__",count:Me,value:"Other",proportion:he})))}}const E=(0,r.HE)(P);E.displayName="LogLabelStats";var C=e(98736);const b=lt=>({noHoverBackground:g.css`
      label: noHoverBackground;
      :hover {
        background-color: transparent;
      }
    `,hoverCursor:g.css`
      label: hoverCursor;
      cursor: pointer;
    `,wordBreakAll:g.css`
      label: wordBreakAll;
      word-break: break-all;
    `,showingField:g.css`
      color: ${lt.colors.primary.text};
    `,hoverValueCopy:g.css`
      margin: ${lt.spacing(0,0,0,1.2)};
      position: absolute;
      top: 0px;
      justify-content: center;
      border-radius: 20px;
      width: 26px;
      height: 26px;
    `,wrapLine:g.css`
      label: wrapLine;
      white-space: pre-wrap;
    `});class S extends n.PureComponent{constructor(){super(...arguments),this.state={showFieldsStats:!1,fieldCount:0,fieldStats:null,mouseOver:!1},this.showField=()=>{const{onClickShowDetectedField:at,parsedKey:Xe}=this.props;at&&at(Xe)},this.hideField=()=>{const{onClickHideDetectedField:at,parsedKey:Xe}=this.props;at&&at(Xe)},this.filterLabel=()=>{const{onClickFilterLabel:at,parsedKey:Xe,parsedValue:gt}=this.props;at&&at(Xe,gt)},this.filterOutLabel=()=>{const{onClickFilterOutLabel:at,parsedKey:Xe,parsedValue:gt}=this.props;at&&at(Xe,gt)},this.showStats=()=>{const{showFieldsStats:at}=this.state;if(!at){const Xe=this.props.getStats(),gt=Xe?Xe.reduce((ot,Ye)=>ot+Ye.count,0):0;this.setState({fieldStats:Xe,fieldCount:gt})}this.toggleFieldsStats()}}toggleFieldsStats(){this.setState(at=>({showFieldsStats:!at.showFieldsStats}))}hoverValueCopy(){const at=!this.state.mouseOver;this.setState({mouseOver:at})}render(){const{theme:at,parsedKey:Xe,parsedValue:gt,isLabel:ot,links:Ye,showDetectedFields:mt,wrapLogMessage:ce,onClickShowDetectedField:be,onClickHideDetectedField:Te,onClickFilterLabel:Ke,onClickFilterOutLabel:ge}=this.props,{showFieldsStats:Me,fieldStats:ye,fieldCount:fe,mouseOver:he}=this.state,De=b(at),Ae=(0,C.h)(at),Ne=be&&Te,Ze=Ke&&ge,Se=!ot&&mt&&mt.includes(Xe)?n.createElement(p.h,{name:"eye",className:De.showingField,title:"Hide this field",onClick:this.hideField}):n.createElement(p.h,{name:"eye",title:"Show this field instead of the message",onClick:this.showField});return n.createElement("tr",{className:(0,g.cx)(Ae.logDetailsValue,{[De.noHoverBackground]:Me})},n.createElement("td",{className:Ae.logsDetailsIcon},n.createElement(p.h,{name:"signal",title:"Ad-hoc statistics",onClick:this.showStats})),Ze&&ot&&n.createElement(n.Fragment,null,n.createElement("td",{className:Ae.logsDetailsIcon},n.createElement(p.h,{name:"search-plus",title:"Filter for value",onClick:this.filterLabel})),n.createElement("td",{className:Ae.logsDetailsIcon},n.createElement(p.h,{name:"search-minus",title:"Filter out value",onClick:this.filterOutLabel}))),Ne&&!ot&&n.createElement("td",{className:Ae.logsDetailsIcon,colSpan:2},Se),n.createElement("td",{className:Ae.logDetailsLabel},Xe),n.createElement("td",{className:(0,g.cx)(De.wordBreakAll,ce&&De.wrapLine),onMouseEnter:this.hoverValueCopy.bind(this),onMouseLeave:this.hoverValueCopy.bind(this)},gt,he&&n.createElement(m.m,{getText:()=>gt,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"sm",className:De.hoverValueCopy}),Ye?.map(Ue=>n.createElement("span",{key:Ue.title},"\xA0",n.createElement(d.k,{link:Ue}))),Me&&n.createElement(E,{stats:ye,label:Xe,value:gt,rowCount:fe,isLabel:ot})))}}const M=(0,r.HE)(S);M.displayName="LogDetailsRow";var x=e(14582),O=e(14677),L=e.n(O),B=e(35008),w=e.n(B),R=e(33399),A=e(12402),U=e(8928),I=e(45253),N=e(94437),F=e(68226),D=e(56766);const Y=(lt,at)=>{const Xe=at?g.css`
        top: -250px;
      `:g.css`
        margin-top: -250px;
        width: 75%;
      `,gt=at?g.css`
        top: 100%;
      `:g.css`
        margin-top: 40px;
        width: 75%;
      `;return{commonStyles:g.css`
      position: absolute;
      height: 250px;
      z-index: ${lt.zIndex.dropdown};
      overflow: hidden;
      background: ${lt.colors.background.primary};
      box-shadow: 0 0 10px ${lt.v1.palette.black};
      border: 1px solid ${lt.colors.background.secondary};
      border-radius: ${lt.shape.borderRadius(2)};
      width: 100%;
    `,header:g.css`
      height: 30px;
      padding: 0 10px;
      display: flex;
      align-items: center;
      background: ${lt.colors.background.secondary};
    `,logs:g.css`
      height: 220px;
      padding: 10px;
    `,afterContext:Xe,beforeContext:gt}},j=({row:lt,rows:at,onLoadMoreContext:Xe,canLoadMoreRows:gt})=>{const{header:ot}=(0,r.wW)(Y);return n.createElement("div",{className:ot},n.createElement("span",{className:g.css`
          opacity: 0.6;
        `},"Found ",at.length," rows."),(at.length>=10||at.length>10&&at.length%10!==0)&&gt&&n.createElement("span",{className:g.css`
            margin-left: 10px;
            &:hover {
              text-decoration: underline;
              cursor: pointer;
            }
          `,onClick:Xe},"Load 10 more"))},K=({row:lt,rows:at,error:Xe,className:gt,shouldScrollToBottom:ot,canLoadMoreRows:Ye,onLoadMoreContext:mt})=>{const{commonStyles:ce,logs:be}=(0,r.wW)(Y),[Te,Ke]=(0,n.useState)(0),ge=(0,n.useRef)(null);(0,n.useLayoutEffect)(()=>{const ye=at.length>0&&at.length<=10;ot&&ye&&ge.current&&Ke(ge.current.offsetHeight)},[ot,at]);const Me={row:lt,rows:at,onLoadMoreContext:mt,canLoadMoreRows:Ye};return n.createElement("div",{className:(0,g.cx)(ce,gt)},ot&&!Xe&&n.createElement(j,{...Me}),n.createElement("div",{className:be},n.createElement(F.$,{autoHide:!0,scrollTop:Te,autoHeightMin:"210px"},n.createElement("div",{ref:ge},!Xe&&n.createElement(D.a,{items:at,renderItem:ye=>n.createElement("div",{className:g.css`
                        padding: 5px 0;
                      `},typeof ye=="string"&&U.QX.hasAnsiCodes(ye)?n.createElement(A.Q,{value:ye}):ye)}),Xe&&n.createElement(I.b,{title:Xe})))),!ot&&!Xe&&n.createElement(j,{...Me}))},z=({row:lt,context:at,errors:Xe,onOutsideClick:gt,onLoadMoreContext:ot,hasMoreContextRows:Ye,wrapLogMessage:mt})=>{(0,n.useEffect)(()=>{const Te=Ke=>{Ke.keyCode===27&&gt()};return document.addEventListener("keydown",Te,!1),()=>{document.removeEventListener("keydown",Te,!1)}},[gt]);const{afterContext:ce,beforeContext:be}=(0,r.wW)(Te=>Y(Te,mt));return n.createElement(N.L,{onClick:gt},n.createElement("div",{onClick:Te=>Te.stopPropagation()},at.after&&n.createElement(K,{rows:at.after,error:Xe&&Xe.after,row:lt,className:ce,shouldScrollToBottom:!0,canLoadMoreRows:Ye?Ye.after:!1,onLoadMoreContext:ot}),at.before&&n.createElement(K,{onLoadMoreContext:ot,canLoadMoreRows:Ye?Ye.before:!1,row:lt,rows:at.before,error:Xe&&Xe.before,className:be})))},Z=1e5,ae=lt=>{const at=w()(lt.components.dashboard.background).setAlpha(.7).toRgbString();return{positionRelative:g.css`
      label: positionRelative;
      position: relative;
    `,rowWithContext:g.css`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${at};
    `,horizontalScroll:g.css`
      label: verticalScroll;
      white-space: pre;
    `,contextNewline:g.css`
      display: block;
      margin-left: 0px;
    `,contextButton:g.css`
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-content: flex-end;
      justify-content: space-evenly;
      align-items: center;
      position: absolute;
      right: -8px;
      top: 0;
      bottom: auto;
      width: 80px;
      height: 36px;
      background: ${lt.colors.background.primary};
      box-shadow: ${lt.shadows.z3};
      padding: ${lt.spacing(0,0,0,.5)};
      z-index: 100;
    `}};function J(lt,at,Xe,gt){const ot=Xe&&Xe.length>0&&Xe[0]&&Xe[0].length>0&&at.length<Z,Ye=Xe??[];if(lt){const mt=ot?{searchWords:Ye,highlightClassName:gt}:void 0;return n.createElement(A.Q,{value:at,highlight:mt})}else return ot?n.createElement(L(),{textToHighlight:at,searchWords:Ye,findChunks:R.Xt,highlightClassName:gt}):at}const oe=(0,t.Z)((lt,at)=>{if(at)try{return JSON.stringify(JSON.parse(lt),void 0,2)}catch{return lt}return lt});class Ee extends n.PureComponent{constructor(){super(...arguments),this.onContextToggle=at=>{at.stopPropagation(),this.props.onToggleContext()}}render(){const{row:at,theme:Xe,errors:gt,hasMoreContextRows:ot,updateLimit:Ye,context:mt,contextIsOpen:ce,showContextToggle:be,wrapLogMessage:Te,prettifyLogMessage:Ke,onToggleContext:ge}=this.props,Me=(0,C.h)(Xe,at.logLevel),{hasAnsi:ye,raw:fe}=at,he=oe(fe,Ke),De=ae(Xe);return n.createElement("td",{style:ce?{position:"unset"}:void 0,className:Me.logsRowMessage},n.createElement("div",{className:(0,g.cx)({[De.positionRelative]:Te},{[De.horizontalScroll]:!Te})},ce&&mt&&n.createElement(z,{row:at,context:mt,errors:gt,wrapLogMessage:Te,hasMoreContextRows:ot,onOutsideClick:ge,onLoadMoreContext:()=>{Ye&&Ye()}}),n.createElement("span",{className:(0,g.cx)(De.positionRelative,{[De.rowWithContext]:ce})},J(ye,he,at.searchWords,Me.logsRowMatchHighLight)),!ce&&be?.(at)&&n.createElement("span",{className:(0,g.cx)("log-row-context",Me.context,De.contextButton),onClick:Ae=>Ae.stopPropagation()},n.createElement(a.u,{placement:"top",content:"Show context"},n.createElement(p.h,{size:"md",name:"gf-show-context",onClick:this.onContextToggle})),n.createElement(a.u,{placement:"top",content:"Copy"},n.createElement(p.h,{size:"md",name:"copy",onClick:()=>navigator.clipboard.writeText(JSON.stringify(he))})))))}}const me=(0,r.HE)(Ee);me.displayName="LogRowMessage";const re=(0,t.Z)(c.MT),le=(0,t.Z)((lt,at)=>{const Xe=pe(lt.entry),ot=[...ee(lt,at),...Xe].reduce((mt,ce)=>{const be=ce.value.replace(/(^")|("$)/g,""),Te=`${ce.key}=${be}`;return mt[Te]?mt[Te].links=[...mt[Te].links||[],...ce.links||[]]:mt[Te]=ce,mt},{}),Ye=Object.values(ot);return Ye.sort(se),Ye}),pe=(0,t.Z)(lt=>{if(lt.length>Z)return[];const at=re(lt);return at?at.getFields(lt).map(ot=>{const Ye=at.getLabelFromField(ot),mt=at.getValueFromField(ot);return{key:Ye,value:mt}}):[]}),ee=(0,t.Z)((lt,at)=>lt.dataFrame.fields.map((Xe,gt)=>({...Xe,index:gt})).filter((Xe,gt)=>!Q(Xe,gt,lt)).map(Xe=>{const gt=at?at(Xe,lt.rowIndex):[];return{key:Xe.name,value:Xe.values.get(lt.rowIndex).toString(),links:gt,fieldIndex:Xe.index}}));function se(lt,at){return lt.links?.length&&!at.links?.length?-1:!lt.links?.length&&at.links?.length||lt.key>at.key?1:lt.key<at.key?-1:0}function Q(lt,at,Xe){return!!(lt.name==="labels"&&lt.type===x.fS.other||lt.name==="id"||Xe.entryFieldIndex===at||lt.config.custom?.hidden||lt.values.get(Xe.rowIndex)==null)}const G=lt=>({logsRowLevelDetails:g.css`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:g.css`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${lt.colors.background.primary};
      }
    `});class q extends n.PureComponent{constructor(){super(...arguments),this.getParser=(0,t.Z)(c.MT),this.getStatsForDetectedField=at=>{const Xe=this.getParser(this.props.row.entry).buildMatcher(at);return(0,c.zd)(this.props.getRows(),Xe)}}render(){const{row:at,theme:Xe,hasError:gt,onClickFilterOutLabel:ot,onClickFilterLabel:Ye,getRows:mt,showDuplicates:ce,className:be,onClickShowDetectedField:Te,onClickHideDetectedField:Ke,showDetectedFields:ge,getFieldLinks:Me,wrapLogMessage:ye}=this.props,fe=(0,C.h)(Xe,at.logLevel),he=G(Xe),De=at.labels?at.labels:{},Ae=Object.keys(De).length>0,Ne=le(at,Me),Ze=Ne&&Ne.length>0,Se=(0,g.cx)(!gt&&[fe.logsRowLevel,he.logsRowLevelDetails]);return n.createElement("tr",{className:(0,g.cx)(be,he.logDetails)},ce&&n.createElement("td",null),n.createElement("td",{className:Se,"aria-label":"Log level"}),n.createElement("td",{colSpan:4},n.createElement("div",{className:fe.logDetailsContainer},n.createElement("table",{className:fe.logDetailsTable},n.createElement("tbody",null,Ae&&n.createElement("tr",null,n.createElement("td",{colSpan:5,className:fe.logDetailsHeading,"aria-label":"Log labels"},"Log labels")),Object.keys(De).sort().map(Ue=>{const Qe=De[Ue];return n.createElement(M,{key:`${Ue}=${Qe}`,parsedKey:Ue,parsedValue:Qe,isLabel:!0,getStats:()=>(0,c.lL)(mt(),Ue),onClickFilterOutLabel:ot,onClickFilterLabel:Ye})}),Ze&&n.createElement("tr",null,n.createElement("td",{colSpan:5,className:fe.logDetailsHeading,"aria-label":"Detected fields"},"Detected fields",n.createElement(a.u,{content:"Fields that are parsed from log message and detected by Grafana."},n.createElement(l.J,{name:"question-circle",size:"xs",className:g.css`
                            margin-left: 4px;
                          `})))),Ne.sort().map(Ue=>{const{key:Qe,value:pt,links:bt,fieldIndex:yt}=Ue;return n.createElement(M,{key:`${Qe}=${pt}`,parsedKey:Qe,parsedValue:pt,links:bt,onClickShowDetectedField:Te,onClickHideDetectedField:Ke,getStats:()=>yt===void 0?this.getStatsForDetectedField(Qe):(0,c.i6)(at.dataFrame.fields[yt].values.toArray()),showDetectedFields:ge,wrapLogMessage:ye})}),!Ze&&!Ae&&n.createElement("tr",null,n.createElement("td",{colSpan:5,"aria-label":"No details"},"No details available")))))))}}const X=(0,r.HE)(q);X.displayName="LogDetails";var de=e(58321),Be=e(50700),ke=e(16911),He=e(71895);const ue=async(lt,at,Xe,gt)=>{const ot=[lt(at,{limit:Xe}),lt(at,{limit:Xe+1,direction:"FORWARD"})],Ye=await Promise.all(ot.map(be=>be.catch(Te=>Te))),mt=Ye.map(be=>{const Te=be;if(!Te.data)return[];const Ke=[];for(let ge=0;ge<Te.data.length;ge++){const Me=(0,ke.g0)(Te.data[ge]),ye=new He.N(Me),fe=ye.getFieldByName("ts"),he=ye.getFieldByName("id");for(let De=0;De<fe.values.length;De++){if(he){if(he.values.get(De)===at.uid)continue}else if(parseInt(fe.values.get(De),10)===at.timeEpochMs)continue;const Ne=Me.fields.filter(Ze=>Ze.name==="line")[0].values.get(De);Ke.push(Ne)}}return gt===s.UV.Ascending?Ke.reverse():Ke}),ce=Ye.map(be=>{const Te=be;return Te.message?Te.message:""});return{data:gt===s.UV.Ascending?mt.reverse():mt,errors:gt===s.UV.Ascending?ce.reverse():ce}},Oe=({getRowContext:lt,row:at,children:Xe,logsSortOrder:gt})=>{const[ot,Ye]=(0,n.useState)(10),[mt,ce]=(0,n.useState)(null),[be,Te]=(0,n.useState)({before:!0,after:!0}),{value:Ke}=(0,Be.Z)(async()=>await ue(lt,at,ot,gt),[ot]);return(0,n.useEffect)(()=>{Ke&&ce(ge=>{let Me=!0,ye=!0;if(ge){const fe=ge.data[0],he=ge.data[1],De=Ke.data[0],Ae=Ke.data[1];(!De||fe.length===De.length)&&(Me=!1),(!Ae||he.length===Ae.length)&&(ye=!1)}return Te({before:Me,after:ye}),Ke})},[Ke]),Xe({result:{before:mt?mt.data[0]:[],after:mt?mt.data[1]:[]},errors:{before:mt?mt.errors[0]:void 0,after:mt?mt.errors[1]:void 0},hasMoreContextRows:be,updateLimit:()=>Ye(ot+10),limit:ot})};class Fe extends n.PureComponent{render(){const{row:at,showDetectedFields:Xe,getFieldLinks:gt,wrapLogMessage:ot}=this.props,Ye=le(at,gt),mt=ot?"":g.css`
          white-space: nowrap;
        `,ce=Xe.map(be=>{const Te=Ye.find(Ke=>{const{key:ge}=Ke;return ge===be});return Te?`${be}=${Te.value}`:null}).filter(be=>be!==null).join(" ");return n.createElement("td",{className:mt},ce)}}const Ie=(0,r.HE)(Fe);Ie.displayName="LogRowMessageDetectedFields";const we=lt=>({topVerticalAlign:g.css`
      label: topVerticalAlign;
      margin-top: -${lt.spacing(.9)};
      margin-left: -${lt.spacing(.25)};
    `,detailsOpen:g.css`
      &:hover {
        background-color: ${o.hoverColor(lt.colors.background.primary,lt)};
      }
    `,errorLogRow:g.css`
      label: erroredLogRow;
      color: ${lt.colors.text.secondary};
    `});class Re extends n.PureComponent{constructor(){super(...arguments),this.state={showContext:!1,showDetails:!1},this.toggleContext=()=>{this.setState(at=>({showContext:!at.showContext}))},this.toggleDetails=()=>{this.props.enableLogDetails&&this.setState(at=>({showDetails:!at.showDetails}))}}renderTimeStamp(at){return(0,f.dq)(at,{timeZone:this.props.timeZone})}renderLogRow(at,Xe,gt,ot){const{getRows:Ye,onClickFilterLabel:mt,onClickFilterOutLabel:ce,onClickShowDetectedField:be,onClickHideDetectedField:Te,enableLogDetails:Ke,row:ge,showDuplicates:Me,showContextToggle:ye,showLabels:fe,showTime:he,showDetectedFields:De,wrapLogMessage:Ae,prettifyLogMessage:Ne,theme:Ze,getFieldLinks:Se,forceEscape:Ue,onLogRowHover:Qe}=this.props,{showDetails:pt,showContext:bt}=this.state,yt=(0,C.h)(Ze,ge.logLevel),Mt=we(Ze),{errorMessage:At,hasError:Pt}=(0,c.Mi)(ge),rn=(0,g.cx)(yt.logsRow,{[Mt.errorLogRow]:Pt}),Fn=ge.hasUnescapedContent&&Ue?{...ge,entry:(0,c.l3)(ge.entry),raw:(0,c.l3)(ge.raw)}:ge;return n.createElement(n.Fragment,null,n.createElement("tr",{className:rn,onClick:this.toggleDetails,onMouseEnter:()=>{Qe&&Qe(ge)},onMouseLeave:()=>{Qe&&Qe(void 0)}},Me&&n.createElement("td",{className:yt.logsRowDuplicates},Fn.duplicates&&Fn.duplicates>0?`${Fn.duplicates+1}x`:null),n.createElement("td",{className:(0,g.cx)({[yt.logsRowLevel]:!Pt})},Pt&&n.createElement(a.u,{content:`Error: ${At}`,placement:"right",theme:"error"},n.createElement(l.J,{className:yt.logIconError,name:"exclamation-triangle",size:"xs"}))),Ke&&n.createElement("td",{title:pt?"Hide log details":"See log details",className:yt.logsRowToggleDetails},n.createElement(l.J,{className:Mt.topVerticalAlign,name:pt?"angle-down":"angle-right"})),he&&n.createElement("td",{className:yt.logsRowLocalTime},this.renderTimeStamp(ge.timeEpochMs)),fe&&Fn.uniqueLabels&&n.createElement("td",{className:yt.logsRowLabels},n.createElement(de.j,{labels:Fn.uniqueLabels})),De&&De.length>0?n.createElement(Ie,{row:Fn,showDetectedFields:De,getFieldLinks:Se,wrapLogMessage:Ae}):n.createElement(me,{row:Fn,getRows:Ye,errors:Xe,hasMoreContextRows:gt,updateLimit:ot,context:at,contextIsOpen:bt,showContextToggle:ye,wrapLogMessage:Ae,prettifyLogMessage:Ne,onToggleContext:this.toggleContext})),this.state.showDetails&&n.createElement(X,{className:rn,showDuplicates:Me,getFieldLinks:Se,onClickFilterLabel:mt,onClickFilterOutLabel:ce,onClickShowDetectedField:be,onClickHideDetectedField:Te,getRows:Ye,row:Fn,wrapLogMessage:Ae,hasError:Pt,showDetectedFields:De}))}render(){const{showContext:at}=this.state,{logsSortOrder:Xe,row:gt,getRowContext:ot}=this.props;return at?n.createElement(n.Fragment,null,n.createElement(Oe,{row:gt,getRowContext:ot,logsSortOrder:Xe},({result:Ye,errors:mt,hasMoreContextRows:ce,updateLimit:be})=>n.createElement(n.Fragment,null,this.renderLogRow(Ye,mt,ce,be)))):this.renderLogRow()}}const _e=(0,r.HE)(Re);_e.displayName="LogRow";const et=100;class qe extends n.PureComponent{constructor(){super(...arguments),this.renderAllTimer=null,this.state={renderAll:!1},this.makeGetRows=(0,t.Z)(at=>()=>at),this.sortLogs=(0,t.Z)((at,Xe)=>(0,c.$u)(at,Xe))}componentDidMount(){const{logRows:at,previewLimit:Xe}=this.props,ot=(at?at.length:0)<=Xe*2;ot?this.setState({renderAll:ot}):this.renderAllTimer=window.setTimeout(()=>this.setState({renderAll:!0}),2e3)}componentWillUnmount(){this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{dedupStrategy:at,showContextToggle:Xe,showLabels:gt,showTime:ot,wrapLogMessage:Ye,prettifyLogMessage:mt,logRows:ce,deduplicatedRows:be,timeZone:Te,onClickFilterLabel:Ke,onClickFilterOutLabel:ge,theme:Me,enableLogDetails:ye,previewLimit:fe,getFieldLinks:he,logsSortOrder:De,showDetectedFields:Ae,onClickShowDetectedField:Ne,onClickHideDetectedField:Ze,forceEscape:Se,onLogRowHover:Ue}=this.props,{renderAll:Qe}=this.state,{logsRowsTable:pt}=(0,C.h)(Me),bt=be||ce,yt=ce&&ce.length>0,Mt=bt?bt.reduce((Ut,ut)=>ut.duplicates?Ut+ut.duplicates:Ut,0):0,At=at!==s.Y4.none&&Mt>0,Pt=bt||[],rn=De?this.sortLogs(Pt,De):Pt,Fn=rn.slice(0,fe),kn=rn.slice(fe,rn.length),Jn=this.makeGetRows(rn),qn=this.props.getRowContext?this.props.getRowContext:()=>Promise.resolve([]);return n.createElement("table",{className:pt},n.createElement("tbody",null,yt&&Fn.map((Ut,ut)=>n.createElement(_e,{key:Ut.uid,getRows:Jn,getRowContext:qn,row:Ut,showContextToggle:Xe,showDuplicates:At,showLabels:gt,showTime:ot,showDetectedFields:Ae,wrapLogMessage:Ye,prettifyLogMessage:mt,timeZone:Te,enableLogDetails:ye,onClickFilterLabel:Ke,onClickFilterOutLabel:ge,onClickShowDetectedField:Ne,onClickHideDetectedField:Ze,getFieldLinks:he,logsSortOrder:De,forceEscape:Se,onLogRowHover:Ue})),yt&&Qe&&kn.map((Ut,ut)=>n.createElement(_e,{key:Ut.uid,getRows:Jn,getRowContext:qn,row:Ut,showContextToggle:Xe,showDuplicates:At,showLabels:gt,showTime:ot,showDetectedFields:Ae,wrapLogMessage:Ye,prettifyLogMessage:mt,timeZone:Te,enableLogDetails:ye,onClickFilterLabel:Ke,onClickFilterOutLabel:ge,onClickShowDetectedField:Ne,onClickHideDetectedField:Ze,getFieldLinks:he,logsSortOrder:De,forceEscape:Se,onLogRowHover:Ue})),yt&&!Qe&&n.createElement("tr",null,n.createElement("td",{colSpan:5},"Rendering ",rn.length-fe," rows..."))))}}qe.defaultProps={previewLimit:et};const Je=(0,r.HE)(qe);Je.displayName="LogsRows"},98736:(H,T,e)=>{"use strict";e.d(T,{h:()=>s});var t=e(52423),n=e(90595),c=e(85419);const s=(r,g)=>{let f=r.isLight?r.v1.palette.gray5:r.v1.palette.gray2;const o=c.hoverColor(r.colors.background.secondary,r);switch(g){case n.in.crit:case n.in.critical:f="#705da0";break;case n.in.error:case n.in.err:f="#e24d42";break;case n.in.warning:case n.in.warn:f=r.colors.warning.main;break;case n.in.info:f="#7eb26d";break;case n.in.debug:f="#1f78c1";break;case n.in.trace:f="#6ed0e0";break}return{logsRowMatchHighLight:t.css`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${r.components.textHighlight.text}
      background-color: ${r.components.textHighlight};
    `,logsRowsTable:t.css`
      label: logs-rows;
      font-family: ${r.typography.fontFamilyMonospace};
      font-size: ${r.typography.bodySmall.fontSize};
      width: 100%;
    `,context:t.css`
      label: context;
      visibility: hidden;
      white-space: nowrap;
      position: relative;
      margin-left: 10px;
    `,logsRow:t.css`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-context {
          visibility: visible;
          z-index: 1;
          text-decoration: underline;
          &:hover {
            color: ${r.colors.warning.main};
          }
        }
      }

      td:last-child {
        width: 100%;
      }

      > td {
        position: relative;
        padding-right: ${r.spacing(1)};
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        height: 100%;
      }

      &:hover {
        background: ${o};
      }
    `,logsRowDuplicates:t.css`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logsRowLevel:t.css`
      label: logs-row__level;
      max-width: 10px;
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: 4px;
        background-color: ${f};
      }
    `,logIconError:t.css`
      color: ${r.colors.warning.main};
    `,logsRowToggleDetails:t.css`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:t.css`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:t.css`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:t.css`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
    `,logDetailsContainer:t.css`
      label: logs-row-details-table;
      border: 1px solid ${r.colors.border.medium};
      padding: 0 ${r.spacing(1)} ${r.spacing(1)};
      border-radius: 3px;
      margin: 20px 8px 20px 16px;
      cursor: default;
    `,logDetailsTable:t.css`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:t.css`
      label: logs-row-details__icon;
      position: relative;
      color: ${r.v1.palette.gray3};
      padding-top: 6px;
      padding-left: 6px;
    `,logDetailsLabel:t.css`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${r.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:t.css`
      label: logs-row-details__heading;
      font-weight: ${r.typography.fontWeightBold};
      padding: ${r.spacing(1)} 0 ${r.spacing(.5)};
    `,logDetailsValue:t.css`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${o};
      }
    `}}},15448:(H,T,e)=>{"use strict";e.d(T,{b:()=>s});var t=e(68404),n=e(53217),c=e(80760);const s=({value:r,onChange:g,context:f,item:o})=>{const l=o.settings??{},a=(0,c.IX)(f.data,l?.filter),m=(0,c.nw)(a,r),d=(0,t.useCallback)(h=>{if(!(h&&!(0,c.w3)(h.value,a)))return g(h?.value)},[a,g]),p=m.find(h=>h.value===r);return t.createElement(t.Fragment,null,t.createElement(n.Ph,{value:p,placeholder:l.placeholderText??"Select field",options:m,onChange:d,noOptionsMessage:l.noFieldsMessage,width:l.width,isClearable:!0}))}},43714:(H,T,e)=>{"use strict";e.d(T,{i:()=>M});var t=e(64140),n=e(68404),c=e(85854),s=e(3249),r=e(46967);const g=(0,n.memo)(x=>{const{options:O,onChange:L}=x,B=(0,n.useCallback)(w=>L(w.target.value),[L]);return n.createElement(r.I,{placeholder:"Enter regular expression",defaultValue:O,onBlur:B})});g.displayName="FieldNameByRegexMatcherEditor";const f={id:c.mi.byRegexp,component:g,matcher:s.Ls.get(c.mi.byRegexp),name:"Fields with name matching regex",description:"Set properties for fields with names matching a regex",optionsToLabel:x=>x};var o=e(53217),l=e(80760);const a=(0,n.memo)(x=>{const{data:O,options:L,onChange:B,id:w}=x,R=(0,l.IX)(O),A=(0,l.nw)(R,L),U=(0,n.useCallback)(N=>{if((0,l.w3)(N.value,R))return B(N.value)},[R,B]),I=A.find(N=>N.value===L);return n.createElement(o.Ph,{value:I,options:A,onChange:U,inputId:w})});a.displayName="FieldNameMatcherEditor";const m={id:c.mi.byName,component:a,matcher:s.Ls.get(c.mi.byName),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:x=>x},d=(0,n.memo)(x=>{const{data:O,options:L,onChange:B}=x,{readOnly:w,prefix:R}=L,A=(0,l.IX)(O),U=(0,l.nw)(A,void 0),I=(0,n.useCallback)(N=>{if(Array.isArray(N))return B({...L,names:N.reduce((F,D)=>((0,l.w3)(D.value,A)&&F.push(D.value),F),[])})},[A,B,L]);if(w){const N=(L.names??[]).join(", ");return n.createElement(r.I,{value:N,readOnly:!0,disabled:!0,prefix:R})}return n.createElement(o.NU,{value:L.names,options:U,onChange:I})});d.displayName="FieldNameMatcherEditor";const p={id:c.mi.byNames,component:d,matcher:s.Ls.get(c.mi.byNames),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:x=>(x.names??[]).join(", "),excludeFromPicker:!0};var h=e(14582);const y=(0,n.memo)(x=>{const{data:O,options:L,onChange:B,id:w}=x,R=i(O),A=u(R,L),U=(0,n.useCallback)(N=>B(N.value),[B]),I=A.find(N=>N.value===L);return n.createElement(o.Ph,{inputId:w,value:I,options:A,onChange:U})});y.displayName="FieldTypeMatcherEditor";const v=[{value:h.fS.number,label:"Numeric"},{value:h.fS.string,label:"String"},{value:h.fS.time,label:"Time"},{value:h.fS.boolean,label:"Boolean"},{value:h.fS.trace,label:"Traces"},{value:h.fS.other,label:"Other"}],i=x=>(0,n.useMemo)(()=>{const O=new Map;for(const L of v)O.set(L.value,0);for(const L of x)for(const B of L.fields){const w=B.type||h.fS.other;let R=O.get(w);R||(R=0),O.set(w,R+1)}return O},[x]),u=(x,O)=>(0,n.useMemo)(()=>{let L=!1;const B=[];for(const w of v){const R=x.get(w.value),A=O===w.value;(R||A)&&B.push({...w,label:`${w.label} (${x.get(w.value)})`}),A&&(L=!0)}return O&&!L&&B.push({value:O,label:`${O} (No matches)`}),B},[x,O]),P={id:c.mi.byType,component:y,matcher:s.Ls.get(c.mi.byType),name:"Fields with type",description:"Set properties for fields of a specific type (number, string, boolean)",optionsToLabel:x=>x},E=(0,n.memo)(x=>{const{data:O,options:L,onChange:B}=x,w=b(O),R=S(w),A=(0,n.useCallback)(I=>{if(!(!I.value||!w.has(I.value)))return B(I.value)},[w,B]),U=R.find(I=>I.value===L);return n.createElement(o.Ph,{value:U,options:R,onChange:A})});E.displayName="FieldsByFrameRefIdMatcher";const C={id:c.mi.byFrameRefID,component:E,matcher:s.Ls.get(c.mi.byFrameRefID),name:"Fields returned by query",description:"Set properties for fields from a specific query",optionsToLabel:x=>x},b=x=>(0,n.useMemo)(()=>{const O=new Set;for(const L of x)L.refId&&O.add(L.refId);return O},[x]),S=x=>(0,n.useMemo)(()=>Array.from(x).map(O=>({value:O,label:O})),[x]),M=new t.B(()=>[m,f,P,C,p])},80760:(H,T,e)=>{"use strict";e.d(T,{IX:()=>g,nw:()=>f,w3:()=>s});var t=e(68404),n=e(89890),c=e(50622);function s(o,l){return o?l.display.has(o)||l.raw.has(o):!1}function r(o,l){const a={display:new Set,raw:new Set,fields:new Map};for(const m of o)for(const d of m.fields){if(l&&!l(d))continue;const p=(0,n.C)(d,m,o);a.display.add(p),a.fields.set(p,d),d.name&&p!==d.name&&(a.raw.add(d.name),a.fields.set(d.name,d))}return a}function g(o,l){return(0,t.useMemo)(()=>r(o,l),[o,l])}function f(o,l,a,m){return(0,t.useMemo)(()=>{let d=!1;const p=[];a&&p.push(a);for(const h of o.display){!d&&h===l&&(d=!0);const y=o.fields.get(h);(!m||m===y?.type)&&p.push({value:h,label:h,icon:y?(0,c.e7)(y):void 0})}for(const h of o.raw)o.display.has(h)||(!d&&h===l&&(d=!0),p.push({value:h,label:`${h} (base field name)`}));return l&&!d&&p.push({value:l,label:`${l} (not found)`}),p},[o,l,a,m])}},38484:(H,T,e)=>{"use strict";e.d(T,{v:()=>a});var t=e(52423),n=e(68404),c=e(72648);function s(){const d=(0,c.wW)(r);return n.createElement("div",{className:d.divider})}const r=d=>({divider:(0,t.css)({height:1,backgroundColor:d.colors.border.weak,margin:d.spacing(.5,0)})});var g=e(14391),f=e(42044),o=e(43972);const l=n.forwardRef(({header:d,children:p,ariaLabel:h,onOpen:y,onClose:v,onKeyDown:i,...u},P)=>{const E=(0,c.wW)(m),C=(0,n.useRef)(null);(0,n.useImperativeHandle)(P,()=>C.current);const[b,S]=(0,o.d)({localRef:C,onOpen:y,onClose:v,onKeyDown:i});return n.createElement("div",{...u,tabIndex:-1,ref:C,className:E.wrapper,role:"menu","aria-label":h,onKeyDown:b,onFocus:S},d&&n.createElement("div",{className:E.header},d),p)});l.displayName="Menu";const a=Object.assign(l,{Item:f.s,Divider:s,Group:g.k}),m=d=>({header:(0,t.css)({padding:`${d.spacing(.5,.5,1,.5)}`,borderBottom:`1px solid ${d.colors.border.weak}`}),wrapper:(0,t.css)({background:`${d.colors.background.primary}`,boxShadow:`${d.shadows.z3}`,display:"inline-block",borderRadius:`${d.shape.borderRadius()}`,padding:`${d.spacing(.5,0)}`})})},14391:(H,T,e)=>{"use strict";e.d(T,{k:()=>g});var t=e(52423),n=e(82897),c=e.n(n),s=e(68404),r=e(72648);const g=({label:o,ariaLabel:l,children:a})=>{const m=(0,r.wW)(f),d=`group-label-${(0,n.uniqueId)()}`;return s.createElement("div",{role:"group","aria-labelledby":!l&&o?d:void 0,"aria-label":l},o&&s.createElement("label",{id:d,className:m.groupLabel,"aria-hidden":!0},o),a)};g.displayName="MenuGroup";const f=o=>({groupLabel:t.css`
      color: ${o.colors.text.secondary};
      font-size: ${o.typography.size.sm};
      padding: ${o.spacing(.5,1)};
    `})},42044:(H,T,e)=>{"use strict";e.d(T,{s:()=>m});var t=e(52423),n=e(68404),c=e(72648),s=e(85419),r=e(39904),g=e(68183),f=e(43972);const o=p=>{if(!p)return"left";const h=p.parentElement.getBoundingClientRect(),y=p.getBoundingClientRect();return y.width===0?"left":h.right+y.width+10>window.innerWidth?"right":"left"},l=n.memo(({items:p,isOpen:h,openedWithArrow:y,setOpenedWithArrow:v,close:i,customStyle:u})=>{const P=(0,c.wW)(a),E=(0,n.useRef)(null),[C]=(0,f.d)({localRef:E,isMenuOpen:h,openedWithArrow:y,setOpenedWithArrow:v,close:i});return n.createElement(n.Fragment,null,n.createElement("div",{className:P.iconWrapper,"aria-label":g.wl.components.Menu.SubMenu.icon},n.createElement(r.J,{name:"angle-right",className:P.icon,"aria-hidden":!0})),h&&n.createElement("div",{ref:E,className:P.subMenu(E.current),"aria-label":g.wl.components.Menu.SubMenu.container,style:u},n.createElement("div",{tabIndex:-1,className:P.itemsWrapper,role:"menu",onKeyDown:C},p)))});l.displayName="SubMenu";const a=p=>({iconWrapper:t.css`
      display: flex;
      flex: 1;
      justify-content: end;
    `,icon:t.css`
      opacity: 0.7;
      margin-left: ${p.spacing(2)};
      color: ${p.colors.text.secondary};
    `,itemsWrapper:t.css`
      background: ${p.colors.background.primary};
      box-shadow: ${p.shadows.z3};
      display: inline-block;
      border-radius: ${p.shape.borderRadius()};
    `,subMenu:h=>t.css`
      position: absolute;
      top: 0;
      z-index: ${p.zIndex.dropdown};
      ${o(h)}: 100%;
    `}),m=n.memo(n.forwardRef((p,h)=>{const{url:y,icon:v,label:i,ariaLabel:u,ariaChecked:P,target:E,onClick:C,className:b,active:S,disabled:M,destructive:x,childItems:O,role:L="menuitem",tabIndex:B=-1,customSubMenuContainerStyles:w}=p,R=(0,c.wW)(d),[A,U]=(0,n.useState)(S),[I,N]=(0,n.useState)(!1),[F,D]=(0,n.useState)(!1),Y=(0,n.useCallback)(()=>{M||(N(!0),U(!0))},[M]),j=(0,n.useCallback)(()=>{M||(N(!1),U(!1))},[M]),K=O&&O.length>0,z=K?"div":y===void 0?"button":"a",Z=(0,t.cx)({[R.item]:!0,[R.active]:A,[R.disabled]:M,[R.destructive]:x&&!M},b),ae={[z==="button"?"disabled":"aria-disabled"]:M,...z==="a"&&M&&{href:void 0,onClick:void 0},...M&&{tabIndex:-1,["data-disabled"]:M}},J=(0,n.useRef)(null);(0,n.useImperativeHandle)(h,()=>J.current);const oe=me=>{switch(me.key){case"ArrowRight":me.preventDefault(),me.stopPropagation(),K&&(N(!0),D(!0),U(!0));break;default:break}},Ee=()=>{N(!1),U(!1),J?.current?.focus()};return n.createElement(z,{target:E,className:Z,rel:E==="_blank"?"noopener noreferrer":void 0,href:y,onClick:C,onMouseEnter:Y,onMouseLeave:j,onKeyDown:oe,role:y===void 0?L:void 0,"data-role":"menuitem",ref:J,"aria-label":u,"aria-checked":P,tabIndex:B,...ae},n.createElement(n.Fragment,null,v&&n.createElement(r.J,{name:v,className:R.icon,"aria-hidden":!0}),i),K&&n.createElement(l,{items:O,isOpen:I,openedWithArrow:F,setOpenedWithArrow:D,close:Ee,customStyle:w}))}));m.displayName="MenuItem";const d=p=>({item:t.css`
      background: none;
      cursor: pointer;
      white-space: nowrap;
      color: ${p.colors.text.primary};
      display: flex;
      align-items: center;
      padding: ${p.spacing(.5,2)};
      min-height: ${p.spacing(4)};
      margin: 0;
      border: none;
      width: 100%;
      position: relative;

      &:hover,
      &:focus,
      &:focus-visible {
        background: ${p.colors.action.hover};
        color: ${p.colors.text.primary};
        text-decoration: none;
      }

      &:focus-visible {
        ${(0,s.getFocusStyles)(p)}
      }
    `,active:t.css`
      background: ${p.colors.action.hover};
    `,destructive:t.css`
      color: ${p.colors.error.text};

      svg {
        color: ${p.colors.error.text};
      }

      &:hover,
      &:focus,
      &:focus-visible {
        background: ${p.colors.error.main};
        color: ${p.colors.error.contrastText};

        svg {
          color: ${p.colors.error.contrastText};
        }
      }
    `,disabled:t.css`
      color: ${p.colors.action.disabledText};

      &:hover,
      &:focus,
      &:focus-visible {
        cursor: not-allowed;
        background: none;
        color: ${p.colors.action.disabledText};
      }
    `,icon:t.css`
      opacity: 0.7;
      margin-right: 10px;
      margin-left: -4px;
      color: ${p.colors.text.secondary};
    `})},43972:(H,T,e)=>{"use strict";e.d(T,{d:()=>r});var t=e(68404),n=e(58252);const c=(g,f)=>(g%f+f)%f,s=-1,r=({localRef:g,isMenuOpen:f,openedWithArrow:o,setOpenedWithArrow:l,close:a,onOpen:m,onClose:d,onKeyDown:p})=>{const[h,y]=(0,t.useState)(s);return(0,t.useEffect)(()=>{f&&o&&(y(0),l?.(!1))},[f,o,l]),(0,t.useEffect)(()=>{const u=g?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])');u?.[h]?.focus(),u?.forEach((P,E)=>{P.tabIndex=E===h?0:-1})},[g,h]),(0,n.Z)(()=>{const u=g?.current?.querySelector('[data-role="menuitem"]:not([data-disabled])');u&&(u.tabIndex=0),m?.(y)}),[u=>{const P=g?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])'),E=P?.length??0;switch(u.key){case"ArrowUp":u.preventDefault(),u.stopPropagation(),y(c(h-1,E));break;case"ArrowDown":u.preventDefault(),u.stopPropagation(),y(c(h+1,E));break;case"ArrowLeft":u.preventDefault(),u.stopPropagation(),y(s),a?.();break;case"Home":u.preventDefault(),u.stopPropagation(),y(0);break;case"End":u.preventDefault(),u.stopPropagation(),y(E-1);break;case"Enter":u.preventDefault(),u.stopPropagation(),P?.[h]?.click();break;case"Escape":d?.();break;case"Tab":u.preventDefault(),d?.();break;default:break}p?.(u)},()=>{h===s&&y(0)}]}},35029:(H,T,e)=>{"use strict";e.d(T,{u:()=>m});var t=e(52423),n=e(99510),c=e(81699),s=e(6665),r=e(68404),g=e(72648),f=e(8180),o=e(52081),l=e(38894),a=e(27581);function m(h){const{title:y,children:v,isOpen:i=!1,closeOnEscape:u=!0,closeOnBackdropClick:P=!0,className:E,contentClassName:C,onDismiss:b,onClickBackdrop:S,trapFocus:M=!0}=h,x=(0,g.l4)(),O=(0,a.J)(x),L=(0,r.useRef)(null),{overlayProps:B,underlayProps:w}=(0,s.Ir)({isKeyboardDismissDisabled:!u,isOpen:i,onClose:b},L),{dialogProps:R,titleProps:A}=(0,n.R)({},L);if(!i)return null;const U=(0,t.cx)(O.modalHeader,typeof y!="string"&&O.modalHeaderWithTabs);return r.createElement(s.Xj,null,r.createElement("div",{role:"presentation",className:O.modalBackdrop,onClick:S||(P?b:void 0),...w}),r.createElement(c.MT,{contain:M,autoFocus:!0,restoreFocus:!0},r.createElement("div",{className:(0,t.cx)(O.modal,E),ref:L,...B,...R},r.createElement("div",{className:U},typeof y=="string"&&r.createElement(p,{...h,title:y,id:A.id}),typeof y!="string"&&y,r.createElement("div",{className:O.modalHeaderClose},r.createElement(f.h,{"aria-label":"Close dialogue",name:"times",size:"xl",onClick:b}))),r.createElement("div",{className:(0,t.cx)(O.modalContent,C)},v))))}function d({leftItems:h,children:y}){const v=(0,g.l4)(),i=(0,a.J)(v);return h?r.createElement("div",{className:i.modalButtonRow},r.createElement(o.Lh,{justify:"space-between"},r.createElement(o.Lh,{justify:"flex-start",spacing:"md"},h),r.createElement(o.Lh,{justify:"flex-end",spacing:"md"},y))):r.createElement("div",{className:i.modalButtonRow},r.createElement(o.Lh,{justify:"flex-end",spacing:"md"},y))}m.ButtonRow=d;function p({icon:h,iconTooltip:y,title:v,id:i}){return r.createElement(l.x,{icon:h,iconTooltip:y,title:v,id:i})}},38894:(H,T,e)=>{"use strict";e.d(T,{x:()=>s});var t=e(68404),n=e(72648),c=e(27581);const s=({icon:r,iconTooltip:g,title:f,children:o,id:l})=>{const a=(0,n.wW)(c.J);return t.createElement(t.Fragment,null,t.createElement("h2",{className:a.modalHeaderTitle,id:l},f),o)}},72535:(H,T,e)=>{"use strict";e.d(T,{Q:()=>n});var t=e(68404);const n=({children:c})=>t.createElement("div",{className:"share-modal-body"},t.createElement("div",{className:"share-modal-header"},t.createElement("div",{className:"share-modal-content"},c)))},88683:(H,T,e)=>{"use strict";e.d(T,{H:()=>r});var t=e(68404),n=e(79841),c=e(72142),s=e(38894);const r=({icon:g,title:f,tabs:o,activeTab:l,onChangeTab:a})=>t.createElement(s.x,{icon:g,title:f},t.createElement(c.J,{hideBorder:!0},o.map((m,d)=>t.createElement(n.O,{key:`${m.value}-${d}`,label:m.label,icon:m.icon,suffix:m.tabSuffix,active:m.value===l,onChangeTab:()=>a(m)}))))},5191:(H,T,e)=>{"use strict";e.d(T,{$i:()=>c,JY:()=>r,Y0:()=>s,kr:()=>n});var t=e(68404);const n=t.createContext({component:null,props:{},showModal:()=>{},hideModal:()=>{}});class c extends t.Component{constructor(f){super(f),this.showModal=(o,l)=>{this.setState({component:o,props:l})},this.hideModal=()=>{this.setState({component:null,props:{}})},this.state={component:f.component||null,props:f.props||{},showModal:this.showModal,hideModal:this.hideModal}}render(){return t.createElement(n.Provider,{value:this.state},this.props.children)}}const s=()=>t.createElement(n.Consumer,null,({component:g,props:f})=>g?t.createElement(g,{...f}):null),r=n.Consumer},27581:(H,T,e)=>{"use strict";e.d(T,{J:()=>c});var t=e(52423),n=e(7804);const c=(0,n.B)(s=>{const r=s.shape.borderRadius(1);return{modal:t.css`
      position: fixed;
      z-index: ${s.zIndex.modal};
      background: ${s.colors.background.primary};
      box-shadow: ${s.shadows.z3};
      border-radius: ${r};
      border: 1px solid ${s.colors.border.weak};
      background-clip: padding-box;
      outline: none;
      width: 750px;
      max-width: 100%;
      left: 0;
      right: 0;
      margin-left: auto;
      margin-right: auto;
      top: 10%;
      max-height: 80%;
      display: flex;
      flex-direction: column;
    `,modalBackdrop:t.css`
      position: fixed;
      z-index: ${s.zIndex.modalBackdrop};
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background-color: ${s.components.overlay.background};
      backdrop-filter: blur(1px);
    `,modalHeader:t.css`
      label: modalHeader;
      display: flex;
      align-items: center;
      min-height: 42px;
      margin: ${s.spacing(1,2,0,2)};
    `,modalHeaderWithTabs:t.css`
      border-bottom: 1px solid ${s.colors.border.weak};
    `,modalHeaderTitle:t.css`
      font-size: ${s.typography.size.lg};
      margin: ${s.spacing(0,4,0,1)};
      display: flex;
      align-items: center;
      position: relative;
      top: 2px;
    `,modalHeaderIcon:t.css`
      margin-right: ${s.spacing(2)};
      font-size: inherit;
      &:before {
        vertical-align: baseline;
      }
    `,modalHeaderClose:t.css`
      height: 100%;
      display: flex;
      align-items: center;
      color: ${s.colors.text.secondary};
      flex-grow: 1;
      justify-content: flex-end;
    `,modalContent:t.css`
      overflow: auto;
      padding: ${s.spacing(3)};
      width: 100%;
    `,modalButtonRow:t.css`
      padding-top: ${s.spacing(3)};
    `}})},9405:(H,T,e)=>{"use strict";e.d(T,{p:()=>p});var t=e(52423),n=e(68404),c=e(87442),s=e(68183),r=e(72648),g=e(84128),f=e(10339);function o(y){for(let v=y.length-1;v>0;v--){const i=y.charAt(v);if(i==="$")return{index:v,prefix:y.substring(v)};if(i===" "||i==="	"||i==='"'||i==="'")return{index:v+1,prefix:y.substring(v+1)}}return{index:0,prefix:y}}function l(y,v,i,u){const P=[];for(const E of i)v&&!E.label.startsWith(v)||P.push({...E,kind:a(y,E.kind),range:u,insertText:E.insertText??E.label});return P}function a(y,v){switch(v){case f.k.Method:return y.languages.CompletionItemKind.Method;case f.k.Field:return y.languages.CompletionItemKind.Field;case f.k.Property:return y.languages.CompletionItemKind.Property;case f.k.Constant:return y.languages.CompletionItemKind.Constant;case f.k.Text:return y.languages.CompletionItemKind.Text}return y.languages.CompletionItemKind.Text}function m(y,v,i){if(!(!v||!i))return y.languages.registerCompletionItemProvider(v,{triggerCharacters:["$"],provideCompletionItems:(u,P,E)=>{const C={startLineNumber:P.lineNumber,endLineNumber:P.lineNumber,startColumn:P.column,endColumn:P.column};if(E.triggerCharacter==="$")return C.startColumn=P.column-1,{suggestions:l(y,"$",i(),C)};const b=u.getValueInRange({startLineNumber:P.lineNumber,startColumn:1,endLineNumber:P.lineNumber,endColumn:P.column}),{index:S,prefix:M}=o(b);C.startColumn=S+1;const x=l(y,M,i(),C);if(x.length)return{suggestions:x}}})}class d extends n.PureComponent{constructor(v){super(v),this.loadCustomLanguage=()=>{const{language:i}=this.props,u=c.F.getIfExists(i);return u?u.init():Promise.resolve()},this.getEditorValue=()=>"",this.onBlur=()=>{const{onBlur:i}=this.props;i&&i(this.getEditorValue())},this.onSave=()=>{const{onSave:i}=this.props;i&&i(this.getEditorValue())},this.handleBeforeMount=i=>{this.monaco=i;const{language:u,getSuggestions:P,onBeforeEditorMount:E}=this.props;P&&(this.completionCancel=m(i,u,P)),E?.(i)},this.handleOnMount=(i,u)=>{const{onChange:P,onEditorDidMount:E}=this.props;this.getEditorValue=()=>i.getValue(),i.addCommand(u.KeyMod.CtrlCmd|u.KeyCode.KeyS,this.onSave);const C=this.loadCustomLanguage();E&&(C.then(()=>E(i,u)),i.getModel()?.onDidChangeContent(()=>P?.(i.getValue())))}}componentWillUnmount(){this.completionCancel&&this.completionCancel.dispose()}componentDidUpdate(v){const{getSuggestions:i,language:u}=this.props,P=v.language!==u;if(v.getSuggestions!==i||P){if(this.completionCancel&&this.completionCancel.dispose(),!this.monaco){console.warn("Monaco instance not loaded yet");return}i&&(this.completionCancel=m(this.monaco,u,i))}P&&this.loadCustomLanguage()}render(){const{theme:v,language:i,width:u,height:P,showMiniMap:E,showLineNumbers:C,readOnly:b,monacoOptions:S}=this.props,M=this.props.value??"",x=M.length>100,O=this.props.containerStyles??h(v).container,L={wordWrap:"off",tabSize:2,codeLens:!1,contextmenu:!1,minimap:{enabled:x&&E,renderCharacters:!1},readOnly:b,lineNumbersMinChars:4,lineDecorationsWidth:1*v.spacing.gridSize,overviewRulerBorder:!1,automaticLayout:!0,padding:{top:.5*v.spacing.gridSize,bottom:.5*v.spacing.gridSize},fixedOverflowWidgets:!0};return C||(L.glyphMargin=!1,L.folding=!1,L.lineNumbers="off",L.lineNumbersMinChars=0),n.createElement("div",{className:O,onBlur:this.onBlur,"aria-label":s.wl.components.CodeEditor.container},n.createElement(g.o,{width:u,height:P,language:i,value:M,options:{...L,...S??{}},beforeMount:this.handleBeforeMount,onMount:this.handleOnMount}))}}const p=(0,r.HE)(d),h=y=>({container:t.css`
      border-radius: ${y.shape.borderRadius()};
      border: 1px solid ${y.components.input.borderColor};
    `})},84128:(H,T,e)=>{"use strict";e.d(T,{o:()=>g});var t=e(68404),n=e(61744),c=e(39198),s=e(22350);const r=f=>{const o=(0,s.Z)(async()=>await f);return{...o,dependency:o.value}},g=f=>{const{loading:o,error:l,dependency:a}=r(e.e(2462).then(e.bind(e,28099)));if(o)return t.createElement(n.u,{text:""});if(l)return t.createElement(c.X,{title:"React Monaco Editor failed to load",error:l,errorInfo:{componentStack:l?.stack||""}});const m=a.ReactMonacoEditor;return t.createElement(m,{...f})}},10339:(H,T,e)=>{"use strict";e.d(T,{k:()=>t});var t=(n=>(n.Method="method",n.Field="field",n.Property="property",n.Constant="constant",n.Text="text",n))(t||{})},25503:(H,T,e)=>{"use strict";e.d(T,{T:()=>n});var t=e(10339);function n(c){const s="${"+c.value+"}",r=c.value===c.label?c.origin:`${c.label} / ${c.origin}`;return{label:s,kind:t.k.Property,detail:r,documentation:c.documentation}}},35224:(H,T,e)=>{"use strict";e.d(T,{X:()=>a});var t=e(52423),n=e(68404),c=e(68183),s=e(29460),r=e(8125),g=e(72648),f=e(85419),o=e(39904),l=e(8180);const a=n.memo(({title:d,section:p,parent:h,pageIcon:y,onGoBack:v,children:i,titleHref:u,parentHref:P,leftItems:E,isFullscreen:C,className:b,"aria-label":S,buttonOverflowAlignment:M="right"})=>{const x=(0,g.wW)(m),O=(0,t.cx)("page-toolbar",x.toolbar,{["page-toolbar--fullscreen"]:C,[x.noPageIcon]:!y},b),L=n.createElement(n.Fragment,null,n.createElement("span",{className:x.truncateText},d),p&&n.createElement("span",{className:x.pre}," / ",p));return n.createElement("nav",{className:O,"aria-label":S},n.createElement("div",{className:x.leftWrapper},y&&!v&&n.createElement("div",{className:x.pageIcon},n.createElement(o.J,{name:y,size:"lg","aria-hidden":!0})),v&&n.createElement("div",{className:x.pageIcon},n.createElement(l.h,{name:"arrow-left",tooltip:"Go back (Esc)",tooltipPlacement:"bottom",size:"xxl","aria-label":c.wl.components.BackButton.backArrow,onClick:v})),n.createElement("nav",{"aria-label":"Search links",className:x.navElement},h&&P&&n.createElement(n.Fragment,null,n.createElement(s.r,{"aria-label":`Search dashboard in the ${h} folder`,className:(0,t.cx)(x.titleText,x.parentLink,x.titleLink,x.truncateText),href:P},h," ",n.createElement("span",{className:x.parentIcon})),u&&n.createElement("span",{className:(0,t.cx)(x.titleText,x.titleDivider),"aria-hidden":!0},"/")),(d||Boolean(E?.length))&&n.createElement("div",{className:x.titleWrapper},d&&n.createElement("h1",{className:x.h1Styles},u?n.createElement(s.r,{"aria-label":"Search dashboard by name",className:(0,t.cx)(x.titleText,x.titleLink),href:u},L):n.createElement("div",{className:x.titleText},L)),E?.map((B,w)=>n.createElement("div",{className:x.leftActionItem,key:w},B))))),n.createElement(r.R,{alignment:M},n.Children.toArray(i).filter(Boolean)))});a.displayName="PageToolbar";const m=d=>{const{spacing:p,typography:h}=d,y=(0,f.getFocusStyles)(d);return{pre:t.css`
      white-space: pre;
    `,toolbar:t.css`
      align-items: center;
      background: ${d.colors.background.canvas};
      display: flex;
      gap: ${d.spacing(2)};
      justify-content: space-between;
      padding: ${d.spacing(1.5,2)};

      ${d.breakpoints.down("md")} {
        padding-left: 53px;
      }
    `,noPageIcon:t.css`
      ${d.breakpoints.down("md")} {
        padding-left: ${d.spacing(2)};
      }
    `,leftWrapper:t.css`
      display: flex;
      flex-wrap: nowrap;
      max-width: 70%;
    `,pageIcon:t.css`
      display: none;
      ${d.breakpoints.up("sm")} {
        display: flex;
        padding-right: ${d.spacing(1)};
        align-items: center;
      }
    `,truncateText:t.css`
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,titleWrapper:t.css`
      display: flex;
      margin: 0;
      min-width: 0;
    `,navElement:t.css`
      display: flex;
      align-items: center;
      min-width: 0;
    `,h1Styles:t.css`
      margin: ${p(0,1,0,0)};
      line-height: inherit;
      flex-grow: 1;
      min-width: 0;
    `,parentIcon:t.css`
      margin-left: ${d.spacing(.5)};
    `,titleText:t.css`
      display: flex;
      font-size: ${h.size.lg};
      margin: 0;
      max-width: 300px;
      border-radius: 2px;
    `,titleLink:t.css`
      &:focus-visible {
        ${y}
      }
    `,titleDivider:t.css`
      padding: ${p(0,.5,0,.5)};
      display: none;
      ${d.breakpoints.up("md")} {
        display: unset;
      }
    `,parentLink:t.css`
      display: none;
      ${d.breakpoints.up("md")} {
        display: unset;
        flex: 1;
      }
    `,leftActionItem:t.css`
      display: none;
      ${d.breakpoints.up("md")} {
        align-items: center;
        display: flex;
        padding-right: ${p(.5)};
      }
    `}}},78889:(H,T,e)=>{"use strict";e.d(T,{t:()=>g});var t=e(52423),n=e(68404),c=e(72648),s=e(31403),r=e(39904);const g=({currentPage:o,numberOfPages:l,onNavigate:a,hideWhenSinglePage:m,showSmallVersion:d,className:p})=>{const h=(0,c.wW)(f),y=d?1:8,v=(0,n.useMemo)(()=>{const i=[...new Array(l).keys()],u=l>y,P=(E,C)=>n.createElement("li",{key:E,className:h.item},n.createElement(s.zx,{size:"sm",variant:C,onClick:()=>a(E)},E));return i.reduce((E,C)=>{const b=C+1,S=b===o?"primary":"secondary",M=y,x=l-y+1,O=x-M,L=b===1||b===l,B=O>-1&&o>=M&&o<=x,w=d?1:3,R=d?0:2;return u?L||o<M&&b<M||O>=0&&o>x&&b>x||O<0&&o>=M&&b>x||B&&b>=o-R&&b<=o+R?E.push(P(b,S)):(b===M&&o<M||b===x&&o>x||B&&(b===o-w||b===o+w))&&E.push(n.createElement("li",{key:b,className:h.item},n.createElement(r.J,{className:h.ellipsis,name:"ellipsis-v"}))):E.push(P(b,S)),E},[])},[o,l,a,y,d,h.ellipsis,h.item]);return m&&l<=1?null:n.createElement("div",{className:(0,t.cx)(h.container,p)},n.createElement("ol",null,n.createElement("li",{className:h.item},n.createElement(s.zx,{"aria-label":"previous",size:"sm",variant:"secondary",onClick:()=>a(o-1),disabled:o===1},n.createElement(r.J,{name:"angle-left"}))),v,n.createElement("li",{className:h.item},n.createElement(s.zx,{"aria-label":"next",size:"sm",variant:"secondary",onClick:()=>a(o+1),disabled:o===l},n.createElement(r.J,{name:"angle-right"})))))},f=()=>({container:t.css`
      float: right;
    `,item:t.css`
      display: inline-block;
      padding-left: 10px;
      margin-bottom: 5px;
    `,ellipsis:t.css`
      transform: rotate(90deg);
    `})},99562:(H,T,e)=>{"use strict";e.d(T,{g:()=>a});var t=e(52423),n=e(68404),c=e(72648);const s={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"},r=8,g={name:"Grafana Default",typography:{fontFamily:{sansSerif:'"Inter", "Helvetica", "Arial", sans-serif',monospace:"'Roboto Mono', monospace"},size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},heading:{h1:"28px",h2:"24px",h3:"21px",h4:"18px",h5:"16px",h6:"14px"},weight:{light:300,regular:400,semibold:500,bold:500},lineHeight:{xs:1,sm:1.1,md:1.5,lg:2},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:"0",sm:"544px",md:"769px",lg:"992px",xl:"1200px",xxl:"1440px"},spacing:{base:r,insetSquishMd:"4px 8px",d:"16px",xxs:"2px",xs:"4px",sm:"8px",md:"16px",lg:"24px",xl:"32px",gutter:"30px",formSpacingBase:r,formMargin:`${r*4}px`,formFieldsetMargin:`${r*2}px`,formInputHeight:r*4,formButtonHeight:r*4,formInputPaddingHorizontal:`${r}px`,formInputAffixPaddingHorizontal:`${r/2}px`,formInputMargin:`${r*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${r/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:"2px",md:"3px",lg:"5px"},width:{sm:"1px"}},height:{sm:24,md:32,lg:48},panelPadding:8,panelHeaderHeight:28,zIndex:{navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061}},f=null;var o=e(39904),l=e(61860);const a=({error:d,onClick:p})=>{const h=(0,c.wW)(m);return d?n.createElement(l.u,{theme:"error",content:d},n.createElement(o.J,{onClick:p,className:(0,t.cx)(h.icon,{[h.clickable]:!!p}),size:"sm",name:"exclamation-triangle"})):null},m=()=>({clickable:(0,t.css)({cursor:"pointer"}),icon:(0,t.css)({color:`${s.red88}`})})},8861:(H,T,e)=>{"use strict";e.d(T,{T:()=>f});var t=e(52423),n=e(68404),c=e(68183),s=e(72648),r=e(39904),g=e(61860);const f=({onCancel:l,loading:a})=>{const m=(0,s.wW)(o);return a?n.createElement(g.u,{content:"Cancel query"},n.createElement(r.J,{className:(0,t.cx)("spin-clockwise",{[m.clickable]:!!l}),name:"sync",size:"sm",onClick:l,"aria-label":c.wl.components.LoadingIndicator.icon})):null},o=()=>({clickable:(0,t.css)({cursor:"pointer"})})},60325:(H,T,e)=>{"use strict";e.d(T,{R9:()=>r,_w:()=>s,bb:()=>c});var t=e(68404),n=e(85081);const c=t.createContext({eventBus:new n.F}),s=c.Provider,r=()=>t.useContext(c)},86635:(H,T,e)=>{"use strict";e.d(T,{fm:()=>R});var t=e(99562),n=e(8861),c=e(52423),s=e(68404),r=e(49922),g=e(68183),f=e(72648),o=e(39904),l=e(74750),a=e(61860),m=e(9085),d=e.n(m),p=e(71698),h=e(64319);function y({menu:A,title:U,placement:I="bottom",offset:N,dragClassCancel:F,menuButtonClass:D,onVisibleChange:Y}){return s.createElement(p.L,{overlay:A,placement:I,offset:N,onVisibleChange:Y},s.createElement(h.h,{"aria-label":`Menu for panel with ${U?`title ${U}`:"no title"}`,title:"Menu",icon:"ellipsis-v",iconSize:"md",narrow:!0,"data-testid":"panel-menu-button",className:(0,c.cx)(D,F)}))}function v({menu:A,title:U,dragClass:I,children:N,offset:F=-32}){const D=(0,f.wW)(i),Y=(0,s.useRef)(null),j=(0,s.useCallback)(ae=>{Y.current?.setPointerCapture(ae.pointerId)},[]),K=(0,s.useCallback)(ae=>{Y.current?.releasePointerCapture(ae.pointerId)},[]),[z,Z]=(0,s.useState)(!1);return N===void 0||s.Children.count(N)===0?null:s.createElement("div",{className:d()(D.container,{"show-on-hover":!z}),style:{top:`${F}px`},"data-testid":"hover-header-container"},s.createElement("div",{className:d()(D.square,D.draggable,I),onPointerDown:j,onPointerUp:K,ref:Y},s.createElement(o.J,{name:"draggabledots"})),N,s.createElement("div",{className:D.square},s.createElement(y,{menu:A,title:U,placement:"bottom",menuButtonClass:D.menuButton,onVisibleChange:Z})))}function i(A){return{hidden:(0,c.css)({visibility:"hidden",opacity:"0"}),container:(0,c.css)({label:"hover-container-widget",transition:"all .1s linear",display:"flex",position:"absolute",zIndex:1,boxSizing:"border-box",alignItems:"center",background:A.colors.background.secondary,color:A.colors.text.primary,border:`1px solid ${A.colors.border.weak}`,borderRadius:"1px",height:A.spacing(4),boxShadow:A.shadows.z1}),square:(0,c.css)({display:"flex",justifyContent:"center",alignItems:"center",width:A.spacing(4),height:"100%"}),draggable:(0,c.css)({cursor:"move"}),menuButton:(0,c.css)({color:A.colors.text.primary,"&:hover":{background:"inherit"}}),title:(0,c.css)({padding:A.spacing(.75)})}}var u=e(85419);const P=(0,s.forwardRef)(({className:A,children:U,href:I,onClick:N,target:F,title:D,...Y},j)=>{const K=(0,f.wW)(E);return I?s.createElement("a",{ref:j,href:I,onClick:N,target:F,title:D,className:(0,c.cx)(K.item,A),...Y},U):s.createElement("span",{ref:j,className:(0,c.cx)(K.item,A),...Y},U)});P.displayName="TitleItem";const E=A=>({item:(0,c.css)({color:`${A.colors.text.secondary}`,label:"panel-header-item",cursor:"auto",border:"none",borderRadius:`${A.shape.borderRadius()}`,padding:`${A.spacing(0,1)}`,height:`${A.spacing(A.components.panel.headerHeight)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,u.getFocusStyles)(A),zIndex:1},"&: focus:not(:focus-visible)":(0,u.getMouseFocusStyles)(A),"&:hover ":{boxShadow:`${A.shadows.z1}`,background:`${A.colors.background.secondary}`}})});function C({description:A,className:U}){const I=(0,f.wW)(b),N=()=>{const F=typeof A=="function"?A():A;return s.createElement("div",{className:"panel-info-content markdown-html"},s.createElement("div",{dangerouslySetInnerHTML:{__html:F}}))};return A!==""?s.createElement(a.u,{interactive:!0,content:N},s.createElement(P,{className:(0,c.cx)(U,I.description)},s.createElement(o.J,{name:"info-circle",size:"md",title:"description"}))):null}const b=A=>({description:(0,c.css)({code:{whiteSpace:"normal",wordWrap:"break-word"},"pre > code":{display:"block"}})});function S({className:A,message:U,onClick:I,ariaLabel:N="status"}){const F=(0,f.wW)(M);return s.createElement(h.h,{className:(0,c.cx)(A,F.buttonStyles),onClick:I,variant:"destructive",icon:"exclamation-triangle",iconSize:"md",tooltip:U||"","aria-label":N})}const M=A=>{const{headerHeight:U,padding:I}=A.components.panel;return{buttonStyles:(0,c.css)({label:"panel-header-state-button",display:"flex",alignItems:"center",justifyContent:"center",padding:A.spacing(I),width:A.spacing(U),height:A.spacing(U),borderRadius:0})}};function x({width:A,height:U,children:I,padding:N="md",title:F="",description:D="",displayMode:Y="default",titleItems:j,menu:K,dragClass:z,dragClassCancel:Z,hoverHeader:ae=!1,hoverHeaderOffset:J,loadingState:oe,statusMessage:Ee,statusMessageOnClick:me,leftItems:re}){const le=(0,f.l4)(),pe=(0,f.wW)(w),ee=ae===!1&&(F.length>0||j!==void 0||D!==""||oe===r.Gu.Streaming||(re?.length??0)>0),se=L(le,ee),{contentStyle:Q,innerWidth:G,innerHeight:q}=B(N,le,A,se,U),X={height:se,cursor:z?"move":"auto"},de={width:A,height:U};Y==="transparent"&&(de.backgroundColor="transparent",de.border="none");const Be=F?g.wl.components.Panels.Panel.containerByTitle(F):"Panel",ke=s.createElement(s.Fragment,null,F&&s.createElement("h6",{title:F,className:pe.title},F),s.createElement(C,{description:D,className:Z}),j!==void 0&&s.createElement("div",{className:(0,c.cx)(pe.titleItems,Z),"data-testid":"title-items-container"},j),oe===r.Gu.Streaming&&s.createElement(a.u,{content:"Streaming"},s.createElement(P,{className:Z,"data-testid":"panel-streaming"},s.createElement(o.J,{name:"circle-mono",size:"md",className:pe.streaming}))));return s.createElement("div",{className:(0,c.cx)(pe.container,{[pe.regularHeader]:ee}),style:de,"aria-label":Be},s.createElement("div",{className:pe.loadingBarContainer},oe===r.Gu.Loading?s.createElement(l.F,{width:A,ariaLabel:"Panel loading bar"}):null),(ae||!ee)&&K&&s.createElement(v,{menu:K,title:F,offset:J,dragClass:z},ke),ee&&s.createElement("div",{className:(0,c.cx)(pe.headerContainer,z),style:X,"data-testid":"header-container"},ke,s.createElement("div",{className:pe.rightAligned},K&&s.createElement(y,{menu:K,title:F,menuButtonClass:(0,c.cx)(pe.menuItem,Z,"show-on-hover")}),re&&s.createElement("div",{className:pe.leftItems},O(re,He=>He)))),Ee&&s.createElement(S,{className:(0,c.cx)(pe.errorContainer,Z),message:Ee,onClick:me,ariaLabel:"Panel status"}),s.createElement("div",{className:pe.content,style:Q},I(G,q)))}const O=(A,U)=>{const I=s.Children.toArray(A).filter(Boolean);return I.length>0?U(I):null},L=(A,U)=>U?A.spacing.gridSize*A.components.panel.headerHeight:0,B=(A,U,I,N,F)=>{const D=(A==="md"?U.components.panel.padding:0)*U.spacing.gridSize,Y=D*2,j=1*2,K=I-Y-j,z=F-N-Y-j;return{contentStyle:{padding:D},innerWidth:K,innerHeight:z}},w=A=>{const{background:U,borderColor:I,padding:N}=A.components.panel;return{container:(0,c.css)({label:"panel-container",backgroundColor:U,border:`1px solid ${I}`,position:"relative",borderRadius:"3px",height:"100%",display:"flex",flexDirection:"column",flex:"1 1 0",".show-on-hover":{visibility:"hidden",opacity:"0"},"&:focus-visible, &:hover":{".show-on-hover":{visibility:"visible",opacity:"1"}},"&:focus-visible":{outline:`1px solid ${A.colors.action.focus}`}}),regularHeader:(0,c.css)({"&:focus-within":{".show-on-hover":{visibility:"visible",opacity:"1"}}}),loadingBarContainer:(0,c.css)({label:"panel-loading-bar-container",position:"absolute",top:0,width:"100%",overflow:"hidden"}),content:(0,c.css)({label:"panel-content",flexGrow:1,contain:"strict"}),headerContainer:(0,c.css)({label:"panel-header",display:"flex",alignItems:"center",padding:A.spacing(0,0,0,N)}),streaming:(0,c.css)({label:"panel-streaming",marginRight:0,color:A.colors.success.text,"&:hover":{color:A.colors.success.text}}),title:(0,c.css)({label:"panel-title",marginBottom:0,paddingRight:A.spacing(1),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:A.spacing(50),fontSize:A.typography.h6.fontSize,fontWeight:A.typography.h6.fontWeight}),items:(0,c.css)({display:"flex"}),item:(0,c.css)({display:"flex",justifyContent:"center",alignItems:"center"}),menuItem:(0,c.css)({label:"panel-menu",visibility:"hidden",border:"none"}),errorContainer:(0,c.css)({label:"error-container",position:"absolute",left:"50%",transform:"translateX(-50%)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:A.zIndex.tooltip}),leftItems:(0,c.css)({display:"flex",paddingRight:A.spacing(N)}),rightAligned:(0,c.css)({label:"right-aligned-container",marginLeft:"auto",display:"flex",alignItems:"center"}),titleItems:(0,c.css)({display:"flex",height:"100%"})}},R=x;R.LoadingIndicator=n.T,R.ErrorIndicator=t.g,R.TitleItem=P},17882:(H,T,e)=>{"use strict";e.d(T,{R:()=>t});var t=(n=>(n.ToggleSelection="select",n.AppendToSelection="append",n))(t||{})},72080:(H,T,e)=>{"use strict";e.d(T,{l:()=>s});var t=e(52423),n=e(68404),c=e(72648);const s=({children:g,className:f,...o})=>{const l=(0,c.wW)(r);return n.createElement("div",{className:(0,t.cx)(l,f),...o},g)},r=g=>t.css`
    background-color: ${g.components.panel.background};
    border: 1px solid ${g.components.panel.borderColor};
    border-radius: 3px;
  `},51613:(H,T,e)=>{"use strict";e.d(T,{o:()=>s});var t=e(68404),n=e(24699),c=e(19985);const s=({status:g,...f})=>{const o=r(g);return t.createElement(c.C,{text:o.text,color:o.color,icon:o.icon,tooltip:o.tooltip,...f})};s.displayName="PluginSignatureBadge";function r(g){switch(g||(g=n.Xy.invalid),g){case n.Xy.internal:return{text:"Core",color:"blue",tooltip:"Core plugin that is bundled with Grafana"};case n.Xy.valid:return{text:"Signed",icon:"lock",color:"green",tooltip:"Signed and verified plugin"};case n.Xy.invalid:return{text:"Invalid signature",icon:"exclamation-triangle",color:"red",tooltip:"Invalid plugin signature"};case n.Xy.modified:return{text:"Modified signature",icon:"exclamation-triangle",color:"red",tooltip:"Valid signature but content has been modified"};case n.Xy.missing:return{text:"Missing signature",icon:"exclamation-triangle",color:"red",tooltip:"Missing plugin signature"};default:return{text:"Unsigned",icon:"exclamation-triangle",color:"red",tooltip:"Unsigned external plugin"}}}},85511:(H,T,e)=>{"use strict";e.d(T,{RN:()=>r,h_:()=>s,lO:()=>g});var t=e(68404),n=e(97394),c=e(72648);function s(o){const{children:l,className:a,root:m,forwardedRef:d}=o,p=(0,c.l4)(),h=(0,t.useRef)(null),y=m??r();return h.current||(h.current=document.createElement("div"),a&&(h.current.className=a),h.current.style.position="relative",h.current.style.zIndex=`${p.zIndex.portal}`),(0,t.useLayoutEffect)(()=>(h.current&&y.appendChild(h.current),()=>{h.current&&y.removeChild(h.current)}),[y]),n.createPortal(t.createElement("div",{ref:d},l),h.current)}function r(){return window.document.getElementById("grafana-portal-container")??document.body}function g(){return t.createElement("div",{id:"grafana-portal-container"})}const f=t.forwardRef((o,l)=>t.createElement(s,{...o,forwardedRef:l}));f.displayName="RefForwardingPortal"},69659:(H,T,e)=>{"use strict";e.d(T,{q:()=>C});var t=e(52423),n=e(9085),c=e.n(n),s=e(82897),r=e.n(s),g=e(68404),f=e(40246),o=e(56747),l=e(68183),a=e(12724),m=e(73958),d=e(47838),p=e(9830),h=e(74778),y=e(71096),v=e(784),i=e(6464),u=e(72648),P=e(85419);class E extends g.PureComponent{constructor(M,x){super(M,x),this.lastExecutedValue=null,this.mounted=!1,this.editor=null,this.onChange=(R,A)=>{const U=R.document!==this.state.value.document,I=this.state.value;this.props.onRichValueChange&&this.props.onRichValueChange(R),this.setState({value:R},()=>{if(U){const N=f.Z.serialize(I)!==f.Z.serialize(R);N&&A&&this.runOnChangeAndRunQuery(),N&&!A&&this.runOnChangeDebounced()}})},this.runOnChange=()=>{const{onChange:R}=this.props,A=f.Z.serialize(this.state.value);R&&R(this.cleanText(A))},this.runOnRunQuery=()=>{const{onRunQuery:R}=this.props;R&&(R(),this.lastExecutedValue=this.state.value)},this.runOnChangeAndRunQuery=()=>{this.runOnChange(),this.runOnRunQuery()},this.handleBlur=(R,A,U)=>{const{onBlur:I}=this.props;if(I)I();else{const N=this.lastExecutedValue?f.Z.serialize(this.lastExecutedValue):"",F=f.Z.serialize(A.value);N!==F&&this.runOnChangeAndRunQuery()}return U()},this.runOnChangeDebounced=(0,s.debounce)(this.runOnChange,500);const{onTypeahead:O,cleanText:L,portalOrigin:B,onWillApplySuggestion:w}=M;this.plugins=[(0,m.b)({onTypeahead:O,cleanText:L,portalOrigin:B,onWillApplySuggestion:w}),(0,d.d)({handler:this.runOnChangeAndRunQuery}),(0,p.z)(),(0,h.G)(),(0,y.$)(),(0,v.R)(),(0,i.w)(),...M.additionalPlugins||[]].filter(R=>R),this.state={suggestions:[],typeaheadContext:null,typeaheadPrefix:"",typeaheadText:"",value:(0,a.l1)(M.query||"",M.syntax)}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidUpdate(M,x){const{query:O,syntax:L,syntaxLoaded:B}=this.props;if(!M.syntaxLoaded&&B&&this.editor){const R=this.editor.insertText(" ").deleteBackward(1);this.onChange(R.value,!0)}const{value:w}=this.state;O!==M.query&&O!==f.Z.serialize(w)&&this.setState({value:(0,a.l1)(O||"",L)})}cleanText(M){return M.replace(/[\r]/g,"")}render(){const{disabled:M,theme:x}=this.props,O=c()("slate-query-field__wrapper",{"slate-query-field__wrapper--disabled":M}),L=b(x);return g.createElement("div",{className:(0,t.cx)(O,L.wrapper)},g.createElement("div",{className:"slate-query-field","aria-label":l.wl.components.QueryField.container},g.createElement(o.ML,{ref:B=>this.editor=B,schema:a.Yi,autoCorrect:!1,readOnly:this.props.disabled,onBlur:this.handleBlur,onClick:this.props.onClick,onChange:B=>{this.onChange(B.value,!1)},placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value})))}}const C=(0,u.HE)(E),b=S=>{const M=(0,P.getFocusStyles)(S);return{wrapper:t.css`
      &:focus-within {
        ${M}
      }
    `}}},5562:(H,T,e)=>{"use strict";e.d(T,{dP:()=>m,o5:()=>l});var t=e(14016),n=e(68404),c=e(37556),s=e(68183),r=e(37951),g=e(26202),f=e(44342),o=e(64319);const l=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],a=class extends n.PureComponent{constructor(h){super(h),this.onChangeSelect=y=>{const{onIntervalChanged:v}=this.props;v&&y.value!=null&&v(y.value)}}getVariant(){return this.props.isLive?"primary":this.props.isLoading?"destructive":this.props.primary?"primary":this.props.isOnCanvas?"canvas":"default"}render(){const{onRefresh:h,intervals:y,tooltip:v,value:i,text:u,isLoading:P,noIntervalPicker:E,width:C}=this.props,b=i||"",S=this.getVariant(),M=p({intervals:y}),x=M.find(({value:U})=>U===b),O=d(a.offOption.value);let L=x||O;L.label===O.label&&(L={value:""});const B=L.ariaLabel,w=(0,r.t)("refresh-picker.aria-label.duration-selected","Choose refresh time interval with current interval {{durationAriaLabel}} selected",{durationAriaLabel:B}),R=(0,r.t)("refresh-picker.aria-label.choose-interval","Auto refresh turned off. Choose refresh time interval"),A=L.value===""?R:w;return n.createElement(g.h,{className:"refresh-picker"},n.createElement(o.h,{"aria-label":u,tooltip:v,onClick:h,variant:S,icon:P?"fa fa-spinner":"sync",style:C?{width:C}:void 0,"data-testid":s.wl.components.RefreshPicker.runButtonV2},u),!E&&n.createElement(f.d,{value:L,options:M,onChange:this.onChangeSelect,variant:S,title:(0,r.t)("refresh-picker.select-button.auto-refresh","Set auto refresh interval"),"data-testid":s.wl.components.RefreshPicker.intervalButtonV2,"aria-label":A}))}};let m=a;m.offOption={label:"Off",value:"",ariaLabel:"Turn off auto refresh"},m.liveOption={label:"Live",value:"LIVE",ariaLabel:"Turn on live streaming"},m.isLive=h=>h===a.liveOption.value;function d(h){return h===m.liveOption.value?{label:(0,r.t)("refresh-picker.live-option.label","Live"),value:"LIVE",ariaLabel:(0,r.t)("refresh-picker.live-option.aria-label","Turn on live streaming")}:{label:(0,r.t)("refresh-picker.off-option.label","Off"),value:"",ariaLabel:(0,r.t)("refresh-picker.off-option.aria-label","Turn off auto refresh")}}function p({intervals:h=l}={}){const y=h.map(v=>{const i=(0,c.RA)(v),u=(0,t.Z)(i);return{label:v,value:v,ariaLabel:u}});return y.unshift(d(m.offOption.value)),y}},39856:(H,T,e)=>{"use strict";e.d(T,{D:()=>c});var t=e(68404),n=e(8928);function c({component:s,content:r,...g}){return t.createElement(s||"span",{dangerouslySetInnerHTML:{__html:n.QX.sanitize(r)},...g})}},34517:(H,T,e)=>{"use strict";e.d(T,{c:()=>o});var t=e(52423),n=e(82897),c=e.n(n),s=e(68404),r=e(31403),g=e(95569);const f=()=>({noRadiusInput:t.css`
      border-bottom-right-radius: 0 !important;
      border-top-right-radius: 0 !important;
    `,noRadiusButton:t.css`
      border-bottom-left-radius: 0 !important;
      border-top-left-radius: 0 !important;
    `}),o=({label:l="Password",labelWidth:a,inputWidth:m=12,onReset:d,isConfigured:p,tooltip:h,placeholder:y="Password",interactive:v,...i})=>{const u=f();return s.createElement(g.W,{label:l,tooltip:h,interactive:v,labelWidth:a,inputEl:p?s.createElement(s.Fragment,null,s.createElement("input",{type:"text",className:(0,t.cx)(`gf-form-input width-${m}`,u.noRadiusInput),disabled:!0,value:"configured",...(0,n.omit)(i,"value")}),s.createElement(r.zx,{onClick:d,variant:"secondary",type:"button"},"Reset")):s.createElement("input",{type:"password",className:`gf-form-input width-${m}`,placeholder:y,...i})})};o.displayName="SecretFormField"},52953:(H,T,e)=>{"use strict";e.d(T,{m4:()=>f});var t=e(68404),n=e(31403),c=e(46967),s=e(52081);const r="configured",g="Reset",f=({isConfigured:o,onReset:l,...a})=>t.createElement(s.Lh,null,!o&&t.createElement(c.I,{...a,type:"password"}),o&&t.createElement(c.I,{...a,type:"text",disabled:!0,value:r}),o&&t.createElement(n.zx,{onClick:l,variant:"secondary"},g))},70862:(H,T,e)=>{"use strict";e.d(T,{m:()=>t.m4});var t=e(52953)},30810:(H,T,e)=>{"use strict";e.d(T,{Zk:()=>a});var t=e(52423),n=e(68404),c=e(72648),s=e(31403),r=e(52081),g=e(97379);const f="configured",o="Reset",l=m=>({configuredStyle:t.css`
      min-height: ${m.spacing(m.components.height.md)};
      padding-top: ${m.spacing(.5)};
      resize: none;
    `}),a=({isConfigured:m,onReset:d,...p})=>{const h=(0,c.wW)(l);return n.createElement(r.Lh,null,!m&&n.createElement(g.K,{...p}),m&&n.createElement(g.K,{...p,rows:1,disabled:!0,value:f,className:(0,t.cx)(h.configuredStyle)}),m&&n.createElement(s.zx,{onClick:d,variant:"secondary"},o))}},88892:(H,T,e)=>{"use strict";e.d(T,{Z:()=>t.Zk});var t=e(30810)},70044:(H,T,e)=>{"use strict";e.d(T,{X:()=>a});var t=e(52423),n=e(82897),c=e.n(n),s=e(68404),r=e(72648),g=e(77117),f=e(97924),o=e(28318),l=e(2357);function a({options:m,value:d,onChange:p,Component:h,className:y,allowCustomValue:v,allowEmptyValue:i,placeholder:u,disabled:P,inputMinWidth:E,inputPlaceholder:C,onExpandedChange:b,autofocus:S=!1,...M}){const[x,O,L,B]=(0,o._)(S,b),w=E?Math.max(E,O):O,R=(0,r.wW)(f.N);if(!L){const A=(0,n.isObject)(d)?d.label:d;return s.createElement(x,{disabled:P,Component:h||s.createElement(g.W,{className:(0,t.cx)(R.segment,{[R.queryPlaceholder]:u!==void 0&&!d,[R.disabled]:P},y)},A||u)})}return s.createElement(l.V,{...M,value:d&&!(0,n.isObject)(d)?{value:d}:d,placeholder:C,options:m,width:w,onClickOutside:()=>B(!1),allowCustomValue:v,allowEmptyValue:i,onChange:A=>{B(!1),p(A)}})}},68118:(H,T,e)=>{"use strict";e.d(T,{V:()=>m});var t=e(52423),n=e(82897),c=e.n(n),s=e(68404),r=e(671),g=e(72648),f=e(77117),o=e(2357),l=e(97924),a=e(28318);function m({value:p,onChange:h,loadOptions:y,reloadOptionsOnChange:v=!1,Component:i,className:u,allowCustomValue:P,allowEmptyValue:E,disabled:C,placeholder:b,inputMinWidth:S,inputPlaceholder:M,autofocus:x=!1,onExpandedChange:O,noOptionMessageHandler:L=d,...B}){const[w,R]=(0,r.Z)(y,[y]),[A,U,I,N]=(0,a._)(x,O),F=S?Math.max(S,U):U,D=(0,g.wW)(l.N);if(!I){const Y=(0,n.isObject)(p)?p.label:p;return s.createElement(A,{onClick:v?void 0:R,disabled:C,Component:i||s.createElement(f.W,{className:(0,t.cx)(D.segment,{[D.queryPlaceholder]:b!==void 0&&!p,[D.disabled]:C},u)},Y||b)})}return s.createElement(o.V,{...B,value:p&&!(0,n.isObject)(p)?{value:p}:p,placeholder:M,options:w.value??[],loadOptions:v?R:void 0,width:F,noOptionsMessage:L(w),allowCustomValue:P,allowEmptyValue:E,onClickOutside:()=>{N(!1)},onChange:Y=>{N(!1),h(Y)}})}function d(p){return p.loading?"Loading options...":p.error?"Failed to load options":!Array.isArray(p.value)||p.value.length===0?"No options found":""}},58564:(H,T,e)=>{"use strict";e.d(T,{X:()=>a});var t=e(52423),n=e(68404),c=e(92787),s=e(72648),r=e(4176),g=e(77117),f=e(97924),o=e(28318);const l=14;function a({value:m,onChange:d,Component:p,className:h,placeholder:y,inputPlaceholder:v,disabled:i,autofocus:u=!1,onExpandedChange:P,...E}){const C=(0,n.useRef)(null),[b,S]=(0,n.useState)(m),[M,x]=(0,n.useState)((0,r.X1)((m||"").toString(),l).width),[O,,L,B]=(0,o._)(u,P),w=(0,s.wW)(f.N);if((0,c.Z)(C,()=>{B(!1),d(b)}),!L)return n.createElement(O,{disabled:i,Component:p||n.createElement(g.W,{className:(0,t.cx)(w.segment,{[w.queryPlaceholder]:y!==void 0&&!b,[w.disabled]:i},h)},m||y)});const R=t.css`
    width: ${Math.max(M+20,32)}px;
  `;return n.createElement("input",{...E,ref:C,autoFocus:!0,className:(0,t.cx)("gf-form gf-form-input",R),value:b,placeholder:v,onChange:A=>{const{width:U}=(0,r.X1)(A.target.value,l);x(U),S(A.target.value)},onBlur:()=>{B(!1),d(b)},onKeyDown:A=>{[13,27].includes(A.keyCode)&&(B(!1),d(b))}})}},30991:(H,T,e)=>{"use strict";e.d(T,{f:()=>g});var t=e(52423),n=e(68404),c=e(72648),s=e(11543),r=e(77117);const g=({label:o,htmlFor:l,children:a,fill:m})=>{const d=(0,c.wW)(f);return n.createElement(n.Fragment,null,n.createElement(s.Z,null,n.createElement(r.W,{htmlFor:l,width:12,className:d.label},o),a,m&&n.createElement("div",{className:d.fill},n.createElement(r.W,null,""))))},f=o=>({label:t.css`
    color: ${o.colors.primary.text};
  `,fill:t.css`
    flex-grow: 1;
    margin-bottom: ${o.spacing(.5)};
  `})},2357:(H,T,e)=>{"use strict";e.d(T,{V:()=>s});var t=e(68404),n=e(72648),c=e(53217);function s({value:r,placeholder:g="",options:f=[],onChange:o,onClickOutside:l,loadOptions:a=void 0,width:m,noOptionsMessage:d="",allowCustomValue:p=!1,allowEmptyValue:h=!1,...y}){const v=(0,t.useRef)(null),i=(0,n.l4)();let u=m>0?m/i.spacing.gridSize:void 0,P,E={};return a?(P=c.qb,E={loadOptions:a,defaultOptions:!0}):P=c.Ph,t.createElement("div",{...y,ref:v},t.createElement(P,{width:u,noOptionsMessage:d,placeholder:g,autoFocus:!0,isOpen:!0,onChange:o,options:f,value:r,closeMenuOnSelect:!1,onCloseMenu:()=>{if(v&&v.current){const C=v.current.querySelector('input[id^="react-select-"]');C&&(C.value||h)?o({value:C.value,label:C.value}):l()}},allowCustomValue:p,...E}))}},97924:(H,T,e)=>{"use strict";e.d(T,{N:()=>n});var t=e(52423);const n=c=>{const s="v1"in c?c.v1.palette:c.palette;return{segment:t.css`
      cursor: pointer;
      width: auto;
    `,queryPlaceholder:t.css`
      color: ${s.gray2};
    `,disabled:t.css`
      cursor: not-allowed;
      opacity: 0.65;
      box-shadow: none;
    `}}},28318:(H,T,e)=>{"use strict";e.d(T,{_:()=>s});var t=e(68404),n=e(72648),c=e(31403);const s=(r,g)=>{const f=(0,t.useRef)(null),o=(0,n.wW)(c.gN),[l,a]=(0,t.useState)(r),[m,d]=(0,t.useState)(0),p=y=>{a(y),g&&g(y)};return[({Component:y,onClick:v,disabled:i})=>t.createElement("button",{type:"button",className:o,ref:f,disabled:i,onClick:()=>{p(!0),f&&f.current&&d(f.current.clientWidth*1.25),v?.()}},y),m,l,p]}},62997:(H,T,e)=>{"use strict";e.d(T,{m:()=>c});var t=e(68404),n=e(39904);const c=({isOpen:s})=>{const r=s?"search":"angle-down",g=s?"sm":"md";return t.createElement(n.J,{name:r,size:g})}},53217:(H,T,e)=>{"use strict";e.d(T,{M8:()=>se,qb:()=>le,gY:()=>ee,NU:()=>re,Ph:()=>me,eI:()=>S,LT:()=>pe});var t=e(68404),n=e(37826),c=e(30250),s=e(5105),r=e(83238),g=e(72648),f=e(39904),o=e(67487),l=e(62997),a=e(52423),m=e(46967);const d=t.forwardRef((Q,G)=>{const{children:q}=Q,X=(0,g.l4)(),de=(0,m.H)({theme:X,invalid:!1});return t.createElement("div",{className:(0,a.cx)(de.suffix,a.css`
          position: relative;
        `),ref:G},q)});d.displayName="IndicatorsContainer";var p=e(7804),h=e(73267);const y=(0,p.B)((Q,G,q)=>{const X=(0,m.H)({theme:Q,invalid:G});return{input:(0,a.cx)((0,h.nf)(Q),a.css`
        width: 100%;
        max-width: 100%;
        display: flex;
        flex-direction: row;
        align-items: center;
        flex-wrap: wrap;
        justify-content: space-between;
        padding-right: 0;
        position: relative;
        box-sizing: border-box;
      `,q&&a.css`
          padding-left: 0;
        `),prefix:(0,a.cx)(X.prefix,a.css`
        position: relative;
      `)}}),v=t.forwardRef(function({focused:G,invalid:q,disabled:X,children:de,innerProps:Be,prefix:ke,...He},ue){const Oe=(0,g.l4)(),Fe=y(Oe,q,!!ke);return t.createElement("div",{className:Fe.input,...Be,ref:ue},ke&&t.createElement("div",{className:(0,a.cx)(Fe.prefix)},ke),de)});var i=e(8180),u=e(27501);const P=({innerProps:Q,children:G})=>{const q=(0,g.l4)(),X=(0,u.D)(q);return t.createElement("div",{...Q,className:X.multiValueContainer},G)},E=({children:Q,innerProps:G})=>{const q=(0,g.l4)(),X=(0,u.D)(q);return t.createElement(i.h,{...G,name:"times",size:"sm",className:X.multiValueRemove})};var C=e(8887),b=e(85419);const S=Q=>{const{isDisabled:G,isFocused:q,children:X,selectProps:{invalid:de=!1}}=Q,Be=(0,g.l4)(),ke=M(Be,q,G,de);return t.createElement(C.c.SelectContainer,{...Q,className:(0,a.cx)(ke.wrapper,Q.className)},X)},M=(0,p.B)((Q,G,q,X)=>{const de=(0,m.H)({theme:Q,invalid:X});return{wrapper:(0,a.cx)(de.wrapper,(0,h.RK)(Q,X),G&&a.css`
            ${(0,b.focusCss)(Q.v1)}
          `,q&&de.inputDisabled,a.css`
          position: relative;
          box-sizing: border-box;
          /* The display property is set by the styles prop in SelectBase because it's dependant on the width prop  */
          flex-direction: row;
          flex-wrap: wrap;
          align-items: stretch;
          justify-content: space-between;

          min-height: 32px;
          height: auto;
          max-width: 100%;

          /* Input padding is applied to the InputControl so the menu is aligned correctly */
          padding: 0;
          cursor: ${q?"not-allowed":"pointer"};
        `)}});var x=e(82897),O=e(75478),L=e(43565),B=e(68226);const w=({children:Q,maxHeight:G,innerRef:q,innerProps:X})=>{const de=(0,g.l4)(),Be=(0,u.D)(de);return t.createElement("div",{...X,className:Be.menu,style:{maxHeight:G},"aria-label":"Select options menu"},t.createElement(B.$,{scrollRefCallback:q,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0},Q))};w.displayName="SelectMenu";const R=37,A=7,U=({children:Q,maxHeight:G,options:q,getValue:X})=>{const de=(0,g.l4)(),Be=(0,u.D)(de),[ke]=X(),ue=(ke?q.findIndex(we=>we.value===ke.value):0)*R;if(!Array.isArray(Q))return null;const Fe=((0,x.max)(q.map(we=>we.label?.length))??0)*A,Ie=Math.min(q.length*R,G);return t.createElement(O.t7,{className:Be.menu,height:Ie,width:Fe,"aria-label":"Select options menu",itemCount:Q.length,itemSize:R,initialScrollOffset:ue},({index:we,style:Re})=>t.createElement("div",{style:{...Re,overflow:"hidden"}},Q[we]))};U.displayName="VirtualizedSelectMenu";const I=({children:Q,data:G,innerProps:q,innerRef:X,isFocused:de,isSelected:Be,renderOptionLabel:ke})=>{const He=(0,g.l4)(),ue=(0,u.D)(He),Oe=G.icon?(0,L.iJ)(G.icon):void 0;return t.createElement("div",{ref:X,className:(0,a.cx)(ue.option,de&&ue.optionFocused,Be&&ue.optionSelected,G.isDisabled&&ue.optionDisabled),...q,"aria-label":"Select option",title:G.title},Oe&&t.createElement(f.J,{name:Oe,className:ue.optionIcon}),G.imgUrl&&t.createElement("img",{className:ue.optionImage,src:G.imgUrl,alt:G.label||G.value}),t.createElement("div",{className:ue.optionBody},t.createElement("span",null,ke?ke(G):Q),G.description&&t.createElement("div",{className:ue.optionDescription},G.description),G.component&&t.createElement(G.component,null)))};I.displayName="SelectMenuOptions";var N=e(874),F=e(24901);class D extends t.Component{render(){const{children:G}=this.props,{selectProps:q}=this.props;if(q&&Array.isArray(G)&&Array.isArray(G[0])&&q.maxVisibleValues!==void 0&&!(q.showAllSelectedWhenOpen&&q.menuIsOpen)){const[X,...de]=G,Be=X.slice(0,q.maxVisibleValues);return this.renderContainer([Be,...de])}return this.renderContainer(G)}renderContainer(G){const{isMulti:q,theme:X}=this.props,de=(0,u.D)(X),Be=(0,a.cx)(de.valueContainer,q&&de.valueContainerMulti);return t.createElement("div",{className:Be},G)}}const Y=(0,g.HE)(D);var j=e(54897);const K=(Q,G)=>{if(Array.isArray(Q)){const q=Q.filter(Boolean);return q?.length?q:void 0}if(typeof Q=="object")return[Q];if(typeof Q=="string"||typeof Q=="number"){const q=z(Q,G);if(q)return[q]}},z=(Q,G)=>{for(const q of G)if("options"in q){let X=z(Q,q.options);if(X)return X}else if("value"in q&&q.value===Q)return q;return null},Z=Q=>Q.map(({description:G,...q})=>q),ae=Q=>{const{maxVisibleValues:G,selectedValuesCount:q,menuIsOpen:X,showAllSelectedWhenOpen:de}=Q;return G!==void 0&&q>G&&!(de&&X)?t.createElement("span",{key:"excess-values",id:"excess-values"},"(+",q-G,")"):null},J=Q=>{const{children:G,innerProps:q,selectProps:{menuIsOpen:X,onMenuClose:de,onMenuOpen:Be},isFocused:ke,isMulti:He,getValue:ue,innerRef:Oe}=Q,Fe=Q.selectProps;return Fe.renderControl?t.createElement(Fe.renderControl,{isOpen:X,value:He?ue():ue()[0],ref:Oe,onClick:X?de:Be,onBlur:de,disabled:!!Fe.disabled,invalid:!!Fe.invalid}):t.createElement(v,{ref:Oe,innerProps:q,prefix:Fe.prefix,focused:ke,invalid:!!Fe.invalid,disabled:!!Fe.disabled},G)};function oe({allowCustomValue:Q=!1,allowCreateWhileLoading:G=!1,"aria-label":q,autoFocus:X=!1,backspaceRemovesValue:de=!0,cacheOptions:Be,className:ke,closeMenuOnSelect:He=!0,components:ue,createOptionPosition:Oe="last",defaultOptions:Fe,defaultValue:Ie,disabled:we=!1,filterOption:Re,formatCreateLabel:_e,getOptionLabel:et,getOptionValue:qe,inputValue:Je,invalid:lt,isClearable:at=!1,id:Xe,isLoading:gt=!1,isMulti:ot=!1,inputId:Ye,isOpen:mt,isOptionDisabled:ce,isSearchable:be=!0,loadOptions:Te,loadingMessage:Ke="Loading options...",maxMenuHeight:ge=300,minMenuHeight:Me,maxVisibleValues:ye,menuPlacement:fe="auto",menuPosition:he,menuShouldPortal:De=!0,noOptionsMessage:Ae="No options found",onBlur:Ne,onChange:Ze,onCloseMenu:Se,onCreateOption:Ue,onInputChange:Qe,onKeyDown:pt,onOpenMenu:bt,onFocus:yt,openMenuOnFocus:Mt=!1,options:At=[],placeholder:Pt="Choose",prefix:rn,renderControl:Fn,showAllSelectedWhenOpen:kn=!0,tabSelectsValue:Jn=!0,value:qn,virtualized:Ut=!1,width:ut,isValidNewOption:nt,formatOptionLabel:vt}){const ht=(0,g.l4)(),It=(0,u.D)(ht),Ft=(0,t.useRef)(null),[en,sn]=(0,t.useState)(!1),Mn=(0,j.O)(ht,ut);(0,t.useEffect)(()=>{if(Te&&mt&&Ft.current&&Ft.current.controlRef&&fe==="auto"){const pa=window.innerHeight-Ft.current.controlRef.getBoundingClientRect().bottom;sn(pa<ge)}},[ge,fe,Te,mt]);const En=(0,t.useCallback)((pa,va)=>{if(ot&&pa==null)return Ze([],va);Ze(pa,va)},[ot,Ze]);let yn=n.ZP;const Bn={};let ea={},Qn;if(ot&&Te)Qn=qn;else if(ot&&qn&&Array.isArray(qn)&&!Te)Qn=qn.map(pa=>z(pa.value??pa,At));else if(Te){const pa=Ie||qn;Qn=pa?[pa]:[]}else Qn=K(qn,At);const Kn={"aria-label":q,autoFocus:X,backspaceRemovesValue:de,captureMenuScroll:!1,closeMenuOnSelect:He,defaultValue:Ie,disabled:we,filterOption:Re,getOptionLabel:et,getOptionValue:qe,inputValue:Je,invalid:lt,isClearable:at,id:Xe,isDisabled:we,isLoading:gt,isMulti:ot,inputId:Ye,isOptionDisabled:ce,isSearchable:be,maxMenuHeight:ge,minMenuHeight:Me,maxVisibleValues:ye,menuIsOpen:mt,menuPlacement:fe==="auto"&&en?"top":fe,menuPosition:he,menuShouldBlockScroll:!0,menuPortalTarget:De&&typeof document<"u"?document.body:void 0,menuShouldScrollIntoView:!1,onBlur:Ne,onChange:En,onInputChange:Qe,onKeyDown:pt,onMenuClose:Se,onMenuOpen:bt,onFocus:yt,formatOptionLabel:vt,openMenuOnFocus:Mt,options:Ut?Z(At):At,placeholder:Pt,prefix:rn,renderControl:Fn,showAllSelectedWhenOpen:kn,tabSelectsValue:Jn,value:ot?Qn:Qn?.[0]};Q&&(yn=r.Z,Bn.allowCreateWhileLoading=G,Bn.formatCreateLabel=_e??Ee,Bn.onCreateOption=Ue,Bn.createOptionPosition=Oe,Bn.isValidNewOption=nt),Te&&(yn=Q?s.Z:c.Z,ea={loadOptions:Te,cacheOptions:Be,defaultOptions:Fe});const Ua=Ut?U:w;return t.createElement(t.Fragment,null,t.createElement(yn,{ref:Ft,components:{MenuList:Ua,Group:N.n,ValueContainer:Y,IndicatorsContainer(pa){const{selectProps:va}=pa,{value:za,showAllSelectedWhenOpen:ja,maxVisibleValues:Ea,menuIsOpen:ma}=va;if(Ea!==void 0){const Xa=za.length,Oa=[...pa.children];return Oa.splice(-1,0,ae({maxVisibleValues:Ea,selectedValuesCount:Xa,showAllSelectedWhenOpen:ja,menuIsOpen:ma})),t.createElement(d,{...pa},Oa)}return t.createElement(d,{...pa})},IndicatorSeparator(){return t.createElement(t.Fragment,null)},Control:J,Option:I,ClearIndicator(pa){const{clearValue:va}=pa;return t.createElement(f.J,{name:"times",role:"button","aria-label":"select-clear-value",className:It.singleValueRemove,onMouseDown:za=>{za.preventDefault(),za.stopPropagation(),va()}})},LoadingIndicator(){return t.createElement(o.$,{inline:!0})},LoadingMessage(){return t.createElement("div",{className:It.loadingMessage},Ke)},NoOptionsMessage(){return t.createElement("div",{className:It.loadingMessage,"aria-label":"No options provided"},Ae)},DropdownIndicator(pa){return t.createElement(l.m,{isOpen:pa.selectProps.menuIsOpen})},SingleValue(pa){return t.createElement(F.P,{...pa,disabled:we})},SelectContainer:S,MultiValueContainer:P,MultiValueRemove:E,...ue},styles:Mn,className:ke,...Kn,...Bn,...ea}))}function Ee(Q){return t.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center"}},t.createElement("div",null,Q),t.createElement("div",{style:{flexGrow:1}}),t.createElement("div",{className:"muted small",style:{display:"flex",gap:"8px",alignItems:"center"}},"Hit enter to add"))}function me(Q){return t.createElement(oe,{...Q})}function re(Q){return t.createElement(oe,{...Q,isMulti:!0})}function le(Q){return t.createElement(oe,{...Q})}function pe(Q){return t.createElement(oe,{virtualized:!0,...Q})}function ee(Q){return t.createElement(oe,{virtualized:!0,...Q})}function se(Q){return t.createElement(oe,{...Q,isMulti:!0})}},874:(H,T,e)=>{"use strict";e.d(T,{n:()=>o});var t=e(52423),n=e(68404),c=e(7804),s=e(72648),r=e(39904);const g=(0,c.B)(l=>({header:t.css`
      display: flex;
      align-items: center;
      justify-content: flex-start;
      justify-items: center;
      cursor: pointer;
      padding: 7px 10px;
      width: 100%;
      border-bottom: 1px solid ${l.colors.background.secondary};

      &:hover {
        color: ${l.colors.text.maxContrast};
      }
    `,label:t.css`
      flex-grow: 1;
    `,icon:t.css`
      padding-right: 2px;
    `}));class f extends n.PureComponent{constructor(){super(...arguments),this.state={expanded:!1},this.onToggleChildren=()=>{this.setState(a=>({expanded:!a.expanded}))}}componentDidMount(){if(this.props.data.expanded)this.setState({expanded:!0});else if(this.props.selectProps&&this.props.selectProps.value){const{value:a}=this.props.selectProps.value;a&&this.props.options.some(m=>m.value===a)&&this.setState({expanded:!0})}}componentDidUpdate(a){a.selectProps.inputValue!==""&&this.setState({expanded:!0})}render(){const{children:a,label:m,theme:d}=this.props,{expanded:p}=this.state,h=g(d);return n.createElement("div",null,n.createElement("div",{className:h.header,onClick:this.onToggleChildren},n.createElement("span",{className:h.label},m),n.createElement(r.J,{className:h.icon,name:p?"angle-up":"angle-down"})," "),p&&a)}}const o=(0,s.HE)(f)},24901:(H,T,e)=>{"use strict";e.d(T,{P:()=>a});var t=e(52423),n=e(68404),c=e(8887),s=e(72648);function r(d,p={}){const{duration:h=250,delay:y=250}=p,[v,i]=(0,n.useState)(d),u=(0,n.useRef)();return(0,n.useEffect)(()=>{let P;if(d)P=setTimeout(()=>{u.current=new Date,i(d)},y);else{const E=u.current?Date.now()-u.current.valueOf():0,C=()=>{u.current=void 0,i(d)};E>=h?C():P=setTimeout(C,h-E)}return()=>{P&&(clearTimeout(P),P=void 0)}},[d,h,y]),v}var g=e(67487),f=e(19801),o=e(41200);const l=d=>{const p=t.css`
    label: singleValue;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    box-sizing: border-box;
    max-width: 100%;
    grid-area: 1 / 1 / 2 / 3;
  `,h=t.css`
    width: 16px;
    height: 16px;
    display: inline-block;
    margin-right: 10px;
    position: relative;
    vertical-align: middle;
    overflow: hidden;
  `,y=t.css`
    width: 100%;
    height: 100%;
    position: absolute;
  `,v=t.css`
    color: ${d.colors.text.disabled};
  `,i=t.css`
    color: ${d.colors.text.disabled};
  `;return{singleValue:p,spinnerWrapper:h,spinnerIcon:y,disabled:v,isOpen:i}},a=d=>{const{children:p,data:h,isDisabled:y}=d,v=(0,s.wW)(l),i=r(h.loading||!1,{delay:250,duration:750});return n.createElement(c.c.SingleValue,{...d,className:(0,t.cx)(v.singleValue,y&&v.disabled,d.selectProps.menuIsOpen&&v.isOpen)},h.imgUrl?n.createElement(m,{loading:i,imgUrl:h.imgUrl,styles:v,alt:h.label??h.value}):n.createElement(o.R,{horizontal:!0,size:16,visible:i,duration:150},n.createElement("div",{className:v.spinnerWrapper},n.createElement(g.$,{className:v.spinnerIcon,inline:!0}))),!h.hideText&&p)},m=d=>n.createElement("div",{className:d.styles.spinnerWrapper},n.createElement(f.n,{duration:150,visible:d.loading},n.createElement(g.$,{className:d.styles.spinnerIcon,inline:!0})),n.createElement(f.n,{duration:150,visible:!d.loading},n.createElement("img",{className:d.styles.spinnerIcon,src:d.imgUrl,alt:d.alt})))},27501:(H,T,e)=>{"use strict";e.d(T,{D:()=>c});var t=e(52423),n=e(7804);const c=(0,n.B)(s=>({menu:t.css`
      label: grafana-select-menu;
      background: ${s.components.dropdown.background};
      box-shadow: ${s.shadows.z3};
      position: relative;
      min-width: 100%;
      z-index: 1;
    `,option:t.css`
      label: grafana-select-option;
      padding: 8px;
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;

      &:hover {
        background: ${s.colors.action.hover};
      }
    `,optionIcon:t.css`
      margin-right: ${s.spacing(1)};
    `,optionImage:t.css`
      label: grafana-select-option-image;
      width: 16px;
      margin-right: 10px;
    `,optionDescription:t.css`
      label: grafana-select-option-description;
      font-weight: normal;
      font-size: ${s.typography.size.sm};
      color: ${s.colors.text.secondary};
      white-space: normal;
      line-height: ${s.typography.body.lineHeight};
    `,optionBody:t.css`
      label: grafana-select-option-body;
      display: flex;
      font-weight: ${s.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,optionFocused:t.css`
      label: grafana-select-option-focused;
      background: ${s.colors.action.focus};
    `,optionSelected:t.css`
      background: ${s.colors.action.selected};
    `,optionDisabled:t.css`
      label: grafana-select-option-disabled;
      background-color: ${s.colors.action.disabledBackground};
      color: ${s.colors.action.disabledText};
      cursor: not-allowed;
    `,singleValue:t.css`
      label: grafana-select-single-value;
      color: ${s.components.input.text};
      grid-area: 1 / 1 / 2 / 3;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      box-sizing: border-box;
      max-width: 100%;
    `,valueContainer:t.css`
      label: grafana-select-value-container;
      align-items: center;
      display: grid;
      position: relative;
      box-sizing: border-box;
      flex: 1 1 0%;
      outline: none;
      overflow: hidden;
    `,valueContainerMulti:t.css`
      label: grafana-select-value-container-multi;
      flex-wrap: wrap;
      display: flex;
    `,loadingMessage:t.css`
      label: grafana-select-loading-message;
      padding: ${s.spacing(1)};
      text-align: center;
      width: 100%;
    `,multiValueContainer:t.css`
      label: grafana-select-multi-value-container;
      display: flex;
      align-items: center;
      line-height: 1;
      background: ${s.colors.background.secondary};
      border-radius: ${s.shape.borderRadius()};
      margin: ${s.spacing(.25,1,.25,0)};
      padding: ${s.spacing(.25,0,.25,1)};
      color: ${s.colors.text.primary};
      font-size: ${s.typography.size.sm};

      &:hover {
        background: ${s.colors.emphasize(s.colors.background.secondary)};
      }
    `,multiValueRemove:t.css`
      label: grafana-select-multi-value-remove;
      margin: ${s.spacing(0,.5)};
      cursor: pointer;
      svg {
        margin-bottom: 0;
      }
    `,singleValueRemove:t.css`
      cursor: pointer;
      &:hover {
        color: ${s.colors.text.primary};
      }
    `}))},54897:(H,T,e)=>{"use strict";e.d(T,{O:()=>c,Z:()=>n});var t=e(68404);function n(s){return{clearIndicator:()=>({}),container:()=>({}),control:()=>({}),dropdownIndicator:()=>({}),group:()=>({}),groupHeading:()=>({}),indicatorsContainer:()=>({}),indicatorSeparator:()=>({}),input:function(r){return{...r,color:"inherit",margin:0,padding:0,zIndex:1}},loadingIndicator:()=>({}),loadingMessage:()=>({}),menu:()=>({}),menuList:({maxHeight:r})=>({maxHeight:r}),multiValue:()=>({}),multiValueLabel:()=>({}),multiValueRemove:()=>({}),noOptionsMessage:()=>({}),option:()=>({}),placeholder:r=>({...r,color:s.colors.text.secondary}),singleValue:()=>({}),valueContainer:()=>({})}}function c(s,r){return(0,t.useMemo)(()=>({...n(s),menuPortal:g=>({...g,zIndex:s.zIndex.portal}),menu:({top:g,bottom:f,position:o})=>({top:g,bottom:f,position:o,minWidth:"100%",zIndex:s.zIndex.dropdown}),container:()=>({width:r?s.spacing(r):"100%",display:r==="auto"?"inline-flex":"flex"}),option:(g,f)=>({...g,opacity:f.isDisabled?.5:1})}),[s,r])}},60857:()=>{"use strict"},41490:(H,T,e)=>{"use strict";e.d(T,{F:()=>p});var t=e(82897),n=e.n(t),c=e(68404),s=e(96209),r=e(53786),g=e(3255),f=e(65243),o=e(13016),l=e(29236),a=e(29076),m=e(5562);function d(h){return{label:h,value:stringToMs(h)}}class p extends c.PureComponent{constructor(y){super(y),this.propsSubject=new s.x,this.subscription=null}componentDidMount(){this.subscription=this.propsSubject.pipe((0,o.w)(y=>m.dP.isLive(y.interval)?(0,r.of)({}):y.loading?g.C:(0,f.F)((0,a.e0)(y.interval))),(0,l.b)(()=>this.props.func())).subscribe(),this.propsSubject.next(this.props)}componentDidUpdate(y){m.dP.isLive(y.interval)&&m.dP.isLive(this.props.interval)||(0,t.isEqual)(y,this.props)||this.propsSubject.next(this.props)}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),this.propsSubject.unsubscribe()}render(){return null}}},76327:(H,T,e)=>{"use strict";e.d(T,{PR:()=>i,ZH:()=>m,rD:()=>p});var t=e(82897),n=e.n(t),c=e(21760),s=e(20251),r=e(24177),g=e(67008),f=e(66926),o=e(36998),l=e(58230);const a=["reduceOptions","orientation"];function m(u,P,E){let C=u.options;if(u.fieldConfig=u.fieldConfig||{defaults:{},overrides:[]},P==="singlestat"&&E.angular)return d(u,E);for(const b of a)E.hasOwnProperty(b)&&(C[b]=(0,t.cloneDeep)(E[b]));return C}function d(u,P){const E=P.angular,C=c.TB.getIfExists(E.valueName),b={reduceOptions:{calcs:[C?C.id:c.gz.mean]},orientation:s.wm.Horizontal},S={};if(E.format&&(S.unit=E.format),E.tableColumn&&(b.reduceOptions.fields=`/^${E.tableColumn}$/`),E.nullPointMode&&(S.nullValueMode=E.nullPointMode),E.nullText&&(S.noValue=E.nullText),(E.decimals||E.decimals===0)&&(S.decimals=E.decimals),E.thresholds&&E.colors){const x=E.thresholds.split(",").map(L=>Number(L.trim())),O=[];for(const L of E.colors){const B=O.length-1;B>=0?O.push({value:x[B],color:L}):O.push({value:-1/0,color:L})}S.thresholds={mode:r.H.Absolute,steps:O}}const M=(0,g.Jb)(E,S.thresholds);return M&&M.length&&(S.mappings=M),E.gauge&&E.gauge.show&&(S.min=E.gauge.minValue,S.max=E.gauge.maxValue),u.fieldConfig.defaults=S,b}function p(u){if(!u.options)return{};const P=parseFloat(u.pluginVersion||"6.1");let E=u.options;P<6.2&&(E=y(E)),P<6.3&&(E=h(E));const{fieldOptions:C}=E;if(P<6.6&&C){if(C&&C.override){const{override:M,...x}=E.fieldOptions;E={...E,fieldOptions:{...x,overrides:[]}}}let b=C?.defaults?.thresholds;b?delete C.defaults.thresholds:(b=C?.thresholds,delete C.thresholds),b&&(C.defaults.thresholds={mode:r.H.Absolute,steps:b});const{defaults:S}=C;S.color&&typeof S.color=="string"&&(S.color={mode:f.S.Fixed,fixedColor:S.color}),(0,o.gb)(S)}if(P<7&&(u.fieldConfig=u.fieldConfig||{defaults:{},overrides:[]},u.fieldConfig={defaults:C&&C.defaults?{...u.fieldConfig.defaults,...C.defaults}:u.fieldConfig.defaults,overrides:C&&C.overrides?[...u.fieldConfig.overrides,...C.overrides]:u.fieldConfig.overrides},C&&(E.reduceOptions={values:C.values,limit:C.limit,calcs:C.calcs}),delete E.fieldOptions),P<7.1){const b=u.fieldConfig.defaults.title;b!=null&&(u.fieldConfig.defaults.displayName=b,delete u.fieldConfig.defaults.title)}if(P<8){const b=u.fieldConfig?.defaults;let S=b?.unit;S==="percent"?((0,t.isNumber)(b.min)||(b.min=0),(0,t.isNumber)(b.max)||(b.max=100)):S==="percentunit"&&((0,t.isNumber)(b.min)||(b.min=0),(0,t.isNumber)(b.max)||(b.max=1))}return E}function h(u){const{fieldOptions:P}=u;if(!P)return u;const{mappings:E,...C}=u.fieldOptions;let b;return u.thresholds&&(b={mode:r.H.Absolute,steps:v(u.thresholds)}),{...u,fieldOptions:{...C,defaults:{...P.defaults,mappings:E,thresholds:b}}}}function y(u){const{valueOptions:P}=u;if(!P)return u;const E={},C={};if(E.mappings=u.valueMappings,E.thresholds=u.thresholds,E.defaults=C,C.unit=P.unit,C.decimals=P.decimals,P.stat){const S=c.TB.get(P.stat);S&&(E.calcs=[S.id])}C.min=u.minValue,C.max=u.maxValue;const b={...u,fieldOptions:E};return(0,t.omit)(b,"valueMappings","thresholds","valueOptions","minValue","maxValue")}function v(u){if(!u||!u.length)return;const P=u.map(E=>({value:E.value===null?-1/0:E.value,color:E.color}));return(0,l.bP)(P),P[0].value=-1/0,P}function i(u){return(0,g.Jb)(u)}},70161:(H,T,e)=>{"use strict";e.d(T,{PR:()=>t.PR,ZH:()=>t.ZH,rD:()=>t.rD});var t=e(76327)},97759:(H,T,e)=>{"use strict";e.d(T,{U:()=>m});var t=e(52423),n=e(78966),c=e(58275),s=e(68404),r=e(72648),g=e(66274);const f=d=>{const{value:p,children:h,visible:y,placement:v,tipFormatter:i,...u}=d,P=(0,s.useRef)(),E=(0,s.useRef)(null),C=(0,r.wW)(o);function b(){E.current!==null&&cancelAnimationFrame(E.current)}function S(){E.current=requestAnimationFrame(()=>{P.current?.forcePopupAlign?.()})}return(0,s.useEffect)(()=>(y?S():b(),b),[p,y]),s.createElement(g.Z,{overlayClassName:C.tooltip,placement:v,overlay:i??p,overlayInnerStyle:{minHeight:"auto"},ref:P,visible:y,...u},h)},o=d=>({tooltip:(0,t.css)({position:"absolute",display:"block",visibility:"visible",fontSize:d.typography.bodySmall.fontSize,opacity:.9,padding:3})}),l=f;var a=e(29571);const m=({min:d,max:p,onChange:h,onAfterChange:y,orientation:v="horizontal",reverse:i,step:u,formatTooltipResult:P,value:E,tooltipAlwaysVisible:C=!0})=>{const b=(0,s.useCallback)(B=>{h?.(typeof B=="number"?[B,B]:B)},[h]),S=(0,s.useCallback)(B=>{y?.(typeof B=="number"?[B,B]:B)},[y]),M=v==="horizontal",x=(0,r.l4)(),O=(0,a.W)(x,M),L=(B,w)=>s.createElement(l,{value:w.value,visible:C||w.dragging,tipFormatter:P,placement:M?"top":"right"},B);return s.createElement("div",{className:(0,t.cx)(O.container,O.slider)},s.createElement(n.Global,{styles:O.tooltip}),s.createElement(c.Z,{min:d,max:p,step:u,defaultValue:E,range:!0,onChange:b,onAfterChange:S,vertical:!M,reverse:i,handleRender:L}))};m.displayName="RangeSlider"},90330:(H,T,e)=>{"use strict";e.d(T,{i:()=>o});var t=e(52423),n=e(78966),c=e(58275),s=e(68404),r=e(72648),g=e(46967),f=e(29571);const o=({min:l,max:a,onChange:m,onAfterChange:d,orientation:p="horizontal",reverse:h,step:y,value:v,ariaLabelForHandle:i,marks:u,included:P})=>{const E=p==="horizontal",C=(0,r.l4)(),b=(0,f.W)(C,E,Boolean(u)),S=c.Z,[M,x]=(0,s.useState)(v??l),O=(0,s.useCallback)(U=>{const I=typeof U=="number"?U:U[0];x(I),m?.(I)},[x,m]),L=(0,s.useCallback)(U=>{let I=+U.target.value;Number.isNaN(I)&&(I=0),x(I),m&&m(I),d&&d(I)},[m,d]),B=(0,s.useCallback)(U=>{const I=+U.target.value;I>a?x(a):I<l&&x(l)},[a,l]),w=(0,s.useCallback)(U=>{const I=typeof U=="number"?U:U[0];d?.(I)},[d]),R=E?[]:[b.sliderInputVertical],A=E?[]:[b.sliderInputFieldVertical];return s.createElement("div",{className:(0,t.cx)(b.container,b.slider)},s.createElement(n.Global,{styles:b.tooltip}),s.createElement("div",{className:(0,t.cx)(b.sliderInput,...R)},s.createElement(S,{min:l,max:a,step:y,defaultValue:v,value:M,onChange:O,onAfterChange:w,vertical:!E,reverse:h,ariaLabelForHandle:i,marks:u,included:P}),s.createElement(g.I,{type:"text",className:(0,t.cx)(b.sliderInputField,...A),value:M,onChange:L,onBlur:B,min:l,max:a})))};o.displayName="Slider"},29571:(H,T,e)=>{"use strict";e.d(T,{W:()=>s});var t=e(52423),n=e(78966),c=e(7804);const s=(0,c.B)((r,g,f=!1)=>{const{spacing:o}=r,l=r.colors.border.strong,a=r.colors.primary.main,m=r.colors.primary.main,p=`box-shadow: 0px 0px 0px 6px ${r.colors.primary.transparent}`;return{container:t.css`
      width: 100%;
      margin: ${g?"inherit":`${o(1,3,1,1)}`};
      padding-bottom: ${g&&f?r.spacing(1):"inherit"};
      height: ${g?"auto":"100%"};
    `,slider:t.css`
      .rc-slider {
        display: flex;
        flex-grow: 1;
        margin-left: 7px; // half the size of the handle to align handle to the left on 0 value
      }
      .rc-slider-mark {
        top: ${r.spacing(1.75)};
      }
      .rc-slider-mark-text {
        color: ${r.colors.text.disabled};
        font-size: ${r.typography.bodySmall.fontSize};
      }
      .rc-slider-mark-text-active {
        color: ${r.colors.text.primary};
      }
      .rc-slider-handle {
        border: none;
        background-color: ${m};
        box-shadow: ${r.shadows.z1};
        cursor: pointer;
        opacity: 1;
      }

      .rc-slider-handle:hover,
      .rc-slider-handle:active,
      .rc-slider-handle-click-focused:focus {
        ${p};
      }

      // The triple class names is needed because that's the specificity used in the source css :(
      .rc-slider-handle-dragging.rc-slider-handle-dragging.rc-slider-handle-dragging,
      .rc-slider-handle:focus-visible {
        box-shadow: 0 0 0 5px ${r.colors.text.primary};
      }

      .rc-slider-dot,
      .rc-slider-dot-active {
        background-color: ${r.colors.text.primary};
        border-color: ${r.colors.text.primary};
      }

      .rc-slider-track {
        background-color: ${a};
      }
      .rc-slider-rail {
        background-color: ${l};
        cursor: pointer;
      }
    `,tooltip:n.css`
      body {
        .rc-slider-tooltip {
          cursor: grab;
          user-select: none;
          z-index: ${r.zIndex.tooltip};
        }

        .rc-slider-tooltip-inner {
          color: ${r.colors.text.primary};
          background-color: transparent !important;
          border-radius: 0;
          box-shadow: none;
        }

        .rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {
          display: none;
        }

        .rc-slider-tooltip-placement-top {
          padding: 0;
        }
      }
    `,sliderInput:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      width: 100%;
    `,sliderInputVertical:t.css`
      flex-direction: column;
      height: 100%;

      .rc-slider {
        margin: 0;
        order: 2;
      }
    `,sliderInputField:t.css`
      margin-left: ${r.spacing(3)};
      width: 60px;
      input {
        text-align: center;
      }
    `,sliderInputFieldVertical:t.css`
      margin: 0 0 ${r.spacing(3)} 0;
      order: 1;
    `}})},67307:(H,T,e)=>{"use strict";e.d(T,{b:()=>h});var t=e(82897),n=e(68404),c=e(38067),s=e(14582),r=e(425),g=e(40538),f=e(3200),o=e(13347),l=e(2445),a=e(44405),m=e(45778);function d(y,v){const i=y.y.values.length,u={...y.y.config,...v};return(0,m.w)({frame:{refId:"sparkline",fields:[y.x??a.r.newField(i),{...y.y,config:u}],length:i}})}const p={drawStyle:g.l8.Line,showPoints:g.Jp.Auto,axisPlacement:g.LB.Hidden};class h extends n.PureComponent{constructor(v){super(v);const i=d(v.sparkline,v.config);this.state={data:(0,l.Bj)(i,(0,l.i7)(i)),alignedDataFrame:i,configBuilder:this.prepareConfig(i)}}static getDerivedStateFromProps(v,i){const u=d(v.sparkline,v.config);return u?{...i,data:(0,l.Bj)(u,(0,l.i7)(u)),alignedDataFrame:u}:{...i}}componentDidUpdate(v,i){const{alignedDataFrame:u}=this.state;if(!u)return;let P=!1;v.sparkline!==this.props.sparkline?P=!(0,c.Ch)(this.state.alignedDataFrame,i.alignedDataFrame):P=!(0,t.isEqual)(v.config,this.props.config),P&&this.setState({configBuilder:this.prepareConfig(u)})}getYRange(v){let{min:i,max:u}=this.state.alignedDataFrame.fields[1].state?.range;return i===u?(i===0?u=100:(i=0,u*=2),[i,u]):[Math.max(i,v.config.min??-1/0),Math.min(u,v.config.max??1/0)]}prepareConfig(v){const{theme:i}=this.props,u=new o.U;u.setCursor({show:!1,x:!1,y:!1});const P=v.fields[0];u.addScale({scaleKey:"x",orientation:g.wN.Horizontal,direction:g.bQ.Right,isTime:!1,range:()=>{const{sparkline:E}=this.props;if(E.x){if(E.timeRange&&E.x.type===s.fS.time)return[E.timeRange.from.valueOf(),E.timeRange.to.valueOf()];const C=E.x.values;return[C.get(0),C.get(C.length-1)]}return[0,E.y.values.length-1]}}),u.addAxis({scaleKey:"x",theme:i,placement:g.LB.Hidden});for(let E=0;E<v.fields.length;E++){const C=v.fields[E],b=C.config,S={...p,...b.custom};if(C===P||C.type!==s.fS.number)continue;const M=b.unit||"__fixed";u.addScale({scaleKey:M,orientation:g.wN.Vertical,direction:g.bQ.Up,range:()=>this.getYRange(C)}),u.addAxis({scaleKey:M,theme:i,placement:g.LB.Hidden});const O=(0,r.fD)(C).getCalculator(C,i)(0,0),L=S.drawStyle===g.l8.Points?g.Jp.Always:S.showPoints;u.addSeries({pxAlign:!1,scaleKey:M,theme:i,drawStyle:S.drawStyle,lineColor:S.lineColor??O,lineWidth:S.lineWidth,lineInterpolation:S.lineInterpolation,showPoints:L,pointSize:S.pointSize,fillOpacity:S.fillOpacity,fillColor:S.fillColor??O})}return u}render(){const{data:v,configBuilder:i}=this.state,{width:u,height:P,sparkline:E}=this.props;return n.createElement(f.N,{data:v,config:i,width:u,height:P,timeRange:E.timeRange})}}},67487:(H,T,e)=>{"use strict";e.d(T,{$:()=>g});var t=e(52423),n=e(68404),c=e(7804),s=e(39904);const r=(0,c.B)((f,o)=>({wrapper:t.css`
      font-size: ${f}px;
      ${o?t.css`
            display: inline-block;
          `:""}
    `})),g=f=>{const{className:o,inline:l=!1,iconClassName:a,style:m,size:d=16}=f,p=r(d,l);return n.createElement("div",{"data-testid":"Spinner",style:m,className:(0,t.cx)(p.wrapper,o)},n.createElement(s.J,{className:(0,t.cx)("fa-spin",a),name:"fa fa-spinner"}))}},71294:(H,T,e)=>{"use strict";e.d(T,{m:()=>g});var t=e(82897),n=e.n(t),c=e(68404),s=e(21760),r=e(53217);class g extends c.PureComponent{constructor(){super(...arguments),this.checkInput=()=>{const{stats:o,allowMultiple:l,defaultStat:a,onChange:m}=this.props,d=s.TB.list(o);if(d.length!==o.length){const p=d.map(y=>y.id),h=(0,t.difference)(o,p);console.warn("Unknown stats",h,o),m(d.map(y=>y.id))}!l&&o.length>1&&(console.warn("Removing extra stat",o),m([o[0]])),a&&o.length<1&&m([a])},this.onSelectionChange=o=>{const{onChange:l}=this.props;Array.isArray(o)?l(o.map(a=>a.value)):l(o&&o.value?[o.value]:[])}}componentDidMount(){this.checkInput()}componentDidUpdate(o){this.checkInput()}render(){const{stats:o,allowMultiple:l,defaultStat:a,placeholder:m,className:d,menuPlacement:p,width:h,inputId:y}=this.props,v=s.TB.selectOptions(o);return c.createElement(r.Ph,{value:v.current,className:d,isClearable:!a,isMulti:l,width:h,isSearchable:!0,options:v.options,placeholder:m,onChange:this.onSelectionChange,menuPlacement:p,inputId:y})}}g.defaultProps={allowMultiple:!1}},8944:(H,T,e)=>{"use strict";e.d(T,{r:()=>l,x:()=>a});var t=e(52423),n=e(82897),c=e.n(n),s=e(68404),r=e(99227),g=e(72648),f=e(7804),o=e(85419);const l=s.forwardRef(({value:d,checked:p,onChange:h,id:y,label:v,disabled:i,...u},P)=>{p&&(0,r.d)("Switch","checked prop","value");const E=(0,g.l4)(),C=m(E),b=(0,s.useRef)(y||(0,n.uniqueId)("switch-"));return s.createElement("div",{className:(0,t.cx)(C.switch)},s.createElement("input",{type:"checkbox",disabled:i,checked:d,onChange:S=>{!i&&h?.(S)},id:b.current,...u,ref:P}),s.createElement("label",{htmlFor:b.current,"aria-label":v??"Toggle switch"}))});l.displayName="Switch";const a=s.forwardRef(({transparent:d,className:p,showLabel:h,label:y,value:v,id:i,...u},P)=>{const E=(0,g.l4)(),C=m(E,d);return s.createElement("div",{className:(0,t.cx)(C.inlineContainer,p,u.disabled&&C.disabled)},h&&s.createElement("label",{htmlFor:i,className:(0,t.cx)(C.inlineLabel,v&&C.inlineLabelEnabled,"inline-switch-label")},y),s.createElement(l,{...u,id:i,label:y,ref:P,value:v}))});a.displayName="Switch";const m=(0,f.B)((d,p)=>({switch:t.css`
      width: 32px;
      height: 16px;
      position: relative;

      input {
        opacity: 0;
        left: -100vw;
        z-index: -1000;
        position: absolute;

        &:disabled + label {
          background: ${d.colors.action.disabledBackground};
          cursor: not-allowed;
        }

        &:checked + label {
          background: ${d.colors.primary.main};
          border-color: ${d.colors.primary.main};

          &:hover {
            background: ${d.colors.primary.shade};
          }

          &::after {
            transform: translate3d(18px, -50%, 0);
            background: ${d.colors.primary.contrastText};
          }
        }

        &:focus + label,
        &:focus-visible + label {
          ${(0,o.getFocusStyles)(d)}
        }

        &:focus:not(:focus-visible) + label {
          ${(0,o.getMouseFocusStyles)(d)}
        }
      }

      label {
        width: 100%;
        height: 100%;
        cursor: pointer;
        border: none;
        border-radius: 50px;
        background: ${d.components.input.background};
        border: 1px solid ${d.components.input.borderColor};
        transition: all 0.3s ease;

        &:hover {
          border-color: ${d.components.input.borderHover};
        }

        &::after {
          position: absolute;
          display: block;
          content: '';
          width: 12px;
          height: 12px;
          border-radius: 6px;
          background: ${d.colors.text.secondary};
          box-shadow: ${d.shadows.z1};
          top: 50%;
          transform: translate3d(2px, -50%, 0);
          transition: transform 0.2s cubic-bezier(0.19, 1, 0.22, 1);
        }
      }
    `,inlineContainer:t.css`
      padding: ${d.spacing(0,1)};
      height: ${d.spacing(d.components.height.md)};
      display: inline-flex;
      align-items: center;
      background: ${p?"transparent":d.components.input.background};
      border: 1px solid ${p?"transparent":d.components.input.borderColor};
      border-radius: ${d.shape.borderRadius()};

      &:hover {
        border: 1px solid ${p?"transparent":d.components.input.borderHover};

        .inline-switch-label {
          color: ${d.colors.text.primary};
        }
      }
    `,disabled:t.css`
      background-color: rgba(204, 204, 220, 0.04);
      color: rgba(204, 204, 220, 0.6);
      border: 1px solid rgba(204, 204, 220, 0.04);
    `,inlineLabel:t.css`
      cursor: pointer;
      padding-right: ${d.spacing(1)};
      color: ${d.colors.text.secondary};
      white-space: nowrap;
    `,inlineLabelEnabled:t.css`
      color: ${d.colors.text.primary};
    `}))},18607:(H,T,e)=>{"use strict";e.d(T,{W:()=>m});var t=e(52423),n=e(68404),c=e(72142),s=e(79841),r=e(8180),g=e(68226),f=e(94893),o=e(7804),l=e(72648);const a=(0,o.B)(d=>({container:t.css`
      height: 100%;
    `,tabContent:t.css`
      padding: ${d.spacing(2)};
      background-color: ${d.colors.background.primary};
      height: calc(100% - ${d.components.menuTabs.height}px);
    `,close:t.css`
      position: absolute;
      right: 16px;
      top: 5px;
      cursor: pointer;
      font-size: ${d.typography.size.lg};
    `,tabs:t.css`
      padding-top: ${d.spacing(1)};
      border-color: ${d.colors.border.weak};
      ul {
        margin-left: ${d.spacing(2)};
      }
    `}));function m(d){const[p,h]=(0,n.useState)(d.tabs.some(C=>C.value===d.defaultTab)?d.defaultTab:d.tabs?.[0].value),y=C=>{h(C.value)},{tabs:v,onClose:i,closeIconTooltip:u}=d,P=(0,l.l4)(),E=a(P);return n.createElement("div",{className:E.container},n.createElement(c.J,{className:E.tabs},v.map(C=>n.createElement(s.O,{key:C.value,label:C.label,active:C.value===p,onChangeTab:()=>y(C),icon:C.icon})),n.createElement(r.h,{className:E.close,onClick:i,name:"times",title:u??"Close"})),n.createElement(g.$,{autoHeightMin:"100%"},n.createElement(f.I,{className:E.tabContent},v.find(C=>C.value===p)?.content)))}},89361:(H,T,e)=>{"use strict";e.d(T,{i:()=>g,c:()=>o});var t=e(68404),n=e(68183),c=e(52423);const s=l=>{const a=c.css`
    width: 100%;
    list-style: none;
  `,m=c.css`
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
  `;return l.value&&!Array.isArray(l.value)?t.createElement("span",null,l.value):l.value&&Array.isArray(l.value)&&l.value.length>0?t.createElement("ul",{className:a},l.value.map((d,p)=>{const h=Object.keys(d)[0];return t.createElement("li",{className:m,key:p},t.createElement("span",null,h,":"),t.createElement("span",null,d[h]))})):r},r=()=>t.createElement("span",null,"\xA0"),g=l=>{const{totalColumnsWidth:a,footerGroups:m,isPaginationVisible:d,tableStyles:p}=l,h=n.wl.components.Panels.Visualization.Table;return t.createElement("div",{style:{position:d?"relative":"absolute",width:a?`${a}px`:"100%",bottom:"0px"}},m.map(y=>{const{key:v,...i}=y.getFooterGroupProps();return t.createElement("div",{className:p.tfoot,...i,key:v,"data-testid":h.footer},y.headers.map(u=>f(u,p)))}))};function f(l,a){const m=l.getHeaderProps();return m?(m.style=m.style??{},m.style.position="absolute",m.style.justifyContent=l.justifyContent,t.createElement("div",{className:a.headerCell,...m},l.render("Footer"))):null}function o(l,a,m){if(a===void 0)return r;if(m){const d=a[l];return typeof d!="string"?r:s({value:[{Count:d}]})}return s({value:a[l]})}},88144:(H,T,e)=>{"use strict";e.d(T,{i:()=>ae});var t=e(68404),n=e(91742),c=e(75478),s=e(21760),r=e(72648),g=e(68226),f=e(78889),o=e(89361),l=e(68183),a=e(50622),m=e(39904),d=e(52423),p=e(56921),h=e(94437),y=e(52081),v=e(64353),i=e(8180),u=e(31403),P=e(14747),E=e(58255),C=e(7804);const b=28,S=b*5,M=({options:J,values:oe,caseSensitive:Ee,onChange:me})=>{const re=(0,r.l4)(),le=x(re),[pe,ee]=(0,t.useState)(""),se=(0,t.useMemo)(()=>new RegExp(pe,Ee?void 0:"i"),[pe,Ee]),Q=(0,t.useMemo)(()=>J.filter(Be=>Be.label===void 0?!1:se.test(Be.label)),[J,se]),G=re.spacing.gridSize,q=(0,t.useMemo)(()=>Math.min(Q.length*b,S)+G,[G,Q.length]),X=(0,t.useCallback)(Be=>{ee(Be)},[ee]),de=(0,t.useCallback)(Be=>ke=>{const He=ke.currentTarget.checked?oe.concat(Be):oe.filter(ue=>ue.value!==Be.value);me(He)},[me,oe]);return t.createElement(y.wc,{spacing:"md"},t.createElement(P.H,{placeholder:"Filter values",onChange:X,value:pe}),!Q.length&&t.createElement(v._,null,"No values"),Q.length&&t.createElement(c.t7,{height:q,itemCount:Q.length,itemSize:b,width:"100%",className:le.filterList},({index:Be,style:ke})=>{const He=Q[Be],{value:ue,label:Oe}=He,Fe=oe.find(Ie=>Ie.value===ue)!==void 0;return t.createElement("div",{className:le.filterListRow,style:ke,title:Oe},t.createElement(E.X,{value:Fe,label:Oe,onChange:de(He)}))}))},x=(0,C.B)(J=>({filterList:d.css`
    label: filterList;
  `,filterListRow:d.css`
    label: filterListRow;
    cursor: pointer;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding: ${J.spacing(.5)};

    :hover {
      background-color: ${J.colors.action.hover};
    }
  `}));var O=e(87388);const L=({column:{preFilteredRows:J,filterValue:oe,setFilter:Ee},onClose:me,field:re})=>{const le=(0,r.l4)(),pe=(0,t.useMemo)(()=>(0,O.AF)(J,re),[J,re]),ee=(0,t.useMemo)(()=>(0,O.mP)(pe),[pe]),se=(0,t.useMemo)(()=>(0,O.n0)(ee,oe),[ee,oe]),[Q,G]=(0,t.useState)(se),[q,X]=(0,t.useState)(!1),de=(0,t.useCallback)(Oe=>me(),[me]),Be=(0,t.useCallback)(Oe=>{const Fe=Q.length?Q:void 0;Ee(Fe),me()},[Ee,Q,me]),ke=(0,t.useCallback)(Oe=>{Ee(void 0),me()},[Ee,me]),He=(0,t.useMemo)(()=>oe!==void 0,[oe]),ue=(0,r.wW)(B);return t.createElement(h.L,{onClick:de,useCapture:!0},t.createElement("div",{className:(0,d.cx)(ue.filterContainer),onClick:w},t.createElement(y.wc,{spacing:"lg"},t.createElement(y.wc,{spacing:"xs"},t.createElement(y.Lh,{justify:"space-between",align:"center"},t.createElement(v._,{className:ue.label},"Filter by values:"),t.createElement(i.h,{name:"text-fields",tooltip:"Match case",style:{color:q?le.colors.text.link:le.colors.text.disabled},onClick:()=>{X(Oe=>!Oe)}})),t.createElement("div",{className:(0,d.cx)(ue.listDivider)}),t.createElement(M,{onChange:G,values:Q,options:ee,caseSensitive:q})),t.createElement(y.Lh,{spacing:"lg"},t.createElement(y.Lh,null,t.createElement(u.zx,{size:"sm",onClick:Be},"Ok"),t.createElement(u.zx,{size:"sm",variant:"secondary",onClick:de},"Cancel")),He&&t.createElement(y.Lh,null,t.createElement(u.zx,{fill:"text",size:"sm",onClick:ke},"Clear filter"))))))},B=J=>({filterContainer:d.css`
    label: filterContainer;
    width: 100%;
    min-width: 250px;
    height: 100%;
    max-height: 400px;
    background-color: ${J.colors.background.primary};
    border: 1px solid ${J.colors.border.medium};
    padding: ${J.spacing(2)};
    margin: ${J.spacing(1)} 0;
    box-shadow: 0px 0px 20px ${J.v1.palette.black};
    border-radius: ${J.spacing(.5)};
  `,listDivider:d.css`
    label: listDivider;
    width: 100%;
    border-top: 1px solid ${J.colors.border.medium};
    padding: ${J.spacing(.5,2)};
  `,label:d.css`
    margin-bottom: 0;
  `}),w=J=>{J.stopPropagation()},R=({column:J,field:oe,tableStyles:Ee})=>{const me=(0,t.useRef)(null),[re,le]=(0,t.useState)(!1),pe=(0,r.wW)(A),ee=(0,t.useMemo)(()=>Boolean(J.filterValue),[J.filterValue]),se=(0,t.useCallback)(()=>le(!0),[le]),Q=(0,t.useCallback)(()=>le(!1),[le]);return!oe||!oe.config.custom?.filterable?null:t.createElement("button",{className:(0,d.cx)(Ee.headerFilter,ee?pe.filterIconEnabled:pe.filterIconDisabled),ref:me,type:"button",onClick:se},t.createElement(m.J,{name:"filter"}),re&&me.current&&t.createElement(p.J,{content:t.createElement(L,{column:J,tableStyles:Ee,field:oe,onClose:Q}),placement:"bottom-start",referenceElement:me.current,show:!0}))},A=J=>({filterIconEnabled:d.css`
    label: filterIconEnabled;
    color: ${J.colors.primary.text};
  `,filterIconDisabled:d.css`
    label: filterIconDisabled;
    color: ${J.colors.text.disabled};
  `}),U=J=>{const{headerGroups:oe,showTypeIcons:Ee,tableStyles:me}=J,re=l.wl.components.Panels.Visualization.Table;return t.createElement("div",{role:"rowgroup",className:me.headerRow},oe.map(le=>{const{key:pe,...ee}=le.getHeaderGroupProps();return t.createElement("div",{className:me.thead,...ee,key:pe,"aria-label":re.header,role:"row"},le.headers.map((se,Q)=>I(se,me,Ee)))}))};function I(J,oe,Ee){const me=J.getHeaderProps(),re=J.field??null;return J.canResize&&(me.style.userSelect=J.isResizing?"none":"auto"),me.style.position="absolute",me.style.justifyContent=J.justifyContent,t.createElement("div",{className:oe.headerCell,...me,role:"columnheader"},J.canSort&&t.createElement(t.Fragment,null,t.createElement("button",{...J.getSortByToggleProps(),className:oe.headerCellLabel},Ee&&t.createElement(m.J,{name:(0,a.e7)(re),title:re?.type,size:"sm",className:oe.typeIcon}),t.createElement("div",null,J.render("Header")),J.isSorted&&(J.isSortedDesc?t.createElement(m.J,{size:"lg",name:"arrow-down",className:oe.sortIcon}):t.createElement(m.J,{name:"arrow-up",size:"lg",className:oe.sortIcon}))),J.canFilter&&t.createElement(R,{column:J,tableStyles:oe,field:re})),!J.canSort&&J.render("Header"),!J.canSort&&J.canFilter&&t.createElement(R,{column:J,tableStyles:oe,field:re}),J.canResize&&t.createElement("div",{...J.getResizerProps(),className:oe.resizeHandle}))}var N=e(35316);function F(J,oe){(0,t.useEffect)(()=>{const Ee=J.current?.querySelector(".track-vertical"),me=oe.current?.firstChild;me&&Ee&&(Ee?.remove(),me.querySelector(":scope > .track-vertical")?.remove(),me.append(Ee))})}function D(J,oe,Ee){(0,t.useEffect)(()=>{if(J.lastExpandedIndex!==void 0){oe.current?.resetAfterIndex(Math.max(J.lastExpandedIndex-1,0));return}},[J.lastExpandedIndex,J.toggleRowExpandedCounter,oe,Ee])}var Y=e(89890);function j({onColumnResize:J,onSortByChange:oe,data:Ee}){return(0,t.useCallback)((me,re)=>{switch(re.type){case"columnDoneResizing":if(J){const pe=me.columnResizing.headerIdWidths[0][0],ee=parseInt(pe,10),se=Math.round(me.columnResizing.columnWidths[pe]),Q=Ee.fields[ee];if(!Q)return me;const G=(0,Y.C)(Q,Ee);J(G,se)}case"toggleSortBy":if(oe){const le=[];for(const pe of me.sortBy){const ee=Ee.fields[parseInt(pe.id,10)];ee&&le.push({displayName:(0,Y.C)(ee,Ee),desc:pe.desc})}oe(le)}case"toggleRowExpanded":if(re.id)return{...me,lastExpandedIndex:parseInt(re.id,10),toggleRowExpandedCounter:me.toggleRowExpandedCounter+1}}return me},[Ee,J,oe])}function K(J,oe){const Ee={toggleRowExpandedCounter:0};if(J){Ee.sortBy=[];for(const me of J)for(const re of oe)re.Header===me.displayName&&Ee.sortBy.push({id:re.id,desc:me.desc})}return Ee}var z=e(12245);const Z=150,ae=(0,t.memo)(J=>{const{ariaLabel:oe,data:Ee,subData:me,height:re,maxHeight:le,onCellFilterAdded:pe,width:ee,columnMinWidth:se=Z,noHeader:Q,resizable:G=!0,initialSortBy:q,footerOptions:X,showTypeIcons:de,footerValues:Be,enablePagination:ke}=J,He=(0,t.useRef)(null),ue=(0,t.useRef)(null),Oe=(0,t.useRef)(null),Fe=(0,r.wW)(z.V),Ie=(0,r.l4)(),we=Q?0:Fe.rowHeight,[Re,_e]=(0,t.useState)(Be),et=(0,t.useMemo)(()=>{const yt=we;let Mt=0;if(!Re)return 0;for(const At of Re)Array.isArray(At)&&At.length>Mt&&(Mt=At.length);return Mt>1?yt*Mt:yt},[Re,we]),qe=(0,t.useMemo)(()=>Ee.fields.length?Array(Ee.length).fill(0):[],[Ee]),Je=Boolean(X?.countRows&&X.reducer&&X.reducer.length&&X.reducer[0]===s.gz.count),lt=(0,t.useMemo)(()=>(0,O.Pu)(Ee,ee,se,!!me?.length,Re,Je),[Ee,ee,se,Re,me,Je]),at=j(J),Xe=(0,t.useMemo)(()=>({columns:lt,data:qe,disableResizing:!G,stateReducer:at,initialState:K(q,lt),autoResetFilters:!1,sortTypes:{number:O.QT,"alphanumeric-insensitive":O.nl}}),[q,lt,qe,G,at]),{getTableProps:gt,headerGroups:ot,rows:Ye,prepareRow:mt,totalColumnsWidth:ce,footerGroups:be,page:Te,state:Ke,gotoPage:ge,setPageSize:Me,pageOptions:ye}=(0,n.useTable)(Xe,n.useFilters,n.useSortBy,n.useAbsoluteLayout,n.useResizeColumns,n.useExpanded,n.usePagination),fe=Ke;(0,t.useEffect)(()=>{X||_e(Be)},[Be,X]),(0,t.useEffect)(()=>{if(!X)return;if(!X.show){_e(void 0);return}const yt=(0,O.jB)(ot[0].headers,(0,O.KF)(Ye),X,Ie);if(Je){const Mt=new Array(yt.length).fill(void 0);Mt[0]=Ee.length.toString(),_e(Mt)}else _e(yt)},[X,Ie,Ke.filters,Ee]);let he=re-(we+et);ke&&(he-=Fe.cellHeight);const De=Math.round(he/Fe.rowHeight)-1,Ae=Object.keys(fe.expanded);if(Ae.length){const yt=Ae.reduce((Mt,At)=>{const Pt=me?.find(rn=>rn.meta?.custom?.parentRowIndex===parseInt(At,10))?.length;return Pt?Mt+Fe.rowHeight*(Pt+1):Mt},0);he<yt&&(he=Math.min(he+yt,le||Number.MAX_SAFE_INTEGER))}(0,t.useEffect)(()=>{De<=0||Me(De)},[De,Me]),D(fe,He,Ee),F(Oe,ue);const Ne=t.useCallback(yt=>{if(Ke.expanded[yt]){const Mt=me?.find(At=>At.meta?.custom?.parentRowIndex===yt);if(Mt){const At=!!Mt.meta?.custom?.noHeader,Pt={height:Fe.rowHeight*(Mt.length+(At?0:1)),background:Ie.colors.emphasize(Ie.colors.background.primary,.015),paddingLeft:O.bc,position:"absolute",bottom:0};return t.createElement("div",{style:Pt},t.createElement(ae,{data:Mt,width:ee-O.bc,height:Fe.rowHeight*(Mt.length+1),noHeader:At}))}}return null},[Ke.expanded,me,Fe.rowHeight,Ie.colors,ee]),Ze=t.useCallback(({index:yt,style:Mt})=>{let At=Ye[yt];return ke&&(At=Te[yt]),mt(At),t.createElement("div",{...At.getRowProps({style:Mt}),className:Fe.row},Ne(yt),At.cells.map((Pt,rn)=>t.createElement(N.p,{key:rn,tableStyles:Fe,cell:Pt,onCellFilterAdded:pe,columnIndex:rn,columnCount:At.cells.length})))},[pe,Te,ke,mt,Ye,Fe,Ne]),Se=(0,t.useCallback)(yt=>{ge(yt-1)},[ge]),Ue=ke?Te.length:Ye.length;let Qe=null;if(ke){const yt=Ke.pageIndex*Ke.pageSize+1;let Mt=yt+Ke.pageSize-1;const At=ee<550;Mt>Ee.length&&(Mt=Ee.length),Qe=t.createElement("div",{className:Fe.paginationWrapper},At?null:t.createElement("div",{className:Fe.paginationItem}),t.createElement("div",{className:Fe.paginationCenterItem},t.createElement(f.t,{currentPage:Ke.pageIndex+1,numberOfPages:ye.length,showSmallVersion:At,onNavigate:Se})),At?null:t.createElement("div",{className:Fe.paginationSummary},yt," - ",Mt," of ",Ee.length," rows"))}const pt=yt=>{if(Ke.expanded[yt]){const Mt=me?.find(At=>At.meta?.custom?.parentRowIndex===yt);if(Mt){const At=!!Mt.meta?.custom?.noHeader;return Fe.rowHeight*(Mt.length+1+(At?0:1))}}return Fe.rowHeight},bt=yt=>{const{scrollTop:Mt}=yt.target;He.current!==null&&He.current.scrollTo(Mt)};return t.createElement("div",{...gt(),className:Fe.table,"aria-label":oe,role:"table",ref:ue},t.createElement(g.$,{hideVerticalTrack:!0},t.createElement("div",{className:Fe.tableContentWrapper(ce)},!Q&&t.createElement(U,{headerGroups:ot,showTypeIcons:de,tableStyles:Fe}),Ue>0?t.createElement("div",{ref:Oe},t.createElement(g.$,{onScroll:bt,hideHorizontalTrack:!0},t.createElement(c.S_,{height:he,itemCount:Ue,itemSize:pt,width:"100%",ref:He,style:{overflow:void 0}},Ze))):t.createElement("div",{style:{height:re-we},className:Fe.noData},"No data"),Re&&t.createElement(o.i,{isPaginationVisible:Boolean(ke),footerValues:Re,footerGroups:be,totalColumnsWidth:ce,tableStyles:Fe}))),Qe)});ae.displayName="Table"},35316:(H,T,e)=>{"use strict";e.d(T,{p:()=>t});const t=({cell:n,tableStyles:c,onCellFilterAdded:s,columnIndex:r,columnCount:g,userProps:f})=>{const o=n.getCellProps(),l=n.column.field;if(!l?.display)return null;o.style&&(o.style.minWidth=o.style.width,o.style.justifyContent=n.column.justifyContent);let a=(n.column.width??24)-c.cellPadding*2;return n.render("Cell",{field:l,tableStyles:c,onCellFilterAdded:s,cellProps:o,innerWidth:a,userProps:f})}},12245:(H,T,e)=>{"use strict";e.d(T,{V:()=>n});var t=e(52423);const n=c=>{const s=c.colors.border.weak,r=c.colors.primary.border,g=6,f=c.typography.body.lineHeight,o=14,l=g*2+o*f,a=l+2,m=c.colors.emphasize(c.colors.background.primary,.03),d=(p,h,y)=>{const v={margin:c.spacing(0,-.5,0,.5)},i={position:"absolute",top:0,right:0,margin:"auto"},u={overflow:"visible",width:"auto !important",boxShadow:`0 0 2px ${c.colors.primary.main}`,background:h??m,zIndex:1};return t.css`
      label: ${y?"cellContainerOverflow":"cellContainerNoOverflow"};
      padding: ${g}px;
      width: 100%;
      // Cell height need to account for row border
      height: ${a-1}px;
      display: flex;
      align-items: center;
      border-right: 1px solid ${s};

      ${p?`color: ${p};`:""};
      ${h?`background: ${h};`:""};
      background-clip: padding-box;

      &:last-child:not(:only-child) {
        border-right: none;
      }

      &:hover {
        ${y&&u};
        .cellActions {
          visibility: visible;
          opacity: 1;
          width: auto;
        }
      }

      a {
        color: inherit;
      }

      .cellActions {
        display: flex;
        ${y?v:i}
        visibility: hidden;
        opacity: 0;
        width: 0;
        align-items: center;
        height: 100%;
        padding: ${c.spacing(1,.5,1,.5)};
        background: ${h?"none":c.colors.emphasize(c.colors.background.primary,.03)};

        svg {
          color: ${p};
        }
      }

      .cellActionsLeft {
        right: auto !important;
        left: 0;
      }

      .cellActionsTransparent {
        background: none;
      }
    `};return{theme:c,cellHeight:l,buildCellContainerStyle:d,cellPadding:g,cellHeightInner:o*f,rowHeight:a,table:t.css`
      height: 100%;
      width: 100%;
      overflow: auto;
      display: flex;
      flex-direction: column;
    `,thead:t.css`
      label: thead;
      height: ${a}px;
      overflow-y: auto;
      overflow-x: hidden;
      position: relative;
    `,tfoot:t.css`
      label: tfoot;
      height: ${a}px;
      border-top: 1px solid ${s};
      overflow-y: auto;
      overflow-x: hidden;
      position: relative;
    `,headerRow:t.css`
      label: row;
      border-bottom: 1px solid ${s};
    `,headerCell:t.css`
      padding: ${g}px;
      overflow: hidden;
      white-space: nowrap;
      display: flex;
      font-weight: ${c.typography.fontWeightMedium};

      &:last-child {
        border-right: none;
      }
    `,headerCellLabel:t.css`
      border: none;
      padding: 0;
      background: inherit;
      cursor: pointer;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      font-weight: ${c.typography.fontWeightMedium};
      display: flex;
      align-items: center;
      margin-right: ${c.spacing(.5)};

      &:hover {
        text-decoration: underline;
        color: ${c.colors.text.link};
      }
    `,cellContainer:d(void 0,void 0,!0),cellContainerNoOverflow:d(void 0,void 0,!1),cellText:t.css`
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
    `,sortIcon:t.css`
      margin-left: ${c.spacing(.5)};
    `,cellLink:t.css`
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      color: ${c.colors.text.link};
      font-weight: ${c.typography.fontWeightMedium};
      &:hover {
        text-decoration: underline;
      }
    `,cellLinkForColoredCell:t.css`
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      font-weight: ${c.typography.fontWeightMedium};
      text-decoration: underline;
    `,imageCellLink:t.css`
      cursor: pointer;
      overflow: hidden;
      height: 100%;
    `,headerFilter:t.css`
      background: transparent;
      border: none;
      label: headerFilter;
      padding: 0;
    `,paginationWrapper:t.css`
      display: flex;
      height: ${l}px;
      justify-content: center;
      align-items: center;
      width: 100%;
      li {
        margin-bottom: 0;
      }
    `,paginationItem:t.css`
      flex: 20%;
    `,paginationCenterItem:t.css`
      flex: 100%;
      display: flex;
      justify-content: center;
    `,paginationSummary:t.css`
      color: ${c.colors.text.secondary};
      font-size: ${c.typography.bodySmall.fontSize};
      display: flex;
      justify-content: flex-end;
      flex: 20%;
      padding-right: ${c.spacing(1)};
    `,tableContentWrapper:p=>{const h=p!==void 0?`${p}px`:"100%";return t.css`
        label: tableContentWrapper;
        width: ${h};
        display: flex;
        flex-direction: column;
      `},row:t.css`
      label: row;
      border-bottom: 1px solid ${s};

      &:hover {
        background-color: ${m};
      }

      &:last-child {
        border-bottom: 0;
      }
    `,imageCell:t.css`
      height: 100%;
    `,resizeHandle:t.css`
      label: resizeHandle;
      cursor: col-resize !important;
      display: inline-block;
      background: ${r};
      opacity: 0;
      transition: opacity 0.2s ease-in-out;
      width: 8px;
      height: 100%;
      position: absolute;
      right: -4px;
      border-radius: 3px;
      top: 0;
      touch-action: none;

      &:hover {
        opacity: 1;
      }
    `,typeIcon:t.css`
      margin-right: ${c.spacing(1)};
      color: ${c.colors.text.secondary};
    `,noData:t.css`
      align-items: center;
      display: flex;
      height: 100%;
      justify-content: center;
      width: 100%;
    `,expanderCell:t.css`
      display: flex;
      flex-direction: column;
      justify-content: center;
      height: ${a}px;
      cursor: pointer;
    `}}},13580:(H,T,e)=>{"use strict";e.d(T,{PT:()=>t,tE:()=>n});const t="=",n="!="},87388:(H,T,e)=>{"use strict";e.d(T,{bc:()=>oe,AF:()=>pe,KF:()=>He,S_:()=>Oe,Pu:()=>me,n0:()=>G,jB:()=>Be,E4:()=>Ee,q7:()=>Fe,nl:()=>q,QT:()=>X,mP:()=>se});var t=e(82897),n=e(58635),c=e(14582),s=e(89890),r=e(20112),g=e(21760),f=e(19695),o=e(36512),l=e(40538),a=e(68404),m=e(24177),d=e(59309),p=e(20251),h=e(19670),y=e(18543);const v={mode:m.H.Absolute,steps:[{color:"blue",value:-1/0},{color:"green",value:20}]},i=Ie=>{const{field:we,innerWidth:Re,tableStyles:_e,cell:et,cellProps:qe,row:Je}=Ie;let lt=(0,d.xD)(we,!1);lt.thresholds||(lt={...lt,thresholds:v});const at=we.display(et.value);let Xe=l.QH.Gradient;const gt=Oe(we);gt.type===l.h2.Gauge&&(Xe=gt.mode??l.QH.Gradient);const ot=()=>(0,t.isFunction)(we.getLinks)?we.getLinks({valueRowIndex:Je.index}):[],Ye=Boolean(ot().length),mt=ce=>{const{openMenu:be,targetClassName:Te}=ce;return a.createElement(h.xf,{width:Re,height:_e.cellHeightInner,field:lt,display:we.display,text:{valueSize:14},value:at,orientation:p.wm.Horizontal,theme:_e.theme,onClick:be,className:Te,itemSpacing:1,lcdCellWidth:8,displayMode:Xe})};return a.createElement("div",{...qe,className:_e.cellContainer},Ye&&a.createElement(y.V,{links:ot,style:{display:"flex",width:"100%"}},ce=>mt(ce)),!Ye&&a.createElement(h.xf,{width:Re,height:_e.cellHeightInner,field:lt,display:we.display,text:{valueSize:14},value:at,orientation:p.wm.Horizontal,theme:_e.theme,itemSpacing:1,lcdCellWidth:8,displayMode:Xe}))};var u=e(52423),P=e(35008),E=e.n(P),C=e(72648),b=e(30901),S=e(16514),M=e(31403),x=e(8180),O=e(52081),L=e(94599),B=e(35029),w=e(9405);function R({value:Ie,onDismiss:we,mode:Re}){let _e=Ie;if((0,t.isString)(Ie))try{Ie=JSON.parse(Ie)}catch{}else _e=JSON.stringify(Ie,null," ");let et=_e;return Re==="code"&&(et=JSON.stringify(Ie,null," ")),a.createElement(B.u,{onDismiss:we,isOpen:!0,title:"Inspect value"},Re==="code"?a.createElement(w.p,{width:"100%",height:500,language:"json",showLineNumbers:!0,showMiniMap:(et&&et.length)>100,value:et,readOnly:!0}):a.createElement("pre",null,et),a.createElement(B.u.ButtonRow,null,a.createElement(L.m,{icon:"copy",getText:()=>et},"Copy to Clipboard")))}var A=e(13580);function U({field:Ie,cell:we,previewMode:Re,onCellFilterAdded:_e}){const[et,qe]=(0,a.useState)(!1),Je=Ee(Ie)==="flex-end",lt=Boolean(Ie.config.filterable)&&we.value!==void 0,at=Boolean(Ie.config.custom?.inspect),Xe={size:"sm",tooltipPlacement:"top"},gt=(0,a.useCallback)(Ye=>{_e&&_e({key:Ie.name,operator:A.PT,value:we.value})},[we,Ie,_e]),ot=(0,a.useCallback)(Ye=>{_e&&_e({key:Ie.name,operator:A.tE,value:we.value})},[we,Ie,_e]);return a.createElement(a.Fragment,null,a.createElement("div",{className:`cellActions ${Je?"cellActionsLeft":""}`},a.createElement(O.Lh,{spacing:"xs"},at&&a.createElement(x.h,{name:"eye",tooltip:"Inspect value",onClick:()=>{qe(!0)},...Xe}),lt&&a.createElement(x.h,{name:"search-plus",onClick:gt,tooltip:"Filter for value",...Xe}),lt&&a.createElement(x.h,{name:"search-minus",onClick:ot,tooltip:"Filter out value",...Xe}))),et&&a.createElement(R,{mode:Re,value:we.value,onDismiss:()=>{qe(!1)}}))}const I=Ie=>{const{field:we,cell:Re,tableStyles:_e,row:et,cellProps:qe}=Ie,Je=Boolean(we.config.custom?.inspect),lt=we.display(Re.value);let at;a.isValidElement(Re.value)?at=Re.value:at=(0,r.zc)(lt);const gt=we.config.filterable&&Re.value!==void 0||Je,ot=Oe(we),Ye=N(_e,ot,lt,Je),mt=Boolean((0,b.i)(we,et)?.length),ce=(0,C.wW)(M._7);return a.createElement("div",{...qe,className:Ye},!mt&&a.createElement("div",{className:_e.cellText},at),mt&&a.createElement(y.V,{links:()=>(0,b.i)(we,et)||[]},be=>{const Te=a.createElement("div",{className:F(_e,ot,be.targetClassName)},at);return be.openMenu?a.createElement(M.zx,{className:(0,u.cx)(ce),onClick:be.openMenu},Te):Te}),gt&&a.createElement(U,{...Ie,previewMode:"text"}))};function N(Ie,we,Re,_e=!1){const et=Ie.theme.isDark?1:-.7;let qe,Je;if(we.type===l.h2.ColorText)qe=Re.color;else if(we.type===l.h2.ColorBackground){if(we.mode===l.v7.Basic)qe=(0,S.bM)(Re.color,Ie.theme.isDark),Je=E()(Re.color).toRgbString();else if(we.mode===l.v7.Gradient){const lt=E()(Re.color).darken(10*et).spin(5);qe=(0,S.bM)(Re.color,Ie.theme.isDark),Je=`linear-gradient(120deg, ${lt.toRgbString()}, ${Re.color})`}}return qe!==void 0||Je!==void 0?Ie.buildCellContainerStyle(qe,Je,!_e):_e?Ie.cellContainerNoOverflow:Ie.cellContainer}function F(Ie,we,Re){return we.type===l.h2.Auto?(0,u.cx)(Ie.cellLink,Re):(0,u.cx)(Ie.cellLinkForColoredCell,Re)}var D=e(89361),Y=e(77495),j=e(50913);function K(Ie){const{cell:we,tableStyles:Re,cellProps:_e}=Ie;let et="";return we.value instanceof j.Z?et=new Y.Z().writeGeometry(we.value,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}):we.value!=null&&(et=`${we.value}`),a.createElement("div",{..._e,className:Re.cellContainer},a.createElement("div",{className:Re.cellText,style:{fontFamily:"monospace"}},et))}const z=Ie=>{const{field:we,cell:Re,tableStyles:_e,row:et,cellProps:qe}=Ie,Je=we.display(Re.value),lt=Boolean((0,b.i)(we,et)?.length),at=(0,C.wW)(M._7);return a.createElement("div",{...qe,className:_e.cellContainer},!lt&&a.createElement("img",{src:Je.text,className:_e.imageCell,alt:""}),lt&&a.createElement(y.V,{style:{height:"100%"},links:()=>(0,b.i)(we,et)||[]},Xe=>{const gt=a.createElement("img",{src:Je.text,className:_e.imageCell,alt:""});return Xe.openMenu?a.createElement(M.zx,{className:(0,u.cx)(at),onClick:Xe.openMenu},gt):gt}))};function Z(Ie){const{cell:we,tableStyles:Re,cellProps:_e,field:et,row:qe}=Ie,Je=Boolean(et.config.custom?.inspect),lt=u.css`
    cursor: pointer;
    font-family: monospace;
  `;let at=we.value,Xe=at;if((0,t.isString)(at))try{at=JSON.parse(at)}catch{}else Xe=JSON.stringify(at,null," ");const gt=Boolean((0,b.i)(et,qe)?.length),ot=(0,C.wW)(M._7);return a.createElement("div",{..._e,className:Je?Re.cellContainerNoOverflow:Re.cellContainer},a.createElement("div",{className:(0,u.cx)(Re.cellText,lt)},!gt&&a.createElement("div",{className:Re.cellText},Xe),gt&&a.createElement(y.V,{links:()=>(0,b.i)(et,qe)||[]},Ye=>Ye.openMenu?a.createElement(M.zx,{className:(0,u.cx)(ot),onClick:Ye.openMenu},Xe):a.createElement(a.Fragment,null,Xe))),Je&&a.createElement(U,{...Ie,previewMode:"code"}))}var ae=e(39904);function J({row:Ie,tableStyles:we}){return a.createElement("div",{className:we.expanderCell,...Ie.getToggleRowExpandedProps()},a.createElement(ae.J,{"aria-label":Ie.isExpanded?"Collapse row":"Expand row",name:Ie.isExpanded?"angle-down":"angle-right",size:"xl"}))}const oe=50;function Ee(Ie){if(!Ie)return"flex-start";if(Ie.config.custom)switch(Ie.config.custom.align){case"right":return"flex-end";case"left":return"flex-start";case"center":return"center"}return Ie.type===c.fS.number?"flex-end":"flex-start"}function me(Ie,we,Re,_e,et,qe){const Je=[];let lt=0;_e&&(Je.push({Header:()=>null,id:"expander",Cell:J,width:oe,minWidth:oe,filter:(Xe,gt,ot)=>[],justifyContent:"left",field:Ie.fields[0],sortType:"basic"}),we-=oe);for(const[Xe,gt]of Ie.fields.entries()){const ot=gt.config.custom||{};if(ot.hidden)continue;ot.width?we-=ot.width:lt++;const Ye=ce=>{switch(ce){case c.fS.number:return"number";case c.fS.time:return"basic";default:return"alphanumeric-insensitive"}},mt=re(ot.cellOptions?.type,gt);Je.push({Cell:mt,id:Xe.toString(),field:gt,Header:(0,s.C)(gt,Ie),accessor:(ce,be)=>gt.values.get(be),sortType:Ye(gt.type),width:ot.width,minWidth:ot.minWidth??Re,filter:(0,n.Z)(le(gt)),justifyContent:Ee(gt),Footer:(0,D.c)(Xe,et,qe)})}let at=we/lt;for(let Xe=lt;Xe>0;Xe--)for(const gt of Je)!gt.width&&gt.minWidth>at&&(gt.width=gt.minWidth,we-=gt.width,lt-=1,at=we/lt);for(const Xe of Je)Xe.width||(Xe.width=at),Xe.minWidth=50;return Je}function re(Ie,we){switch(Ie){case l.h2.ColorText:case l.h2.ColorBackground:return I;case l.h2.Image:return z;case l.h2.Gauge:return i;case l.h2.JSONView:return Z}return we.type===c.fS.geo?K:we.type===c.fS.other?Z:I}function le(Ie){return function(we,Re,_e){return we.length===0||!_e||!Ie?we:we.filter(et=>{if(!et.values.hasOwnProperty(Re))return!1;const qe=ee(et,Ie);return _e.find(Je=>Je.value===qe)!==void 0})}}function pe(Ie,we){if(!we||Ie.length===0)return{};const Re={};for(let _e=0;_e<Ie.length;_e++){const et=ee(Ie[_e],we);Re[et||"(Blanks)"]=et}return Re}function ee(Ie,we){if(!we||!Ie)return"";const Re=we.values.get(Ie.index),_e=we.display?we.display(Re):Re;return we.display?(0,r.zc)(_e):_e}function se(Ie){return Object.keys(Ie).reduce((we,Re)=>we.concat({value:Ie[Re],label:Re}),[]).sort(Q)}function Q(Ie,we){return Ie.label===void 0&&we.label===void 0?0:Ie.label===void 0&&we.label!==void 0?-1:Ie.label!==void 0&&we.label===void 0?1:Ie.label<we.label?-1:Ie.label>we.label?1:0}function G(Ie,we){return we?Ie.filter(Re=>we.some(_e=>_e.value===Re.value)):[]}function q(Ie,we,Re){return String(Ie.values[Re]).localeCompare(String(we.values[Re]),void 0,{sensitivity:"base"})}function X(Ie,we,Re){const _e=de(Ie.values[Re]),et=de(we.values[Re]);return _e===et?0:_e>et?1:-1}function de(Ie){return Ie==null||Ie===""||isNaN(Ie)?Number.NEGATIVE_INFINITY:typeof Ie=="number"?Ie:Number(Ie)}function Be(Ie,we,Re,_e){return Ie.map((et,qe)=>{if(et.field.type!==c.fS.number)return qe===0&&Re.reducer&&Re.reducer.length>0?g.TB.get(Re.reducer[0]).name:void 0;let Je=(0,t.clone)(et.field);return Je.values=new f.G(we[qe]),Je.state=void 0,et.field=Je,Re.fields&&Re.fields.length>0?Re.fields.find(at=>at===et.field.name)?ke(et.field,Re.reducer,_e):void 0:ke(et.field,Re.reducer||[],_e)})}function ke(Ie,we,Re){const _e=Ie.display??(0,o.U)({field:Ie,theme:Re}),et=we[0],qe=(0,g.Kx)({field:Ie,reducers:we})[et];return(0,r.zc)(_e(qe))}function He(Ie){const we=[];for(const Re in Ie)for(const[_e,et]of Object.entries(Ie[Re].values))we[_e]===void 0&&(we[_e]=[]),we[_e].push(et);return we}const ue={type:l.h2.Auto};function Oe(Ie){return Ie.config.custom?.displayMode?Fe(Ie.config.custom?.displayMode):Ie.config.custom?.cellOptions?Ie.config.custom.cellOptions:ue}function Fe(Ie){switch(Ie){case"basic":case"gradient-gauge":case"lcd-gauge":let we=l.QH.Basic;return Ie==="gradient-gauge"?we=l.QH.Gradient:Ie==="lcd-gauge"&&(we=l.QH.Lcd),{type:l.h2.Gauge,mode:we};case"color-background":case"color-background-solid":let Re=l.v7.Basic;return Ie==="color-background"&&(Re=l.v7.Gradient),{type:l.h2.ColorBackground,mode:Re};default:return{type:Ie}}}},91363:(H,T,e)=>{"use strict";e.d(T,{w:()=>m});var t=e(52423),n=e(82897),c=e.n(n),s=e(68404),r=e(89230),g=e(72648),f=e(7804),o=e(39904),l=e(97379);class a extends s.PureComponent{constructor(h){super(h),this.readCSV=(0,n.debounce)(()=>{const{config:i}=this.props,{text:u}=this.state;this.setState({data:(0,r.uP)(u,{config:i})})},150),this.onTextChange=i=>{this.setState({text:i.target.value})};const{text:y,config:v}=h;this.state={text:y,data:(0,r.uP)(y,{config:v})}}componentDidUpdate(h,y){const{text:v}=this.state;(v!==y.text||this.props.config!==h.config)&&this.readCSV(),this.props.text!==h.text&&this.props.text!==v&&this.setState({text:this.props.text}),this.state.data!==y.data&&this.props.onSeriesParsed(this.state.data,this.state.text)}render(){const{width:h,height:y,theme:v}=this.props,{data:i}=this.state,u=d(v);return s.createElement("div",{className:u.tableInputCsv},s.createElement(l.K,{style:{width:h,height:y},placeholder:"Enter CSV here...",value:this.state.text,onChange:this.onTextChange,className:u.textarea}),i&&s.createElement("footer",{className:u.footer},i.map((P,E)=>s.createElement("span",{key:E},"Rows:",P.length,", Columns:",P.fields.length," \xA0",s.createElement(o.J,{name:"check-circle"})))))}}const m=(0,g.HE)(a);m.displayName="TableInputCSV";const d=(0,f.B)(p=>({tableInputCsv:t.css`
      position: relative;
    `,textarea:t.css`
      height: 100%;
      width: 100%;
    `,footer:t.css`
      position: absolute;
      bottom: 15px;
      right: 15px;
      border: 1px solid #222;
      background: ${p.colors.success.main};
      padding: 1px ${p.spacing(.5)};
      font-size: 80%;
    `}))},51275:(H,T,e)=>{"use strict";e.d(T,{A:()=>f});var t=e(52423),n=e(68404),c=e(20112),s=e(7804),r=e(72648);const g=(0,s.B)(o=>({counter:t.css`
      label: counter;
      margin-left: ${o.spacing(1)};
      border-radius: ${o.spacing(3)};
      background-color: ${o.colors.action.hover};
      padding: ${o.spacing(.25,1)};
      color: ${o.colors.text.secondary};
      font-weight: ${o.typography.fontWeightMedium};
      font-size: ${o.typography.size.sm};
    `})),f=({value:o})=>{const l=(0,r.wW)(g);return n.createElement("span",{className:l.counter},(0,c.SP)(o,0).text)}},79841:(H,T,e)=>{"use strict";e.d(T,{O:()=>l});var t=e(52423),n=e(68404),c=e(68183),s=e(72648),r=e(7804),g=e(85419),f=e(39904),o=e(51275);const l=n.forwardRef(({label:m,active:d,icon:p,onChangeTab:h,counter:y,suffix:v,className:i,href:u,...P},E)=>{const C=(0,s.l4)(),b=a(C),S=()=>n.createElement(n.Fragment,null,p&&n.createElement(f.J,{name:p}),m,typeof y=="number"&&n.createElement(o.A,{value:y}),v&&n.createElement(v,{className:b.suffix})),M=(0,t.cx)(b.link,d?b.activeStyle:b.notActive);return n.createElement("div",{className:b.item},n.createElement("a",{href:u||"#",className:M,...P,onClick:h,"aria-label":P["aria-label"]||c.wl.components.Tab.title(m),role:"tab","aria-selected":d,ref:E},S()))});l.displayName="Tab";const a=(0,r.B)(m=>({item:t.css`
      list-style: none;
      position: relative;
      display: flex;
    `,link:t.css`
      color: ${m.colors.text.secondary};
      padding: ${m.spacing(1.5,2,1)};
      display: block;
      height: 100%;
      svg {
        margin-right: ${m.spacing(1)};
      }

      &:focus-visible {
+        ${(0,g.getFocusStyles)(m)}
      }
    `,notActive:t.css`
      a:hover,
      &:hover,
      &:focus {
        color: ${m.colors.text.primary};

        &::before {
          display: block;
          content: ' ';
          position: absolute;
          left: 0;
          right: 0;
          height: 4px;
          border-radius: 2px;
          bottom: 0px;
          background: ${m.colors.action.hover};
        }
      }
    `,activeStyle:t.css`
      label: activeTabStyle;
      color: ${m.colors.text.primary};
      overflow: hidden;
      font-weight: ${m.typography.fontWeightMedium};

      a {
        color: ${m.colors.text.primary};
      }

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 4px;
        border-radius: 2px;
        bottom: 0px;
        background-image: ${m.colors.gradients.brandHorizontal} !important;
      }
    `,suffix:t.css`
      margin-left: ${m.spacing(1)};
    `}))},94893:(H,T,e)=>{"use strict";e.d(T,{I:()=>g});var t=e(52423),n=e(68404),c=e(7804),s=e(72648);const r=(0,c.B)(f=>({tabContent:t.css`
      background: ${f.colors.background.primary};
    `})),g=({children:f,className:o,...l})=>{const a=(0,s.l4)(),m=r(a);return n.createElement("div",{...l,className:(0,t.cx)(m.tabContent,o)},f)}},72142:(H,T,e)=>{"use strict";e.d(T,{J:()=>g});var t=e(52423),n=e(68404),c=e(7804),s=e(72648);const r=(0,c.B)((f,o=!1)=>({tabsWrapper:!o&&t.css`
        border-bottom: 1px solid ${f.colors.border.weak};
      `,tabs:t.css`
      position: relative;
      display: flex;
      height: ${f.components.menuTabs.height}px;
    `})),g=n.forwardRef(({children:f,className:o,hideBorder:l},a)=>{const m=(0,s.l4)(),d=r(m,l);return n.createElement("div",{className:(0,t.cx)(d.tabsWrapper,o),ref:a},n.createElement("div",{className:d.tabs,role:"tablist"},f))});g.displayName="TabsBar"},13026:(H,T,e)=>{"use strict";e.d(T,{L:()=>f});var t=e(52423),n=e(68404),c=e(68183),s=e(72648),r=e(39904),g=e(51275);const f=n.forwardRef(({label:l,active:a,icon:m,counter:d,className:p,suffix:h,onChangeTab:y,href:v,...i},u)=>{const P=(0,s.wW)(o),E=()=>n.createElement(n.Fragment,null,m&&n.createElement(r.J,{name:m}),l,typeof d=="number"&&n.createElement(g.A,{value:d}),h&&n.createElement(h,{className:P.suffix})),C=(0,t.cx)(P.link,a&&P.activeStyle);return n.createElement("a",{href:v,className:C,...i,onClick:y,"aria-label":i["aria-label"]||c.wl.components.Tab.title(l),role:"tab","aria-selected":a,ref:u},E())});f.displayName="Tab";const o=l=>({link:t.css`
      padding: 6px 12px;
      display: block;
      height: 100%;
      cursor: pointer;
      position: relative;

      color: ${l.colors.text.primary};

      svg {
        margin-right: ${l.spacing(1)};
      }

      &:hover,
      &:focus {
        text-decoration: underline;
      }
    `,activeStyle:t.css`
      label: activeTabStyle;
      color: ${l.colors.text.maxContrast};
      font-weight: 500;
      overflow: hidden;

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        width: 4px;
        bottom: 2px;
        top: 2px;
        border-radius: 2px;
        background-image: linear-gradient(0deg, #f05a28 30%, #fbca0a 99%);
      }
    `,suffix:t.css`
      margin-left: ${l.spacing(1)};
    `})},34719:(H,T,e)=>{"use strict";e.d(T,{V:()=>g});var t=e(52423),n=e(68404),c=e(72648),s=e(3385),r=e(39904);const g=(0,n.forwardRef)(({name:o,onClick:l,icon:a,className:m,colorIndex:d,...p},h)=>{const y=(0,c.l4)(),v=f(y,o,d),i=P=>{P.preventDefault(),P.stopPropagation(),l?.(o,P)},u=(0,t.cx)(v.wrapper,m,{[v.hover]:l!==void 0});return l?n.createElement("button",{...p,className:u,onClick:i,ref:h},a&&n.createElement(r.J,{name:a}),o):n.createElement("span",{...p,className:u,ref:h},a&&n.createElement(r.J,{name:a}),o)});g.displayName="Tag";const f=(o,l,a)=>{let m;return a===void 0?m=(0,s.Bx)(l):m=(0,s.vm)(a),{wrapper:t.css`
      appearance: none;
      border-style: none;
      font-weight: ${o.typography.fontWeightMedium};
      font-size: ${o.typography.size.sm};
      line-height: ${o.typography.bodySmall.lineHeight};
      vertical-align: baseline;
      background-color: ${m.color};
      color: ${o.v1.palette.gray98};
      white-space: nowrap;
      text-shadow: none;
      padding: 3px 6px;
      border-radius: ${o.shape.borderRadius(2)};
    `,hover:t.css`
      &:hover {
        opacity: 0.85;
        cursor: pointer;
      }
    `}}},34807:(H,T,e)=>{"use strict";e.d(T,{P:()=>r});var t=e(52423),n=e(68404),c=e(72648),s=e(34719);const r=(0,n.memo)((0,n.forwardRef)(({displayMax:f,tags:o,icon:l,onClick:a,className:m,getAriaLabel:d},p)=>{const h=(0,c.l4)(),y=g(h,Boolean(f&&f>0)),v=o.length,i=f?o.slice(0,f):o;return n.createElement("ul",{className:(0,t.cx)(y.wrapper,m),"aria-label":"Tags",ref:p},i.map((u,P)=>n.createElement("li",{className:y.li,key:u},n.createElement(s.V,{name:u,icon:l,onClick:a,"aria-label":d?.(u,P),"data-tag-id":P}))),f&&f>0&&v-f>0&&n.createElement("span",{className:y.moreTagsLabel},"+ ",v-f))}));r.displayName="TagList";const g=(f,o)=>({wrapper:t.css`
      position: relative;
      align-items: ${o?"center":"unset"};
      display: flex;
      flex: 1 1 auto;
      flex-wrap: wrap;
      flex-shrink: ${o?0:1};
      justify-content: flex-end;
      gap: 6px;
    `,moreTagsLabel:t.css`
      color: ${f.colors.text.secondary};
      font-size: ${f.typography.size.sm};
    `,li:(0,t.css)({listStyle:"none"})})},43339:(H,T,e)=>{"use strict";e.d(T,{B:()=>a});var t=e(52423),n=e(68404),c=e(72648),s=e(31403),r=e(46967),g=e(3385),f=e(8180);const o=({name:d,disabled:p,onRemove:h})=>{const{color:y,borderColor:v}=(0,n.useMemo)(()=>(0,g.Bx)(d),[d]),i=(0,c.wW)(l);return n.createElement("li",{className:i.itemStyle,style:{backgroundColor:y,borderColor:v}},n.createElement("span",{className:i.nameStyle},d),n.createElement(f.h,{name:"times",size:"lg",disabled:p,ariaLabel:`Remove "${d}" tag`,onClick:()=>h(d),type:"button",className:i.buttonStyles}))},l=d=>{const p=d.spacing.gridSize*3;return{itemStyle:(0,t.css)({display:"flex",gap:"3px",alignItems:"center",height:`${p}px`,lineHeight:`${p-2}px`,color:"#fff",borderWidth:"1px",borderStyle:"solid",borderRadius:"3px",padding:`0 ${d.spacing(.5)}`,whiteSpace:"nowrap",textShadow:"none",fontWeight:500,fontSize:d.typography.size.sm}),nameStyle:(0,t.css)({maxWidth:"25ch",textOverflow:"ellipsis",overflow:"hidden"}),buttonStyles:(0,t.css)({margin:0,"&:hover::before":{display:"none"}})}},a=({placeholder:d="New tag (enter key to add)",tags:p=[],onChange:h,width:y,className:v,disabled:i,addOnBlur:u,invalid:P,id:E})=>{const[C,b]=(0,n.useState)(""),S=(0,c.wW)(m),M=(0,c.l4)(),x=(0,n.useCallback)(R=>{b(R.target.value)},[]),O=R=>{h(p.filter(A=>A!==R))},L=R=>{R?.preventDefault(),p.includes(C)||h(p.concat(C)),b("")},B=()=>{u&&C&&L()},w=R=>{R.key==="Enter"&&C!==""&&L(R)};return n.createElement("div",{className:(0,t.cx)(S.wrapper,v,y?(0,t.css)({width:M.spacing(y)}):"")},n.createElement(r.I,{id:E,disabled:i,placeholder:d,onChange:x,value:C,onKeyDown:w,onBlur:B,invalid:P,suffix:n.createElement(s.zx,{fill:"text",className:S.addButtonStyle,onClick:L,size:"md",disabled:C.length<=0},"Add")}),p?.length>0&&n.createElement("ul",{className:S.tags},p.map(R=>n.createElement(o,{key:R,name:R,onRemove:O,disabled:i}))))},m=d=>({wrapper:t.css`
    min-height: ${d.spacing(4)};
    display: flex;
    flex-direction: column;
    gap: ${d.spacing(1)};
    flex-wrap: wrap;
  `,tags:t.css`
    display: flex;
    justify-content: flex-start;
    flex-wrap: wrap;
    gap: ${d.spacing(.5)};
  `,addButtonStyle:t.css`
    margin: 0 -${d.spacing(1)};
  `})},97379:(H,T,e)=>{"use strict";e.d(T,{K:()=>g});var t=e(52423),n=e(68404),c=e(72648),s=e(7804),r=e(73267);const g=n.forwardRef(({invalid:o,className:l,...a},m)=>{const d=(0,c.l4)(),p=f(d,o);return n.createElement("textarea",{...a,className:(0,t.cx)(p.textarea,l),ref:m})}),f=(0,s.B)((o,l=!1)=>({textarea:(0,t.cx)((0,r.RK)(o),(0,r.GL)(o),t.css`
        border-radius: ${o.shape.borderRadius()};
        padding: ${o.spacing.gridSize/4}px ${o.spacing.gridSize}px;
        width: 100%;
        border-color: ${l?o.colors.error.border:o.components.input.borderColor};
      `)}));g.displayName="TextArea"},68948:(H,T,e)=>{"use strict";e.d(T,{p:()=>w});var t=e(68404),n=e(72648),c=e(72269),s=e(60325),r=e(68416),g=e(82897),f=e(75974),o=e(14582),l=e(36512),a=e(425),m=e(66926),d=e(20112),p=e(89890),h=e(29431),y=e(55294),v=e(40538),i=e(86979),u=e(13347),P=e(52240),E=e(2445);const C=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),b=Array(53);for(let R=0;R<b.length;R++)b[R]=2**R;const S=(R,A=1)=>R==null?"-":R.toFixed(A),M={drawStyle:v.l8.Line,showPoints:v.Jp.Auto,axisPlacement:v.LB.Auto},x=({frame:R,theme:A,timeZones:U,getTimeRange:I,eventBus:N,sync:F,allFrames:D,renderers:Y,tweakScale:j=z=>z,tweakAxis:K=z=>z})=>{const z=new u.U(U[0]);let Z;z.setPrepData(G=>(Z=G[0],(0,E.Bj)(G[0],z.getStackingGroups())));const ae=R.fields[0];if(!ae)return z;const J="x";let oe="_x",Ee="";const me=ae.config.custom?.axisPlacement!==v.LB.Hidden?v.LB.Bottom:v.LB.Hidden,re=ae.config.custom?.axisPlacement!==v.LB.Hidden;if(ae.type===o.fS.time){oe="time",z.addScale({scaleKey:J,orientation:v.wN.Horizontal,direction:v.bQ.Right,isTime:!0,range:()=>{const q=I();return[q.from.valueOf(),q.to.valueOf()]}});const G=U.length>1?(q,X)=>X.map((de,Be)=>Be<2?null:de):void 0;for(let q=0;q<U.length;q++){const X=U[q];z.addAxis({scaleKey:J,isTime:!0,placement:me,show:re,label:ae.config.custom?.axisLabel,timeZone:X,theme:A,grid:{show:q===0&&ae.config.custom?.axisGridShow},filter:G})}U.length>1&&z.addHook("drawAxes",q=>{q.ctx.save(),q.ctx.fillStyle=A.colors.text.primary,q.ctx.textAlign="left",q.ctx.textBaseline="bottom";let X=0;q.axes.forEach(de=>{if(de.side===2){let Be=de._pos+de._size;q.ctx.fillText(U[X],q.bbox.left,Be*f.Z.pxRatio),X++}}),q.ctx.restore()})}else ae.config.unit&&(oe=ae.config.unit),z.addScale({scaleKey:J,orientation:v.wN.Horizontal,direction:v.bQ.Right}),z.addAxis({scaleKey:J,placement:me,show:re,label:ae.config.custom?.axisLabel,theme:A,grid:{show:ae.config.custom?.axisGridShow}});let le=Y?.flatMap(G=>Object.values(G.fieldMap).filter(q=>G.indicesOnly.indexOf(q)===-1))??[],pe;for(let G=1;G<R.fields.length;G++){const q=R.fields[G],X={...q.config,custom:{...M,...q.config.custom}},de=X.custom;if(q===ae||q.type!==o.fS.number)continue;let Be=q.display??S;q.config.custom?.stacking?.mode===v.o0.Percent&&(Be=(0,l.U)({field:{...q,config:{...q.config,unit:"percentunit"}},theme:A}));const ke=(0,i.z)(X),He=(0,a.fD)(q),Oe=(0,a.YO)(q,A).color;if(z.addScale(j({scaleKey:ke,orientation:v.wN.Vertical,direction:v.bQ.Up,distribution:de.scaleDistribution?.type,log:de.scaleDistribution?.log,linearThreshold:de.scaleDistribution?.linearThreshold,min:q.config.min,max:q.config.max,softMin:de.axisSoftMin,softMax:de.axisSoftMax,centeredZero:de.axisCenteredZero,range:de.stacking?.mode===v.o0.Percent?(qe,Je,lt)=>(Je=Je<0?-1:0,lt=lt>0?1:0,[Je,lt]):void 0,decimals:q.config.decimals},q)),Ee||(Ee=ke),de.axisPlacement!==v.LB.Hidden){let qe;de.axisColorMode===v.yK.Series&&(He.isByValue&&q.config.custom?.gradientMode===v.FI.Scheme&&He.id===m.S.Thresholds?qe=(0,P.P2)(1,A,He,q.config.thresholds):qe=Oe);let Je={};qe&&(Je={border:{show:!0,width:1,stroke:qe},ticks:{stroke:qe},color:de.axisColorMode===v.yK.Series?qe:void 0});let lt;C.has(X.unit)&&(lt=b),z.addAxis(K({scaleKey:ke,label:de.axisLabel,size:de.axisWidth,placement:de.axisPlacement??v.LB.Auto,formatValue:(at,Xe)=>(0,d.zc)(Be(at,Xe)),theme:A,grid:{show:de.axisGridShow},decimals:q.config.decimals,distr:de.scaleDistribution?.type,incrs:lt,...Je},q))}const Fe=de.drawStyle===v.l8.Points?v.Jp.Always:de.showPoints;let Ie=()=>null;de.spanNulls!==!0&&(Ie=(qe,Je,lt,at)=>{let Xe=[],gt=qe.series[Je];if(!lt&&at&&at.length){const[ot,Ye]=gt.idxs,mt=qe.data[0],ce=qe.data[Je],be=Math.round(qe.valToPos(mt[ot],"x",!0)),Te=Math.round(qe.valToPos(mt[Ye],"x",!0));at[0][0]===be&&Xe.push(ot);for(let Ke=0;Ke<at.length;Ke++){let ge=at[Ke],Me=at[Ke+1];if(Me&&ge[1]===Me[0]){let ye=qe.posToIdx(ge[1],!0);if(ce[ye]==null)for(let fe=1;fe<100;fe++){if(ce[ye+fe]!=null){ye+=fe;break}if(ce[ye-fe]!=null){ye-=fe;break}}Xe.push(ye)}}at[at.length-1][1]===Te&&Xe.push(Ye)}return Xe.length?Xe:null});let{fillOpacity:we}=de,Re=null,_e=null;if(q.state?.origin){pe||(pe=O(R,D));const qe=D[q.state.origin.frameIndex],Je=qe?.fields[q.state.origin.fieldIndex],lt=(0,p.C)(Je??q,qe,D);if(le.indexOf(lt)>=0)Re=()=>null,_e=()=>{};else if(de.transform===v.pR.Constant){const at=f.Z.paths.linear();Re=(Xe,gt)=>{const ot=Xe._data,Ye=I();let mt=[Ye.from.valueOf(),Ye.to.valueOf()],ce=ot[gt].find(Ke=>Ke!=null),be=[ce,ce],Te=ot.slice();return Te[0]=mt,Te[gt]=be,at({...Xe,_data:Te},gt,0,1)}}if(de.fillBelowTo){const at=R.fields.find(Ye=>de.fillBelowTo===Ye.name||de.fillBelowTo===Ye.config?.displayNameFromDS||de.fillBelowTo===(0,p.C)(Ye,R,D)),Xe=at?(0,p.C)(at,R,D):de.fillBelowTo,gt=pe.get(lt),ot=pe.get(Xe);(0,g.isNumber)(ot)&&(0,g.isNumber)(gt)?(z.addBand({series:[gt,ot],fill:void 0}),we||(we=35)):we=0}}let et;He.id===m.S.Thresholds&&(et=qe=>(0,a.YO)(Z.fields[qe],A).color),z.addSeries({pathBuilder:Re,pointsBuilder:_e,scaleKey:ke,showPoints:Fe,pointsFilter:Ie,colorMode:He,fillOpacity:we,theme:A,dynamicSeriesColor:et,drawStyle:de.drawStyle,lineColor:de.lineColor??Oe,lineWidth:de.lineWidth,lineInterpolation:de.lineInterpolation,lineStyle:de.lineStyle,barAlignment:de.barAlignment,barWidthFactor:de.barWidthFactor,barMaxWidth:de.barMaxWidth,pointSize:de.pointSize,spanNulls:de.spanNulls||!1,show:!de.hideFrom?.viz,gradientMode:de.gradientMode,thresholds:X.thresholds,hardMin:q.config.min,hardMax:q.config.max,softMin:de.axisSoftMin,softMax:de.axisSoftMax,dataFrameFieldIndex:q.state?.origin}),de.thresholdsStyle&&X.thresholds&&(de.thresholdsStyle.mode??v.i3.Off)!==v.i3.Off&&z.addThresholds({config:de.thresholdsStyle,thresholds:X.thresholds,scaleKey:ke,theme:A,hardMin:q.config.min,hardMax:q.config.max,softMin:de.axisSoftMin,softMax:de.axisSoftMax})}let ee=(0,E.i7)(R);z.setStackingGroups(ee),Y?.forEach(G=>{pe||(pe=O(R,D));let q={};for(let X in G.fieldMap){let de=G.fieldMap[X];q[X]=pe.get(de)}G.init(z,q)}),z.scaleKeys=[J,Ee];const se=15;let Q={dataIdx:(G,q,X,de)=>{let Be=G.data[q];if(Be[X]==null){let ke=null,He=null,ue;for(ue=X;ke==null&&ue-- >0;)Be[ue]!=null&&(ke=ue);for(ue=X;He==null&&ue++<Be.length;)Be[ue]!=null&&(He=ue);let Oe=G.data[0],Fe=G.valToPos(de,"x"),Ie=He==null?1/0:G.valToPos(Oe[He],"x"),we=ke==null?-1/0:G.valToPos(Oe[ke],"x"),Re=Fe-we,_e=Ie-Fe;Re<=_e?Re<=se&&(X=ke):_e<=se&&(X=He)}return X}};if(F&&F()!==h.m.Off){const G={point:{[J]:null,[Ee]:null},data:R},q=new y.es(G);Q.sync={key:"__global_",filters:{pub:(X,de,Be,ke,He,ue,Oe)=>F&&F()===h.m.Off?!1:(G.rowIndex=Oe,Be<0&&ke<0?(G.point[oe]=null,G.point[Ee]=null,N.publish(new y.xH)):(G.point[oe]=de.posToVal(Be,J),G.point[Ee]=de.posToVal(ke,Ee),G.point.panelRelY=ke>0?ke/ue:1,N.publish(q),q.payload.down=void 0),!0)},scales:[J,Ee]}}return z.setSync(),z.setCursor(Q),z};function O(R,A){const U=new Map;return R.fields.forEach((I,N)=>{const F=I.state?.origin;if(F){const D=A[F.frameIndex]?.fields[F.fieldIndex];D&&U.set((0,p.C)(D,A[F.frameIndex],A),N)}}),U}const L=["legend","options","theme"];class B extends t.Component{constructor(){super(...arguments),this.panelContext={},this.prepConfig=(A,U,I)=>{const{eventBus:N,sync:F}=this.context,{theme:D,timeZone:Y,renderers:j,tweakAxis:K,tweakScale:z}=this.props;return x({frame:A,theme:D,timeZones:Array.isArray(Y)?Y:[Y],getTimeRange:I,eventBus:N,sync:F,allFrames:U,renderers:j,tweakScale:z,tweakAxis:K})},this.renderLegend=A=>{const{legend:U,frames:I}=this.props;return!A||U&&!U.showLegend?null:t.createElement(r.l,{data:I,config:A,...U})}}render(){return t.createElement(c.d,{...this.props,prepConfig:this.prepConfig,propsToDiff:L,renderLegend:this.renderLegend})}}B.contextType=s.bb;const w=(0,n.HE)(B);w.displayName="TimeSeries"},64319:(H,T,e)=>{"use strict";e.d(T,{h:()=>a});var t=e(52423),n=e(68404),c=e(43565),s=e(68183),r=e(72648),g=e(85419),f=e(31403),o=e(39904),l=e(61860);const a=(0,n.forwardRef)(({tooltip:h,icon:y,iconSize:v,className:i,children:u,imgSrc:P,imgAlt:E,fullWidth:C,isOpen:b,narrow:S,variant:M="default",iconOnly:x,"aria-label":O,isHighlighted:L,...B},w)=>{const R=(0,r.wW)(p),A=(0,t.cx)({[R.button]:!0,[R.buttonFullWidth]:C,[R.narrow]:S},R[M],i),U=(0,t.cx)({[R.content]:!0,[R.contentWithIcon]:!!y,[R.contentWithRightIcon]:b!==void 0}),I=n.createElement("button",{ref:w,className:A,"aria-label":m(O,h),"aria-expanded":b,...B},d(y,v),P&&n.createElement("img",{className:R.img,src:P,alt:E??""}),u&&!x&&n.createElement("div",{className:U},u),b===!1&&n.createElement(o.J,{name:"angle-down"}),b===!0&&n.createElement(o.J,{name:"angle-up"}),L&&n.createElement("div",{className:R.highlight}));return h?n.createElement(l.u,{content:h,placement:"bottom"},I):I});a.displayName="ToolbarButton";function m(h,y){return h||(y?s.wl.components.PageToolbar.item(y):void 0)}function d(h,y){return h?(0,c.Mo)(h)?n.createElement(o.J,{name:h,size:`${y||"lg"}`}):h:null}const p=h=>{const y=(0,f.c9)(h,"primary","solid"),v=(0,f.c9)(h,"destructive","solid"),i=t.css`
    color: ${h.colors.text.secondary};
    background-color: ${h.colors.background.primary};

    &:hover {
      color: ${h.colors.text.primary};
      background: ${h.colors.background.secondary};
    }
  `,u=t.css`
    color: ${h.colors.text.secondary};
    background-color: transparent;
    border-color: transparent;

    &:hover {
      color: ${h.colors.text.primary};
      background: ${h.colors.background.secondary};
    }
  `;return{button:t.css`
      label: toolbar-button;
      position: relative;
      display: flex;
      align-items: center;
      height: ${h.spacing(h.components.height.md)};
      padding: ${h.spacing(0,1)};
      border-radius: ${h.shape.borderRadius()};
      line-height: ${h.components.height.md*h.spacing.gridSize-2}px;
      font-weight: ${h.typography.fontWeightMedium};
      border: 1px solid ${h.colors.border.weak};
      white-space: nowrap;
      transition: ${h.transitions.create(["background","box-shadow","border-color","color"],{duration:h.transitions.duration.short})};

      &:focus,
      &:focus-visible {
        ${(0,g.getFocusStyles)(h)}
        z-index: 1;
      }

      &:focus:not(:focus-visible) {
        ${(0,g.getMouseFocusStyles)(h)}
      }

      &:hover {
        box-shadow: ${h.shadows.z1};
      }

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        opacity: ${h.colors.action.disabledOpacity};
        background: ${h.colors.action.disabledBackground};
        box-shadow: none;

        &:hover {
          color: ${h.colors.text.disabled};
          background: ${h.colors.action.disabledBackground};
          box-shadow: none;
        }
      }
    `,default:h.flags.topnav?u:i,canvas:i,active:t.css`
      color: ${h.v1.palette.orangeDark};
      border-color: ${h.v1.palette.orangeDark};
      background-color: transparent;

      &:hover {
        color: ${h.colors.text.primary};
        background: ${h.colors.emphasize(h.colors.background.canvas,.03)};
      }
    `,primary:(0,t.css)(y),destructive:(0,t.css)(v),narrow:t.css`
      padding: 0 ${h.spacing(.5)};
    `,img:t.css`
      width: 16px;
      height: 16px;
      margin-right: ${h.spacing(1)};
    `,buttonFullWidth:t.css`
      flex-grow: 1;
    `,content:t.css`
      flex-grow: 1;
    `,contentWithIcon:t.css`
      display: none;
      padding-left: ${h.spacing(1)};

      @media ${g.mediaUp(h.v1.breakpoints.md)} {
        display: block;
      }
    `,contentWithRightIcon:t.css`
      padding-right: ${h.spacing(.5)};
    `,highlight:t.css`
      background-color: ${h.colors.success.main};
      border-radius: 50%;
      width: 6px;
      height: 6px;
      position: absolute;
      top: -3px;
      right: -3px;
      z-index: 1;
    `}}},8125:(H,T,e)=>{"use strict";e.d(T,{R:()=>o});var t=e(52423),n=e(99510),c=e(81699),s=e(6665),r=e(68404),g=e(72648),f=e(64319);const o=(0,r.forwardRef)(({alignment:a="left",className:m,children:d,...p},h)=>{const y=r.Children.toArray(d).filter(B=>B!==null),[v,i]=(0,r.useState)(Array(y.length).fill(!0)),u=(0,r.useRef)(null),[P,E]=(0,r.useState)(!1),C=(0,r.useRef)(null),b=(0,r.createRef)(),{overlayProps:S}=(0,s.Ir)({onClose:()=>E(!1),isDismissable:!0,isOpen:P,shouldCloseOnInteractOutside:B=>!C.current?.contains(B)},b),{dialogProps:M}=(0,n.R)({},b),x=(0,g.l4)(),O=a==="left"?v.indexOf(!1)-1:v.length,L=l(x,O,a);return(0,r.useLayoutEffect)(()=>{const B=new IntersectionObserver(w=>{w.forEach(R=>{if(R.target instanceof HTMLElement&&R.target.parentNode){const A=Array.prototype.indexOf.call(R.target.parentNode.children,R.target);i(U=>{const I=[...U];return I[A]=R.isIntersecting,I})}})},{threshold:1,root:u.current});return u.current&&Array.from(u.current.children).forEach(w=>{w instanceof HTMLElement&&w!==C.current&&B.observe(w)}),()=>B.disconnect()},[d]),r.createElement("div",{ref:u,className:(0,t.cx)(L.container,m),...p},y.map((B,w)=>r.createElement("div",{key:w,style:{order:w,visibility:v[w]?"visible":"hidden"},className:L.childWrapper},B)),v.includes(!1)&&r.createElement("div",{ref:C,className:L.overflowButton},r.createElement(f.h,{variant:P?"active":"default",tooltip:"Show more items",onClick:()=>E(!P),icon:"ellipsis-v",iconOnly:!0,narrow:!0}),P&&r.createElement(c.MT,{contain:!0,autoFocus:!0},r.createElement("div",{className:L.overflowItems,ref:b,...S,...M},y.map((B,w)=>!v[w]&&B)))))});o.displayName="ToolbarButtonRow";const l=(a,m,d)=>({overflowButton:t.css`
    order: ${m};
  `,overflowItems:t.css`
    align-items: center;
    background-color: ${a.colors.background.primary};
    border-radius: ${a.shape.borderRadius()};
    box-shadow: ${a.shadows.z3};
    display: flex;
    flex-wrap: wrap;
    gap: ${a.spacing(1)};
    margin-top: ${a.spacing(1)};
    max-width: 80vw;
    padding: ${a.spacing(.5,1)};
    position: absolute;
    right: 0;
    top: 100%;
    width: max-content;
    z-index: ${a.zIndex.sidemenu};
  `,container:t.css`
    align-items: center;
    display: flex;
    gap: ${a.spacing(1)};
    justify-content: ${d==="left"?"flex-start":"flex-end"};
    min-width: 0;
    position: relative;
  `,childWrapper:t.css`
    align-items: center;
    display: flex;
    gap: ${a.spacing(1)};
  `})},56921:(H,T,e)=>{"use strict";e.d(T,{J:()=>o});var t=e(68404),n=e(93701),c=e(73934),s=e(41141),r=e(85511);const g={transitionProperty:"opacity",transitionDuration:"200ms",transitionTimingFunction:"linear",opacity:0},f={exited:{opacity:0},entering:{opacity:0},entered:{opacity:1,transitionDelay:"0s"},exiting:{opacity:0,transitionDelay:"500ms"}};class o extends t.PureComponent{render(){const{content:a,show:m,placement:d,onMouseEnter:p,onMouseLeave:h,className:y,wrapperClassName:v,renderArrow:i,referenceElement:u,onKeyDown:P}=this.props;return t.createElement(n.dK,null,t.createElement(s.ZP,{in:m,timeout:100,mountOnEnter:!0,unmountOnExit:!0},E=>t.createElement(r.h_,null,t.createElement(c.r,{placement:d,referenceElement:u,modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"eventListeners",options:{scroll:!0,resize:!0}}]},({ref:C,style:b,placement:S,arrowProps:M,update:x})=>t.createElement("div",{onMouseEnter:p,onMouseLeave:h,onKeyDown:P,ref:C,style:{...b,...g,...f[E]},"data-placement":S,className:`${v}`},t.createElement("div",{className:y},typeof a=="string"&&a,t.isValidElement(a)&&t.cloneElement(a),typeof a=="function"&&a({updatePopperPosition:x}),i&&i({arrowProps:M,placement:S})))))))}}},39604:(H,T,e)=>{"use strict";e.d(T,{D:()=>n});var t=e(68404);class n extends t.Component{constructor(){super(...arguments),this.hideTimeout=null,this.state={show:!1},this.showPopper=()=>{this.hideTimeout&&clearTimeout(this.hideTimeout),this.setState({show:!0})},this.hidePopper=()=>{this.hideTimeout=setTimeout(()=>{this.setState({show:!1})},this.props.hideAfter)}}render(){const{children:s,content:r,placement:g="auto"}=this.props,{show:f}=this.state;return s(this.showPopper,this.hidePopper,{show:f,placement:g,content:r})}}},61860:(H,T,e)=>{"use strict";e.d(T,{u:()=>f});var t=e(52423),n=e(68404),c=e(85361),s=e(64724),r=e(72648),g=e(85511);const f=n.memo(({children:l,theme:a,interactive:m,show:d,placement:p,content:h})=>{const[y,v]=n.useState(d);(0,n.useEffect)(()=>{if(y!==!1){const x=O=>{O.key==="Escape"&&v(!1)};return document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}}else return},[y]);const{getArrowProps:i,getTooltipProps:u,setTooltipRef:P,setTriggerRef:E,visible:C,update:b}=(0,c.O)({visible:y,placement:p,interactive:m,delayHide:m?100:0,delayShow:150,offset:[0,8],trigger:["hover","focus"],onVisibleChange:v}),M=(0,r.wW)(o)[a??"info"];return n.createElement(n.Fragment,null,n.cloneElement(l,{ref:E,tabIndex:0}),C&&n.createElement(g.h_,null,n.createElement("div",{ref:P,...u({className:M})},n.createElement("div",{...i({className:"tooltip-arrow"})}),typeof h=="string"&&h,n.isValidElement(h)&&n.cloneElement(h),typeof h=="function"&&b&&h({updatePopperPosition:b}))))});f.displayName="Tooltip";function o(l){function a(p,h,y){return t.css`
      background-color: ${p};
      border-radius: 3px;
      border: 1px solid ${h};
      box-shadow: ${l.shadows.z2};
      color: ${y};
      font-size: ${l.typography.bodySmall.fontSize};
      padding: ${l.spacing(.5,1)};
      transition: opacity 0.3s;
      z-index: ${l.zIndex.tooltip};
      max-width: 400px;
      overflow-wrap: break-word;

      &[data-popper-interactive='false'] {
        pointer-events: none;
      }

      .tooltip-arrow {
        height: 1rem;
        position: absolute;
        width: 1rem;
        pointer-events: none;
      }

      .tooltip-arrow::before {
        border-style: solid;
        content: '';
        display: block;
        height: 0;
        margin: auto;
        width: 0;
      }

      .tooltip-arrow::after {
        border-style: solid;
        content: '';
        display: block;
        height: 0;
        margin: auto;
        position: absolute;
        width: 0;
      }

      &[data-popper-placement*='bottom'] .tooltip-arrow {
        left: 0;
        margin-top: -10px;
        top: 0;
      }

      &[data-popper-placement*='bottom'] .tooltip-arrow::before {
        border-color: transparent transparent ${h} transparent;
        border-width: 0 8px 7px 8px;
        position: absolute;
        top: -1px;
      }

      &[data-popper-placement*='bottom'] .tooltip-arrow::after {
        border-color: transparent transparent ${p} transparent;
        border-width: 0 8px 7px 8px;
      }

      &[data-popper-placement*='top'] .tooltip-arrow {
        bottom: 0;
        left: 0;
        margin-bottom: -11px;
      }

      &[data-popper-placement*='top'] .tooltip-arrow::before {
        border-color: ${h} transparent transparent transparent;
        border-width: 7px 8px 0 7px;
        position: absolute;
        top: 1px;
      }

      &[data-popper-placement*='top'] .tooltip-arrow::after {
        border-color: ${p} transparent transparent transparent;
        border-width: 7px 8px 0 7px;
      }

      &[data-popper-placement*='right'] .tooltip-arrow {
        left: 0;
        margin-left: -11px;
      }

      &[data-popper-placement*='right'] .tooltip-arrow::before {
        border-color: transparent ${h} transparent transparent;
        border-width: 7px 6px 7px 0;
      }

      &[data-popper-placement*='right'] .tooltip-arrow::after {
        border-color: transparent ${p} transparent transparent;
        border-width: 6px 7px 7px 0;
        left: 2px;
        top: 1px;
      }

      &[data-popper-placement*='left'] .tooltip-arrow {
        margin-right: -10px;
        right: 0;
      }

      &[data-popper-placement*='left'] .tooltip-arrow::before {
        border-color: transparent transparent transparent ${h};
        border-width: 7px 0px 6px 7px;
      }

      &[data-popper-placement*='left'] .tooltip-arrow::after {
        border-color: transparent transparent transparent ${p};
        border-width: 6px 0 5px 5px;
        left: 1px;
        top: 1px;
      }

      code {
        border: none;
        display: inline;
        background: ${s.darken(p,.1)};
        color: ${y};
      }

      pre {
        background: ${s.darken(p,.1)};
        color: ${y};
      }

      a {
        color: ${y};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `}const m=a(l.components.tooltip.background,l.components.tooltip.background,l.components.tooltip.text),d=a(l.colors.error.main,l.colors.error.main,l.colors.error.contrastText);return{info:m,["info-alt"]:m,error:d}}},69636:(H,T,e)=>{"use strict";e.d(T,{H:()=>c});var t=e(68404);function n(s,r){const g=[];return s.forEach(f=>{g.push(f.start,f.end+1)}),g[0]!==0&&g.unshift(0),g[g.length-1]!==r&&g.push(r),g}const c=s=>{let{highlightParts:r,text:g,highlightClassName:f}=s;if(!r?.length)return null;let o=[],l=n(r,g.length),a=r[0].start===0;for(let m=1;m<l.length;m++){let d=l[m-1],p=l[m];o.push((0,t.createElement)(a?"mark":"span",{key:m-1,className:a?f:void 0},g.substring(d,p))),a=!a}return t.createElement("div",null,o)}},61227:(H,T,e)=>{"use strict";e.d(T,{n:()=>r});var t=e(68404),n=e(20112),c=e(95093);function s(g){return`Custom unit: ${g}`}class r extends t.PureComponent{constructor(){super(...arguments),this.onChange=f=>{this.props.onChange(f.value)}}render(){const{value:f,width:o}=this.props;let l;const m=(0,n.QW)().map(d=>{const p=d.submenu.map(h=>{const y={label:h.text,value:h.value};return h.value===f&&(l=y),y});return{label:d.text,value:d.text,items:p}});return f&&!l&&(l={value:f,label:f}),t.createElement(c.v,{width:o,initialValue:l&&l.label,allowCustomValue:!0,changeOnSelect:!1,formatCreateLabel:s,options:m,placeholder:"Choose",onSelect:this.props.onChange})}}},15670:(H,T,e)=>{"use strict";e.d(T,{b:()=>g});var t=e(68404),n=e(68183),c=e(72648),s=e(31403),r=e(53217);function g({"aria-label":f,label:o,icon:l,options:a,onChange:m,variant:d,minWidth:p=16,size:h="sm",isFullWidth:y=!0,menuPlacement:v,fill:i,buttonCss:u}){const[P,E]=(0,t.useState)(!1),C=(0,c.l4)();return t.createElement(t.Fragment,null,!P&&t.createElement(s.zx,{size:h||"sm",className:u,icon:l||"plus",onClick:()=>E(!0),variant:d,fill:i,fullWidth:y,"aria-label":n.wl.components.ValuePicker.button(f??o)},o),P&&t.createElement("span",{style:{minWidth:C.spacing(p),flexGrow:y?1:void 0}},t.createElement(r.Ph,{placeholder:o,options:a,"aria-label":n.wl.components.ValuePicker.select(f??o),isOpen:!0,onCloseMenu:()=>E(!1),autoFocus:!0,onChange:b=>{E(!1),m(b)},menuPlacement:v})))}},729:(H,T,e)=>{"use strict";e.d(T,{AY:()=>f});var t=e(52423),n=e(68404),c=e(11041),s=e(72648),r=e(85419),g=e(68226);const f=({width:a,height:m,legend:d,children:p})=>{const h=(0,s.wW)(o),y={display:"flex",width:`${a}px`,height:`${m}px`},[v,i]=(0,c.Z)();if(!d)return n.createElement(n.Fragment,null,n.createElement("div",{tabIndex:0,style:y,className:h.viz},p(a,m)));const{placement:u,maxHeight:P="35%",maxWidth:E="60%"}=d.props;let C=null;const b={};switch(u){case"bottom":y.flexDirection="column",b.maxHeight=P,i&&(C={width:a,height:m-i.height});break;case"right":y.flexDirection="row",b.maxWidth=E,i&&(C={width:a-i.width,height:m}),d.props.width&&(b.width=d.props.width,C={width:a-d.props.width,height:m});break}return C?.width===0&&(C.width=a),C?.height===0&&(C.height=m),n.createElement("div",{style:y},n.createElement("div",{tabIndex:0,className:h.viz},C&&p(C.width,C.height)),n.createElement("div",{style:b,ref:v},n.createElement(g.$,{hideHorizontalTrack:!0},d)))},o=a=>({viz:(0,t.css)({flexGrow:2,borderRadius:a.shape.borderRadius(1),"&:focus-visible":(0,r.getFocusStyles)(a)})}),l=({children:a})=>n.createElement(n.Fragment,null,a);f.Legend=l},6264:(H,T,e)=>{"use strict";e.d(T,{F:()=>s});var t=e(68404),n=e(425),c=e(72648);const s=t.memo(t.forwardRef(({color:r,className:g,gradient:f,...o},l)=>{const a=(0,c.l4)();let m;if(f){const p=n.WO.get(f).getColors?.(a);p?.length?m=`linear-gradient(90deg, ${p.join(", ")})`:m=a.visualization.getColorByName("")}else m=r;const d={background:m,width:"14px",height:"4px",borderRadius:"1px",display:"inline-block",marginRight:"8px"};return t.createElement("div",{"data-testid":"series-icon",ref:l,className:g,style:d,...o})}));s.displayName="SeriesIcon"},78056:(H,T,e)=>{"use strict";e.d(T,{l:()=>M});var t=e(68404),n=e(55294),c=e(40538),s=e(60325),r=e(17882),g=e(52423),f=e(72648),o=e(19882),l=e(56766),a=e(46920);const m=({items:x,itemRenderer:O,onLabelMouseOver:L,onLabelMouseOut:B,onLabelClick:w,placement:R,className:A,readonly:U})=>{const I=(0,f.wW)(d);O||(O=F=>t.createElement(a.e,{item:F,onLabelClick:w,onLabelMouseOver:L,onLabelMouseOut:B,readonly:U}));const N=F=>`${F.getItemKey?F.getItemKey():F.label}`;switch(R){case"right":{const F=(D,Y)=>t.createElement("span",{className:I.itemRight},O(D,Y));return t.createElement("div",{className:(0,g.cx)(I.rightWrapper,A)},t.createElement(l.a,{items:x,renderItem:F,getItemKey:N}))}case"bottom":default:{const F=(D,Y)=>t.createElement("span",{className:I.itemBottom},O(D,Y));return t.createElement("div",{className:(0,g.cx)(I.bottomWrapper,A)},t.createElement("div",{className:I.section},t.createElement(o.Y,{items:x.filter(D=>D.yAxis===1),renderItem:F,getItemKey:N})),t.createElement("div",{className:(0,g.cx)(I.section,I.sectionRight)},t.createElement(o.Y,{items:x.filter(D=>D.yAxis!==1),renderItem:F,getItemKey:N})))}}};m.displayName="VizLegendList";const d=x=>{const O=g.css`
    padding-right: 10px;
    display: flex;
    font-size: ${x.typography.bodySmall.fontSize};
    white-space: nowrap;
  `;return{itemBottom:O,itemRight:(0,g.cx)(O,g.css`
        margin-bottom: ${x.spacing(.5)};
      `),rightWrapper:g.css`
      padding-left: ${x.spacing(.5)};
    `,bottomWrapper:g.css`
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      width: 100%;
      padding-left: ${x.spacing(.5)};
    `,section:g.css`
      display: flex;
    `,sectionRight:g.css`
      justify-content: flex-end;
      flex-grow: 1;
    `}};var p=e(82897),h=e(39904),y=e(20112),v=e(85419),i=e(59943);const u=({item:x,onLabelClick:O,onLabelMouseOver:L,onLabelMouseOut:B,className:w,readonly:R})=>{const A=(0,f.wW)(P),U=(0,t.useCallback)(F=>{L&&L(x,F)},[x,L]),I=(0,t.useCallback)(F=>{B&&B(x,F)},[x,B]),N=(0,t.useCallback)(F=>{O&&O(x,F)},[x,O]);return t.createElement("tr",{className:(0,g.cx)(A.row,w)},t.createElement("td",null,t.createElement("span",{className:A.itemWrapper},t.createElement(i.i,{color:x.color,seriesName:x.label,readonly:R}),t.createElement("button",{disabled:R,type:"button",onBlur:I,onFocus:U,onMouseOver:U,onMouseOut:I,onClick:R?void 0:N,className:(0,g.cx)(A.label,x.disabled&&A.labelDisabled)},x.label," ",x.yAxis===2&&t.createElement("span",{className:A.yAxisLabel},"(right y-axis)")))),x.getDisplayValues&&x.getDisplayValues().map((F,D)=>t.createElement("td",{className:A.value,key:`${F.title}-${D}`},(0,y.zc)(F))))};u.displayName="LegendTableItem";const P=x=>{const O=v.hoverColor(x.colors.background.primary,x);return{row:g.css`
      label: LegendRow;
      font-size: ${x.v1.typography.size.sm};
      border-bottom: 1px solid ${x.colors.border.weak};
      td {
        padding: ${x.spacing(.25,1)};
        white-space: nowrap;
      }

      &:hover {
        background: ${O};
      }
    `,label:g.css`
      label: LegendLabel;
      white-space: nowrap;
      background: none;
      border: none;
      font-size: inherit;
      padding: 0;
    `,labelDisabled:g.css`
      label: LegendLabelDisabled;
      color: ${x.colors.text.disabled};
    `,itemWrapper:g.css`
      display: flex;
      white-space: nowrap;
      align-items: center;
    `,value:g.css`
      text-align: right;
    `,yAxisLabel:g.css`
      color: ${x.colors.text.secondary};
    `}},E=({items:x,sortBy:O,sortDesc:L,itemRenderer:B,className:w,onToggleSort:R,onLabelClick:A,onLabelMouseOver:U,onLabelMouseOut:I,readonly:N})=>{const F=(0,f.wW)(C),D={};for(const j of x)if(j.getDisplayValues)for(const K of j.getDisplayValues())D[K.title??"?"]=K;const Y=O?(0,p.orderBy)(x,j=>{if(j.getDisplayValues){const K=j.getDisplayValues().filter(z=>z.title===O)[0];return K&&K.numeric}},L?"desc":"asc"):x;return B||(B=(j,K)=>t.createElement(u,{key:`${j.label}-${K}`,item:j,onLabelClick:A,onLabelMouseOver:U,onLabelMouseOut:I,readonly:N})),t.createElement("table",{className:(0,g.cx)(F.table,w)},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null),Object.keys(D).map(j=>{const K=D[j];return t.createElement("th",{title:K.description,key:j,className:(0,g.cx)(F.header,R&&F.headerSortable,{[F.withIcon]:O===j}),onClick:()=>{R&&R(j)}},j,O===j&&t.createElement(h.J,{size:"xs",name:L?"angle-down":"angle-up"}))}))),t.createElement("tbody",null,Y.map(B)))},C=x=>({table:g.css`
    width: 100%;
    th:first-child {
      width: 100%;
      border-bottom: 1px solid ${x.colors.border.weak};
    }
  `,header:g.css`
    color: ${x.colors.primary.text};
    font-weight: ${x.typography.fontWeightMedium};
    border-bottom: 1px solid ${x.colors.border.weak};
    padding: ${x.spacing(.25,1,.25,1)};
    font-size: ${x.typography.bodySmall.fontSize};
    text-align: right;
    white-space: nowrap;
  `,withIcon:g.css`
    padding-right: 4px;
  `,headerSortable:g.css`
    cursor: pointer;
  `});var b=e(26993);function S(x){return x.ctrlKey||x.metaKey||x.shiftKey?r.R.AppendToSelection:r.R.ToggleSelection}function M({items:x,displayMode:O,sortBy:L,seriesVisibilityChangeBehavior:B=b.Y.Isolate,sortDesc:w,onLabelClick:R,onToggleSort:A,placement:U,className:I,itemRenderer:N,readonly:F}){const{eventBus:D,onToggleSeriesVisibility:Y,onToggleLegendSort:j}=(0,s.R9)(),K=(0,t.useCallback)((ae,J)=>{D?.publish({type:n.es.type,payload:{raw:J,x:0,y:0,dataId:ae.label}})},[D]),z=(0,t.useCallback)((ae,J)=>{D?.publish({type:n.xH.type,payload:{raw:J,x:0,y:0,dataId:ae.label}})},[D]),Z=(0,t.useCallback)((ae,J)=>{R&&R(ae,J),Y&&Y(ae.label,B===b.Y.Hide?r.R.AppendToSelection:S(J))},[Y,R,B]);switch(O){case c.jK.Table:return t.createElement(E,{className:I,items:x,placement:U,sortBy:L,sortDesc:w,onLabelClick:Z,onToggleSort:A||j,onLabelMouseOver:K,onLabelMouseOut:z,itemRenderer:N,readonly:F});case c.jK.List:return t.createElement(m,{className:I,items:x,placement:U,onLabelMouseOver:K,onLabelMouseOut:z,onLabelClick:Z,itemRenderer:N,readonly:F});default:return null}}M.displayName="VizLegend"},46920:(H,T,e)=>{"use strict";e.d(T,{e:()=>m});var t=e(52423),n=e(68404),c=e(68183),s=e(72648),r=e(59943),g=e(82897),f=e(20112),o=e(19882);const l=({stats:p})=>{const h=(0,s.wW)(a);return p.length===0?null:n.createElement(o.Y,{className:h.list,items:p,renderItem:y=>n.createElement("div",{className:h.item,title:y.description},y.title&&`${(0,g.capitalize)(y.title)}:`," ",(0,f.zc)(y))})},a=()=>({list:t.css`
    flex-grow: 1;
    text-align: right;
  `,item:t.css`
    margin-left: 8px;
  `});l.displayName="VizLegendStatsList";const m=({item:p,onLabelClick:h,onLabelMouseOver:y,onLabelMouseOut:v,className:i,readonly:u})=>{const P=(0,s.wW)(d),E=(0,n.useCallback)(S=>{y&&y(p,S)},[p,y]),C=(0,n.useCallback)(S=>{v&&v(p,S)},[p,v]),b=(0,n.useCallback)(S=>{h&&h(p,S)},[p,h]);return n.createElement("div",{className:(0,t.cx)(P.itemWrapper,p.disabled&&P.itemDisabled,i),"aria-label":c.wl.components.VizLegend.seriesName(p.label)},n.createElement(r.i,{seriesName:p.label,color:p.color,gradient:p.gradient,readonly:u}),n.createElement("button",{disabled:u,type:"button",onBlur:C,onFocus:E,onMouseOver:E,onMouseOut:C,onClick:b,className:P.label},p.label),p.getDisplayValues&&n.createElement(l,{stats:p.getDisplayValues()}))};m.displayName="VizLegendListItem";const d=p=>({label:t.css`
    label: LegendLabel;
    white-space: nowrap;
    background: none;
    border: none;
    font-size: inherit;
    padding: 0;
    user-select: text;
  `,itemDisabled:t.css`
    label: LegendLabelDisabled;
    color: ${p.colors.text.disabled};
  `,itemWrapper:t.css`
    label: LegendItemWrapper;
    display: flex;
    white-space: nowrap;
    align-items: center;
    flex-grow: 1;
  `,value:t.css`
    text-align: right;
  `,yAxisLabel:t.css`
    color: ${p.v1.palette.gray2};
  `})},59943:(H,T,e)=>{"use strict";e.d(T,{i:()=>r});var t=e(68404),n=e(90208),c=e(60325),s=e(6264);const r=t.memo(({seriesName:g,color:f,gradient:o,readonly:l})=>{const{onSeriesColorChange:a}=(0,c.R9)(),m=(0,t.useCallback)(d=>a(g,d),[g,a]);return g&&a&&f&&!l?t.createElement(n.sp,{color:f,onChange:m,enableNamedColors:!0},({ref:d,showColorPicker:p,hideColorPicker:h})=>t.createElement(s.F,{color:f,className:"pointer",ref:d,onClick:p,onMouseLeave:h})):t.createElement(s.F,{color:f,gradient:o})});r.displayName="VizLegendSeriesIcon"},26993:(H,T,e)=>{"use strict";e.d(T,{Y:()=>t});var t=(n=>(n[n.Isolate=0]="Isolate",n[n.Hide=1]="Hide",n))(t||{})},4387:(H,T,e)=>{"use strict";e.d(T,{Q:()=>r});var t=e(68404),n=e(20251);const c=(f,o,l,a)=>{const m=s(f,o,a),d=s(o,f,a),p=Math.max(m,d);let h=Math.floor(f/p),y=Math.ceil(a/h);h=Math.ceil(a/y);const v=h-(h*y-a),i=f/v-l+l/v;return{width:f/h-l+l/h,height:o/y-l+l/y,widthOnLastRow:i,xCount:h,yCount:y}};function s(f,o,l){const a=Math.ceil(Math.sqrt(l*f/o));return Math.floor(a*o/f)*a<l?o/Math.ceil(a*o/f):f/a}class r extends t.PureComponent{constructor(o){super(o),this.state={values:o.getValues()}}componentDidUpdate(o){const{renderCounter:l,source:a}=this.props;(l!==o.renderCounter||a!==o.source)&&this.setState({values:this.props.getValues()})}getOrientation(){const{orientation:o,width:l,height:a}=this.props;return o===n.wm.Auto?l>a?n.wm.Vertical:n.wm.Horizontal:o}renderGrid(){const{renderValue:o,height:l,width:a,itemSpacing:m,getAlignmentFactors:d,orientation:p}=this.props,{values:h}=this.state,y=c(a,l,m,h.length),v=d?d(h,y.width,y.height):{};let i=0,u=0,P=[];for(let E=0;E<h.length;E++){const C=h[E],S=u===y.yCount-1?y.widthOnLastRow:y.width,M=y.height,x=i*S+m*i,O=u*M+m*u,L={position:"absolute",left:x,top:O,width:`${S}px`,height:`${M}px`};P.push(t.createElement("div",{key:E,style:L},o({value:C,width:S,height:M,alignmentFactors:v,orientation:p,count:h.length}))),i++,i===y.xCount&&(i=0,u++)}return t.createElement("div",{style:{position:"relative"}},P)}render(){const{renderValue:o,height:l,width:a,itemSpacing:m,getAlignmentFactors:d,autoGrid:p,orientation:h,minVizWidth:y,minVizHeight:v}=this.props,{values:i}=this.state;if(p&&h===n.wm.Auto)return this.renderGrid();const u={display:"flex"},P={display:"flex",overflow:`${y?"auto":"hidden"} ${v?"auto":"hidden"}`};let E=l,C=a,b=this.getOrientation();switch(b){case n.wm.Horizontal:P.flexDirection="column",P.height=`${l}px`,u.marginBottom=`${m}px`,C=a,E=Math.max(l/i.length-m+m/i.length,v??0);break;case n.wm.Vertical:P.flexDirection="row",P.justifyContent="space-between",u.marginRight=`${m}px`,E=l,C=Math.max(a/i.length-m+m/i.length,y??0)}u.width=`${C}px`,u.height=`${E}px`;const S=d?d(i,C,E):{};return t.createElement("div",{style:P},i.map((M,x)=>t.createElement("div",{key:x,style:g(u,x,i.length)},o({value:M,width:C,height:E,alignmentFactors:S,orientation:b,count:i.length}))))}}r.defaultProps={itemSpacing:8};function g(f,o,l){return o===l-1?{...f,marginRight:0,marginBottom:0}:f}},50800:(H,T,e)=>{"use strict";e.d(T,{V:()=>g,c:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(6264);const r=o=>({icon:t.css`
      margin-right: ${o.spacing(1)};
      vertical-align: middle;
    `,seriesTable:t.css`
      display: table;
    `,seriesTableRow:t.css`
      display: table-row;
      font-size: ${o.typography.bodySmall.fontSize};
    `,seriesTableCell:t.css`
      display: table-cell;
    `,label:t.css`
      word-break: break-all;
    `,value:t.css`
      padding-left: ${o.spacing(2)};
    `,activeSeries:t.css`
      font-weight: ${o.typography.fontWeightBold};
      color: ${o.colors.text.maxContrast};
    `,timestamp:t.css`
      font-weight: ${o.typography.fontWeightBold};
      font-size: ${o.typography.bodySmall.fontSize};
    `}),g=({color:o,label:l,value:a,isActive:m})=>{const d=(0,c.wW)(r);return n.createElement("div",{"data-testid":"SeriesTableRow",className:(0,t.cx)(d.seriesTableRow,m&&d.activeSeries)},o&&n.createElement("div",{className:d.seriesTableCell},n.createElement(s.F,{color:o,className:d.icon})),l&&n.createElement("div",{className:(0,t.cx)(d.seriesTableCell,d.label)},l),a&&n.createElement("div",{className:(0,t.cx)(d.seriesTableCell,d.value)},a))},f=({timestamp:o,series:l})=>{const a=(0,c.wW)(r);return n.createElement(n.Fragment,null,o&&n.createElement("div",{className:a.timestamp,"aria-label":"Timestamp"},o),l.map((m,d)=>n.createElement(g,{isActive:m.isActive,label:m.label,color:m.color,value:m.value,key:`${m.label}-${d}`})))}},24505:(H,T,e)=>{"use strict";e.d(T,{I:()=>g});var t=e(52423),n=e(68404),c=e(72648),s=e(85511),r=e(20888);const g=({content:o,position:l,offset:a})=>{const m=(0,c.wW)(f);return l?n.createElement(s.h_,{className:m.portal},n.createElement(r.S,{position:l,offset:a||{x:0,y:0}},o)):null};g.displayName="VizTooltip";const f=()=>({portal:t.css`
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none;
      width: 100%;
      height: 100%;
    `})},20888:(H,T,e)=>{"use strict";e.d(T,{S:()=>f});var t=e(52423),n=e(68404),c=e(98101),s=e(72648),r=e(85419);const g=(l=0,a=0,m=0,d=0,p=0,h=0,y=0,v=0)=>{let i=l,u=a;const P=Math.max(l+p+m-(y-p),0),E=Math.abs(Math.min(l-p-m-p,0)),C=P>0,b=E>0,S=Math.max(a+h+d-(v-h),0),M=Math.abs(Math.min(a-h-d-h,0)),x=S>0,O=M>0;return C&&b?i=P>E?p:y-p-m:C?i=l-p-m:i=l+p,x&&O?u=S>M?h:v-h-d:x?u=a-h-d:u=a+h,{x:i,y:u}},f=({position:{x:l,y:a},offset:{x:m,y:d},children:p,allowPointerEvents:h=!1,className:y,...v})=>{const i=(0,n.useRef)(null),[u,P]=(0,n.useState)({width:0,height:0}),{width:E,height:C}=(0,c.Z)(),[b,S]=(0,n.useState)({x:l+m,y:a+d}),M=(0,n.useMemo)(()=>new ResizeObserver(O=>{for(let L of O){const B=Math.floor(L.contentRect.width+16),w=Math.floor(L.contentRect.height+2*8);(u.width!==B||u.height!==w)&&P({width:Math.min(B,E),height:Math.min(w,C)})}}),[u,E,C]);(0,n.useLayoutEffect)(()=>(i.current&&M.observe(i.current),()=>{M.disconnect()}),[M]),(0,n.useLayoutEffect)(()=>{if(i&&i.current){const{x:O,y:L}=g(l,a,u.width,u.height,m,d,E,C);S({x:O,y:L})}},[E,C,l,m,a,d,u]);const x=(0,s.wW)(o);return n.createElement("div",{ref:i,style:{position:"fixed",left:0,pointerEvents:h?"auto":"none",top:0,transform:`translate(${b.x}px, ${b.y}px)`,transition:"transform ease-out 0.1s"},...v,className:(0,t.cx)(x.wrapper,y)},p)};f.displayName="VizTooltipContainer";const o=l=>({wrapper:t.css`
    ${(0,r.getTooltipContainerStyles)(l)}
  `})},14835:(H,T,e)=>{"use strict";e.r(T),e.d(T,{Alert:()=>Ae.b,AlertingSettings:()=>Qn.O,AsyncMultiSelect:()=>ka.M8,AsyncSelect:()=>ka.qb,AsyncVirtualizedSelect:()=>ka.gY,AutoSizeInput:()=>Mr.H,Badge:()=>mr.C,BarGauge:()=>gt.xf,BarGaugeDisplayMode:()=>He.QH,BigValue:()=>et.w6,BigValueColorMode:()=>et.pc,BigValueGraphMode:()=>et.IG,BigValueJustifyMode:()=>et.ap,BigValueTextMode:()=>et.jG,BrowserLabel:()=>qt._,Button:()=>Da.zx,ButtonCascader:()=>E.O,ButtonGroup:()=>Vs.h,ButtonSelect:()=>fn.d,CallToActionCard:()=>Fn._,Card:()=>cn.Z,CardContainer:()=>hn._,Cascader:()=>P.v,CertificationKey:()=>pa.W,Checkbox:()=>Br.X,ClickOutsideWrapper:()=>Pt.L,ClipboardButton:()=>u.m,CodeEditor:()=>re.p,CodeEditorSuggestionItemKind:()=>pe.k,CollapsableSection:()=>Se.s,Collapse:()=>Ze.U,ColorPicker:()=>M.zH,ColorPickerInput:()=>x.T,ConfirmButton:()=>a.p,ConfirmModal:()=>Ee.s,Container:()=>ur.W2,ContextMenu:()=>kn.x,ControlledCollapse:()=>Ze.y,Counter:()=>Re.A,CustomHeadersSettings:()=>ea.H,CustomScrollbar:()=>v.$,DataLinkButton:()=>yt.k,DataLinkInput:()=>vt.v,DataLinksContextMenu:()=>ht.V,DataLinksInlineEditor:()=>nt.d,DataSourceHttpSettings:()=>Bn.E,DatePicker:()=>F.M,DatePickerWithInput:()=>D.d,DateTimePicker:()=>Y.x,DeleteButton:()=>m.m,Drawer:()=>Ks.d,Dropdown:()=>Rt.L,DropdownIndicator:()=>ys.m,EmptySearchResult:()=>L.K,ErrorBoundary:()=>En.SV,ErrorBoundaryAlert:()=>En.z4,ErrorWithStack:()=>yn.X,EventsCanvas:()=>_a.TZ,FIXED_UNIT:()=>Ge.j,FadeTransition:()=>za.n,FeatureBadge:()=>en.a,FeatureInfoBox:()=>en.Z,Field:()=>ts.g,FieldArray:()=>Ha.F,FieldLinkList:()=>Mt.Z,FieldSet:()=>Xt.C,FieldValidationMessage:()=>kt.S,FileDropzone:()=>Lt.Yo,FileDropzoneDefaultChildren:()=>Lt.A_,FileListItem:()=>Lt.K$,FileUpload:()=>Dt.p,FilterInput:()=>ir.H,FilterPill:()=>oe.B,Form:()=>ls.l,FormattedValueDisplay:()=>Tn.W,FullWidthButtonContainer:()=>At.f,Gauge:()=>Je.a,Graph:()=>lt.k,GraphContextMenu:()=>Xe.w,GraphContextMenuHeader:()=>Xe.b,GraphNG:()=>Ge.d,GraphSeriesToggler:()=>Ne.U,GraphWithLegend:()=>at.U,HorizontalGroup:()=>ur.Lh,Icon:()=>o.J,IconButton:()=>l.h,InfoBox:()=>Ft.v,InlineField:()=>vn._,InlineFieldRow:()=>Xn.Z,InlineFormLabel:()=>Sa.c,InlineLabel:()=>Wn.W,InlineSegmentGroup:()=>An.m,InlineSwitch:()=>$r.x,InlineToast:()=>C.K,Input:()=>ms.I,InputControl:()=>qs.g,InteractiveTable:()=>K.e,JSONFormatter:()=>sn.g,JsonExplorer:()=>Mn.u,KeyboardPlugin:()=>Bt.Cm,Label:()=>Is._,LegacyForms:()=>Dn,LegacyInputStatus:()=>n.G,Legend:()=>Zs.D,Link:()=>tr.r,LinkButton:()=>Da.Qj,List:()=>j.a,LoadingBar:()=>S.F,LoadingPlaceholder:()=>b.u,LogLabels:()=>Ue.j,LogMessageAnsi:()=>Qe.Q,LogRows:()=>pt.w,Marker:()=>_a.Jx,Menu:()=>Jn.v,MenuGroup:()=>qn.k,MenuItem:()=>Ut.s,Modal:()=>se.u,ModalHeader:()=>Q.x,ModalRoot:()=>X.Y0,ModalTabContent:()=>q.Q,ModalTabsHeader:()=>G.H,ModalsContext:()=>X.kr,ModalsController:()=>X.JY,ModalsProvider:()=>X.$i,MultiSelect:()=>ka.NU,PageToolbar:()=>de.X,Pagination:()=>Z.t,PanelChrome:()=>Te.fm,PanelChromeErrorIndicator:()=>ge.g,PanelChromeLoadingIndicator:()=>Ke.T,PanelContainer:()=>Yt.l,PanelContextProvider:()=>Me._w,PanelContextRoot:()=>Me.bb,PlotLegend:()=>zs.l,PluginSignatureBadge:()=>ya.o,Popover:()=>h.J,PopoverController:()=>p.D,Portal:()=>y.h_,PortalContainer:()=>y.lO,QueryField:()=>me.q,RadioButtonGroup:()=>Sr.S,RadioButtonList:()=>Wr.x,RangeSlider:()=>Bs.U,ReactMonacoEditor:()=>le.o,RefreshPicker:()=>R.dP,RelativeTimeRangePicker:()=>Zt.x,RenderUserContentAsHTML:()=>_e.D,ScaleDistribution:()=>He.wf,SecretInput:()=>tn.m,SecretTextArea:()=>pr.Z,SecureSocksProxySettings:()=>Kn.i,Segment:()=>Ea.X,SegmentAsync:()=>ma.V,SegmentInput:()=>Xa.X,SegmentSection:()=>ss.f,SegmentSelect:()=>Oa.V,Select:()=>ka.Ph,SelectContainer:()=>ka.eI,SeriesColorPicker:()=>M.sp,SeriesColorPickerPopover:()=>O.j,SeriesColorPickerPopoverWithTheme:()=>O.q,SeriesIcon:()=>It.F,SeriesTable:()=>mt.c,SeriesTableRow:()=>mt.V,SeriesVisibilityChangeBehavior:()=>fe.Y,SeriesVisibilityChangeMode:()=>$t.R,SetInterval:()=>Be.F,SlideOutTransition:()=>ja.R,Slider:()=>Ss.i,Sparkline:()=>qe.b,Spinner:()=>va.$,StatsPicker:()=>w.m,Switch:()=>$r.r,TLSAuthSettings:()=>Ua.s,Tab:()=>Fe.O,TabContent:()=>we.I,TabbedContainer:()=>i.W,Table:()=>ke.i,TableCellDisplayMode:()=>He.h2,TableInputCSV:()=>ue.w,TabsBar:()=>Oe.J,Tag:()=>ae.V,TagList:()=>J.P,TagsInput:()=>z.B,TextArea:()=>it.K,TimeOfDayPicker:()=>U.y,TimePickerTooltip:()=>A.IF,TimeRangeInput:()=>Gt.K,TimeRangePicker:()=>A.Xc,TimeSeries:()=>We.p,TimeZonePicker:()=>I.O,ToolbarButton:()=>Es.h,ToolbarButtonRow:()=>er.R,Tooltip:()=>d.u,TooltipPlugin:()=>Bt.ii,UPLOT_AXIS_FONT_SIZE:()=>rs.gD,UPlotChart:()=>Fa.N,UPlotConfigBuilder:()=>wa.U,UnitPicker:()=>B.n,ValuePicker:()=>dr.b,VerticalGroup:()=>ur.wc,VerticalTab:()=>Ie.L,VirtualizedSelect:()=>ka.LT,VizLayout:()=>ye.AY,VizLegend:()=>he.l,VizLegendListItem:()=>De.e,VizRepeater:()=>ce.Q,VizTooltip:()=>ot.I,VizTooltipContainer:()=>Ye.S,WeekStartPicker:()=>N.z,WithContextMenu:()=>ut.z,XYCanvas:()=>_a.K2,ZoomPlugin:()=>Bt.Rb,buildScaleKey:()=>St.z,clearButtonStyles:()=>Da.gN,convertOldAngularValueMapping:()=>rn.PR,defaultIntervals:()=>R.o5,fieldMatchersUI:()=>es.i,getCardStyles:()=>cn.L,getInputStyles:()=>ms.H,getLogRowStyles:()=>bt.h,getPortalContainer:()=>y.RN,getSelectStyles:()=>xs.D,graphFieldOptions:()=>Ca.q,graphTickFormatter:()=>be.sV,graphTimeFormat:()=>be.mc,preparePlotFrame:()=>St.R,resetSelectStyles:()=>Qa.Z,sharedInputStyle:()=>ws.RK,sharedSingleStatMigrationHandler:()=>rn.rD,sharedSingleStatPanelChangedHandler:()=>rn.ZH,useGraphNGContext:()=>ct.z,usePanelContext:()=>Me.R9,variableSuggestionToCodeEditorSuggestion:()=>ee.T,withErrorBoundary:()=>En.Pf});var t=e(95569),n=e(50869),c=e(21662),s=e(76603),r=e(29418),g=e(18979),f=e(34517),o=e(39904),l=e(8180),a=e(71657),m=e(13626),d=e(61860),p=e(39604),h=e(56921),y=e(85511),v=e(68226),i=e(18607),u=e(94599),P=e(95093),E=e(19974),C=e(4784),b=e(61744),S=e(74750),M=e(90208),x=e(83957),O=e(43598),L=e(69097),B=e(61227),w=e(71294),R=e(5562),A=e(3630),U=e(91942),I=e(52566),N=e(80124),F=e(77239),D=e(86348),Y=e(35575),j=e(56766),K=e(65455),z=e(43339),Z=e(78889),ae=e(34719),J=e(34807),oe=e(41165),Ee=e(98102),me=e(69659),re=e(9405),le=e(84128),pe=e(10339),ee=e(25503),se=e(35029),Q=e(38894),G=e(88683),q=e(72535),X=e(5191),de=e(35224),Be=e(41490),ke=e(88144),He=e(40538),ue=e(91363),Oe=e(72142),Fe=e(79841),Ie=e(13026),we=e(94893),Re=e(51275),_e=e(39856),et=e(57426),qe=e(67307),Je=e(69823),lt=e(87691),at=e(29781),Xe=e(65987),gt=e(19670),ot=e(24505),Ye=e(20888),mt=e(50800),ce=e(4387),be=e(31438),Te=e(86635),Ke=e(8861),ge=e(99562),Me=e(60325),ye=e(729),fe=e(26993),he=e(78056),De=e(46920),Ae=e(45253),Ne=e(56506),Ze=e(2352),Se=e(20941),Ue=e(58321),Qe=e(12402),pt=e(63512),bt=e(98736),yt=e(89719),Mt=e(45576),At=e(97389),Pt=e(94437),rn=e(70161),Fn=e(97097),kn=e(30909),Jn=e(38484),qn=e(14391),Ut=e(42044),ut=e(74285),nt=e(68037),vt=e(35919),ht=e(18543),It=e(6264),Ft=e(17784),en=e(26338),sn=e(16065),Mn=e(73892),En=e(53546),yn=e(39198),Bn=e(12006),ea=e(92099),Qn=e(64260),Kn=e(12580),Ua=e(23622),pa=e(85615),va=e(67487),za=e(19801),ja=e(41200),Ea=e(70044),ma=e(68118),Xa=e(58564),Oa=e(2357),ss=e(30991),Ks=e(30979),Ss=e(90330),Bs=e(97759),ls=e(94270),ws=e(73267),qs=e(63619),Da=e(31403),Vs=e(26202),Es=e(64319),er=e(8125),dr=e(15670),es=e(43714),tr=e(29460),Is=e(64353),ts=e(24799),Zs=e(19825),Xt=e(13393),kt=e(57227),vn=e(81764),An=e(62157),Wn=e(77117),Xn=e(11543),Ha=e(70132),Qa=e(54897),ka=e(53217),ys=e(62997),xs=e(27501),Ga=e(60857),or=e.n(Ga),bs={};for(const Nn in Ga)["default","Icon","IconButton","ConfirmButton","DeleteButton","Tooltip","PopoverController","Popover","Portal","getPortalContainer","PortalContainer","CustomScrollbar","TabbedContainer","ClipboardButton","Cascader","ButtonCascader","InlineToast","LoadingPlaceholder","LoadingBar","ColorPicker","SeriesColorPicker","ColorPickerInput","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","EmptySearchResult","UnitPicker","StatsPicker","RefreshPicker","defaultIntervals","TimeRangePicker","TimePickerTooltip","TimeOfDayPicker","TimeZonePicker","WeekStartPicker","DatePicker","DatePickerWithInput","DateTimePicker","List","InteractiveTable","TagsInput","Pagination","Tag","TagList","FilterPill","ConfirmModal","QueryField","CodeEditor","ReactMonacoEditor","CodeEditorSuggestionItemKind","variableSuggestionToCodeEditorSuggestion","Modal","ModalHeader","ModalTabsHeader","ModalTabContent","ModalsProvider","ModalRoot","ModalsController","ModalsContext","PageToolbar","SetInterval","Table","TableCellDisplayMode","TableInputCSV","TabsBar","Tab","VerticalTab","TabContent","Counter","RenderUserContentAsHTML","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","Sparkline","Gauge","Graph","GraphWithLegend","GraphContextMenu","GraphContextMenuHeader","BarGauge","VizTooltip","VizTooltipContainer","SeriesTable","SeriesTableRow","VizRepeater","graphTimeFormat","graphTickFormatter","PanelChrome","PanelChromeLoadingIndicator","PanelChromeErrorIndicator","PanelContextProvider","PanelContextRoot","usePanelContext","VizLayout","SeriesVisibilityChangeBehavior","VizLegend","VizLegendListItem","Alert","GraphSeriesToggler","Collapse","ControlledCollapse","CollapsableSection","LogLabels","LogMessageAnsi","LogRows","getLogRowStyles","DataLinkButton","FieldLinkList","FullWidthButtonContainer","ClickOutsideWrapper","CallToActionCard","ContextMenu","Menu","MenuGroup","MenuItem","WithContextMenu","DataLinksInlineEditor","DataLinkInput","DataLinksContextMenu","SeriesIcon","InfoBox","FeatureBadge","FeatureInfoBox","JSONFormatter","JsonExplorer","ErrorBoundary","ErrorBoundaryAlert","withErrorBoundary","ErrorWithStack","DataSourceHttpSettings","CustomHeadersSettings","AlertingSettings","SecureSocksProxySettings","TLSAuthSettings","CertificationKey","Spinner","FadeTransition","SlideOutTransition","Segment","SegmentAsync","SegmentInput","SegmentSelect","SegmentSection","Drawer","Slider","RangeSlider","Form","sharedInputStyle","InputControl","Button","LinkButton","ButtonGroup","clearButtonStyles","ToolbarButton","ToolbarButtonRow","ValuePicker","fieldMatchersUI","Link","Label","Field","Legend","FieldSet","FieldValidationMessage","InlineField","InlineSegmentGroup","InlineLabel","InlineFieldRow","FieldArray","resetSelectStyles","DropdownIndicator","getSelectStyles","HorizontalGroup","VerticalGroup","Container","Badge","RadioButtonGroup","RadioButtonList","Input","getInputStyles","AutoSizeInput","FilterInput","Switch","InlineSwitch","Checkbox","TextArea","FileUpload","TimeRangeInput","RelativeTimeRangePicker","Card","getCardStyles","CardContainer","FormattedValueDisplay","ButtonSelect","Dropdown","PluginSignatureBadge","InlineFormLabel","LegacyForms","LegacyInputStatus","ScaleDistribution","BarGaugeDisplayMode","UPlotConfigBuilder","UPLOT_AXIS_FONT_SIZE","UPlotChart","PlotLegend","GraphNG","FIXED_UNIT","TimeSeries","useGraphNGContext","preparePlotFrame","buildScaleKey","BrowserLabel","PanelContainer","convertOldAngularValueMapping","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","MultiSelect","Select","SelectContainer","VirtualizedSelect"].indexOf(Nn)<0&&(bs[Nn]=()=>Ga[Nn]);e.d(T,bs);var ur=e(52081),mr=e(19985),Sr=e(2594),Wr=e(29395),ms=e(46967),Mr=e(68668),ir=e(14747),tn=e(70862),pr=e(88892),$r=e(8944),Br=e(58255),it=e(97379),Dt=e(82381),Lt=e(47556),Gt=e(95794),Zt=e(19115),cn=e(72948),hn=e(35633),Tn=e(72777),fn=e(44342),Rt=e(71698),ya=e(51613),Sa=e(19426),Ca=e(26372),wa=e(13347),rs=e(23888),Fa=e(3200),zs=e(68416),_a=e(56709),Bt=e(57989),Ge=e(72269),We=e(68948),ct=e(16566),St=e(86979),$t=e(17882),qt=e(85951),Yt=e(72080);const Dn={SecretFormField:f.c,FormField:t.W,Select:r.Ph,AsyncSelect:r.qb,IndicatorsContainer:c.B,NoOptionsMessage:s.P,Input:n.I,Switch:g.r}},19801:(H,T,e)=>{"use strict";e.d(T,{n:()=>g});var t=e(52423),n=e(68404),c=e(22163),s=e(7804);const r=(0,s.B)(f=>({enter:t.css`
      label: enter;
      opacity: 0;
    `,enterActive:t.css`
      label: enterActive;
      opacity: 1;
      transition: opacity ${f}ms ease-out;
    `,exit:t.css`
      label: exit;
      opacity: 1;
    `,exitActive:t.css`
      label: exitActive;
      opacity: 0;
      transition: opacity ${f}ms ease-out;
    `}));function g(f){const{visible:o,children:l,duration:a=250}=f,m=r(a);return n.createElement(c.Z,{in:o,mountOnEnter:!0,unmountOnExit:!0,timeout:a,classNames:m},l)}},41200:(H,T,e)=>{"use strict";e.d(T,{R:()=>g});var t=e(52423),n=e(68404),c=e(22163),s=e(7804);const r=(0,s.B)((f,o,l)=>({enter:t.css`
      label: enter;
      ${o}: 0;
      opacity: 0;
    `,enterActive:t.css`
      label: enterActive;
      ${o}: ${l}px;
      opacity: 1;
      transition: opacity ${f}ms ease-out, ${o} ${f}ms ease-out;
    `,exit:t.css`
      label: exit;
      ${o}: ${l}px;
      opacity: 1;
    `,exitActive:t.css`
      label: exitActive;
      opacity: 0;
      ${o}: 0;
      transition: opacity ${f}ms ease-out, ${o} ${f}ms ease-out;
    `}));function g(f){const{visible:o,children:l,duration:a=250,horizontal:m,size:d}=f,p=r(a,m?"width":"height",d);return n.createElement(c.Z,{in:o,mountOnEnter:!0,unmountOnExit:!0,timeout:a,classNames:p},l)}},3200:(H,T,e)=>{"use strict";e.d(T,{N:()=>o});var t=e(68404),n=e(75974),c=e(2445);function s(l,a){return a.width===l.width&&a.height===l.height}function r(l,a){return a.data===l.data}function g(l,a){return a.config===l.config}function f(l,a){let m=l.timeRange,d=a.timeRange;return m===d||d.from.valueOf()===m.from.valueOf()&&d.to.valueOf()===m.to.valueOf()}class o extends t.Component{constructor(a){super(a),this.plotContainer=(0,t.createRef)(),this.plotCanvasBBox=(0,t.createRef)(),this.state={plot:null}}reinitPlot(){let{width:a,height:m,plotRef:d}=this.props;if(this.state.plot?.destroy(),a===0&&m===0)return;this.props.config.addHook("setSize",y=>{y.over});const p={width:Math.floor(this.props.width),height:Math.floor(this.props.height),...this.props.config.getConfig()};(0,c.Zp)("UPlot",!1,"Reinitializing plot",p);const h=new n.Z(p,this.props.data,this.plotContainer.current);d&&d(h),this.setState({plot:h})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){this.state.plot?.destroy()}componentDidUpdate(a){let{plot:m}=this.state;s(a,this.props)?g(a,this.props)?r(a,this.props)?f(a,this.props)||m?.setScale("x",{min:this.props.timeRange.from.valueOf(),max:this.props.timeRange.to.valueOf()}):m?.setData(this.props.data):this.reinitPlot():m?.setSize({width:Math.floor(this.props.width),height:Math.floor(this.props.height)})}render(){return t.createElement("div",{style:{position:"relative"}},t.createElement("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children)}}},68416:(H,T,e)=>{"use strict";e.d(T,{l:()=>m});var t=e(68404),n=e(89890),c=e(425),s=e(21760),r=e(36512),g=e(40538),f=e(72648),o=e(729),l=e(78056);const a=d=>d==null?"-":d.toFixed(1),m=t.memo(({data:d,config:p,placement:h,calcs:y,displayMode:v,...i})=>{const u=(0,f.l4)(),P=p.getSeries().map(E=>{const C=E.props,b=C.dataFrameFieldIndex,S=p.getAxisPlacement(E.props.scaleKey);if(!b)return;const M=d[b.frameIndex]?.fields[b.fieldIndex];if(!M||M.config.custom?.hideFrom?.legend)return;const x=(0,n.C)(M,d[b.frameIndex],d),L=(0,c.YO)(M,u).color;return{disabled:!(C.show??!0),fieldIndex:b,color:L,label:x,yAxis:S===g.LB.Left||S===g.LB.Bottom?1:2,getDisplayValues:()=>{if(!y?.length)return[];const B=M.display??a;let w=null;const R=(0,s.Kx)({field:M,reducers:y});return y.map(A=>{const U=s.TB.get(A);let I=B;return U.id===s.gz.diffperc&&(I=(0,r.U)({field:{...M,config:{...M.config,unit:"percentunit"}},theme:u})),(U.id===s.gz.count||U.id===s.gz.changeCount||U.id===s.gz.distinctCount)&&(w||(w=(0,r.U)({field:{...M,config:{...M.config,unit:"none"}},theme:u})),I=w),{...I(R[A]),title:U.name,description:U.description}})},getItemKey:()=>`${x}-${b.frameIndex}-${b.fieldIndex}`}}).filter(E=>E!==void 0);return t.createElement(o.AY.Legend,{placement:h,...i},t.createElement(l.l,{placement:h,items:P,displayMode:v,sortBy:i.sortBy,sortDesc:i.sortDesc}))});m.displayName="PlotLegend"},26372:(H,T,e)=>{"use strict";e.d(T,{q:()=>n});var t=e(40538);const n={drawStyle:[{label:"Lines",value:t.l8.Line},{label:"Bars",value:t.l8.Bars},{label:"Points",value:t.l8.Points}],lineInterpolation:[{description:"Linear",value:t.KC.Linear,icon:"gf-interpolation-linear"},{description:"Smooth",value:t.KC.Smooth,icon:"gf-interpolation-smooth"},{description:"Step before",value:t.KC.StepBefore,icon:"gf-interpolation-step-before"},{description:"Step after",value:t.KC.StepAfter,icon:"gf-interpolation-step-after"}],barAlignment:[{description:"Before",value:t.pu.Before,icon:"gf-bar-alignment-before"},{description:"Center",value:t.pu.Center,icon:"gf-bar-alignment-center"},{description:"After",value:t.pu.After,icon:"gf-bar-alignment-after"}],showPoints:[{label:"Auto",value:t.Jp.Auto,description:"Show points when the density is low"},{label:"Always",value:t.Jp.Always},{label:"Never",value:t.Jp.Never}],axisPlacement:[{label:"Auto",value:t.LB.Auto,description:"First field on the left, everything else on the right"},{label:"Left",value:t.LB.Left},{label:"Right",value:t.LB.Right},{label:"Hidden",value:t.LB.Hidden}],fillGradient:[{label:"None",value:t.FI.None},{label:"Opacity",value:t.FI.Opacity,description:"Enable fill opacity gradient"},{label:"Hue",value:t.FI.Hue,description:"Small color hue gradient"},{label:"Scheme",value:t.FI.Scheme,description:"Use color scheme to define gradient"}],stacking:[{label:"Off",value:t.o0.None},{label:"Normal",value:t.o0.Normal},{label:"100%",value:t.o0.Percent}],thresholdsDisplayModes:[{label:"Off",value:t.i3.Off},{label:"As lines",value:t.i3.Line},{label:"As lines (dashed)",value:t.i3.Dashed},{label:"As filled regions",value:t.i3.Area},{label:"As filled regions and lines",value:t.i3.LineAndArea},{label:"As filled regions and lines (dashed)",value:t.i3.DashedAndArea}]}},23888:(H,T,e)=>{"use strict";e.d(T,{ff:()=>m,gD:()=>l,mr:()=>p});var t=e(20112),n=e(43211),c=e(47513),s=e(38849),r=e(40538),g=e(4176),f=e(13890),o=e(36562);const l=12,a=8;class m extends f.L{merge(v){this.props.size=(0,o.V)("max",this.props.size,v.size),this.props.label||(this.props.label=v.label),this.props.placement===r.LB.Auto&&(this.props.placement=v.placement)}calculateSpace(v,i,u,P,E){const C=v.axes[i],b=v.scales[C.scale];if(C.side!==2||!b)return 30;const S=40;if(b.time){const M=E/S,x=(P-u)/M,O=p(v,[u],i,S,x);return(0,g.X1)(O[0],l).width+18}return S}calculateAxisSize(v,i,u){const P=v.axes[u];let E=P.ticks.size;if(P.side===2)E+=P.gap+l;else if(i?.length){let C=i.reduce((S,M)=>Math.max(S,(0,g.X1)(M,l).width),0);const b=Math.min(v.width*.4,C);E+=P.gap+P.labelGap+b}return Math.ceil(E)}getConfig(){let{scaleKey:v,label:i,show:u=!0,placement:P=r.LB.Auto,grid:E={show:!0},ticks:C,space:b,filter:S,gap:M=5,formatValue:x,splits:O,values:L,incrs:B,isTime:w,timeZone:R,theme:A,tickLabelRotation:U,size:I,color:N,border:F,decimals:D,distr:Y=r.wf.Linear}=this.props;const j=`${l}px ${A.typography.fontFamily}`,K=A.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,t.br)(v)&&(O=[0,1]),D===0&&Y===r.wf.Linear&&(S=(Z,ae)=>ae.map(J=>Number.isInteger(J)?J:null));let z={scale:v,show:u,stroke:N??A.colors.text.primary,side:h(P),font:j,size:I??((Z,ae,J)=>this.calculateAxisSize(Z,ae,J)),rotate:U,gap:M,labelGap:0,grid:{show:E.show,stroke:K,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:K,width:1/devicePixelRatio,size:4},C),splits:O,values:L,space:b??((Z,ae,J,oe,Ee)=>this.calculateSpace(Z,ae,J,oe,Ee)),filter:S,incrs:B};return F!=null&&(z.border=F),i!=null&&i.length>0&&(z.label=i,z.labelSize=l+a,z.labelFont=j,z.labelGap=a),L?z.values=L:w?z.values=p:x&&(z.values=(Z,ae,J,oe,Ee)=>{let me=(0,n.d)((0,n.O)(Ee,6));return ae.map(re=>x(re,me>0?me:void 0))}),z.timeZone=R,z}}const d={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:28*24*60*60*1e3,year:365*24*60*60*1e3};function p(y,v,i,u,P){const E=y.axes[i].timeZone,C=y.scales.x,b=(C?.max??0)-(C?.min??0),S=Math.round(d.year/d.day)*d.day,M=Math.round(P/d.day)*d.day;let x=c.U6.interval.year;return P<d.second?x=c.U6.interval.millisecond:P<=d.minute?x=c.U6.interval.second:b<=d.day?x=c.U6.interval.minute:P<=d.day?x=c.U6.interval.hour:b<d.year?x=c.U6.interval.day:M===S?x=c.U6.interval.year:P<=d.year&&(x=c.U6.interval.month),v.map(O=>O==null?"":(0,s.dq)(O,{format:x,timeZone:E}))}function h(y){switch(y){case r.LB.Top:return 0;case r.LB.Right:return 1;case r.LB.Bottom:return 2;case r.LB.Left:}return 3}},13347:(H,T,e)=>{"use strict";e.d(T,{U:()=>C});var t=e(82897),n=e(75974),c=e(69311),s=e(38306),r=e(40538),g=e(2445),f=e(23888),o=e(36562),l=e(66926),a=e(64724),m=e(13890),d=e(52240);class p extends m.L{getConfig(){const{facets:S,drawStyle:M,pathBuilder:x,pointsBuilder:O,pointsFilter:L,lineInterpolation:B,lineWidth:w,lineStyle:R,barAlignment:A,barWidthFactor:U,barMaxWidth:I,showPoints:N,pointSize:F,scaleKey:D,pxAlign:Y,spanNulls:j,show:K=!0}=this.props;let z={},Z=this.getLineColor();z.stroke=Z,x!=null?(z.paths=x,z.width=w):M===r.l8.Points?z.paths=()=>null:M!=null&&(z.width=w,R&&R.fill!=="solid"&&(R.fill==="dot"&&(z.cap="round"),z.dash=R.dash??[10,10]),z.paths=(oe,Ee,me,re)=>y(M,B,A,U,I)(oe,Ee,me,re));const ae=typeof Z=="string"?Z:(oe,Ee)=>oe.series[Ee]._stroke,J={points:{stroke:ae,fill:ae,size:!F||F<w?void 0:F,filter:L}};return O!=null?J.points.show=O:M===r.l8.Points?J.points.show=!0:N===r.Jp.Auto?M===r.l8.Bars&&(J.points.show=!1):N===r.Jp.Never?J.points.show=!1:N===r.Jp.Always&&(J.points.show=!0),{scale:D,facets:S,spanGaps:typeof j=="number"?!1:j,value:()=>"",pxAlign:Y,show:K,fill:this.getFill(),...z,...J}}getLineColor(){const{lineColor:S,gradientMode:M,colorMode:x,thresholds:O,theme:L,hardMin:B,hardMax:w,softMin:R,softMax:A,dynamicSeriesColor:U}=this.props;return M===r.FI.None&&U?(I,N)=>U(N)??S??l.R:M===r.FI.Scheme&&x?.id!==l.S.Fixed?(0,d.P2)(1,L,x,O,B,w,R,A):S??l.R}getFill(){const{lineColor:S,fillColor:M,gradientMode:x,fillOpacity:O,colorMode:L,thresholds:B,theme:w,hardMin:R,hardMax:A,softMin:U,softMax:I,dynamicSeriesColor:N}=this.props;if(M)return M;const F=x??r.FI.None,D=(O??0)/100;if(F===r.FI.None&&N&&D>0)return(Y,j)=>{let K=Y.series[j]._stroke;return a.alpha(K??"",D)};switch(F){case r.FI.Opacity:return(0,d.DT)(M??S,D);case r.FI.Hue:return(0,d.oN)(M??S,D,w);case r.FI.Scheme:if(L?.id!==l.S.Fixed)return(0,d.P2)(D,w,L,B,R,A,U,I);default:if(D>0)return a.alpha(S??"",D)}}}let h;function y(b,S,M=0,x=.6,O=200){const L=n.Z.paths;if(h||(h={linear:L.linear(),smooth:L.spline(),stepBefore:L.stepped({align:-1,extend:!0}),stepAfter:L.stepped({align:1,extend:!0})}),b===r.l8.Bars){let B=`bars|${M}|${x}|${O}`;return h[B]||(h[B]=L.bars({size:[x,O],align:M})),h[B]}else if(b===r.l8.Line){if(S===r.KC.StepBefore)return h.stepBefore;if(S===r.KC.StepAfter)return h.stepAfter;if(S===r.KC.Smooth)return h.smooth}return h.linear}var v=e(35008),i=e.n(v),u=e(24177);function P(b){const S=b.config.mode===r.i3.Dashed||b.config.mode===r.i3.DashedAndArea?[10,10]:null;function M(N,F,D,Y){let j=N.ctx,K=0;for(let z=0;z<D.length;z++)if(D[z].color==="transparent"){K=z;break}j.lineWidth=2,S&&j.setLineDash(S);for(let z=1;z<D.length;z++){const Z=D[z];let ae;K>=z&&z>0?ae=i()(Y.visualization.getColorByName(D[z-1].color)):ae=i()(Y.visualization.getColorByName(Z.color)),ae.getAlpha()===1&&ae.setAlpha(.7);let J=Math.round(N.bbox.left),oe=Math.round(N.valToPos(Z.value,F,!0)),Ee=Math.round(N.bbox.left+N.bbox.width),me=Math.round(N.valToPos(Z.value,F,!0));j.beginPath(),j.moveTo(J,oe),j.lineTo(Ee,me),j.strokeStyle=ae.toString(),j.stroke()}}function x(N,F,D,Y){let j=N.ctx,K=(0,d.KV)(N,F,D.map(z=>{let Z=i()(Y.visualization.getColorByName(z.color));return Z.getAlpha()===1&&Z.setAlpha(.15),[z.value,Z.toString()]}),!0);j.fillStyle=K,j.fillRect(N.bbox.left,N.bbox.top,N.bbox.width,N.bbox.height)}const{scaleKey:O,thresholds:L,theme:B,config:w,hardMin:R,hardMax:A,softMin:U,softMax:I}=b;return N=>{const F=N.ctx,{min:D,max:Y}=N.scales.x,{min:j,max:K}=N.scales[O];if(D==null||Y==null||j==null||K==null)return;let{steps:z,mode:Z}=L;if(Z===u.H.Percentage){let[ae,J]=(0,d.A9)(N,O,R,A,U,I),oe=J-ae;z=z.map(Ee=>({...Ee,value:ae+oe*(Ee.value/100)}))}switch(F.save(),w.mode){case r.i3.Line:case r.i3.Dashed:M(N,O,z,B);break;case r.i3.Area:x(N,O,z,B);break;case r.i3.LineAndArea:case r.i3.DashedAndArea:x(N,O,z,B),M(N,O,z,B)}F.restore()}}const E={drag:{setScale:!1},points:{size:(b,S)=>b.series[S].points.size*2,width:(b,S,M)=>M/4},focus:{prox:30}};class C{constructor(S=c.Ys){this.series=[],this.axes={},this.scales=[],this.bands=[],this.stackingGroups=[],this.hasLeftAxis=!1,this.hooks={},this.tz=void 0,this.sync=!1,this.mode=1,this.frames=void 0,this.thresholds={},this.tooltipInterpolator=void 0,this.padding=void 0,this.prepData=void 0,this.scaleKeys=["",""],this.tzDate=M=>{let x=new Date(M);return this.tz?n.Z.tzDate(x,this.tz):x},this.tz=(0,s.Pr)(S,Date.now())?.ianaName}addHook(S,M){(0,g.Zp)("UPlotConfigBuilder",!1,"addHook",S),this.hooks[S]||(this.hooks[S]=[]),this.hooks[S].push(M)}addThresholds(S){this.thresholds[S.scaleKey]||(this.thresholds[S.scaleKey]=S,this.addHook("drawClear",P(S)))}addAxis(S){S.placement=S.placement??r.LB.Auto,S.grid=S.grid??{};let M=S.scaleKey;if(M==="x"&&(M+=S.timeZone??""),this.axes[M]){this.axes[M].merge(S);return}S.placement===r.LB.Auto&&(S.placement=this.hasLeftAxis?r.LB.Right:r.LB.Left),S.placement===r.LB.Left&&(this.hasLeftAxis=!0),S.placement===r.LB.Hidden&&(S.grid.show=!1,S.size=0),this.axes[M]=new f.ff(S)}getAxisPlacement(S){return this.axes[S]?.props.placement??r.LB.Left}setCursor(S){this.cursor=(0,t.merge)({},this.cursor,S)}setMode(S){this.mode=S}setSelect(S){this.select=S}addSeries(S){this.series.push(new p(S))}getSeries(){return this.series}addScale(S){const M=this.scales.find(x=>x.props.scaleKey===S.scaleKey);if(M){M.merge(S);return}this.scales.push(new o.I(S))}addBand(S){this.bands.push(S)}setStackingGroups(S){this.stackingGroups=S}getStackingGroups(){return this.stackingGroups}setTooltipInterpolator(S){this.tooltipInterpolator=S}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(S){this.prepData=M=>(this.frames=M,S(M,this.getStackingGroups()))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(S){this.padding=S}getConfig(){const S={...g.qt,mode:this.mode,series:[this.mode===2?null:{value:()=>""}]};S.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map(x=>x.getConfig()),S.series=[...S.series,...this.series.map(x=>x.getConfig())],S.scales=this.scales.reduce((x,O)=>({...x,...O.getConfig()}),{}),S.hooks=this.hooks,S.select=this.select;const M=(x="")=>(O,L)=>{let B=O.series[L].points._stroke;if(typeof B!="string"){let w=this.frames[0].fields[L];B=w.display(w.values.get(O.cursor.idxs[L])).color}return B+x};return S.cursor=(0,t.merge)({},E,{points:{stroke:M("80"),fill:M()}},this.cursor),S.tzDate=this.tzDate,Array.isArray(this.padding)&&(S.padding=this.padding),this.stackingGroups.length&&this.stackingGroups.forEach(x=>{(0,g.Kq)(x).forEach(O=>{this.addBand(O)})}),this.bands.length&&(S.bands=this.bands),S}ensureNonOverlappingAxes(S){const M=S.find(L=>L.props.scaleKey==="x"),x=S.filter(L=>L.props.grid?.show===void 0),O=x.findIndex(L=>L.props.placement===r.LB.Left||L.props.placement===r.LB.Right||L.props.placement===r.LB.Bottom&&L!==M);for(let L=0;L<x.length;L++)x[L]===M||L===O?x[L].props.grid.show=!0:x[L].props.grid.show=!1;return S}}},36562:(H,T,e)=>{"use strict";e.d(T,{I:()=>g,V:()=>f});var t=e(75974),n=e(15128),c=e(20112),s=e(40538),r=e(13890);class g extends r.L{merge(l){this.props.min=f("min",this.props.min,l.min),this.props.max=f("max",this.props.max,l.max)}getConfig(){let{isTime:l,scaleKey:a,min:m,max:d,softMin:p,softMax:h,range:y,direction:v,orientation:i,centeredZero:u,decimals:P}=this.props;const E=this.props.distribution,C=l?{}:{distr:E===s.wf.Symlog?4:E===s.wf.Log?3:E===s.wf.Ordinal?2:1,log:E===s.wf.Log||E===s.wf.Symlog?this.props.log??2:void 0,asinh:E===s.wf.Symlog?this.props.linearThreshold??1:void 0};if(E===s.wf.Log){let R=this.props.log,A=R===2?Math.log2:Math.log10;m!=null&&(m<=0?m=null:m=R**Math.floor(A(m))),d!=null&&(d<=0?d=null:d=R**Math.ceil(A(d))),p!=null&&(p<=0?p=null:p=R**Math.floor(A(p))),h!=null&&(h<=0?h=null:h=R**Math.ceil(A(h)))}let b=p==null?3:1,S=h==null?3:1;const M={min:{pad:.1,hard:m??-1/0,soft:p||0,mode:b},max:{pad:.1,hard:d??1/0,soft:h||0,mode:S}};let x=p==null&&m!=null,O=h==null&&d!=null,L=x&&O;const B=(R,A,U,I)=>{const N=R.scales[I];let F=[A,U];if(!L&&A==null&&U==null)return F;let D=N.log??10;if(N.distr===1||N.distr===2||N.distr===4){if(u){let Y=Math.abs(A),j=Math.abs(U),K=Math.max(Y,j);A=-K,U=K}N.distr===4?F=t.Z.rangeAsinh(A,U,D,!0):F=t.Z.rangeNum(x?m:A,O?d:U,M)}else N.distr===3&&(F=t.Z.rangeLog(m??A,d??U,D,!0));if(P===0)if(N.distr===1||N.distr===2)F[0]=(0,n.mB)(F[0],1),F[1]=(0,n.UO)(F[1],1);else if(N.distr===3){let Y=N.log===2?Math.log2:Math.log10;if(F[0]<=1)F[0]=1;else{let K=Math.floor(Y(F[0]));F[0]=D**K}let j=Math.ceil(Y(F[1]));F[1]=D**j,F[0]===F[1]&&(F[1]*=D)}else N.distr===4&&(F[0]=(0,n.mB)(F[0],1),F[1]=(0,n.UO)(F[1],1));return(N.distr===1||N.distr===4)&&(x&&(F[0]=m),O&&(F[1]=d)),F[0]>=F[1]&&(F[0]=N.distr===3?1:0,F[1]=100),F};let w=!l&&!L;return(0,c.br)(a)&&(w=!1,y=[0,1]),{[a]:{time:l,auto:w,range:y??B,dir:v,ori:i,...C}}}}function f(o,l,a){const m=l!=null,d=a!=null;return m?d?o==="min"?l<a?l:a:l>a?l:a:l:a}},52240:(H,T,e)=>{"use strict";e.d(T,{A9:()=>h,DT:()=>l,KV:()=>d,P2:()=>y,oN:()=>a});var t=e(35008),n=e.n(t),c=e(64724),s=e(66926),r=e(24177),g=e(40538),f=e(4176);function o(v,i,u){let P=0,E=0,C=0,b=0;return v===m.Down?(E=i.top,b=i.top+i.height):v===m.Left?(P=i.left+i.width,C=i.left):v===m.Up?(E=i.top+i.height,b=i.top):v===m.Right&&(P=i.left,C=i.left+i.width),u.createLinearGradient(P,E,C,b)}function l(v,i){return(u,P)=>{const E=(0,f.AE)(),C=o(u.scales.x.ori===g.wN.Horizontal?m.Down:m.Left,u.bbox,E);return C.addColorStop(0,c.alpha(v,i)),C.addColorStop(1,c.alpha(v,0)),C}}function a(v,i,u){return(P,E)=>{const C=(0,f.AE)(),b=o(P.scales.x.ori===g.wN.Horizontal?m.Down:m.Left,P.bbox,C),S=n()(v).spin(-15),M=n()(v).spin(15);return u.isDark?(b.addColorStop(0,M.lighten(10).setAlpha(i).toString()),b.addColorStop(1,S.darken(10).setAlpha(i).toString())):(b.addColorStop(0,M.lighten(10).setAlpha(i).toString()),b.addColorStop(1,S.setAlpha(i).toString())),b}}var m=(v=>(v[v.Right=0]="Right",v[v.Up=1]="Up",v[v.Left=2]="Left",v[v.Down=3]="Down",v))(m||{});function d(v,i,u,P=!1){let E=v.scales[i],C=null,b=null;for(let F=0;F<u.length;F++){let D=u[F][0];if((D<=E.min||C==null)&&(C=F),b=F,D>=E.max)break}if(C===b)return u[C][1];let S=u[C][0],M=u[b][0];S===-1/0&&(S=E.min),M===1/0&&(M=E.max);let x=Math.round(v.valToPos(S,i,!0)),O=Math.round(v.valToPos(M,i,!0)),L=x-O;if(L===0)return u[b][1];let B,w,R,A;v.scales.x.ori===g.wN.Horizontal?(B=R=0,w=x,A=O):(w=A=0,B=x,R=O);let I=(0,f.AE)().createLinearGradient(B,w,R,A),N;for(let F=C;F<=b;F++){let D=u[F],Y=F===C?x:F===b?O:Math.round(v.valToPos(D[0],i,!0)),j=(x-Y)/L;P&&F>C&&I.addColorStop(j,N),I.addColorStop(j,N=D[1])}return I}function p(v,i){let u=v.scales[i],P=1/0,E=-1/0;return v.series.forEach((C,b)=>{if(C.show&&C.scale===i)if(C.min==null){let S=v.data[b];for(let M=0;M<S.length;M++)S[M]!=null&&(P=Math.min(P,S[M]),E=Math.max(E,S[M]))}else P=Math.min(P,C.min),E=Math.max(E,C.max)}),E===P&&(P=u.min,E=u.max),[P,E]}function h(v,i,u,P,E,C){let b=u??E??null,S=P??C??null;if(b==null||S==null){let[M,x]=p(v,i);b=b??M??0,S=S??x??100}return[b,S]}function y(v,i,u,P,E,C,b,S){if(!u)throw Error("Missing colorMode required for color scheme gradients");if(!P)throw Error("Missing thresholds required for color scheme gradients");return(M,x)=>{let O=M.series[x].scale,L="";if(u.id===s.S.Thresholds)if(P.mode===r.H.Absolute){const B=P.steps.map(w=>[w.value,c.alpha(i.visualization.getColorByName(w.color),v)]);L=d(M,O,B,!0)}else{const[B,w]=h(M,O,E,C,b,S),R=w-B,A=P.steps.map(U=>[B+R*(U.value/100),c.alpha(i.visualization.getColorByName(U.color),v)]);L=d(M,O,A,!0)}else if(u.getColors){const B=u.getColors(i),[w,R]=h(M,O,E,C,b,S),A=R-w,U=B.map((I,N)=>[w+A*(N/(B.length-1)),c.alpha(i.visualization.getColorByName(I),v)]);L=d(M,O,U,!1)}return L}}},66243:(H,T,e)=>{"use strict";e.d(T,{T:()=>r});var t=e(68404),n=e(24015),c=e(50215),s=e(45807);function r({id:g,events:f,renderEventMarker:o,mapEventToXYCoords:l,config:a}){const m=(0,t.useRef)(),[d,p]=(0,t.useState)(0),h=(0,n.Z)();(0,t.useLayoutEffect)(()=>{a.addHook("init",v=>{m.current=v}),a.addHook("draw",()=>{h()&&p(v=>v+1)})},[a,p]);const y=(0,t.useMemo)(()=>{const v=[];if(!m.current||f.length===0)return v;for(let i=0;i<f.length;i++){const u=f[i];for(let P=0;P<u.length;P++){const E=l(u,{fieldIndex:P,frameIndex:i});E&&v.push(t.createElement(c.J,{...E,key:`${g}-marker-${i}-${P}`},o(u,{fieldIndex:P,frameIndex:i})))}}return t.createElement(t.Fragment,null,v)},[f,o,d]);return m.current?t.createElement(s.K,{left:m.current.bbox.left/window.devicePixelRatio,top:m.current.bbox.top/window.devicePixelRatio},y):null}},50215:(H,T,e)=>{"use strict";e.d(T,{J:()=>n});var t=e(68404);const n=({x:c,y:s,children:r})=>t.createElement("div",{style:{position:"absolute",top:`${s}px`,left:`${c}px`}},r)},45807:(H,T,e)=>{"use strict";e.d(T,{K:()=>c});var t=e(52423),n=e(68404);const c=({children:s,left:r,top:g})=>{const f=(0,n.useMemo)(()=>t.css`
      position: absolute;
      overflow: visible;
      left: ${r}px;
      top: ${g}px;
    `,[r,g]);return n.createElement("div",{className:f},s)}},56709:(H,T,e)=>{"use strict";e.d(T,{Jx:()=>n.J,K2:()=>c.K,TZ:()=>t.T});var t=e(66243),n=e(50215),c=e(45807)},16366:(H,T,e)=>{"use strict";e.d(T,{C:()=>o});var t=e(82897),n=e.n(t),c=e(68404);const s=.1,r=2,g=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Shift"," "]),f=l=>{let a=l.root.closest("[tabindex]"),m=new Set,d=null,p=null;if(!a)return;const h=(C,b)=>{const{cursor:S}=l;if(S.left===void 0||S.top===void 0)return;const{width:M,height:x}=l.over.style,[O,L]=[Math.floor(parseFloat(M)),Math.floor(parseFloat(x))];l.setCursor({left:(0,t.clamp)(S.left+C,0,O),top:(0,t.clamp)(S.top+b,0,L)})},y=C=>{if(m.size===0||!l){p=null;return}const M=(C-(p??C))*s;let x=0,O=0;m.has("ArrowUp")&&(O-=M),m.has("ArrowDown")&&(O+=M),m.has("ArrowLeft")&&(x-=M),m.has("ArrowRight")&&(x+=M),m.has("Shift")&&(x*=r,O*=r),h(x,O);const{cursor:L}=l;if(m.has(" ")&&L){const B=Number(l.over.style.height.slice(0,-2));l.setSelect({left:L.left<d?L.left:d,top:0,width:Math.abs(L.left-(d??L.left)),height:B},!1)}p=C,window.requestAnimationFrame(y)},v=C=>{if(C.key==="Tab"){l.setCursor({left:-5,top:-5});return}if(!g.has(C.key))return;if(C.preventDefault(),C.stopPropagation(),!m.has(C.key)){const S=m.size===0;m.add(C.key),d=C.key===" "&&d===null?l.cursor.left:d,S&&window.requestAnimationFrame(y)}},i=C=>{g.has(C.key)&&(m.delete(C.key),C.key===" "&&(C.preventDefault(),C.stopPropagation(),l.setSelect(l.select),d=null))},u=()=>{if(!a?.matches(":focus-visible"))return;const C=parseFloat(l.over.style.width),b=parseFloat(l.over.style.height);l.setCursor({left:C/2,top:b/2})},P=()=>{p=null,d=null,m.clear(),l.setSelect({left:0,top:0,width:0,height:0},!1)};a.addEventListener("keydown",v),a.addEventListener("keyup",i),a.addEventListener("focus",u),a.addEventListener("blur",P);const E=()=>{a?.removeEventListener("keydown",v),a?.removeEventListener("keyup",i),a?.removeEventListener("focus",u),a?.removeEventListener("blur",P),a=null};(l.hooks.destroy??=[]).push(E)},o=({config:l})=>((0,c.useLayoutEffect)(()=>l.addHook("init",f),[l]),null)},1105:(H,T,e)=>{"use strict";e.d(T,{_:()=>P,i:()=>i});var t=e(68404),n=e(24015),c=e(29431),s=e(36512),r=e(66926),g=e(89890),f=e(20112),o=e(14582),l=e(76553),a=e(40538),m=e(72648),d=e(85511),p=e(50800),h=e(20888),y=e(2445);const v=10,i=({mode:E=a.f3.Single,sortOrder:C=a.As.None,sync:b,timeZone:S,config:M,renderTooltip:x,...O})=>{const L=(0,t.useRef)(),B=(0,m.l4)(),[w,R]=(0,t.useState)(null),[A,U]=(0,t.useState)(null),[I,N]=(0,t.useState)([]),[F,D]=(0,t.useState)(null),[Y,j]=(0,t.useState)(!1),K=(0,n.Z)(),z="TooltipPlugin";if((0,t.useEffect)(()=>{(0,y.Zp)(z,!0,`Focused series: ${w}, focused point: ${A}`)},[A,w]),(0,t.useLayoutEffect)(()=>{let Ee;const me=()=>{K()&&(j(!0),L.current?.root.classList.add("plot-active"))},re=()=>{K()&&(D(null),j(!1),L.current?.root.classList.remove("plot-active"))};M.addHook("syncRect",(pe,ee)=>Ee=ee),M.addHook("init",pe=>{L.current=pe,pe.root.parentElement?.addEventListener("focus",me),pe.over.addEventListener("mouseenter",me),pe.root.parentElement?.addEventListener("blur",re),pe.over.addEventListener("mouseleave",re),b&&b()===c.m.Crosshair&&pe.root.classList.add("shared-crosshair")});const le=M.getTooltipInterpolator();return le?M.addHook("setCursor",pe=>{le(R,U,ee=>{if(ee){D(null);return}if(!Ee)return;const{x:se,y:Q}=P(pe,Ee);se!==void 0&&Q!==void 0&&D({x:se,y:Q})},pe)}):(M.addHook("setLegend",pe=>{K()&&(U(pe.legend.idx),N(pe.legend.idxs.slice()))}),M.addHook("setCursor",pe=>{if(!Ee||!K())return;const{x:ee,y:se}=P(pe,Ee);D(ee!==void 0&&se!==void 0?{x:ee,y:se}:null)}),M.addHook("setSeries",(pe,ee)=>{K()&&R(ee)})),()=>{D(null),L.current&&(L.current.over.removeEventListener("mouseleave",re),L.current.over.removeEventListener("mouseenter",me),L.current.root.parentElement?.removeEventListener("focus",me),L.current.root.parentElement?.removeEventListener("blur",re))}},[M,D,j,U,N]),A===null||!Y&&b&&b()===c.m.Crosshair)return null;let Z=O.data.fields[0];if(!Z)return null;const ae=Z.display||(0,s.U)({field:Z,timeZone:S,theme:B});let J=null,oe=ae(Z.values.get(A)).text;if(x)J=x(O.data,w,A);else{if(E===a.f3.Single&&w!==null){const Ee=O.data.fields[w];if(!Ee)return null;const me=I?.[w]??A;oe=ae(Z.values.get(me)).text;const le=(Ee.display||(0,s.U)({field:Ee,timeZone:S,theme:B}))(Ee.values.get(me));J=t.createElement(p.c,{series:[{color:le.color||r.R,label:(0,g.C)(Ee,O.data,O.frames),value:le?(0,f.zc)(le):null}],timestamp:oe})}if(E===a.f3.Multi){let Ee=[];const me=O.data,re=me.fields,le=[];for(let pe=0;pe<re.length;pe++){const ee=me.fields[pe];if(!ee||ee===Z||ee.type===o.fS.time||ee.type!==o.fS.number||ee.config.custom?.hideFrom?.tooltip||ee.config.custom?.hideFrom?.viz)continue;const se=O.data.fields[pe].values.get(I[pe]),Q=ee.display(se);le.push(se),Ee.push({color:Q.color||r.R,label:(0,g.C)(ee,me,O.frames),value:Q?(0,f.zc)(Q):null,isActive:w===pe})}if(C!==a.As.None){const pe=[...Ee],ee=l.sortValues(C);Ee.sort((se,Q)=>{const G=pe.indexOf(se),q=pe.indexOf(Q);return ee(le[G],le[q])})}J=t.createElement(p.c,{series:Ee,timestamp:oe})}}return t.createElement(d.h_,null,J&&F&&t.createElement(h.S,{position:{x:F.x,y:F.y},offset:{x:v,y:v}},J))};function u({left:E,top:C},b){return E===void 0||C===void 0?!1:E<0||E>b.width||C<0||C>b.height}function P(E,C){let b,S;const M=E.cursor.left||0,x=E.cursor.top||0;if(u(E.cursor,C)){const O=E.posToIdx(M);if(x<0||x>C.height){let L=(0,y.ah)(E,O);L&&(S=C.top+L,M>=0&&M<=C.width&&(b=C.left+E.valToPos(E.data[0][E.posToIdx(M)],E.series[0].scale)))}}else b=C.left+M,S=C.top+x;return{x:b,y:S}}},99375:(H,T,e)=>{"use strict";e.d(T,{R:()=>s});var t=e(68404),n=e(2445);const c=5,s=({onZoom:r,config:g})=>{const[f,o]=(0,t.useState)(null);return(0,t.useEffect)(()=>{if(f){if((0,n.Zp)("ZoomPlugin",!1,"selected",f),f.bbox.width<c)return;r({from:f.min,to:f.max})}},[f]),(0,t.useLayoutEffect)(()=>{g.addHook("setSelect",l=>{const a=l.posToVal(l.select.left,"x"),m=l.posToVal(l.select.left+l.select.width,"x");o({min:a,max:m,bbox:{left:l.bbox.left/window.devicePixelRatio+l.select.left,top:l.bbox.top/window.devicePixelRatio,height:l.bbox.height/window.devicePixelRatio,width:l.select.width}}),l.setSelect({left:0,width:0},!1)})},[g]),null}},57989:(H,T,e)=>{"use strict";e.d(T,{Cm:()=>c.C,Rb:()=>t.R,ii:()=>n.i});var t=e(99375),n=e(1105),c=e(16366)},13890:(H,T,e)=>{"use strict";e.d(T,{L:()=>t});class t{constructor(c){this.props=c}}},2445:(H,T,e)=>{"use strict";e.d(T,{Bj:()=>h,Kq:()=>d,Zp:()=>P,ah:()=>y,i7:()=>p,qt:()=>a});var t=e(14582),n=e(2932),c=e(40538),s=e(73289),r=e(88383),g=e(86979);const f=/\b(YYYY|YY|MMMM|MMM|MM|M|DD|D|WWWW|WWW|HH|H|h|AA|aa|a|mm|m|ss|s|fff)\b/g;function o(E){return E.replace(f,C=>`{${C}}`)}const l=(E,C,b)=>{let S=C%2?b[0]||b[2]:b[1]||b[3];return b[C]||!S?0:8},a={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[l,l,l,l],series:[],hooks:{}};var m=(E=>(E[E.Pos=1]="Pos",E[E.Neg=-1]="Neg",E))(m||{});function d(E){let C=[],{series:b,dir:S}=E,M=b.length-1,x=b.slice().reverse();return x.forEach((O,L)=>{if(L!==M){let B=x[L+1];C.push({series:[O,B],dir:-1*S})}}),C}function p(E){let C=new Map;return E.fields.forEach(({config:b,values:S},M)=>{if(M===0)return;let{custom:x}=b;if(x==null||x.hideFrom?.viz)return;let{stacking:O}=x;if(O==null)return;let{mode:L,group:B}=O;if(L===c.o0.None)return;let w=S.toArray(),R=x.transform,A=v(R,w),U=x.drawStyle,I=U===c.l8.Bars?x.barAlignment:U===c.l8.Line?x.lineInterpolation:null,N=`${A}|${L}|${B}|${(0,g.z)(b)}|${U}|${I}`,F=C.get(N);F==null&&(F={series:[],dir:A},C.set(N,F)),F.series.push(M)}),[...C.values()]}function h(E,C,b){let S=Array(E.fields.length),M=C.length,x=E.length,O=M>0?Array(x).fill(0):[],L=M>0?Array(x).fill(!1):[],B=Array.from({length:M},()=>O.slice()),w=Array.from({length:M},()=>L.slice());if(C.forEach((R,A)=>{let U=w[A];R.series.forEach(I=>{let N=E.fields[I];if(N.config.custom?.hideFrom?.viz)return;let F=N.values.toArray();for(let D=0;D<x;D++)F[D]!=null&&(U[D]=!0)})}),E.fields.forEach((R,A)=>{let U=R.values.toArray();if(A===0){R.type===t.fS.time?S[A]=(0,n.J_)(R).values.toArray():S[A]=U;return}let{custom:I}=R.config;if(!I||I.hideFrom?.viz){S[A]=U;return}if(I.transform===c.pR.Constant){let F=U.findIndex(Y=>Y!=null),D=U[F];U=Array(U.length).fill(void 0),U[F]=D}else if(U=U.slice(),I.transform===c.pR.NegativeY)for(let F=0;F<U.length;F++)U[F]!=null&&(U[F]*=-1);let N=I.stacking?.mode;if(!N||N===c.o0.None)S[A]=U;else{let F=C.findIndex(K=>K.series.indexOf(A)>-1),D=B[F],Y=w[F],j=S[A]=Array(x);for(let K=0;K<x;K++){let z=U[K];z!=null?j[K]=D[K]+=z:j[K]=Y[K]?D[K]:z}}}),b){let R=S.map((A,U)=>{let I=C.findIndex(N=>N.series.indexOf(U)>-1);return I!==-1?B[I]:A});b({totals:R})}return E.fields.forEach((R,A)=>{if(A===0||R.config.custom?.hideFrom?.viz)return;if(R.config.custom?.stacking?.mode===c.o0.Percent){let I=C.findIndex(Y=>Y.series.indexOf(A)>-1),N=B[I],F=C[I],D=S[A];for(let Y=0;Y<x;Y++){let j=D[Y];j!=null&&(D[Y]=N[Y]===0?0:F.dir*(j/N[Y]))}}}),S}function y(E,C){let b,S=1,M=1,x=E.data[1][C],O=E.data[1][C];for(let L=1;L<E.data.length;L++){const w=E.data[L][C];w!=null&&(x==null?x=w:w>x&&(x=E.data[L][C],S=L),O==null?O=w:w<O&&(O=E.data[L][C],M=L))}return O==null&&x==null?b=void 0:O!=null&&x!=null?b=(E.valToPos(O,E.series[M].scale)+E.valToPos(x,E.series[S].scale))/2:b=E.valToPos(O||x,E.series[S||M].scale),b!==void 0&&b<0&&(b=E.bbox.height/devicePixelRatio),b}function v(E,C){const b=i(C);return E===c.pR.NegativeY?b?1:-1:b?-1:1}function i(E,C=50){const b=E.length;if(b===0)return!1;let S=0,M=b-1;for(;S<=M&&E[S]==null;)S++;for(;M>=S&&E[M]==null;)M--;if(M>=S){const x=Math.max(1,Math.floor((M-S+1)/C));for(let O=S;O<=M;O+=x){const L=E[O];if(L!=null&&(L<0||Object.is(L,-0)))return!0}}return!1}const u=(0,r.h)("uPlot"),P=u.logger;(0,s.x)("graphng",void 0,u)},40419:(H,T,e)=>{"use strict";e.r(T),e.d(T,{ALERTING_COLOR:()=>s.ns,AxisPlacement:()=>o.LB,BarAlignment:()=>o.pu,BarValueVisibility:()=>o.eU,BracesPlugin:()=>f.hP,ClearPlugin:()=>f.Gp,ClipboardPlugin:()=>f.wl,DEFAULT_ANNOTATION_COLOR:()=>s.Jx,DOMUtil:()=>s.Qi,DrawStyle:()=>o.$6,EventsWithValidation:()=>s.JU,GlobalStyles:()=>r.nz,GraphGradientMode:()=>o.FI,GraphTresholdsStyleMode:()=>o.i3,IndentationPlugin:()=>f.Rc,LegendDisplayMode:()=>o.jK,LineInterpolation:()=>o.KC,NO_DATA_COLOR:()=>s._V,NewlinePlugin:()=>f.z2,NodeGraphDataFrameFieldNames:()=>s.zG,OK_COLOR:()=>s.te,PENDING_COLOR:()=>s.f7,PointVisibility:()=>o.mv,REGION_FILL_ALPHA:()=>s.iV,ReactUtils:()=>s.Ot,RunnerPlugin:()=>f.dv,SCHEMA:()=>s.Yi,ScaleDirection:()=>o.bQ,ScaleOrientation:()=>o.wN,SearchFunctionType:()=>s.nu,SelectionShortcutsPlugin:()=>f.$L,SlatePrism:()=>f.Ze,StackingMode:()=>o.o0,SuggestionsPlugin:()=>f.bm,ThemeContext:()=>r.Ni,TooltipDisplayMode:()=>o.f3,ansicolor:()=>s._J,attachDebugger:()=>s.xq,calculateFontSize:()=>s.MX,colors:()=>s.O9,commonOptionsBuilder:()=>g.q,createLogger:()=>s.hu,fuzzyMatch:()=>s.C6,getCanvasContext:()=>s.AE,getCellLinks:()=>s.iu,getScrollbarWidth:()=>s.np,getTagColor:()=>s.vm,getTagColorsFromName:()=>s.Bx,getTextColorForAlphaBackground:()=>s.bM,getTextColorForBackground:()=>s.Gc,getTheme:()=>r.gh,hasValidationEvent:()=>s.z3,isCompactUrl:()=>s.go,linkModelToContextMenuItems:()=>s.Rc,makeFragment:()=>s.xl,makeValue:()=>s.l1,measureText:()=>s.X1,mockTheme:()=>r.Zu,mockThemeContext:()=>r.sJ,regexValidation:()=>s.FE,sortedColors:()=>s.Wm,styleMixins:()=>r.GU,stylesFactory:()=>r.Bb,useForceUpdate:()=>s.NW,useStyles:()=>r.yK,useStyles2:()=>r.wW,useTheme:()=>r.Fg,useTheme2:()=>r.l4,validate:()=>s.Gu,withTheme:()=>r.Zz,withTheme2:()=>r.HE});var t=e(14835),c={};for(const l in t)l!=="default"&&(c[l]=()=>t[l]);e.d(T,c);var n=e(24539),c={};for(const l in n)["default","Alert","AlertingSettings","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","AutoSizeInput","Badge","BarGauge","BarGaugeDisplayMode","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","BrowserLabel","Button","ButtonCascader","ButtonGroup","ButtonSelect","CallToActionCard","Card","CardContainer","Cascader","CertificationKey","Checkbox","ClickOutsideWrapper","ClipboardButton","CodeEditor","CodeEditorSuggestionItemKind","CollapsableSection","Collapse","ColorPicker","ColorPickerInput","ConfirmButton","ConfirmModal","Container","ContextMenu","ControlledCollapse","Counter","CustomHeadersSettings","CustomScrollbar","DataLinkButton","DataLinkInput","DataLinksContextMenu","DataLinksInlineEditor","DataSourceHttpSettings","DatePicker","DatePickerWithInput","DateTimePicker","DeleteButton","Drawer","Dropdown","DropdownIndicator","EmptySearchResult","ErrorBoundary","ErrorBoundaryAlert","ErrorWithStack","EventsCanvas","FIXED_UNIT","FadeTransition","FeatureBadge","FeatureInfoBox","Field","FieldArray","FieldLinkList","FieldSet","FieldValidationMessage","FileDropzone","FileDropzoneDefaultChildren","FileListItem","FileUpload","FilterInput","FilterPill","Form","FormattedValueDisplay","FullWidthButtonContainer","Gauge","Graph","GraphContextMenu","GraphContextMenuHeader","GraphNG","GraphSeriesToggler","GraphWithLegend","HorizontalGroup","Icon","IconButton","InfoBox","InlineField","InlineFieldRow","InlineFormLabel","InlineLabel","InlineSegmentGroup","InlineSwitch","InlineToast","Input","InputControl","InteractiveTable","JSONFormatter","JsonExplorer","KeyboardPlugin","Label","LegacyForms","LegacyInputStatus","Legend","Link","LinkButton","List","LoadingBar","LoadingPlaceholder","LogLabels","LogMessageAnsi","LogRows","Marker","Menu","MenuGroup","MenuItem","Modal","ModalHeader","ModalRoot","ModalTabContent","ModalTabsHeader","ModalsContext","ModalsController","ModalsProvider","MultiSelect","PageToolbar","Pagination","PanelChrome","PanelChromeErrorIndicator","PanelChromeLoadingIndicator","PanelContainer","PanelContextProvider","PanelContextRoot","PlotLegend","PluginSignatureBadge","Popover","PopoverController","Portal","PortalContainer","QueryField","RadioButtonGroup","RadioButtonList","RangeSlider","ReactMonacoEditor","RefreshPicker","RelativeTimeRangePicker","RenderUserContentAsHTML","ScaleDistribution","SecretInput","SecretTextArea","SecureSocksProxySettings","Segment","SegmentAsync","SegmentInput","SegmentSection","SegmentSelect","Select","SelectContainer","SeriesColorPicker","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","SeriesIcon","SeriesTable","SeriesTableRow","SeriesVisibilityChangeBehavior","SeriesVisibilityChangeMode","SetInterval","SlideOutTransition","Slider","Sparkline","Spinner","StatsPicker","Switch","TLSAuthSettings","Tab","TabContent","TabbedContainer","Table","TableCellDisplayMode","TableInputCSV","TabsBar","Tag","TagList","TagsInput","TextArea","TimeOfDayPicker","TimePickerTooltip","TimeRangeInput","TimeRangePicker","TimeSeries","TimeZonePicker","ToolbarButton","ToolbarButtonRow","Tooltip","TooltipPlugin","UPLOT_AXIS_FONT_SIZE","UPlotChart","UPlotConfigBuilder","UnitPicker","ValuePicker","VerticalGroup","VerticalTab","VirtualizedSelect","VizLayout","VizLegend","VizLegendListItem","VizRepeater","VizTooltip","VizTooltipContainer","WeekStartPicker","WithContextMenu","XYCanvas","ZoomPlugin","buildScaleKey","clearButtonStyles","convertOldAngularValueMapping","defaultIntervals","fieldMatchersUI","getCardStyles","getInputStyles","getLogRowStyles","getPortalContainer","getSelectStyles","graphFieldOptions","graphTickFormatter","graphTimeFormat","preparePlotFrame","resetSelectStyles","sharedInputStyle","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","useGraphNGContext","usePanelContext","variableSuggestionToCodeEditorSuggestion","withErrorBoundary"].indexOf(l)<0&&(c[l]=()=>n[l]);e.d(T,c);var s=e(20956),r=e(34726),g=e(59851),f=e(8659),o=e(49557)},34315:(H,T,e)=>{"use strict";e.d(T,{Y:()=>p,r:()=>a});var t=e(68404),n=e(14582),c=e(78798),s=e(40538),r=e(26372),g=e(2594),f=e(24799),o=e(53217),l=e(46967);function a(h,y,v){const i=["Axis"];h.addRadio({path:"axisPlacement",name:"Placement",category:i,defaultValue:r.q.axisPlacement[0].value,settings:{options:r.q.axisPlacement}}).addTextInput({path:"axisLabel",name:"Label",category:i,defaultValue:"",settings:{placeholder:"Optional text"},showIf:u=>u.axisPlacement!==s.LB.Hidden,shouldApply:u=>u.type!==n.fS.time&&u.type!==n.fS.string}).addNumberInput({path:"axisWidth",name:"Width",category:i,settings:{placeholder:"Auto"},showIf:u=>u.axisPlacement!==s.LB.Hidden}).addRadio({path:"axisGridShow",name:"Show grid lines",category:i,defaultValue:void 0,settings:{options:[{value:void 0,label:"Auto"},{value:!0,label:"On"},{value:!1,label:"Off"}]}}).addRadio({path:"axisColorMode",name:"Color",category:i,defaultValue:s.yK.Text,settings:{options:[{value:s.yK.Text,label:"Text"},{value:s.yK.Series,label:"Series"}]}}),h.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Scale",category:i,editor:p,override:p,defaultValue:{type:s.wf.Linear},shouldApply:u=>u.type===n.fS.number,process:c.kG}).addBooleanSwitch({path:"axisCenteredZero",name:"Centered zero",category:i,defaultValue:!1,showIf:u=>u.scaleDistribution?.type!==s.wf.Log}).addNumberInput({path:"axisSoftMin",name:"Soft min",defaultValue:y.axisSoftMin,category:i,settings:{placeholder:"See: Standard options > Min"}}).addNumberInput({path:"axisSoftMax",name:"Soft max",defaultValue:y.axisSoftMax,category:i,settings:{placeholder:"See: Standard options > Max"}})}const m=[{label:"Linear",value:s.wf.Linear},{label:"Logarithmic",value:s.wf.Log},{label:"Symlog",value:s.wf.Symlog}],d=[{label:"2",value:2},{label:"10",value:10}],p=({value:h,onChange:y})=>{const v=h?.type??s.wf.Linear;return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:16}},t.createElement(g.S,{value:v,options:m,onChange:i=>{y({...h,type:i,log:i===s.wf.Linear?void 0:h.log??2})}})),(v===s.wf.Log||v===s.wf.Symlog)&&t.createElement(f.g,{label:"Log base"},t.createElement(o.Ph,{options:d,value:h.log??2,onChange:i=>{y({...h,log:i.value})}})),v===s.wf.Symlog&&t.createElement(f.g,{label:"Linear threshold"},t.createElement(l.I,{placeholder:"1",value:h.linearThreshold,onChange:i=>{y({...h,linearThreshold:Number(i.currentTarget.value)})}})))}},91511:(H,T,e)=>{"use strict";e.d(T,{B:()=>f});var t=e(82897),n=e.n(t),c=e(68404),s=e(52081),r=e(41165);const g=o=>{const{value:l,onChange:a}=o,m=(0,c.useCallback)(d=>{a({...l,[d]:!l[d]})},[l,a]);return c.createElement(s.Lh,{spacing:"xs"},Object.keys(l).map(d=>{const p=d;return c.createElement(r.B,{icon:l[p]?"eye-slash":"eye",onClick:()=>m(p),key:p,label:(0,t.startCase)(p),selected:l[p]})}))};function f(o){o.addCustomEditor({id:"hideFrom",name:"Hide in area",category:["Series"],path:"hideFrom",defaultValue:{tooltip:!1,viz:!1,legend:!1},editor:g,override:g,shouldApply:()=>!0,hideFromDefaults:!0,process:l=>l})}},31911:(H,T,e)=>{"use strict";e.d(T,{J:()=>c});var t=e(35363),n=e(40538);function c(s,r=!0){s.addBooleanSwitch({path:"legend.showLegend",name:"Visibility",category:["Legend"],description:"",defaultValue:!0}).addRadio({path:"legend.displayMode",name:"Mode",category:["Legend"],description:"",defaultValue:n.jK.List,settings:{options:[{value:n.jK.List,label:"List"},{value:n.jK.Table,label:"Table"}]},showIf:g=>g.legend.showLegend}).addRadio({path:"legend.placement",name:"Placement",category:["Legend"],description:"",defaultValue:"bottom",settings:{options:[{value:"bottom",label:"Bottom"},{value:"right",label:"Right"}]},showIf:g=>g.legend.showLegend}).addNumberInput({path:"legend.width",name:"Width",category:["Legend"],settings:{placeholder:"Auto"},showIf:g=>g.legend.showLegend&&g.legend.placement==="right"}),r&&s.addCustomEditor({id:"legend.calcs",path:"legend.calcs",name:"Values",category:["Legend"],description:"Select values or calculations to show in legend",editor:t.S.get("stats-picker").editor,defaultValue:[],settings:{allowMultiple:!0},showIf:g=>g.legend.showLegend!==!1})}},22110:(H,T,e)=>{"use strict";e.d(T,{V:()=>d,n:()=>m});var t=e(68404),n=e(78798),c=e(14582),s=e(40538),r=e(52081),g=e(2594),f=e(46967),o=e(61860),l=e(8180),a=e(26372);const m=({value:p,context:h,onChange:y,item:v})=>t.createElement(r.Lh,null,t.createElement(g.S,{value:p?.mode||s.o0.None,options:v.settings.options,onChange:i=>{y({...p,mode:i})}}),h.isOverride&&p?.mode&&p?.mode!==s.o0.None&&t.createElement(f.I,{type:"text",placeholder:"Group",suffix:t.createElement(o.u,{content:"Name of the stacking group",placement:"top"},t.createElement(l.h,{name:"question-circle"})),defaultValue:p?.group,onChange:i=>{y({...p,group:i.currentTarget.value.trim()})}}));function d(p,h,y=["Graph styles"]){p.addCustomEditor({id:"stacking",path:"stacking",name:"Stack series",category:y,defaultValue:h,editor:m,override:m,settings:{options:a.q.stacking},process:n.kG,shouldApply:v=>v.type===c.fS.number})}},25272:(H,T,e)=>{"use strict";e.d(T,{Z:()=>t});function t(n,c=!0){c&&n.addNumberInput({path:"text.titleSize",category:["Text size"],name:"Title",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0}),n.addNumberInput({path:"text.valueSize",category:["Text size"],name:"Value",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0})}},77587:(H,T,e)=>{"use strict";e.d(T,{L:()=>n});var t=e(40538);function n(c,s=!1){const r=["Tooltip"],g=s?[{value:t.f3.Single,label:"Single"},{value:t.f3.None,label:"Hidden"}]:[{value:t.f3.Single,label:"Single"},{value:t.f3.Multi,label:"All"},{value:t.f3.None,label:"Hidden"}],f=[{value:t.As.None,label:"None"},{value:t.As.Ascending,label:"Ascending"},{value:t.As.Descending,label:"Descending"}];c.addRadio({path:"tooltip.mode",name:"Tooltip mode",category:r,defaultValue:"single",settings:{options:g}}).addRadio({path:"tooltip.sort",name:"Values sort order",category:r,defaultValue:t.As.None,showIf:o=>o.tooltip.mode===t.f3.Multi,settings:{options:f}})}},59851:(H,T,e)=>{"use strict";e.d(T,{q:()=>t});var t={};e.r(t),e.d(t,{ScaleDistributionEditor:()=>n.Y,StackingEditor:()=>f.n,addAxisConfig:()=>n.r,addHideFrom:()=>c.B,addLegendOptions:()=>s.J,addStackingConfig:()=>f.V,addTextSizeOptions:()=>g.Z,addTooltipOptions:()=>r.L});var n=e(34315),c=e(91511),s=e(31911),r=e(77587),g=e(25272),f=e(22110)},49557:(H,T,e)=>{"use strict";e.d(T,{$6:()=>t.l8,FI:()=>t.FI,KC:()=>t.KC,LB:()=>t.LB,bQ:()=>t.bQ,eU:()=>t.Jp,f3:()=>t.f3,i3:()=>t.i3,jK:()=>t.jK,mv:()=>t.Jp,o0:()=>t.o0,pu:()=>t.pu,wN:()=>t.wN});var t=e(40538)},13193:(H,T,e)=>{"use strict";e.d(T,{h:()=>s});var t=e(44288);const n={"[":"]","{":"}","(":")"},c="brace_match";function s(){return{onKeyDown(r,g,f){const{value:o}=g;switch(r.key){case"(":case"{":case"[":{const{start:{offset:l,key:a},end:{offset:m,key:d},focus:{offset:p}}=o.selection,h=o.focusText.text;if(o.selection.isExpanded)return r.preventDefault(),g.insertTextByKey(a,l,r.key).insertTextByKey(d,m+1,n[r.key]).moveEndBackward(1),!0;if(p===h.length||h[p]===" "||Object.values(n).includes(h[p])){r.preventDefault();const y=n[r.key],v={key:`${c}-${(0,t.Z)()}`,type:`${c}-${y}`,anchor:{key:a,offset:l,object:"point"},focus:{key:d,offset:m+1,object:"point"},object:"annotation"};return g.insertText(r.key).insertText(y).addAnnotation(v).moveBackward(1),!0}break}case")":case"}":case"]":{const l=o.anchorText.text,a=o.selection.anchor.offset,m=l[a],d=r.key,p=`${c}-${d}`,h=o.annotations.find(y=>y?.type===p&&y.anchor.key===o.anchorText.key);if(h&&m===d&&!o.selection.isExpanded)return r.preventDefault(),g.moveFocusForward(1).removeAnnotation(h).moveAnchorForward(1),!0;break}case"Backspace":{const l=o.anchorText.text,a=o.selection.anchor.offset,m=l[a-1],d=l[a];if(n[m]&&n[m]===d)return r.preventDefault(),g.deleteBackward(1).deleteForward(1).focus(),!0}default:break}return f()}}}},74778:(H,T,e)=>{"use strict";e.d(T,{G:()=>t});function t(){return{onKeyDown(n,c,s){const r=c.value;if(r.selection.isExpanded)return s();if(n.key==="k"&&n.ctrlKey){n.preventDefault();const g=r.anchorText.text,f=r.selection.anchor.offset,l=g.length-f;return c.deleteForward(l),!0}return s()}}}},6464:(H,T,e)=>{"use strict";e.d(T,{w:()=>c});const t=(s,r,g)=>{if(!s.length)return;const f=s.slice(0,-1).join("").length+s.length-1;return s.join(`
`).slice(r,f+g)},n=s=>s?.replace(/[\uFEFF]/g,"");function c(){const s={onCopy(r,g,f){r.preventDefault();const{document:o,selection:l}=g.value,{start:{offset:a},end:{offset:m}}=l,d=o.getLeafBlocksAtRange(l).toArray().map(h=>h.text),p=n(t(d,a,m));return p&&r.clipboardData&&r.clipboardData.setData("Text",p),!0},onPaste(r,g,f){if(r.preventDefault(),r.clipboardData){const l=n(r.clipboardData.getData("Text"))?.split(`
`);if(l&&l.length){g.insertText(l[0]);for(const a of l.slice(1))g.splitBlock().insertText(a)}}return!0}};return{...s,onCut(r,g,f){return s.onCopy(r,g,f),g.deleteAtRange(g.value.selection),!0}}}},784:(H,T,e)=>{"use strict";e.d(T,{R:()=>a});var t=e(59641),n=e(53594),c=e(40246);const s=(0,t.TB)("mod+["),r=(0,t.TB)("shift+tab"),g=(0,t.TB)("mod+]"),f="  ",o=(m,d,p)=>{const{startBlock:h,endBlock:y,selection:{start:{offset:v,key:i},end:{offset:u,key:P}}}=d.value;if(c.Z.serialize(d.value)==="")return;m.preventDefault();const E=h.getFirstText();E&&v===0&&i===E.key&&u===E.text.length&&P===E.key||!h.equals(y)?l(d,"right"):d.insertText(f)},l=(m,d)=>{const p=m.value.selection,h=m.value.document.getLeafBlocksAtRange(p).toArray();if(d==="left")for(const y of h){const v=y.text.length-y.text.trimLeft().length,i=y.getFirstText().key,u={anchor:{key:i,offset:v,path:[]},focus:{key:i,offset:v,path:[]}};m.deleteBackwardAtRange(n.e6.create(u),Math.min(f.length,v))}else{const{startText:y}=m.value,v=y.text.slice(0,p.start.offset),i=/^\s*$/.test(v);for(const u of h)m.insertTextByKey(u.getFirstText().key,0,f);i&&m.moveStartBackward(f.length)}};function a(){return{onKeyDown(m,d,p){if(s(m)||r(m))m.preventDefault(),l(d,"left");else if(g(m))m.preventDefault(),l(d,"right");else if(m.key==="Tab")o(m,d,p);else return p();return!0}}}},8659:(H,T,e)=>{"use strict";e.d(T,{$L:()=>f.$,Gp:()=>n.G,Rc:()=>s.R,Ze:()=>o.Z,bm:()=>l.b,dv:()=>g.d,hP:()=>t.h,wl:()=>c.w,z2:()=>r.z});var t=e(13193),n=e(74778),c=e(6464),s=e(784),r=e(9830),g=e(47838),f=e(71096),o=e(67660),l=e(73958)},9830:(H,T,e)=>{"use strict";e.d(T,{z:()=>n});function t(c){let s=c.length-c.trimLeft().length;if(s){let r=c[0];for(;--s;)r+=c[0];return r}return""}function n(){return{onKeyDown(c,s,r){const g=s.value;if(g.selection.isExpanded)return r();if(c.key==="Enter"){c.preventDefault();const{startBlock:f}=g,o=f.text,l=t(o);return s.splitBlock().insertText(l).focus()}return r()}}}},47838:(H,T,e)=>{"use strict";e.d(T,{d:()=>t});function t({handler:n}){return{onKeyDown(c,s,r){return n&&c.key==="Enter"&&(c.shiftKey||c.ctrlKey)?(c.preventDefault(),n(c),s):r()}}}},71096:(H,T,e)=>{"use strict";e.d(T,{$:()=>c});var t=e(59641);const n=(0,t.TB)("mod+l");function c(){return{onKeyDown(s,r,g){if(n(s)){s.preventDefault();const{focusBlock:f,document:o}=r.value;r.moveAnchorToStartOfBlock(),o.getNextBlock(f.key)?r.moveFocusToStartOfNextBlock():r.moveFocusToEndOfText()}else return g();return!0}}}},95514:(H,T,e)=>{"use strict";e.d(T,{Z:()=>n});const n="prism-token"},67660:(H,T,e)=>{"use strict";e.d(T,{Z:()=>d,a:()=>v});var t=e(57706),n=e.n(t),c=e(53594),s=e(95514),r=e(7908),g=e(68404);function f(i){return i.object==="block"&&i.type==="code_block"}function o(i){return"javascript"}function l(i,u,P){const{decoration:E}=i;if(E.type!==s.Z)return P();const C=E.data.get("className");return g.createElement("span",{className:C},i.children)}class a extends(0,r.Record)({onlyIn:f,getSyntax:o,renderDecoration:l}){constructor(u){super(u)}}const m=a;function d(i={},u=n().languages){const P=new m(i);return{decorateNode:(E,C,b)=>{if(!P.onlyIn(E))return b();const S=c.gO.create(E),M=P.getSyntax(S),x=u[M];if(!x)return[];const L=S.getTexts().map(A=>A&&A.getText()).join(`
`),B=n().tokenize(L,x),w=v(B),R=C.value.data.set("tokens",w);return C.setData(R),p(P,B,S)},renderDecoration:(E,C,b)=>P.renderDecoration({children:E.children,decoration:E.decoration},C,b)}}function p(i,u,P){const E=P.getTexts(),C=[];let b=0,S=0;return E.forEach(M=>{S=b+M.getText().length;let x=0;function O(L,B){if(typeof L=="string"){if(B){const w=h({text:M,textStart:b,textEnd:S,start:x,end:x+L.length,className:`prism-token token ${B}`,block:P});w&&C.push(w)}x+=L.length}else if(B=`${B} ${L.type}`,L.alias&&(B+=" "+L.alias),typeof L.content=="string"){const w=h({text:M,textStart:b,textEnd:S,start:x,end:x+L.content.length,className:`prism-token token ${B}`,block:P});w&&C.push(w),x+=L.content.length}else for(let w=0;w<L.content.length;w+=1)O(L.content[w],B)}u.forEach(O),b=S+1}),C}function h({text:i,textStart:u,textEnd:P,start:E,end:C,className:b,block:S}){return E>=P||C<=u?null:(E=Math.max(E,u),C=Math.min(C,P),E-=u,C-=u,S.createDecoration({object:"decoration",anchor:{key:i.key,offset:E,object:"point"},focus:{key:i.key,offset:C,object:"point"},type:s.Z,data:{className:b}}))}function y(i){return typeof i=="string"?[{content:i,types:[],aliases:[]}]:Array.isArray(i)?i.flatMap(u=>y(u)):i instanceof n().Token?y(i.content).flatMap(u=>{let P=[];return typeof i.alias=="string"?P=[i.alias]:P=i.alias??[],{content:u.content,types:[i.type,...u.types],aliases:[...P,...u.aliases]}}):[]}function v(i){const u=y(i);if(!u.length)return[];const P=u[0];P.prev=null,P.next=u.length>=2?u[1]:null,P.offsets={start:0,end:P.content.length};for(let C=1;C<u.length-1;C++)u[C].prev=u[C-1],u[C].next=u[C+1],u[C].offsets={start:u[C-1].offsets.end,end:u[C-1].offsets.end+u[C].content.length};const E=u[u.length-1];return E.prev=u.length>=2?u[u.length-2]:null,E.next=null,E.offsets={start:u.length>=2?u[u.length-2].offsets.end:0,end:u.length>=2?u[u.length-2].offsets.end+E.content.length:E.content.length},u}},73958:(H,T,e)=>{"use strict";e.d(T,{b:()=>R});var t=e(82897),n=e(68404),c=e(97394),s=e(75478),r=e(72648),g=e(26519),f=e(13265);const o=U=>U.reduce((I,{items:N,label:F})=>(I.push({label:F,kind:g.c.GroupTitle}),N.reduce((D,Y)=>(D.push(Y),D),I)),[]),l=U=>U.reduce((I,N)=>I.length<N.label.length?N.label:I,""),a=(U,I,N)=>{const F=(0,f.Z)(N,{font:U.typography.fontFamilyMonospace,fontSize:U.typography.bodySmall.fontSize,fontWeight:"normal"}),D=d(F.width,U),Y=m(F.height,U),j=p(Y,I);return{listWidth:D,listHeight:j,itemHeight:Y}},m=(U,I)=>{const N=I.spacing.gridSize*2;return U+N},d=(U,I)=>{const N=I.spacing.gridSize*3,F=800;return Math.min(Math.max(U+N,200),F)},p=(U,I)=>{const N=Math.min(I.length,10),F=100,D=N*U;return Math.max(D,F)};var h=e(52423),y=e(41959);const v=(U,I,N)=>({typeaheadItem:h.css`
      label: type-ahead-item;
      z-index: 11;
      padding: ${U.spacing(1,1,1,2)};
      border: ${U.colors.border.medium};
      overflow-y: scroll;
      overflow-x: hidden;
      outline: none;
      background: ${U.colors.background.secondary};
      color: ${U.colors.text};
      box-shadow: 0 0 20px ${U.v1.colors.dropdownShadow};
      visibility: ${N===!0?"visible":"hidden"};
      width: 250px;
      min-height: ${I+parseInt(U.spacing(.25),10)}px;
      position: relative;
      word-break: break-word;
    `}),i=({item:U,height:I})=>{const N=U&&!!U.documentation,F=U?U.label:"",D=(0,y.a)(U?.documentation),Y=(0,r.l4)(),j=v(Y,I,N);return n.createElement("div",{className:(0,h.cx)([j.typeaheadItem])},n.createElement("b",null,F),n.createElement("hr",null),n.createElement("div",{dangerouslySetInnerHTML:{__html:D}}))};var u=e(14677),P=e.n(u),E=e(69636);const C=U=>({typeaheadItem:h.css`
    border: none;
    background: none;
    text-align: left;
    label: type-ahead-item;
    height: auto;
    font-family: ${U.typography.fontFamilyMonospace};
    padding: ${U.spacing(1,1,1,2)};
    font-size: ${U.typography.bodySmall.fontSize};
    text-overflow: ellipsis;
    overflow: hidden;
    z-index: 11;
    display: block;
    white-space: nowrap;
    cursor: pointer;
    transition: color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1),
      background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1);
  `,typeaheadItemSelected:h.css`
    label: type-ahead-item-selected;
    background-color: ${U.colors.background.secondary};
  `,typeaheadItemMatch:h.css`
    label: type-ahead-item-match;
    color: ${U.v1.palette.yellow};
    border-bottom: 1px solid ${U.v1.palette.yellow};
    padding: inherit;
    background: inherit;
  `,typeaheadItemGroupTitle:h.css`
    label: type-ahead-item-group-title;
    color: ${U.colors.text.secondary};
    font-size: ${U.typography.bodySmall.fontSize};
    line-height: ${U.typography.body.lineHeight};
    padding: ${U.spacing(1)};
  `}),b=U=>{const I=(0,r.wW)(C),{isSelected:N,item:F,prefix:D,style:Y,onMouseEnter:j,onMouseLeave:K,onClickItem:z}=U,Z=N?(0,h.cx)([I.typeaheadItem,I.typeaheadItemSelected]):(0,h.cx)([I.typeaheadItem]),ae=(0,h.cx)([I.typeaheadItemMatch]),J=(0,h.cx)([I.typeaheadItemGroupTitle]),oe=F.label||"";return F.kind===g.c.GroupTitle?n.createElement("li",{className:J,style:Y},n.createElement("span",null,oe)):n.createElement("li",{role:"none"},n.createElement("button",{role:"menuitem",className:Z,style:Y,onMouseDown:z,onMouseEnter:j,onMouseLeave:K,type:"button"},F.highlightParts!==void 0?n.createElement(E.H,{text:oe,highlightClassName:ae,highlightParts:F.highlightParts}):n.createElement(P(),{textToHighlight:oe,searchWords:[D??""],autoEscape:!0,highlightClassName:ae})))},S=(U,I)=>U-I*Math.floor(U/I);class M extends n.PureComponent{constructor(){super(...arguments),this.listRef=(0,n.createRef)(),this.state={hoveredItem:null,typeaheadIndex:null,allItems:[],listWidth:-1,listHeight:-1,itemHeight:-1},this.componentDidMount=()=>{this.props.menuRef&&this.props.menuRef(this),document.addEventListener("selectionchange",this.handleSelectionChange);const I=o(this.props.groupedItems),N=l(I),{listWidth:F,listHeight:D,itemHeight:Y}=a(this.context,I,N);this.setState({listWidth:F,listHeight:D,itemHeight:Y,allItems:I})},this.componentWillUnmount=()=>{document.removeEventListener("selectionchange",this.handleSelectionChange)},this.handleSelectionChange=()=>{this.forceUpdate()},this.componentDidUpdate=(I,N)=>{if(this.state.typeaheadIndex!==null&&N.typeaheadIndex!==this.state.typeaheadIndex&&this.listRef&&this.listRef.current){if(this.state.typeaheadIndex===1){this.listRef.current.scrollToItem(0);return}this.listRef.current.scrollToItem(this.state.typeaheadIndex)}if((0,t.isEqual)(I.groupedItems,this.props.groupedItems)===!1){const F=o(this.props.groupedItems),D=l(F),{listWidth:Y,listHeight:j,itemHeight:K}=a(this.context,F,D);this.setState({listWidth:Y,listHeight:j,itemHeight:K,allItems:F,typeaheadIndex:null})}},this.onMouseEnter=I=>{this.setState({hoveredItem:I})},this.onMouseLeave=()=>{this.setState({hoveredItem:null})},this.moveMenuIndex=I=>{const N=this.state.allItems.length;if(N){const F=this.state.typeaheadIndex||0;let D=S(F+I,N);this.state.allItems[D].kind===g.c.GroupTitle&&(D=S(D+I,N)),this.setState({typeaheadIndex:D});return}},this.insertSuggestion=()=>{this.props.onSelectSuggestion&&this.state.typeaheadIndex!==null&&this.props.onSelectSuggestion(this.state.allItems[this.state.typeaheadIndex])}}get menuPosition(){if(!window.getSelection)return"";const I=window.getSelection(),N=I&&I.anchorNode;if(N&&N.parentElement){const F=N.parentElement.getBoundingClientRect(),D=window.scrollX,Y=window.scrollY;return`position: absolute; display: flex; top: ${F.top+Y+F.height+6}px; left: ${F.left+D-2}px`}return""}render(){const{prefix:I,isOpen:N=!1,origin:F}=this.props,{allItems:D,listWidth:Y,listHeight:j,itemHeight:K,hoveredItem:z,typeaheadIndex:Z}=this.state,ae=z||Z,J=D[z||Z||0];return n.createElement(x,{origin:F,isOpen:N,style:this.menuPosition},n.createElement("ul",{role:"menu",className:"typeahead","data-testid":"typeahead"},n.createElement(s.t7,{ref:this.listRef,itemCount:D.length,itemSize:K,itemKey:oe=>{const Ee=D&&D[oe];return Ee?`${oe}-${Ee.label}`:`${oe}`},width:Y,height:j},({index:oe,style:Ee})=>{const me=D&&D[oe];return me?n.createElement(b,{onClickItem:()=>this.props.onSelectSuggestion?this.props.onSelectSuggestion(me):{},isSelected:Z===null?!1:D[Z]===me,item:me,prefix:I,style:Ee,onMouseEnter:()=>this.onMouseEnter(oe),onMouseLeave:this.onMouseLeave}):null})),ae&&n.createElement(i,{height:j,item:J}))}}M.contextType=r.Ni;class x extends n.PureComponent{constructor(I){super(I);const{index:N=0,origin:F="query",style:D}=I;this.node=document.createElement("div"),this.node.setAttribute("style",D),this.node.classList.add("slate-typeahead",`slate-typeahead-${F}-${N}`),document.body.appendChild(this.node)}componentWillUnmount(){document.body.removeChild(this.node)}render(){return this.props.isOpen?(this.node.setAttribute("style",this.props.style),this.node.classList.add("slate-typeahead--open"),c.createPortal(this.props.children,this.node)):(this.node.classList.remove("slate-typeahead--open"),null)}}var O=e(12724),L=e(62192),B=e(95514);const w=250;function R({onTypeahead:U,cleanText:I,onWillApplySuggestion:N,portalOrigin:F}){let D,Y={groupedItems:[],typeaheadPrefix:"",typeaheadContext:"",typeaheadText:""};const j=(0,t.debounce)(A,w),K=z=>{Y={...Y,...z}};return{onBlur:(z,Z,ae)=>(Y={...Y,groupedItems:[]},ae()),onClick:(z,Z,ae)=>(Y={...Y,groupedItems:[]},ae()),onKeyDown:(z,Z,ae)=>{const oe=Y.groupedItems.length;switch(z.key){case"Escape":{if(oe)return z.preventDefault(),Y={...Y,groupedItems:[]},Z.insertText("");break}case"ArrowDown":case"ArrowUp":if(oe){z.preventDefault(),D.moveMenuIndex(z.key==="ArrowDown"?1:-1);return}break;case"Enter":{if(!(z.shiftKey||z.ctrlKey)&&oe)return z.preventDefault(),D.insertSuggestion();break}case"Tab":{if(oe)return z.preventDefault(),D.insertSuggestion();break}default:{z.key.length===1&&j(Z,K,U,I);break}}return ae()},commands:{selectSuggestion:(z,Z)=>{const ae=Y.groupedItems;if(!ae||!ae.length)return z;const J=z.applyTypeahead(Z);return j(z,K,U,I),J},applyTypeahead:(z,Z)=>{let ae=Z.insertText||Z.label;const J=Z.kind==="function",oe=Z.move||0,Ee=oe>0?oe:0,me=oe<0?-oe:0,{typeaheadPrefix:re,typeaheadText:le,typeaheadContext:pe}=Y;N&&(ae=N(ae,{groupedItems:Y.groupedItems,typeaheadContext:pe,typeaheadPrefix:re,typeaheadText:le}));const ee=Z.deleteBackwards||re.length,Q=(I?I(le):le).length-re.length,G=le.indexOf(re),X=re&&(Q>0&&G>-1||ae===le)&&!J?Q+G:0;if(ae.match(/\n/)){const de=(0,O.xl)(ae);return z.deleteBackward(ee).deleteForward(X).insertFragment(de).focus(),z}return Y={...Y,groupedItems:[]},z.snapshotSelection().deleteBackward(ee).deleteForward(X).insertText(ae).moveForward(Ee).moveBackward(me).focus(),z}},renderEditor(z,Z,ae){if(Z.value.selection.isExpanded)return ae();const J=ae();return n.createElement(n.Fragment,null,J,n.createElement(M,{menuRef:oe=>D=oe,origin:F,prefix:Y.typeaheadPrefix,isOpen:!!Y.groupedItems.length,groupedItems:Y.groupedItems,onSelectSuggestion:Z.selectSuggestion}))}}}const A=async(U,I,N,F)=>{if(!N)return;const{value:D}=U,{selection:Y}=D,j=D.document.getClosestBlock(D.focusBlock.key),K=D.selection.start.offset-1,z=j&&j.getDecorations(U),Z=z?z.filter(se=>se.start.offset<=K&&se.end.offset>K&&se.type===B.Z).toArray():[],ae=z&&z.filter(se=>se.end.offset<=K&&se.type===B.Z&&se.data.get("className").includes("label-key")).last(),J=ae&&D.focusText.text.slice(ae.start.offset,ae.end.offset),oe=Z.map(se=>se.data.get("className")).join(" ").split(" ").filter(se=>se.length);let Ee=D.focusText.text,me=Ee.slice(0,Y.focus.offset);Z.length&&(Ee=D.focusText.text.slice(Z[0].start.offset,Z[0].end.offset),me=D.focusText.text.slice(Z[0].start.offset,Y.focus.offset));const re=me.match(/(?:!?=~?"?|")(.*)/);re?me=re[1]:F&&(me=F(me));const{suggestions:le,context:pe}=await N({prefix:me,text:Ee,value:D,wrapperClasses:oe,labelKey:J||void 0,editor:U}),ee=le.map(se=>{if(!se.items)return se;const Q=se.searchFunctionType||(se.prefixMatch?L.Z.Prefix:L.Z.Word),G=L.n[Q];let q={...se};return me&&(se.skipFilter||(q.items=q.items.filter(X=>(X.filterText||X.label).length>=me.length),q.items=G(q.items,me)),q.items=q.items.filter(X=>!(X.insertText===me||(X.filterText??X.label)===me))),se.skipSort||(q.items=(0,t.sortBy)(q.items,X=>X.sortText===void 0?X.sortValue!==void 0?X.sortValue:X.label:X.sortText||X.label)),q}).filter(se=>se.items&&se.items.length);I({groupedItems:ee,typeaheadPrefix:me,typeaheadContext:pe,typeaheadText:Ee}),U.blur().focus()}},78427:(H,T,e)=>{"use strict";e.d(T,{n:()=>d});var t=e(78966),n=e(68404),c=e(72648);function s(p){return t.css`
    .panel-options-group {
      border-bottom: 1px solid ${p.colors.border.weak};
    }

    .panel-options-group__header {
      padding: ${p.spacing(1,2,1,1)};
      position: relative;
      display: flex;
      align-items: center;
      cursor: pointer;
      font-weight: 500;
      color: ${p.colors.text.primary};

      &:hover {
        background: ${p.colors.emphasize(p.colors.background.primary,.03)};
      }
    }

    .panel-options-group__icon {
      color: ${p.colors.text.secondary};
      margin-right: ${p.spacing(1)};
      padding: ${p.spacing(0,.9,0,.6)};
    }

    .panel-options-group__title {
      position: relative;
    }

    .panel-options-group__body {
      padding: ${p.spacing(1,2,1,4)};
    }
  `}function r(p){return t.css`
    .card-section {
      margin-bottom: ${p.spacing(4)};
    }

    .card-list {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      list-style-type: none;
    }

    .card-item {
      display: block;
      height: 100%;
      background: ${p.colors.background.secondary};
      box-shadow: none;
      padding: ${p.spacing(2)};
      border-radius: 4px;

      &:hover {
        background: ${p.colors.emphasize(p.colors.background.secondary,.03)};
      }

      .label-tag {
        margin-left: ${p.spacing(1)};
        font-size: 11px;
        padding: 2px 6px;
      }
    }

    .card-item-body {
      display: flex;
      overflow: hidden;
    }

    .card-item-details {
      overflow: hidden;
    }

    .card-item-header {
      margin-bottom: ${p.spacing(2)};
    }

    .card-item-type {
      color: ${p.colors.text.secondary};
      text-transform: uppercase;
      font-size: ${p.typography.size.sm};
      font-weight: ${p.typography.fontWeightMedium};
    }

    .card-item-badge {
      margin: 6px 0;
    }

    .card-item-notice {
      font-size: ${p.typography.size.sm};
    }

    .card-item-name {
      color: ${p.colors.text.primary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-label {
      margin-left: ${p.spacing(1)};
    }

    .card-item-sub-name {
      color: ${p.colors.text.secondary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-sub-name--header {
      color: ${p.colors.text.secondary};
      text-transform: uppercase;
      margin-bottom: ${p.spacing(2)};
      font-size: ${p.typography.size.sm};
      font-weight: bold;
    }

    .card-list-layout-grid {
      .card-item-type {
        display: inline-block;
      }

      .card-item-notice {
        font-size: ${p.typography.size.sm};
        display: inline-block;
        margin-left: ${p.spacing(2)};
      }

      .card-item-header-action {
        float: right;
      }

      .card-item-wrapper {
        width: 100%;
        padding: ${p.spacing(0,2,2,0)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item-figure {
        margin: ${p.spacing(0,2,2,0)}0;
        height: 80px;

        img {
          width: 80px;
        }
      }

      .card-item-name {
        font-size: ${p.typography.h3.fontSize};
      }

      ${p.breakpoints.up("md")} {
        .card-item-wrapper {
          width: 50%;
        }
      }

      ${p.breakpoints.up("lg")} {
        .card-item-wrapper {
          width: 33.333333%;
        }
      }

      &.card-list-layout-grid--max-2-col {
        ${p.breakpoints.up("lg")} {
          .card-item-wrapper {
            width: 50%;
          }
        }
      }
    }

    .card-list-layout-list {
      .card-item-wrapper {
        padding: 0;
        width: 100%;
        margin-bottom: ${p.spacing(1)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item {
        border-radius: 2px;
      }

      .card-item-header {
        float: right;
        text-align: right;
      }

      .card-item-figure {
        margin: ${p.spacing(0,2,0,0)};
        img {
          width: 48px;
        }
      }

      .card-item-name {
        font-size: ${p.typography.h4.fontSize};
      }

      .card-item-sub-name {
        font-size: ${p.typography.size.sm};
      }

      .layout-selector {
        margin-right: 0;
      }
    }
  `}var g=e(85419);function f(p){return t.css`
    html {
      -ms-overflow-style: scrollbar;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      height: 100%;
      font-size: ${p.typography.htmlFontSize}px;
      font-family: ${p.typography.fontFamily};
      line-height: ${p.typography.body.lineHeight};
      font-kerning: normal;
    }

    :root {
      color-scheme: ${p.colors.mode};
    }

    body {
      height: 100%;
      width: 100%;
      position: absolute;
      color: ${p.colors.text.primary};
      background-color: ${p.colors.background.canvas};
      ${o(p.typography.body)}
    }

    h1,
    .h1 {
      ${o(p.typography.h1)}
    }
    h2,
    .h2 {
      ${o(p.typography.h2)}
    }
    h3,
    .h3 {
      ${o(p.typography.h3)}
    }
    h4,
    .h4 {
      ${o(p.typography.h4)}
    }
    h5,
    .h5 {
      ${o(p.typography.h5)}
    }
    h6,
    .h6 {
      ${o(p.typography.h6)}
    }

    p {
      margin: 0 0 ${p.spacing(2)};
    }

    button {
      letter-spacing: ${p.typography.body.letterSpacing};

      &:focus-visible {
        outline: ${(0,g.getFocusStyles)(p)};
      }
      &:focus {
        outline: none;
      }
    }

    // Ex: 14px base font * 85% = about 12px
    small {
      font-size: ${p.typography.bodySmall.fontSize};
    }

    b,
    strong {
      font-weight: ${p.typography.fontWeightMedium};
    }

    em {
      font-style: italic;
      color: ${p.colors.text.primary};
    }

    cite {
      font-style: normal;
    }

    // Utility classes
    .muted {
      color: ${p.colors.text.secondary};
    }

    a.muted:hover,
    a.muted:focus {
      color: ${p.colors.text.primary};
    }

    .text-warning {
      color: ${p.colors.warning.text};

      &:hover,
      &:focus {
        color: ${p.colors.emphasize(p.colors.warning.text,.15)};
      }
    }

    .text-error {
      color: ${p.colors.error.text};

      &:hover,
      &:focus {
        color: ${p.colors.emphasize(p.colors.error.text,.15)};
      }
    }

    .text-success {
      color: $success-text-color;

      &:hover,
      &:focus {
        color: ${p.colors.emphasize(p.colors.success.text,.15)};
      }
    }

    a {
      cursor: pointer;
      color: ${p.colors.text.primary};
      text-decoration: none;

      &:focus {
        outline: none;
      }

      &:focus-visible {
        ${(0,g.getFocusStyles)(p)}
      }

      &: [disabled] {
        cursor: default;
        pointer-events: none !important;
      }
    }

    .text-link {
      text-decoration: underline;
    }

    .text-left {
      text-align: left;
    }

    .text-right {
      text-align: right;
    }

    .text-center {
      text-align: center;
    }

    .highlight-search-match {
      background: ${p.components.textHighlight.background};
      color: ${p.components.textHighlight.text};
      padding: 0;
    }
  `}function o(p){return`
    margin: 0;
    font-size: ${p.fontSize};
    line-height: ${p.lineHeight};
    font-weight: ${p.fontWeight};
    letter-spacing: ${p.letterSpacing};
    font-family: ${p.fontFamily};
    margin-bottom: 0.45em;
  `}function l(p){return t.css`
    input,
    button,
    select,
    textarea {
      font-size: ${p.typography.body.fontSize};
      font-weight: ${p.typography.body.fontWeight};
      line-height: ${p.typography.body.lineHeight};
    }
    input,
    button,
    select,
    textarea {
      font-family: ${p.typography.body.fontFamily};
    }

    input,
    select {
      background-color: ${p.components.input.background};
      color: ${p.components.input.text};
      border: none;
      box-shadow: none;
    }

    textarea {
      height: auto;
    }

    // Reset width of input images, buttons, radios, checkboxes
    input[type='file'],
    input[type='image'],
    input[type='submit'],
    input[type='reset'],
    input[type='button'],
    input[type='radio'],
    input[type='checkbox'] {
      width: auto; // Override of generic input selector
    }
  `}function a(p){return t.css`
    // TODO copy from _utils.scss
  `}function m(p){const h=p.breakpoints.values.xxl+p.spacing.gridSize*2+p.components.sidemenu.width;return t.css`
    .grafana-app {
      display: flex;
      align-items: stretch;
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }

    .main-view {
      position: relative;
      display: flex;
      flex-direction: column;
      flex-grow: 1;
      height: 100%;
      flex: 1 1 0;
      min-width: 0;
    }

    .page-scrollbar-content {
      display: flex;
      min-height: 100%;
      flex-direction: column;
      width: 100%;
      height: 100%;
    }

    .page-container {
      flex-grow: 1;
      flex-basis: 100%;
      padding-left: ${p.spacing(2)};
      padding-right: ${p.spacing(2)};

      ${p.breakpoints.up("sm")} {
        margin: ${p.spacing(0,1)};
      }

      ${p.breakpoints.up("md")} {
        margin: ${p.spacing(0,2)};
      }

      @media (min-width: ${h}px) {
        max-width: ${p.breakpoints.values.xxl}px;
        margin-left: auto;
        margin-right: auto;
        width: 100%;
      }
    }

    .page-full {
      margin-left: ${p.spacing(2)};
      padding-left: ${p.spacing(2)};
      padding-right: ${p.spacing(2)};
    }

    .page-body {
      padding: ${p.spacing(1)};
      background: ${p.components.panel.background};
      border: 1px solid ${p.components.panel.borderColor};
      margin-bottom: 32px;

      ${p.breakpoints.up("md")} {
        padding: ${p.spacing(2)};
      }

      ${p.breakpoints.up("lg")} {
        padding: ${p.spacing(3)};
      }
    }

    .page-heading {
      font-size: ${p.typography.h4.fontSize};
      margin-top: 0;
      margin-bottom: ${p.spacing(2)};
    }

    .page-action-bar {
      margin-bottom: ${p.spacing(2)};
      display: flex;
      align-items: flex-start;

      > a,
      > button,
      > div:nth-child(2) {
        margin-left: ${p.spacing(2)};
      }
    }

    .page-action-bar--narrow {
      margin-bottom: 0;
    }

    .page-action-bar__spacer {
      width: ${p.spacing(2)};
      flex-grow: 1;
    }

    .page-sub-heading {
      margin-bottom: ${p.spacing(2)};
    }

    .page-sub-heading-icon {
      margin-left: ${p.spacing(1)};
      margin-top: ${p.spacing(.5)};
    }

    .page-hidden {
      display: none;
    }
  `}function d(){const p=(0,c.l4)();return n.createElement(t.Global,{styles:[f(p),l(p),m(p),r(p),s(p),a(p)]})}},72648:(H,T,e)=>{"use strict";e.d(T,{Fg:()=>m,HE:()=>a,Ni:()=>o,Zz:()=>l,l4:()=>d,sJ:()=>y,wW:()=>h,yK:()=>p});var t=e(24420),n=e.n(t),c=e(68404),s=e(36328),r=e(7804);let g=null;const f=new WeakMap,o=c.createContext((0,s.j)());o.displayName="ThemeContext";const l=v=>{const i=u=>{const P=g||o;return c.createElement(P.Consumer,null,E=>c.createElement(v,{...u,theme:E.v1}))};return i.displayName=`WithTheme(${v.displayName})`,n()(i,v),i},a=v=>{const i=u=>{const P=g||o;return c.createElement(P.Consumer,null,E=>c.createElement(v,{...u,theme:E}))};return i.displayName=`WithTheme(${v.displayName})`,n()(i,v),i};function m(){return(0,c.useContext)(g||o).v1}function d(){return(0,c.useContext)(g||o)}function p(v){const i=m();let u=f.get(v);return u||(u=(0,r.B)(v),f.set(v,u)),u(i)}function h(v){const i=d();let u=f.get(v);return u||(u=(0,r.B)(v),f.set(v,u)),u(i)}const y=v=>(g=c.createContext(v),()=>{g=null})},34726:(H,T,e)=>{"use strict";e.d(T,{nz:()=>f.n,Ni:()=>t.Ni,gh:()=>s,Zu:()=>r,sJ:()=>t.sJ,GU:()=>o,Bb:()=>g.B,yK:()=>t.yK,wW:()=>t.wW,Fg:()=>t.Fg,l4:()=>t.l4,Zz:()=>t.Zz,HE:()=>t.HE});var t=e(72648),n=e(36328);let c;const s=(l="dark")=>c?c(l):(0,n.j)({colors:{mode:l}}).v1,r=l=>(c=l,()=>{c=null});var g=e(7804),f=e(78427),o=e(85419)},85419:(H,T,e)=>{"use strict";e.r(T),e.d(T,{cardChrome:()=>c,focusCss:()=>l,getFocusStyles:()=>m,getMouseFocusStyles:()=>a,getTooltipContainerStyles:()=>d,hoverColor:()=>s,listItem:()=>r,listItemSelected:()=>g,mediaUp:()=>f});var t=e(35008),n=e.n(t);function c(p){return`
    background: ${p.colors.background.secondary};
    &:hover {
      background: ${s(p.colors.background.secondary,p)};
    }
    box-shadow: ${p.components.panel.boxShadow};
    border-radius: ${p.shape.borderRadius(2)};
`}function s(p,h){return h.isDark?n()(p).brighten(2).toString():n()(p).darken(2).toString()}function r(p){return`
  background: ${p.colors.background.secondary};
  &:hover {
    background: ${s(p.colors.background.secondary,p)};
  }
  box-shadow: ${p.components.panel.boxShadow};
  border-radius: ${p.shape.borderRadius(2)};
`}function g(p){return`
    background: ${s(p.colors.background.secondary,p)};
    color: ${p.colors.text.maxContrast};
`}function f(p){return`only screen and (min-width: ${p})`}const o=p=>p.hasOwnProperty("v1"),l=p=>{const h=o(p),y=h?p.colors.background.canvas:p.colors.bodyBg,v=h?p.colors.primary.main:p.colors.formFocusOutline;return`
  outline: 2px dotted transparent;
  outline-offset: 2px;
  box-shadow: 0 0 0 2px ${y}, 0 0 0px 4px ${v};
  transition-property: outline, outline-offset, box-shadow;
  transition-duration: 0.2s;
  transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);`};function a(p){return{outline:"none",boxShadow:"none"}}function m(p){return{outline:"2px dotted transparent",outlineOffset:"2px",boxShadow:`0 0 0 2px ${p.colors.background.canvas}, 0 0 0px 4px ${p.colors.primary.main}`,transitionTimingFunction:"cubic-bezier(0.19, 1, 0.22, 1)",transitionDuration:"0.2s",transitionProperty:"outline, outline-offset, box-shadow"}}const d=p=>`
  overflow: hidden;
  background: ${p.colors.background.secondary};
  box-shadow: ${p.shadows.z2};
  max-width: 800px;
  padding: ${p.spacing(1)};
  border-radius: ${p.shape.borderRadius()};
  z-index: ${p.zIndex.tooltip};
`},7804:(H,T,e)=>{"use strict";e.d(T,{B:()=>n});var t=e(58635);function n(c){return(0,t.Z)(c)}},26519:(H,T,e)=>{"use strict";e.d(T,{c:()=>t});var t=(n=>(n.GroupTitle="GroupTitle",n))(t||{})},5771:()=>{"use strict"},50622:(H,T,e)=>{"use strict";e.d(T,{BI:()=>c,e7:()=>s,iJ:()=>t.iJ});var t=e(43565),n=e(14582);const c=()=>Object.keys(t._S);function s(r){if(r)switch(r.type){case n.fS.time:return"clock-nine";case n.fS.string:return"font";case n.fS.number:return"calculator-alt";case n.fS.boolean:return"toggle-on";case n.fS.trace:return"info-circle";case n.fS.geo:return"map-marker";case n.fS.other:return"brackets-curly"}return"question-circle"}},24539:(H,T,e)=>{"use strict";e.r(T),e.d(T,{CompletionItemKind:()=>r.c,getAvailableIcons:()=>a.BI,getFieldTypeIcon:()=>a.e7,toIconName:()=>a.iJ});var t=e(2729),n=e.n(t),i={};for(const u in t)u!=="default"&&(i[u]=()=>t[u]);e.d(T,i);var c=e(96590),s=e.n(c),i={};for(const u in c)u!=="default"&&(i[u]=()=>c[u]);e.d(T,i);var r=e(26519),g=e(51257),f=e.n(g),i={};for(const u in g)["default","CompletionItemKind"].indexOf(u)<0&&(i[u]=()=>g[u]);e.d(T,i);var o=e(5771),l=e.n(o),i={};for(const u in o)["default","CompletionItemKind"].indexOf(u)<0&&(i[u]=()=>o[u]);e.d(T,i);var a=e(50622),m=e(64343),d=e.n(m),i={};for(const u in m)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","toIconName"].indexOf(u)<0&&(i[u]=()=>m[u]);e.d(T,i);var p=e(76891),h=e.n(p),i={};for(const u in p)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","toIconName"].indexOf(u)<0&&(i[u]=()=>p[u]);e.d(T,i);var y=e(53581),v=e.n(y),i={};for(const u in y)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","toIconName"].indexOf(u)<0&&(i[u]=()=>y[u]);e.d(T,i)},96590:()=>{"use strict"},53581:()=>{"use strict"},64343:()=>{"use strict"},76891:()=>{"use strict"},51257:()=>{"use strict"},2729:()=>{"use strict"},66120:(H,T,e)=>{"use strict";e.d(T,{i:()=>t});const t=(n,c)=>{n.key==="Tab"||n.altKey||n.ctrlKey||n.metaKey||(n.stopPropagation(),n.key==="Escape"&&c())}},16514:(H,T,e)=>{"use strict";e.d(T,{Gc:()=>v,Jx:()=>g,O9:()=>d,Wm:()=>u,_V:()=>l,bM:()=>i,f7:()=>a,iV:()=>m,ns:()=>o,te:()=>f});var t=e(82897),n=e.n(t),c=e(35008),s=e.n(c);const r=4,g="rgba(0, 211, 255, 1)",f="rgba(11, 237, 50, 1)",o="rgba(237, 46, 24, 1)",l="rgba(150, 150, 150, 1)",a="rgba(247, 149, 32, 1)",m=.09,d=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function p(P){const E=(0,t.map)(P,h),C=(0,t.sortBy)(E,["h"]),b=(0,t.chunk)(C,r),S=(0,t.map)(b,x=>(0,t.sortBy)(x,"l")),M=(0,t.flattenDeep)((0,t.zip)(...S));return(0,t.map)(M,y)}function h(P){return s()(P).toHsl()}function y(P){return s()(P).toHexString()}function v(P){return s()(P).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}function i(P,E){const C=s()(P),b=C.getBrightness();return C.getAlpha()<.3?E?"rgb(247, 248, 250)":"rgb(32, 34, 38)":b>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let u=p(d)},79406:(H,T,e)=>{"use strict";e.d(T,{R:()=>t,g:()=>n});const t=c=>c().map(s=>({label:s.title,ariaLabel:s.title,url:s.href,target:s.target,icon:`${s.target==="_blank"?"external-link-alt":"link"}`,onClick:s.onClick})),n=c=>/\/explore\?.*&(left|right)=\[(.*\,){2,}(.*){1}\]/.test(c)},73289:(H,T,e)=>{"use strict";e.d(T,{x:()=>t});function t(n,c,s){}},31220:(H,T,e)=>{"use strict";e.r(T),e.d(T,{getNextCharacter:()=>n,getPreviousCousin:()=>t}),typeof window<"u"&&"Element"in window&&!Element.prototype.closest&&(Element.prototype.closest=function(c){const s=(this.document||this.ownerDocument).querySelectorAll(c);let r=this,g;do{for(g=s.length;--g>=0&&s.item(g)!==r;);r=r.parentElement}while(g<0&&r);return r});function t(c,s){let r=c.parentElement.previousSibling,g;for(;r;){if(g=r.querySelector(s),g)return g;r=r.previousSibling}}function n(c){const s=(c||window).getSelection();if(!s||!s.anchorNode)return null;const r=s.getRangeAt(0),g=s.anchorNode.textContent,f=r.startOffset;return g.slice(f,f+1)}},39027:(H,T,e)=>{"use strict";e.d(T,{O:()=>t});function t(n){const s=n.lastIndexOf("."),r=n.substring(s),g=n.substring(0,s);return g.length<16?n:`${g.substring(0,16)}...${r}`}},27303:(H,T,e)=>{"use strict";e.d(T,{C:()=>c});var t=e(82897),n=e.n(t);function c(s,r){let g=0,f=s.indexOf(r);r=r.replace(/\s/g,"");const o=[];if(f!==-1)return{distance:0,found:!0,ranges:[{start:f,end:f+r.length-1}]};for(const l of r){const a=s.indexOf(l,f);if(a===-1)return{distance:1/0,ranges:[],found:!1};if(f!==-1&&(g+=a-f),f=a+1,o.length===0)o.push({start:a,end:a});else{const m=(0,t.last)(o);a===m.end+1?m.end++:o.push({start:a,end:a})}}return{distance:g,ranges:o,found:!0}}},37951:(H,T,e)=>{"use strict";e.d(T,{c:()=>g,t:()=>o});var t=e(36509),n=e(68404),c=e(4696),s=e(45710);function r(){t.ZP.options.lng||t.ZP.use(c.Db).init({resources:{},returnEmptyString:!1,lng:"en-US"})}const g=l=>(r(),n.createElement(s.c,{...l})),f=t.ZP.t,o=(l,a,m)=>(r(),f(l,a,m))},20956:(H,T,e)=>{"use strict";e.d(T,{ns:()=>c.ns,Jx:()=>c.Jx,Qi:()=>t,JU:()=>s.JU,_V:()=>c._V,zG:()=>v,te:()=>c.te,f7:()=>c.f7,iV:()=>c.iV,Ot:()=>n,Yi:()=>r.Yi,nu:()=>d.Z,_J:()=>p._J,xq:()=>y.x,MX:()=>a.MX,O9:()=>c.O9,hu:()=>h.h,C6:()=>i.C,AE:()=>a.AE,iu:()=>l.i,np:()=>o.n,vm:()=>f.vm,Bx:()=>f.Bx,bM:()=>c.bM,Gc:()=>c.Gc,z3:()=>s.z3,go:()=>g.g,Rc:()=>g.R,xl:()=>r.xl,l1:()=>r.l1,X1:()=>a.X1,FE:()=>s.FE,Wm:()=>c.Wm,NW:()=>m.N,Gu:()=>s.Gu});var t=e(31220),n=e(61970),c=e(16514),s=e(59481),r=e(12724),g=e(79406),f=e(3385),o=e(90771),l=e(30901),a=e(4176),m=e(32434),d=e(62192),p=e(2525),h=e(88383),y=e(73289),v=(u=>(u.id="id",u.title="title",u.subTitle="subTitle",u.mainStat="mainStat",u.secondaryStat="secondaryStat",u.source="source",u.target="target",u.detail="detail__",u.arc="arc__",u.color="color",u))(v||{}),i=e(27303)},88383:(H,T,e)=>{"use strict";e.d(T,{h:()=>s});var t=e(82897),n=e.n(t);const c=(0,t.throttle)((...r)=>{console.log(...r)},500),s=r=>{let g=!1;return{logger:(f,o=!1,...l)=>{},enable:()=>g=!0,disable:()=>g=!1,isEnabled:()=>g}}},4176:(H,T,e)=>{"use strict";e.d(T,{AE:()=>r,MX:()=>f,X1:()=>g});let t;const n=new Map,c=500;let s="";function r(){return t||(t=document.createElement("canvas").getContext("2d")),t}function g(o,l){const a=`${l}px 'Inter'`,m=o+a,d=n.get(m);if(d)return d;const p=r();s!==a&&(p.font=s=a);const h=p.measureText(o);return n.size===c&&n.clear(),n.set(m,h),h}function f(o,l,a,m,d){const p=g(o,14),h=l/(p.width+2)*14,y=a/m,v=Math.min(y,h);return Math.min(v,d??v)}},61970:(H,T,e)=>{"use strict";e.r(T),e.d(T,{getChildId:()=>n,renderOrCallToRender:()=>c});var t=e(68404);function n(s){let r;const g=t.Children.only(s);return"id"in g?.props?r=g.props.id:"inputId"in g.props&&(r=g?.props.inputId),typeof r=="string"?r:void 0}function c(s,r){if(t.isValidElement(s)||typeof s=="string"||typeof s=="number")return s;if(typeof s=="function")return s(r);throw new Error(`${s} is not a React element nor a function that returns React element`)}},90771:(H,T,e)=>{"use strict";e.d(T,{n:()=>n});let t=null;function n(){if(t!==null)return t;if(typeof document<"u"){const c=document.createElement("div"),s={width:"100px",height:"100px",position:"absolute",top:"-9999px",overflow:"scroll",MsOverflowStyle:"scrollbar"};Object.keys(s).map(r=>{c.style[r]=s[r]}),document.body.appendChild(c),t=c.offsetWidth-c.clientWidth,document.body.removeChild(c)}else t=0;return t||0}},62192:(H,T,e)=>{"use strict";e.d(T,{Z:()=>n,n:()=>g});var t=e(27303),n=(f=>(f.Word="Word",f.Prefix="Prefix",f.Fuzzy="Fuzzy",f))(n||{});const g={Word:(f,o)=>f.filter(l=>(l.filterText||l.label).includes(o)),Prefix:(f,o)=>f.filter(l=>(l.filterText||l.label).startsWith(o)),Fuzzy:(f,o)=>(o=o.toLowerCase(),f.filter(l=>{const{distance:a,ranges:m,found:d}=(0,t.C)(l.label.toLowerCase(),o);return d?(l.sortValue=a,l.highlightParts=m,!0):!1}))}},12724:(H,T,e)=>{"use strict";e.d(T,{Yi:()=>n,l1:()=>s,xl:()=>c});var t=e(53594);const n={document:{nodes:[{match:[{type:"paragraph"},{type:"code_block"},{type:"code_line"}]}]},inlines:{}},c=(r,g)=>{const f=r.split(`
`).map(l=>t.gO.create({type:"code_line",nodes:[t.xv.create(l)]})),o=t.gO.create({data:{syntax:g},type:"code_block",nodes:f});return t.BB.create({nodes:[o]})},s=(r,g)=>{const f=c(r,g);return t.B4.create({document:f})}},30901:(H,T,e)=>{"use strict";e.d(T,{i:()=>t});const t=(n,c)=>{let s;if(n.getLinks&&(s=n.getLinks({valueRowIndex:c.index})),!!s){for(let r=0;r<s?.length;r++)if(s[r].onClick){const g=s[r].onClick;s[r].onClick=f=>{f.ctrlKey||f.metaKey||f.shiftKey||(f.preventDefault(),g(f,{field:n,rowIndex:c.index}))}}return s}}},3385:(H,T,e)=>{"use strict";e.d(T,{Bx:()=>c,vm:()=>s});const t=["#D32D20","#1E72B8","#B240A2","#705DA0","#466803","#497A3C","#3D71AA","#B15415","#890F02","#6E6E6E","#0A437C","#6D1F62","#584477","#4C7A3F","#2F4F4F","#BF1B00","#7662B1","#8A2EB8","#517A00","#000000","#3F6833","#2F575E","#99440A","#AE561A","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],n=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];function c(f=""){const o=r(f.toLowerCase()),l=Math.abs(o%t.length);return s(l)}function s(f){return{color:t[f],borderColor:n[f]}}function r(f){let o=5381;for(let l=0;l<f.length;l++)o=(o<<5)+o+f.charCodeAt(l);return o}var g={getTagColorsFromName:c}},32434:(H,T,e)=>{"use strict";e.d(T,{N:()=>n});var t=e(68404);function n(){const[c,s]=(0,t.useState)(0);return()=>s(r=>r+1)}},59481:(H,T,e)=>{"use strict";e.d(T,{FE:()=>s,Gu:()=>n,JU:()=>t,z3:()=>c});var t=(r=>(r.onBlur="onBlur",r.onFocus="onFocus",r.onChange="onChange",r))(t||{});const n=(r,g)=>{const f=g.reduce((o,l)=>l.rule(r)?o:o.concat(l.errorMessage),[]);return f.length>0?f:null},c=(r,g)=>g&&g[r],s=(r,g)=>({rule:f=>!!f.match(r),errorMessage:g||"Value is not valid"})},42879:(H,T,e)=>{"use strict";e.d(T,{z:()=>t});const t={Breadcrumbs:{breadcrumb:n=>`data-testid ${n} breadcrumb`},TimePicker:{openButton:"data-testid TimePicker Open Button",fromField:"Time Range from field",toField:"Time Range to field",applyTimeRange:"data-testid TimePicker submit button",calendar:{label:"Time Range calendar",openButton:"Open time range calendar",closeButton:"Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{exemplarsAddButton:"Add exemplar config button",internalLinkSwitch:"Internal link switch"},exemplarMarker:"Exemplar marker"}},Menu:{MenuComponent:n=>`${n} menu`,MenuGroup:n=>`${n} menu group`,MenuItem:n=>`${n} menu item`,SubMenu:{container:"SubMenu container",icon:"SubMenu icon"}},Panels:{Panel:{title:n=>`data-testid Panel header ${n}`,headerItems:n=>`Panel header item ${n}`,containerByTitle:n=>`${n} panel`,headerCornerInfo:n=>`Panel header ${n}`},Visualization:{Graph:{VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:n=>`gpl alias ${n}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer"}}},VizLegend:{seriesName:n=>`VizLegend series ${n}`},Drawer:{General:{title:n=>`Drawer title ${n}`,expand:"Drawer expand",contract:"Drawer contract",close:"Drawer close",rcContentWrapper:()=>".rc-drawer-content-wrapper"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:n=>`${n} field property editor`},DataPane:{content:"Panel editor data pane content"},applyButton:"data-testid Apply changes and go back to dashboard",toggleVizPicker:"toggle-viz-picker",toggleVizOptions:"toggle-viz-options",toggleTableView:"toggle-table-view",measureButton:"show measure tools"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:n=>`Tab ${n}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"Rich history button",addQuery:"Query editor add query button"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:n=>`${n} query operation action`,title:n=>`Query editor row title ${n}`,container:n=>`Query editor row ${n}`},AlertTab:{content:"Alert editor tab content"},Alert:{alert:n=>`Alert ${n}`,alertV2:n=>`data-testid Alert ${n}`},TransformTab:{content:"Transform editor tab content",newTransform:n=>`New transform ${n}`,transformationEditor:n=>`Transformation editor ${n}`,transformationEditorDebugger:n=>`Transformation editor debugger ${n}`},Transforms:{card:n=>`New transform ${n}`,Reduce:{modeLabel:"Transform mode label",calculationsLabel:"Transform calculations label"},SpatialOperations:{actionLabel:"root Action field property editor",locationLabel:"root Location field property editor",location:{autoOption:"Auto location option",coords:{option:"Coords location option",latitudeFieldLabel:"root Latitude field field property editor",longitudeFieldLabel:"root Longitude field field property editor"},geohash:{option:"Geohash location option",geohashFieldLabel:"root Geohash field field property editor"},lookup:{option:"Lookup location option",lookupFieldLabel:"root Lookup field field property editor",gazetteerFieldLabel:"root Gazetteer field property editor"}}},searchInput:"search transformations"},NavToolbar:{container:"data-testid Nav toolbar"},PageToolbar:{container:()=>".page-toolbar",item:n=>`${n}`},QueryEditorToolbarItem:{button:n=>`QueryEditor toolbar item button ${n}`},BackButton:{backArrow:"Go Back"},OptionsGroup:{group:n=>n?`Options group ${n}`:"Options group",toggle:n=>n?`Options group ${n} toggle`:"Options group toggle"},PluginVisualization:{item:n=>`Plugin visualization item ${n}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"Select a folder"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"Select a data source"},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"Query field"},QueryBuilder:{queryPatterns:"Query patterns",labelSelect:"Select label",valueSelect:"Select value",matchOperatorSelect:"Select match operator"},ValuePicker:{button:n=>`Value picker button ${n}`,select:n=>`Value picker select ${n}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:n=>`data-testid Collapse folder ${n}`,expandFolder:n=>`data-testid Expand folder ${n}`,dashboardItem:n=>`${t.Search.dashboardItems} ${n}`,dashboardCard:n=>`data-testid Search card ${n}`,folderHeader:n=>`data-testid Folder header ${n}`,folderContent:n=>`data-testid Folder content ${n}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"Loading indicator"},CallToActionCard:{button:n=>`Call to action button ${n}`,buttonV2:n=>`data-testid Call to action button ${n}`},DataLinksContextMenu:{singleLink:"Data link"},CodeEditor:{container:"Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"Unified alert editor tab content"},VisualizationPreview:{card:n=>`data-testid suggestion-${n}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:n=>`data-testid dashboard-row-title-${n}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table"},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"},DebugOverlay:{wrapper:"debug-overlay"}}},68183:(H,T,e)=>{"use strict";e.d(T,{wl:()=>c});var t=e(42879);const c={pages:{Login:{url:"/login",username:"Username input field",password:"Password input field",submit:"Login button",skip:"Skip change password button"},Home:{url:"/"},DataSource:{name:"Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"Data source settings page read only message",saveAndTest:"Data source settings page Save and Test button",alert:"Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:s=>`Data source list item ${s}`},AddDataSource:{url:"/datasources/new",dataSourcePlugins:s=>`Data source plugin item ${s}`,dataSourcePluginsV2:s=>`Add new data source ${s}`},ConfirmModal:{delete:"Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:s=>`/d/${s}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag"},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:s=>`data-testid Dashboard template variables submenu Label ${s}`,submenuItemValueDropDownValueLinkTexts:s=>`data-testid Dashboard template variables Variable Value DropDown value link text ${s}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:s=>`data-testid Dashboard template variables Variable Value DropDown option text ${s}`},Settings:{General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:s=>`Dashboard settings section item ${s}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Tab General"},Annotations:{List:{addAnnotationCTA:t.z.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:t.z.CallToActionCard.buttonV2("Add annotation query")},Settings:{name:"Annotations settings name input"}},Variables:{List:{addVariableCTA:t.z.CallToActionCard.button("Add variable"),addVariableCTAV2:t.z.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:s=>`Variable editor Table Name field ${s}`,tableRowDefinitionFields:s=>`Variable editor Table Definition field ${s}`,tableRowArrowUpButtons:s=>`Variable editor Table ArrowUp button ${s}`,tableRowArrowDownButtons:s=>`Variable editor Table ArrowDown button ${s}`,tableRowDuplicateButtons:s=>`Variable editor Table Duplicate button ${s}`,tableRowRemoveButtons:s=>`Variable editor Table Remove button ${s}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"Variable editor Form IncludeAll field",selectionOptionsCustomAllInputV2:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"Variable editor Preview of Values option",submitButton:"Variable editor Submit button",applyButton:"data-testid Variable editor Apply button"},QueryVariable:{queryOptionsDataSourceSelect:t.z.DataSourcePicker.container,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input"}}}}},Dashboards:{url:"/dashboards",dashboards:s=>`Dashboard search item ${s}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{shareButton:"Share dashboard or panel",PublicDashboard:{Tab:"Tab Public dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",EnableSwitch:"data-testid public dashboard on off switch",EnableAnnotationsSwitch:"data-testid public dashboard on off switch for annotations",SaveConfigButton:"data-testid public dashboard save config button",DeleteButton:"data-testid public dashboard delete button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert",UnsupportedDatasourcesWarningAlert:"data-testid public dashboard unsupported datasources",EnableTimeRangeSwitch:"data-testid public dashboard on off switch for time range"}},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"}},SoloPanel:{url:s=>`/d-solo/${s}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"Plugin signature info",disabledInfo:"Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemDelete:"Delete playlist item"},Search:{url:"/?search=openn",FolderView:{url:"/?search=open&layout=folders"}},PublicDashboards:{ListItem:{linkButton:"public-dashboard-link-button",configButton:"public-dashboard-configuration-button",trashcanButton:"public-dashboard-remove-button"}}},components:t.z}},40538:(H,T,e)=>{"use strict";e.d(T,{As:()=>O,FI:()=>a,IG:()=>b,Jp:()=>r,KC:()=>o,LB:()=>c,QH:()=>B,ap:()=>S,bQ:()=>h,f3:()=>x,h2:()=>w,i3:()=>v,iT:()=>U,jG:()=>M,jK:()=>i,l8:()=>g,o0:()=>m,pR:()=>f,pc:()=>C,pu:()=>d,q1:()=>n,v7:()=>R,wN:()=>p,wf:()=>l,wm:()=>P,yK:()=>s});var t=(I=>(I.Field="field",I.Fixed="fixed",I.Template="template",I))(t||{}),n=(I=>(I.Auto="auto",I.Coords="coords",I.Geohash="geohash",I.Lookup="lookup",I))(n||{}),c=(I=>(I.Auto="auto",I.Bottom="bottom",I.Hidden="hidden",I.Left="left",I.Right="right",I.Top="top",I))(c||{}),s=(I=>(I.Series="series",I.Text="text",I))(s||{}),r=(I=>(I.Always="always",I.Auto="auto",I.Never="never",I))(r||{}),g=(I=>(I.Bars="bars",I.Line="line",I.Points="points",I))(g||{}),f=(I=>(I.Constant="constant",I.NegativeY="negative-Y",I))(f||{}),o=(I=>(I.Linear="linear",I.Smooth="smooth",I.StepAfter="stepAfter",I.StepBefore="stepBefore",I))(o||{}),l=(I=>(I.Linear="linear",I.Log="log",I.Ordinal="ordinal",I.Symlog="symlog",I))(l||{}),a=(I=>(I.Hue="hue",I.None="none",I.Opacity="opacity",I.Scheme="scheme",I))(a||{}),m=(I=>(I.None="none",I.Normal="normal",I.Percent="percent",I))(m||{}),d=(I=>(I[I.After=1]="After",I[I.Before=-1]="Before",I[I.Center=0]="Center",I))(d||{}),p=(I=>(I[I.Horizontal=0]="Horizontal",I[I.Vertical=1]="Vertical",I))(p||{}),h=(I=>(I[I.Down=-1]="Down",I[I.Left=-1]="Left",I[I.Right=1]="Right",I[I.Up=1]="Up",I))(h||{});const y={dash:[]};var v=(I=>(I.Area="area",I.Dashed="dashed",I.DashedAndArea="dashed+area",I.Line="line",I.LineAndArea="line+area",I.Off="off",I.Series="series",I))(v||{}),i=(I=>(I.Hidden="hidden",I.List="list",I.Table="table",I))(i||{});const u={calcs:[]};var P=(I=>(I.Auto="auto",I.Horizontal="horizontal",I.Vertical="vertical",I))(P||{});const E={timezone:[]};var C=(I=>(I.Background="background",I.None="none",I.Value="value",I))(C||{}),b=(I=>(I.Area="area",I.Line="line",I.None="none",I))(b||{}),S=(I=>(I.Auto="auto",I.Center="center",I))(S||{}),M=(I=>(I.Auto="auto",I.Name="name",I.None="none",I.Value="value",I.ValueAndName="value_and_name",I))(M||{}),x=(I=>(I.Multi="multi",I.None="none",I.Single="single",I))(x||{}),O=(I=>(I.Ascending="asc",I.Descending="desc",I.None="none",I))(O||{});const L={calcs:[]};var B=(I=>(I.Basic="basic",I.Gradient="gradient",I.Lcd="lcd",I))(B||{}),w=(I=>(I.Auto="auto",I.BasicGauge="basic",I.ColorBackground="color-background",I.ColorBackgroundSolid="color-background-solid",I.ColorText="color-text",I.Gauge="gauge",I.GradientGauge="gradient-gauge",I.Image="image",I.JSONView="json-view",I.LcdGauge="lcd-gauge",I))(w||{}),R=(I=>(I.Basic="basic",I.Gradient="gradient",I))(R||{});const A={align:"auto",inspect:!1},U="browser"},85596:(H,T,e)=>{"use strict";e.d(T,{AU:()=>u,Gu:()=>r,NU:()=>y,Ql:()=>E,Vb:()=>v,ZM:()=>i,gW:()=>c});const t={tags:[]},n={builtIn:0,enable:!0,hide:!1,showIn:0,type:"dashboard"},c={global:!1,id:"00000000-0000-0000-0000-000000000000",index:-1,skipUrlSync:!1};var s=(C=>(C[C.dontHide=0]="dontHide",C[C.hideLabel=1]="hideLabel",C[C.hideVariable=2]="hideVariable",C))(s||{}),r=(C=>(C.Done="Done",C.Error="Error",C.Loading="Loading",C.NotStarted="NotStarted",C.Streaming="Streaming",C))(r||{});const g={asDropdown:!1,includeVars:!1,keepTime:!1,tags:[],targetBlank:!1};var f=(C=>(C.ContinuousGrYlRd="continuous-GrYlRd",C.Fixed="fixed",C.PaletteClassic="palette-classic",C.PaletteSaturated="palette-saturated",C.Thresholds="thresholds",C))(f||{});const o={h:9,w:12,x:0,y:0};var l=(C=>(C.Absolute="absolute",C.Percentage="percentage",C))(l||{});const a={steps:[]};var m=(C=>(C.RangeToText="range",C.RegexToText="regex",C.SpecialValue="special",C.ValueToText="value",C))(m||{}),d=(C=>(C.Empty="empty",C.False="false",C.NaN="nan",C.Null="null",C.NullAndNan="null+nan",C.True="true",C))(d||{}),p=(C=>(C[C.Crosshair=1]="Crosshair",C[C.Off=0]="Off",C[C.Tooltip=2]="Tooltip",C))(p||{});const h=0,y={links:[],repeatDirection:"h",tags:[],targets:[],thresholds:[],timeRegions:[],transformations:[],transparent:!1},v={overrides:[]},i={id:""},u={links:[],mappings:[]},P={collapsed:!1,panels:[]},E={editable:!0,fiscalYearStartMonth:0,graphTooltip:0,links:[],panels:[],revision:-1,schemaVersion:36,style:"dark",tags:[],timezone:"browser"}},30670:(H,T,e)=>{"use strict";e.d(T,{Ql:()=>c});var t=e(85596),n=(l=>(l[l.dontHide=0]="dontHide",l[l.hideLabel=1]="hideLabel",l[l.hideVariable=2]="hideVariable",l))(n||{});const c=t.Ql,s={...t.gW,rootStateKey:null,error:null,description:null,hide:0,state:t.Gu.NotStarted,datasource:null},r=t.NU,g=t.AU,f=t.Vb,o=t.ZM},30562:(H,T,e)=>{"use strict";e.d(T,{Or:()=>Ll,b4:()=>Wo,nH:()=>hi});var t=e(55560),n=e(68404),c=e(36635),s=e(70356),r=e(37932),g=e(35645),f=e(41818),o=e(53546),l=e(5191),a=e(78427),m=e(85511),d=e(30506),p=e(10323),h=e(3153);const y=n.forwardRef((xe,xt)=>n.createElement("div",{id:"ngRoot",ref:xt,dangerouslySetInnerHTML:{__html:"<grafana-app ng-cloak></grafana-app>"}}));y.displayName="AngularRoot";var v=e(11484);async function i(){if(g.v.angularSupportEnabled){const{AngularApp:xe}=await Promise.all([e.e(2773),e.e(6738),e.e(4704)]).then(e.bind(e,6738)),xt=new xe;xt.init(),xt.bootstrap()}else(0,v.W)({load:(xe,xt,Nt)=>({destroy:()=>{},digest:()=>{},getScope:()=>({})})})}var u=e(52423),P=e(72648),E=e(34177),C=e(81168),b=e(82897),S=e(24844),M=e(83383),x=e(35287),O=e(82002),L=e(45984),B=e(97063),w=e(25337),R=e(22350),A=e(35029),U=e(68226),I=e(31403),N=e(47694),F=e(19360);function D({onDismiss:xe}){const{value:xt=[]}=(0,R.Z)(()=>F.h.loadOrgs(),[]),Nt=O.Vt.user.orgId,Jt=(0,u.css)({display:"flex",maxHeight:"calc(85vh - 42px)"}),nn=async an=>{await F.h.setUserOrg(an),window.location.href=`${N.ZP.appSubUrl}${N.ZP.appSubUrl.endsWith("/")?"":"/"}?orgId=${an.orgId}`};return n.createElement(A.u,{title:"Switch Organization",icon:"arrow-random",onDismiss:xe,isOpen:!0,contentClassName:Jt},n.createElement(U.$,{autoHeightMin:"100%"},n.createElement("table",{className:"filter-table form-inline"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Name"),n.createElement("th",null,"Role"),n.createElement("th",null))),n.createElement("tbody",null,xt.map(an=>n.createElement("tr",{key:an.orgId},n.createElement("td",null,an.name),n.createElement("td",null,an.role),n.createElement("td",{className:"text-right"},an.orgId===Nt?n.createElement(I.zx,{size:"sm"},"Current"):n.createElement(I.zx,{variant:"secondary",size:"sm",onClick:()=>nn(an)},"Switch to"))))))))}var Y=e(41197);const j="search",K="navbar-menu-portal-container",z=()=>document.getElementById(K)??document.body,Z=(xe,xt)=>{const{isSignedIn:Nt,user:Jt}=O.Vt,nn=()=>{B.Z.publish(new L.Dn({component:Y.B}))},an=()=>{B.Z.publish(new L.Dn({component:D}))};if(!g.v.featureToggles.topnav&&Jt&&Jt.orgCount>1){const xn=xe.find(Gn=>Gn.id==="profile");xn&&(xn.showOrgSwitcher=!0,xn.subTitle=`Organization: ${Jt?.orgName}`)}if(!Nt&&!g.v.featureToggles.topnav){const xn=M.u.getUrlForPartial(xt,{forceLogin:"true"});xe.unshift({icon:"signout",id:"sign-in",section:S.yV.Config,target:"_self",text:(0,x.t)("nav.sign-in","Sign in"),url:xn})}return xe.forEach(xn=>{let Gn=xn.children||[];xn.id==="help"&&(xn.children=[...Gn,...(0,w.dP)(),{id:"keyboard-shortcuts",text:(0,x.t)("nav.help/keyboard-shortcuts","Keyboard shortcuts"),icon:"keyboard",onClick:nn}]),!g.v.featureToggles.topnav&&xn.showOrgSwitcher&&(xn.children=[...Gn,{id:"switch-organization",text:(0,x.t)("nav.profile/switch-org","Switch organization"),icon:"arrow-random",onClick:an}])}),xe},ae=(xe,xt)=>{const Nt=xe.onClick;return xe.onClick=()=>{(0,f.ff)("grafana_navigation_item_clicked",{path:xe.url??xe.id,state:xt?"expanded":"collapsed"}),Nt?.()},xe.children&&(xe.children=xe.children.map(Jt=>ae(Jt,xt))),xe},J=(xe,xt)=>Boolean(xe===xt||oe(xe,xt)),oe=(xe,xt)=>Boolean(xe.children?.some(Nt=>Nt===xt?!0:oe(Nt,xt))),Ee=xe=>xe?.split("?")[0]??"",me=(xe,xt)=>{const Nt=Ee(xt?.url),Jt=Ee(xe.url);return Jt&&Jt.length>Nt?.length},re=(xe,xt,Nt)=>{const Jt="/dashboards";for(const nn of xe){const an=Ee(nn.url),xn=M.u.stripBaseFromUrl(an);if(xn&&nn.id!=="starred")if(xn===xt){Nt=nn;break}else if(xn!=="/"&&xt.startsWith(xn))me(nn,Nt)&&(Nt=nn);else if(xn==="/alerting/list"&&xt.startsWith("/alerting/notification/")){Nt=nn;break}else xn===Jt&&xt.startsWith("/d/")&&me(nn,Nt)&&(Nt=nn);if(nn.children&&(Nt=re(nn.children,xt,Nt)),Ee(Nt?.url)===xt)return Nt}return Nt},le=xe=>new URLSearchParams(xe.search).get("search")==="open";function pe(xe){return xe.id??xe.text}var ee=e(99510),se=e(81699),Q=e(6665),G=e(22163),q=e(39904),X=e(8180),de=e(13211),Be=e(40419),ke=e(29460);function He({children:xe,icon:xt,isActive:Nt,isChild:Jt,onClick:nn,target:an,url:xn}){const Gn=(0,P.l4)(),Ln=ue(Gn,Nt,Jt),ia=n.createElement("div",{className:Ln.linkContent},xt&&n.createElement(q.J,{"data-testid":"dropdown-child-icon",name:xt}),n.createElement("div",{className:Ln.linkText},xe),an==="_blank"&&n.createElement(q.J,{"data-testid":"external-link-icon",name:"external-link-alt",className:Ln.externalLinkIcon}));let ta=n.createElement("button",{className:(0,u.cx)(Ln.button,Ln.element),onClick:nn},ia);return xn&&(ta=!an&&xn.startsWith("/")?n.createElement(ke.r,{className:Ln.element,href:xn,target:an,onClick:nn},ia):n.createElement("a",{href:xn,target:an,className:Ln.element,onClick:nn},ia)),n.createElement("li",{className:Ln.listItem},ta)}He.displayName="NavBarMenuItem";const ue=(xe,xt,Nt)=>({button:(0,u.css)({backgroundColor:"unset",borderStyle:"unset"}),linkContent:(0,u.css)({alignItems:"center",display:"flex",gap:"0.5rem",height:"100%",width:"100%"}),linkText:(0,u.css)({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),externalLinkIcon:(0,u.css)({color:xe.colors.text.secondary}),element:(0,u.css)({alignItems:"center",boxSizing:"border-box",position:"relative",color:xt?xe.colors.text.primary:xe.colors.text.secondary,padding:xe.spacing(1,1,1,Nt?5:0),...Nt&&{borderRadius:xe.shape.borderRadius()},width:"100%","&:hover, &:focus-visible":{...Nt&&{background:xe.colors.emphasize(xe.colors.background.primary,.03)},textDecoration:"underline",color:xe.colors.text.primary},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${xe.colors.primary.main}`,outlineOffset:"-2px",transition:"none"},"&::before":{display:xt?"block":"none",content:'" "',height:xe.spacing(3),position:"absolute",left:xe.spacing(1),top:"50%",transform:"translateY(-50%)",width:xe.spacing(.5),borderRadius:xe.shape.borderRadius(1),backgroundImage:xe.colors.gradients.brandVertical}}),listItem:(0,u.css)({boxSizing:"border-box",position:"relative",display:"flex",width:"100%",...Nt&&{padding:xe.spacing(0,2)}})});var Oe=e(24664),Fe=e(36578);function Ie({link:xe}){const xt=(0,P.l4)(),Nt=we(xt);if(xe.icon==="grafana")return n.createElement(Fe.c.MenuLogo,{className:Nt.img});if(xe.icon){const Jt=(0,Be.toIconName)(xe.icon);return n.createElement(q.J,{name:Jt??"link",size:"xl"})}else return n.createElement("img",{className:(0,u.cx)(Nt.img,xe.roundIcon&&Nt.round),src:xe.img,alt:""})}function we(xe){return{img:(0,u.css)({height:xe.spacing(3),width:xe.spacing(3)}),round:(0,u.css)({borderRadius:"50%"})}}const Re=({children:xe})=>{const xt=(0,P.wW)(_e);return n.createElement("div",null,xe,n.createElement("span",{className:xt.highlight}))},_e=xe=>({highlight:u.css`
      background-color: ${xe.colors.success.main};
      border-radius: 50%;
      width: 6px;
      height: 6px;
      display: inline-block;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `});function et({link:xe,activeItem:xt,children:Nt,className:Jt,onClose:nn}){const an=(0,P.wW)(qe),xn=xe.highlightText?Re:n.Fragment,Gn=xe===xt,Ln=oe(xe,xt),[ia,ta]=(0,Oe.Z)(`grafana.navigation.expanded[${xe.text}]`,!1)??Boolean(Ln);return n.createElement(n.Fragment,null,n.createElement("div",{className:(0,u.cx)(an.collapsibleSectionWrapper,Jt)},n.createElement(He,{isActive:xe===xt,onClick:()=>{xe.onClick?.(),nn?.()},target:xe.target,url:xe.url},n.createElement("div",{className:(0,u.cx)(an.labelWrapper,{[an.isActive]:Gn,[an.hasActiveChild]:Ln})},n.createElement(xn,null,n.createElement(Ie,{link:xe})),xe.text)),Nt&&n.createElement(I.zx,{"aria-label":`${ia?"Collapse":"Expand"} section`,variant:"secondary",fill:"text",className:an.collapseButton,onClick:()=>ta(!ia)},n.createElement(q.J,{name:ia?"angle-up":"angle-down",size:"xl"}))),ia&&Nt)}const qe=xe=>({collapsibleSectionWrapper:(0,u.css)({alignItems:"center",display:"flex"}),collapseButton:(0,u.css)({color:xe.colors.text.disabled,padding:xe.spacing(0,.5),marginRight:xe.spacing(1)}),collapseWrapperActive:(0,u.css)({backgroundColor:xe.colors.action.disabledBackground}),collapseContent:(0,u.css)({padding:0}),labelWrapper:(0,u.css)({display:"grid",fontSize:xe.typography.pxToRem(14),gridAutoFlow:"column",gridTemplateColumns:`${xe.spacing(7)} auto`,placeItems:"center",fontWeight:xe.typography.fontWeightMedium}),isActive:(0,u.css)({color:xe.colors.text.primary,"&::before":{display:"block",content:'" "',height:xe.spacing(3),position:"absolute",left:xe.spacing(1),top:"50%",transform:"translateY(-50%)",width:xe.spacing(.5),borderRadius:xe.shape.borderRadius(1),backgroundImage:xe.colors.gradients.brandVertical}}),hasActiveChild:(0,u.css)({color:xe.colors.text.primary})});function Je({link:xe,activeItem:xt,onClose:Nt}){const Jt=(0,P.wW)(lt);return xe.emptyMessage&&!at(xe)?n.createElement(et,{onClose:Nt,link:xe,activeItem:xt},n.createElement("ul",{className:Jt.children},n.createElement("div",{className:Jt.emptyMessage},xe.emptyMessage))):n.createElement(et,{onClose:Nt,link:xe,activeItem:xt},at(xe)&&n.createElement("ul",{className:Jt.children},xe.children.map(nn=>{const an=nn.icon?(0,Be.toIconName)(nn.icon):void 0;return!nn.isCreateAction&&n.createElement(He,{key:`${xe.text}-${nn.text}`,isActive:J(nn,xt),isChild:!0,icon:nn.showIconInNavbar?an:void 0,onClick:()=>{nn.onClick?.(),Nt()},target:nn.target,url:nn.url},nn.text)})))}const lt=xe=>({children:(0,u.css)({display:"flex",flexDirection:"column"}),flex:(0,u.css)({display:"flex"}),itemWithoutMenu:(0,u.css)({position:"relative",placeItems:"inherit",justifyContent:"start",display:"flex",flexGrow:1,alignItems:"center"}),fullWidth:(0,u.css)({height:"100%",width:"100%"}),iconContainer:(0,u.css)({display:"flex",placeContent:"center"}),itemWithoutMenuContent:(0,u.css)({display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${xe.spacing(7)} auto`,alignItems:"center",height:"100%"}),linkText:(0,u.css)({fontSize:xe.typography.pxToRem(14),justifySelf:"start"}),emptyMessage:(0,u.css)({color:xe.colors.text.secondary,fontStyle:"italic",padding:xe.spacing(1,1.5,1,7)})});function at(xe){return Boolean(xe.children&&xe.children.length>0)}const Xe="350px";function gt({activeItem:xe,navItems:xt,searchBarHidden:Nt,onClose:Jt}){const nn=(0,P.l4)(),an=ot(nn,Nt),xn=nn.transitions.duration.shortest,Gn=Ye(nn,xn),{chrome:Ln}=(0,E.p)(),ia=Ln.useState(),ta=(0,n.useRef)(null),fa=(0,n.useRef)(null),{dialogProps:ha}=(0,ee.R)({},ta),[zn,Zn]=(0,n.useState)(!1),xa=()=>Zn(!1),{overlayProps:Wa,underlayProps:Ba}=(0,Q.Ir)({isDismissable:!0,isOpen:!0,onClose:xa},ta);return(0,n.useEffect)(()=>{ia.megaMenuOpen&&Zn(!0)},[ia.megaMenuOpen]),n.createElement(Q.Xj,null,n.createElement(G.Z,{nodeRef:ta,in:zn,unmountOnExit:!0,classNames:Gn.overlay,timeout:{enter:xn,exit:0},onExited:Jt},n.createElement("div",{"data-testid":"navbarmenu",ref:ta,...Wa,...ha,className:an.container},n.createElement(se.MT,{contain:!0,autoFocus:!0},n.createElement("div",{className:an.mobileHeader},n.createElement(q.J,{name:"bars",size:"xl"}),n.createElement(X.h,{"aria-label":"Close navigation menu",name:"times",onClick:xa,size:"xl",variant:"secondary"})),n.createElement("nav",{className:an.content},n.createElement(U.$,{showScrollIndicators:!0,hideHorizontalTrack:!0},n.createElement("ul",{className:an.itemList},xt.map(La=>n.createElement(Je,{link:La,onClose:xa,activeItem:xe,key:La.text})))))))),n.createElement(G.Z,{nodeRef:fa,in:zn,unmountOnExit:!0,classNames:Gn.backdrop,timeout:{enter:xn,exit:0}},n.createElement("div",{ref:fa,className:an.backdrop,...Ba})))}gt.displayName="NavBarMenu";const ot=(xe,xt)=>{const Nt=(xt?de.$:de.$*2)+1;return{backdrop:(0,u.css)({backdropFilter:"blur(1px)",backgroundColor:xe.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:xt?0:de.$,zIndex:xe.zIndex.modalBackdrop,[xe.breakpoints.up("md")]:{top:Nt}}),container:(0,u.css)({display:"flex",bottom:0,flexDirection:"column",left:0,marginRight:xe.spacing(1.5),right:0,zIndex:xe.zIndex.modal,position:"fixed",top:xt?0:de.$,backgroundColor:xe.colors.background.primary,boxSizing:"content-box",[xe.breakpoints.up("md")]:{borderRight:`1px solid ${xe.colors.border.weak}`,right:"unset",top:Nt}}),content:(0,u.css)({display:"flex",flexDirection:"column",overflow:"auto"}),mobileHeader:(0,u.css)({display:"flex",justifyContent:"space-between",padding:xe.spacing(1,2),[xe.breakpoints.up("md")]:{display:"none"}}),itemList:(0,u.css)({display:"grid",gridAutoRows:`minmax(${xe.spacing(6)}, auto)`,gridTemplateColumns:`minmax(${Xe}, auto)`,minWidth:Xe})}},Ye=(xe,xt)=>{const Nt={transitionDuration:`${xt}ms`,transitionTimingFunction:xe.transitions.easing.easeInOut,[xe.breakpoints.down("md")]:{overflow:"hidden"}},Jt={...Nt,transitionProperty:"box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},nn={...Nt,transitionProperty:"opacity"},an={width:"100%",[xe.breakpoints.up("md")]:{boxShadow:xe.shadows.z3,width:Xe}},xn={boxShadow:"none",width:0},Gn={opacity:1},Ln={opacity:0};return{backdrop:{enter:(0,u.css)(Ln),enterActive:(0,u.css)(nn,Gn),enterDone:(0,u.css)(Gn)},overlay:{enter:(0,u.css)(xn),enterActive:(0,u.css)(Jt,an),enterDone:(0,u.css)(an)}}},mt=n.memo(({onClose:xe,searchBarHidden:xt})=>{const Nt=(0,C.useSelector)(fa=>fa.navBarTree),Jt=(0,P.l4)(),nn=ce(Jt),an=(0,s.TH)(),xn=(0,b.cloneDeep)(Nt),Gn=xn.filter(fa=>fa.section===S.yV.Core||fa.section===S.yV.Plugin).map(fa=>ae(fa,!0)),Ln=Z(xn.filter(fa=>fa.section===S.yV.Config&&fa&&fa.id!=="help"&&fa.id!=="profile"),an).map(fa=>ae(fa,!0)),ia=[...Gn,...Ln],ta=re(ia,an.pathname);return n.createElement("div",{className:nn.menuWrapper},n.createElement(gt,{activeItem:ta,navItems:ia,onClose:xe,searchBarHidden:xt}))});mt.displayName="MegaMenu";const ce=xe=>({menuWrapper:(0,u.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:xe.zIndex.sidemenu})});var be=e(42879),Te=e(64319),Ke=e(14393);function ge({href:xe,isCurrent:xt,text:Nt}){const Jt=(0,P.wW)(Me),nn=()=>{(0,f.ff)("grafana_breadcrumb_clicked",{url:xe})};return n.createElement("li",{className:Jt.breadcrumbWrapper},xt?n.createElement("span",{"data-testid":be.z.Breadcrumbs.breadcrumb(Nt),className:Jt.breadcrumb,"aria-current":"page"},Nt):n.createElement(n.Fragment,null,n.createElement("a",{onClick:nn,"data-testid":be.z.Breadcrumbs.breadcrumb(Nt),className:(0,u.cx)(Jt.breadcrumb,Jt.breadcrumbLink),href:xe},Nt),n.createElement("div",{className:Jt.separator,"aria-hidden":!0},n.createElement(q.J,{name:"angle-right"}))))}const Me=xe=>{const xt=(0,u.css)({color:xe.colors.text.secondary});return{breadcrumb:(0,u.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",padding:xe.spacing(0,.5),whiteSpace:"nowrap",color:xe.colors.text.secondary}),breadcrumbLink:(0,u.css)({color:xe.colors.text.primary,"&:hover":{textDecoration:"underline"}}),breadcrumbWrapper:(0,u.css)({alignItems:"center",color:xe.colors.text.primary,display:"flex",flex:1,minWidth:0,maxWidth:"max-content",[xe.breakpoints.down("md")]:{display:"none","&:nth-last-child(2)":{display:"flex",flexDirection:"row-reverse",[`.${xt}`]:{transform:"rotate(180deg)"}},"&:first-child&:last-child":{display:"flex",[`.${xt}`]:{display:"none"}}}}),separator:xt}};function ye({breadcrumbs:xe,className:xt}){const Nt=(0,P.wW)(fe);return n.createElement("nav",{"aria-label":"Breadcrumbs",className:xt},n.createElement("ol",{className:Nt.breadcrumbs},xe.map((Jt,nn)=>n.createElement(ge,{...Jt,isCurrent:nn===xe.length-1,key:nn}))))}const fe=xe=>({breadcrumbs:(0,u.css)({display:"flex",alignItems:"center",flexWrap:"nowrap"})});var he=e(67345),De=e(89097);function Ae({actions:xe,searchBarHidden:xt,sectionNav:Nt,pageNav:Jt,onToggleMegaMenu:nn,onToggleSearchBar:an,onToggleKioskMode:xn}){const Gn=(0,C.useSelector)(ta=>ta.navIndex)[Ke.Qz],Ln=(0,P.wW)(Ne),ia=(0,he.t)(Nt,Jt,Gn);return n.createElement("div",{"data-testid":be.z.NavToolbar.container,className:Ln.pageToolbar},n.createElement("div",{className:Ln.menuButton},n.createElement(X.h,{name:"bars",tooltip:"Toggle menu",tooltipPlacement:"bottom",size:"xl",onClick:nn})),n.createElement(ye,{breadcrumbs:ia,className:Ln.breadcrumbs}),n.createElement("div",{className:Ln.actions},xe,xe&&n.createElement(De.M,null),xt&&n.createElement(Te.h,{onClick:xn,narrow:!0,title:"Enable kiosk mode",icon:"monitor"}),n.createElement(Te.h,{onClick:an,narrow:!0,title:"Toggle top search bar"},n.createElement(q.J,{name:xt?"angle-down":"angle-up",size:"xl"}))))}const Ne=xe=>({breadcrumbs:(0,u.css)({maxWidth:"50%"}),pageToolbar:(0,u.css)({height:de.$,display:"flex",padding:xe.spacing(0,1,0,2),alignItems:"center",justifyContent:"space-between"}),menuButton:(0,u.css)({display:"flex",alignItems:"center",marginRight:xe.spacing(1)}),actions:(0,u.css)({display:"flex",alignItems:"center",flexWrap:"nowrap",justifyContent:"flex-end",paddingLeft:xe.spacing(1),flexGrow:1,gap:xe.spacing(.5),minWidth:0})});var Ze=e(71698),Se=e(77582),Ue=e(86253),Qe=e(30979),pt=e(6981),bt=e(89050),yt=e(61744),Mt=e(53764),At=e(13724);function Pt({feedUrl:xe}){const xt=(0,P.wW)(rn),{state:Nt,getNews:Jt}=(0,At.j)(xe);return(0,n.useEffect)(()=>{Jt()},[Jt]),Nt.loading||Nt.error?n.createElement("div",{className:xt.innerWrapper},Nt.loading&&n.createElement(yt.u,{text:"Loading..."}),Nt.error&&Nt.error.message):Nt.value?n.createElement(bt.Z,null,({width:nn})=>n.createElement("div",{style:{width:`${nn}px`}},Nt.value.map((an,xn)=>n.createElement(Mt.S,{key:xn,index:xn,showImage:!0,width:nn,data:Nt.value})))):null}const rn=xe=>({innerWrapper:u.css`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `});function Fn({className:xe}){const[xt,Nt]=(0,Ue.Z)(!1),Jt=()=>{Nt(!0)};return n.createElement(n.Fragment,null,n.createElement(Te.h,{className:xe,onClick:Jt,iconOnly:!0,icon:"rss","aria-label":"News"}),xt&&n.createElement(Qe.d,{title:(0,x.t)("news.title","Latest from the blog"),scrollableContent:!0,onClose:Nt},n.createElement(Pt,{feedUrl:pt.k})))}function kn({breakpoint:xe,onChange:xt}){(0,n.useEffect)(()=>{const Nt=window.matchMedia(`(min-width: ${xe}px)`),Jt=nn=>xt(nn);return Nt.addEventListener("change",Jt),()=>Nt.removeEventListener("change",Jt)},[xe,xt])}var Jn=e(2183),qn=e(15670);function Ut({orgs:xe,onSelectChange:xt}){const Nt=(0,P.wW)(ut);return n.createElement(qn.b,{"aria-label":"Change organization",variant:"secondary",buttonCss:Nt.buttonCss,size:"md",label:"",fill:"text",isFullWidth:!1,options:xe.map(Jt=>({label:Jt.name,description:Jt.role,value:Jt})),onChange:xt,icon:"building"})}const ut=xe=>({buttonCss:(0,u.css)({color:xe.colors.text.secondary,"&:hover":{color:xe.colors.text.primary}})});var nt=e(53217);function vt({orgs:xe,onSelectChange:xt}){const Nt=(0,P.wW)(ht),{orgName:Jt,orgId:nn,orgRole:an}=O.Vt.user,[xn,Gn]=(0,n.useState)(()=>({label:Jt,value:{role:an,orgId:nn,name:Jt},description:an})),Ln=ia=>{Gn(ia),xt(ia)};return n.createElement(nt.Ph,{"aria-label":"Change organization",width:"auto",value:xn,prefix:n.createElement(q.J,{className:"prefix-icon",name:"building"}),className:Nt.select,options:xe.map(ia=>({label:ia.name,description:ia.role,value:ia})),onChange:Ln})}const ht=xe=>({select:(0,u.css)({border:"none",background:"none",color:xe.colors.text.secondary,"&:hover":{color:xe.colors.text.primary,"& .prefix-icon":(0,u.css)({color:xe.colors.text.primary})}})});function It(){const xe=(0,P.l4)(),xt=(0,C.useDispatch)(),Nt=(0,C.useSelector)(Ln=>Ln.organization.userOrgs),Jt=Ln=>{Ln.value&&((0,Jn.Q$)(Ln.value.orgId),r.E1.partial({orgId:Ln.value.orgId},!0),window.location.reload())};(0,n.useEffect)(()=>{O.Vt.isSignedIn&&xt((0,Jn.JE)())},[xt]);const nn=xe.breakpoints.values.sm,[an,xn]=(0,n.useState)(!window.matchMedia(`(min-width: ${nn}px)`).matches);if(kn({breakpoint:nn,onChange:Ln=>{xn(!Ln.matches)}}),Nt?.length<=1)return null;const Gn=an?Ut:vt;return n.createElement(Gn,{orgs:Nt,onSelectChange:Jt})}var Ft=e(38484);function en(xe){const xt=[];for(const Nt of xe)Nt.isCreateAction&&xt.push(Nt),Nt.children&&xt.push(...en(Nt.children));return xt}const sn=({})=>{const xe=(0,P.wW)(Mn),xt=(0,P.l4)(),Nt=(0,C.useSelector)(Ln=>Ln.navBarTree),Jt=xt.breakpoints.values.sm,[nn,an]=(0,n.useState)(!window.matchMedia(`(min-width: ${Jt}px)`).matches),xn=(0,n.useMemo)(()=>en(Nt),[Nt]);kn({breakpoint:Jt,onChange:Ln=>{an(!Ln.matches)}});const Gn=()=>n.createElement(Ft.v,null,xn.map((Ln,ia)=>n.createElement(Ft.v.Item,{key:ia,url:Ln.url,label:Ln.text,onClick:()=>(0,f.ff)("grafana_menu_item_clicked",{url:Ln.url,from:"quickadd"})})));return xn.length>0?n.createElement(n.Fragment,null,n.createElement(Ze.L,{overlay:Gn,placement:"bottom-end"},Ln=>nn?n.createElement(Te.h,{iconOnly:!0,icon:"plus-circle","aria-label":"New"}):n.createElement(Te.h,{iconOnly:!0,icon:"plus",isOpen:Ln,"aria-label":"New"})),n.createElement(De.M,{className:xe.separator})):null},Mn=xe=>({buttonContent:(0,u.css)({alignItems:"center",display:"flex"}),buttonText:(0,u.css)({[xe.breakpoints.down("md")]:{display:"none"}}),separator:(0,u.css)({[xe.breakpoints.down("sm")]:{display:"none"}})});function En(){const xe=(0,s.TH)(),xt=(0,P.wW)(yn),Nt=M.u.getUrlForPartial(xe,{forceLogin:"true"});return n.createElement("a",{className:xt.link,href:Nt,target:"_self"},"Sign in")}const yn=xe=>({link:(0,u.css)({paddingRight:xe.spacing(1),whiteSpace:"nowrap","&:hover":{textDecoration:"underline"}})});var Bn=e(42044);function ea({node:xe}){const xt=(0,P.wW)(Qn),Nt=(0,s.TH)(),Jt=Z([(0,b.cloneDeep)(xe)],Nt),nn=ae(Jt[0],!1);return nn?n.createElement(Ft.v,{header:n.createElement("div",{onClick:an=>an.stopPropagation(),className:xt.header},n.createElement("div",null,nn.text),nn.subTitle&&n.createElement("div",{className:xt.subTitle},nn.subTitle))},nn.children?.map(an=>{const xn=/^https?:\/\//.test(an.url||"");return an.url?n.createElement(Bn.s,{url:an.url,label:an.text,icon:xn?"external-link-alt":void 0,target:an.target,key:an.id}):n.createElement(Bn.s,{icon:an.icon,onClick:an.onClick,label:an.text,key:an.id})})):null}const Qn=xe=>({header:(0,u.css)({fontSize:xe.typography.h5.fontSize,fontWeight:xe.typography.h5.fontWeight,padding:xe.spacing(.5,1),whiteSpace:"nowrap"}),subTitle:(0,u.css)({color:xe.colors.text.secondary,fontSize:xe.typography.bodySmall.fontSize})});function Kn({children:xe,align:xt="left"}){const Nt=(0,P.wW)(Ua),nn=(0,P.l4)().breakpoints.values.sm,[an,xn]=(0,n.useState)(!window.matchMedia(`(min-width: ${nn}px)`).matches);return kn({breakpoint:nn,onChange:Gn=>{xn(!Gn.matches)}}),an?n.createElement(n.Fragment,null,xe):n.createElement("div",{"data-test-id":"wrapper",className:(0,u.cx)(Nt.wrapper,{[Nt[xt]]:xt==="right"})},xe)}const Ua=xe=>({wrapper:(0,u.css)({display:"flex",gap:xe.spacing(.5),alignItems:"center"}),right:(0,u.css)({justifyContent:"flex-end"}),left:(0,u.css)({}),center:(0,u.css)({})});var pa=e(46967),va=e(85419),za=e(43226);function ja(){const xe=(0,P.l4)(),{query:xt}=(0,t.useKBar)(xn=>({kbarSearchQuery:xn.searchQuery,kbarIsOpen:xn.visualState===t.VisualState.showing})),Nt=xe.breakpoints.values.sm,[Jt,nn]=(0,n.useState)(!window.matchMedia(`(min-width: ${Nt}px)`).matches);kn({breakpoint:Nt,onChange:xn=>{nn(!xn.matches)}});const an=()=>{xt.toggle()};return Jt?n.createElement(Te.h,{iconOnly:!0,icon:"search","aria-label":(0,x.t)("nav.search.placeholderCommandPalette","Search or jump to..."),onClick:an}):n.createElement(Ea,{onClick:an})}function Ea({onClick:xe}){const xt=(0,P.wW)(ma),Nt=(0,n.useMemo)(()=>(0,za.vl)(),[]);return n.createElement("div",{className:xt.wrapper},n.createElement("div",{className:xt.inputWrapper},n.createElement("div",{className:xt.prefix},n.createElement(q.J,{name:"search"})),n.createElement("button",{className:xt.fakeInput,onClick:xe},(0,x.t)("nav.search.placeholderCommandPalette","Search or jump to...")),n.createElement("div",{className:xt.suffix},n.createElement(q.J,{name:"keyboard"}),n.createElement("span",{className:xt.shortcut},Nt,"+k"))))}const ma=xe=>{const xt=(0,pa.H)({theme:xe});return{wrapper:xt.wrapper,inputWrapper:xt.inputWrapper,prefix:xt.prefix,suffix:(0,u.css)([xt.suffix,{display:"flex",gap:xe.spacing(.5)}]),shortcut:(0,u.css)({fontSize:xe.typography.bodySmall.fontSize}),fakeInput:(0,u.css)([xt.input,{textAlign:"left",paddingLeft:28,color:xe.colors.text.disabled,"&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":u.css`
          ${(0,va.focusCss)(xe)}
        `}]),button:(0,u.css)({width:"100%",textAlign:"center","> *":{width:"100%",textAlign:"center",justifyContent:"center",gap:"1ch"}})}};var Xa=e(14747),Oa=e(66757);function ss(){const xe=(0,P.l4)(),xt=(0,Oa.hD)(),Nt=xt.useState(),Jt=xe.breakpoints.values.sm,[nn,an]=(0,n.useState)(window.matchMedia(`(max-width: ${Jt}px)`).matches);kn({breakpoint:Jt,onChange:Ln=>{an(Ln.matches)}});const xn=()=>{r.E1.partial({search:"open"})},Gn=Ln=>{xt.onQueryChange(Ln),Ln&&xn()};return nn?n.createElement(Te.h,{iconOnly:!0,icon:"search","aria-label":"Search Grafana",onClick:xn}):n.createElement(Xa.H,{onClick:xn,placeholder:(0,x.t)("nav.search.placeholder","Search Grafana"),value:Nt.query??"",onChange:Gn})}function Ks(){const xe=(0,P.wW)(Ss),xt=(0,C.useSelector)(Gn=>Gn.navIndex),Nt=(0,s.TH)(),Jt=xt.help,nn=xt.profile,an=N.vc.featureToggles.commandPalette&&N.vc.featureToggles.topNavCommandPalette?n.createElement(ja,null):n.createElement(ss,null);let xn=N.vc.appSubUrl||"/";return!N.vc.bootData.user.isSignedIn&&!N.vc.anonymousEnabled&&(xn=M.u.getUrlForPartial(Nt,{forceLogin:"true"})),n.createElement("div",{className:xe.layout},n.createElement(Kn,null,n.createElement("a",{className:xe.logo,href:xn,title:"Go to home"},n.createElement(Fe.c.MenuLogo,{className:xe.img})),n.createElement(It,null)),n.createElement(Kn,null,an),n.createElement(Kn,{align:"right"},n.createElement(sn,null),Jt&&n.createElement(Ze.L,{overlay:()=>n.createElement(ea,{node:Jt}),placement:"bottom-end"},n.createElement(Te.h,{iconOnly:!0,icon:"question-circle","aria-label":"Help"})),n.createElement(Fn,{className:xe.newsButton}),!Se.Vt.user.isSignedIn&&n.createElement(En,null),nn&&n.createElement(Ze.L,{overlay:()=>n.createElement(ea,{node:nn}),placement:"bottom-end"},n.createElement(Te.h,{className:xe.profileButton,imgSrc:Se.Vt.user.gravatarUrl,imgAlt:"User avatar","aria-label":"Profile"}))))}const Ss=xe=>({layout:(0,u.css)({height:de.$,display:"flex",gap:xe.spacing(1),alignItems:"center",padding:xe.spacing(0,1,0,2),borderBottom:`1px solid ${xe.colors.border.weak}`,justifyContent:"space-between",[xe.breakpoints.up("sm")]:{gridTemplateColumns:"1.5fr minmax(240px, 1fr) 1.5fr",display:"grid",justifyContent:"flex-start"}}),img:(0,u.css)({height:xe.spacing(3),width:xe.spacing(3)}),logo:(0,u.css)({display:"flex"}),profileButton:(0,u.css)({padding:xe.spacing(0,.25),img:{borderRadius:"50%",height:"24px",marginRight:0,width:"24px"}}),newsButton:(0,u.css)({[xe.breakpoints.down("sm")]:{display:"none"}})});function Bs({children:xe}){const xt=(0,P.wW)(ls),{chrome:Nt}=(0,E.p)(),Jt=Nt.useState();if(!g.v.featureToggles.topnav)return n.createElement("main",{className:"main-view"},xe);const nn=Jt.searchBarHidden||Jt.kioskMode===C.KioskMode.TV,an=(0,u.cx)({[xt.content]:!0,[xt.contentNoSearchBar]:nn,[xt.contentChromeless]:Jt.chromeless});return n.createElement("main",{className:"main-view"},!Jt.chromeless&&n.createElement("div",{className:(0,u.cx)(xt.topNav)},!nn&&n.createElement(Ks,null),n.createElement(Ae,{searchBarHidden:nn,sectionNav:Jt.sectionNav,pageNav:Jt.pageNav,actions:Jt.actions,onToggleSearchBar:Nt.onToggleSearchBar,onToggleMegaMenu:Nt.onToggleMegaMenu,onToggleKioskMode:Nt.onToggleKioskMode})),n.createElement("div",{className:an},xe),!Jt.chromeless&&n.createElement(mt,{searchBarHidden:nn,onClose:()=>Nt.setMegaMenu(!1)}))}const ls=xe=>{const xt=xe.isDark?"0 0.6px 1.5px rgb(0 0 0), 0 2px 4px rgb(0 0 0 / 40%), 0 5px 10px rgb(0 0 0 / 23%)":"0 0.6px 1.5px rgb(0 0 0 / 8%), 0 2px 4px rgb(0 0 0 / 6%), 0 5px 10px rgb(0 0 0 / 5%)";return{content:(0,u.css)({display:"flex",flexDirection:"column",paddingTop:de.$*2,flexGrow:1,height:"100%"}),contentNoSearchBar:(0,u.css)({paddingTop:de.$}),contentChromeless:(0,u.css)({paddingTop:0}),topNav:(0,u.css)({display:"flex",position:"fixed",zIndex:xe.zIndex.navbarFixed,left:0,right:0,boxShadow:xt,background:xe.colors.background.primary,flexDirection:"column"})}};var ws=e(25318),qs=e(52081),Da=e(659),Vs=e(98864),Es=e(60499),er=e(58252),dr=e(45253);function es({appNotification:xe,onClearNotification:xt}){const Nt=(0,P.wW)(tr);(0,er.Z)(()=>{setTimeout(()=>{xt(xe.id)},C.timeoutMap[xe.severity])});const Jt=g.v.featureToggles.tracing&&xe.traceId;return n.createElement(dr.b,{severity:xe.severity,title:xe.title,onRemove:()=>xt(xe.id),elevated:!0},n.createElement("div",{className:Nt.wrapper},n.createElement("span",null,xe.component||xe.text),Jt&&n.createElement("span",{className:Nt.trace},"Trace ID: ",xe.traceId)))}function tr(xe){return{wrapper:(0,u.css)({display:"flex",flexDirection:"column"}),trace:(0,u.css)({fontSize:xe.typography.pxToRem(10)})}}const Is=(xe,xt)=>({appNotifications:(0,Vs.vo)(xe.appNotifications)}),ts={notifyApp:Da.$l,hideAppNotification:Da.ad},Zs=(0,c.connect)(Is,ts);class Xt extends n.PureComponent{constructor(){super(...arguments),this.onClearAppNotification=xt=>{this.props.hideAppNotification(xt)}}componentDidMount(){const{notifyApp:xt}=this.props;B.Z.on(ws.SI.alertWarning,Nt=>xt((0,Es.ZR)(...Nt))),B.Z.on(ws.SI.alertSuccess,Nt=>xt((0,Es.AT)(...Nt))),B.Z.on(ws.SI.alertError,Nt=>xt((0,Es.t_)(...Nt)))}render(){const{appNotifications:xt}=this.props;return n.createElement("div",{className:"page-alert-list"},n.createElement(qs.wc,null,xt.map((Nt,Jt)=>n.createElement(es,{key:`${Nt.id}-${Jt}`,appNotification:Nt,onClearNotification:nn=>this.onClearAppNotification(nn)}))))}}const kt=Zs(Xt);var vn=e(96694),An=e(96244),Wn=e(9815),Xn=e(42066),Ha=e(92183),Qa=e(35853);const ka=(0,n.createContext)({menuHasFocus:!1,onClose:()=>{},onLeft:()=>{}});function ys(){return(0,n.useContext)(ka)}const xs=(0,n.createContext)({menuIdOpen:void 0,setMenuIdOpen:()=>{}});function Ga(){return(0,n.useContext)(xs)}function or({item:xe,state:xt,onNavigate:Nt}){const{onClose:Jt,onLeft:nn}=ys(),{setMenuIdOpen:an}=Ga(),{key:xn,rendered:Gn}=xe,Ln=(0,n.useRef)(null),ia=xt.disabledKeys.has(xn),[ta,fa]=(0,n.useState)(!1),{focusProps:ha}=(0,Qa.KK)({onFocusChange:fa,isDisabled:ia}),zn=(0,P.l4)(),Zn=xe.value.menuItemType==="section",xa=bs(zn,ta,Zn),Wa=()=>{an(void 0),Nt(xe.value),Jt()};let{menuItemProps:Ba}=(0,Wn.iX)({isDisabled:ia,"aria-label":xe["aria-label"],key:xn,closeOnSelect:!0,onClose:Jt,onAction:Wa},xt,Ln);const{keyboardProps:La}=(0,Qa.v5)({onKeyDown:Tr=>{Tr.key==="ArrowLeft"&&nn(),Tr.continuePropagation()}});return n.createElement(n.Fragment,null,n.createElement("li",{...(0,Xn.dG)(Ba,ha,La),ref:Ln,className:xa.menuItem},Gn))}function bs(xe,xt,Nt){let Jt="transparent";return xt?Jt=xe.colors.action.hover:Nt&&(Jt=xe.colors.background.secondary),{menuItem:u.css`
      background-color: ${Jt};
      color: ${xe.colors.text.primary};

      &:focus-visible {
        background-color: ${xe.colors.action.hover};
        box-shadow: none;
        color: ${xe.colors.text.primary};
        outline: 2px solid ${xe.colors.primary.main};
        outline-offset: -2px;
        transition: none;
      }
    `}}function ur(xe){const{reverseMenuDirection:xt,adjustHeightForBorder:Nt,disabledKeys:Jt,onNavigate:nn,...an}=xe,xn=ys(),Gn={...(0,Xn.dG)(xn,an)},{menuHasFocus:Ln,menuProps:ia={}}=xn,ta=(0,P.l4)(),fa=mr(ta,xt),ha=(0,Ha.D)({...an,disabledKeys:Jt}),zn=(0,n.useRef)(null),{menuProps:Zn}=(0,Wn.H9)(Gn,{...ha},zn),xa=[...ha.collection],Wa=xa.filter(Ur=>Ur.value.menuItemType===S.VO.Item),Ba=xa.find(Ur=>Ur.value.menuItemType===S.VO.Section);if((0,n.useEffect)(()=>{Ln&&!ha.selectionManager.isFocused?(ha.selectionManager.setFocusedKey(Ba?.key??""),ha.selectionManager.setFocused(!0)):Ln||(ha.selectionManager.setFocused(!1),ha.selectionManager.setFocusedKey(""),ha.selectionManager.clearSelection())},[Ln,ha.selectionManager,xt,Ba?.key]),!Ba)return null;const La=Ba.value.subTitle,Tr=n.createElement(or,{key:Ba.key,item:Ba,state:ha,onNavigate:nn}),Co=Wa.map(Ur=>n.createElement(or,{key:pe(Ur.value),item:Ur,state:ha,onNavigate:nn}));Co.length===0&&Ba.value.emptyMessage&&Co.push(n.createElement("div",{key:"empty-message",className:fa.emptyMessage},Ba.value.emptyMessage));const Io=La&&n.createElement("li",{key:La,className:fa.subtitle},La),xo=[Co,Io],Ro=n.createElement(U.$,{hideHorizontalTrack:!0,hideVerticalTrack:!0,showScrollIndicators:!0,key:"scrollContainer"},xt?xo.reverse():xo),Kr=[Tr,Ro];return n.createElement("ul",{className:fa.menu,ref:zn,...(0,Xn.dG)(Zn,ia),tabIndex:-1},xt?Kr.reverse():Kr)}function mr(xe,xt){return{menu:u.css`
      background-color: ${xe.colors.background.primary};
      border: 1px solid ${xe.components.panel.borderColor};
      box-shadow: ${xe.shadows.z3};
      display: flex;
      flex-direction: column;
      list-style: none;
      max-height: 400px;
      max-width: 300px;
      min-width: 140px;
      transition: ${xe.transitions.create("opacity")};
      z-index: ${xe.zIndex.sidemenu};
    `,subtitle:u.css`
      background-color: transparent;
      border-${xt?"bottom":"top"}: 1px solid ${xe.colors.border.weak};
      color: ${xe.colors.text.secondary};
      font-size: ${xe.typography.bodySmall.fontSize};
      font-weight: ${xe.typography.bodySmall.fontWeight};
      padding: ${xe.spacing(1)} ${xe.spacing(2)} ${xe.spacing(1)};
      text-align: left;
      white-space: nowrap;
    `,emptyMessage:u.css`
      font-style: italic;
      padding: ${xe.spacing(.5,2)};
    `}}var Sr=e(35210),Wr=e(91053);const ms="navbar-menu-portal-container",Mr=()=>document.getElementById(ms)??document.body,ir=()=>{const xe=(0,P.l4)(),xt=tn(xe);return n.createElement("div",{className:xt.menuPortalContainer,id:ms})};ir.displayName="NavBarMenuPortalContainer";const tn=xe=>({menuPortalContainer:(0,u.css)({left:0,position:"fixed",right:0,top:0,zIndex:xe.zIndex.sidemenu})});function pr(xe){const{item:xt,isActive:Nt,label:Jt,children:nn,reverseMenuDirection:an,...xn}=xe,[Gn,Ln]=(0,n.useState)(!1),{menuIdOpen:ia,setMenuIdOpen:ta}=Ga(),fa=(0,P.l4)(),ha=$r(fa,Nt),zn=(0,Wr.W)({...xn}),Zn=n.useRef(null),{menuTriggerProps:xa,menuProps:Wa}=(0,Wn.u4)({},zn,Zn);(0,n.useEffect)(()=>{xt.highlightId&&(0,f.SZ)(`feature-highlights-${xt.highlightId}-nav`,"test","")},[xt.highlightId]);const{hoverProps:Ba}=(0,Qa.XI)({onHoverChange:Or=>{Or?(zn.open(),ta(xt.id)):(zn.close(),ta(void 0))}});(0,n.useEffect)(()=>{ia!==xt.id?(zn.close(),Ln(!1)):zn.open()},[ia,zn,xt.id]);const{keyboardProps:La}=(0,Qa.v5)({onKeyDown:Or=>{switch(Or.key){case"ArrowRight":zn.isOpen||(zn.open(),ta(xt.id)),Ln(!0);break;case"Tab":ta(void 0);break;default:break}}}),{buttonProps:Tr}=(0,Sr.U)(xa,Zn),Co=xt.highlightText?Re:n.Fragment,Io=n.createElement(Co,null,n.createElement("span",{className:ha.icon},n.createElement(Ie,{link:xt})));let xo=n.createElement("button",{className:ha.element,...Tr,...La,...Ba,ref:Zn,onClick:xt?.onClick,"aria-label":Jt},Io);xt?.url&&(xo=!xt.target&&xt.url.startsWith("/")?n.createElement(ke.r,{...Tr,...La,...Ba,ref:Zn,href:xt.url,target:xt.target,onClick:xt?.onClick,className:ha.element,"aria-label":Jt},Io):n.createElement("a",{href:xt.url,target:xt.target,onClick:xt?.onClick,...Tr,...La,...Ba,ref:Zn,className:ha.element,"aria-label":Jt},Io));const Ro=n.useRef(null),{dialogProps:Kr}=(0,ee.R)({},Ro),{overlayProps:Ur}=(0,Q.Ir)({onClose:()=>{zn.close(),ta(void 0)},isOpen:zn.isOpen,isDismissable:!0},Ro);let{overlayProps:vi}=(0,Q.tN)({targetRef:Zn,overlayRef:Ro,placement:an?"right bottom":"right top",isOpen:zn.isOpen});const{focusWithinProps:Ai}=(0,Qa.L_)({onFocusWithin:Or=>{Or.target.id===Zn.current?.id&&(ta(xt.id),zn.open()),Or.target.scrollIntoView?.({block:"nearest"})},onBlurWithin:Or=>{Or.target?.getAttribute("role")==="menuitem"&&!Ro.current?.contains(Or.relatedTarget)&&ta(void 0)}});return n.createElement("div",{className:(0,u.cx)(ha.element,"dropdown"),...Ai},xo,zn.isOpen&&n.createElement(Q.Xj,{portalContainer:Mr()},n.createElement(ka.Provider,{value:{menuProps:Wa,menuHasFocus:Gn,onClose:()=>zn.close(),onLeft:()=>{Ln(!1),Zn.current?.focus()}}},n.createElement(se.MT,{restoreFocus:!0},n.createElement("div",{...Ur,...vi,...Kr,...Ba,ref:Ro},n.createElement(Q.U4,{onDismiss:()=>zn.close()}),nn,n.createElement(Q.U4,{onDismiss:()=>zn.close()}))))))}const $r=(xe,xt)=>({element:(0,u.css)({backgroundColor:"transparent",border:"none",color:"inherit",display:"grid",padding:0,placeContent:"center",height:xe.spacing(6),width:xe.spacing(7),"&::before":{display:xt?"block":"none",content:'" "',position:"absolute",left:xe.spacing(1),top:xe.spacing(1.5),bottom:xe.spacing(1.5),width:xe.spacing(.5),borderRadius:xe.shape.borderRadius(1),backgroundImage:xe.colors.gradients.brandVertical},"&:focus-visible":{backgroundColor:xe.colors.action.hover,boxShadow:"none",color:xe.colors.text.primary,outline:`${xe.shape.borderRadius(1)} solid ${xe.colors.primary.main}`,outlineOffset:`-${xe.shape.borderRadius(1)}`,transition:"none"}}),icon:(0,u.css)({height:"100%",width:"100%"})});function Br({label:xe,children:xt,url:Nt,target:Jt,isActive:nn=!1,onClick:an,highlightText:xn,className:Gn,elClassName:Ln}){const ia=(0,P.l4)(),ta=it(ia,nn),fa=xn?n.createElement(Re,null,n.createElement("div",{className:ta.icon},xt)):n.createElement("div",{className:ta.icon},xt),ha=(0,u.cx)(ta.element,Ln),zn=()=>Nt?!Jt&&Nt.startsWith("/")?n.createElement(ke.r,{className:ha,href:Nt,target:Jt,"aria-label":xe,onClick:an,"aria-haspopup":"true"},fa):n.createElement("a",{href:Nt,target:Jt,className:ha,onClick:an,"aria-label":xe},fa):n.createElement("button",{className:ha,onClick:an,"aria-label":xe},fa);return n.createElement("div",{className:(0,u.cx)(ta.container,Gn)},zn())}function it(xe,xt){return{container:(0,u.css)({position:"relative",color:xt?xe.colors.text.primary:xe.colors.text.secondary,display:"grid","&:hover":{backgroundColor:xe.colors.action.hover,color:xe.colors.text.primary}}),element:(0,u.css)({backgroundColor:"transparent",border:"none",color:"inherit",display:"block",padding:0,overflowWrap:"anywhere","&::before":{display:xt?"block":"none",content:"' '",position:"absolute",left:xe.spacing(1),top:xe.spacing(1.5),bottom:xe.spacing(1.5),width:xe.spacing(.5),borderRadius:xe.shape.borderRadius(1),backgroundImage:xe.colors.gradients.brandVertical},"&:focus-visible":{backgroundColor:xe.colors.action.hover,boxShadow:"none",color:xe.colors.text.primary,outline:`${xe.shape.borderRadius(1)} solid ${xe.colors.primary.main}`,outlineOffset:`-${xe.shape.borderRadius(1)}`,transition:"none"}}),icon:(0,u.css)({height:"100%",width:"100%"})}}function Dt({icon:xe,isActive:xt,isDivider:Nt,onClick:Jt,styleOverrides:nn,target:an,text:xn,url:Gn,isMobile:Ln=!1}){const ia=(0,P.l4)(),ta=Lt(ia,xt),fa=(0,u.cx)(ta.element,nn),ha=n.createElement("div",{className:ta.linkContent},xe&&n.createElement(q.J,{"data-testid":"dropdown-child-icon",name:xe}),n.createElement("div",{className:ta.linkText},xn),an==="_blank"&&n.createElement(q.J,{"data-testid":"external-link-icon",name:"external-link-alt",className:ta.externalLinkIcon}));let zn=n.createElement("button",{className:fa,onClick:Jt,tabIndex:-1},ha);return Gn&&(zn=!an&&Gn.startsWith("/")?n.createElement(ke.r,{className:fa,href:Gn,target:an,onClick:Jt,tabIndex:Ln?0:-1},ha):n.createElement("a",{href:Gn,target:an,className:fa,onClick:Jt,tabIndex:Ln?0:-1},ha)),Ln?Nt?n.createElement("div",{"data-testid":"dropdown-child-divider",className:ta.divider,tabIndex:-1,"aria-disabled":!0}):n.createElement("li",{className:ta.listItem},zn):Nt?n.createElement("div",{"data-testid":"dropdown-child-divider",className:ta.divider,tabIndex:-1,"aria-disabled":!0}):n.createElement("div",{style:{position:"relative"}},zn)}Dt.displayName="NavBarMenuItem";const Lt=(xe,xt)=>({linkContent:(0,u.css)({alignItems:"center",display:"flex",gap:"0.5rem",width:"100%"}),linkText:(0,u.css)({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),externalLinkIcon:(0,u.css)({color:xe.colors.text.secondary,gridColumnStart:3}),element:(0,u.css)({alignItems:"center",background:"none",border:"none",color:xt?xe.colors.text.primary:xe.colors.text.secondary,display:"flex",flex:1,fontSize:"inherit",height:"100%",overflowWrap:"anywhere",padding:xe.spacing(.5,2),textAlign:"left",width:"100%","&:hover, &:focus-visible":{backgroundColor:xe.colors.action.hover,color:xe.colors.text.primary},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${xe.colors.primary.main}`,outlineOffset:"-2px",transition:"none"},"&::before":{display:xt?"block":"none",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:xe.spacing(.5),borderRadius:xe.shape.borderRadius(1),backgroundImage:xe.colors.gradients.brandVertical}}),listItem:(0,u.css)({position:"relative",display:"flex",alignItems:"center","&:hover, &:focus-within":{color:xe.colors.text.primary,"> *:first-child::after":{backgroundColor:xe.colors.action.hover}}}),divider:(0,u.css)({borderBottom:`1px solid ${xe.colors.border.weak}`,height:"1px",margin:`${xe.spacing(1)} 0`,overflow:"hidden"})}),Zt=({isActive:xe=!1,className:xt,reverseMenuDirection:Nt=!1,link:Jt})=>{const nn=(0,P.l4)(),an=Jt.children??[],{menuIdOpen:xn}=Ga(),Ln=(Nt?[...an].reverse():an).filter(Zn=>!Zn.hideFromMenu).map(Zn=>({...Zn,menuItemType:S.VO.Item})),ia=Ln.length===0,ta=cn(nn,ia,xe),fa={...Jt,children:Ln,menuItemType:S.VO.Section},ha=[fa].concat(Ln),zn=Zn=>{const{url:xa,target:Wa,onClick:Ba}=Zn;Ba?.(),xa&&(!Wa&&xa.startsWith("/")?r.E1.push(M.u.stripBaseFromUrl(xa)):window.open(xa,Wa))};return n.createElement("li",{className:(0,u.cx)(ta.container,{[ta.containerHover]:fa.id===xn},xt)},n.createElement(pr,{item:fa,isActive:xe,label:Jt.text,reverseMenuDirection:Nt},n.createElement(ur,{items:ha,reverseMenuDirection:Nt,adjustHeightForBorder:ia,disabledKeys:["divider","subtitle"],"aria-label":fa.text,onNavigate:zn},Zn=>{const xa=Zn.menuItemType===S.VO.Section,Wa=Zn.icon?(0,Be.toIconName)(Zn.icon):void 0,Ba=Zn.showIconInNavbar&&!xa?Wa:void 0;return n.createElement(An.ck,{key:pe(Zn),textValue:Zn.text},n.createElement(Dt,{isDivider:!xa&&Zn.divider,icon:Ba,target:Zn.target,text:Zn.text,url:Zn.url,onClick:Zn.onClick,styleOverrides:(0,u.cx)(ta.primaryText,{[ta.header]:xa})}))})))},cn=(xe,xt,Nt)=>({...it(xe,Nt),containerHover:(0,u.css)({backgroundColor:xe.colors.action.hover,color:xe.colors.text.primary}),primaryText:(0,u.css)({color:xe.colors.text.primary}),header:(0,u.css)({height:`calc(${xe.spacing(6)} - ${xt?2:1}px)`,fontSize:xe.typography.h4.fontSize,fontWeight:xe.typography.h4.fontWeight,padding:`${xe.spacing(1)} ${xe.spacing(2)}`,whiteSpace:"nowrap",width:"100%"})});var hn=e(20941),Tn=e(9085),fn=e.n(Tn);const Rt=({className:xe,isExpanded:xt,onClick:Nt})=>{const Jt=(0,P.l4)(),nn=ya(Jt);return n.createElement(X.h,{"aria-label":xt?"Close navigation menu":"Open navigation menu",name:xt?"angle-left":"angle-right",className:fn()(xe,nn.icon),size:"xl",onClick:Nt})};Rt.displayName="NavBarToggle";const ya=xe=>({icon:(0,u.css)({backgroundColor:xe.colors.background.secondary,border:`1px solid ${xe.colors.border.weak}`,borderRadius:"50%",marginRight:0,zIndex:xe.zIndex.sidemenu+1,[xe.breakpoints.down("md")]:{display:"none"}})}),Sa="350px";function Ca({activeItem:xe,isOpen:xt,navItems:Nt,onClose:Jt,setMenuAnimationInProgress:nn}){const an=(0,P.l4)(),xn=wa(an),Gn=an.transitions.duration.standard,Ln=rs(an,Gn),ia=(0,n.useRef)(null),ta=(0,n.useRef)(null),{dialogProps:fa}=(0,ee.R)({},ia),{overlayProps:ha,underlayProps:zn}=(0,Q.Ir)({isDismissable:!0,isOpen:xt,onClose:Jt},ia);return n.createElement(Q.Xj,null,n.createElement(se.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},n.createElement(G.Z,{nodeRef:ia,onEnter:()=>nn(!0),onExited:()=>nn(!1),appear:xt,in:xt,classNames:Ln.overlay,timeout:Gn},n.createElement("div",{"data-testid":"navbarmenu",ref:ia,...ha,...fa,className:xn.container},n.createElement("div",{className:xn.mobileHeader},n.createElement(q.J,{name:"bars",size:"xl"}),n.createElement(X.h,{"aria-label":"Close navigation menu",name:"times",onClick:Jt,size:"xl",variant:"secondary"})),n.createElement(Rt,{className:xn.menuCollapseIcon,isExpanded:xt,onClick:()=>{(0,f.ff)("grafana_navigation_collapsed"),Jt()}}),n.createElement("nav",{className:xn.content},n.createElement(U.$,{hideHorizontalTrack:!0},n.createElement("ul",{className:xn.itemList},Nt.map(Zn=>n.createElement(Fa,{link:Zn,onClose:Jt,activeItem:xe,key:Zn.text})))))))),n.createElement(G.Z,{nodeRef:ta,appear:xt,in:xt,classNames:Ln.backdrop,timeout:Gn},n.createElement("div",{className:xn.backdrop,...zn,ref:ta})))}Ca.displayName="NavBarMenu";const wa=xe=>({backdrop:(0,u.css)({backdropFilter:"blur(1px)",backgroundColor:xe.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:0,zIndex:xe.zIndex.modalBackdrop}),container:(0,u.css)({display:"flex",bottom:0,flexDirection:"column",left:0,paddingTop:xe.spacing(1),marginRight:xe.spacing(1.5),right:0,zIndex:xe.zIndex.modal,position:"fixed",top:0,boxSizing:"content-box",[xe.breakpoints.up("md")]:{borderRight:`1px solid ${xe.colors.border.weak}`,right:"unset"}}),content:(0,u.css)({display:"flex",flexDirection:"column",overflow:"auto"}),mobileHeader:(0,u.css)({borderBottom:`1px solid ${xe.colors.border.weak}`,display:"flex",justifyContent:"space-between",padding:xe.spacing(1,2,2),[xe.breakpoints.up("md")]:{display:"none"}}),itemList:(0,u.css)({display:"grid",gridAutoRows:`minmax(${xe.spacing(6)}, auto)`,minWidth:Sa}),menuCollapseIcon:(0,u.css)({position:"absolute",top:"43px",right:"0px",transform:"translateX(50%)"})}),rs=(xe,xt)=>{const Nt={transitionDuration:`${xt}ms`,transitionTimingFunction:xe.transitions.easing.easeInOut,[xe.breakpoints.down("md")]:{overflow:"hidden"}},Jt={...Nt,transitionProperty:"background-color, box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},nn={...Nt,transitionProperty:"opacity"},an={backgroundColor:xe.colors.background.canvas,boxShadow:xe.shadows.z3,width:"100%",[xe.breakpoints.up("md")]:{width:Sa}},xn={boxShadow:"none",width:0,[xe.breakpoints.up("md")]:{backgroundColor:xe.colors.background.primary,width:xe.spacing(7)}},Gn={opacity:1},Ln={opacity:0};return{backdrop:{appear:(0,u.css)(Ln),appearActive:(0,u.css)(nn,Gn),appearDone:(0,u.css)(Gn),exit:(0,u.css)(Gn),exitActive:(0,u.css)(nn,Ln)},overlay:{appear:(0,u.css)(xn),appearActive:(0,u.css)(Jt,an),appearDone:(0,u.css)(an),exit:(0,u.css)(an),exitActive:(0,u.css)(Jt,xn)}}};function Fa({link:xe,activeItem:xt,onClose:Nt}){const Jt=(0,P.wW)(zs);if(Ge(xe))return n.createElement(_a,{onClose:Nt,link:xe,isActive:J(xe,xt)},n.createElement("ul",{className:Jt.children},xe.children.map(nn=>{const an=nn.icon?(0,Be.toIconName)(nn.icon):void 0;return!nn.divider&&n.createElement(Dt,{key:`${xe.text}-${nn.text}`,isActive:xt===nn,isDivider:nn.divider,icon:nn.showIconInNavbar?an:void 0,onClick:()=>{nn.onClick?.(),Nt()},styleOverrides:Jt.item,target:nn.target,text:nn.text,url:nn.url,isMobile:!0})})));if(xe.emptyMessage)return n.createElement(_a,{onClose:Nt,link:xe,isActive:J(xe,xt)},n.createElement("ul",{className:Jt.children},n.createElement("div",{className:Jt.emptyMessage},xe.emptyMessage)));{const nn=xe.highlightText?Re:n.Fragment;return n.createElement("li",{className:Jt.flex},n.createElement(Br,{className:Jt.itemWithoutMenu,elClassName:Jt.fullWidth,label:xe.text,url:xe.url,target:xe.target,onClick:()=>{xe.onClick?.(),Nt()},isActive:xe===xt},n.createElement("div",{className:Jt.itemWithoutMenuContent},n.createElement("div",{className:Jt.iconContainer},n.createElement(nn,null,n.createElement(Ie,{link:xe}))),n.createElement("span",{className:Jt.linkText},xe.text))))}}const zs=xe=>({children:(0,u.css)({display:"flex",flexDirection:"column"}),item:(0,u.css)({padding:`${xe.spacing(1)} ${xe.spacing(1.5)}`,width:`calc(100% - ${xe.spacing(3)})`,"&::before":{display:"none"}}),flex:(0,u.css)({display:"flex"}),itemWithoutMenu:(0,u.css)({position:"relative",placeItems:"inherit",justifyContent:"start",display:"flex",flexGrow:1,alignItems:"center"}),fullWidth:(0,u.css)({height:"100%",width:"100%"}),iconContainer:(0,u.css)({display:"flex",placeContent:"center"}),itemWithoutMenuContent:(0,u.css)({display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${xe.spacing(7)} auto`,alignItems:"center",height:"100%"}),linkText:(0,u.css)({fontSize:xe.typography.pxToRem(14),justifySelf:"start",padding:xe.spacing(.5,4.25,.5,.5)}),emptyMessage:(0,u.css)({color:xe.colors.text.secondary,fontStyle:"italic",padding:xe.spacing(1,1.5)})});function _a({link:xe,isActive:xt,children:Nt,className:Jt,onClose:nn}){const an=(0,P.wW)(Bt),[xn,Gn]=(0,Oe.Z)(`grafana.navigation.expanded[${xe.text}]`,!1),Ln=xe.highlightText?Re:n.Fragment;return n.createElement("li",{className:(0,u.cx)(an.menuItem,Jt)},n.createElement(Br,{isActive:xt,label:xe.text,url:xe.url,target:xe.target,onClick:()=>{xe.onClick?.(),nn()},className:an.collapsibleMenuItem,elClassName:an.collapsibleIcon},n.createElement(Ln,null,n.createElement(Ie,{link:xe}))),n.createElement("div",{className:an.collapsibleSectionWrapper},n.createElement(hn.s,{isOpen:Boolean(xn),onToggle:ia=>Gn(ia),className:an.collapseWrapper,contentClassName:an.collapseContent,label:n.createElement("div",{className:(0,u.cx)(an.labelWrapper,{[an.primary]:xt})},n.createElement("span",{className:an.linkText},xe.text))},Nt)))}const Bt=xe=>({menuItem:(0,u.css)({position:"relative",display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${xe.spacing(7)} minmax(calc(${Sa} - ${xe.spacing(7)}), auto)`}),collapsibleMenuItem:(0,u.css)({height:xe.spacing(6),width:xe.spacing(7),display:"grid"}),collapsibleIcon:(0,u.css)({display:"grid",placeContent:"center"}),collapsibleSectionWrapper:(0,u.css)({display:"flex",flexGrow:1,alignSelf:"start",flexDirection:"column"}),collapseWrapper:(0,u.css)({paddingLeft:xe.spacing(.5),paddingRight:xe.spacing(4.25),minHeight:xe.spacing(6),overflowWrap:"anywhere",alignItems:"center",color:xe.colors.text.secondary,"&:hover, &:focus-within":{backgroundColor:xe.colors.action.hover,color:xe.colors.text.primary},"&:focus-within":{boxShadow:"none",outline:`2px solid ${xe.colors.primary.main}`,outlineOffset:"-2px",transition:"none"}}),collapseContent:(0,u.css)({padding:0}),labelWrapper:(0,u.css)({fontSize:"15px"}),primary:(0,u.css)({color:xe.colors.text.primary}),linkText:(0,u.css)({fontSize:xe.typography.pxToRem(14),justifySelf:"start"})});function Ge(xe){return Boolean(xe.children&&xe.children.length>0)}const We=()=>{r.E1.partial({search:"open"})},ct=n.memo(()=>{const xe=(0,C.useSelector)(La=>La.navBarTree),xt=(0,P.l4)(),Nt=$t(xt),Jt=(0,s.TH)(),[nn,an]=(0,n.useState)(!1),[xn,Gn]=(0,n.useState)(!1),[Ln,ia]=(0,n.useState)(void 0),ta=ae({id:j,onClick:We,text:"Search dashboards",icon:"search"},nn);let fa=g.v.appSubUrl||"/";!g.v.bootData.user.isSignedIn&&!g.v.anonymousEnabled&&(fa=M.u.getUrlForPartial(Jt,{forceLogin:"true"}));const ha=ae({id:"home",text:"Home",url:fa,icon:"grafana"},nn),zn=(0,b.cloneDeep)(xe).filter(La=>La.hideFromMenu!==!0),Zn=zn.filter(La=>La.section===S.yV.Core).map(La=>ae(La,nn)),xa=zn.filter(La=>La.section===S.yV.Plugin).map(La=>ae(La,nn)),Wa=Z(zn.filter(La=>La.section===S.yV.Config),Jt).map(La=>ae(La,nn)),Ba=le(Jt)?ta:re(zn,Jt.pathname);return St(Jt)?null:n.createElement("div",{className:Nt.navWrapper},n.createElement("nav",{className:(0,u.cx)(Nt.sidemenu,"sidemenu"),"data-testid":"sidemenu","aria-label":"Main menu"},n.createElement(xs.Provider,{value:{menuIdOpen:Ln,setMenuIdOpen:ia}},n.createElement(se.MT,null,n.createElement("div",{className:Nt.mobileSidemenuLogo,key:"hamburger"},n.createElement(X.h,{name:"bars",tooltip:"Toggle menu",tooltipPlacement:"bottom",size:"xl",onClick:()=>an(!nn)})),n.createElement(Rt,{className:Nt.menuExpandIcon,isExpanded:nn,onClick:()=>{(0,f.ff)("grafana_navigation_expanded"),an(!0)}}),n.createElement(ir,null),n.createElement(Br,{elClassName:Nt.grafanaLogoInner,label:ha.text,className:Nt.grafanaLogo,url:ha.url,onClick:ha.onClick},n.createElement(Ie,{link:ha})),n.createElement(U.$,{hideHorizontalTrack:!0,hideVerticalTrack:!0,showScrollIndicators:!0},n.createElement("ul",{className:Nt.itemList},n.createElement(Zt,{className:Nt.search,isActive:Ba===ta,link:ta}),Zn.map((La,Tr)=>n.createElement(Zt,{key:`${La.id}-${Tr}`,isActive:J(La,Ba),link:{...La,subTitle:void 0}})),xa.length>0&&xa.map((La,Tr)=>n.createElement(Zt,{key:`${La.id}-${Tr}`,isActive:J(La,Ba),link:La})),Wa.map((La,Tr)=>n.createElement(Zt,{key:`${La.id}-${Tr}`,isActive:J(La,Ba),reverseMenuDirection:!0,link:La,className:(0,u.cx)({[Nt.verticalSpacer]:Tr===0})}))))))),(nn||xn)&&n.createElement("div",{className:Nt.menuWrapper},n.createElement(Ca,{activeItem:Ba,isOpen:nn,setMenuAnimationInProgress:Gn,navItems:[ha,ta,...Zn,...xa,...Wa],onClose:()=>an(!1)})))});function St(xe){const xt=(0,r.Ox)(xe.search);return!!((0,vn.U)(xt)||xe.pathname.indexOf("/d/")===0&&xt.editview||xt.editPanel)}ct.displayName="NavBar";const $t=xe=>({navWrapper:(0,u.css)({position:"relative",display:"flex",".sidemenu-hidden &":{display:"none"}}),sidemenu:(0,u.css)({label:"sidemenu",display:"flex",flexDirection:"column",backgroundColor:xe.colors.background.primary,zIndex:xe.zIndex.sidemenu,padding:`${xe.spacing(1)} 0`,position:"relative",width:xe.components.sidemenu.width,borderRight:`1px solid ${xe.colors.border.weak}`,[xe.breakpoints.down("md")]:{height:xe.spacing(7),position:"fixed",paddingTop:"0px",backgroundColor:"inherit",borderRight:0}}),mobileSidemenuLogo:(0,u.css)({alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between",padding:xe.spacing(2),[xe.breakpoints.up("md")]:{display:"none"}}),itemList:(0,u.css)({backgroundColor:"inherit",display:"flex",flexDirection:"column",height:"100%",[xe.breakpoints.down("md")]:{visibility:"hidden"}}),grafanaLogo:(0,u.css)({alignItems:"stretch",display:"flex",flexShrink:0,height:xe.spacing(6),justifyContent:"stretch",[xe.breakpoints.down("md")]:{visibility:"hidden"}}),grafanaLogoInner:(0,u.css)({alignItems:"center",display:"flex",height:"100%",justifyContent:"center",width:"100%","> div":{height:"auto",width:"auto"}}),search:(0,u.css)({display:"none",marginTop:0,[xe.breakpoints.up("md")]:{display:"grid"}}),verticalSpacer:(0,u.css)({marginTop:"auto"}),hideFromMobile:(0,u.css)({[xe.breakpoints.down("md")]:{display:"none"}}),menuWrapper:(0,u.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:xe.zIndex.sidemenu}),menuExpandIcon:(0,u.css)({position:"absolute",top:"43px",right:"0px",transform:"translateX(50%)"}),menuPortalContainer:(0,u.css)({zIndex:xe.zIndex.sidemenu})});var qt=e(13426),Yt=e.n(qt),Dn=e(39198),Nn=e(7804),wn=e(79396);function Un({error:xe,errorInfo:xt}){const Nt=(0,s.TH)(),Jt=xe?.name==="ChunkLoadError";return(0,n.useEffect)(()=>{Jt&&Nt.search.indexOf("chunkNotFound")===-1&&(window.location.href=M.u.getUrlForPartial(Nt,{chunkNotFound:!0}))},[Nt,Jt]),n.createElement(wn.T,{navId:"error",layout:S.Qz.Canvas},n.createElement("div",{className:_n()},Jt&&n.createElement("div",null,n.createElement("h2",null,"Unable to find application file"),n.createElement("br",null),n.createElement("h2",{className:"page-heading"},"Grafana has likely been updated. Please try reloading the page."),n.createElement("br",null),n.createElement("div",{className:"gf-form-group"},n.createElement(I.zx,{size:"md",variant:"secondary",icon:"repeat",onClick:()=>window.location.reload()},"Reload")),n.createElement(Dn.X,{title:"Error details",error:xe,errorInfo:xt})),!Jt&&n.createElement(Dn.X,{title:"An unexpected error happened",error:xe,errorInfo:xt})))}const _n=(0,Nn.B)(()=>u.css`
    width: 500px;
    margin: 64px auto;
  `);function ns(){const xe=(0,P.wW)(os);return n.createElement("div",{className:xe.loadingPage},n.createElement(yt.u,{text:"Loading..."}))}const os=()=>({loadingPage:(0,u.css)({height:"100%",flexDrection:"column",display:"flex",justifyContent:"center",alignItems:"center"})});function ks(xe){const{chrome:xt,keybindings:Nt}=(0,E.p)();return xt.setMatchedRoute(xe.route),(0,n.useLayoutEffect)(()=>{Nt.clearAndInitGlobalBindings()},[Nt]),(0,n.useEffect)(()=>(Za(xe.route),cs(),(0,r.GQ)("GrafanaRoute",!1,"Mounted",xe.match),()=>{(0,r.GQ)("GrafanaRoute",!1,"Unmounted",xe.route),Za(xe.route,!0)}),[]),(0,n.useEffect)(()=>{cs(),(0,f.sm)(),(0,r.GQ)("GrafanaRoute",!1,"Updated",xe)}),(0,r.GQ)("GrafanaRoute",!1,"Rendered",xe.route),n.createElement(o.SV,null,({error:Jt,errorInfo:nn})=>Jt?n.createElement(Un,{error:Jt,errorInfo:nn}):n.createElement(n.Suspense,{fallback:n.createElement(ns,null)},n.createElement(xe.route.component,{...xe,queryParams:(0,r.Ox)(xe.location.search)})))}function Aa(xe){return xe.pageClass?xe.pageClass.split(" "):[]}function Za(xe,xt=!1){for(const Nt of Aa(xe))xt?document.body.classList.remove(Nt):document.body.classList.add(Nt)}function cs(){document.body.classList.remove("sidemenu-open--xs");const xe=document.getElementById("tooltip");xe?.parentElement?.removeChild(xe);const xt=document.querySelectorAll(".tooltip");for(let Nt=0;Nt<xt.length;Nt++){const Jt=xt[Nt];Jt.parentElement?.removeChild(Jt)}for(const Nt of Yt().drops)Nt.destroy()}var as=e(92973),Rs=e(67487),Ys=e(15346),hr=e(19487);const kr=0,Ns=xe=>{const xt=n.useRef(null),Nt=n.useRef(null),Jt=n.useRef(xe.items);Jt.current=xe.items;const nn=(0,hr.o)({size:Jt.current.length,parentRef:Nt}),{query:an,search:xn,currentRootActionId:Gn,activeIndex:Ln,options:ia}=(0,t.useKBar)(zn=>({search:zn.searchQuery,currentRootActionId:zn.currentRootActionId,activeIndex:zn.activeIndex}));n.useEffect(()=>{const zn=Zn=>{Zn.key==="ArrowUp"||Zn.ctrlKey&&Zn.key==="p"?(Zn.preventDefault(),an.setActiveIndex(xa=>{let Wa=xa>kr?xa-1:xa;if(typeof Jt.current[Wa]=="string"){if(Wa===0)return xa;Wa-=1}return Wa})):Zn.key==="ArrowDown"||Zn.ctrlKey&&Zn.key==="n"?(Zn.preventDefault(),an.setActiveIndex(xa=>{let Wa=xa<Jt.current.length-1?xa+1:xa;if(typeof Jt.current[Wa]=="string"){if(Wa===Jt.current.length-1)return xa;Wa+=1}return Wa})):Zn.key==="Enter"&&(Zn.preventDefault(),xt.current?.click())};return window.addEventListener("keydown",zn),()=>window.removeEventListener("keydown",zn)},[an]);const{scrollToIndex:ta}=nn;n.useEffect(()=>{ta(Ln,{align:Ln<=1?"end":"auto"})},[Ln,ta]),n.useEffect(()=>{an.setActiveIndex(typeof xe.items[kr]=="string"?kr+1:kr)},[xn,Gn,xe.items,an]);const fa=n.useCallback((zn,Zn)=>{if(typeof Zn=="string")return;const xa=Zn.url;Zn.command?(Zn.command.perform(Zn),an.toggle()):xa?zn.ctrlKey||zn.metaKey||zn.shiftKey||an.toggle():(an.setSearch(""),an.setCurrentRootAction(Zn.id)),ia.callbacks?.onSelectAction?.(Zn)},[an,ia]),ha=(0,Ys.usePointerMovedSinceMount)();return n.createElement("div",{ref:Nt,style:{maxHeight:xe.maxHeight||400,position:"relative",overflow:"auto"}},n.createElement("div",{role:"listbox",id:t.KBAR_LISTBOX,style:{height:`${nn.totalSize}px`,width:"100%"}},nn.virtualItems.map(zn=>{const Zn=Jt.current[zn.index],{target:xa,url:Wa}=Zn,Ba=typeof Zn!="string"&&{onPointerMove:()=>ha&&Ln!==zn.index&&an.setActiveIndex(zn.index),onPointerDown:()=>an.setActiveIndex(zn.index),onClick:Io=>fa(Io,Zn)},La=zn.index===Ln,Tr={id:(0,t.getListboxItemId)(zn.index),role:"option","aria-selected":La,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${zn.start}px)`},...Ba},Co=n.cloneElement(xe.onRender({item:Zn,active:La}),{ref:zn.measureRef});return Wa?n.createElement("a",{key:zn.index,href:Wa,target:xa,ref:La?xt:null,...Tr},Co):n.createElement("div",{key:zn.index,ref:La?xt:null,...Tr},Co)})))},vr=n.forwardRef(({action:xe,active:xt,currentRootActionId:Nt},Jt)=>{const nn=n.useMemo(()=>{if(!Nt)return xe.ancestors;const Ln=xe.ancestors.findIndex(ia=>ia.id===Nt);return xe.ancestors.slice(Ln+1)},[xe.ancestors,Nt]),an=(0,P.wW)(wr);let xn=xe.name;const Gn=Boolean(xe.command?.perform||xe.url);return xe.children.length&&!Gn&&!xn.endsWith("...")&&(xn+="..."),n.createElement("div",{ref:Jt,className:(0,u.cx)(an.row,xt&&an.activeRow)},n.createElement("div",{className:an.actionContainer},xe.icon,n.createElement("div",{className:an.textContainer},n.createElement("div",null,nn.length>0&&nn.map(Ln=>n.createElement(n.Fragment,{key:Ln.id},n.createElement("span",{className:an.breadcrumbAncestor},Ln.name),n.createElement("span",{className:an.breadcrumbAncestor},"\u203A"))),n.createElement("span",null,xn))),xe.subtitle&&n.createElement("span",{className:an.subtitleText},xe.subtitle)))});vr.displayName="ResultItem";const wr=xe=>({row:(0,u.css)({padding:xe.spacing(1,2),display:"flex",alightItems:"center",justifyContent:"space-between",cursor:"pointer",position:"relative",borderRadius:xe.shape.borderRadius(2),margin:xe.spacing(0,1)}),activeRow:(0,u.css)({color:xe.colors.text.maxContrast,background:xe.colors.emphasize(xe.colors.background.primary,.03),"&:before":{display:"block",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:xe.spacing(.5),borderRadius:xe.shape.borderRadius(2),backgroundImage:xe.colors.gradients.brandVertical}}),actionContainer:(0,u.css)({display:"flex",gap:xe.spacing(1),alignItems:"center",fontSize:xe.typography.fontSize}),textContainer:(0,u.css)({display:"flex",flexDirection:"column"}),shortcut:(0,u.css)({padding:xe.spacing(0,1),background:xe.colors.background.secondary,borderRadius:xe.shape.borderRadius(),fontSize:xe.typography.fontSize}),breadcrumbAncestor:(0,u.css)({marginRight:xe.spacing(1),color:xe.colors.text.secondary}),subtitleText:(0,u.css)({fontSize:xe.typography.fontSize-2}),shortcutContainer:(0,u.css)({display:"grid",gridAutoFlow:"column",gap:xe.spacing(1)})});var Nr=e(99151),Yr=e.n(Nr),Ts=e(13019),To=e(64823);const ds=5,nr=4,Bo=3,Oo=2,gi=1,Ol=100,pi=5,qo=Yr()(ji,200);async function Il(){if(!O.Vt.user.isSignedIn)return[];const xe=(await Ts.Z.getDashboardOpened()).slice(0,pi),Nt=(await(0,To.getGrafanaSearcher)().search({kind:["dashboard"],limit:pi,uid:xe})).view.toArray();return Nt.sort((nn,an)=>{const xn=xe.indexOf(nn.uid),Gn=xe.indexOf(an.uid);return xn-Gn}),Nt.map(nn=>{const{url:an,name:xn}=nn;return{id:`recent-dashboards${an}`,name:`${xn}`,section:(0,x.t)("command-palette.section.recent-dashboards","Recent dashboards"),priority:ds,url:M.u.stripBaseFromUrl(an)}})}async function ji(xe){return xe.length===0||!O.Vt.user.isSignedIn&&!g.v.bootData.settings.anonymousEnabled?[]:(await(0,To.getGrafanaSearcher)().search({kind:["dashboard"],query:xe,limit:Ol})).view.map(Jt=>{const{url:nn,name:an}=Jt;return{id:`go/dashboard${nn}`,name:`${an}`,section:(0,x.t)("command-palette.section.dashboard-search-results","Dashboards"),priority:gi,url:M.u.stripBaseFromUrl(nn)}})}function Ec(xe,xt){const[Nt,Jt]=(0,n.useState)([]),[nn,an]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{xt&&xe.length>0?(an(!0),qo(xe).then(xn=>{Jt(xn),an(!1)})):Jt([])},[xt,xe]),{dashboardResults:Nt,isFetchingDashboardResults:nn}}var Qr=e(5534);function ei(xe){return"navModel."+xe.id}function Yi(xe,xt){const Nt=[];for(const Jt of xe){const{url:nn,target:an,text:xn,isCreateAction:Gn,children:Ln}=Jt,ia=Boolean(Ln?.length);if(!(nn||ia))continue;const ta=Gn?(0,x.t)("command-palette.section.actions","Actions"):(0,x.t)("command-palette.section.pages","Pages"),fa=Gn?nr:Bo,ha={id:ei(Jt),name:xn,section:ta,url:nn&&M.u.stripBaseFromUrl(nn),parent:xt&&!Gn&&ei(xt),target:an,priority:fa};if(Nt.push(ha),Ln?.length){const zn=Yi(Ln,Jt);Nt.push(...zn)}}return Nt}const Oi=xe=>{const xt=[{id:"preferences/theme",name:(0,x.t)("command-palette.action.change-theme","Change theme..."),keywords:"interface color dark light",section:(0,x.t)("command-palette.section.preferences","Preferences"),priority:Oo},{id:"preferences/dark-theme",name:(0,x.t)("command-palette.action.dark-theme","Dark"),keywords:"dark theme",perform:()=>(0,Qr.L)("dark"),parent:"preferences/theme",priority:Oo},{id:"preferences/light-theme",name:(0,x.t)("command-palette.action.light-theme","Light"),keywords:"light theme",perform:()=>(0,Qr.L)("light"),parent:"preferences/theme",priority:Oo}];g.v.featureToggles.topNavCommandPalette||xt.unshift({id:"go/search",name:(0,x.t)("command-palette.action.search","Search"),keywords:"navigate",perform:()=>r.E1.push("?search=open"),section:(0,x.t)("command-palette.section.pages","Pages"),priority:Bo});const Nt=Yi(xe);return[...xt,...Nt]};function wo(xe){const[xt,Nt]=(0,n.useState)([]),[Jt,nn]=(0,n.useState)([]),{navBarTree:an}=(0,C.useSelector)(xn=>({navBarTree:xn.navBarTree}));return(0,n.useEffect)(()=>{const xn=Oi(an);Nt(xn)},[an]),(0,n.useEffect)(()=>{xe?nn([]):Il().then(xn=>nn(xn)).catch(xn=>{console.error("Error loading recent dashboard actions",xn)})},[xe]),[...Jt,...xt]}var Qi=e(12398);const Po={name:"none",priority:t.Priority.NORMAL};function Ii(xe,xt){return xt.priority-xe.priority}function Rl(){const{search:xe,actions:xt,rootActionId:Nt}=(0,t.useKBar)(ta=>({search:ta.searchQuery,actions:ta.actions,rootActionId:ta.currentRootActionId})),Jt=n.useMemo(()=>Object.keys(xt).reduce((ta,fa)=>{const ha=xt[fa];if(!ha.parent&&!Nt&&ta.push(ha),ha.id===Nt)for(let zn=0;zn<ha.children.length;zn++)ta.push(ha.children[zn]);return ta},[]).sort(Ii),[xt,Nt]),nn=n.useCallback(ta=>{let fa=[];for(let ha=0;ha<ta.length;ha++)fa.push(ta[ha]);return function ha(zn,Zn=fa){for(let xa=0;xa<zn.length;xa++)if(zn[xa].children.length>0){let Wa=zn[xa].children;for(let Ba=0;Ba<Wa.length;Ba++)Zn.push(Wa[Ba]);ha(zn[xa].children,Zn)}return Zn}(ta)},[]),an=!xe,xn=n.useMemo(()=>an?Jt:nn(Jt),[nn,Jt,an]),Gn=ti(xn,xe),Ln=n.useMemo(()=>{let ta={},fa=[],ha=[];for(let Zn=0;Zn<Gn.length;Zn++){const xa=Gn[Zn],Wa=xa.action,Ba=xa.score||t.Priority.NORMAL,La={name:typeof Wa.section=="string"?Wa.section:Wa.section?.name||Po.name,priority:typeof Wa.section=="string"?Ba:Wa.section?.priority||0+Ba};ta[La.name]||(ta[La.name]=[],fa.push(La)),ta[La.name].push({priority:Wa.priority+Ba,action:Wa})}ha=fa.sort(Ii).map(Zn=>({name:Zn.name,actions:ta[Zn.name].sort(Ii).map(xa=>xa.action)}));let zn=[];for(let Zn=0;Zn<ha.length;Zn++){let xa=ha[Zn];xa.name!==Po.name&&zn.push(xa.name);for(let Wa=0;Wa<xa.actions.length;Wa++)zn.push(xa.actions[Wa])}return zn},[Gn]),ia=n.useMemo(()=>Nt,[Ln]);return n.useMemo(()=>({results:Ln,rootActionId:ia}),[ia,Ln])}function ti(xe,xt){const Nt=Zr(),Jt=n.useMemo(()=>({filtered:xe,search:xt}),[xe,xt]),{filtered:nn,search:an}=(0,Ys.useThrottledValue)(Jt);return n.useMemo(()=>{if(an.trim()==="")return nn.map(Ln=>({score:0,action:Ln}));const xn=nn.map(Ln=>[Ln.name,Ln.keywords,Ln.subtitle].join(" ").toLowerCase()),Gn=[];if(an.length>Zi){const Ln=an.toLowerCase();for(let ia=0;ia<xn.length;ia++){const fa=xn[ia].toLowerCase().indexOf(Ln);if(fa>-1){const ha=xn.length-fa,zn=nn[ia];Gn.push({score:ha,action:zn})}}}else{const Ln=new Set,ia=Nt.split(an),ta=ia.length<5?Qi.Z.permute(ia).map(fa=>fa.join(" ")):[an];for(const fa of ta){const ha=Nt.filter(xn,fa),zn=Nt.info(ha,xn,fa),Zn=Nt.sort(zn,xn,fa);for(let xa=0;xa<Zn.length;xa++){const Wa=Zn[xa];if(!Ln.has(Wa)){Ln.add(Wa);const Ba=Zn.length-xa,La=nn[zn.idx[Wa]];Gn.push({score:Ba,action:La})}}}}return Gn},[nn,an,Nt])}const Zi=25;function Zr(){const xe=n.useRef();return xe.current||(xe.current=new Qi.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1})),xe.current}const Al=()=>{const xe=(0,P.wW)(Uo),{query:xt,showing:Nt,searchQuery:Jt}=(0,t.useKBar)(ta=>({showing:ta.visualState===t.VisualState.showing,searchQuery:ta.searchQuery})),nn=wo(Jt);(0,t.useRegisterActions)(nn,[nn]);const{dashboardResults:an,isFetchingDashboardResults:xn}=Ec(Jt,Nt),Gn=(0,n.useRef)(null),{overlayProps:Ln}=(0,Q.Ir)({isOpen:Nt,onClose:()=>xt.setVisualState(t.VisualState.animatingOut)},Gn),{dialogProps:ia}=(0,ee.R)({},Gn);return(0,n.useEffect)(()=>{Nt&&(0,f.ff)("command_palette_opened")},[Nt]),nn.length>0?n.createElement(t.KBarPortal,null,n.createElement(t.KBarPositioner,{className:xe.positioner},n.createElement(t.KBarAnimator,{className:xe.animator},n.createElement(se.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},n.createElement("div",{...Ln,...ia},n.createElement("div",{className:xe.searchContainer},xn?n.createElement(Rs.$,{className:xe.spinner}):n.createElement(q.J,{name:"search",size:"md"}),n.createElement(t.KBarSearch,{defaultPlaceholder:(0,x.t)("command-palette.search-box.placeholder","Search or jump to..."),className:xe.search})),n.createElement("div",{className:xe.resultsContainer},n.createElement(No,{dashboardResults:an}))))))):null},No=({dashboardResults:xe})=>{const{results:xt,rootActionId:Nt}=Rl(),Jt=(0,P.wW)(Uo),nn=(0,x.t)("command-palette.section.dashboard-search-results","Dashboards"),an=(0,n.useMemo)(()=>xe.map(Gn=>new t.ActionImpl(Gn,{store:{}})),[xe]),xn=(0,n.useMemo)(()=>an.length>0?[...xt,nn,...an]:xt,[xt,nn,an]);return n.createElement(Ns,{items:xn,maxHeight:650,onRender:({item:Gn,active:Ln})=>{const ia=xn[0]===Gn;return typeof Gn=="string"?n.createElement("div",{className:(0,u.cx)(Jt.sectionHeader,ia&&Jt.sectionHeaderFirst)},Gn):n.createElement(vr,{action:Gn,active:Ln,currentRootActionId:Nt})}})},Uo=xe=>{const xt=Boolean(g.v.featureToggles.topNavCommandPalette);return{positioner:(0,u.css)({zIndex:xe.zIndex.portal,marginTop:"0px",paddingTop:xt?"4px !important":void 0,"&::before":{content:'""',position:"fixed",top:0,right:0,bottom:0,left:0,background:xe.components.overlay.background,backdropFilter:"blur(1px)"}}),animator:(0,u.css)({maxWidth:xe.breakpoints.values.md,width:"100%",background:xe.colors.background.primary,color:xe.colors.text.primary,borderRadius:xe.shape.borderRadius(2),border:`1px solid ${xe.colors.border.weak}`,overflow:"hidden",boxShadow:xe.shadows.z3}),searchContainer:(0,u.css)({alignItems:"center",background:xe.components.input.background,borderBottom:`1px solid ${xe.colors.border.weak}`,display:"flex",gap:xe.spacing(1),padding:xe.spacing(1,2)}),search:(0,u.css)({fontSize:xe.typography.fontSize,width:"100%",boxSizing:"border-box",outline:"none",border:"none",color:xe.components.input.text}),spinner:(0,u.css)({height:"22px"}),resultsContainer:(0,u.css)({paddingBottom:xe.spacing(1)}),sectionHeader:(0,u.css)({padding:xe.spacing(1.5,2,2,2),fontSize:xe.typography.bodySmall.fontSize,fontWeight:xe.typography.fontWeightMedium,color:xe.colors.text.secondary,borderTop:`1px solid ${xe.colors.border.weak}`,marginTop:xe.spacing(1)}),sectionHeaderFirst:(0,u.css)({paddingBottom:xe.spacing(1),borderTop:"none",marginTop:0})}};var ni=e(75118);class ps extends n.PureComponent{constructor(){super(...arguments),this.styles=Fo(g.v.theme2),this.state={},this.initListener=()=>{const xt=(0,ni.gj)();xt&&(this.subscription=xt.getConnectionState().subscribe({next:Nt=>{this.setState({show:!Nt})}}))}}componentDidMount(){}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}render(){const{show:xt}=this.state;return xt?!O.Vt.isSignedIn||!g.v.liveEnabled||O.Vt.user.orgRole===""?null:n.createElement("div",{className:this.styles.foot},n.createElement(dr.b,{severity:"warning",className:this.styles.warn,title:"connection to server is lost..."})):null}}const Fo=(0,Nn.B)(xe=>({foot:u.css`
      position: absolute;
      bottom: 0px;
      left: 0px;
      right: 0px;
      z-index: 10000;
      cursor: wait;
      margin: 16px;
    `,warn:u.css`
      border: 2px solid ${xe.colors.warning.main};
      max-width: 400px;
      margin: auto;
      height: 3em;
    `}));let Ji=[],Ri=[];function Wo(xe){Ji.push(xe)}function hi(xe){Ri.push(xe)}class Ll extends n.Component{constructor(xt){super(xt),this.renderRoute=Nt=>{const Jt=Nt.roles?Nt.roles():[];return n.createElement(s.AW,{exact:Nt.exact===void 0?!0:Nt.exact,path:Nt.path,key:Nt.path,render:nn=>((0,r.GQ)("AppWrapper",!1,"Rendering route",Nt,"with match",nn.location),Jt?.length&&!Jt.some(an=>O.Vt.hasRole(an))?n.createElement(s.l_,{to:"/"}):n.createElement(ks,{...nn,route:Nt}))})},this.state={}}async componentDidMount(){await i(),this.setState({ready:!0}),$(".preloader").remove()}renderRoutes(){return n.createElement(s.rs,null,(0,p.eU)().map(xt=>this.renderRoute(xt)))}renderNavBar(){return g.v.isPublicDashboardView||!this.state.ready||g.v.featureToggles.topnav?null:n.createElement(ct,null)}commandPaletteEnabled(){const xt=r.E1.getLocation().pathname==="/login";return g.v.featureToggles.commandPalette&&!g.v.isPublicDashboardView&&!xt}searchBarEnabled(){return!g.v.isPublicDashboardView}render(){const{app:xt}=this.props,{ready:Nt}=this.state;(0,r.GQ)("AppWrapper",!1,"rendering");const Jt=nn=>{(0,f.ff)("command_palette_action_selected",{actionId:nn.id,actionName:nn.name})};return n.createElement(n.StrictMode,null,n.createElement(c.Provider,{store:h.h},n.createElement(o.z4,{style:"page"},n.createElement(E.h.Provider,{value:xt.context},n.createElement(as.f,{value:g.v.theme2},n.createElement(t.KBarProvider,{actions:[],options:{enableHistory:!0,callbacks:{onSelectAction:Jt}}},n.createElement(l.$i,null,n.createElement(a.n,null),this.commandPaletteEnabled()&&n.createElement(Al,null),n.createElement("div",{className:"grafana-app"},n.createElement(s.F0,{history:r.E1.getHistory()},this.renderNavBar(),n.createElement(Bs,null,Ri.map((nn,an)=>n.createElement(nn,{key:an.toString()})),n.createElement(y,null),n.createElement(kt,null),this.searchBarEnabled()&&n.createElement(d._,null),Nt&&this.renderRoutes(),Ji.map((nn,an)=>n.createElement(nn,{key:an.toString()}))))),n.createElement(ps,null),n.createElement(l.Y0,null),n.createElement(m.lO,null))))))))}}},96093:(H,T,e)=>{"use strict";e.d(T,{ZP:()=>r,hF:()=>c,rb:()=>s});var t=e(93964),n=e.n(t);const c=n().module("grafana.core",["ngRoute"]),s=[c,n().module("grafana.controllers",[]),n().module("grafana.directives",[]),n().module("grafana.factories",[]),n().module("grafana.services",[]),n().module("grafana.filters",[]),n().module("grafana.routes",[])],r=c},37219:(H,T,e)=>{"use strict";e.d(T,{M:()=>r,Z:()=>c});var t=e(82897),n=e.n(t);class c{constructor(f){if(this.columns=[],this.columnMap={},this.rows=[],this.type="table",f){if(f.columns)for(const o of f.columns)this.addColumn(o);if(f.rows)for(const o of f.rows)this.addRow(o)}}sort(f){f.col===null||f.col===void 0||this.columns.length<=f.col||(this.rows.sort((o,l)=>(o=o[f.col],l=l[f.col],+(o==null)-+(l==null)||+(o>l)||-(o<l))),f.desc&&this.rows.reverse(),this.columns[f.col].sort=!0,this.columns[f.col].desc=f.desc)}addColumn(f){this.columnMap[f.text]||(this.columns.push(f),this.columnMap[f.text]=f)}addRow(f){this.rows.push(f)}}function s(g,f,o){let l=!1;for(let a=0;a<g.length;a++)if(f[a]!==void 0&&o[a]!==void 0){if(f[a]!==o[a])return!1}else(f[a]===void 0||o[a]===void 0)&&(l=!0);return l}function r(g,...f){const o=g||new c;if(arguments.length===1)return o;if(arguments.length===2)return o.columns=f[0].hasOwnProperty("columns")?[...f[0].columns]:[],o.rows=f[0].hasOwnProperty("rows")?[...f[0].rows]:[],o;const l=f.filter(v=>!!v.columns),a={},m=l.slice().reduce((v,i)=>(i.columns.forEach(u=>{const{text:P}=u;a[P]===void 0&&(a[P]=v.length,v.push(u))}),v),[]),d=l.map(v=>v.columns.map(i=>a[i.text])),p=l.reduce((v,i,u)=>{const P=d[u];return i.rows.forEach(E=>{const C=[];P.forEach((b,S)=>{C[b]=E[S]}),v.push(C)}),v},[]),h={},y=p.reduce((v,i,u)=>{if(!h[u]){let P=u+1;for(;P<p.length;){const E=(0,t.findIndex)(p,C=>s(m,i,C),P);if(E>-1){const C=p[E];for(let b=0;b<m.length;b++)i[b]===void 0&&C[b]!==void 0&&(i[b]=C[b]);h[E]=C,P=E+1}else break}v.push(i)}return v},[]);return o.columns=m,o.rows=y,o}},70431:(H,T,e)=>{"use strict";e.d(T,{e:()=>n});var t=e(32557);const n=(0,t.PH)("core/cleanUpState")},659:(H,T,e)=>{"use strict";e.d(T,{$l:()=>t.$l,H7:()=>n.H7,RL:()=>n.RL,ad:()=>t.ad});var t=e(98864),n=e(14393)},97063:(H,T,e)=>{"use strict";e.d(T,{Z:()=>c,h:()=>n});var t=e(85081);const n=new t.F,c=n},73546:(H,T,e)=>{"use strict";e.d(T,{P:()=>x});var t=e(82897),n=e(68404),c=e(31403),s=e(1108),r=e(29930),g=e(94270),f=e(52081),o=e(53217),l=e(50796),a=e(94080),m=e(28038),d=e(73757),p=(U=>(U.None="None",U.Team="Team",U.User="User",U.BuiltInRole="builtInRole",U))(p||{});const h=({title:U="Add Permission For",permissions:I,assignments:N,onAdd:F,onCancel:D})=>{const[Y,j]=(0,n.useState)(p.None),[K,z]=(0,n.useState)(0),[Z,ae]=(0,n.useState)(0),[J,oe]=(0,n.useState)(""),[Ee,me]=(0,n.useState)(""),re=(0,n.useMemo)(()=>{const pe=[];return N.users&&pe.push({value:p.User,label:"User"}),N.teams&&pe.push({value:p.Team,label:"Team"}),N.builtInRoles&&pe.push({value:p.BuiltInRole,label:"Role"}),pe},[N]);(0,n.useEffect)(()=>{I.length>0&&me(I[0])},[I]);const le=()=>Y===p.Team&&K>0||Y===p.User&&Z>0||p.BuiltInRole&&d.B5.hasOwnProperty(J);return n.createElement("div",{className:"cta-form","aria-label":"Permissions slider"},n.createElement(l.P,{onClick:D}),n.createElement("h5",null,U),n.createElement(g.l,{name:"addPermission",maxWidth:"none",onSubmit:()=>F({userId:Z,teamId:K,builtInRole:J,permission:Ee,target:Y})},()=>n.createElement(f.Lh,null,n.createElement(o.Ph,{"aria-label":"Role to add new permission to",value:Y,options:re,onChange:pe=>j(pe.value),disabled:re.length===0}),Y===p.User&&n.createElement(m.f,{onSelected:pe=>ae(pe.value||0),className:"width-20"}),Y===p.Team&&n.createElement(a.c,{onSelected:pe=>z(pe.value?.id||0),className:"width-20"}),Y===p.BuiltInRole&&n.createElement(o.Ph,{"aria-label":"Built-in role picker",options:Object.values(d.B5).map(pe=>({value:pe,label:pe})),onChange:pe=>oe(pe.value||""),width:40}),n.createElement(o.Ph,{"aria-label":"Permission Level",width:25,value:I.find(pe=>pe===Ee),options:I.map(pe=>({label:pe,value:pe})),onChange:pe=>me(pe.value||"")}),n.createElement(c.zx,{type:"submit",disabled:!le()},"Save"))))};var y=e(61860),v=e(39904);const i=({item:U,permissionLevels:I,canSet:N,onRemove:F,onChange:D})=>n.createElement("tr",null,n.createElement("td",{style:{width:"1%"}},u(U)),n.createElement("td",{style:{width:"90%"}},E(U)),n.createElement("td",null,U.isInherited&&n.createElement("em",{className:"muted no-wrap"},"Inherited from folder")),n.createElement("td",null,n.createElement("div",{className:"gf-form"},n.createElement(o.Ph,{className:"width-20",disabled:!N||!U.isManaged,onChange:Y=>D(U,Y.value),value:I.find(Y=>Y===U.permission),options:I.map(Y=>({value:Y,label:Y}))}))),n.createElement("td",null,n.createElement(y.u,{content:C(U)},n.createElement(v.J,{name:"info-circle"}))),n.createElement("td",null,U.isManaged?n.createElement(c.zx,{size:"sm",icon:"times",variant:"destructive",disabled:!N,onClick:()=>F(U),"aria-label":`Remove permission for ${P(U)}`}):n.createElement(y.u,{content:U.isInherited?"Inherited Permission":"Provisioned Permission"},n.createElement(c.zx,{size:"sm",icon:"lock"})))),u=U=>U.teamId?n.createElement("img",{className:"filter-table__avatar",src:U.teamAvatarUrl,alt:`Avatar for team ${U.teamId}`}):U.userId?n.createElement("img",{className:"filter-table__avatar",src:U.userAvatarUrl,alt:`Avatar for user ${U.userId}`}):n.createElement(v.J,{size:"xl",name:"shield"}),P=U=>U.userId?U.userLogin:U.teamId?U.team:U.builtInRole,E=U=>U.userId?n.createElement("span",{key:"name"},U.userLogin," "):U.teamId?n.createElement("span",{key:"name"},U.team," "):U.builtInRole?n.createElement("span",{key:"name"},U.builtInRole," "):n.createElement("span",{key:"name"}),C=U=>`Actions: ${[...new Set(U.actions)].sort().join(" ")}`,b=({title:U,items:I,compareKey:N,permissionLevels:F,canSet:D,onRemove:Y,onChange:j})=>{const K=(0,n.useMemo)(()=>{const z={};for(let Z of I){const ae=Z[N];if(!z[ae]){z[ae]=Z;continue}Z.actions.length>z[ae].actions.length&&(z[ae]=Z)}return Object.keys(z).map(Z=>z[Z])},[I,N]);return K.length===0?null:n.createElement("div",null,n.createElement("table",{className:"filter-table gf-form-group"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{style:{width:"1%"}}),n.createElement("th",null,U),n.createElement("th",{style:{width:"1%"}}),n.createElement("th",null,"Permission"),n.createElement("th",{style:{width:"1%"}}),n.createElement("th",{style:{width:"1%"}}))),n.createElement("tbody",null,K.map((z,Z)=>n.createElement(i,{item:z,onRemove:Y,onChange:j,canSet:D,key:`${Z}-${z.userId}`,permissionLevels:F})))))},S="",M={permissions:[],assignments:{teams:!1,users:!1,builtInRoles:!1}},x=({title:U="Permissions",buttonLabel:I="Add a permission",emptyLabel:N="There are no permissions",resource:F,resourceId:D,canSetPermissions:Y,addPermissionTitle:j})=>{const[K,z]=(0,n.useState)(!1),[Z,ae]=(0,n.useState)([]),[J,oe]=(0,n.useState)(M),Ee=(0,n.useCallback)(()=>L(F,D).then(Q=>ae(Q)),[F,D]);(0,n.useEffect)(()=>{O(F).then(Q=>(oe(Q),Ee()))},[F,D,Ee]);const me=Q=>{let G=null;Q.target===p.User?G=B(F,D,Q.userId,Q.permission):Q.target===p.Team?G=w(F,D,Q.teamId,Q.permission):Q.target===p.BuiltInRole&&(G=R(F,D,Q.builtInRole,Q.permission)),G!==null&&G.then(Ee)},re=Q=>{let G=null;Q.userId?G=B(F,D,Q.userId,S):Q.teamId?G=w(F,D,Q.teamId,S):Q.builtInRole&&(G=R(F,D,Q.builtInRole,S)),G!==null&&G.then(Ee)},le=(Q,G)=>{Q.permission!==G&&(Q.userId?me({permission:G,userId:Q.userId,target:p.User}):Q.teamId?me({permission:G,teamId:Q.teamId,target:p.Team}):Q.builtInRole&&me({permission:G,builtInRole:Q.builtInRole,target:p.BuiltInRole}))},pe=(0,n.useMemo)(()=>(0,t.sortBy)(Z.filter(Q=>Q.teamId),["team","isManaged"]),[Z]),ee=(0,n.useMemo)(()=>(0,t.sortBy)(Z.filter(Q=>Q.userId),["userLogin","isManaged"]),[Z]),se=(0,n.useMemo)(()=>(0,t.sortBy)(Z.filter(Q=>Q.builtInRole),["builtInRole","isManaged"]),[Z]);return n.createElement("div",null,n.createElement("div",{className:"page-action-bar"},n.createElement("h3",{className:"page-sub-heading"},U),n.createElement("div",{className:"page-action-bar__spacer"}),Y&&n.createElement(c.zx,{variant:"primary",key:"add-permission",onClick:()=>z(!0)},I)),n.createElement("div",null,n.createElement(s.s,{in:K},n.createElement(h,{title:j,onAdd:me,permissions:J.permissions,assignments:J.assignments,onCancel:()=>z(!1)})),Z.length===0&&n.createElement("table",{className:"filter-table gf-form-group"},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",null,N)))),n.createElement(b,{title:"Role",items:se,compareKey:"builtInRole",permissionLevels:J.permissions,onChange:le,onRemove:re,canSet:Y}),n.createElement(b,{title:"User",items:ee,compareKey:"userLogin",permissionLevels:J.permissions,onChange:le,onRemove:re,canSet:Y}),n.createElement(b,{title:"Team",items:pe,compareKey:"team",permissionLevels:J.permissions,onChange:le,onRemove:re,canSet:Y})))},O=async U=>{try{return await(0,r.i)().get(`/api/access-control/${U}/description`)}catch(I){return console.error("failed to load resource description: ",I),M}},L=(U,I)=>(0,r.i)().get(`/api/access-control/${U}/${I}`),B=(U,I,N,F)=>A(U,I,"users",N,F),w=(U,I,N,F)=>A(U,I,"teams",N,F),R=(U,I,N,F)=>A(U,I,"builtInRoles",N,F),A=(U,I,N,F,D)=>(0,r.i)().post(`/api/access-control/${U}/${I}/${N}/${F}`,{permission:D})},1108:(H,T,e)=>{"use strict";e.d(T,{s:()=>g});var t=e(68404),n=e(41141);const c="200px",s=200,r={transition:`max-height ${s}ms ease-in-out`,overflow:"hidden"},g=({children:f,in:o,maxHeight:l=c,style:a=r})=>{const m={exited:{maxHeight:0},entering:{maxHeight:l},entered:{maxHeight:"unset",overflow:"visible"},exiting:{maxHeight:0}};return t.createElement(n.ZP,{in:o,timeout:s},d=>t.createElement("div",{style:{...a,...m[d]}},f))}},95379:(H,T,e)=>{"use strict";e.d(T,{A:()=>c});var t=e(68404),n=e(34177);const c=t.memo(({actions:s})=>{const{chrome:r}=(0,n.p)();return(0,t.useEffect)(()=>{r.update({actions:s})}),null});c.displayName="TopNavUpdate"},31953:(H,T,e)=>{"use strict";e.d(T,{G:()=>l});var t=e(52423),n=e(68404),c=e(72648),s=e(79396),r=e(76770),g=e(72948);function f({description:m,text:d,url:p}){const h=(0,c.wW)(o);return n.createElement(g.Z,{className:h.card,href:p},n.createElement(g.Z.Heading,null,d),n.createElement(g.Z.Description,{className:h.description},m))}const o=m=>({card:(0,t.css)({marginBottom:0,gridTemplateRows:"1fr 0 2fr"}),description:(0,t.css)({WebkitLineClamp:3,WebkitBoxOrient:"vertical",display:"-webkit-box",overflow:"hidden"})});function l({navId:m}){const{node:d}=(0,r.q)(m),p=(0,c.wW)(a),h=d.children?.filter(y=>!y.hideFromTabs);return n.createElement(s.T,{navId:d.id},n.createElement(s.T.Contents,null,n.createElement("div",{className:p.content},h&&h.length>0&&n.createElement("section",{className:p.grid},h?.map(y=>n.createElement(f,{key:y.id,description:y.subTitle,text:y.text,url:y.url??""}))))))}const a=m=>({content:(0,t.css)({display:"flex",flexDirection:"column",gap:m.spacing(2)}),grid:(0,t.css)({display:"grid",gap:m.spacing(3),gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gridAutoRows:"138px",padding:m.spacing(2,0)})})},89097:(H,T,e)=>{"use strict";e.d(T,{M:()=>r});var t=e(52423),n=e(68404),c=e(35645),s=e(72648);function r({className:f,leftActionsSeparator:o}){const l=(0,s.wW)(g);return o?n.createElement("div",{className:(0,t.cx)(f,l.leftActionsSeparator)}):c.v.featureToggles.topnav?n.createElement("div",{className:(0,t.cx)(f,l.line)}):null}const g=f=>({leftActionsSeparator:(0,t.css)({display:"flex",flexGrow:1}),line:(0,t.css)({width:1,backgroundColor:f.colors.border.medium,height:24})})},13211:(H,T,e)=>{"use strict";e.d(T,{$:()=>t});const t=40},36578:(H,T,e)=>{"use strict";e.d(T,{c:()=>a});var t=e(52423),n=e(68404),c=e(64724),s=e(72648),r=e(85419);const g=({className:m,logo:d})=>n.createElement("img",{className:m,src:`${d||"public/img/grafana_icon.svg"}`,alt:"Grafana"}),f=({className:m,children:d})=>{const p=(0,s.l4)(),h=t.css`
    &:before {
      content: '';
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      top: 0;
      background: url(public/img/g8_login_${p.isDark?"dark":"light"}.svg);
      background-position: top center;
      background-size: auto;
      background-repeat: no-repeat;

      opacity: 0;
      transition: opacity 3s ease-in-out;

      @media ${r.mediaUp(p.v1.breakpoints.md)} {
        background-position: center;
        background-size: cover;
      }
    }
  `;return n.createElement("div",{className:(0,t.cx)(h,m)},d)},o=({className:m})=>n.createElement("img",{className:m,src:"public/img/grafana_icon.svg",alt:"Grafana"}),l=()=>{const m=(0,s.l4)();return t.css`
    background: ${c.alpha(m.colors.background.primary,.7)};
    background-size: cover;
  `};class a{}a.LoginLogo=g,a.LoginBackground=f,a.MenuLogo=o,a.LoginBoxBackground=l,a.AppTitle="Grafana",a.LoginTitle="Welcome to Grafana",a.GetLoginSubTitle=()=>null},67345:(H,T,e)=>{"use strict";e.d(T,{t:()=>t});function t(n,c,s){const r=[];let g=!1;function f(o){const l=new URLSearchParams(o.url?.split("?")[1]);let a=`${o.url?.split("?")[0]}`;l.has("editview")&&(a+=`?editview=${l.get("editview")}`),!g&&!o.hideFromBreadcrumbs&&(s&&a===s.url?(r.unshift({text:s.text,href:o.url??""}),g=!0):r.unshift({text:o.text,href:o.url??""})),o.parentItem&&f(o.parentItem)}if(c)if(c.url&&c.children){const o=c.children.find(l=>l.active);o&&(f(o),o.parentItem!==c&&f(c))}else f(c);return f(n),r}},52822:(H,T,e)=>{"use strict";e.d(T,{x:()=>r});var t=e(52423),n=e(68404),c=e(72648),s=e(39904);const r=n.forwardRef(({icon:f,children:o,onClick:l,...a},m)=>{const d=(0,c.wW)(g);return n.createElement("button",{...a,className:d.action,onClick:l},n.createElement(s.J,{name:f,size:"xl"}),o)});r.displayName="CardButton";const g=f=>({action:t.css`
      display: flex;
      flex-direction: column;
      height: 100%;

      justify-self: center;
      cursor: pointer;
      background: ${f.colors.background.secondary};
      border-radius: ${f.shape.borderRadius(1)};
      color: ${f.colors.text.primary};
      border: unset;
      width: 100%;
      display: flex;

      justify-content: center;
      align-items: center;
      text-align: center;

      &:hover {
        background: ${f.colors.emphasize(f.colors.background.secondary)};
      }
    `})},50796:(H,T,e)=>{"use strict";e.d(T,{P:()=>r});var t=e(52423),n=e(68404),c=e(72648),s=e(8180);const r=({onClick:f,"aria-label":o,style:l})=>{const a=(0,c.wW)(g);return n.createElement(s.h,{"aria-label":o??"Close",className:a,name:"times",onClick:f,style:l})},g=f=>t.css`
    position: absolute;
    right: ${f.spacing(.5)};
    top: ${f.spacing(1)};
  `},69142:(H,T,e)=>{"use strict";e.d(T,{Z:()=>a});var t=e(52423),n=e(68404),c=e(68183),s=e(39904),r=e(31403),g=e(97097);const f=t.css`
  text-align: center;
`,o=t.css`
  max-width: 700px;
  margin: 0 auto;
`,a=({title:m,buttonIcon:d,buttonLink:p,buttonTitle:h,buttonDisabled:y,onClick:v,proTip:i,proTipLink:u,proTipLinkTitle:P,proTipTarget:E,infoBox:C,infoBoxTitle:b})=>{const S=()=>n.createElement(n.Fragment,null,i?n.createElement("span",{key:"proTipFooter"},n.createElement(s.J,{name:"rocket"}),n.createElement(n.Fragment,null," ProTip: ",i," "),u&&n.createElement("a",{href:u,target:E,className:"text-link"},P)):"",C?n.createElement("div",{key:"infoBoxHtml",className:`grafana-info-box ${o}`},b&&n.createElement("h5",null,b),n.createElement("div",{dangerouslySetInnerHTML:C})):""),M=S()?"":t.css`
        margin-bottom: 20px;
      `,x=p?r.Qj:r.zx,O=n.createElement(x,{size:"lg",onClick:v,href:p,icon:d,className:M,"data-testid":c.wl.components.CallToActionCard.buttonV2(h),disabled:y},h);return n.createElement(g._,{className:f,message:m,footer:S(),callToActionElement:O})}},44407:(H,T,e)=>{"use strict";e.d(T,{Z:()=>g,m:()=>r});var t=e(68404),n=e(35645),c=e(39904),s=e(79396);function r(){return t.createElement(s.T,{navId:"not-found"},t.createElement(s.T.Contents,null,t.createElement("div",{className:"page-container page-body"},t.createElement("div",{className:"panel-container error-container"},t.createElement("div",{className:"error-column graph-box"},t.createElement("div",{className:"error-row"},t.createElement("div",{className:"error-column error-space-between graph-percentage"},t.createElement("p",null,"100%"),t.createElement("p",null,"80%"),t.createElement("p",null,"60%"),t.createElement("p",null,"40%"),t.createElement("p",null,"20%"),t.createElement("p",null,"0%")),t.createElement("div",{className:"error-column image-box"},t.createElement("img",{src:"public/img/graph404.svg",width:"100%",alt:"graph"}),t.createElement("div",{className:"error-row error-space-between"},t.createElement("p",{className:"graph-text"},"Then"),t.createElement("p",{className:"graph-text"},"Now"))))),t.createElement("div",{className:"error-column info-box"},t.createElement("div",{className:"error-row current-box"},t.createElement("p",{className:"current-text"},"current")),t.createElement("div",{className:"error-row",style:{flex:1}},t.createElement(c.J,{name:"minus-circle",className:"error-minus"}),t.createElement("div",{className:"error-column error-space-between error-full-width"},t.createElement("div",{className:"error-row error-space-between"},t.createElement("p",null,"Chances you are on the page you are looking for."),t.createElement("p",{className:"left-margin"},"0%")),t.createElement("div",null,t.createElement("h3",null,"Sorry for the inconvenience"),t.createElement("p",null,"Please go back to your"," ",t.createElement("a",{href:n.v.appSubUrl,className:"error-link"},"home dashboard")," ","and try again."),t.createElement("p",null,"If the error persists, seek help on the"," ",t.createElement("a",{href:"https://community.grafana.com",target:"_blank",rel:"noreferrer",className:"error-link"},"community site"),".")))))))))}const g=r},25337:(H,T,e)=>{"use strict";e.d(T,{$_:()=>a,Dv:()=>o,dP:()=>r});var t=e(68404),n=e(35645),c=e(39904),s=e(35287);let r=()=>[{target:"_blank",id:"documentation",text:(0,s.t)("nav.help/documentation","Documentation"),icon:"document-info",url:"https://grafana.com/docs/grafana/latest/?utm_source=grafana_footer"},{target:"_blank",id:"support",text:(0,s.t)("nav.help/support","Support"),icon:"question-circle",url:"https://grafana.com/products/enterprise/?utm_source=grafana_footer"},{target:"_blank",id:"community",text:(0,s.t)("nav.help/community","Community"),icon:"comments-alt",url:"https://community.grafana.com/?utm_source=grafana_footer"}];function g(d){return{hasReleaseNotes:!0,isBeta:d.includes("-beta")}}let f=()=>{const{buildInfo:d,licenseInfo:p}=n.v,h=[],y=p.stateInfo?` (${p.stateInfo})`:"";if(h.push({target:"_blank",id:"version",text:`${d.edition}${y}`,url:p.licenseUrl}),d.hideVersion)return h;const{hasReleaseNotes:v}=g(d.version);return h.push({target:"_blank",id:"version",text:`v${d.version} (${d.commit})`,url:v?"https://github.com/grafana/grafana/blob/main/CHANGELOG.md":void 0}),d.hasUpdate&&h.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),h};function o(d){r=d}function l(d){f=d}const a=t.memo(({customLinks:d})=>{const p=(d||r()).concat(f());return t.createElement("footer",{className:"footer"},t.createElement("div",{className:"text-center"},t.createElement("ul",null,p.map(h=>t.createElement("li",{key:h.text},t.createElement(m,{item:h}))))))});a.displayName="Footer";function m({item:d}){const p=d.url?t.createElement("a",{href:d.url,target:d.target,rel:"noopener noreferrer",id:d.id},d.text):d.text;return t.createElement(t.Fragment,null,d.icon&&t.createElement(c.J,{name:d.icon})," ",p)}},16534:(H,T,e)=>{"use strict";e.d(T,{G:()=>a});var t=e(68404),n=e(68183),c=e(94270),s=e(24799),r=e(52081),g=e(31403),f=e(61860),o=e(5080),l=e(20787);const a=({onSubmit:m,onSkip:d})=>{const p=h=>{m(h.newPassword)};return t.createElement(c.l,{onSubmit:p},({errors:h,register:y,getValues:v})=>t.createElement(t.Fragment,null,t.createElement(s.g,{label:"New password",invalid:!!h.newPassword,error:h?.newPassword?.message},t.createElement(l.Z,{id:"new-password",autoFocus:!0,autoComplete:"new-password",...y("newPassword",{required:"New Password is required"})})),t.createElement(s.g,{label:"Confirm new password",invalid:!!h.confirmNew,error:h?.confirmNew?.message},t.createElement(l.Z,{id:"confirm-new-password",autoComplete:"new-password",...y("confirmNew",{required:"Confirmed Password is required",validate:i=>i===v().newPassword||"Passwords must match!"})})),t.createElement(r.wc,null,t.createElement(g.zx,{type:"submit",className:o.F},"Submit"),d&&t.createElement(f.u,{content:"If you skip you will be prompted to change password next time you log in.",placement:"bottom"},t.createElement(g.zx,{fill:"text",onClick:d,type:"button","aria-label":n.wl.pages.Login.skip},"Skip")))))}},93022:(H,T,e)=>{"use strict";e.d(T,{X:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(39904),r=e(46967),g=e(57227);const f=({name:l,onChange:a,verifyLayerNameUniqueness:m,overrideStyles:d})=>{const p=(0,c.wW)(o),[h,y]=(0,n.useState)(!1),[v,i]=(0,n.useState)(null),u=M=>{y(!0)},P=M=>{if(y(!1),v){i(null);return}l!==M&&a(M)},E=M=>{const x=M.currentTarget.value.trim();if(x.length===0){i("An empty layer name is not allowed");return}if(m&&!m(x)&&x!==l){i("Layer name already exists");return}v&&i(null)},C=M=>{P(M.currentTarget.value.trim())},b=M=>{M.key==="Enter"&&P(M.currentTarget.value)},S=M=>{M.target.select()};return n.createElement(n.Fragment,null,n.createElement("div",{className:p.wrapper},!h&&n.createElement("button",{className:p.layerNameWrapper,title:"Edit layer name",onClick:u,"data-testid":"layer-name-div"},n.createElement("span",{className:d?"":p.layerName},l),n.createElement(s.J,{name:"pen",className:p.layerEditIcon,size:"sm"})),h&&n.createElement(n.Fragment,null,n.createElement(r.I,{type:"text",defaultValue:l,onBlur:C,autoFocus:!0,onKeyDown:b,onFocus:S,invalid:v!==null,onChange:E,className:p.layerNameInput,"data-testid":"layer-name-input"}),v&&n.createElement(g.S,{horizontal:!0},v))))},o=l=>({wrapper:t.css`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${l.spacing(.5)};
    `,layerNameWrapper:t.css`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${l.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${l.spacing(.5)};
      margin: 0;
      background: transparent;

      &:hover {
        background: ${l.colors.action.hover};
        border: 1px dashed ${l.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${l.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,layerName:t.css`
      font-weight: ${l.typography.fontWeightMedium};
      color: ${l.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${l.spacing(.5)};
    `,layerEditIcon:(0,t.cx)(t.css`
        margin-left: ${l.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),layerNameInput:t.css`
      max-width: 300px;
      margin: -4px 0;
    `})},59796:(H,T,e)=>{"use strict";e.d(T,{G:()=>c});var t=e(68404),n=e(58379);const c=s=>{const{children:r,storageKey:g,defaultValue:f}=s,[o,l]=(0,t.useState)({value:n.Z.getObject(s.storageKey,s.defaultValue)});(0,t.useEffect)(()=>{const d=p=>{p.key===g&&l({value:n.Z.getObject(s.storageKey,s.defaultValue)})};return window.addEventListener("storage",d),()=>{window.removeEventListener("storage",d)}});const a=d=>{try{n.Z.setObject(g,d)}catch(p){console.error(p)}l({value:d})},m=()=>{try{n.Z.delete(g)}catch(d){console.log(d)}l({value:f})};return t.createElement(t.Fragment,null,r(o.value,a,m))}},86824:(H,T,e)=>{"use strict";e.d(T,{Z:()=>o});var t=e(68404),n=e(25318),c=e(54899),s=e(97063),r=e(47694);const g=()=>!!r.ZP.oauth&&Object.keys(r.ZP.oauth).length>0;class f extends t.PureComponent{constructor(a){super(a),this.result={},this.changePassword=m=>{const d={newPassword:m,confirmNew:m,oldPassword:"admin"};if(this.props.resetCode){const p={code:this.props.resetCode,newPassword:m,confirmPassword:m};(0,c.i)().post("/api/user/password/reset",p).then(()=>{this.toGrafana()})}else(0,c.i)().put("/api/user/password",d).then(()=>{this.toGrafana()}).catch(p=>console.error(p))},this.login=m=>{this.setState({isLoggingIn:!0}),(0,c.i)().post("/login",m).then(d=>{if(this.result=d,m.password!=="admin"||r.ZP.ldapEnabled||r.ZP.authProxyEnabled){this.toGrafana();return}else this.changeView()}).catch(()=>{this.setState({isLoggingIn:!1})})},this.changeView=()=>{this.setState({isChangingPassword:!0})},this.toGrafana=()=>{this.result.redirectUrl?r.ZP.appSubUrl!==""&&!this.result.redirectUrl.startsWith(r.ZP.appSubUrl)?window.location.assign(r.ZP.appSubUrl+this.result.redirectUrl):window.location.assign(this.result.redirectUrl):window.location.assign(r.ZP.appSubUrl+"/")},this.state={isLoggingIn:!1,isChangingPassword:!1},r.ZP.loginError&&s.Z.emit(n.SI.alertWarning,["Login Failed",r.ZP.loginError])}render(){const{children:a}=this.props,{isLoggingIn:m,isChangingPassword:d}=this.state,{login:p,toGrafana:h,changePassword:y}=this,{loginHint:v,passwordHint:i,disableLoginForm:u,disableUserSignUp:P}=r.ZP;return t.createElement(t.Fragment,null,a({isOauthEnabled:g(),loginHint:v,passwordHint:i,disableLoginForm:u,disableUserSignUp:P,login:p,isLoggingIn:m,changePassword:y,skipPasswordChange:h,isChangingPassword:d}))}}const o=f},5080:(H,T,e)=>{"use strict";e.d(T,{F:()=>a,U:()=>m});var t=e(52423),n=e(68404),c=e(68183),s=e(94270),r=e(24799),g=e(46967),f=e(31403),o=e(20787);const l=t.css`
  width: 100%;
  padding-bottom: 16px;
`,a=t.css`
  justify-content: center;
  width: 100%;
`,m=({children:d,onSubmit:p,isLoggingIn:h,passwordHint:y,loginHint:v})=>n.createElement("div",{className:l},n.createElement(s.l,{onSubmit:p,validateOn:"onChange"},({register:i,errors:u})=>n.createElement(n.Fragment,null,n.createElement(r.g,{label:"Email or username",invalid:!!u.user,error:u.user?.message},n.createElement(g.I,{...i("user",{required:"Email or username is required"}),autoFocus:!0,autoCapitalize:"none",placeholder:v,"aria-label":c.wl.pages.Login.username})),n.createElement(r.g,{label:"Password",invalid:!!u.password,error:u.password?.message},n.createElement(o.Z,{id:"current-password",autoComplete:"current-password",passwordHint:y,...i("password",{required:"Password is required"})})),n.createElement(f.zx,{type:"submit","aria-label":c.wl.pages.Login.submit,className:a,disabled:h},h?"Logging in...":"Log in"),d)))},80472:(H,T,e)=>{"use strict";e.d(T,{$s:()=>f,dd:()=>o});var t=e(52423),n=e(68404),c=e(72648),s=e(85419),r=e(36578),g=e(25337);const f=({children:m,enterAnimation:d=!0})=>{const p=(0,c.wW)(a);return n.createElement("div",{className:(0,t.cx)(p.loginInnerBox,d&&p.enterAnimation)},m)},o=({children:m,branding:d})=>{const p=(0,c.wW)(a),[h,y]=(0,n.useState)(!1),v=d?.loginSubtitle??r.c.GetLoginSubTitle(),i=d?.loginTitle??r.c.LoginTitle,u=d?.loginBoxBackground||r.c.LoginBoxBackground(),P=d?.loginLogo;return(0,n.useEffect)(()=>y(!0),[]),n.createElement(r.c.LoginBackground,{className:(0,t.cx)(p.container,h&&p.loginAnim,d?.loginBackground)},n.createElement("div",{className:(0,t.cx)(p.loginContent,u,"login-content-box")},n.createElement("div",{className:p.loginLogoWrapper},n.createElement(r.c.LoginLogo,{className:p.loginLogo,logo:P}),n.createElement("div",{className:p.titleWrapper},n.createElement("h1",{className:p.mainTitle},i),v&&n.createElement("h3",{className:p.subTitle},v))),n.createElement("div",{className:p.loginOuterBox},m)),d?.hideFooter?n.createElement(n.Fragment,null):n.createElement(g.$_,{customLinks:d?.footerLinks}))},l=t.keyframes`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,a=m=>({container:(0,t.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:t.css`
      &:before {
        opacity: 1;
      }

      .login-content-box {
        opacity: 1;
      }
    `,submitButton:t.css`
      justify-content: center;
      width: 100%;
    `,loginLogo:t.css`
      width: 100%;
      max-width: 60px;
      margin-bottom: 15px;

      @media ${s.mediaUp(m.v1.breakpoints.sm)} {
        max-width: 100px;
      }
    `,loginLogoWrapper:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: ${m.spacing(3)};
    `,titleWrapper:t.css`
      text-align: center;
    `,mainTitle:t.css`
      font-size: 22px;

      @media ${s.mediaUp(m.v1.breakpoints.sm)} {
        font-size: 32px;
      }
    `,subTitle:t.css`
      font-size: ${m.typography.size.md};
      color: ${m.colors.text.secondary};
    `,loginContent:t.css`
      max-width: 478px;
      width: calc(100% - 2rem);
      display: flex;
      align-items: stretch;
      flex-direction: column;
      position: relative;
      justify-content: flex-start;
      z-index: 1;
      min-height: 320px;
      border-radius: ${m.shape.borderRadius(4)};
      padding: ${m.spacing(2,0)};
      opacity: 0;
      transition: opacity 0.5s ease-in-out;

      @media ${s.mediaUp(m.v1.breakpoints.sm)} {
        min-height: 320px;
        justify-content: center;
      }
    `,loginOuterBox:t.css`
      display: flex;
      overflow-y: hidden;
      align-items: center;
      justify-content: center;
    `,loginInnerBox:t.css`
      padding: ${m.spacing(2)};

      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex-grow: 1;
      max-width: 415px;
      width: 100%;
      transform: translate(0px, 0px);
      transition: 0.25s ease;
    `,enterAnimation:t.css`
      animation: ${l} ease-out 0.2s;
    `})},14617:(H,T,e)=>{"use strict";e.d(T,{L:()=>s,Y:()=>c});var t=e(35645),n=e(35287);function c(r){switch(r){case"home":return(0,n.t)("nav.home.title","Home");case"new":return(0,n.t)("nav.new.title","New");case"create":return(0,n.t)("nav.create.title","Create");case"create-dashboard":return(0,n.t)("nav.create-dashboard.title","Dashboard");case"folder":return(0,n.t)("nav.create-folder.title","Folder");case"import":return(0,n.t)("nav.create-import.title","Import");case"alert":return(0,n.t)("nav.create-alert.title","Create alert rule");case"starred":return(0,n.t)("nav.starred.title","Starred");case"starred-empty":return(0,n.t)("nav.starred-empty.title","Your starred dashboards will appear here");case"dashboards":return(0,n.t)("nav.dashboards.title","Dashboards");case"dashboards/browse":return t.v.featureToggles.topnav?(0,n.t)("nav.dashboards.title","Dashboards"):(0,n.t)("nav.manage-dashboards.title","Browse");case"dashboards/playlists":return(0,n.t)("nav.playlists.title","Playlists");case"dashboards/snapshots":return(0,n.t)("nav.snapshots.title","Snapshots");case"dashboards/library-panels":return(0,n.t)("nav.library-panels.title","Library panels");case"dashboards/public":return(0,n.t)("nav.public.title","Public dashboards");case"dashboards/new":return(0,n.t)("nav.new-dashboard.title","New dashboard");case"dashboards/folder/new":return(0,n.t)("nav.new-folder.title","New folder");case"dashboards/import":return(0,n.t)("nav.create-import.title","Import");case"scenes":return(0,n.t)("nav.scenes.title","Scenes");case"explore":return(0,n.t)("nav.explore.title","Explore");case"alerting":return(0,n.t)("nav.alerting.title","Alerting");case"alerting-legacy":return(0,n.t)("nav.alerting-legacy.title","Alerting (legacy)");case"alert-home":return(0,n.t)("nav.alerting-home.title","Home");case"alert-list":return(0,n.t)("nav.alerting-list.title","Alert rules");case"receivers":return(0,n.t)("nav.alerting-receivers.title","Contact points");case"am-routes":return(0,n.t)("nav.alerting-am-routes.title","Notification policies");case"channels":return(0,n.t)("nav.alerting-channels.title","Notification channels");case"silences":return(0,n.t)("nav.alerting-silences.title","Silences");case"groups":return(0,n.t)("nav.alerting-groups.title","Groups");case"alerting-admin":return(0,n.t)("nav.alerting-admin.title","Admin");case"cfg":return t.v.featureToggles.topnav?(0,n.t)("nav.config.title","Administration"):(0,n.t)("nav.config.titleBeforeTopnav","Configuration");case"datasources":return(0,n.t)("nav.datasources.title","Data sources");case"correlations":return(0,n.t)("nav.correlations.title","Correlations");case"users":return(0,n.t)("nav.users.title","Users");case"teams":return(0,n.t)("nav.teams.title","Teams");case"plugins":return(0,n.t)("nav.plugins.title","Plugins");case"org-settings":return t.v.featureToggles.topnav?(0,n.t)("nav.org-settings.title","Default preferences"):(0,n.t)("nav.org-settings.titleBeforeTopnav","Preferences");case"apikeys":return(0,n.t)("nav.api-keys.title","API keys");case"serviceaccounts":return(0,n.t)("nav.service-accounts.title","Service accounts");case"admin":return(0,n.t)("nav.admin.title","Server admin");case"support-bundles":return(0,n.t)("nav.support-bundles.title","Support bundles");case"global-users":return t.v.featureToggles.topnav?(0,n.t)("nav.global-users.title","Users"):(0,n.t)("nav.global-users.titleBeforeTopnav","Users");case"global-orgs":return(0,n.t)("nav.global-orgs.title","Organizations");case"server-settings":return(0,n.t)("nav.server-settings.title","Settings");case"storage":return(0,n.t)("nav.storage.title","Storage");case"upgrading":return(0,n.t)("nav.upgrading.title","Stats and license");case"live":return(0,n.t)("nav.live.title","Event streaming");case"live-status":return(0,n.t)("nav.live-status.title","Status");case"live-pipeline":return(0,n.t)("nav.live-pipeline.title","Pipeline");case"live-cloud":return(0,n.t)("nav.live-cloud.title","Cloud");case"monitoring":return(0,n.t)("nav.monitoring.title","Monitoring");case"apps":return(0,n.t)("nav.apps.title","Apps");case"alerts-and-incidents":return(0,n.t)("nav.alerts-and-incidents.title","Alerts & incidents");case"help":return(0,n.t)("nav.help.title","Help");case"profile/settings":return(0,n.t)("nav.profile/settings.title","Profile");case"profile/notifications":return(0,n.t)("nav.profile/notifications.title","Notification history");case"profile/password":return(0,n.t)("nav.profile/password.title","Change password");case"sign-out":return(0,n.t)("nav.sign-out.title","Sign out");case"search":return(0,n.t)("nav.search-dashboards.title","Search dashboards");default:return}}function s(r){switch(r){case"dashboards":return(0,n.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"dashboards/browse":return t.v.featureToggles.topnav?(0,n.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data"):void 0;case"dashboards/playlists":return(0,n.t)("nav.playlists.subtitle","Groups of dashboards that are displayed in a sequence");case"dashboards/snapshots":return(0,n.t)("nav.snapshots.subtitle","Interactive, publically available, point-in-time representations of dashboards");case"dashboards/library-panels":return(0,n.t)("nav.library-panels.subtitle","Reusable panels that can be added to multiple dashboards");case"alerting":return(0,n.t)("nav.alerting.subtitle","Learn about problems in your systems moments after they occur");case"alert-list":return(0,n.t)("nav.alerting-list.subtitle","Rules that determine whether an alert will fire");case"receivers":return(0,n.t)("nav.alerting-receivers.subtitle","Choose how to notify your contact points when an alert instance fires");case"am-routes":return(0,n.t)("nav.alerting-am-routes.subtitle","Determine how alerts are routed to contact points");case"silences":return(0,n.t)("nav.alerting-silences.subtitle","Stop notifications from one or more alerting rules");case"groups":return(0,n.t)("nav.alerting-groups.subtitle","See grouped alerts from an Alertmanager instance");case"datasources":return(0,n.t)("nav.datasources.subtitle","Add and configure data sources");case"correlations":return(0,n.t)("nav.correlations.subtitle","Add and configure correlations");case"users":return(0,n.t)("nav.users.subtitle","Invite and assign roles to users");case"teams":return(0,n.t)("nav.teams.subtitle","Groups of users that have common dashboard and permission needs");case"plugins":return(0,n.t)("nav.plugins.subtitle","Extend the Grafana experience with plugins");case"org-settings":return(0,n.t)("nav.org-settings.subtitle","Manage preferences across an organization");case"apikeys":return(0,n.t)("nav.api-keys.subtitle","Manage and create API keys that are used to interact with Grafana HTTP APIs");case"serviceaccounts":return(0,n.t)("nav.service-accounts.subtitle","Use service accounts to run automated workloads in Grafana");case"global-users":return(0,n.t)("nav.global-users.subtitle","Manage users in Grafana");case"global-orgs":return(0,n.t)("nav.global-orgs.subtitle","Isolated instances of Grafana running on the same server");case"server-settings":return(0,n.t)("nav.server-settings.subtitle","View the settings defined in your Grafana config");case"storage":return(0,n.t)("nav.storage.subtitle","Manage file storage");case"support-bundles":return(0,n.t)("nav.support-bundles.subtitle","Download support bundles");case"admin":return t.v.featureToggles.topnav?(0,n.t)("nav.admin.subtitle","Manage server-wide settings and access to resources such as organizations, users, and licenses"):void 0;case"apps":return(0,n.t)("nav.apps.subtitle","App plugins that extend the Grafana experience");case"monitoring":return(0,n.t)("nav.monitoring.subtitle","Monitoring and infrastructure apps");case"alerts-and-incidents":return(0,n.t)("nav.alerts-and-incidents.subtitle","Alerting and incident management apps");default:return}}},45458:(H,T,e)=>{"use strict";e.d(T,{Y:()=>g});var t=e(82897),n=e.n(t),c=e(68404),s=e(46967),r=e(24799);class g extends c.PureComponent{constructor(){super(...arguments),this.state={text:"",inputCorrected:!1},this.inputRef=c.createRef(),this.updateValue=()=>{const o=this.inputRef.current?.value;let l=!1,a="";const m=this.props.min,d=this.props.max;let p=o!==""?Number(o):void 0;p&&!Number.isNaN(p)&&(m!=null&&p<m?(a=m.toString(),l=!0):d!=null&&p>d?(a=d.toString(),l=!0):a=o??"",this.setState({text:a,inputCorrected:l})),l&&this.updateValueDebounced(),!Number.isNaN(p)&&p!==this.props.value&&this.props.onChange(p)},this.updateValueDebounced=(0,t.debounce)(this.updateValue,500),this.onChange=o=>{this.setState({text:o.currentTarget.value}),this.updateValueDebounced()},this.onKeyPress=o=>{o.key==="Enter"&&this.updateValue()}}componentDidMount(){this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}componentDidUpdate(o){if(this.props.value!==o.value){const l=isNaN(this.props.value)?"":`${this.props.value}`;l!==this.state.text&&this.setState({text:l})}}renderInput(){return c.createElement(s.I,{type:"number",ref:this.inputRef,min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:this.state.text,onChange:this.onChange,onBlur:this.updateValue,onKeyPress:this.onKeyPress,placeholder:this.props.placeholder})}render(){const{inputCorrected:o}=this.state;if(o){let l="",{min:a,max:m}=this.props;return m==null?a!=null&&(l=`< ${a}`):a!=null?l=`${a} < > ${m}`:l=`> ${m}`,c.createElement(r.g,{invalid:o,error:`Out of range ${l}`,validationMessageHorizontalOverflow:!0,style:{direction:"rtl"}},this.renderInput())}return this.renderInput()}}},13355:(H,T,e)=>{"use strict";e.d(T,{B:()=>g});var t=e(52423),n=e(68404),c=e(72648),s=e(90208),r=e(98671);const g=({value:o,onChange:l})=>{const a=(0,c.l4)(),m=(0,c.wW)(f);return n.createElement(s.zH,{color:o??"",onChange:l,enableNamedColors:!0},({ref:d,showColorPicker:p,hideColorPicker:h})=>n.createElement("div",{className:m.spot},n.createElement("div",{className:m.colorPicker},n.createElement(r.b,{ref:d,onClick:p,onMouseLeave:h,color:o?a.visualization.getColorByName(o):a.components.input.borderColor}))))},f=o=>({spot:t.css`
      color: ${o.colors.text};
      background: ${o.components.input.background};
      padding: 3px;
      height: ${o.v1.spacing.formInputHeight}px;
      border: 1px solid ${o.components.input.borderColor};
      display: flex;
      flex-direction: row;
      align-items: center;
      &:hover {
        border: 1px solid ${o.components.input.borderHover};
      }
    `,colorPicker:t.css`
      padding: 0 ${o.spacing(1)};
    `,colorText:t.css`
      cursor: pointer;
      flex-grow: 1;
    `,trashIcon:t.css`
      cursor: pointer;
      color: ${o.colors.text.secondary};
      &:hover {
        color: ${o.colors.text};
      }
    `})},23712:(H,T,e)=>{"use strict";e.d(T,{w:()=>c});var t=e(68404),n=e(45458);const c=({value:s,onChange:r,item:g})=>{const{settings:f}=g,o=(0,t.useCallback)(l=>{r(f?.integer&&l!==void 0?Math.floor(l):l)},[r,f?.integer]);return t.createElement(n.Y,{value:s,min:f?.min,max:f?.max,step:f?.step,placeholder:f?.placeholder,onChange:o})}},52974:(H,T,e)=>{"use strict";e.d(T,{u:()=>gt,l:()=>ot});var t=e(68404),n=e(35363),c=e(78798),s=e(14582),r=e(24177),g=e(8944),f=e(2594),o=e(52566),l=e(15448),a=e(52423),m=e(82897),d=e(58230),p=e(16514),h=e(46967),y=e(90208),v=e(8180),i=e(72648),u=e(31403),P=e(64353),E=e(7804);const C=[{value:r.H.Absolute,label:"Absolute",description:"Pick thresholds based on the absolute values"},{value:r.H.Percentage,label:"Percentage",description:"Pick threshold based on the percent between min/max"}];class b extends t.PureComponent{constructor(mt){super(mt),this.onAddThreshold=()=>{const{steps:be}=this.state;let Te=0;be.length>1&&(Te=be[be.length-1].value+10);let Ke=p.O9.filter(ye=>!be.some(fe=>fe.color===ye))[1];Ke||(Ke="#CCCCCC");const ge={value:Te,color:Ke,key:S++},Me=[...be,ge];(0,d.bP)(Me),this.setState({steps:Me},()=>{this.latestThresholdInputRef.current&&this.latestThresholdInputRef.current.focus(),this.onChange()})},this.onRemoveThreshold=be=>{const{steps:Te}=this.state;Te.length&&be.key!==Te[0].key&&this.setState({steps:Te.filter(Ke=>Ke.key!==be.key)},this.onChange)},this.onChangeThresholdValue=(be,Te)=>{const Ke=be.target.value.replace(/,/g,"."),ge=parseFloat(Ke),Me=isNaN(ge)?"":ge,ye=this.state.steps.map(fe=>(fe.key===Te.key&&(fe={...fe,value:Me}),fe));ye.length&&(ye[0].value=-1/0),(0,d.bP)(ye),this.setState({steps:ye})},this.onChangeThresholdColor=(be,Te)=>{const{steps:Ke}=this.state,ge=Ke.map(Me=>(Me.key===be.key&&(Me={...Me,color:Te}),Me));this.setState({steps:ge},this.onChange)},this.onBlur=()=>{const be=[...this.state.steps];(0,d.bP)(be),this.setState({steps:be},this.onChange)},this.onChange=()=>{this.props.onChange(x(this.props.thresholds,this.state.steps))},this.onModeChanged=be=>{this.props.onChange({...this.props.thresholds,mode:be})};const ce=M(mt.thresholds.steps);ce[0].value=-1/0,this.state={steps:ce},this.latestThresholdInputRef=t.createRef()}renderInput(mt,ce,be){const Te=this.props.thresholds.mode===r.H.Percentage,Ke=`Threshold ${be+1}`;return isFinite(mt.value)?t.createElement(h.I,{type:"number",step:"0.0001",key:Te.toString(),onChange:ge=>this.onChangeThresholdValue(ge,mt),value:mt.value,"aria-label":Ke,ref:be===0?this.latestThresholdInputRef:null,onBlur:this.onBlur,prefix:t.createElement("div",{className:ce.inputPrefix},t.createElement("div",{className:ce.colorPicker},t.createElement(y.zH,{color:mt.color,onChange:ge=>this.onChangeThresholdColor(mt,ge),enableNamedColors:!0})),Te&&t.createElement("div",{className:ce.percentIcon},"%")),suffix:t.createElement(v.h,{"aria-label":`Remove ${Ke}`,className:ce.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveThreshold(mt)})}):t.createElement(h.I,{type:"text",value:"Base","aria-label":Ke,disabled:!0,prefix:t.createElement("div",{className:ce.colorPicker},t.createElement(y.zH,{color:mt.color,onChange:ge=>this.onChangeThresholdColor(mt,ge),enableNamedColors:!0}))})}render(){const{thresholds:mt}=this.props,{steps:ce}=this.state;return t.createElement(i.Ni.Consumer,null,be=>{const Te=O(be);return t.createElement("div",{className:Te.wrapper},t.createElement(u.zx,{size:"sm",icon:"plus",onClick:()=>this.onAddThreshold(),variant:"secondary",className:Te.addButton,fullWidth:!0},"Add threshold"),t.createElement("div",{className:Te.thresholds},ce.slice(0).reverse().map((Ke,ge)=>t.createElement("div",{className:Te.item,key:`${Ke.key}`},this.renderInput(Ke,Te,ge)))),t.createElement("div",null,t.createElement(P._,{description:"Percentage means thresholds relative to min & max"},"Thresholds mode"),t.createElement(f.S,{options:C,onChange:this.onModeChanged,value:mt.mode})))})}}let S=100;function M(Ye){return(!Ye||Ye.length===0)&&(Ye=[{value:-1/0,color:"green"}]),Ye.filter((mt,ce)=>(0,m.isNumber)(mt.value)||ce===0).map(mt=>({color:mt.color,value:mt.value===null?-1/0:mt.value,key:S++}))}function x(Ye,mt){return{mode:Ye.mode??r.H.Absolute,steps:mt.map(be=>{const{key:Te,...Ke}=be;return Ke})}}const O=(0,E.B)(Ye=>({wrapper:a.css`
      display: flex;
      flex-direction: column;
    `,thresholds:a.css`
      display: flex;
      flex-direction: column;
      margin-bottom: ${Ye.spacing(2)};
    `,item:a.css`
      margin-bottom: ${Ye.spacing(1)};

      &:last-child {
        margin-bottom: 0;
      }
    `,colorPicker:a.css`
      padding: 0 ${Ye.spacing(1)};
    `,addButton:a.css`
      margin-bottom: ${Ye.spacing(1)};
    `,percentIcon:a.css`
      font-size: ${Ye.typography.bodySmall.fontSize};
      color: ${Ye.colors.text.secondary};
    `,inputPrefix:a.css`
      display: flex;
      align-items: center;
    `,trashIcon:a.css`
      color: ${Ye.colors.text.secondary};
      cursor: pointer;
      margin-right: 0;

      &:hover {
        color: ${Ye.colors.text};
      }
    `}));class L extends t.PureComponent{constructor(mt){super(mt)}render(){const{onChange:mt}=this.props;let ce=this.props.value;return ce||(ce={mode:r.H.Percentage,steps:[]}),t.createElement(b,{thresholds:ce,onChange:mt})}}var B=e(26031),w=e(52081),R=e(39904),A=e(35029),U=e(92484),I=e(26786),N=e(19677),F=e(15670),D=e(53217);function Y({mapping:Ye,index:mt,onChange:ce,onRemove:be,onDuplicate:Te,showIconPicker:Ke}){const{key:ge,result:Me,id:ye}=Ye,fe=(0,i.wW)(j),he=(0,t.useRef)(null),De=(0,t.useCallback)(Pt=>{const rn={...Ye,result:{...Ye.result}};Pt(rn),ce(mt,rn)},[Ye,mt,ce]);(0,t.useEffect)(()=>{he.current&&Ye.isNew&&(he.current.focus(),De(Pt=>{Pt.isNew=!1}))},[Ye,he,De]);const Ae=Pt=>{De(rn=>{rn.result.color=Pt})},Ne=()=>{De(Pt=>{Pt.result.color=void 0})},Ze=Pt=>{De(rn=>{rn.result.icon=Pt})},Se=()=>{De(Pt=>{Pt.result.icon=void 0})},Ue=Pt=>{De(rn=>{rn.key=Pt.currentTarget.value})},Qe=Pt=>{De(rn=>{rn.result.text=Pt.currentTarget.value})},pt=Pt=>{De(rn=>{rn.from=parseFloat(Pt.currentTarget.value)})},bt=Pt=>{De(rn=>{rn.to=parseFloat(Pt.currentTarget.value)})},yt=Pt=>{De(rn=>{rn.pattern=Pt.currentTarget.value})},Mt=Pt=>{De(rn=>{rn.specialMatch=Pt.value})},At=[{label:"Null",value:B.e.Null,description:"Matches null and undefined values"},{label:"NaN",value:B.e[NaN],description:"Matches against Number.NaN (not a number)"},{label:"Null + NaN",value:B.e.NullAndNaN,description:"Matches null, undefined and NaN"},{label:"True",value:B.e.True,description:"Boolean true values"},{label:"False",value:B.e.False,description:"Boolean false values"},{label:"Empty",value:B.e.Empty,description:"Empty string"}];return t.createElement(N._l,{key:ye,draggableId:ye,index:mt},Pt=>t.createElement("tr",{className:fe.dragRow,ref:Pt.innerRef,...Pt.draggableProps},t.createElement("td",null,t.createElement("div",{className:fe.dragHandle,...Pt.dragHandleProps},t.createElement(R.J,{name:"draggabledots",size:"lg"}))),t.createElement("td",{className:fe.typeColumn},Ye.type),t.createElement("td",null,Ye.type===B.H.ValueToText&&t.createElement(h.I,{ref:he,type:"text",value:ge??"",onChange:Ue,placeholder:"Exact value to match"}),Ye.type===B.H.RangeToText&&t.createElement("div",{className:fe.rangeInputWrapper},t.createElement(h.I,{type:"number",value:Ye.from??"",placeholder:"Range start",onChange:pt,prefix:"From"}),t.createElement(h.I,{type:"number",value:Ye.to??"",placeholder:"Range end",onChange:bt,prefix:"To"})),Ye.type===B.H.RegexToText&&t.createElement(h.I,{type:"text",value:Ye.pattern??"",placeholder:"Regular expression",onChange:yt}),Ye.type===B.H.SpecialValue&&t.createElement(D.Ph,{value:At.find(rn=>rn.value===Ye.specialMatch),options:At,onChange:Mt})),t.createElement("td",null,t.createElement(h.I,{type:"text",value:Me.text??"",onChange:Qe,placeholder:"Optional display text"})),t.createElement("td",{className:fe.textAlignCenter},Me.color&&t.createElement(w.Lh,{spacing:"sm",justify:"center"},t.createElement(y.zH,{color:Me.color,onChange:Ae,enableNamedColors:!0}),t.createElement(v.h,{name:"times",onClick:Ne,tooltip:"Remove color",tooltipPlacement:"top"})),!Me.color&&t.createElement(y.zH,{color:"gray",onChange:Ae,enableNamedColors:!0},rn=>t.createElement(u.zx,{variant:"primary",fill:"text",onClick:rn.showColorPicker,ref:rn.ref,size:"sm"},"Set color"))),Ke&&t.createElement("td",{className:fe.textAlignCenter},t.createElement(w.Lh,{spacing:"sm",justify:"center"},t.createElement(I.E,{onChange:Ze,onClear:Se,value:Me.icon,size:U.zc.SMALL,folderName:U.QS.Icon,mediaType:U.DD.Icon,color:Me.color}),Me.icon&&t.createElement(v.h,{name:"times",onClick:Se,tooltip:"Remove icon",tooltipPlacement:"top"}))),t.createElement("td",{className:fe.textAlignCenter},t.createElement(w.Lh,{spacing:"sm"},t.createElement(v.h,{name:"copy",onClick:()=>Te(mt),"data-testid":"duplicate-value-mapping"}),t.createElement(v.h,{name:"trash-alt",onClick:()=>be(mt),"data-testid":"remove-value-mapping"})))))}const j=Ye=>({dragRow:(0,a.css)({position:"relative"}),dragHandle:(0,a.css)({cursor:"grab","&:focus-visible&:after":{bottom:0,content:'""',left:0,position:"absolute",right:0,top:0,outline:`2px solid ${Ye.colors.primary.main}`,outlineOffset:"-2px"}}),rangeInputWrapper:(0,a.css)({display:"flex","> div:first-child":{marginRight:Ye.spacing(2)}}),regexInputWrapper:(0,a.css)({display:"flex","> div:first-child":{marginRight:Ye.spacing(2)}}),typeColumn:(0,a.css)({textTransform:"capitalize",textAlign:"center",width:"1%"}),textAlignCenter:(0,a.css)({textAlign:"center"})});function K({value:Ye,onChange:mt,onClose:ce,showIconPicker:be}){const Te=(0,i.wW)(z),[Ke,ge]=(0,t.useState)([]);(0,t.useEffect)(()=>{ge(Ee(Ye))},[Ye]);const Me=Ze=>{if(!Ye||!Ze.destination)return;const Se=[...Ke],Ue=Se[Ze.source.index];Se.splice(Ze.source.index,1),Se.splice(Ze.destination.index,0,Ue),ge(Se)},ye=(Ze,Se)=>{const Ue=[...Ke];Ue.splice(Ze,1,Se),ge(Ue)},fe=Ze=>{const Se=[...Ke];Se.splice(Ze,1),ge(Se)},he=[{label:"Value",value:B.H.ValueToText,description:"Match a specific text value"},{label:"Range",value:B.H.RangeToText,description:"Match a numerical range of values"},{label:"Regex",value:B.H.RegexToText,description:"Match a regular expression with replacement"},{label:"Special",value:B.H.SpecialValue,description:"Match on null, NaN, boolean and empty values"}],De=Ze=>{ge([...Ke,ae({type:Ze.value,result:{},isNew:!0})])},Ae=Ze=>{const Se=J(Ke[Ze]),Ue=[...Ke];Ue.splice(Ze,0,{...Se});for(let Qe=Ze;Qe<Ke.length;Qe++)Ue[Qe].result.index=Qe;ge(Ue)},Ne=()=>{mt(oe(Ke)),ce()};return(0,t.useEffect)(()=>{Ye?.length||De({value:B.H.ValueToText})},[]),t.createElement(t.Fragment,null,t.createElement("div",{className:Te.tableWrap},t.createElement("table",{className:Te.editTable},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{style:{width:"1%"}}),t.createElement("th",{style:{width:"40%",textAlign:"left"},colSpan:2},"Condition"),t.createElement("th",{style:{textAlign:"left"}},"Display text"),t.createElement("th",{style:{width:"10%"}},"Color"),be&&t.createElement("th",{style:{width:"10%"}},"Icon"),t.createElement("th",{style:{width:"1%"}}))),t.createElement(N.Z5,{onDragEnd:Me},t.createElement(N.bK,{droppableId:"sortable-field-mappings",direction:"vertical"},Ze=>t.createElement("tbody",{ref:Ze.innerRef,...Ze.droppableProps},Ke.map((Se,Ue)=>t.createElement(Y,{key:Se.id,mapping:Se,index:Ue,onChange:ye,onRemove:fe,onDuplicate:Ae,showIconPicker:be})),Ze.placeholder))))),t.createElement(A.u.ButtonRow,{leftItems:t.createElement(F.b,{label:"Add a new mapping",variant:"secondary",size:"md",icon:"plus",menuPlacement:"auto",minWidth:40,options:he,onChange:De})},t.createElement(u.zx,{variant:"secondary",fill:"outline",onClick:ce},"Cancel"),t.createElement(u.zx,{variant:"primary",onClick:Ne},"Update")))}const z=Ye=>({tableWrap:a.css`
    max-height: calc(80vh - 170px);
    min-height: 40px;
    overflow: auto;
  `,editTable:(0,a.css)({width:"100%",marginBottom:Ye.spacing(2),"thead th":{textAlign:"center"},"tbody tr:hover":{background:Ye.colors.action.hover}," th, td":{padding:Ye.spacing(1)}})});function Z(){return(0,m.uniqueId)("mapping-")}function ae(Ye){return{type:B.H.ValueToText,result:{},id:Z(),...Ye}}function J(Ye){return{...ae(Ye),id:Z()}}function oe(Ye){const mt=[],ce={type:B.H.ValueToText,options:{}};return Ye.forEach((be,Te)=>{const Ke={...be.result,index:Te};switch((!Ke.text||Ke.text.trim().length===0)&&(Ke.text=void 0),be.type){case B.H.ValueToText:be.key!=null&&(ce.options[be.key]=Ke);break;case B.H.RangeToText:be.from!=null&&be.to!=null&&mt.push({type:be.type,options:{from:be.from,to:be.to,result:Ke}});break;case B.H.RegexToText:be.pattern!=null&&mt.push({type:be.type,options:{pattern:be.pattern,result:Ke}});break;case B.H.SpecialValue:mt.push({type:be.type,options:{match:be.specialMatch,result:Ke}})}}),Object.keys(ce.options).length>0&&mt.unshift(ce),mt}function Ee(Ye){const mt=[];if(Ye)for(const ce of Ye)switch(ce.type){case B.H.ValueToText:for(const be of Object.keys(ce.options))mt.push(ae({type:ce.type,result:ce.options[be],key:be}));break;case B.H.RangeToText:mt.push(ae({type:ce.type,result:ce.options.result,from:ce.options.from??0,to:ce.options.to??0}));break;case B.H.RegexToText:mt.push(ae({type:ce.type,result:ce.options.result,pattern:ce.options.pattern}));break;case B.H.SpecialValue:mt.push(ae({type:ce.type,result:ce.options.result,specialMatch:ce.options.match??B.e.Null}))}return mt.sort((ce,be)=>(ce.result.index??0)>(be.result.index??0)?1:-1),mt}const me=t.memo(Ye=>{const{value:mt,onChange:ce,item:be}=Ye,Te=(0,i.wW)(re),Ke=be.settings?.icon,[ge,Me]=(0,t.useState)(!1),ye=(0,t.useCallback)(()=>{Me(!1)},[Me]),fe=(0,t.useMemo)(()=>Ee(mt),[mt]),he=(0,t.useCallback)((Ae,Ne)=>{fe[Ne].result.color=Ae,ce(oe(fe))},[fe,ce]),De=(0,t.useCallback)((Ae,Ne)=>{fe[Ne].result.icon=Ae,ce(oe(fe))},[fe,ce]);return t.createElement(w.wc,null,t.createElement("table",{className:Te.compactTable},t.createElement("tbody",null,fe.map((Ae,Ne)=>t.createElement("tr",{key:Ne.toString()},t.createElement("td",null,Ae.type===B.H.ValueToText&&Ae.key,Ae.type===B.H.RangeToText&&t.createElement("span",null,"[",Ae.from," - ",Ae.to,"]"),Ae.type===B.H.RegexToText&&Ae.pattern,Ae.type===B.H.SpecialValue&&Ae.specialMatch),t.createElement("td",null,t.createElement(R.J,{name:"arrow-right"})),t.createElement("td",null,Ae.result.text),Ae.result.color&&t.createElement("td",null,t.createElement(y.zH,{color:Ae.result.color,onChange:Ze=>he(Ze,Ne),enableNamedColors:!0})),Ke&&Ae.result.icon&&t.createElement("td",{"data-testid":"iconPicker"},t.createElement(I.E,{onChange:Ze=>De(Ze,Ne),value:Ae.result.icon,size:U.zc.SMALL,folderName:U.QS.Icon,mediaType:U.DD.Icon,color:Ae.result.color})))))),t.createElement(u.zx,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>Me(!0)},fe.length>0&&t.createElement("span",null,"Edit value mappings"),fe.length===0&&t.createElement("span",null,"Add value mappings")),t.createElement(A.u,{isOpen:ge,title:"Value mappings",onDismiss:ye,className:Te.modal,closeOnBackdropClick:!1},t.createElement(K,{value:mt,onChange:ce,onClose:ye,showIconPicker:Ke})))});me.displayName="ValueMappingsEditor";const re=Ye=>({modal:(0,a.css)({width:"980px"}),compactTable:(0,a.css)({width:"100%","tbody td":{padding:Ye.spacing(.5)}})});var le=e(99661);const pe=({value:Ye,onChange:mt,item:ce})=>{const{placeholder:be,isClearable:Te}=ce?.settings??{},Ke=(0,t.useCallback)(ge=>{mt(ge?.value?.uid)},[mt]);return t.createElement(le.o,{isClearable:Te,defaultOptions:!0,onChange:Ke,placeholder:be,value:Ye})};var ee=e(13355),se=e(425),Q=e(66926),G=e(24799);const q=({value:Ye,onChange:mt,item:ce,id:be})=>{const Te=(0,i.l4)(),Ke=(0,i.wW)(de),ge=(0,se.QY)(Ye?.mode),ye=(ce.settings?.byValueSupport?se.WO.list():se.WO.list().filter(Ne=>!Ne.isByValue)).map(Ne=>{let Ze=Ne.isByValue?" (by value)":"";return{value:Ne.id,label:`${Ne.name}${Ze}`,description:Ne.description,isContinuous:Ne.isContinuous,isByValue:Ne.isByValue,component(){return t.createElement(X,{mode:Ne,theme:Te})}}}),fe=Ne=>{mt({...Ye,mode:Ne.value})},he=Ne=>{mt({...Ye,mode:Ae,fixedColor:Ne})},De=Ne=>{mt({...Ye,mode:Ae,seriesBy:Ne})},Ae=Ye?.mode??Q.S.Thresholds;if(Ae===Q.S.Fixed)return t.createElement("div",{className:Ke.group},t.createElement(D.Ph,{minMenuHeight:200,options:ye,value:Ae,onChange:fe,className:Ke.select,inputId:be}),t.createElement(ee.B,{value:Ye?.fixedColor,onChange:he}));if(ce.settings?.bySeriesSupport&&ge.isByValue){const Ne=[{label:"Last",value:"last"},{label:"Min",value:"min"},{label:"Max",value:"max"}];return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:Te.spacing(2)}},t.createElement(D.Ph,{minMenuHeight:200,options:ye,value:Ae,onChange:fe,inputId:be})),t.createElement(G.g,{label:"Color series by"},t.createElement(f.S,{value:Ye?.seriesBy??"last",options:Ne,onChange:De})))}return t.createElement(D.Ph,{minMenuHeight:200,options:ye,value:Ae,onChange:fe,inputId:be})},X=({mode:Ye,theme:mt})=>{if(!Ye.getColors)return null;const ce=Ye.getColors(mt).map(mt.visualization.getColorByName),be={height:"8px",width:"100%",margin:"2px 0",borderRadius:"3px",opacity:1};if(Ye.isContinuous)be.background=`linear-gradient(90deg, ${ce.join(",")})`;else{let Te="",Ke="";for(let ge=0;ge<ce.length;ge++){const Me=ce[ge];if(Te==="")Te=`linear-gradient(90deg, ${Me} 0%`;else{const fe=ge/(ce.length-1)*100;Te+=`, ${Ke} ${fe}%, ${Me} ${fe}%`}Ke=Me}be.background=Te}return t.createElement("div",{style:be})},de=Ye=>({group:a.css`
      display: flex;
    `,select:a.css`
      margin-right: 8px;
      flex-grow: 1;
    `});var Be=e(28151),ke=e(68037);const He=({value:Ye,onChange:mt,context:ce})=>t.createElement(ke.d,{links:Ye,onChange:mt,data:ce.data,getSuggestions:()=>ce.getSuggestions?ce.getSuggestions(Be.o.Values):[]});class ue extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:mt}=this.props,{settings:ce}=mt;let be=mt.settings?.options||[];ce?.getOptions&&(be=await ce.getOptions(this.props.context)),this.state.options!==be&&this.setState({isLoading:!1,options:be})}}componentDidMount(){this.updateOptions()}componentDidUpdate(mt){const ce=mt.item?.settings,be=this.props.item?.settings;if(ce!==be)this.updateOptions();else if(be?.getOptions){const Te=mt.context?.data,Ke=this.props.context?.data;Te!==Ke&&this.updateOptions()}}render(){const{options:mt,isLoading:ce}=this.state,{value:be,onChange:Te,item:Ke}=this.props,{settings:ge}=Ke;return t.createElement(D.NU,{isLoading:ce,value:be,defaultValue:be,allowCustomValue:ge?.allowCustomValue,onChange:Me=>{Te(Me.map(ye=>ye.value).flatMap(ye=>ye!==void 0?[ye]:[]))},options:mt})}}var Oe=e(23712);class Fe extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:mt}=this.props,{settings:ce}=mt;let be=mt.settings?.options||[];ce?.getOptions&&(be=await ce.getOptions(this.props.context)),this.state.options!==be&&this.setState({isLoading:!1,options:be})}}componentDidMount(){this.updateOptions()}componentDidUpdate(mt){const ce=mt.item?.settings,be=this.props.item?.settings;if(ce!==be)this.updateOptions();else if(be?.getOptions){const Te=mt.context?.data,Ke=this.props.context?.data;Te!==Ke&&this.updateOptions()}}render(){const{options:mt,isLoading:ce}=this.state,{value:be,onChange:Te,item:Ke}=this.props,{settings:ge}=Ke;let Me=mt.find(ye=>ye.value===be);return!Me&&be&&(Me={label:`${be}`,value:be}),t.createElement(D.Ph,{isLoading:ce,value:Me,defaultValue:be,allowCustomValue:ge?.allowCustomValue,isClearable:ge?.isClearable,onChange:ye=>Te(ye?.value),options:mt})}}var Ie=e(74912),we=e(71294);const Re=({value:Ye,onChange:mt,item:ce,id:be})=>t.createElement(we.m,{stats:Ye,onChange:mt,allowMultiple:!!ce.settings?.allowMultiple,defaultStat:ce.settings?.defaultStat,inputId:be});var _e=e(37565),et=e(35645);class qe extends t.PureComponent{constructor(){super(...arguments),this.state={showAdd:!1},this.onRemoveString=mt=>{const{value:ce,onChange:be}=this.props,Te=[...ce];Te.splice(mt,1),be(Te)},this.onValueChange=(mt,ce)=>{const be=mt;if(mt.hasOwnProperty("key")&&be.key!=="Enter")return;const{value:Te,onChange:Ke}=this.props,ge=be.currentTarget.value.trim();if(ce<0){ge&&(be.currentTarget.value="",Ke([...Te,ge])),this.setState({showAdd:!1});return}if(!ge)return this.onRemoveString(ce);const Me=[...Te];Me[ce]=ge,Ke(Me)}}render(){const{value:mt,item:ce}=this.props,{showAdd:be}=this.state,Te=Je(et.v.theme2),Ke=ce.settings?.placeholder||"Add text";return t.createElement("div",null,mt.map((ge,Me)=>t.createElement(h.I,{className:Te.textInput,key:`${Me}/${ge}`,defaultValue:ge||"",onBlur:ye=>this.onValueChange(ye,Me),onKeyDown:ye=>this.onValueChange(ye,Me),suffix:t.createElement(R.J,{className:Te.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveString(Me)})})),be?t.createElement(h.I,{autoFocus:!0,className:Te.textInput,placeholder:Ke,defaultValue:"",onBlur:ge=>this.onValueChange(ge,-1),onKeyDown:ge=>this.onValueChange(ge,-1),suffix:t.createElement(R.J,{name:"plus-circle"})}):t.createElement(u.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:()=>this.setState({showAdd:!0})},Ke))}}const Je=(0,E.B)(Ye=>({textInput:a.css`
      margin-bottom: 5px;
      &:hover {
        border: 1px solid ${Ye.components.input.borderHover};
      }
    `,trashIcon:a.css`
      color: ${Ye.colors.text.secondary};
      cursor: pointer;

      &:hover {
        color: ${Ye.colors.text};
      }
    `}));var lt=e(61227);function at({value:Ye,onChange:mt,item:ce}){const be=(0,i.wW)(Xe);return ce?.settings?.isClearable&&Ye!=null?t.createElement("div",{className:be.wrapper},t.createElement("span",{className:be.first},t.createElement(lt.n,{value:Ye,onChange:mt})),t.createElement(v.h,{ariaLabel:"clear unit selection",name:"times",onClick:()=>mt(void 0)})):t.createElement(lt.n,{value:Ye,onChange:mt})}const Xe=Ye=>({wrapper:a.css`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:a.css`
    margin-right: 8px;
    flex-grow: 2;
  `}),gt=()=>{const Ye={id:"number",name:"Number",description:"Allows numeric values input",editor:Oe.w},mt={id:"slider",name:"Slider",description:"Allows numeric values input",editor:Ie.p},ce={id:"text",name:"Text",description:"Allows string values input",editor:_e.A},be={id:"strings",name:"String array",description:"An array of strings",editor:qe},Te={id:"boolean",name:"Boolean",description:"Allows boolean values input",editor(pt){const{id:bt,...yt}=pt;return t.createElement(g.r,{...yt,onChange:Mt=>pt.onChange(Mt.currentTarget.checked)})}},Ke={id:"select",name:"Select",description:"Allows option selection",editor:Fe},ge={id:"multi-select",name:"Multi select",description:"Allows for multiple option selection",editor:ue},Me={id:"radio",name:"Radio",description:"Allows option selection",editor(pt){return t.createElement(f.S,{...pt,options:pt.item.settings?.options})}},ye={id:"unit",name:"Unit",description:"Allows unit input",editor:at},fe={id:"color",name:"Color",description:"Allows color selection",editor(pt){return t.createElement(ee.B,{value:pt.value,onChange:pt.onChange})}},he={id:"fieldColor",name:"Field Color",description:"Field color selection",editor:q},De={id:"links",name:"Links",description:"Allows defining data links",editor:He},Ae={id:"stats-picker",name:"Stats Picker",editor:Re,description:""},Ne={id:"timezone",name:"Time zone",description:"Time zone selection",editor:o.O},Ze={id:"field-name",name:"Field name",description:"Allows selecting a field name from a data frame",editor:l.b};return[ce,Ye,mt,Te,Me,Ke,ye,De,Ae,be,Ne,he,fe,ge,Ze,{id:"dashboard-uid",name:"Dashboard",description:"Select dashboard",editor:pe},{id:"mappings",name:"Mappings",description:"Allows defining value mappings",editor:me},{id:"thresholds",name:"Thresholds",description:"Allows defining thresholds",editor:L}]},ot=()=>{const Ye=["Standard options"],mt={id:"displayName",path:"displayName",name:"Display name",description:"Change the field or series name",editor:n.S.get("text").editor,override:n.S.get("text").editor,process:c.W0,settings:{placeholder:"none",expandTemplateVars:!0},shouldApply:()=>!0,category:Ye},ce={id:"unit",path:"unit",name:"Unit",description:"",editor:n.S.get("unit").editor,override:n.S.get("unit").editor,process:c.op,settings:{placeholder:"none"},shouldApply:()=>!0,category:Ye},be={id:"min",path:"min",name:"Min",description:"Leave empty to calculate based on all values",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:c.Oh,settings:{placeholder:"auto"},shouldApply:Ae=>Ae.type===s.fS.number,category:Ye},Te={id:"max",path:"max",name:"Max",description:"Leave empty to calculate based on all values",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:c.Oh,settings:{placeholder:"auto"},shouldApply:Ae=>Ae.type===s.fS.number,category:Ye},Ke={id:"decimals",path:"decimals",name:"Decimals",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:c.Oh,settings:{placeholder:"auto",min:0,max:15,integer:!0},shouldApply:Ae=>Ae.type===s.fS.number,category:Ye},ge={id:"noValue",path:"noValue",name:"No value",description:"What to show when there is no value",editor:n.S.get("text").editor,override:n.S.get("text").editor,process:c.op,settings:{placeholder:"-"},shouldApply:()=>!0,category:Ye},Me={id:"links",path:"links",name:"Data links",editor:n.S.get("links").editor,override:n.S.get("links").editor,process:c.NN,settings:{placeholder:"-"},shouldApply:()=>!0,category:["Data links"],getItemsCount:Ae=>Ae?Ae.length:0},ye={id:"color",path:"color",name:"Color scheme",editor:n.S.get("fieldColor").editor,override:n.S.get("fieldColor").editor,process:c.kG,shouldApply:()=>!0,settings:{byValueSupport:!0,preferThresholdsMode:!0},category:Ye},fe={id:"mappings",path:"mappings",name:"Value mappings",description:"Modify the display text based on input value",editor:n.S.get("mappings").editor,override:n.S.get("mappings").editor,process:c.uj,settings:{},defaultValue:[],shouldApply:Ae=>Ae.type!==s.fS.time,category:["Value mappings"],getItemsCount:Ae=>Ae?Ae.length:0},he={id:"thresholds",path:"thresholds",name:"Thresholds",editor:n.S.get("thresholds").editor,override:n.S.get("thresholds").editor,process:c.ZN,settings:{},defaultValue:{mode:r.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]},shouldApply:()=>!0,category:["Thresholds"],getItemsCount:Ae=>Ae?Ae.steps.length:0},De={id:"filterable",path:"filterable",name:"Ad-hoc filterable",hideFromDefaults:!0,editor:n.S.get("boolean").editor,override:n.S.get("boolean").editor,process:c.W4,shouldApply:()=>!0,settings:{},category:Ye};return[ce,be,Te,Ke,mt,ye,ge,Me,fe,he,De]}},74912:(H,T,e)=>{"use strict";e.d(T,{p:()=>o});var t=e(52423),n=e(78966),c=e(58275),s=e(68404),r=e(72648),g=e(29571),f=e(45458);const o=({value:m,onChange:d,item:p})=>{const h=(0,s.useRef)(null),{settings:y}=p,v=y?.min||0,i=y?.max||100,u=y?.step,P=y?.marks||{[v]:v,[i]:i},E=y?.included,C=y?.ariaLabelForHandle,b=75,S=!0,M=(0,r.l4)(),[x,O]=(0,s.useState)(m??v),[L,B]=(0,s.useState)(b);(0,s.useEffect)(()=>{m!=null&&m!==x&&O(m)},[m,x]),(0,s.useEffect)(()=>{const N=getComputedStyle(h.current),F=N.getPropertyValue("font-weight")||"normal",D=N.getPropertyValue("font-size")||"16px",Y=N.getPropertyValue("font-family")||"Arial",j="0",K=4,z=8,Z=Math.max((i+(u||0)).toString().length,(i-(u||0)).toString().length)+K,ae=j.repeat(Z),J=l(ae,`${F} ${D} ${Y}`);J&&B(J+z*2)},[i,u]);const w=(0,s.useCallback)(N=>{const F=typeof N=="number"?N:N[0];O(F),d&&d(F)},[O,d]),R=(0,s.useCallback)(N=>{let F=N;(Number.isNaN(F)||!F)&&(F=0),O(F),d&&d(F)},[d]),A=(0,g.W)(M,S,Boolean(P)),U=a(M,L),I=S?[]:[A.sliderInputVertical];return s.createElement("div",{className:(0,t.cx)(A.container,A.slider)},s.createElement(n.Global,{styles:A.slider}),s.createElement("label",{className:(0,t.cx)(A.sliderInput,...I)},s.createElement(c.Z,{min:v,max:i,step:u,defaultValue:m,value:x,onChange:w,vertical:!S,reverse:!1,ariaLabelForHandle:C,marks:P,included:E}),s.createElement("span",{className:U.numberInputWrapper,ref:h},s.createElement(f.Y,{value:x,onChange:R,max:i,min:v,step:u}))))};function l(m,d){const h=document.createElement("canvas").getContext("2d");return h?(h.font=d,h.measureText(m).width):null}const a=(m,d)=>({numberInputWrapper:t.css`
      margin-left: 10px;
      max-height: 32px;
      max-width: ${d}px;
      min-width: ${d}px;
      overflow: visible;
      width: 100%;
    `})},37565:(H,T,e)=>{"use strict";e.d(T,{A:()=>s});var t=e(68404),n=e(97379),c=e(46967);const s=({value:r,onChange:g,item:f,suffix:o})=>{const l=f.settings?.useTextarea?n.K:c.I,a=(0,t.useCallback)(m=>{let d=r??"";if(m.hasOwnProperty("key")){const p=m;p.key==="Enter"&&!f.settings?.useTextarea&&(d=p.currentTarget.value.trim())}else d=m.currentTarget.value.trim();d!==r&&g(d===""?void 0:d)},[r,f.settings?.useTextarea,g]);return t.createElement(l,{placeholder:f.settings?.placeholder,defaultValue:r||"",rows:f.settings?.useTextarea&&f.settings.rows||5,onBlur:a,onKeyDown:a,suffix:o})}},79396:(H,T,e)=>{"use strict";e.d(T,{T:()=>v});var t=e(52423),n=e(68404),c=e(24844),s=e(35645),r=e(72648),g=e(68226),f=e(25337),o=e(91289),l=e(79008);function a({children:u}){return n.createElement(n.Fragment,null,u)}var m=e(2555);const d=({isLoading:u,children:P,className:E})=>n.createElement("div",{className:(0,t.cx)("page-container","page-body",E)},u?n.createElement(m.Z,null):P);var p=e(83233),h=e(22174);const y=({navId:u,navModel:P,pageNav:E,children:C,className:b,toolbar:S,scrollRef:M,scrollTop:x,layout:O=c.Qz.Standard,renderTitle:L,subTitle:B,actions:w,info:R,...A})=>{const U=(0,r.wW)(i),I=(0,p.P)(u,P);(0,h.T)(I,E);const N=E??I?.main;return n.createElement("div",{className:(0,t.cx)(U.wrapper,b),...A},O===c.Qz.Standard&&n.createElement(g.$,{autoHeightMin:"100%",scrollTop:x,scrollRefCallback:M},n.createElement("div",{className:(0,t.cx)("page-scrollbar-content",b)},N&&n.createElement(o.m,{actions:w,info:R,navItem:N,renderTitle:L,subTitle:B}),C,n.createElement(f.$_,null))),O===c.Qz.Canvas&&n.createElement(n.Fragment,null,S,n.createElement("div",{className:U.scrollWrapper},n.createElement(g.$,{autoHeightMin:"100%",scrollTop:x,scrollRefCallback:M},n.createElement("div",{className:(0,t.cx)(U.content,!S&&U.contentWithoutToolbar)},C)))),O===c.Qz.Custom&&n.createElement(n.Fragment,null,S,C))};y.Contents=d,y.OldNavOnly=a;const v=s.v.featureToggles.topnav?l.T:y,i=u=>({wrapper:(0,t.css)({width:"100%",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0}),scrollWrapper:(0,t.css)({width:"100%",flexGrow:1,minHeight:0,display:"flex"}),content:(0,t.css)({display:"flex",flexDirection:"column",padding:u.spacing(0,2,2,2),flexBasis:"100%",flexGrow:1}),contentWithoutToolbar:(0,t.css)({padding:u.spacing(2)})})},83233:(H,T,e)=>{"use strict";e.d(T,{P:()=>r});var t=e(58565),n=e(86245),c=e(3153),s=e(81168);function r(f,o){if(o)return o;if(f&&c.h)return(0,s.useSelector)((0,t.P1)(g,l=>(0,n.ht)(l,f??"home")))}function g(f){return f.navIndex}},22174:(H,T,e)=>{"use strict";e.d(T,{T:()=>g});var t=e(68404),n=e(14393),c=e(81168),s=e(36578),r=e(67345);function g(f,o){const l=(0,c.useSelector)(a=>a.navIndex)?.[n.Qz];(0,t.useEffect)(()=>{const a=(f?.node!==f?.main?f?.node:f?.main)??{text:"Grafana"},m=(0,r.t)(a,o,l).map(d=>d.text).reverse();m[m.length-1]=s.c.AppTitle,document.title=m.join(" - ")},[l,f,o])}},91289:(H,T,e)=>{"use strict";e.d(T,{m:()=>p});var t=e(52423),n=e(68404),c=e(72142),s=e(79841),r=e(72648),g=e(40419),f=e(39904),o=e(79860),l=e(9591),a=e(73194);const m=({children:v,customCss:i})=>{if(!v||v.length===0)return null;const u=v.find(P=>P.active===!0);return n.createElement("div",{className:`gf-form-select-wrapper width-20 ${i}`},n.createElement("div",{className:"dropdown"},n.createElement("button",{type:"button",className:"gf-form-input dropdown-toggle","data-toggle":"dropdown",style:{textAlign:"left"}},u?.text),n.createElement("ul",{role:"menu",className:"dropdown-menu dropdown-menu--menu"},v.map(P=>P.hideFromTabs?null:n.createElement(o.u,{key:P.url,iconClassName:P.icon,text:P.text,href:P.url})))))},d=({children:v})=>!v||v.length===0?null:n.createElement("nav",null,n.createElement(m,{customCss:"page-header__select-nav"},v),n.createElement(c.J,{className:"page-header__tabs",hideBorder:!0},v.map((i,u)=>!i.hideFromTabs&&n.createElement(s.O,{label:i.text,active:i.active,key:`${i.url}-${u}`,icon:i.icon,href:i.url,suffix:i.tabSuffix})))),p=({navItem:v,renderTitle:i,actions:u,info:P,subTitle:E})=>{const C=(0,r.wW)(y);if(!v)return null;const b=S=>{const M=S.icon==="grafana"?12:14,x=S.icon&&(0,g.toIconName)(S.icon),O=E??S.subTitle;return n.createElement("div",{className:"page-header__inner"},n.createElement("span",{className:"page-header__logo"},x&&n.createElement(f.J,{name:x,size:"xxxl",style:{marginTop:M}}),S.img&&n.createElement("img",{className:"page-header__img",src:S.img,alt:""})),n.createElement("div",{className:(0,t.cx)("page-header__info-block",C.headerText)},i?i(S.text):h(S.text,S.breadcrumbs??[],S.highlightText),P&&n.createElement(l.S,{info:P}),O&&n.createElement("div",{className:"page-header__sub-title"},O),u&&n.createElement("div",{className:C.actions},u)))};return n.createElement("div",{className:C.headerCanvas},n.createElement("div",{className:"page-container"},n.createElement("div",{className:"page-header"},b(v),v.children&&v.children.length>0&&n.createElement(d,null,v.children))))};function h(v,i,u){if(!v&&(!i||i.length===0))return null;if(!i||i.length===0)return n.createElement("h1",{className:"page-header__title"},v,u&&n.createElement(a.Z,{text:u,className:t.css`
              vertical-align: middle;
            `}));const P=[];for(const E of i)E.url?P.push(n.createElement("a",{className:"page-header__link",key:P.length,href:E.url},E.title)):P.push(n.createElement("span",{key:P.length}," / ",E.title));return P.push(n.createElement("span",{key:i.length+1}," / ",v)),n.createElement("h1",{className:"page-header__title"},P)}const y=v=>({actions:(0,t.css)({display:"flex",flexDirection:"row",gap:v.spacing(1)}),headerText:(0,t.css)({display:"flex",flexDirection:"column",gap:v.spacing(1)}),headerCanvas:t.css`
    background: ${v.colors.background.canvas};
  `})},9591:(H,T,e)=>{"use strict";e.d(T,{S:()=>s});var t=e(52423),n=e(68404),c=e(72648);function s({info:g}){const f=(0,c.wW)(r);return n.createElement("div",{className:f.container},g.map((o,l)=>n.createElement(n.Fragment,{key:l},n.createElement("div",{className:f.infoItem},n.createElement("div",{className:f.label},o.label),o.value),l+1<g.length&&n.createElement("div",{"data-testid":"page-info-separator",className:f.separator}))))}const r=g=>({container:(0,t.css)({display:"flex",flexDirection:"row",gap:g.spacing(1.5),overflow:"auto"}),infoItem:(0,t.css)({...g.typography.bodySmall,display:"flex",flexDirection:"column",gap:g.spacing(.5)}),label:(0,t.css)({color:g.colors.text.secondary}),separator:(0,t.css)({borderLeft:`1px solid ${g.colors.border.weak}`})})},2555:(H,T,e)=>{"use strict";e.d(T,{Z:()=>s});var t=e(68404),n=e(61744);const s=({pageName:r=""})=>{const g=`Loading ${r}...`;return t.createElement("div",{className:"page-loader-wrapper"},t.createElement(n.u,{text:g}))}},79008:(H,T,e)=>{"use strict";e.d(T,{T:()=>N});var t=e(52423),n=e(68404),c=e(24844),s=e(72648),r=e(68226),g=e(34177),f=e(25337),o=e(83233),l=e(22174),a=e(2555);const m=({isLoading:D,children:Y,className:j})=>{let K=j?n.createElement("div",{className:j},Y):Y;return n.createElement(n.Fragment,null,D?n.createElement(a.Z,null):K)};var d=e(9591);function p({navItem:D,renderTitle:Y,actions:j,info:K,subTitle:z}){const Z=(0,s.wW)(h),ae=z??D.subTitle,J=Y?Y(D.text):n.createElement("h1",{className:Z.pageTitle},D.text);return n.createElement("div",{className:Z.pageHeader},n.createElement("div",{className:Z.topRow},n.createElement("div",{className:Z.titleInfoContainer},n.createElement("div",{className:Z.title},D.img&&n.createElement("img",{className:Z.img,src:D.img,alt:`logo for ${D.text}`}),J),K&&n.createElement(d.S,{info:K})),n.createElement("div",{className:Z.actions},j)),ae&&n.createElement("div",{className:Z.subTitle},ae))}const h=D=>({topRow:(0,t.css)({alignItems:"center",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:D.spacing(1,2)}),title:(0,t.css)({display:"flex",flexDirection:"row"}),actions:(0,t.css)({display:"flex",flexDirection:"row",gap:D.spacing(1)}),titleInfoContainer:(0,t.css)({display:"flex",label:"title-info-container",flex:1,flexWrap:"wrap",gap:D.spacing(1,4),justifyContent:"space-between",maxWidth:"100%"}),pageHeader:(0,t.css)({label:"page-header",display:"flex",flexDirection:"column",gap:D.spacing(1),marginBottom:D.spacing(2)}),pageTitle:(0,t.css)({display:"flex",marginBottom:0}),subTitle:(0,t.css)({position:"relative",color:D.colors.text.secondary}),img:(0,t.css)({width:"32px",height:"32px",marginRight:D.spacing(2)})});var y=e(72142),v=e(40419),i=e(79841);function u({navItem:D}){const Y=(0,s.wW)(P);return n.createElement("div",{className:Y.tabsWrapper},n.createElement(y.J,null,D.children.map((j,K)=>{const z=j.icon?(0,v.toIconName)(j.icon):void 0;return!j.hideFromTabs&&n.createElement(i.O,{label:j.text,active:j.active,key:`${j.url}-${K}`,icon:z,href:j.url,suffix:j.tabSuffix})})))}const P=D=>({tabsWrapper:(0,t.css)({paddingBottom:D.spacing(3)})});var E=e(24664),C=e(68183),b=e(41818),S=e(39904);function M({item:D,isSectionRoot:Y=!1}){const j=(0,s.wW)(x),K=D.children?.filter(oe=>!oe.hideFromTabs),z=Y&&Boolean(D.children[0].children?.length),Z=(0,t.cx)({[j.link]:!0,[j.activeStyle]:D.active,[j.isSection]:Boolean(K?.length)||D.isSection,[j.isSectionRoot]:Y,[j.noRootMargin]:z});let ae=null;D.img?ae=n.createElement("img",{"data-testid":"section-image",className:j.sectionImg,src:D.img,alt:""}):D.icon&&(ae=n.createElement(S.J,{"data-testid":"section-icon",name:D.icon}));const J=()=>{(0,b.ff)("grafana_navigation_item_clicked",{path:D.url??D.id,sectionNav:!0})};return n.createElement(n.Fragment,null,n.createElement("a",{onClick:J,href:D.url,className:Z,"aria-label":C.wl.components.Tab.title(D.text),role:"tab","aria-selected":D.active},Y&&ae,D.text,D.tabSuffix&&n.createElement(D.tabSuffix,{className:j.suffix})),K?.map((oe,Ee)=>n.createElement(M,{item:oe,key:Ee})))}const x=D=>({link:t.css`
      padding: ${D.spacing(1,0,1,1.5)};
      display: flex;
      align-items: center;
      border-radius: ${D.shape.borderRadius(2)};
      gap: ${D.spacing(1)};
      height: 100%;
      position: relative;
      color: ${D.colors.text.secondary};

      &:hover,
      &:focus {
        text-decoration: underline;
        z-index: 1;
      }
    `,activeStyle:t.css`
      label: activeTabStyle;
      color: ${D.colors.text.primary};
      background: ${D.colors.emphasize(D.colors.background.canvas,.03)};

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        width: 4px;
        bottom: 2px;
        top: 2px;
        border-radius: 2px;
        background-image: ${D.colors.gradients.brandVertical};
      }
    `,suffix:t.css`
      margin-left: ${D.spacing(1)};
    `,sectionImg:(0,t.css)({width:18}),isSectionRoot:(0,t.css)({fontSize:D.typography.h4.fontSize,marginTop:0,marginBottom:D.spacing(2),fontWeight:D.typography.fontWeightMedium}),isSection:(0,t.css)({color:D.colors.text.primary,fontSize:D.typography.h5.fontSize,marginTop:D.spacing(2),fontWeight:D.typography.fontWeightMedium}),noRootMargin:(0,t.css)({marginBottom:0})});var O=e(9085),L=e.n(O),B=e(31403);const w=({className:D,isExpanded:Y,onClick:j})=>{const K=(0,s.l4)(),z=R(K);return n.createElement(B.zx,{title:"Toggle section navigation","aria-label":Y?"Close section navigation":"Open section navigation",icon:"arrow-to-right",className:L()(D,z.icon,{[z.iconExpanded]:Y}),variant:"secondary",fill:"text",size:"md",onClick:j})};w.displayName="SectionNavToggle";const R=D=>({icon:(0,t.css)({color:D.colors.text.secondary,marginRight:0,zIndex:1}),iconExpanded:(0,t.css)({rotate:"180deg"})});function A({model:D}){const Y=(0,s.wW)(I),{isExpanded:j,onToggleSectionNav:K}=U();return Boolean(D.main?.children?.length)?n.createElement("div",{className:Y.navContainer},n.createElement("nav",{className:(0,t.cx)(Y.nav,{[Y.navExpanded]:j})},n.createElement(r.$,{showScrollIndicators:!0},n.createElement("div",{className:Y.items,role:"tablist"},n.createElement(M,{item:D.main,isSectionRoot:!0})))),n.createElement(w,{className:(0,t.cx)(Y.collapseIcon,{[Y.collapseIconExpanded]:j}),isExpanded:Boolean(j),onClick:K})):null}function U(){const D=(0,s.l4)(),Y=window.matchMedia(`(max-width: ${D.breakpoints.values.lg}px)`).matches,[j,K]=(0,E.Z)("grafana.sectionNav.expanded",!Y),[z,Z]=(0,n.useState)(!Y&&j);return(0,n.useEffect)(()=>{const J=window.matchMedia(`(max-width: ${D.breakpoints.values.lg}px)`),oe=Ee=>Z(Ee.matches?!1:j);return J.addEventListener("change",oe),()=>J.removeEventListener("change",oe)},[j,D.breakpoints.values.lg]),{isExpanded:z,onToggleSectionNav:()=>{K(!z),Z(!z)}}}const I=D=>({navContainer:(0,t.css)({display:"flex",flexDirection:"column",[D.breakpoints.up("md")]:{flexDirection:"row"}}),nav:(0,t.css)({display:"flex",flexDirection:"column",background:D.colors.background.canvas,flexShrink:0,transition:D.transitions.create(["width","max-height"]),maxHeight:0,visibility:"hidden",[D.breakpoints.up("md")]:{width:0,maxHeight:"unset"}}),navExpanded:(0,t.css)({maxHeight:"50vh",visibility:"visible",[D.breakpoints.up("md")]:{width:"250px",maxHeight:"unset"}}),items:(0,t.css)({display:"flex",flexDirection:"column",padding:D.spacing(2,1,2,2),minWidth:"250px",[D.breakpoints.up("md")]:{padding:D.spacing(4.5,1,2,2)}}),collapseIcon:(0,t.css)({alignSelf:"center",margin:D.spacing(1,0),position:"relative",top:D.spacing(0),transform:"rotate(90deg)",transition:D.transitions.create("opacity"),[D.breakpoints.up("md")]:{alignSelf:"flex-start",left:0,margin:D.spacing(0,0,0,1),top:D.spacing(2),transform:"none"},"div:hover > &, &:focus":{opacity:1}}),collapseIconExpanded:(0,t.css)({[D.breakpoints.up("md")]:{opacity:0}})}),N=({navId:D,navModel:Y,pageNav:j,renderTitle:K,actions:z,subTitle:Z,children:ae,className:J,info:oe,layout:Ee=c.Qz.Standard,toolbar:me,scrollTop:re,scrollRef:le,...pe})=>{const ee=(0,s.wW)(F),se=(0,o.P)(D,Y),{chrome:Q}=(0,g.p)();(0,l.T)(se,j);const G=j??se?.node;return(0,n.useEffect)(()=>{se&&Q.update({sectionNav:se.node,pageNav:j})},[se,j,Q]),n.createElement("div",{className:(0,t.cx)(ee.wrapper,J),...pe},Ee===c.Qz.Standard&&n.createElement("div",{className:ee.panes},se&&n.createElement(A,{model:se}),n.createElement("div",{className:ee.pageContainer},n.createElement(r.$,{autoHeightMin:"100%",scrollTop:re,scrollRefCallback:le},n.createElement("div",{className:ee.pageInner},G&&n.createElement(p,{actions:z,navItem:G,renderTitle:K,info:oe,subTitle:Z}),j&&j.children&&n.createElement(u,{navItem:j}),n.createElement("div",{className:ee.pageContent},ae)),n.createElement(f.$_,null)))),Ee===c.Qz.Canvas&&n.createElement(r.$,{autoHeightMin:"100%",scrollTop:re,scrollRefCallback:le},n.createElement("div",{className:ee.canvasContent},me,ae)),Ee===c.Qz.Custom&&n.createElement(n.Fragment,null,me,ae))};N.Contents=m,N.OldNavOnly=function(){return null};const F=D=>{const Y=D.isDark?"0 0.6px 1.5px -1px rgb(0 0 0),0 2px 4px -1px rgb(0 0 0 / 40%),0 5px 10px -1px rgb(0 0 0 / 23%)":"0 0.6px 1.5px -1px rgb(0 0 0 / 8%),0 2px 4px rgb(0 0 0 / 6%),0 5px 10px -1px rgb(0 0 0 / 5%)";return{wrapper:(0,t.css)({label:"page-wrapper",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0}),panes:(0,t.css)({label:"page-panes",display:"flex",height:"100%",width:"100%",flexGrow:1,minHeight:0,flexDirection:"column",[D.breakpoints.up("md")]:{flexDirection:"row"}}),pageContainer:(0,t.css)({label:"page-container",flexGrow:1}),pageContent:(0,t.css)({label:"page-content",flexGrow:1}),pageInner:(0,t.css)({label:"page-inner",padding:D.spacing(2),boxShadow:Y,background:D.colors.background.primary,display:"flex",flexDirection:"column",flexGrow:1,margin:D.spacing(0,0,0,0),[D.breakpoints.up("sm")]:{margin:D.spacing(0,1,1,1)},[D.breakpoints.up("md")]:{margin:D.spacing(2,2,2,1),padding:D.spacing(3)}}),canvasContent:(0,t.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:D.spacing(2),flexBasis:"100%",flexGrow:1})}}},20787:(H,T,e)=>{"use strict";e.d(T,{Z:()=>r});var t=e(68404),n=e(68183),c=e(46967),s=e(8180);const r=t.forwardRef(({autoComplete:g,autoFocus:f,id:o,passwordHint:l,...a},m)=>{const[d,p]=(0,t.useState)(!1);return t.createElement(c.I,{id:o,autoFocus:f,autoComplete:g,...a,type:d?"text":"password",placeholder:l,"aria-label":n.wl.pages.Login.password,ref:m,suffix:t.createElement(s.h,{name:d?"eye-slash":"eye",type:"button","aria-controls":o,role:"switch","aria-checked":d,"aria-label":"Show password",onClick:()=>{p(!d)}})})});r.displayName="PasswordField"},6645:(H,T,e)=>{"use strict";e.d(T,{Z:()=>y});var t=e(52423),n=e(68404),c=e(94270),s=e(52081),r=e(53217),g=e(31403),f=e(7804),o=e(94080),l=e(28038),a=e(47694),m=e(73757),d=e(50796);class p extends n.Component{constructor(i){super(i),this.onTypeChanged=u=>{const P=u.value;switch(P){case m.pC.User:case m.pC.Team:this.setState({type:P,userId:0,teamId:0,role:void 0});break;case m.pC.Editor:this.setState({type:P,userId:0,teamId:0,role:m.B5.Editor});break;case m.pC.Viewer:this.setState({type:P,userId:0,teamId:0,role:m.B5.Viewer});break}},this.onUserSelected=u=>{this.setState({userId:u&&!Array.isArray(u)?u.id:0})},this.onTeamSelected=u=>{this.setState({teamId:u.value?.id&&!Array.isArray(u.value)?u.value.id:0})},this.onPermissionChanged=u=>{this.setState({permission:u.value})},this.onSubmit=async()=>{await this.props.onAddPermission(this.state),this.setState(this.getCleanState())},this.state=this.getCleanState()}getCleanState(){return{userId:0,teamId:0,role:void 0,type:m.pC.Team,permission:m.V5.View}}isValid(){switch(this.state.type){case m.pC.Team:return this.state.teamId>0;case m.pC.User:return this.state.userId>0}return!0}render(){const{onCancel:i}=this.props,u=this.state,P="min-width-20",E=this.isValid(),C=h(a.ZP.theme2);return n.createElement("div",{className:"cta-form"},n.createElement(d.P,{onClick:i}),n.createElement("h5",null,"Add Permission For"),n.createElement(c.l,{maxWidth:"none",onSubmit:this.onSubmit},()=>n.createElement(s.Lh,null,n.createElement(r.Ph,{"aria-label":"Role to add new permission to",isSearchable:!1,value:this.state.type,options:m.BL,onChange:this.onTypeChanged}),u.type===m.pC.User?n.createElement(l.f,{onSelected:this.onUserSelected,className:P}):null,u.type===m.pC.Team?n.createElement(o.c,{onSelected:this.onTeamSelected,className:P}):null,n.createElement("span",{className:C.label},"Can"),n.createElement(r.Ph,{"aria-label":"Permission level",isSearchable:!1,value:this.state.permission,options:m.vT,onChange:this.onPermissionChanged,width:25}),n.createElement(g.zx,{"data-save-permission":!0,type:"submit",disabled:!E},"Save"))))}}p.defaultProps={showPermissionLevels:!0};const h=(0,f.B)(v=>({label:t.css`
    color: ${v.colors.primary.text};
    font-weight: bold;
  `})),y=p},92103:(H,T,e)=>{"use strict";e.d(T,{Z:()=>d});var t=e(68404),n=e(39904),c=e(53217),s=e(31403),r=e(73757);class g extends t.Component{render(){const{item:h}=this.props,y=r.vT.find(v=>v.value===h.permission);return t.createElement("tr",{className:"gf-form-disabled"},t.createElement("td",{style:{width:"1%"}},t.createElement(n.J,{size:"lg",name:"shield"})),t.createElement("td",{style:{width:"90%"}},h.name,t.createElement("span",{className:"filter-table__weak-italic"}," (Role)")),t.createElement("td",null),t.createElement("td",{className:"query-keyword"},"Can"),t.createElement("td",null,t.createElement("div",{className:"gf-form"},t.createElement(c.Ph,{"aria-label":`Permission level for "${h.name}"`,options:r.vT,onChange:()=>{},disabled:!0,value:y}))),t.createElement("td",null,t.createElement(s.zx,{"aria-label":`Remove permission for "${h.name}"`,size:"sm",icon:"lock",disabled:!0})))}}const f=p=>p?"gf-form-disabled":"";function o({item:p}){return p.userAvatarUrl?t.createElement("img",{className:"filter-table__avatar",src:p.userAvatarUrl,alt:"User avatar"}):p.teamAvatarUrl?t.createElement("img",{className:"filter-table__avatar",src:p.teamAvatarUrl,alt:"Team avatar"}):p.role==="Editor"?t.createElement(n.J,{size:"lg",name:"edit"}):t.createElement(n.J,{size:"lg",name:"eye"})}function l({item:p}){return p.userId?t.createElement("span",{className:"filter-table__weak-italic"},"(User)"):p.teamId?t.createElement("span",{className:"filter-table__weak-italic"},"(Team)"):t.createElement("span",{className:"filter-table__weak-italic"},"(Role)")}class a extends t.PureComponent{constructor(){super(...arguments),this.onPermissionChanged=h=>{this.props.onPermissionChanged(this.props.item,h.value)},this.onRemoveItem=()=>{this.props.onRemoveItem(this.props.item)}}render(){const{item:h,folderInfo:y}=this.props,v=h.dashboardId===-1&&!h.inherited,i=r.vT.find(u=>u.value===h.permission);return t.createElement("tr",{className:f(Boolean(h?.inherited))},t.createElement("td",{style:{width:"1%"}},t.createElement(o,{item:h})),t.createElement("td",{style:{width:"90%"}},h.name," ",t.createElement(l,{item:h})),t.createElement("td",null,h.inherited&&y&&t.createElement("em",{className:"muted no-wrap"},"Inherited from folder"," ",y.canViewFolderPermissions?t.createElement("a",{className:"text-link",href:`${y.url}/permissions`},y.title):y.title),v&&t.createElement("em",{className:"muted no-wrap"},"Default Permission")),t.createElement("td",{className:"query-keyword"},"Can"),t.createElement("td",null,t.createElement(c.Ph,{"aria-label":`Permission level for "${h.name}"`,isSearchable:!1,options:r.vT,onChange:this.onPermissionChanged,disabled:h.inherited,value:i,width:25})),t.createElement("td",null,h.inherited?t.createElement(s.zx,{"aria-label":`Remove permission for "${h.name}" (Disabled)`,size:"sm",disabled:!0,icon:"times"}):t.createElement(s.zx,{"aria-label":`Remove permission for "${h.name}"`,size:"sm",variant:"destructive",icon:"times",onClick:this.onRemoveItem})))}}class m extends t.PureComponent{render(){const{items:h,onRemoveItem:y,onPermissionChanged:v,isFetching:i,folderInfo:u}=this.props;return t.createElement("table",{className:"filter-table gf-form-group"},t.createElement("tbody",null,t.createElement(g,{key:0,item:{name:"Admin",permission:4}}),h.map((P,E)=>t.createElement(a,{key:E+1,item:P,onRemoveItem:y,onPermissionChanged:v,folderInfo:u})),i===!0&&h.length<1?t.createElement("tr",null,t.createElement("td",{colSpan:4},t.createElement("em",null,"Loading permissions..."))):null,i===!1&&h.length<1?t.createElement("tr",null,t.createElement("td",{colSpan:4},t.createElement("em",null,"No permissions are set. Will only be accessible by admins."))):null))}}const d=m},54630:(H,T,e)=>{"use strict";e.d(T,{Z:()=>c});var t=e(68404);const c=()=>t.createElement("div",null,t.createElement("h5",null,"What are Permissions?"),t.createElement("p",null,"An Access Control List (ACL) model is used to limit access to Dashboard Folders. A user or a Team can be assigned permissions for a folder or for a single dashboard."))},19117:(H,T,e)=>{"use strict";e.d(T,{h:()=>r});var t=e(52423),n=e(68404),c=e(41959),s=e(72648);const r=n.memo(n.forwardRef(({className:o,children:l,markdown:a,onRemove:m,...d},p)=>{const h=(0,s.wW)(f);return n.createElement("div",{className:(0,t.cx)(h.wrapper,o),...d,ref:p},a&&g(a),l)}));function g(o){const l=(0,c.a)(o);return n.createElement("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:l}})}r.displayName="OperationRowHelp";const f=o=>{const l=o.shape.borderRadius();return{wrapper:t.css`
      padding: ${o.spacing(2)};
      border: 2px solid ${o.colors.background.secondary};
      border-top: none;
      border-radius: 0 0 ${l} ${l};
      position: relative;
      top: -4px;
    `}}},1029:(H,T,e)=>{"use strict";e.d(T,{y:()=>g});var t=e(52423),n=e(68404),c=e(68183),s=e(72648),r=e(8180);const g=({icon:o,active:l,disabled:a,title:m,onClick:d})=>{const p=(0,s.wW)(f);return n.createElement("div",{className:(0,t.cx)(p.icon,l&&p.active)},n.createElement(r.h,{name:o,tooltip:m,className:p.icon,disabled:!!a,onClick:d,type:"button","aria-label":c.wl.components.QueryEditorRow.actionButton(m)}))};g.displayName="QueryOperationAction";const f=o=>({icon:t.css`
      display: flex;
      position: relative;
      color: ${o.colors.text.secondary};
    `,active:t.css`
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: -1px;
        right: 2px;
        height: 3px;
        border-radius: 2px;
        bottom: -8px;
        background-image: ${o.colors.gradients.brandHorizontal} !important;
      }
    `})},67254:(H,T,e)=>{"use strict";e.d(T,{t:()=>d});var t=e(52423),n=e(68404),c=e(19677),s=e(73802),r=e(41818),g=e(72648),f=e(61970),o=e(8180),l=e(39904);const a=({actionsElement:h,disabled:y,draggable:v,dragHandleProps:i,headerElement:u,isContentVisible:P,onRowToggle:E,reportDragMousePosition:C,titleElement:b,id:S})=>{const M=(0,g.wW)(m);return n.createElement("div",{className:M.header},n.createElement("div",{className:M.column},n.createElement(o.h,{name:P?"angle-down":"angle-right",title:"toggle collapse and expand","aria-label":"toggle collapse and expand query row",className:M.collapseIcon,onClick:E,type:"button","aria-expanded":P,"aria-controls":S}),b&&n.createElement("div",{className:M.titleWrapper,onClick:E,"aria-label":"Query operation row title"},n.createElement("div",{className:(0,t.cx)(M.title,y&&M.disabled)},b)),u),n.createElement("div",{className:M.column},h,v&&n.createElement(l.J,{title:"Drag and drop to reorder",name:"draggabledots",size:"lg",className:M.dragIcon,onMouseMove:C,...i})))},m=h=>({header:t.css`
    label: Header;
    padding: ${h.spacing(.5,.5)};
    border-radius: ${h.shape.borderRadius(1)};
    background: ${h.colors.background.secondary};
    min-height: ${h.spacing(4)};
    display: grid;
    grid-template-columns: minmax(100px, max-content) min-content;
    align-items: center;
    justify-content: space-between;
    white-space: nowrap;

    &:focus {
      outline: none;
    }
  `,column:t.css`
    label: Column;
    display: flex;
    align-items: center;
  `,dragIcon:t.css`
    cursor: grab;
    color: ${h.colors.text.disabled};
    margin: ${h.spacing(0,.5)};
    &:hover {
      color: ${h.colors.text};
    }
  `,collapseIcon:t.css`
    margin-left: ${h.spacing(.5)};
    color: ${h.colors.text.disabled};
    }
  `,titleWrapper:t.css`
    display: flex;
    align-items: center;
    flex-grow: 1;
    cursor: pointer;
    overflow: hidden;
    margin-right: ${h.spacing(.5)};
  `,title:t.css`
    font-weight: ${h.typography.fontWeightBold};
    color: ${h.colors.text.link};
    margin-left: ${h.spacing(.5)};
    overflow: hidden;
    text-overflow: ellipsis;
  `,disabled:t.css`
    color: ${h.colors.text.disabled};
  `});a.displayName="QueryOperationRowHeader";function d({children:h,actions:y,title:v,headerElement:i,onClose:u,onOpen:P,isOpen:E,disabled:C,draggable:b,index:S,id:M}){const[x,O]=(0,n.useState)(E!==void 0?E:!0),L=(0,g.wW)(p),B=(0,n.useCallback)(()=>{O(!x)},[x,O]),w=(0,n.useCallback)(N=>{if(N.defaultPrevented){const F=N.currentTarget.getBoundingClientRect(),D=N.clientX-F.left,Y=N.clientY-F.top;(0,r.ff)("query_row_reorder_drag_position",{x:D/F.width,y:Y/F.height,width:F.width,height:F.height})}},[]);(0,s.Z)(()=>{x?P&&P():u&&u()},[x]);const R={isOpen:x,onOpen:()=>{O(!0)},onClose:()=>{O(!1)}},A=v&&f.renderOrCallToRender(v,R),U=y&&f.renderOrCallToRender(y,R),I=i&&f.renderOrCallToRender(i,R);return b?n.createElement(c._l,{draggableId:M,index:S},N=>n.createElement(n.Fragment,null,n.createElement("div",{ref:N.innerRef,className:L.wrapper,...N.draggableProps},n.createElement("div",null,n.createElement(a,{id:M,actionsElement:U,disabled:C,draggable:!0,dragHandleProps:N.dragHandleProps,headerElement:I,isContentVisible:x,onRowToggle:B,reportDragMousePosition:w,titleElement:A})),x&&n.createElement("div",{className:L.content},h)))):n.createElement("div",{className:L.wrapper},n.createElement(a,{id:M,actionsElement:U,disabled:C,draggable:!1,headerElement:I,isContentVisible:x,onRowToggle:B,reportDragMousePosition:w,titleElement:A}),x&&n.createElement("div",{className:L.content},h))}const p=h=>({wrapper:t.css`
      margin-bottom: ${h.spacing(2)};
    `,content:t.css`
      margin-top: ${h.spacing(.5)};
      margin-left: ${h.spacing(3)};
    `});d.displayName="QueryOperationRow"},53674:(H,T,e)=>{"use strict";e.d(T,{I:()=>pe});var t=e(68404),n=e(52081),c=e(67487),s=e(94437),r=e(52423),g=e(72648),f=e(39904),o=e(61860),l=e(46967),a=e(73267),m=e(85419),d=e(27501);const p=(0,t.forwardRef)(({children:ee,iconName:se},Q)=>{const G=(0,g.wW)(h);return t.createElement("div",{className:G.container,ref:Q},se&&t.createElement(f.J,{name:se,size:"xs"}),ee)});p.displayName="ValueContainer";const h=ee=>{const{prefix:se}=(0,l.H)({theme:ee}),{multiValueContainer:Q}=(0,d.D)(ee);return{container:(0,r.cx)(se,Q,r.css`
        position: relative;
        padding: ${ee.spacing(.5,1,.5,1)};

        svg {
          margin-right: ${ee.spacing(.5)};
        }
      `)}},y=300,v=360,i=260,u=ee=>ee.stopPropagation(),P=({appliedRoles:ee,basicRole:se,disabled:Q,isFocused:G,query:q,showBasicRole:X,onOpen:de,onClose:Be,onQueryChange:ke,...He})=>{const ue=(0,g.wW)(we=>C(we,!1,!!G,!!Q,!1)),Oe=(0,t.useRef)(null);(0,t.useEffect)(()=>{G&&Oe.current?.focus()});const Fe=we=>{const Re=we.target?.value;ke(Re)},Ie=ee.length;return G?t.createElement("div",{className:ue.wrapper},X&&t.createElement(p,null,se),ee.map(we=>t.createElement(p,{key:we.uid},we.displayName)),!Q&&t.createElement("input",{...He,className:ue.input,ref:Oe,onMouseDown:u,onChange:Fe,"data-testid":"role-picker-input",placeholder:G?"Select role":"",value:q}),t.createElement("div",{className:ue.suffix},t.createElement(f.J,{name:"angle-up",className:ue.dropdownIndicator,onMouseDown:Be}))):t.createElement("div",{className:(0,r.cx)(ue.wrapper,ue.selectedRoles),onMouseDown:de},X&&t.createElement(p,null,se),t.createElement(E,{appliedRoles:ee,numberOfRoles:Ie,showBuiltInRole:X}))};P.displayName="RolePickerInput";const E=({showBuiltInRole:ee,numberOfRoles:se,appliedRoles:Q})=>{const G=(0,g.wW)(q=>b(q));return t.createElement(t.Fragment,null,se?t.createElement(o.u,{content:t.createElement("div",{className:G.tooltip},Q?.map(q=>t.createElement("p",{key:q.uid},q.displayName)))},t.createElement(p,null,`${ee?"+":""}${se} role${se>1?"s":""}`)):!ee&&t.createElement(p,null,"No roles assigned"))},C=(ee,se,Q,G,q)=>{const X=(0,l.H)({theme:ee,invalid:se});return{wrapper:(0,r.cx)(X.wrapper,(0,a.RK)(ee,se),Q&&r.css`
          ${m.focusCss(ee.v1)}
        `,G&&X.inputDisabled,r.css`
        min-width: ${v}px;
        min-height: 32px;
        height: auto;
        flex-direction: row;
        padding-right: 24px;
        max-width: 100%;
        align-items: center;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-start;
        position: relative;
        box-sizing: border-box;
        cursor: default;
      `,q&&r.css`
          padding-left: 0;
        `),input:(0,r.cx)((0,a.RK)(ee,se),r.css`
        max-width: 120px;
        border: none;
        cursor: ${Q?"default":"pointer"};
      `),suffix:X.suffix,dropdownIndicator:r.css`
      cursor: pointer;
    `,selectedRoles:r.css`
      display: flex;
      align-items: center;
      cursor: ${G?"not-allowed":"pointer"};
    `,tooltip:r.css`
      p {
        margin-bottom: ${ee.spacing(.5)};
      }
    `}},b=ee=>({tooltip:r.css`
    p {
      margin-bottom: ${ee.spacing(.5)};
    }
  `});var S=e(68226),M=e(2594),x=e(31403),O=e(81168),L=e(58255),B=e(85511);const w=ee=>({menuWrapper:r.css`
      display: flex;
      max-height: 650px;
      position: absolute;
      z-index: ${ee.zIndex.dropdown};
      overflow: hidden;
      min-width: auto;
    `,menu:r.css`
      min-width: ${i}px;

      & > div {
        padding-top: ${ee.spacing(1)};
      }
    `,menuLeft:r.css`
      right: 0;
      flex-direction: row-reverse;
    `,subMenu:r.css`
      height: 100%;
      min-width: ${i}px;
      display: flex;
      flex-direction: column;
      border-left: 1px solid ${ee.components.input.borderColor};

      & > div {
        padding-top: ${ee.spacing(1)};
      }
    `,subMenuLeft:r.css`
      border-right: 1px solid ${ee.components.input.borderColor};
      border-left: unset;
    `,groupHeader:r.css`
      padding: ${ee.spacing(0,4.5)};
      display: flex;
      align-items: center;
      color: ${ee.colors.text.primary};
      font-weight: ${ee.typography.fontWeightBold};
    `,container:r.css`
      padding: ${ee.spacing(1)};
      border: 1px ${ee.colors.border.weak} solid;
      border-radius: ${ee.shape.borderRadius(1)};
      background-color: ${ee.colors.background.primary};
      z-index: ${ee.zIndex.modal};
    `,menuSection:r.css`
      margin-bottom: ${ee.spacing(2)};
    `,menuOptionCheckbox:r.css`
      display: flex;
      margin: ${ee.spacing(0,1,0,.25)};
    `,menuButtonRow:r.css`
      background-color: ${ee.colors.background.primary};
      padding: ${ee.spacing(1)};
    `,menuOptionBody:r.css`
      font-weight: ${ee.typography.fontWeightRegular};
      padding: ${ee.spacing(0,1.5,0,0)};
    `,menuOptionDisabled:r.css`
      color: ${ee.colors.text.disabled};
      cursor: not-allowed;
    `,menuOptionExpand:r.css`
      position: absolute;
      right: ${ee.spacing(1.25)};
      color: ${ee.colors.text.disabled};

      &:after {
        content: '>';
      }
    `,menuOptionInfoSign:r.css`
      color: ${ee.colors.text.disabled};
    `,basicRoleSelector:r.css`
      margin: ${ee.spacing(1,1.25,1,1)};
    `,subMenuPortal:r.css`
      height: 100%;
      > div {
        height: 100%;
      }
    `,subMenuButtonRow:r.css`
      background-color: ${ee.colors.background.primary};
      padding: ${ee.spacing(1)};
    `,checkboxPartiallyChecked:r.css`
      input {
        &:checked + span {
          &:after {
            border-width: 0 3px 0px 0;
            transform: rotate(90deg);
          }
        }
      }
    `}),R=(0,t.memo)(t.forwardRef(({name:ee,value:se,isFocused:Q,isSelected:G,partiallySelected:q,disabled:X,onChange:de,onClick:Be,onOpenSubMenu:ke,onCloseSubMenu:He,children:ue,root:Oe},Fe)=>{const Ie=(0,g.l4)(),we=(0,d.D)(Ie),Re=(0,g.wW)(w),_e=(0,r.cx)(we.option,Q&&we.optionFocused,X&&Re.menuOptionDisabled),et=at=>{X||se&&de(se)},qe=at=>{Be&&Be(se)},Je=()=>{ke&&ke(se)},lt=()=>{He&&He()};return t.createElement("div",{onMouseEnter:Je,onMouseLeave:lt},t.createElement("div",{ref:Fe,className:_e,"aria-label":"Role picker option",onClick:qe},t.createElement(L.X,{value:G,className:(0,r.cx)(Re.menuOptionCheckbox,{[Re.checkboxPartiallyChecked]:q}),onChange:et,disabled:X}),t.createElement("div",{className:(0,r.cx)(we.optionBody,Re.menuOptionBody)},t.createElement("span",null,ee),t.createElement("span",{className:Re.menuOptionExpand})),Oe&&ue&&t.createElement(B.h_,{className:Re.subMenuPortal,root:Oe},ue)))}));R.displayName="RoleMenuGroupOption";const A=t.forwardRef(({data:ee,isFocused:se,isSelected:Q,disabled:G,onChange:q,hideDescription:X},de)=>{const Be=(0,g.l4)(),ke=(0,d.D)(Be),He=(0,g.wW)(w),ue=(0,r.cx)(ke.option,se&&ke.optionFocused,G&&He.menuOptionDisabled),Oe=Fe=>{G||(Fe.preventDefault(),Fe.stopPropagation(),q(ee))};return t.createElement("div",{ref:de,className:ue,"aria-label":"Role picker option",onClick:Oe},t.createElement(L.X,{value:Q,className:He.menuOptionCheckbox,onChange:Oe,disabled:G}),t.createElement("div",{className:(0,r.cx)(ke.optionBody,He.menuOptionBody)},t.createElement("span",null,ee.displayName||ee.name),!X&&ee.description&&t.createElement("div",{className:ke.optionDescription},ee.description)),ee.description&&t.createElement(o.u,{content:ee.description},t.createElement(f.J,{name:"info-circle",className:He.menuOptionInfoSign})))});A.displayName="RoleMenuOption";const U=ee=>ee.delegatable!==void 0&&!ee.delegatable,I=({options:ee,selectedOptions:se,disabledOptions:Q,onSelect:G,onClear:q,showOnLeft:X})=>{const de=(0,g.l4)(),Be=(0,d.D)(de),ke=(0,g.wW)(w),He=async()=>{q&&q()};return t.createElement("div",{className:(0,r.cx)(ke.subMenu,{[ke.subMenuLeft]:X}),"aria-label":"Role picker submenu"},t.createElement(S.$,{autoHide:!1,autoHeightMax:`${y}px`,hideHorizontalTrack:!0},t.createElement("div",{className:Be.optionBody},ee.map((ue,Oe)=>t.createElement(A,{data:ue,key:Oe,isSelected:!!(ue.uid&&(se.find(Fe=>Fe.uid===ue.uid)||Q?.find(Fe=>Fe.uid===ue.uid))),disabled:!!(ue.uid&&Q?.find(Fe=>Fe.uid===ue.uid))||U(ue),onChange:G,hideDescription:!0})))),t.createElement("div",{className:ke.subMenuButtonRow},t.createElement(n.Lh,{justify:"flex-end"},t.createElement(x.zx,{size:"sm",fill:"text",onClick:He},"Clear"))))},N=t.forwardRef(({roles:ee,renderedName:se,showGroups:Q,optionGroups:G,onGroupChange:q,groupSelected:X,groupPartiallySelected:de,subMenuNode:Be,selectedOptions:ke,onRoleChange:He,onClearSubMenu:ue,showOnLeftSubMenu:Oe},Fe)=>{const[Ie,we]=(0,t.useState)(!1),[Re,_e]=(0,t.useState)(""),et=(0,g.l4)(),qe=(0,d.D)(et),Je=(0,g.wW)(w),lt=(0,t.useCallback)(Xe=>{_e(Xe),we(!0)},[]),at=(0,t.useCallback)(()=>{we(!1),_e("")},[]);return t.createElement("div",null,ee.length>0&&t.createElement("div",{className:Je.menuSection},t.createElement("div",{className:Je.groupHeader},se),t.createElement("div",{className:qe.optionBody}),Q&&G?.length?G.map(Xe=>t.createElement(R,{key:Xe.value,name:Xe.name,value:Xe.value,isSelected:X(Xe.value)||de(Xe.value),partiallySelected:de(Xe.value),disabled:Xe.options?.every(U),onChange:q,onOpenSubMenu:lt,onCloseSubMenu:at,root:Be,isFocused:Ie&&Re===Xe.value},Ie&&Re===Xe.value&&t.createElement(I,{options:Xe.options,selectedOptions:ke,onSelect:He,onClear:()=>ue(Re),showOnLeft:Oe}))):ee.map(Xe=>t.createElement(A,{data:Xe,key:Xe.uid,isSelected:!!(Xe.uid&&ke.find(gt=>gt.uid===Xe.uid)),disabled:U(Xe),onChange:He,hideDescription:!0}))))});N.displayName="RoleMenuGroupsSection";var F=(ee=>(ee.fixed="fixed",ee.custom="custom",ee.plugin="plugin",ee))(F||{});const Y=Object.values(O.OrgRole).map(ee=>({label:ee,value:ee})),j={ldap:"LDAP",current:"Current org"},K=({basicRole:ee,options:se,appliedRoles:Q,showGroups:G,basicRoleDisabled:q,showBasicRole:X,onSelect:de,onBasicRoleSelect:Be,onUpdate:ke,updateDisabled:He,offset:ue,apply:Oe})=>{const[Fe,Ie]=(0,t.useState)(Q),[we,Re]=(0,t.useState)(ee),[_e,et]=(0,t.useState)({}),qe=(0,t.useRef)(null),Je=(0,g.l4)(),lt=(0,d.D)(Je),at=(0,g.wW)(w);(0,t.useEffect)(()=>{de(Fe)},[Fe,de]),(0,t.useEffect)(()=>{Be&&we&&Be(we)},[we,Be]),(0,t.useEffect)(()=>{const ge=se.filter(z).sort(re),Me=se.filter(Z).sort(re),ye=se.filter(ae).sort(re),fe={fixed:J(Me).sort((he,De)=>he.name.localeCompare(De.name)),custom:J(ge).sort((he,De)=>he.name.localeCompare(De.name)),plugin:J(ye).sort((he,De)=>he.name.localeCompare(De.name))};et({fixed:{groupType:"fixed",optionGroup:fe.fixed,renderedName:"Fixed roles",roles:Me},custom:{groupType:"custom",optionGroup:fe.custom,renderedName:"Custom roles",roles:ge},plugin:{groupType:"plugin",optionGroup:fe.plugin,renderedName:"Plugin roles",roles:ye}})},[se]);const Xe=ge=>{const Me=[];for(const ye of Fe)oe(ye)===ge&&Me.push(ye);return Me},gt=(ge,Me)=>{const ye=Xe(Me),fe=_e[ge]?.optionGroup.find(he=>he.value===Me);return ye.length>0&&ye.length>=fe.options.length},ot=(ge,Me)=>{const ye=Xe(Me),fe=_e[ge]?.optionGroup.find(he=>he.value===Me);return ye.length>0&&ye.length<fe.options.length},Ye=ge=>{Fe.find(Me=>Me.uid===ge.uid)?Ie(Fe.filter(Me=>Me.uid!==ge.uid)):Ie([...Fe,ge])},mt=(ge,Me)=>{const ye=_e[ge]?.optionGroup.find(fe=>fe.value===Me);if(ye)if(gt(ge,Me)||ot(ge,Me))Ie(Fe.filter(fe=>!ye.options.find(he=>fe.uid===he.uid)));else{const fe=ye.options.filter(De=>De.delegatable),he=Fe.filter(De=>!ye.options.find(Ae=>De.uid===Ae.uid));Ie([...he,...fe])}},ce=ge=>{Re(ge)},be=async()=>{Ie([])},Te=ge=>{const Me=Fe.filter(ye=>oe(ye)!==ge);Ie(Me)},Ke=()=>{ke(Fe,we)};return t.createElement("div",{className:(0,r.cx)(lt.menu,at.menuWrapper,{[at.menuLeft]:ue.horizontal>0},r.css`
          bottom: ${ue.vertical>0?`${ue.vertical}px`:"unset"};
          top: ${ue.vertical<0?`${Math.abs(ue.vertical)}px`:"unset"};
        `)},t.createElement("div",{className:at.menu,"aria-label":"Role picker menu"},t.createElement(S.$,{autoHide:!1,autoHeightMax:`${y}px`,hideHorizontalTrack:!0,hideVerticalTrack:!0},X&&t.createElement("div",{className:at.menuSection},t.createElement("div",{className:at.groupHeader},"Basic roles"),t.createElement(M.S,{className:at.basicRoleSelector,options:Y,value:we,onChange:ce,fullWidth:!0,disabled:q})),Object.entries(_e).map(([ge,Me])=>t.createElement(N,{key:ge,roles:Me.roles,renderedName:Me.renderedName,showGroups:G,optionGroups:Me.optionGroup,groupSelected:ye=>gt(Me.groupType,ye),groupPartiallySelected:ye=>ot(Me.groupType,ye),onGroupChange:ye=>mt(Me.groupType,ye),subMenuNode:qe?.current,selectedOptions:Fe,onRoleChange:Ye,onClearSubMenu:Te,showOnLeftSubMenu:ue.horizontal>0}))),t.createElement("div",{className:at.menuButtonRow},t.createElement(n.Lh,{justify:"flex-end"},t.createElement(x.zx,{size:"sm",fill:"text",onClick:be,disabled:He},"Clear all"),t.createElement(x.zx,{size:"sm",onClick:Ke,disabled:He},Oe?"Apply":"Update")))),t.createElement("div",{ref:qe}))},z=ee=>!ee.name?.startsWith("fixed:")&&!ee.name.startsWith("plugins:"),Z=ee=>ee.name?.startsWith("fixed:"),ae=ee=>ee.name?.startsWith("plugins:"),J=ee=>{const se={};return ee.forEach(G=>{const q=oe(G),X=Ee(G);se[q]||(se[q]={name:X,roles:[]}),se[q].roles.push(G)}),Object.entries(se).map(([G,q])=>({name:j[G]||le(q.name),value:G,options:q.roles.sort(re)}))},oe=ee=>{const se=me(ee),Q=Ee(ee);return`${se}:${Q}`},Ee=ee=>ee.group||"Other",me=ee=>{const se=ee.name.indexOf(":");return se<0?"unknown":ee.name.substring(0,se)},re=(ee,se)=>ee.name.localeCompare(se.name),le=ee=>ee.slice(0,1).toUpperCase()+ee.slice(1),pe=({basicRole:ee,appliedRoles:se,roleOptions:Q,disabled:G,isLoading:q,basicRoleDisabled:X,showBasicRole:de,onRolesChange:Be,onBasicRoleChange:ke,canUpdateRoles:He=!0,apply:ue=!1,maxWidth:Oe=v})=>{const[Fe,Ie]=(0,t.useState)(!1),[we,Re]=(0,t.useState)(se),[_e,et]=(0,t.useState)(ee),[qe,Je]=(0,t.useState)(""),[lt,at]=(0,t.useState)({vertical:0,horizontal:0}),Xe=(0,t.useRef)(null);(0,t.useEffect)(()=>{et(ee),Re(se)},[se,ee]),(0,t.useEffect)(()=>{const ge=Xe?.current?.getBoundingClientRect();if(!ge||!Fe)return;const{bottom:Me,top:ye,left:fe,right:he,width:De}=ge,Ae=window.innerHeight-Me,Ne=Me-ye+10,Ze=he-fe;let Se=-Ze,Ue=-Ne;Ae<y+20&&(Ue=Ne),window.innerWidth-he<De&&De<2*i&&(Se=Ze),at({horizontal:Se,vertical:Ue})},[Fe,we]);const gt=(0,t.useCallback)(ge=>{G||(ge.preventDefault(),ge.stopPropagation(),Ie(!0))},[Ie,G]),ot=(0,t.useCallback)(()=>{Ie(!1),Je(""),Re(se),et(ee)},[se,ee]),Ye=()=>Fe&&ot(),mt=ge=>{Je(ge||"")},ce=ge=>{Re(ge)},be=ge=>{et(ge)},Te=(ge,Me)=>{ke&&Me&&Me!==ee&&ke(Me),He&&Be(ge),Je(""),Ie(!1)},Ke=()=>{const ge=Q.map(Me=>({...Me,delegatable:He&&Me.delegatable}));return qe&&qe.trim()!==""?ge.filter(Me=>Me.name?.toLowerCase().includes(qe.toLowerCase())):ge};return q?t.createElement(n.Lh,{justify:"center"},t.createElement("span",null,"Loading..."),t.createElement(c.$,{size:16})):t.createElement("div",{"data-testid":"role-picker",style:{position:"relative",maxWidth:Oe},ref:Xe},t.createElement(s.L,{onClick:Ye},t.createElement(P,{basicRole:_e,appliedRoles:we,query:qe,onQueryChange:mt,onOpen:gt,onClose:ot,isFocused:Fe,disabled:G,showBasicRole:de}),Fe&&t.createElement(K,{options:Ke(),basicRole:_e,appliedRoles:se,onBasicRoleSelect:be,onSelect:ce,onUpdate:Te,showGroups:qe.length===0||qe.trim()==="",basicRoleDisabled:X,showBasicRole:de,updateDisabled:X&&!He,apply:ue,offset:lt})))}},66226:(H,T,e)=>{"use strict";e.d(T,{R:()=>f});var t=e(68404),n=e(671),c=e(77582),s=e(81168),r=e(53674),g=e(11630);const f=({basicRole:o,userId:l,orgId:a,onBasicRoleChange:m,roleOptions:d,disabled:p,basicRoleDisabled:h,apply:y=!1,onApplyRoles:v,pendingRoles:i,maxWidth:u})=>{const[{loading:P,value:E=[]},C]=(0,n.Z)(async()=>{try{if(y&&Boolean(i?.length))return i;if(c.Vt.hasPermission(s.AccessControlAction.ActionUserRolesList))return await(0,g.kt)(l,a)}catch{console.error("Error loading options")}return[]},[a,l,i]);(0,t.useEffect)(()=>{a&&C()},[a,C,i]);const b=async M=>{y?v&&v(M,l,a):(await(0,g.hB)(M,l,a),await C())},S=c.Vt.hasPermission(s.AccessControlAction.ActionUserRolesAdd)&&c.Vt.hasPermission(s.AccessControlAction.ActionUserRolesRemove);return t.createElement(r.I,{appliedRoles:E,basicRole:o,onRolesChange:b,onBasicRoleChange:m,roleOptions:d,isLoading:P,disabled:p,basicRoleDisabled:h,showBasicRole:!0,apply:y,canUpdateRoles:S,maxWidth:u})}},11630:(H,T,e)=>{"use strict";e.d(T,{_C:()=>r,hB:()=>s,kt:()=>c,u7:()=>g,ul:()=>n});var t=e(54899);const n=async(f,o)=>{let l="/api/access-control/roles?delegatable=true";f&&(l+=`&targetOrgId=${f}`);const a=await(0,t.i)().get(l);return!a||!a.length?[]:a},c=async(f,o)=>{let l=`/api/access-control/users/${f}/roles`;o&&(l+=`?targetOrgId=${o}`);try{const a=await(0,t.i)().get(l);return!a||!a.length?[]:a}catch(a){return(0,t.kW)(a)&&(a.isHandled=!0),[]}},s=(f,o,l)=>{let a=`/api/access-control/users/${o}/roles`;l&&(a+=`?targetOrgId=${l}`);const m=f.flatMap(d=>d.uid);return(0,t.i)().put(a,{orgId:l,roleUids:m})},r=async(f,o)=>{let l=`/api/access-control/teams/${f}/roles`;o&&(l+=`?targetOrgId=${o}`);try{const a=await(0,t.i)().get(l);return!a||!a.length?[]:a}catch(a){return(0,t.kW)(a)&&(a.isHandled=!0),[]}},g=(f,o,l)=>{let a=`/api/access-control/teams/${o}/roles`;l&&(a+=`?targetOrgId=${l}`);const m=f.flatMap(d=>d.uid);return(0,t.i)().put(a,{orgId:l,roleUids:m})}},16964:(H,T,e)=>{"use strict";e.d(T,{V:()=>r});var t=e(40314),n=e.n(t),c=e(68404),s=e(95148);const r=o=>c.createElement(s.Z,{...o,cacheRequests:!0,preProcessor:f});let g=new Map;function f(o){let l=g.get(o);return l||(l=t.sanitize(o,{USE_PROFILES:{svg:!0,svgFilters:!0}}),g.set(o,l)),l}},99661:(H,T,e)=>{"use strict";e.d(T,{o:()=>l});var t=e(99151),n=e.n(t),c=e(68404),s=e(53217),r=e(29930);const g=(a="General",m)=>`${a}/${m}`;async function f(a=""){return r.ae.search({type:"dash-db",query:a,limit:100}).then(m=>m.map(d=>({value:{uid:d.uid,title:d.title,folderTitle:d.folderTitle,folderUid:d.folderUid},label:g(d?.folderTitle,d.title)})))}const o=n()(f,250,{leading:!0}),l=({value:a,onChange:m,placeholder:d="Select dashboard",noOptionsMessage:p="No dashboards found",...h})=>{const[y,v]=(0,c.useState)();(0,c.useEffect)(()=>{!a||a===y?.value?.uid||(async()=>{const u=await r.ae.getDashboardByUid(a);u.dashboard&&v({value:{uid:u.dashboard.uid,title:u.dashboard.title,folderTitle:u.meta.folderTitle,folderUid:u.meta.folderUid},label:g(u.meta?.folderTitle,u.dashboard.title)})})()},[a]);const i=(0,c.useCallback)(u=>{v(u),m?.(u?.value)},[m,v]);return c.createElement(s.qb,{loadOptions:o,onChange:i,placeholder:d,noOptionsMessage:p,value:y,defaultOptions:!0,...h})}},79658:(H,T,e)=>{"use strict";e.d(T,{Es:()=>u});var t=e(52423),n=e(99151),c=e.n(n),s=e(68404),r=e(22350),g=e(25318),f=e(68183),o=e(72648),l=e(46967),a=e(53217),m=e(97063),d=e(35287),p=e(82002),h=e(50946),y=e(81168);const v="+ Add new",i="-10";function u(b){const{dashboardId:S,allowEmpty:M,onChange:x,filter:O,enableCreateNew:L,inputId:B,onClear:w,enableReset:R,initialFolderUid:A,initialTitle:U="",permissionLevel:I=y.PermissionLevelString.Edit,rootName:N="General",showRoot:F=!0,skipInitialLoad:D,accessControlMetadata:Y,customAdd:j,folderWarning:K}=b,[z,Z]=(0,s.useState)(null),[ae,J]=(0,s.useState)(!1),[oe,Ee]=(0,s.useState)(""),[me,re]=(0,s.useState)(z?.title??""),le=(0,o.wW)(C),pe=typeof w=="function",ee=(0,s.useCallback)(async Oe=>{const Fe=await(0,h.ZL)(Oe,I,Y),we=P(Fe,O);return(p.Vt.hasAccess(y.AccessControlAction.DashboardsWrite,p.Vt.isEditor)||p.Vt.hasAccess(y.AccessControlAction.DashboardsCreate,p.Vt.isEditor))&&N?.toLowerCase().startsWith(Oe.toLowerCase())&&F&&we.unshift({label:N,value:""}),R&&Oe===""&&U!==""&&!we.find(_e=>_e.label===U)&&we.unshift({label:U,value:A}),L&&Boolean(j)?[...we,{value:i,label:v,title:Oe}]:we},[R,A,U,I,N,F,Y,O,L,j]),se=(0,s.useMemo)(()=>c()(ee,300,{leading:!0}),[ee]),Q=async()=>{const Oe={label:U,value:void 0},Fe={label:N,value:""},Ie=await ee("");let we=null;A!=null?we=Ie.find(Re=>Re.value===A)||null:R&&U?we=Oe:A&&(we=Ie.find(Re=>Re.id===A)||null),!we&&!M&&(p.Vt.isEditor?we=Fe:!!S?we=Oe:we=Ie.length>0?Ie[0]:Oe),!ae&&Z(we)};(0,s.useEffect)(()=>{z&&z.value!==A&&!ae&&z.value&&z.label&&x({uid:z.value,title:z.label})},[z,A]),(0,r.Z)(async()=>{if(D){const Oe=await E({getFolder:h.Pb,folderUid:A,folderName:U});Z(Oe)}await Q()},[D,A,U]),(0,s.useEffect)(()=>{z&&z.id===i&&J(!0)},[z]);const G=(0,s.useCallback)((Oe,Fe)=>{if(Oe?.value===i)Z({id:i,title:oe}),re(oe);else{if(Oe||(Oe={value:"",label:N}),Fe.action==="clear"&&w){w();return}Z(Oe),x({uid:Oe.value,title:Oe.label})}},[x,w,N,oe]),q=(0,s.useCallback)(async Oe=>{if(K?.warningCondition(Oe))return!1;const Fe=await(0,h.L6)({title:Oe});let Ie={value:"",label:"Not created"};return Fe.uid?(m.Z.emit(g.SI.alertSuccess,["Folder Created","OK"]),Ie={value:Fe.uid,label:Fe.title},Z(Fe),G(Ie,{action:"create-option",option:Ie})):m.Z.emit(g.SI.alertError,["Folder could not be created"]),Ie},[K,G]),X=(0,s.useCallback)(Oe=>{const Fe=Boolean(j?.disallowValues);if(Oe.key==="Enter"&&Fe&&!j?.isAllowedValue(me)){Oe.preventDefault();return}switch(Oe.key){case"Enter":{q(z?.title),J(!1);break}case"Escape":Z({value:"",label:N}),J(!1)}},[j?.disallowValues,j?.isAllowedValue,me,q,z?.title,N]),de=Oe=>{const Fe=Oe.currentTarget.value;re(Fe),Z({id:void 0,title:Fe})},Be=()=>{Z({value:"",label:N}),J(!1)},ke=(Oe,{action:Fe})=>{Fe==="input-change"&&Ee(Ie=>Oe),Fe==="menu-close"&&Ee(Ie=>Oe)},He=()=>K?.warningCondition(me)?s.createElement(K.warningComponent,null):null,ue=()=>K?.warningCondition(oe)?s.createElement(K.warningComponent,null):null;return ae?s.createElement(s.Fragment,null,s.createElement(He,null),s.createElement("div",{className:le.newFolder},"Press enter to create the new folder."),s.createElement(l.I,{"aria-label":"aria-label",width:30,autoFocus:!0,value:me,onChange:de,onKeyDown:X,placeholder:"Press enter to confirm new folder.",onBlur:Be})):s.createElement("div",{"data-testid":f.wl.components.FolderPicker.containerV2},s.createElement(ue,null),s.createElement(a.gY,{inputId:B,"aria-label":f.wl.components.FolderPicker.input,loadingMessage:(0,d.t)("folder-picker.loading","Loading folders..."),defaultOptions:!0,defaultValue:z,inputValue:oe,onInputChange:ke,value:z,allowCustomValue:L&&!Boolean(j),loadOptions:se,onChange:G,onCreateOption:q,isClearable:pe}))}function P(b,S){return(S?S(b):b).map(x=>({label:x.title,value:x.uid}))}async function E({folderName:b,folderUid:S,getFolder:M}){if(S==null)throw new Error("folderUid is not found.");return b?{label:b,value:S}:{label:(await M(S)).title,value:S}}const C=b=>({newFolder:t.css`
    color: ${b.colors.warning.main};
    font-size: ${b.typography.bodySmall.fontSize};
    padding-bottom: ${b.spacing(1)};
  `})},79979:(H,T,e)=>{"use strict";e.d(T,{P:()=>y});var t=e(68404),n=e(22350),c=e(53217),s=e(39904),r=e(10216),g=e(82897),f=e(82002),o=e(13019),l=e(58379),a=e(1037),m=e(63053),d=e(29930);class p{getRecentDashboards(i){return this.queryForRecentDashboards().then(u=>{u.length>0&&(i.recent={title:"Recent",icon:"clock-nine",score:-1,expanded:l.Z.getBool(`${r.qi}.recent`,!0),items:u,type:a.o.DashFolder})})}queryForRecentDashboards(){return new Promise(i=>{o.Z.getDashboardOpened().then(u=>{const P=(0,g.take)(u,30);if(P.length===0)return i([]);d.ae.search({dashboardUIDs:P}).then(E=>i(P.map(C=>E.find(b=>b.uid===C)).filter(C=>C&&!C.isStarred)))})})}getStarred(i){return f.Vt.isSignedIn?d.ae.search({starred:!0,limit:30}).then(u=>{u.length>0&&(i.starred={title:"Starred",icon:"star",score:-2,expanded:l.Z.getBool(`${r.qi}.starred`,!0),items:u,type:a.o.DashFolder})}):Promise.resolve()}search(i){const u={},P=[],E=(0,g.clone)(i),C=(0,m.L)(i)||E.folderIds?.length>0;return E.folderIds=E.folderIds||[],E.layout===a.A.List?d.ae.search({...E,type:a.o.DashDB}).then(b=>b.length?[{title:"",items:b}]:[]):(C||(E.folderIds=[0]),!i.skipRecent&&!C&&P.push(this.getRecentDashboards(u)),!i.skipStarred&&!C&&P.push(this.getStarred(u)),P.push(d.ae.search(E).then(b=>this.handleSearchResult(u,b))),Promise.all(P).then(()=>(0,g.sortBy)((0,g.values)(u),"score")))}handleSearchResult(i,u){if(u.length===0)return i;for(const P of u)P.type==="dash-folder"&&(i[P.uid]={uid:P.uid,title:P.title,expanded:!1,items:[],url:P.url,icon:"folder",score:(0,g.keys)(i).length,type:P.type});for(const P of u){if(P.type==="dash-folder")continue;let E=i[P.folderUid||0];E||(P.folderUid?E={uid:P.folderUid,title:P.folderTitle,url:P.folderUrl,items:[],icon:"folder-open",score:(0,g.keys)(i).length,type:a.o.DashFolder}:E={uid:"",title:"General",items:[],icon:"folder-open",score:(0,g.keys)(i).length,type:a.o.DashFolder},i[P.folderUid||0]=E),E.expanded=!0,E.items&&E.items.push(P)}}getDashboardTags(){return d.ae.get("/api/dashboards/tags")}getSortOptions(){return d.ae.get("/api/search/sorting")}}const h=()=>new p().getSortOptions().then(({sortOptions:v})=>v.map(i=>({label:i.displayName,value:i.name})));function y({onChange:v,value:i,placeholder:u,filter:P,getSortOptions:E,isClearable:C}){const b=(0,n.Z)(async()=>{const M=await(E??h)();return P?M.filter(x=>P.includes(x.value)):M},[E,P]);if(b.loading)return null;const S=Boolean(i?.includes("desc")||i?.startsWith("-"));return t.createElement(c.Ph,{key:i,width:28,onChange:v,value:b.value?.find(M=>M.value===i)??null,options:b.value,"aria-label":"Sort",placeholder:u??`Sort (Default ${r.yw.label})`,prefix:t.createElement(s.J,{name:S?"sort-amount-down":"sort-amount-up"}),isClearable:C})}},94080:(H,T,e)=>{"use strict";e.d(T,{c:()=>g});var t=e(82897),n=e.n(t),c=e(68404),s=e(54899),r=e(53217);class g extends c.Component{constructor(o){super(o),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,t.debounce)(this.search,300,{leading:!0,trailing:!0})}search(o){return this.setState({isLoading:!0}),(0,t.isNil)(o)&&(o=""),(0,s.i)().get(`/api/teams/search?perpage=100&page=1&query=${o}`).then(l=>{const a=l.teams.map(m=>({value:m,label:m.name,imgUrl:m.avatarUrl}));return this.setState({isLoading:!1}),a})}render(){const{onSelected:o,className:l}=this.props,{isLoading:a}=this.state;return c.createElement("div",{className:"user-picker","data-testid":"teamPicker"},c.createElement(r.qb,{isLoading:a,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:o,className:l,placeholder:"Select a team",noOptionsMessage:"No teams found","aria-label":"Team picker"}))}}},28038:(H,T,e)=>{"use strict";e.d(T,{f:()=>g});var t=e(82897),n=e.n(t),c=e(68404),s=e(54899),r=e(53217);class g extends c.Component{constructor(o){super(o),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,t.debounce)(this.search,300,{leading:!0,trailing:!0})}search(o){return this.setState({isLoading:!0}),(0,t.isNil)(o)&&(o=""),(0,s.i)().get(`/api/org/users/lookup?query=${o}&limit=100`).then(l=>l.map(a=>({id:a.userId,value:a.userId,label:a.login,imgUrl:a.avatarUrl,login:a.login}))).finally(()=>{this.setState({isLoading:!1})})}render(){const{className:o,onSelected:l,inputId:a}=this.props,{isLoading:m}=this.state;return c.createElement("div",{className:"user-picker","data-testid":"userPicker"},c.createElement(r.qb,{isClearable:!0,className:o,inputId:a,isLoading:m,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:l,placeholder:"Start typing to search for user",noOptionsMessage:"No users found","aria-label":"User picker"}))}}},21731:(H,T,e)=>{"use strict";e.d(T,{e:()=>s});var t=e(68404),n=e(3385),c=e(39904);class s extends t.Component{constructor(g){super(g)}render(){const{label:g,removeIcon:f,count:o,onClick:l}=this.props,{color:a}=(0,n.Bx)(g),m={backgroundColor:a},d=o!==0&&t.createElement("span",{className:"tag-count-label"},`(${o})`);return t.createElement("span",{className:"label label-tag",style:m},f&&t.createElement(c.J,{onClick:l,name:"times"}),g," ",d)}}},24357:(H,T,e)=>{"use strict";e.d(T,{D:()=>d});var t=e(52423),n=e(68404),c=e(8887),s=e(29076),r=e(72648),g=e(53217),f=e(39904),o=e(21731);const l=({data:h,className:y,label:v,isFocused:i,innerProps:u})=>{const P=(0,r.wW)(a);return n.createElement("div",{className:(0,t.cx)(P.option,i&&P.optionFocused),"aria-label":"Tag option",...u},n.createElement("div",{className:`tag-filter-option ${y||""}`},typeof v=="string"?n.createElement(o.e,{label:v,removeIcon:!1,count:h.count??0}):v))},a=h=>({option:t.css`
      padding: 8px;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;
      &:hover {
        background: ${h.colors.background.secondary};
      }
    `,optionFocused:t.css`
      background: ${h.colors.background.secondary};
      border-style: solid;
      border-top: 0;
      border-right: 0;
      border-bottom: 0;
      border-left-width: 2px;
    `}),m=(h,y)=>RegExp((0,s.GE)(y),"i").test(h.value),d=({allowCustomValue:h=!1,formatCreateLabel:y,hideValues:v,inputId:i,isClearable:u,onChange:P,placeholder:E="Filter by tag",tagOptions:C,tags:b,width:S})=>{const M=(0,r.wW)(p),x=b.map(K=>({value:K,label:K,count:0})),[O,L]=(0,n.useState)(x),[B,w]=(0,n.useState)(!1),[R,A]=(0,n.useState)(b),[U,I]=(0,n.useState)(x),N=(0,n.useMemo)(()=>b.join(),[b]),F=(0,n.useCallback)(async()=>(await C()).map(z=>b.includes(z.term)?{value:z.term,label:z.term,count:0}:{value:z.term,label:z.term,count:z.count}),[C,b]),D=(0,n.useCallback)(async()=>{w(!0);const K=await F();h&&U.forEach(z=>K.push(z)),L(K),w(!1)},[h,U,F]);(0,n.useEffect)(()=>{b.length>0&&O.length===0&&D()},[D,O.length,b.length]),(0,n.useEffect)(()=>{b!==R&&(A(b),D())},[D,R,b]);const Y=K=>{K.forEach(z=>z.count=0),P((K||[]).map(z=>z.value)),h&&I(K.filter(z=>!b.includes(z)))},j={key:N,onFocus:D,isLoading:B,options:O,allowCreateWhileLoading:!0,allowCustomValue:h,formatCreateLabel:y,defaultOptions:!0,filterOption:m,getOptionLabel:K=>K.label,getOptionValue:K=>K.value,inputId:i,isMulti:!0,loadingMessage:"Loading...",noOptionsMessage:"No tags found",onChange:Y,placeholder:E,value:x,width:S,components:{Option:l,MultiValueLabel:()=>null,MultiValueRemove(K){const{data:z}=K;return n.createElement(c.c.MultiValueRemove,{...K},n.createElement(o.e,{key:z.label,label:z.label,removeIcon:!0,count:z.count}))},MultiValueContainer:v?()=>null:c.c.MultiValueContainer}};return n.createElement("div",{className:M.tagFilter},u&&b.length>0&&n.createElement("button",{className:M.clear,onClick:()=>Y([])},"Clear tags"),n.createElement(g.NU,{...j,prefix:n.createElement(f.J,{name:"tag-alt"}),"aria-label":"Tag filter"}))};d.displayName="TagFilter";const p=h=>({tagFilter:t.css`
    position: relative;
    min-width: 180px;
    flex-grow: 1;

    .label-tag {
      margin-left: 6px;
      cursor: pointer;
    }
  `,clear:t.css`
    background: none;
    border: none;
    text-decoration: underline;
    font-size: 12px;
    padding: none;
    position: absolute;
    top: -17px;
    right: 0;
    cursor: pointer;
    color: ${h.colors.text.secondary};

    &:hover {
      color: ${h.colors.text.primary};
    }
  `})},32873:(H,T,e)=>{"use strict";e.d(T,{a:()=>l});var t=e(82897),n=e.n(t),c=e(68404),s=e(33180),r=e(46519),g=e(3630),f=e(59796);const o="grafana.dashboard.timepicker.history",l=y=>c.createElement(f.G,{storageKey:o,defaultValue:[]},(v,i)=>{const u=m(v),P=a(u,y.timeZone);return c.createElement(g.Xc,{...y,history:P,onChange:E=>{d(E,u,i),y.onChange(E)}})});function a(y,v){return y.map(i=>s.convertRawToRange(i,v))}function m(y){return y.map(v=>{const i=typeof v.from=="string"?v.from:v.from.toISOString(),u=typeof v.to=="string"?v.to:v.to.toISOString();return{from:i,to:u}})}function d(y,v,i){if(!p(y))return;const u={from:typeof y.raw.from=="string"?y.raw.from:y.raw.from.toISOString(),to:typeof y.raw.to=="string"?y.raw.to:y.raw.to.toISOString()},P=h([u,...v]);i(P)}function p(y){return(0,r.v9)(y.raw.from)||(0,r.v9)(y.raw.to)}function h(y){return(0,t.uniqBy)(y,v=>v.from+v.to).slice(0,4)}},97551:(H,T,e)=>{"use strict";e.d(T,{KN:()=>A,iK:()=>oe,Y:()=>Ee,$m:()=>ae,Ur:()=>z,Nj:()=>N,AR:()=>K,SA:()=>Z});var t=e(66926),n=e(89890),c=e(20112),s=e(29431),r=e(55294),g=e(14582),f=e(24177),o=e(59309),l=e(58230),a=e(19695),m=e(98234),d=e(40538),p=e(13347),h=e(72269),y=e(45778),v=e(45389),i=e(2445),u=e(75974),P=e(64724),E=e(28586),C=e(60892);const{round:b,min:S,ceil:M}=Math,x=2;let O=6;const L=E.Gj;function B(me,re,le,pe,ee){(0,E.Qm)(le,me,L,re,(se,Q,G)=>{let q=pe*Q,X=pe*G;ee(se,q,X)})}function w(me){const{mode:re,numSeries:le,isDiscrete:pe,rowHeight:ee=0,colWidth:se=0,showValue:Q,mergeValues:G=!1,theme:q,label:X,formatValue:de,alignValue:Be="left",getTimeRange:ke,getValueColor:He,getFieldConfig:ue,onHover:Oe,onLeave:Fe}=me;let Ie;const we=Array(le).fill(null).map(()=>{let Ze=document.createElement("div");return Ze.classList.add("bar-mark"),Ze.style.position="absolute",Ze.style.background="rgba(255,255,255,0.2)",Ze});let Re;const _e=Ze=>{Re=Array(le).fill(null).map(Se=>Array(Ze).fill(null))},et=`500 ${Math.round(12*devicePixelRatio)}px ${q.typography.fontFamily}`,qe=Array(le).fill(null),Je=[se,1/0],lt=1-Je[0],at=(Je[1]??1/0)*u.Z.pxRatio,Xe=new Map,gt=new Map;function ot(Ze){Xe.forEach((Se,Ue)=>{Ze.fillStyle=Ue,Ze.fill(Se)}),gt.forEach((Se,Ue)=>{Ze.strokeStyle=Ue,Ze.stroke(Se)}),Xe.clear(),gt.clear()}function Ye(Ze,Se,Ue,Qe,pt,bt,yt,Mt,At,Pt,rn,Fn,kn){if(yt<1)return;const Jn=He(Pt+1,Fn),qn=ue(Pt),Ut=R(qn,Jn);if(Re[Pt][rn]={x:b(pt-Ue),y:b(bt-Qe),w:yt,h:Mt,sidx:Pt+1,didx:rn,fillColor:Ut},kn){let ut=Ut,nt=Xe.get(ut);if(nt==null&&Xe.set(ut,nt=new Path2D),Se(nt,pt,bt,yt,Mt),At){let vt=Jn,ht=gt.get(vt);ht==null&&gt.set(vt,ht=new Path2D),Se(ht,pt+At/2,bt+At/2,yt-At,Mt-At)}}else Ze.beginPath(),Se(Ze,pt,bt,yt,Mt),Ze.fillStyle=Ut,Ze.fill(),At&&(Ze.beginPath(),Se(Ze,pt+At/2,bt+At/2,yt-At,Mt-At),Ze.strokeStyle=Jn,Ze.lineWidth=At,Ze.stroke())}const mt=(Ze,Se,Ue,Qe)=>(u.Z.orient(Ze,Se,(pt,bt,yt,Mt,At,Pt,rn,Fn,kn,Jn,qn,Ut,ut,nt)=>{let vt=b((pt.width||0)*u.Z.pxRatio),ht=pe(Se);Ze.ctx.save(),nt(Ze.ctx,Ze.bbox.left,Ze.bbox.top,Ze.bbox.width,Ze.bbox.height),Ze.ctx.clip(),B(ee,Se-1,le,qn,(It,Ft,en)=>{if(re===A.Changes)for(let sn=0;sn<yt.length;sn++){let Mn=yt[sn];if(Mn!=null){let En=Math.round(Pt(bt[sn],Mt,Jn,Fn)),yn=sn;for(;++yn<yt.length&&(yt[yn]===void 0||G&&yt[yn]===Mn););let Bn=yn===yt.length?Fn+Jn+vt:Math.round(Pt(bt[yn],Mt,Jn,Fn));Ye(Ze.ctx,nt,Fn,kn,En,b(kn+Ft),Bn-En,b(en),vt,It,sn,Mn,ht),sn=yn-1}}else if(re===A.Samples){let sn=Pt(bt[1],Mt,Jn,Fn)-Pt(bt[0],Mt,Jn,Fn),Mn=sn*lt,En=b(S(at,sn-Mn)-vt),yn=En/2;for(let Bn=Ue;Bn<=Qe;Bn++)if(yt[Bn]!=null){let ea=Pt(bt[Bn],Mt,Jn,Fn);Ye(Ze.ctx,nt,Fn,kn,b(ea-yn),b(kn+Ft),En,b(en),vt,It,Bn,yt[Bn],ht)}}}),ht&&(Ze.ctx.lineWidth=vt,ot(Ze.ctx)),Ze.ctx.restore()}),null),ce=de==null||Q===d.Jp.Never?!1:(Ze,Se,Ue,Qe)=>(Ze.ctx.save(),Ze.ctx.rect(Ze.bbox.left,Ze.bbox.top,Ze.bbox.width,Ze.bbox.height),Ze.ctx.clip(),Ze.ctx.font=et,Ze.ctx.textAlign=re===A.Changes?Be:"center",Ze.ctx.textBaseline="middle",u.Z.orient(Ze,Se,(pt,bt,yt,Mt,At,Pt,rn,Fn,kn,Jn,qn)=>{let Ut=b((pt.width||0)*u.Z.pxRatio),ut=b(kn+Ae[Se-1]);for(let nt=0;nt<yt.length;nt++)if(yt[nt]!=null){const vt=Re[Se-1][nt];if(!vt||vt.x>=Jn)continue;let ht=Math.floor(vt?.w/O);if(Q===d.Jp.Auto&&ht<2)continue;let It=de(Se,yt[nt]),Ft=b(vt.x+Fn+vt.w/2);re===A.Changes&&(Be==="left"?Ft=b(vt.x+Fn+Ut+x):Be==="right"&&(Ft=b(vt.x+Fn+vt.w-Ut-x))),Ze.ctx.fillStyle=q.colors.getContrastText(vt.fillColor,3),Ze.ctx.fillText(It.slice(0,ht),Ft,ut)}}),Ze.ctx.restore(),!1),be=Ze=>{let Se=Ze.over,Ue="";for(let Qe=32;Qe<=126;Qe++)Ue+=String.fromCharCode(Qe);O=Math.ceil(Ze.ctx.measureText(Ue).width/Ue.length*u.Z.pxRatio),O+=2.5,Se.style.overflow="hidden",we.forEach(Qe=>{Se.appendChild(Qe)})},Te=Ze=>{Ie=Ie||new C.lW(0,0,Ze.bbox.width,Ze.bbox.height),Ie.clear(),_e(Ze.data[0].length),Ze.series.forEach(Se=>{Se._paths=null})};function Ke(Ze,Se){let Ue=we[Ze],Qe=u.Z.pxRatio;Se?(Ue.style.display="",Ue.style.left=b(Se.x/Qe)+"px",Ue.style.top=b(Se.y/Qe)+"px",Ue.style.width=b(Se.w/Qe)+"px",Ue.style.height=b(Se.h/Qe)+"px"):Ue.style.display="none",qe[Ze]=Se}let ge;function Me(Ze,Se){let Ue;for(let Qe=0;Qe<le;Qe++){let pt;if(Ze>=0){let bt=Ae[Qe];Ie.get(Ze,bt,1,1,yt=>{(0,C.Pn)(Ze,bt,yt.x,yt.y,yt.x+yt.w,yt.y+yt.h)&&(pt=yt,Math.abs(Se-bt)<=yt.h/2&&(Ue=yt))})}pt?pt!==qe[Qe]&&Ke(Qe,pt):qe[Qe]!=null&&Ke(Qe,null)}Ue?Ue!==ge&&(ge=Ue,Oe(Ue.sidx,Ue.didx,Ue)):ge&&(ge=void 0,Fe())}function ye(Ze,Se){let Ue;Ie.get(Ze,Se,1,1,Qe=>{(0,C.Pn)(Ze,Se,Qe.x,Qe.y,Qe.x+Qe.w,Qe.y+Qe.h)&&(Ue=Qe)}),Ue?(Ke(0,Ue),Ue!==ge&&(ge=Ue,Oe(Ue.sidx,Ue.didx,Ue))):ge&&(Ke(0,null),ge=void 0,Fe())}const fe=re===A.Changes?Me:ye,he=Ze=>{let Se=b(Ze.cursor.left*u.Z.pxRatio),Ue=b(Ze.cursor.top*u.Z.pxRatio);if(!Ie.o.length&&Ie.q==null)for(const Qe of Re)for(const pt of Qe)pt&&Ie.add(pt);fe(Se,Ue)},De={y:!1,x:re===A.Changes,points:{show:!1}},Ae=Array(le).fill(0),Ne=Array(le).fill(0);return{cursor:De,xSplits:re===A.Samples?(Ze,Se,Ue,Qe,pt,bt)=>{let yt=[],Mt=Ze.data[0][1]-Ze.data[0][0],At=M(pt/Mt);for(let Pt=0;Pt<Ze.data[0].length;Pt+=At){let rn=Ze.data[0][Pt];rn>=Ue&&rn<=Qe&&yt.push(rn)}return yt}:null,xRange:Ze=>{const Se=ke();let Ue=Se.from.valueOf(),Qe=Se.to.valueOf();if(re===A.Samples){let bt=(Ze.data[0][1]-Ze.data[0][0])/2;Ue<=Ze.data[0][0]&&(Ue=Ze.data[0][0]-bt);let yt=Ze.data[0].length-1;Qe>=Ze.data[0][yt]&&(Qe=Ze.data[0][yt]+bt)}return[Ue,Qe]},ySplits:Ze=>(B(ee,null,le,Ze.bbox.height,(Se,Ue,Qe)=>{Ae[Se]=b(Ue+Qe/2),Ne[Se]=Ze.posToVal(Ae[Se]/u.Z.pxRatio,h.j)}),Ne),yValues:(Ze,Se)=>Se.map((Ue,Qe)=>X(Qe+1)),yRange:[0,1],drawPaths:mt,drawPoints:ce,init:be,drawClear:Te,setCursor:he}}function R(me,re){if(re[0]==="#"&&re.length===9)return re;const le=(me.fillOpacity??100)/100;return(0,P.alpha)(re,le)}var A=(me=>(me.Changes="changes",me.Samples="samples",me))(A||{});const U={lineWidth:0,fillOpacity:80};function I(me){return me.ctrlKey||me.metaKey||me.shiftKey?SeriesVisibilityChangeMode.AppendToSelection:SeriesVisibilityChangeMode.ToggleSelection}const N=({frame:me,theme:re,timeZones:le,getTimeRange:pe,mode:ee,eventBus:se,sync:Q,rowHeight:G,colWidth:q,showValue:X,alignValue:de,mergeValues:Be,getValueColor:ke})=>{const He=new p.U(le[0]),ue="time",Oe="x",Fe=Xe=>{const gt=Xe.config?.color?.mode;return!(gt&&Xe.display&&gt.startsWith("continuous-"))},Ie=(Xe,gt)=>{const ot=me.fields[Xe];return ot.state?.origin?.fieldIndex!==void 0&&ot.state?.origin?.frameIndex!==void 0&&ke?ke(ot.state?.origin?.frameIndex,ot.state?.origin?.fieldIndex,gt):t.R},we={mode:ee,numSeries:me.fields.length-1,isDiscrete:Xe=>Fe(me.fields[Xe]),mergeValues:Be,rowHeight:G,colWidth:q,showValue:X,alignValue:de,theme:re,label:Xe=>(0,n.C)(me.fields[Xe],me),getFieldConfig:Xe=>me.fields[Xe].config.custom,getValueColor:Ie,getTimeRange:pe,formatValue:(Xe,gt)=>(0,c.zc)(me.fields[Xe].display(gt)),onHover:(Xe,gt)=>{_e=Xe,et=gt,Re=!0},onLeave:()=>{_e=null,et=null,Re=!0}};let Re=!1,_e=null,et=null;const qe=w(we),Je={point:{[ue]:null,[h.j]:null},data:me};He.addHook("init",qe.init),He.addHook("drawClear",qe.drawClear),He.addHook("setCursor",qe.setCursor);const lt=(Xe,gt,ot)=>{Re&&(_e!=null&&(Xe(_e),gt(et)),Re=!1),ot(_e==null)};He.setTooltipInterpolator(lt),He.setPrepData(Xe=>(0,i.Bj)(Xe[0],(0,i.i7)(Xe[0]))),He.setCursor(qe.cursor),He.addScale({scaleKey:Oe,isTime:!0,orientation:d.wN.Horizontal,direction:d.bQ.Right,range:qe.xRange}),He.addScale({scaleKey:h.j,isTime:!1,orientation:d.wN.Vertical,direction:d.bQ.Up,range:qe.yRange}),He.addAxis({scaleKey:Oe,isTime:!0,splits:qe.xSplits,placement:d.LB.Bottom,timeZone:le[0],theme:re,grid:{show:!0}}),He.addAxis({scaleKey:h.j,isTime:!1,placement:d.LB.Left,splits:qe.ySplits,values:qe.yValues,grid:{show:!1},ticks:{show:!1},gap:16,theme:re});let at=0;for(let Xe=0;Xe<me.fields.length;Xe++){if(Xe===0)continue;const gt=me.fields[Xe],ot=gt.config,Ye={...U,...ot.custom};gt.state.seriesIndex=at++,He.addSeries({scaleKey:h.j,pathBuilder:qe.drawPaths,pointsBuilder:qe.drawPoints,lineWidth:Ye.lineWidth,fillOpacity:Ye.fillOpacity,theme:re,show:!Ye.hideFrom?.viz,thresholds:ot.thresholds,dataFrameFieldIndex:gt.state?.origin})}if(Q&&Q()!==s.m.Off){let Xe={};Xe.sync={key:"__global_",filters:{pub:(gt,ot,Ye,mt,ce,be,Te)=>Q&&Q()===s.m.Off?!1:(Je.rowIndex=Te,Ye<0&&mt<0?(Je.point[ue]=null,Je.point[h.j]=null,se.publish(new r.xH)):(Je.point[ue]=ot.posToVal(Ye,Oe),Je.point.panelRelY=mt>0?mt/be:1,Je.down=void 0,se.publish(new r.es(Je))),!0)},scales:[Oe,null]},He.setSync(),He.setCursor(Xe)}return He};function F(me){const re=new Map;for(let le=0;le<me.fields.length;le++)re.set(getFieldDisplayName(me.fields[le],me),le);return re}function D(me){let re=me[0],le;for(let pe=1;pe<me.length;pe++){let ee=me[pe];ee===null?re=null:ee===re?(le||(le=[...me]),le[pe]=void 0):ee!=null&&(re=ee)}return le}function Y(me){let re=me.config.custom?.spanNulls;return re?re===!0?1/0:re:-1}function j(me,re){const le=me.config.thresholds;if(me.type!==g.fS.number||!le||!le.steps.length)return;const pe=z(me.config,re);if(pe.length!==le.steps.length)return;const ee=new Map,se=new Map;for(let q=0;q<pe.length;q++)ee.set(le.steps[q],pe[q].label),se.set(pe[q].label,pe[q].color);let Q=me.values.toArray();const G=new Array(me.values.length);if(le.mode===f.H.Percentage){const{min:q,max:X}=(0,o.xD)(me),de=X-q;Q=Q.map(Be=>Be==null?Be:(Be-q)/de*100)}for(let q=0;q<G.length;q++){const X=Q[q];X==null?G[q]=X:G[q]=ee.get((0,l.m1)(X,le.steps))}return{...me,config:{...me.config,custom:{...me.config.custom,spanNulls:Y(me)}},type:g.fS.string,values:new a.G(G),display:q=>({text:q,color:se.get(q),numeric:NaN})}}function K(me,re,le,pe){if(!me?.length)return{warn:"No data in response"};let ee=!1;const se=[];for(let Q of me){let G=!1,q=!1,X=(0,m.Y3)(Q,Q.fields.findIndex(ke=>ke.type===g.fS.time)),de=(0,y.w)({frame:X,refFieldPseudoMin:le.from.valueOf(),refFieldPseudoMax:le.to.valueOf()});de!==Q&&(q=!0);const Be=[];for(let ke of(0,v.I)(de).fields)switch(ke.type){case g.fS.time:G=!0,ee=!0,Be.push(ke);break;case g.fS.number:if(re&&ke.config.color?.mode===t.S.Thresholds){const He=j(ke,pe);if(He){Be.push(He),q=!0;continue}}case g.fS.boolean:case g.fS.string:ke={...ke,config:{...ke.config,custom:{...ke.config.custom,spanNulls:Y(ke)}}},Be.push(ke);break;default:q=!0}G&&Be.length>1&&(ee=!0,q?se.push({...X,fields:Be}):se.push(X))}return ee?se.length?{frames:se}:{warn:"No graphable fields"}:{warn:"Data does not have a time field"}}function z(me,re){const le=[],pe=me.thresholds;if(!pe||!pe.steps.length)return le;const ee=pe.steps,se=(0,c.Cf)(pe.mode===f.H.Percentage?"percent":me.unit??""),Q=G=>(0,c.zc)(se(G));for(let G=0;G<ee.length;G++){let q=ee[G],X=q.value,de="",Be="";X===-1/0&&G<ee.length-1?(X=ee[G+1].value,de="< "):Be="+",le.push({label:`${de}${Q(X)}${Be}`,color:re.visualization.getColorByName(q.color),yAxis:1})}return le}function Z(me,re,le){if(!(!me||re.showLegend===!1))return ae(J(me),le)}function ae(me,re){if(!me.length)return;const le=[],pe=me[0].config,ee=pe.color?.mode??t.S.Fixed,se=pe.thresholds;if(ee===t.S.Thresholds&&se?.steps&&se.steps.length>1)return z(pe,re);if(ee.startsWith("continuous"))return;let Q=new Map;return me.forEach(G=>{G.values.toArray().forEach(q=>{let X=G.display(q);X.color&&Q.set(X.text,X.color)})}),Q.forEach((G,q)=>{q.length>0&&le.push({label:q,color:re.visualization.getColorByName(G??t.R),yAxis:1})}),le}function J(me){const re=[];for(const le of me)for(const pe of le.fields)pe.type!==g.fS.time&&re.push(pe);return re}function oe(me,re){let le,pe=re+1;if(pe>=me.values.length)return null;const ee=me.values.get(re);for(;le===void 0;){if(pe>=me.values.length)return null;const se=me.values.get(pe);se===void 0||se===ee?pe++:le=pe}return le}function Ee(me){if(me<0||Number.isNaN(me))return"";let re,le,pe,ee,se,Q,G,q;return G=Math.floor(me/1e3),Q=Math.floor(G/60),G=G%60,se=Math.floor(Q/60),Q=Q%60,ee=Math.floor(se/24),se=se%24,re=Math.floor(ee/365),re>0&&(ee=ee%365),le=Math.floor(ee/30),le>0&&(ee=ee%30),pe=Math.floor(ee/7),pe>0&&(ee=ee%7),q=Math.round(me%1e3*1e3)/1e3,(re>0?re+"y "+(le>0?le+"mo ":"")+(pe>0?pe+"w ":"")+(ee>0?ee+"d ":""):le>0?le+"mo "+(pe>0?pe+"w ":"")+(ee>0?ee+"d ":""):pe>0?pe+"w "+(ee>0?ee+"d ":""):ee>0?ee+"d "+(se>0?se+"h ":""):se>0?se+"h "+(Q>0?Q+"m ":""):Q>0?Q+"m "+(G>0?G+"s ":""):G>0?G+"s "+(q>0?q+"ms ":""):q>0?q+"ms ":"0").trim()}},33045:(H,T,e)=>{"use strict";e.d(T,{a:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(58564),r=e(77117),g=e(39904);const f=({values:l,onChange:a,id:m})=>{const d=(0,c.wW)(o);return n.createElement("div",{className:d.wrapper},l.length?l.map((p,h)=>n.createElement("div",{className:d.pair,key:h},n.createElement(s.X,{id:`${m}-key-${h}`,placeholder:"Tag name",value:p.key,onChange:y=>{a(l.map((v,i)=>(i===h&&(v.key=String(y)),v)))}}),n.createElement(r.W,{"aria-label":"equals",className:d.operator},"as"),n.createElement(s.X,{id:`${m}-value-${h}`,placeholder:"New name (optional)",value:p.value||"",onChange:y=>{a(l.map((v,i)=>(i===h&&(v.value=String(y)),v)))}}),n.createElement("button",{onClick:()=>a([...l.slice(0,h),...l.slice(h+1)]),className:"gf-form-label query-part","aria-label":"Remove tag",type:"button"},n.createElement(g.J,{name:"times"})),h===l.length-1?n.createElement("button",{onClick:()=>a([...l,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button"},n.createElement(g.J,{name:"plus"})):null)):n.createElement("button",{onClick:()=>a([...l,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button"},n.createElement(g.J,{name:"plus"})))},o=l=>({wrapper:t.css`
    display: flex;
    flex-direction: column;
    gap: ${l.spacing(.5)} 0;
  `,pair:t.css`
    display: flex;
    justify-content: start;
    align-items: center;
  `,operator:t.css`
    color: ${l.v1.palette.orange};
    width: auto;
  `})},83437:(H,T,e)=>{"use strict";e.d(T,{Z:()=>m,p:()=>a});var t=e(52423),n=e(68404),c=e(53117),s=e(72648),r=e(11543),g=e(81764),f=e(8944),o=e(46967),l=e(33045);function a(y){if(y?.tracesToLogsV2)return y.tracesToLogsV2;if(!y?.tracesToLogs)return;const v={customQuery:!1};return v.datasourceUid=y.tracesToLogs.datasourceUid,v.tags=y.tracesToLogs.mapTagNamesEnabled?y.tracesToLogs.mappedTags:y.tracesToLogs.tags?.map(i=>({key:i})),v.filterByTraceID=y.tracesToLogs.filterByTraceID,v.filterBySpanID=y.tracesToLogs.filterBySpanID,v.spanStartTimeShift=y.tracesToLogs.spanStartTimeShift,v.spanEndTimeShift=y.tracesToLogs.spanEndTimeShift,v}function m({options:y,onOptionsChange:v}){const i=(0,s.wW)(h),u=["loki","elasticsearch","grafana-splunk-datasource","grafana-opensearch-datasource"],P=(0,n.useMemo)(()=>a(y.jsonData)||{customQuery:!1},[y.jsonData]),{query:E="",tags:C,customQuery:b}=P,S=(0,n.useCallback)(M=>{v({...y,jsonData:{...y.jsonData,tracesToLogsV2:{...P,...M},tracesToLogs:void 0}})},[v,y,P]);return n.createElement("div",{className:(0,t.css)({width:"100%"})},n.createElement("h3",{className:"page-heading"},"Trace to logs"),n.createElement("div",{className:i.infoText},"Trace to logs lets you navigate from a trace span to the selected data source's logs."),n.createElement(r.Z,null,n.createElement(g._,{tooltip:"The data source the trace is going to navigate to",label:"Data source",labelWidth:26},n.createElement(c.q,{inputId:"trace-to-logs-data-source-picker",filter:M=>u.includes(M.type),current:P.datasourceUid,noDefault:!0,width:40,onChange:M=>S({datasourceUid:M.uid})}))),n.createElement(p,{type:"start",value:P.spanStartTimeShift||"",onChange:M=>S({spanStartTimeShift:M})}),n.createElement(p,{type:"end",value:P.spanEndTimeShift||"",onChange:M=>S({spanEndTimeShift:M})}),n.createElement(r.Z,null,n.createElement(g._,{tooltip:"Tags that will be used in the query. Default tags: 'cluster', 'hostname', 'namespace', 'pod'",label:"Tags",labelWidth:26},n.createElement(l.a,{values:C??[],onChange:M=>S({tags:M})}))),n.createElement(d,{disabled:b,type:"trace",id:"filterByTraceID",value:Boolean(P.filterByTraceID),onChange:M=>S({filterByTraceID:M})}),n.createElement(d,{disabled:b,type:"span",id:"filterBySpanID",value:Boolean(P.filterBySpanID),onChange:M=>S({filterBySpanID:M})}),n.createElement(r.Z,null,n.createElement(g._,{tooltip:"Use custom query with possibility to interpolate variables from the trace or span.",label:"Use custom query",labelWidth:26},n.createElement(f.x,{id:"customQuerySwitch",value:b,onChange:M=>S({customQuery:M.currentTarget.checked})}))),b&&n.createElement(g._,{label:"Query",labelWidth:26,tooltip:"The query that will run when navigating from a trace to logs data source. Interpolate tags using the `$__tags` keyword.",grow:!0},n.createElement(o.I,{label:"Query",type:"text",allowFullScreen:!0,value:E,onChange:M=>S({query:M.currentTarget.value})})))}function d(y){return n.createElement(r.Z,null,n.createElement(g._,{disabled:y.disabled,label:`Filter by ${y.type} ID`,labelWidth:26,grow:!0,tooltip:`Filters logs by ${y.type} ID`},n.createElement(f.x,{id:y.id,value:y.value,onChange:v=>y.onChange(v.currentTarget.checked)})))}function p(y){return n.createElement(r.Z,null,n.createElement(g._,{label:`Span ${y.type} time shift`,labelWidth:26,grow:!0,tooltip:`Shifts the ${y.type} time of the span. Default 0 Time units can be used here, for example: 5s, 1m, 3h`},n.createElement(o.I,{type:"text",placeholder:"1h",width:40,onChange:v=>y.onChange(v.currentTarget.value),value:y.value})))}const h=y=>({infoText:t.css`
    padding-bottom: ${y.spacing(2)};
    color: ${y.colors.text.secondary};
  `})},73194:(H,T,e)=>{"use strict";e.d(T,{Z:()=>r});var t=e(52423),n=e(68404),c=e(41818),s=e(72648);const r=({text:f="PRO",className:o,experimentId:l,eventVariant:a="",...m})=>{const d=(0,s.wW)(g);return(0,n.useEffect)(()=>{l&&(0,c.SZ)(l,"test",a)},[l,a]),n.createElement("span",{className:(0,t.cx)(d.badge,o),...m},f)},g=f=>({badge:t.css`
      margin-left: ${f.spacing(1.25)};
      border-radius: ${f.shape.borderRadius(5)};
      background-color: ${f.colors.success.main};
      padding: ${f.spacing(.25,.75)};
      color: white; // use the same color for both themes
      font-weight: ${f.typography.fontWeightMedium};
      font-size: ${f.typography.pxToRem(10)};
    `})},39284:(H,T,e)=>{"use strict";e.d(T,{TA:()=>l,Xz:()=>f,tM:()=>m});var t=e(52423),n=e(68404),c=e(41818),s=e(72648),r=e(39904),g=e(31403);const f=({featureName:h,className:y,children:v,text:i,featureId:u,eventVariant:P="",size:E="md",...C})=>{const b=(0,s.wW)(S=>o(S,E));return(0,n.useEffect)(()=>{(0,c.SZ)(`feature-highlights-${u}`,"test",P)},[P,u]),n.createElement("div",{className:(0,t.cx)(b.box,y),...C},n.createElement(r.J,{name:"rocket",className:b.icon}),n.createElement("div",{className:b.inner},n.createElement("p",{className:b.text},"You\u2019ve discovered a Pro feature! ",i||`Get the Grafana Pro plan to access ${h}.`),n.createElement(g.Qj,{variant:"secondary",size:E,className:b.button,href:"https://grafana.com/profile/org/subscription",target:"__blank",rel:"noopener noreferrer"},"Upgrade")))},o=(h,y)=>{const v=h.shape.borderRadius(2),i=y==="md"?"body":"bodySmall";return{box:t.css`
      display: flex;
      align-items: center;
      position: relative;
      border-radius: ${v};
      background: ${h.colors.success.transparent};
      padding: ${h.spacing(2)};
      color: ${h.colors.success.text};
      font-size: ${h.typography[i].fontSize};
      text-align: left;
      line-height: 16px;
      margin: ${h.spacing(0,"auto",3,"auto")};
      max-width: ${h.breakpoints.values.xxl}px;
      width: 100%;
    `,inner:t.css`
      display: flex;
      align-items: center;
      width: 100%;
      justify-content: space-between;
    `,text:t.css`
      margin: 0;
    `,button:t.css`
      background-color: ${h.colors.success.main};
      font-weight: ${h.typography.fontWeightLight};
      color: white;

      &:hover {
        background-color: ${h.colors.success.main};
      }

      &:focus-visible {
        box-shadow: none;
        color: ${h.colors.text.primary};
        outline: 2px solid ${h.colors.primary.main};
      }
    `,icon:t.css`
      margin: ${h.spacing(.5,1,.5,.5)};
    `}},l=({listItems:h,image:y,featureUrl:v,featureName:i,description:u,caption:P,action:E})=>{const C=(0,s.wW)(a);return n.createElement("div",{className:C.container},n.createElement("div",{className:C.content},n.createElement("h3",{className:C.title},"Get started with ",i),u&&n.createElement("h6",{className:C.description},u),n.createElement("ul",{className:C.list},h.map((b,S)=>n.createElement("li",{key:S},n.createElement(r.J,{name:"check",size:"xl",className:C.icon})," ",b))),E?.link&&n.createElement(g.Qj,{variant:"primary",href:E.link},E.text),E?.onClick&&n.createElement(g.zx,{variant:"primary",onClick:E.onClick},E.text),v&&n.createElement(g.Qj,{fill:"text",href:v,className:C.link,target:"_blank",rel:"noreferrer noopener"},"Learn more")),n.createElement("div",{className:C.media},n.createElement("img",{src:p(y),alt:"Feature screenshot"}),P&&n.createElement("p",{className:C.caption},P)))},a=h=>({container:t.css`
      display: flex;
      justify-content: space-between;
    `,content:t.css`
      width: 45%;
      margin-right: ${h.spacing(4)};
    `,media:t.css`
      width: 55%;

      img {
        width: 100%;
      }
    `,title:t.css`
      color: ${h.colors.text.maxContrast};
    `,description:t.css`
      color: ${h.colors.text.primary};
      font-weight: ${h.typography.fontWeightLight};
    `,list:t.css`
      list-style: none;
      margin: ${h.spacing(4,0,2,0)};

      li {
        display: flex;
        align-items: flex-start;
        color: ${h.colors.text.primary};
        padding: ${h.spacing(1,0)};
      }
    `,icon:t.css`
      color: ${h.colors.success.main};
      margin-right: ${h.spacing(1)};
    `,link:t.css`
      margin-left: ${h.spacing(2)};
    `,caption:t.css`
      font-weight: ${h.typography.fontWeightLight};
      margin: ${h.spacing(1,0,0)};
    `}),m=({featureName:h,description:y,featureUrl:v,image:i})=>{const u=(0,s.wW)(d);return n.createElement("div",{className:u.container},n.createElement("h3",{className:u.title},"Get started with ",h),y&&n.createElement("h6",{className:u.description},y),n.createElement(g.Qj,{fill:"text",href:v,target:"_blank",rel:"noreferrer noopener"},"Learn more"),n.createElement("div",{className:u.media},n.createElement("img",{src:p(i),alt:"Feature screenshot"})))},d=h=>({container:t.css`
      overflow: auto;
      height: 100%;
    `,title:t.css`
      color: ${h.colors.text.maxContrast};
    `,description:t.css`
      color: ${h.colors.text.primary};
      font-weight: ${h.typography.fontWeightLight};
    `,media:t.css`
      width: 100%;
      margin-top: ${h.spacing(2)};

      img {
        width: 100%;
      }
    `}),p=h=>h.startsWith("http")?h:"/public/img/enterprise/highlights/"+h},41197:(H,T,e)=>{"use strict";e.d(T,{B:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(35029),r=e(43226);const g=l=>({Global:[{keys:["g","h"],description:"Go to Home Dashboard"},{keys:["g","e"],description:"Go to Explore"},{keys:["g","p"],description:"Go to Profile"},{keys:["s","o"],description:"Open search"},{keys:["esc"],description:"Exit edit/setting views"},{keys:["h"],description:"Show all keyboard shortcuts"},{keys:[`${l}+k`],description:"Open command palette"},{keys:["c","t"],description:"Change theme"}],Dashboard:[{keys:[`${l}+s`],description:"Save dashboard"},{keys:["d","r"],description:"Refresh all panels"},{keys:["d","s"],description:"Dashboard settings"},{keys:["d","v"],description:"Toggle in-active / view mode"},{keys:["d","k"],description:"Toggle kiosk mode (hides top nav)"},{keys:["d","E"],description:"Expand all rows"},{keys:["d","C"],description:"Collapse all rows"},{keys:["d","a"],description:"Toggle auto fit panels (experimental feature)"},{keys:[`${l}+o`],description:"Toggle shared graph crosshair"},{keys:["d","l"],description:"Toggle all panel legends"}],"Focused Panel":[{keys:["e"],description:"Toggle panel edit view"},{keys:["v"],description:"Toggle panel fullscreen view"},{keys:["p","s"],description:"Open Panel Share Modal"},{keys:["p","d"],description:"Duplicate Panel"},{keys:["p","r"],description:"Remove Panel"},{keys:["p","l"],description:"Toggle panel legend"}],"Time Range":[{keys:["t","z"],description:"Zoom out time range"},{keys:["t","\u2190"],description:"Move time range back"},{keys:["t","\u2192"],description:"Move time range forward"},{keys:["t","a"],description:"Make time range absolute/permanent"}]}),f=({onDismiss:l})=>{const a=(0,c.wW)(o),m=(0,n.useMemo)(()=>(0,r.vl)(),[]),d=(0,n.useMemo)(()=>g(m),[m]);return n.createElement(s.u,{title:"Shortcuts",isOpen:!0,onDismiss:l,onClickBackdrop:l},n.createElement("div",{className:a.categories},Object.entries(d).map(([p,h],y)=>n.createElement("div",{className:a.shortcutCategory,key:y},n.createElement("table",{className:a.shortcutTable},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",{className:a.shortcutTableCategoryHeader,colSpan:2},p)),h.map((v,i)=>n.createElement("tr",{key:`${y}-${i}`},n.createElement("td",{className:a.shortcutTableKeys},v.keys.map((u,P)=>n.createElement("span",{className:a.shortcutTableKey,key:`${y}-${i}-${P}`},u))),n.createElement("td",{className:a.shortcutTableDescription},v.description)))))))))};function o(l){return{titleDescription:t.css`
      font-size: ${l.typography.bodySmall.fontSize};
      font-weight: ${l.typography.bodySmall.fontWeight};
      color: ${l.colors.text.disabled};
      padding-bottom: ${l.spacing(2)};
    `,categories:t.css`
      font-size: ${l.typography.bodySmall.fontSize};
      display: flex;
      flex-flow: row wrap;
      justify-content: space-between;
      align-items: flex-start;
    `,shortcutCategory:t.css`
      width: 50%;
      font-size: ${l.typography.bodySmall.fontSize};
    `,shortcutTable:t.css`
      margin-bottom: ${l.spacing(2)};
    `,shortcutTableCategoryHeader:t.css`
      font-weight: normal;
      font-size: ${l.typography.h6.fontSize};
      text-align: left;
    `,shortcutTableDescription:t.css`
      text-align: left;
      color: ${l.colors.text.disabled};
      width: 99%;
      padding: ${l.spacing(1,2)};
    `,shortcutTableKeys:t.css`
      white-space: nowrap;
      width: 1%;
      text-align: right;
      color: ${l.colors.text.primary};
    `,shortcutTableKey:t.css`
      display: inline-block;
      text-align: center;
      margin-right: ${l.spacing(.5)};
      padding: 3px 5px;
      font: 11px Consolas, 'Liberation Mono', Menlo, Courier, monospace;
      line-height: 10px;
      vertical-align: middle;
      border: solid 1px ${l.colors.border.medium};
      border-radius: ${l.shape.borderRadius(3)};
      color: ${l.colors.text.primary};
      background-color: ${l.colors.background.secondary};
    `}}},47694:(H,T,e)=>{"use strict";e.d(T,{Oh:()=>f,ZP:()=>s,iE:()=>r,vc:()=>n.v});var t=e(24699),n=e(35645);let c=n.v;const s=c,r=()=>c,g=o=>{c={...c,...o}},f=Boolean(n.v.panels?.debug?.state===t.BV.alpha)},84952:(H,T,e)=>{"use strict";e.d(T,{AV:()=>o,FL:()=>p,K3:()=>t,OA:()=>s,QO:()=>a,b0:()=>f,cz:()=>c,gN:()=>d,hD:()=>n,kh:()=>g,yM:()=>r,zF:()=>l});const t=30,n=8,c=24,s="v",r="h",g=4,f=250,o=t*3,l="panel-copy",a=2,m=23763571993,d=40,p="VisualizationSelectPane.ListMode"},34177:(H,T,e)=>{"use strict";e.d(T,{h:()=>n,p:()=>c});var t=e(68404);const n=t.createContext(void 0);function c(){const s=(0,t.useContext)(n);if(!s)throw new Error("No GrafanaContext found");return s}},60499:(H,T,e)=>{"use strict";e.d(T,{AT:()=>l,ZR:()=>m,iG:()=>d,t_:()=>a});var t=e(68404),n=e(44288),c=e(82052),s=e(81168),r=e(659);const g={title:"",text:"",severity:s.AppNotificationSeverity.Success,icon:"check"},f={title:"",text:"",severity:s.AppNotificationSeverity.Warning,icon:"exclamation-triangle"},o={title:"",text:"",severity:s.AppNotificationSeverity.Error,icon:"exclamation-triangle"},l=(p,h="",y)=>({...g,title:p,text:h,id:(0,n.Z)(),timestamp:Date.now(),showing:!0}),a=(p,h="",y,v)=>({...o,text:(0,c.i)(h),title:p,id:(0,n.Z)(),traceId:y,component:v,timestamp:Date.now(),showing:!0}),m=(p,h="",y)=>({...f,title:p,text:h,traceId:y,id:(0,n.Z)(),timestamp:Date.now(),showing:!0});function d(){const p=(0,s.useDispatch)();return(0,t.useMemo)(()=>({success:(h,y="")=>{p((0,r.$l)(l(h,y)))},warning:(h,y="",v)=>{p((0,r.$l)(m(h,y,v)))},error:(h,y="",v)=>{p((0,r.$l)(a(h,y,v)))}}),[p])}},77582:(H,T,e)=>{"use strict";e.d(T,{Vt:()=>c.Vt,Wz:()=>s.W,h$:()=>t.Z,rv:()=>n.r});var t=e(97063),n=e(29494),c=e(82002),s=e(4050)},66719:(H,T,e)=>{"use strict";e.d(T,{H6:()=>l,ZP:()=>a});var t=e(82897),n=e(58379),c=e(12151),s=e(86647);const r=P=>{const E=(0,s.F)().getInstanceSettings(P.datasourceName);return{id:P.ts.toString(),createdAt:P.ts,datasourceName:P.datasourceName,datasourceUid:E?.uid||"",starred:P.starred,comment:P.comment,queries:P.queries}},g=P=>{if(!(0,s.F)().getInstanceSettings({uid:P.datasourceUid}))throw new Error("Datasource not found.");return{ts:P.createdAt,datasourceName:P.datasourceName,starred:P.starred,comment:P.comment,queries:P.queries}};var f=e(69597);const o="grafana.explore.richHistory",l=1e4;class a{async getRichHistory(E){const C=h().map(r),b=E.starred?C.filter(M=>M.starred===!0):C,S=(0,f.ZX)(b,E.sortOrder,E.datasourceFilters,E.search,[E.from,E.to]);return{richHistory:S,total:S.length}}async addToRichHistory(E){const C=Date.now(),b={id:C.toString(),createdAt:C,...E},S=g(b),M=d(h()),x=S.queries.map(R=>(0,t.omit)(R,["key","refId"])),O=M.length>0&&M[0].queries.map(R=>(0,t.omit)(R,["key","refId"]));if((0,t.isEqual)(x,O)){const R=new Error("Entry already exists");throw R.name=c.j.DuplicatedEntry,R}const{queriesToKeep:L,limitExceeded:B}=p(M),w=[S,...L];try{n.Z.setObject(o,w)}catch(R){if(R instanceof Error&&R.name==="QuotaExceededError")u(c.j.StorageFull,`Saving rich history failed: ${R.message}`);else throw R}return B?{warning:{type:c.V.LimitExceeded,message:`Query history reached the limit of ${l}. Old, not-starred items have been removed.`},richHistoryQuery:b}:{richHistoryQuery:b}}async deleteAll(){n.Z.delete(o)}async deleteRichHistory(E){const C=parseInt(E,10),S=n.Z.getObject(o,[]).filter(M=>M.ts!==C);n.Z.setObject(o,S)}async updateStarred(E,C){return m(E,b=>b.starred=C)}async updateComment(E,C){return m(E,b=>b.comment=C)}async getSettings(){return{activeDatasourceOnly:n.Z.getObject(f.hO.activeDatasourceOnly,!1),retentionPeriod:n.Z.getObject(f.hO.retentionPeriod,7),starredTabAsFirstTab:n.Z.getBool(f.hO.starredTabAsFirstTab,!1),lastUsedDatasourceFilters:n.Z.getObject(f.hO.datasourceFilters,[]).map(E=>E.value)}}async updateSettings(E){n.Z.set(f.hO.activeDatasourceOnly,E.activeDatasourceOnly),n.Z.set(f.hO.retentionPeriod,E.retentionPeriod),n.Z.set(f.hO.starredTabAsFirstTab,E.starredTabAsFirstTab),n.Z.setObject(f.hO.datasourceFilters,(E.lastUsedDatasourceFilters||[]).map(C=>({value:C})))}}function m(P,E){const C=parseInt(P,10),b=n.Z.getObject(o,[]),S=(0,t.find)(b,{ts:C});if(!S)throw new Error("Rich history item not found.");return E(S),n.Z.setObject(o,b),r(S)}function d(P){const E=n.Z.getObject(f.hO.retentionPeriod,7),C=(0,f.Jo)(E,!1);return P.filter(b=>b.ts>C||b.starred===!0)||[]}function p(P){let E=!1,C=P.length-1;for(;C>=0&&P.length>=l;)P[C].starred||(P.splice(C,1),E=!0),C--;return{queriesToKeep:P,limitExceeded:E}}function h(){const P=n.Z.getObject(o,[]);return y(P)}function y(P){return P.map(C=>{const b=C.queries.map((S,M)=>v(C,S,M));return{...C,queries:b}})}function v(P,E,C){const b="ABCDEFGHIJKLMNOPQRSTUVXYZ";return typeof E=="object"?E:i(E)?JSON.parse(E):{expr:E,refId:b[C]}}function i(P){try{JSON.parse(P)}catch{return!1}return!0}function u(P,E){const C=new Error(E);throw C.name=P,C}},4420:(H,T,e)=>{"use strict";e.d(T,{Z:()=>o});var t=e(3363),n=e(54899),c=e(86647),s=e(42454),r=e(43823);const g=a=>{const m=(0,c.F)().getInstanceSettings({uid:a.datasourceUid});return{id:a.uid,createdAt:a.createdAt*1e3,datasourceName:m?.name||"",datasourceUid:a.datasourceUid,starred:a.starred,comment:a.comment,queries:a.queries}},f=a=>({uid:a.id,createdAt:Math.floor(a.createdAt/1e3),datasourceUid:a.datasourceUid,starred:a.starred,comment:a.comment,queries:a.queries});class o{constructor(){this.preferenceService=new s.y("user")}async addToRichHistory(m){const{result:d}=await(0,n.i)().post("/api/query-history",{dataSourceUid:m.datasourceUid,queries:m.queries});return{richHistoryQuery:g(d)}}async deleteAll(){throw new Error("not supported")}async deleteRichHistory(m){(0,n.i)().delete(`/api/query-history/${m}`)}async getRichHistory(m){const d=l(m),h=(await(0,t.n)((0,n.i)().fetch({method:"GET",url:`/api/query-history?${d}`,requestId:"query-history-get-all"}))).data,y=(h.result.queryHistory||[]).map(g),v=h.result.totalCount||0;return{richHistory:y,total:v}}async getSettings(){return{activeDatasourceOnly:!1,lastUsedDatasourceFilters:void 0,retentionPeriod:14,starredTabAsFirstTab:(await this.preferenceService.load()).queryHistory?.homeTab==="starred"}}async updateComment(m,d){const p=await(0,n.i)().patch(`/api/query-history/${m}`,{comment:d});return g(p.result)}updateSettings(m){return this.preferenceService.patch({queryHistory:{homeTab:m.starredTabAsFirstTab?"starred":"query"}})}async updateStarred(m,d){let p;return d?p=await(0,n.i)().post(`/api/query-history/star/${m}`):p=await(0,n.i)().delete(`/api/query-history/star/${m}`),g(p.result)}async migrate(m){const d={queries:m.map(f)};await(0,t.n)((0,n.i)().fetch({url:"/api/query-history/migrate",method:"POST",data:d,showSuccessAlert:!1}))}}function l(a){let m=`${a.datasourceFilters.map(h=>{const y=(0,c.F)().getInstanceSettings(h).uid;return`datasourceUid=${encodeURIComponent(y)}`}).join("&")}`;a.search&&(m=m+`&searchString=${a.search}`),a.sortOrder&&(m=m+`&sort=${a.sortOrder===r.A.Ascending?"time-asc":"time-desc"}`);const d=a.from===0?"now":`now-${a.from}d`,p=a.to===0?"now":`now-${a.to}d`;return m=m+`&to=${d}`,m=m+`&from=${p}`,m=m+"&limit=100",m=m+`&page=${a.page||1}`,a.starred&&(m=m+`&onlyStarred=${a.starred}`),m}},12151:(H,T,e)=>{"use strict";e.d(T,{V:()=>n,j:()=>t});var t=(c=>(c.StorageFull="StorageFull",c.DuplicatedEntry="DuplicatedEntry",c))(t||{}),n=(c=>(c.LimitExceeded="LimitExceeded",c))(n||{})},69597:(H,T,e)=>{"use strict";e.d(T,{Jo:()=>r,ZX:()=>s,hO:()=>a});var t=e(82897),n=e.n(t),c=e(43823);function s(m,d,p,h,y){const v=f(m,p),i=o(v,h),u=y?g(i,y):i;return l(u,d)}const r=(m,d)=>{const p=new Date,h=new Date(p.setDate(p.getDate()-m));return d?h.setHours(24,0,0,0):h.setHours(0,0,0,0)};function g(m,d){const p=r(d[0],!0),h=r(d[1],!1);return m.filter(y=>y.createdAt<p&&y.createdAt>h)}function f(m,d){return d.length>0?m.filter(p=>d.includes(p.datasourceName)):m}function o(m,d){return m.filter(p=>p.comment.includes(d)?!0:p.queries.filter(y=>Object.values((0,t.omit)(y,["datasource","key","refId","hide","queryType"])).some(v=>v?.toString().includes(d))).length>0)}const l=(m,d)=>{let p;return d===c.A.Ascending&&(p=(h,y)=>h.createdAt<y.createdAt?-1:h.createdAt>y.createdAt?1:0),d===c.A.Descending&&(p=(h,y)=>h.createdAt<y.createdAt?1:h.createdAt>y.createdAt?-1:0),d===c.A.DatasourceZA&&(p=(h,y)=>h.datasourceName<y.datasourceName?-1:h.datasourceName>y.datasourceName?1:0),d===c.A.DatasourceAZ&&(p=(h,y)=>h.datasourceName<y.datasourceName?1:h.datasourceName>y.datasourceName?-1:0),m.sort(p)},a={retentionPeriod:"grafana.explore.richHistory.retentionPeriod",starredTabAsFirstTab:"grafana.explore.richHistory.starredTabAsFirstTab",activeDatasourceOnly:"grafana.explore.richHistory.activeDatasourceOnly",datasourceFilters:"grafana.explore.richHistory.datasourceFilters",migrated:"grafana.explore.richHistory.migrated"}},40967:(H,T,e)=>{"use strict";e.d(T,{X:()=>l,b:()=>o});var t=e(35645),n=e(77582),c=e(43823),s=e(66719),r=e(4420);const g=new s.ZP,f=new r.Z,o=()=>t.v.queryHistoryEnabled?f:g,l=()=>t.v.queryHistoryEnabled?{availableFilters:[c.A.Descending,c.A.Ascending],lastUsedDataSourcesAvailable:!1,clearHistory:!1,onlyActiveDataSource:!1,changeRetention:!1,queryHistoryAvailable:n.Vt.isSignedIn}:{availableFilters:[c.A.Descending,c.A.Ascending,c.A.DatasourceAZ,c.A.DatasourceZA],lastUsedDataSourcesAvailable:!0,clearHistory:!0,onlyActiveDataSource:!0,changeRetention:!0,queryHistoryAvailable:!0}},40014:(H,T,e)=>{"use strict";e.d(T,{x:()=>s});var t=e(68404),n=e(81168),c=e(70431);function s(r){const g=(0,n.useDispatch)(),f=(0,t.useRef)(r);f.current=r,(0,t.useEffect)(()=>()=>{g((0,c.e)({cleanupAction:f.current}))},[g])}},76770:(H,T,e)=>{"use strict";e.d(T,{q:()=>c});var t=e(81168),n=e(86245);const c=s=>{const r=(0,t.useSelector)(g=>g.navIndex);return(0,n.ht)(r,s)}},96044:(H,T,e)=>{"use strict";e.d(T,{K:()=>s});var t=e(68404),n=e(70356),c=e(37932);function s(){const{search:r}=(0,n.TH)(),g=(0,t.useMemo)(()=>(0,c.Ox)(r||""),[r]),f=(0,t.useCallback)((o,l)=>c.E1.partial(o,l),[]);return[g,f]}},19719:(H,T,e)=>{"use strict";e.d(T,{D_:()=>l,a2:()=>o,k$:()=>f});const t="en-US",n="fr-FR",c="es-ES",s="de-DE",r="zh-Hans",g="pseudo-LOCALE",f=t,o=[{code:t,name:"English",loader:()=>Promise.resolve({})},{code:n,name:"Fran\xE7ais",loader:()=>e.e(6419).then(e.t.bind(e,58756,19))},{code:c,name:"Espa\xF1ol",loader:()=>e.e(6008).then(e.t.bind(e,4253,19))},{code:s,name:"Deutsch",loader:()=>e.e(810).then(e.t.bind(e,90810,19))},{code:r,name:"\u4E2D\u6587\uFF08\u7B80\u4F53\uFF09",loader:()=>e.e(5001).then(e.t.bind(e,35001,19))}],l=o.map(a=>a.code)},35287:(H,T,e)=>{"use strict";e.d(T,{$q:()=>d,cC:()=>l,t:()=>m,uC:()=>f});var t=e(36509),n=e(68404),c=e(4696),s=e(45710),r=e(19719);const g={type:"backend",init(){},async read(p,h,y){const v=r.a2.find(u=>u.code===p);if(!v)return y(new Error("No message loader available for "+p),null);const i=await v.loader();y(null,i)}};function f(p){const h=r.D_.includes(p)?p:r.k$;return m("_comment","Do not manually edit this file, or update these source phrases in Crowdin. The source of truth for English strings are in the code source"),t.ZP.use(g).use(c.Db).init({lng:h,partialBundledLanguages:!0,resources:{},returnEmptyString:!1,pluralSeparator:"__"})}function o(p){const h=VALID_LANGUAGES.includes(p)?p:DEFAULT_LANGUAGE;return i18n.changeLanguage(h)}const l=p=>n.createElement(s.c,{...p}),a=t.ZP.t,m=(p,h,y)=>a(p,h,y),d=(p,h={})=>{if(typeof p=="string")return d(new Date(p),h);const y=t.ZP.options.lng??r.k$;return new Intl.DateTimeFormat(y,h).format(p)}},37959:(H,T,e)=>{"use strict";e.d(T,{Qp:()=>x,aB:()=>j,UW:()=>N,nu:()=>F,Ce:()=>ee,Bz:()=>pe});var t=e(82897),n=e(46060),c=e(36683),s=e(85526),r=e(90595),g=e(16911),f=e(71895),o=e(14582),l=e(66926),a=e(15355),m=e(46519),d=e(8928),p=e(38849),h=e(33180),y=e(38685),v=e(49922),i=e(8428),u=e(40538),P=e(16514),E=e(2525),C=e(47694);function b(Q,G){return C.ZP.bootData.user.lightTheme?G:Q}var S=e(81042);const M="Line limit",x="Common labels",O={[r.in.critical]:P.O9[7],[r.in.warning]:P.O9[1],[r.in.error]:P.O9[4],[r.in.info]:P.O9[0],[r.in.debug]:P.O9[5],[r.in.trace]:P.O9[2],[r.in.unknown]:b("#8e8e8e","#bdc4cd")},L=1,B=1e3*L,w=60*B,R=60*w,A=24*R,U=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-6]\d[,\.]\d+([+-][0-2]\d:[0-5]\d|Z)/g;function I(Q,G,q){switch(q){case r.Y4.exact:return Q.entry.replace(U,"")===G.entry.replace(U,"");case r.Y4.numbers:return Q.entry.replace(/\d/g,"")===G.entry.replace(/\d/g,"");case r.Y4.signature:return Q.entry.replace(/\w/g,"")===G.entry.replace(/\w/g,"");default:return!1}}function N(Q,G){return G===r.Y4.none?Q:Q.reduce((q,X,de)=>{const Be={...X},ke=q[q.length-1];return de>0&&I(X,ke,G)?ke.duplicates++:(Be.duplicates=0,q.push(Be)),q},[])}function F(Q,G){return G.size===0?Q:Q.filter(q=>!G.has(q.logLevel))}function D(Q,G){const q={},X=[];for(const de of Q){let Be=q[de.logLevel];Be||(q[de.logLevel]=Be={lastTs:null,datapoints:[],target:de.logLevel,color:O[de.logLevel]},X.push(Be));const ke=Math.floor(de.timeEpochMs/G)*G;ke===Be.lastTs?Be.datapoints[Be.datapoints.length-1][0]++:(Be.datapoints.push([1,ke]),Be.lastTs=ke);for(const He of X)He!==Be&&He.lastTs!==ke&&(He.datapoints.push([0,ke]),He.lastTs=ke)}return X.map((de,Be)=>{de.datapoints.sort((Oe,Fe)=>Oe[1]-Fe[1]);const ke=(0,g.g0)(de),ue=new f.N(ke).getFirstFieldOfType(o.fS.number);return ke.fields[ue.index].config.min=0,ke.fields[ue.index].config.decimals=0,ke.fields[ue.index].config.color={mode:l.S.Fixed,fixedColor:de.color},ke.fields[ue.index].config.custom={drawStyle:u.l8.Bars,barAlignment:u.pu.Center,barWidthFactor:.9,barMaxWidth:5,lineColor:de.color,pointColor:de.color,fillColor:de.color,lineWidth:0,fillOpacity:100,stacking:{mode:u.o0.Normal,group:"A"}},ke})}function Y(Q){return Q.fields.some(G=>G.type===o.fS.time)&&Q.fields.some(G=>G.type===o.fS.string)}function j(Q,G,q,X){const{logSeries:de}=z(Q),Be=J(de,X);if(Be){if(G&&Be.rows.length>0){const ke=Be.rows.sort(S.DA),{visibleRange:He,bucketSize:ue,visibleRangeMs:Oe,requestedRangeMs:Fe}=K(ke,G,q);Be.visibleRange=He,Be.series=D(ke,ue),Be.meta&&(Be.meta=Ee(Be,Oe,Fe))}else Be.series=[];return Be.queries=X,Be}return{hasUniqueLabels:!1,rows:[],meta:[],series:[],queries:X}}function K(Q,G,q,X=20,de=1e3){let Be=q,ke=G,He=Math.max(ke*X,de),ue,Oe;if(q){const Fe=Q[0].timeEpochMs;if(Oe=q.to-q.from,ue=q.to-Fe,ue>0){const Ie=ue/Oe;ke*=Ie,He=Math.max(Math.ceil(ke*X),de),Be={from:Math.floor(Fe/He)*He,to:q.to}}else ue=1}return{bucketSize:He,visibleRange:Be,visibleRangeMs:ue,requestedRangeMs:Oe}}function z(Q){const G=[],q=[];for(const X of Q){if(Y(X)||!X.fields.length){q.push(X);continue}X.length>0&&G.push(X)}return{logSeries:q,metricSeries:G}}function Z(Q){const{stringField:G,labelsField:q}=Q;return q!==void 0?q.values.toArray():[G.labels??{}]}function ae(Q,G){const{stringField:q,labelsField:X}=Q;return X!==void 0?X.values.get(G):q.labels??{}}function J(Q,G=[]){if(Q.length===0)return;const q=[];let X=[];const de=Q.filter(qe=>qe.fields.length);de.length&&de.forEach(qe=>{const Je=new f.N(qe),lt=Je.getFirstFieldOfType(o.fS.string),at=Je.getFirstFieldOfType(o.fS.time),Xe=qe.meta?.custom?.frameType==="LabeledTimeValues"?Je.getFieldByName("labels"):void 0;if(lt!==void 0&&at!==void 0){const gt={series:qe,timeField:at,labelsField:Xe,timeNanosecondField:Je.getFieldByName("tsNs"),stringField:lt,logLevelField:Je.getFieldByName("level"),idField:oe(Je)};X.push(gt);const ot=Z(gt);ot.length>0&&q.push(ot)}});const Be=q.flat(),ke=Be.length>0?(0,a.FT)(Be):{},He=[];let ue=!1;for(const qe of X){const{timeField:Je,timeNanosecondField:lt,stringField:at,logLevelField:Xe,idField:gt,series:ot}=qe;for(let Ye=0;Ye<ot.length;Ye++){const mt=Je.values.get(Ye),ce=(0,m.zh)(mt),be=lt?lt.values.get(Ye):void 0,Te=be||ce.valueOf()+"000000",Ke=at.values.get(Ye)??"",ge=typeof Ke=="string"?Ke:JSON.stringify(Ke),Me=d.QX.hasAnsiCodes(ge),ye=!!ge.match(/\\n|\\t|\\r/),fe=ot.meta&&ot.meta.searchWords?ot.meta.searchWords:[],he=Me?E._J.strip(ge):ge,De=ae(qe,Ye),Ae=(0,a.IU)(De,ke);Object.keys(Ae).length>0&&(ue=!0);let Ne=r.in.unknown;const Ze=Xe&&Xe.values.get(Ye)||De&&De.level;Ze?Ne=(0,S.jx)(Ze):Ne=(0,S.ZO)(he);const Se=G.find(Ue=>Ue.refId===ot.refId)?.datasource?.type;He.push({entryFieldIndex:at.index,rowIndex:Ye,dataFrame:ot,logLevel:Ne,timeFromNow:(0,p.E8)(mt),timeEpochMs:ce.valueOf(),timeEpochNs:Te,timeLocal:(0,p.dq)(mt,{timeZone:"browser"}),timeUtc:(0,p.dq)(mt,{timeZone:"utc"}),uniqueLabels:Ae,hasAnsi:Me,hasUnescapedContent:ye,searchWords:fe,entry:he,raw:ge,labels:De||{},uid:gt?gt.values.get(Ye):Ye.toString(),datasourceType:Se})}}const Oe=[];(0,t.size)(ke)>0&&Oe.push({label:x,value:ke,kind:r.Ku.LabelsMap});const Ie=Q.filter(qe=>qe.meta&&qe.meta.limit).reduce((qe,Je)=>(qe[Je.refId??""]=Je.meta?.limit??0,qe),{}),we=Object.values(Ie).reduce((qe,Je)=>qe+=Je,0);we>0&&Oe.push({label:M,value:we,kind:r.Ku.Number});let Re=0;const _e={};let et=!1;for(const qe of Q){const Je=qe.meta?.custom?.lokiQueryStatKey,{refId:lt}=qe;if(!et&&qe.meta?.custom?.error&&(Oe.push({label:"",value:qe.meta?.custom.error,kind:r.Ku.Error}),et=!0),lt&&!_e[lt]){if(Je&&qe.meta?.stats){const at=qe.meta.stats.find(Xe=>Xe.displayName===Je);at&&(Re+=at.value)}_e[lt]=!0}}if(Re>0){const{text:qe,suffix:Je}=(0,i.i7)("B")(Re);Oe.push({label:"Total bytes processed",value:`${qe} ${Je}`,kind:r.Ku.String})}return{hasUniqueLabels:ue,meta:Oe,rows:He}}function oe(Q){const G=["id"];for(const q of G){const X=Q.getFieldByName(q);if(X)return X}}function Ee(Q,G,q){let X=[...Q.meta];const de=X.findIndex(ke=>ke.label===M),Be=de>=0&&X[de]?.value;if(Be&&Be>0){let ke;if(Be===Q.rows.length&&G&&q){const He=(G/q*100).toFixed(2);ke=`${Be} reached, received logs cover ${He}% (${h.msRangeToTimeString(G)}) of your selected time range (${h.msRangeToTimeString(q)})`}else ke=`${Be} (${Q.rows.length} returned)`;X[de]={label:M,value:ke,kind:r.Ku.String}}return X}function me(Q,G){const q=G&&Q===r.in.unknown?"logs":Q,X=O[Q];return{displayNameFromDS:q,color:{mode:l.S.Fixed,fixedColor:X},custom:{drawStyle:u.l8.Bars,barAlignment:u.pu.Center,lineColor:X,pointColor:X,fillColor:X,lineWidth:1,fillOpacity:100,stacking:{mode:u.o0.Normal,group:"A"}}}}function re(Q,G){const q={};return Q.forEach(X=>{const de=G(X);q[de]||(q[de]=[]),q[de].push(X)}),Object.keys(q).map(X=>le(q[X],me(X,Object.keys(q).length===1)))}function le(Q,G){const q=new y.v;if(!Q.length)return q;const X=Q[0].length,de=new f.N(Q[0]).getFirstFieldOfType(o.fS.time);return de&&(q.addField({name:"Time",type:o.fS.time},X),q.addField({name:"Value",type:o.fS.number,config:G},X),Q.forEach(Be=>{Be.fields.forEach(ke=>{if(ke.type===o.fS.number)for(let He=0;He<X;He++){const ue=q.get(He).Value,Oe=ke.values.get(He),Fe=ue===null&&Oe===null?null:(ue||0)+(Oe||0);q.set(He,{Value:Fe,Time:de.values.get(He)})}})})),q}function pe(Q,G,q){const X=q.range.to.valueOf()-q.range.from.valueOf(),de=se(G.scopedVars,X);return G.interval=de.interval,G.scopedVars.__interval={value:de.interval,text:de.interval},de.intervalMs!==void 0&&(G.intervalMs=de.intervalMs,G.scopedVars.__interval_ms={value:de.intervalMs,text:de.intervalMs}),G.hideFromInspector=!0,new n.y(Be=>{let ke=[];Be.next({state:v.Gu.Loading,error:void 0,data:[]});const He=Q.query(G),Oe=((0,c.b)(He)?He:(0,s.D)(He)).subscribe({complete:()=>{const Fe=re(ke,q.extractLevel);Fe[0]&&(Fe[0].meta={custom:{targets:q.targets,absoluteRange:{from:q.range.from.valueOf(),to:q.range.to.valueOf()}}}),Be.next({state:v.Gu.Done,error:void 0,data:Fe}),Be.complete()},next:Fe=>{const{error:Ie}=Fe;Ie!==void 0?(Be.next({state:v.Gu.Error,error:Ie,data:[]}),Be.error(Ie)):ke=ke.concat(Fe.data.map(g.g0))},error:Fe=>{Be.next({state:v.Gu.Error,error:Fe,data:[]}),Be.error(Fe)}});return()=>{Oe?.unsubscribe()}})}function ee(Q,G){return G.hideFromInspector=!0,new n.y(q=>{let X=[];q.next({state:v.Gu.Loading,error:void 0,data:[]});const de=Q.query(G),ke=((0,c.b)(de)?de:(0,s.D)(de)).subscribe({complete:()=>{q.next({state:v.Gu.Done,error:void 0,data:X}),q.complete()},next:He=>{const{error:ue}=He;ue!==void 0?(q.next({state:v.Gu.Error,error:ue,data:[]}),q.error(ue)):X=He.data.map(Oe=>{const Fe=(0,g.g0)(Oe),{timeIndex:Ie}=(0,g.sV)(Fe);return(0,g.aK)(Fe,Ie)})},error:He=>{q.next({state:v.Gu.Error,error:He,data:[]}),q.error(He)}});return()=>{ke?.unsubscribe()}})}function se(Q,G){if(Q.__interval){let q=Q.__interval_ms.value,X="";return G<B*5?(q=L,X="1ms"):q>R?(q=A,X="1d"):q>w?(q=R,X="1h"):q>B?(q=w,X="1m"):(q=B,X="1s"),{interval:X,intervalMs:q}}else return{interval:"$__interval"}}},96694:(H,T,e)=>{"use strict";e.d(T,{U:()=>n});var t=e(81168);function n(c){switch(c.kiosk){case"tv":return t.KioskMode.TV;case"1":case!0:return t.KioskMode.Full;default:return null}}},29494:(H,T,e)=>{"use strict";e.d(T,{r:()=>n});class t{constructor(){this.panelsRendered=0,this.enabled=void 0}renderingCompleted(){this.panelsRendered+=1,window.panelsRendered=this.panelsRendered}}const n=new t},98864:(H,T,e)=>{"use strict";e.d(T,{$l:()=>o,Av:()=>h,F6:()=>m,Jk:()=>d,VW:()=>p,ad:()=>l,hS:()=>a,mE:()=>v,vo:()=>i});var t=e(32557),n=e(81168);const c=25,s="notifications",r=`${s}/lastRead`,g={byId:C(),lastRead:Number.parseInt(window.localStorage.getItem(r)??`${Date.now()}`,10)},f=(0,t.oM)({name:"appNotifications",initialState:g,reducers:{notifyApp:(S,{payload:M})=>{Object.values(S.byId).some(x=>u(M,x)&&x.showing)||(S.byId[M.id]=M,b(S.byId))},hideAppNotification:(S,{payload:M})=>{M in S.byId&&(S.byId[M].showing=!1,b(S.byId))},clearNotification:(S,{payload:M})=>{delete S.byId[M],b(S.byId)},clearAllNotifications:S=>{S.byId={},b(S.byId)},readAllNotifications:(S,{payload:M})=>{S.lastRead=M}}}),{notifyApp:o,hideAppNotification:l,clearNotification:a,clearAllNotifications:m,readAllNotifications:d}=f.actions,p=f.reducer,h=S=>S.lastRead,y=S=>Object.values(S.byId).sort((M,x)=>x.timestamp-M.timestamp),v=S=>y(S).filter(P),i=S=>Object.values(S.byId).filter(M=>M.showing);function u(S,M){return S.icon===M.icon&&S.severity===M.severity&&S.text===M.text&&S.title===M.title}function P(S){return S.severity===n.AppNotificationSeverity.Warning||S.severity===n.AppNotificationSeverity.Error}function E(S){return typeof S=="object"&&S!==null&&"id"in S&&"icon"in S&&"title"in S&&"text"in S}function C(){const S=window.localStorage.getItem(s);if(!S)return{};const M=JSON.parse(S);return Object.values(M).every(x=>E(x))?M:{}}function b(S){const M=Object.values(S).filter(P).sort((x,O)=>O.timestamp-x.timestamp).slice(0,c).reduce((x,O)=>(x[O.id]={id:O.id,severity:O.severity,icon:O.icon,title:O.title,text:O.text,traceId:O.traceId,timestamp:O.timestamp,showing:O.showing},x),{});try{window.localStorage.setItem(s,JSON.stringify(M))}catch(x){console.error("Unable to persist notifications to local storage"),console.error(x)}}},61962:(H,T,e)=>{"use strict";e.d(T,{OQ:()=>o,V4:()=>a,gd:()=>l});var t=e(32557),n=e(35645),c=e(14617);const s=n.v.bootData?.navTree??[];function r(m){return m.map(d=>{const p=d.children&&r(d.children);return{...d,children:p,text:(0,c.Y)(d.id)??d.text,subTitle:(0,c.L)(d.id)??d.subTitle,emptyMessage:(0,c.Y)(d.emptyMessageId)}})}const g="starred/",f=(0,t.oM)({name:"navBarTree",initialState:()=>r(n.v.bootData?.navTree??[]),reducers:{setStarred:(m,d)=>{const p=m.find(u=>u.id==="starred"),{id:h,title:y,url:v,isStarred:i}=d.payload;if(p)if(i){p.children||(p.children=[]);const u={id:g+h,text:y,url:v};p.children.push(u),p.children.sort((P,E)=>P.text.localeCompare(E.text))}else{const u=p.children?.findIndex(P=>P.id===g+h)??-1;u>-1&&p?.children?.splice(u,1)}},updateDashboardName:(m,d)=>{const{id:p,title:h,url:y}=d.payload,v=m.find(i=>i.id==="starred");if(v){const i=v.children?.find(u=>u.id===p);i&&(i.text=h,i.url=y,v.children?.sort((u,P)=>u.text.localeCompare(P.text)))}}}}),{setStarred:o,updateDashboardName:l}=f.actions,a=f.reducer},14393:(H,T,e)=>{"use strict";e.d(T,{Cu:()=>f,G4:()=>h,H7:()=>d,Qz:()=>g,RL:()=>m});var t=e(32557),n=e(82897),c=e.n(n),s=e(47694),r=e(14617);const g="home";function f(){const y={},v=(0,n.cloneDeep)(s.ZP.bootData.navTree),i=v.find(P=>P.id===g),u=v.filter(P=>P.id!==g);return i&&o(y,[i]),o(y,u,y[g]),y}function o(y,v,i){const u=[];for(const P of v){const E={...P,text:(0,r.Y)(P.id)??P.text,subTitle:(0,r.L)(P.id)??P.subTitle,emptyMessage:(0,r.Y)(P.emptyMessageId),parentItem:i};E.id&&(y[E.id]=E),E.children&&o(y,E.children,E),u.push(E)}i&&(i.children=u),y["not-found"]={...l("Page not found","404 Error").node},y.error={...l("Page error","An unexpected error").node}}function l(y,v){const i={text:y,subTitle:v,icon:"exclamation-triangle"};return{node:i,main:i}}const a={},m=(0,t.PH)("navIndex/updateNavIndex"),d=(0,t.PH)("navIndex/updateConfigurationSubtitle"),p=(y,v)=>({...y,parentItem:{...y.parentItem,text:y.parentItem?.text??"",subTitle:v}}),h=(y=a,v)=>{if(m.match(v)){const i={},u=v.payload;for(const P of u.children)i[P.id]={...P,parentItem:u};return{...y,...i}}else if(d.match(v)){const i=`Organization: ${v.payload}`;return{...y,cfg:{...y.cfg,subTitle:i},datasources:p(y.datasources,i),correlations:p(y.correlations,i),users:p(y.users,i),teams:p(y.teams,i),plugins:p(y.plugins,i),"org-settings":p(y["org-settings"],i),apikeys:p(y.apikeys,i)}}return y}},86245:(H,T,e)=>{"use strict";e.d(T,{ht:()=>c,vw:()=>s});var t=e(14393);const n=()=>{const f={id:"not-found",text:"Page not found",icon:"exclamation-triangle",subTitle:"404 Error",url:"not-found"};return{node:f,main:f}},c=(f,o,l,a=!1)=>{if(f[o]){const m=f[o],d=a?m:s(m),p=r(d,o);return{node:m,main:p}}return l||n()};function s(f){return f.parentItem&&f.parentItem.id!==t.Qz?s(f.parentItem):f}function r(f,o){return f.id===o?{...f,active:!0}:f.children&&f.children.length>0?{...f,children:f.children.map(l=>r(l,o))}:f}const g=f=>`${f.main.text}${f.node.text?": "+f.node.text:""}`},42454:(H,T,e)=>{"use strict";e.d(T,{y:()=>n});var t=e(29930);class n{constructor(s){this.resourceUri=s}update(s){return t.ae.put(`/api/${this.resourceUri}/preferences`,s)}patch(s){return t.ae.patch(`/api/${this.resourceUri}/preferences`,s)}load(){return t.ae.get(`/api/${this.resourceUri}/preferences`)}}},38535:(H,T,e)=>{"use strict";e.d(T,{b:()=>s});var t=e(68404),n=e(96209),c=e(32434);class s{constructor(f){this._subject=new n.x,this._state=f}useState(){return r(this)}get state(){return this._state}setState(f){this._state={...this._state,...f},this._subject.next(this._state)}subscribeToState(f){return this._subject.subscribe(f)}}function r(g){const f=(0,c.N)();return(0,t.useEffect)(()=>{const o=g.subscribeToState({next:f});return()=>o.unsubscribe()},[g,f]),g.state}},29930:(H,T,e)=>{"use strict";e.d(T,{y$:()=>re,ae:()=>le,i:()=>pe});var t=e(96209),n=e(3363),c=e(46060),s=e(95484),r=e(16313),g=e(37537),f=e(53786),o=e(85526),l=e(39274),a=e(2101),m=e(14542),d=e(29236),p=e(94514),h=e(98356),y=e(44962),v=e(47994),i=e(67305),u=e(80136),P=e(44288),E=e(25318),C=e(7238),b=e(35645),S=e(97063),M=e(47694),x=e(53747),O=e(63163),L=e(52423),B=e(68404),w=e(72648),R=e(85511),A=e(17784),U=e(31403),I=e(7804),N=e(27581);const F=se=>{const Q=(0,w.l4)(),G=D(Q),q=(0,N.J)(Q),X=Boolean(se.maxConcurrentSessions),de=()=>{window.location.reload()};return B.createElement(R.h_,null,B.createElement("div",{className:q.modal},B.createElement(A.v,{title:"You have been automatically signed out",severity:"warning",className:G.infobox},B.createElement("div",{className:G.text},B.createElement("p",null,"Your session token was automatically revoked because you have reached",B.createElement("strong",null,` the maximum number of ${X?se.maxConcurrentSessions:""} concurrent sessions `),"for your account."),B.createElement("p",null,B.createElement("strong",null,"To resume your session, sign in again."),"Contact your administrator or visit the license page to review your quota if you are repeatedly signed out automatically.")),B.createElement(U.zx,{size:"md",variant:"primary",onClick:de},"Sign in"))),B.createElement("div",{className:(0,L.cx)(q.modalBackdrop,G.backdrop)}))},D=(0,I.B)(se=>({infobox:L.css`
      margin-bottom: 0;
    `,text:L.css`
      margin: ${se.spacing(1,0,2)};
    `,backdrop:L.css`
      background-color: ${se.colors.background.canvas};
      opacity: 0.8;
    `}));var Y=e(45984),j=e(8878),K=e(99822),z=(se=>(se[se.Pending=0]="Pending",se[se.InProgress=1]="InProgress",se[se.Done=2]="Done",se))(z||{});class Z{constructor(Q=!1){this.state={},this.queue=new t.x,this.updates=new t.x,this.add=(G,q)=>this.queue.next({id:G,options:q,state:0}),this.setInProgress=G=>this.queue.next({id:G,state:1}),this.setDone=G=>this.queue.next({id:G,state:2}),this.getUpdates=()=>this.updates.asObservable(),this.getUpdate=G=>{const q=Object.keys(G).filter(de=>G[de].state===1).length;return{noOfPending:Object.keys(G).filter(de=>G[de].state===0).length,noOfInProgress:q,state:G}},this.publishUpdate=(G,q)=>{this.printState(G,q),this.updates.next(G)},this.printState=(G,q)=>{if(!q)return;const X=Object.keys(G.state).reduce((de,Be)=>{const ke={id:Be,state:G.state[Be].state};return de.push(ke),de},[]);console.log("FetchQueue noOfStarted",G.noOfInProgress),console.log("FetchQueue noOfNotStarted",G.noOfPending),console.log("FetchQueue state",X)},this.queue.subscribe(G=>{const{id:q,state:X,options:de}=G;if(this.state[q]||(this.state[q]={state:0,options:{}}),X===2){delete this.state[q];const ke=this.getUpdate(this.state);this.publishUpdate(ke,Q);return}this.state[q].state=X,de&&(this.state[q].options=de);const Be=this.getUpdate(this.state);this.publishUpdate(Be,Q)})}}var ae=e(39409);class J{constructor(Q,G,q){const X=q?.http2Enabled?1e3:5;Q.getUpdates().pipe((0,m.h)(({noOfPending:de})=>de>0),(0,ae.b)(({state:de,noOfInProgress:Be})=>{const ke=Object.keys(de).filter(Fe=>de[Fe].state===z.Pending&&!(0,K.mu)(de[Fe].options.url)).reduce((Fe,Ie)=>{const we={id:Ie,options:de[Ie].options};return Fe.push(we),Fe},[]),He=Object.keys(de).filter(Fe=>de[Fe].state===z.Pending&&(0,K.mu)(de[Fe].options.url)).reduce((Fe,Ie)=>{const we={id:Ie,options:de[Ie].options};return Fe.push(we),Fe},[]),ue=Math.max(X-Be-ke.length,0),Oe=He.slice(0,ue);return ke.concat(Oe)})).subscribe(({id:de,options:Be})=>{G.add(de,Be)})}}class oe{constructor(Q,G){this.queue=new t.x,this.responses=new t.x,this.add=(q,X)=>{this.queue.next({id:q,options:X})},this.getResponses=q=>this.responses.asObservable().pipe((0,m.h)(X=>X.id===q)),this.queue.subscribe(q=>{const{id:X,options:de}=q;Q.setInProgress(X),this.responses.next({id:X,observable:G(de)})})}}var Ee=e(82002);const me="cancel_all_requests_request_id";class re{constructor(Q){this.inFlightRequests=new t.x,this.HTTP_REQUEST_CANCELED=-1,this.inspectorStream=new t.x,this.dependencies={fromFetch:l.U,appEvents:S.Z,contextSrv:Ee.Vt,logout:()=>{Ee.Vt.setLoggedOut(),window.location.reload()}},Q&&(this.dependencies={...this.dependencies,...Q}),this.noBackendCache=!1,this.internalFetch=this.internalFetch.bind(this),this.fetchQueue=new Z,this.responseQueue=new oe(this.fetchQueue,this.internalFetch),new J(this.fetchQueue,this.responseQueue,(0,M.iE)())}async request(Q){return await(0,n.n)(this.fetch(Q).pipe((0,a.U)(G=>G.data)))}fetch(Q){const G=(0,P.Z)(),q=this.fetchQueue;return new c.y(X=>{const de=new s.w0;return de.add(this.responseQueue.getResponses(G).subscribe(Be=>{de.add(Be.observable.subscribe(X))})),this.fetchQueue.add(G,Q),function(){q.setDone(G),de.unsubscribe()}})}internalFetch(Q){Q.requestId&&this.inFlightRequests.next(Q.requestId),Q=this.parseRequestOptions(Q);const G=(0,x.v)();G!==null&&G!==""&&(Q.headers||(Q.headers={}),b.v.jwtUrlLogin&&b.v.jwtHeaderName&&(Q.headers[b.v.jwtHeaderName]=`${G}`));const q=this.getFromFetchStream(Q),X=q.pipe(this.toFailureStream(Q)),de=q.pipe((0,m.h)(Be=>Be.ok===!0),(0,d.b)(Be=>{this.showSuccessAlert(Be),this.inspectorStream.next(Be)}));return(0,r.T)(de,X).pipe((0,p.K)(Be=>(0,g._)(this.processRequestError(Q,Be))),this.handleStreamCancellation(Q))}resolveCancelerIfExists(Q){this.inFlightRequests.next(Q)}cancelAllInFlightRequests(){this.inFlightRequests.next(me)}async datasourceRequest(Q){return(0,n.n)(this.fetch(Q))}parseRequestOptions(Q){const G=this.dependencies.contextSrv.user?.orgId;return Q.retry=Q.retry??0,(0,K.R8)(Q.url)&&(G&&(Q.headers=Q.headers??{},Q.headers["X-Grafana-Org-Id"]=G),Q.url.startsWith("/")&&(Q.url=Q.url.substring(1)),Q.headers?.Authorization&&(Q.headers["X-DS-Authorization"]=Q.headers.Authorization,delete Q.headers.Authorization),this.noBackendCache&&(Q.headers=Q.headers??{},Q.headers["X-Grafana-NoCache"]="true")),Q.hideFromInspector===void 0&&(Q.hideFromInspector=(0,K.R8)(Q.url)&&!(0,K.mu)(Q.url)),Q}getFromFetchStream(Q){const G=(0,j.Xv)(Q),q=(0,j.nS)(Q);return this.dependencies.fromFetch(G,q).pipe((0,h.z)(async X=>{const{status:de,statusText:Be,ok:ke,headers:He,url:ue,type:Oe,redirected:Fe}=X,Ie=Q.responseType??((0,j.rZ)(He)?"json":void 0),we=await(0,j.aO)(X,Ie);return{status:de,statusText:Be,ok:ke,data:we,headers:He,url:ue,type:Oe,redirected:Fe,config:Q}}),(0,y.B)())}toFailureStream(Q){const{isSignedIn:G}=this.dependencies.contextSrv.user;return q=>q.pipe((0,m.h)(X=>X.ok===!1),(0,h.z)(X=>{const{status:de,statusText:Be,data:ke}=X,He={status:de,statusText:Be,data:ke,config:Q};return(0,g._)(He)}),(0,v.a)(X=>X.pipe((0,h.z)((de,Be)=>{const ke=Be===0&&Q.retry===0;return de.status===401&&(0,K.R8)(Q.url)&&ke&&G?de.data?.error?.id==="ERR_TOKEN_REVOKED"?(this.dependencies.appEvents.publish(new Y.Dn({component:F,props:{maxConcurrentSessions:de.data?.error?.maxConcurrentSessions}})),(0,f.of)({})):(0,o.D)(this.loginPing()).pipe((0,p.K)(He=>(He.status===401&&this.dependencies.logout(),(0,g._)(He)))):(0,g._)(de)}))))}showApplicationErrorAlert(Q){}showSuccessAlert(Q){const{config:G}=Q;if(G.showSuccessAlert===!1||G.showSuccessAlert===void 0&&(G.method==="GET"||(0,K.mu)(G.url)||!(0,K.R8)(G.url)))return;const q=Q.data;q?.message&&this.dependencies.appEvents.emit(E.SI.alertSuccess,[q.message])}showErrorAlert(Q,G){if(Q.showErrorAlert===!1||Q.showErrorAlert===void 0&&((0,K.mu)(Q.url)||!(0,K.R8)(Q.url)))return;let q="",X=G.data.message;X.length>80&&(q=X,X="Error"),G.status===422&&(q=G.data.message,X="Validation failed"),this.dependencies.appEvents.emit(G.status<500?E.SI.alertWarning:E.SI.alertError,[X,q,G.data.traceID])}processRequestError(Q,G){return G.data=G.data??{message:"Unexpected error"},typeof G.data=="string"&&(G.data={message:G.data,error:G.statusText,response:G.data}),G.data&&!G.data.message&&typeof G.data.error=="string"&&(G.data.message=G.data.error),G.data.message&&setTimeout(()=>{G.isHandled||this.showErrorAlert(Q,G)},50),this.inspectorStream.next(G),G}handleStreamCancellation(Q){return G=>G.pipe((0,i.R)(this.inFlightRequests.pipe((0,m.h)(q=>{let X=!1;return Q&&Q.requestId&&Q.requestId===q&&(X=!0),q===me&&(X=!0),X}))),(0,u.T)(()=>({type:C.eA.Cancelled,cancelled:!0,data:null,status:this.HTTP_REQUEST_CANCELED,statusText:"Request was aborted",config:Q})))}getInspectorStream(){return this.inspectorStream}async get(Q,G,q,X){return this.request({...X,method:"GET",url:Q,params:G,requestId:q})}async delete(Q,G,q){return this.request({...q,method:"DELETE",url:Q,data:G})}async post(Q,G,q){return this.request({...q,method:"POST",url:Q,data:G})}async patch(Q,G,q){return this.request({...q,method:"PATCH",url:Q,data:G})}async put(Q,G,q){return this.request({...q,method:"PUT",url:Q,data:G})}withNoBackendCache(Q){return this.noBackendCache=!0,Q().finally(()=>{this.noBackendCache=!1})}loginPing(){return this.request({url:"/api/login/ping",method:"GET",retry:1})}search(Q){return this.get("/api/search",Q)}getDashboardByUid(Q){return Q.indexOf("/")>0&&b.v.featureToggles.dashboardsFromStorage?(0,O.$)().getDashboard(Q):this.get(`/api/dashboards/uid/${Q}`)}validateDashboard(Q){const G=JSON.stringify(Q,ee,2);return this.request({method:"POST",url:"/api/dashboards/validate",data:{dashboard:G},showSuccessAlert:!1,showErrorAlert:!1})}getPublicDashboardByUid(Q){return this.get(`/api/public/dashboards/${Q}`)}getFolderByUid(Q,G={}){const q=new URLSearchParams;return G.withAccessControl&&q.set("accesscontrol","true"),this.get(`/api/folders/${Q}?${q.toString()}`)}}const le=new re,pe=()=>le;function ee(se,Q){if(!(typeof Q=="number"&&!Number.isFinite(Q)))return Q}},82002:(H,T,e)=>{"use strict";e.d(T,{Vt:()=>a});var t=e(82897),n=e.n(t),c=e(33180),s=e(54899),r=e(66121),g=e(81168),f=e(47694);class o{constructor(){this.id=0,this.isGrafanaAdmin=!1,this.isSignedIn=!1,this.orgRole="",this.orgId=0,this.orgName="",this.login="",this.externalUserId="",this.orgCount=0,this.timezone="",this.fiscalYearStartMonth=0,this.helpFlags1=0,this.theme="dark",this.hasEditPermissionInFolders=!1,this.email="",this.name="",this.locale="",this.language="",this.weekStart="",this.gravatarUrl="",this.analytics={identifier:""},f.ZP.bootData.user&&(0,t.extend)(this,f.ZP.bootData.user)}}class l{constructor(){this.sidemenuSmallBreakpoint=!1,f.ZP.bootData||(f.ZP.bootData={user:{},settings:{},navTree:[]}),this.user=new o,this.isSignedIn=this.user.isSignedIn,this.isGrafanaAdmin=this.user.isGrafanaAdmin,this.isEditor=this.hasRole("Editor")||this.hasRole("Admin"),this.hasEditPermissionInFolders=this.user.hasEditPermissionInFolders,this.minRefreshInterval=f.ZP.minRefreshInterval}async fetchUserPermissions(){try{this.accessControlEnabled()&&(this.user.permissions=await(0,s.i)().get("/api/access-control/user/actions",{reloadcache:!0}))}catch(p){console.error(p)}}setLoggedOut(){this.user.isSignedIn=!1,this.isSignedIn=!1}hasRole(p){return p==="ServerAdmin"?this.isGrafanaAdmin:this.user.orgRole===p}accessControlEnabled(){return f.ZP.rbacEnabled}licensedAccessControlEnabled(){return(0,r.v)("accesscontrol")&&f.ZP.rbacEnabled}hasPermissionInMetadata(p,h){return this.accessControlEnabled()?!!h.accessControl?.[p]:!0}hasPermission(p){return this.accessControlEnabled()?!!this.user.permissions?.[p]:!0}isGrafanaVisible(){return document.visibilityState===void 0||document.visibilityState==="visible"}isAllowedInterval(p){return f.ZP.minRefreshInterval?c.intervalToMs(p)>=c.intervalToMs(f.ZP.minRefreshInterval):!0}getValidInterval(p){return this.isAllowedInterval(p)?p:f.ZP.minRefreshInterval}hasAccessToExplore(){return this.accessControlEnabled()?this.hasPermission(g.AccessControlAction.DataSourcesExplore)&&f.ZP.exploreEnabled:(this.isEditor||f.ZP.viewersCanEdit)&&f.ZP.exploreEnabled}hasAccess(p,h){return this.accessControlEnabled()?this.hasPermission(p):h}hasAccessInMetadata(p,h,y){return this.accessControlEnabled()?this.hasPermissionInMetadata(p,h):y}evaluatePermission(p,h){return this.accessControlEnabled()?h.some(y=>this.hasPermission(y))?[]:["Reject"]:p()}}let a=new l;const m=d=>{throw new Error("contextSrv can be only overridden in test environment")}},13019:(H,T,e)=>{"use strict";e.d(T,{Z:()=>o});var t=e(82897),n=e.n(t),c=e(54899),s=e(47694),r=e(58379);class g{constructor(){}addDashboardImpression(a){const m=this.impressionKey();let d=[];r.Z.exists(m)&&(d=JSON.parse(r.Z.get(m)),(0,t.isArray)(d)||(d=[])),d=d.filter(p=>a!==p),d.unshift(a),d.length>50&&d.pop(),r.Z.set(m,JSON.stringify(d))}async convertToUIDs(){let a=this.getImpressions();const m=(0,t.filter)(a,p=>(0,t.isNumber)(p));if(!m.length)return;const d=await(0,c.i)().get(`/api/dashboards/ids/${m.join(",")}`);r.Z.set(this.impressionKey(),JSON.stringify([...(0,t.filter)(a,p=>(0,t.isString)(p)),...d]))}getImpressions(){const a=r.Z.get(this.impressionKey())||"[]";return JSON.parse(a)}async getDashboardOpened(){try{await this.convertToUIDs()}catch{}return(0,t.filter)(this.getImpressions(),m=>(0,t.isString)(m))}impressionKey(){return"dashboard_impressions-"+s.ZP.bootData.user.orgId}}const o=new g},5534:(H,T,e)=>{"use strict";e.d(T,{L:()=>f,X:()=>o});var t=e(36328),n=e(82378),c=e(97063),s=e(47694),r=e(77582),g=e(42454);async function f(l,a){const m=(0,t.j)({colors:{mode:l}});if(m.flags.topnav=s.vc.featureToggles.topnav,c.Z.publish(new n.hD(m)),s.vc.theme2.isDark=m.isDark,a)return;const d=document.createElement("link");if(d.rel="stylesheet",d.href=s.vc.bootData.themePaths[m.colors.mode],d.onload=()=>{const y=document.getElementsByTagName("link");for(let v=0;v<y.length;v++){const i=y[v];i.href&&i.href.includes(`build/grafana.${m.isDark?"light":"dark"}`)&&i.remove()}},document.body.appendChild(d),!r.Vt.isSignedIn)return;const p=new g.y("user"),h=await p.load();await p.update({...h,theme:m.colors.mode})}async function o(l){const a=s.vc.theme2;f(a.isDark?"light":"dark",l)}},58379:(H,T,e)=>{"use strict";e.d(T,{Z:()=>c});class t{get(r){return window.localStorage[r]}set(r,g){window.localStorage[r]=g}getBool(r,g){return g!==void 0&&!this.exists(r)?g:window.localStorage[r]==="true"}getObject(r,g){let f=g;if(this.exists(r)){const o=window.localStorage[r];try{f=JSON.parse(o)}catch(l){console.error(`Error parsing store object: ${r}. Returning default: ${g}. [${l}]`)}}return f}setObject(r,g){let f;try{f=JSON.stringify(g)}catch(o){throw new Error(`Could not stringify object: ${r}. [${o}]`)}try{this.set(r,f)}catch(o){const l=new Error(`Could not save item in localStorage: ${r}. [${o}]`);throw o instanceof Error&&(l.name=o.name),l}return!0}exists(r){return window.localStorage[r]!==void 0}delete(r){window.localStorage.removeItem(r)}}const c=new t},4050:(H,T,e)=>{"use strict";e.d(T,{W:()=>o,Z:()=>l});var t=e(82897),n=e.n(t),c=e(29076),s=e(20112);function r(a,m){if(!a)return!1;if(a[0]==="/"){const d=(0,c.jO)(a);return m.match(d)!=null}return a===m}function g(a){return a===0?.001:a/10}function f(a){return a?{colors:[{opacity:0},{opacity:a/10}]}:null}function o(a,m,d){for(let p=0;p<a.length;p++){const h=a[p],y=m.yaxes,v=h.yaxis||1,i=y[v-1],u=(0,s.Cf)(i.format);(0,t.isNumber)(m.decimals)?h.updateLegendValues(u,m.decimals):(0,t.isNumber)(i.decimals)?h.updateLegendValues(u,i.decimals+1):h.updateLegendValues(u,null)}}class l{constructor(m){this.datapoints=m.datapoints,this.label=m.alias,this.id=m.alias,this.alias=m.alias,this.aliasEscaped=(0,t.escape)(m.alias),this.color=m.color,this.bars={fillColor:m.color},this.valueFormater=(0,s.Cf)("none"),this.stats={},this.legend=!0,this.unit=m.unit,this.dataFrameIndex=m.dataFrameIndex,this.fieldIndex=m.fieldIndex,this.hasMsResolution=this.isMsResolutionNeeded()}applySeriesOverrides(m){this.lines={},this.dashes={dashLength:[]},this.points={},this.yaxis=1,this.zindex=0,this.nullPointMode=null,delete this.stack,delete this.bars.show;for(let d=0;d<m.length;d++){const p=m[d];r(p.alias,this.alias)&&(p.lines!==void 0&&(this.lines.show=p.lines),p.dashes!==void 0&&(this.dashes.show=p.dashes,this.lines.lineWidth=0),p.points!==void 0&&(this.points.show=p.points),p.bars!==void 0&&(this.bars.show=p.bars),p.fill!==void 0&&(this.lines.fill=g(p.fill)),p.fillGradient!==void 0&&(this.lines.fillColor=f(p.fillGradient)),p.stack!==void 0&&(this.stack=p.stack),p.linewidth!==void 0&&(this.lines.lineWidth=this.dashes.show?0:p.linewidth,this.dashes.lineWidth=p.linewidth),p.dashLength!==void 0&&(this.dashes.dashLength[0]=p.dashLength),p.spaceLength!==void 0&&(this.dashes.dashLength[1]=p.spaceLength),p.nullPointMode!==void 0&&(this.nullPointMode=p.nullPointMode),p.pointradius!==void 0&&(this.points.radius=p.pointradius),p.steppedLine!==void 0&&(this.lines.steps=p.steppedLine),p.zindex!==void 0&&(this.zindex=p.zindex),p.fillBelowTo!==void 0&&(this.fillBelowTo=p.fillBelowTo),p.color!==void 0&&this.setColor(p.color),p.transform!==void 0&&(this.transform=p.transform),p.legend!==void 0&&(this.legend=p.legend),p.hideTooltip!==void 0&&(this.hideTooltip=p.hideTooltip),p.yaxis!==void 0&&(this.yaxis=p.yaxis),p.hiddenSeries!==void 0&&(this.hiddenSeries=p.hiddenSeries))}}getFlotPairs(m){const d=[];this.stats.total=0,this.stats.max=-Number.MAX_VALUE,this.stats.min=Number.MAX_VALUE,this.stats.logmin=Number.MAX_VALUE,this.stats.avg=null,this.stats.current=null,this.stats.first=null,this.stats.delta=0,this.stats.diff=null,this.stats.diffperc=0,this.stats.range=null,this.stats.timeStep=Number.MAX_VALUE,this.allIsNull=!0,this.allIsZero=!0;const p=m==="connected",h=m==="null as zero";let y,v,i=0,u,P=0,E=!0;for(let C=0;C<this.datapoints.length;C++){if(v=this.datapoints[C][0],y=this.datapoints[C][1],u!==void 0){const b=y-u;b<this.stats.timeStep&&(this.stats.timeStep=b)}if(u=y,v===null){if(p)continue;h&&(v=0)}v!==null&&((0,t.isNumber)(v)&&(this.stats.total+=v,this.allIsNull=!1,i++),v>this.stats.max&&(this.stats.max=v),v<this.stats.min&&(this.stats.min=v),this.stats.first===null?this.stats.first=v:P>v?(E=!1,C===this.datapoints.length-1&&(this.stats.delta+=v)):(E?this.stats.delta+=v-P:this.stats.delta+=v,E=!0),P=v,v<this.stats.logmin&&v>0&&(this.stats.logmin=v),v!==0&&(this.allIsZero=!1)),d.push([y,v])}return this.stats.max===-Number.MAX_VALUE&&(this.stats.max=null),this.stats.min===Number.MAX_VALUE&&(this.stats.min=null),d.length&&!this.allIsNull&&(this.stats.avg=this.stats.total/i,this.stats.current=d[d.length-1][1],this.stats.current===null&&d.length>1&&(this.stats.current=d[d.length-2][1])),this.stats.max!==null&&this.stats.min!==null&&(this.stats.range=this.stats.max-this.stats.min),this.stats.current!==null&&this.stats.first!==null&&(this.stats.diff=this.stats.current-this.stats.first,this.stats.diffperc=this.stats.diff/this.stats.first),this.stats.count=d.length,d}updateLegendValues(m,d){this.valueFormater=m,this.decimals=d}formatValue(m){return(0,t.isFinite)(m)||(m=null),(0,s.zc)(this.valueFormater(m,this.decimals))}isMsResolutionNeeded(){for(let m=0;m<this.datapoints.length;m++)if(this.datapoints[m][1]!==null&&this.datapoints[m][1]!==void 0){const d=this.datapoints[m][1].toString();if(d.length===13&&d%1e3!==0)return!0}return!1}hideFromLegend(m){return!!(m.hideEmpty&&this.allIsNull||!this.legend||m.hideZero&&this.allIsZero)}setColor(m){this.color=m,this.bars.fillColor=m}}},92973:(H,T,e)=>{"use strict";e.d(T,{E:()=>g,f:()=>r});var t=e(68404),n=e(82378),c=e(72648),s=e(77582);const r=({children:f,value:o})=>{const[l,a]=(0,t.useState)(o);return(0,t.useEffect)(()=>{const m=s.h$.subscribe(n.hD,d=>{a(d.payload)});return()=>m.unsubscribe()},[]),t.createElement(c.Ni.Provider,{value:l},f)},g=(f,o)=>function(a){return t.createElement(r,{value:o},t.createElement(f,{...a}))}},77410:(H,T,e)=>{"use strict";e.d(T,{q:()=>t});class t extends window.Worker{constructor(c,s){const r=c.toString(),g=r.split("/");g.pop();const f=`${g.join("/")}/`,o=`importScripts('${r}');`,l=URL.createObjectURL(new Blob([`__webpack_worker_public_path__ = '${f}'; ${o}`],{type:"application/javascript"}));super(l,s),URL.revokeObjectURL(l)}}},95156:(H,T,e)=>{"use strict";e.d(T,{y:()=>n});var t=e(47694);function n(c={}){return t.ZP.rbacEnabled?{...c,accesscontrol:!0}:c}},2024:(H,T,e)=>{"use strict";e.d(T,{A:()=>t});function t(c){return c.map(n).sort((s,r)=>r.sortRank-s.sortRank||s.name.localeCompare(r.name))}function n(c){const s=c;return s.sortRank=0,s.userId>0?(s.name=s.userLogin,s.sortRank=10):s.teamId>0?(s.name=s.team,s.sortRank=20):s.role&&(s.icon="fa fa-fw fa-street-view",s.name=s.role,s.sortRank=30,s.role==="Editor"&&(s.sortRank+=1)),s.inherited&&(s.sortRank+=100),s}},79378:(H,T,e)=>{"use strict";e.d(T,{R:()=>t});const t=(n,c,s)=>(n.splice(s,0,n.splice(c,1)[0]),n)},43226:(H,T,e)=>{"use strict";e.d(T,{vl:()=>c});function t(){const s=navigator.userAgent.indexOf("MSIE")>-1,r=navigator.userAgent.indexOf("Edge/")>-1||navigator.userAgent.indexOf("Edg/")>-1,g=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,f=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),o=/Edge\/([0-9.]+)/.exec(navigator.userAgent);return s&&parseFloat(/Trident\/([0-9.]+)/.exec(navigator.userAgent)[1])<=7||r&&(o&&parseFloat(o[1])<=16||parseFloat(/Edg\/([0-9.]+)/.exec(navigator.userAgent)[1])<=16)||g&&parseFloat(/Firefox\/([0-9.]+)/.exec(navigator.userAgent)[1])<=64?!1:!(f&&parseFloat(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1])<=54)}function n(){return/(iPhone|iPad|Mac)/.test(navigator.platform)}function c(){return n()?"cmd":"ctrl"}},28630:(H,T,e)=>{"use strict";e.d(T,{kJ:()=>c});class t{_linkTo(f,o){o<=0&&f.inputEdges.push(this),o>=0&&f.outputEdges.push(this),f.edges.push(this)}link(f,o){if(!f)throw Error("inputNode is required");if(!o)throw Error("outputNode is required");return this.unlink(),this.inputNode=f,this.outputNode=o,this._linkTo(f,1),this._linkTo(o,-1),this}unlink(){let f;const o=this.inputNode,l=this.outputNode;o&&l&&(f=o.edges.indexOf(this),f>-1&&o.edges.splice(f,1),f=l.edges.indexOf(this),f>-1&&l.edges.splice(f,1),f=o.outputEdges.indexOf(this),f>-1&&o.outputEdges.splice(f,1),f=l.inputEdges.indexOf(this),f>-1&&l.inputEdges.splice(f,1))}}class n{constructor(f){this.name=f,this.edges=[],this.inputEdges=[],this.outputEdges=[]}getEdgeFrom(f){return f?typeof f=="object"?this.inputEdges.find(o=>o.inputNode?.name===f.name):this.inputEdges.find(o=>o.inputNode?.name===f):null}getEdgeTo(f){return f?typeof f=="object"?this.outputEdges.find(o=>o.outputNode?.name===f.name):this.outputEdges.find(o=>o.outputNode?.name===f):null}getOptimizedInputEdges(){const f=[];return this.inputEdges.forEach(o=>{o.inputNode?.inputEdges.map(a=>a.inputNode)?.forEach(a=>{const m=a?.getEdgeTo(this.name);m&&f.push(m)})}),this.inputEdges.filter(o=>f.indexOf(o)===-1)}}class c{constructor(){this.nodes={}}createNode(f){const o=new n(f);return this.nodes[f]=o,o}createNodes(f){const o=[];return f.forEach(l=>{o.push(this.createNode(l))}),o}link(f,o){let l=[],a=[];const m=[],d=[];f instanceof Array?l=f:l=[f],o instanceof Array?a=o:a=[o];for(let h=0;h<l.length;h++){const y=l[h];if(typeof y=="string"){const v=this.getNode(y);if(!v)throw Error(`cannot link input node named ${y} since it doesn't exist in graph`);m.push(v)}else m.push(y)}for(let h=0;h<a.length;h++){const y=a[h];if(typeof y=="string"){const v=this.getNode(y);if(!v)throw Error(`cannot link output node named ${y} since it doesn't exist in graph`);d.push(v)}else d.push(y)}const p=[];return m.forEach(h=>{d.forEach(y=>{p.push(this.createEdge().link(h,y))})}),p}descendants(f){if(!f.length)return new Set;const o=new Set(r(f)?f.map(l=>this.nodes[l]).filter(l=>l!==void 0):f);return this.descendantsRecursive(o)}descendantsRecursive(f,o=new Set){for(const l of f){const a=new Set;for(const{inputNode:m}of l.inputEdges)m&&!o.has(m)&&(o.add(m),a.add(m));this.descendantsRecursive(a,o)}return o}createEdge(){return new t}getNode(f){return this.nodes[f]}}const s=g=>{Object.keys(g.nodes).forEach(f=>{const o=g.nodes[f];let l=o.outputEdges.map(m=>m.outputNode?.name).join(", ");l||(l="<none>");let a=o.inputEdges.map(m=>m.inputNode?.name).join(", ");a||(a="<none>"),console.log(`${o.name}:
 - links to:   ${l}
 - links from: ${a}`)})};function r(g){return g.length>0&&typeof g[0]=="string"}},82052:(H,T,e)=>{"use strict";e.d(T,{i:()=>c});var t=e(82897),n=e.n(t);function c(s){return s&&!(0,t.isString)(s)?s.message?s.message:s.data&&s.data.message?s.data.message:s.statusText?s.statusText:JSON.stringify(s):s}},55935:(H,T,e)=>{"use strict";e.d(T,{$$:()=>K,F3:()=>me,H6:()=>b,HI:()=>R,I$:()=>C,J5:()=>w,OQ:()=>z,Oy:()=>Ee,RZ:()=>re,UI:()=>i,Xh:()=>B,Xk:()=>A,Z8:()=>N,Zf:()=>S,_Q:()=>Y,_o:()=>I,fR:()=>U,n9:()=>pe,uC:()=>M,vP:()=>ae,z_:()=>D});var t=e(82897),n=e.n(t),c=e(44288),s=e(90595),r=e(27677),g=e(40400),f=e(69311),o=e(33180),l=e(46519),a=e(21053),m=e(86647),d=e(5562),p=e(58379),h=e(97573),y=e(47694),v=e(99822);const i={from:"now-1h",to:"now"},u={dedupStrategy:s.Y4.none},P=100,E="grafana.explore.datasource",C=ee=>`${E}.${ee}`;async function b(ee){const{panel:se,datasourceSrv:Q,timeSrv:G}=ee;let q=await Q.get(se.datasource),X=se.targets.map(Be=>(0,t.omit)(Be,"legendFormat")).filter(Be=>Be.datasource?.uid!==h.Yq),de;if(y.vc.featureToggles.exploreMixedDatasource===!1&&q.meta?.id==="mixed"&&X)for(const Be of X){const ke=await Q.get(Be.datasource||void 0);if(ke){q=ke,X=se.targets.filter(He=>He.datasource===ke.name);break}}if(q){let ke={range:G.timeRangeForUrl()};if(q.interpolateVariablesInQueries){const ue=se.scopedVars||{};ke={...ke,datasource:q.name,context:"explore",queries:q.interpolateVariablesInQueries(X,ue)}}else ke={...ke,datasource:q.name,context:"explore",queries:X};const He=JSON.stringify(ke);de=r.Cj.renderUrl("/explore",{left:He})}return de}function S(ee,se,Q,G,q,X){const de=se.reduce((Oe,Fe)=>(Oe+=Fe.key,Oe),""),{interval:Be,intervalMs:ke}=le(G,Q.minInterval,Q.maxDataPoints),He=`${de}`,ue={app:g.zj.Explore,dashboardId:0,timezone:X||f.Ys,startTime:Date.now(),interval:Be,intervalMs:ke,panelId:He,targets:se,range:G,requestId:"explore_"+ee,rangeRaw:G.raw,scopedVars:{__interval:{text:Be,value:Be},__interval_ms:{text:ke,value:ke}},maxDataPoints:Q.maxDataPoints,liveStreaming:Q.liveStreaming};return{queries:se,request:ue,scanning:q,id:R(),done:!1}}const M=({key:ee,...se})=>se,x=(ee,...se)=>se.some(Q=>ee.hasOwnProperty(Q));var O=(ee=>(ee[ee.RangeFrom=0]="RangeFrom",ee[ee.RangeTo=1]="RangeTo",ee[ee.Datasource=2]="Datasource",ee[ee.SegmentsStart=3]="SegmentsStart",ee))(O||{});const L=ee=>{if(ee)try{return JSON.parse(ee)}catch(se){console.error(se)}},B=(ee,se)=>{if(!ee)return"";try{return JSON.stringify(ee,null,se)}catch(Q){console.error(Q)}return""};function w(ee){const se=L(ee),Q={datasource:null,queries:[],range:i,mode:null};if(!se)return Q;if(!Array.isArray(se))return{...se,isFromCompactUrl:!1};if(se.length<=3)return console.error("Error parsing compact URL state for Explore."),Q;const G={from:se[0],to:se[1]},q=se[2],X=se.slice(3),de=X.filter(ke=>!x(ke,"ui","mode","__panelsState")),Be=X.find(ke=>x(ke,"__panelsState"))?.__panelsState;return{datasource:q,queries:de,range:G,panelsState:Be,isFromCompactUrl:!0}}function R(ee=0){return`Q-${(0,c.Z)()}-${ee}`}async function A(ee,se=0,Q){let G,q,X;return Q?q=Q:ee.length>0&&ee[ee.length-1].datasource?q=ee[ee.length-1].datasource:(G=await(0,m.F)().get(),X=G.getDefaultQuery?.(g.zj.Explore),q=G.getRef()),G||(G=await(0,m.F)().get(q),X=G.getDefaultQuery?.(g.zj.Explore)),{refId:(0,v.Hs)(ee),key:R(se),datasource:q,...X}}const U=(ee,se,Q=0)=>{const G=R(Q),q=ee.refId||(0,v.Hs)(se);return{...ee,refId:q,key:G}},I=ee=>{const se=ee.map(Q=>Q.datasource?.uid);return{allHaveDatasource:se.length===ee.length,noneHaveDatasource:se.length===0,allDatasourceSame:se.every((Q,G,q)=>Q===q[0])}};async function N(ee,se){if(ee&&typeof ee=="object"&&ee.length>0){const Q=[];for(let G=0;G<ee.length;G++){const q=ee[G],X=R(G);let de=q.refId;de||(de=(0,v.Hs)(Q));let Be=!0;if(q.datasource)try{await(0,m.F)().get(q.datasource.uid)}catch{console.error("One of the queries has a datasource that is no longer available and was removed."),Be=!1}Be&&Q.push({...q,refId:de,key:X})}return Q}try{const Q=se??(await(0,m.F)().get()).getRef();return[await A(ee??[],void 0,Q)]}catch{return[]}}const F=["refId","key","context","datasource"];function D(ee){return ee&&ee.some(se=>Object.keys(se).filter(G=>F.indexOf(G)===-1).map(G=>se[G]).filter(G=>G).length>0)}function Y(ee,se,Q){const G=Date.now();let q=ee;Q.forEach(de=>{q=[{query:de,ts:G},...q]}),q.length>P&&(q=q.slice(0,P));const X=`grafana.explore.history.${se}`;try{return p.Z.setObject(X,q),q}catch(de){return console.error(de),ee}}function j(ee){const se=`grafana.explore.history.${ee}`;store.delete(se)}const K=ee=>ee.reduce((Q,G,q)=>{const X=G.datasource?.uid||G.key;return Q.concat(`${X}-${q}`)},[]),z=(ee,se,Q)=>{let G=o.convertRawToRange(se,ee,Q);return G.to.isBefore(G.from)&&(G=o.convertRawToRange({from:G.raw.to,to:G.raw.from},ee,Q)),G},Z=ee=>{if(ee===null)return null;if((0,l.v9)(ee)||ee.indexOf("now")!==-1)return ee;if(ee.length===8)return(0,l.zh)(ee,"YYYYMMDD");if(ee.length===15)return(0,l.zh)(ee,"YYYYMMDDTHHmmss");if(ee.length===19)return(0,l.zh)(ee,"YYYY-MM-DD HH:mm:ss");if(ee.match(/^\d+$/)){const Q=parseInt(ee,10);return(0,l.zh)(Q)}const se=(0,l.zh)(ee);return se.isValid()?se:null},ae=(ee,se,Q)=>{const G={from:Z(ee.from),to:Z(ee.to)};return{from:a.parse(G.from,!1,se),to:a.parse(G.to,!0,se),raw:G}},J=ee=>{if(!ee||typeof ee!="object")return;if(ee.refId)return ee;const se=Object.keys(ee);for(let Q=0;Q<se.length;Q++){const G=se[Q],q=J(ee[G]);if(q)return q}},oe=ee=>{if(!ee)return[];if(typeof ee!="object")return[];const se=Object.keys(ee),Q=[];for(let G=0;G<se.length;G++){const q=se[G];if(q==="refId"){Q.push(ee[q]);continue}Q.push(oe(ee[q]))}return uniq(flatten(Q))},Ee=ee=>d.dP.isLive(ee)?s.UV.Ascending:s.UV.Descending,me=ee=>{let Q=`${window.location.protocol==="https:"?"wss://":"ws://"}${window.location.host}${y.vc.appSubUrl}`;return Q.endsWith("/")&&(Q=Q.slice(0,-1)),`${Q}${ee}`},re=ee=>{ee&&ee.unsubscribe()};function le(ee,se,Q){return Q?o.calculateInterval(ee,Q,se):{interval:"1s",intervalMs:1e3}}const pe=ee=>{const se=document.createElement("textarea");se.value=ee,document.body.appendChild(se),se.select(),document.execCommand("copy"),document.body.removeChild(se)}},8878:(H,T,e)=>{"use strict";e.d(T,{Xv:()=>v,aO:()=>h,nS:()=>s,rZ:()=>d,tW:()=>y});var t=e(82897),n=e.n(t),c=e(99227);const s=u=>{const P=u.method,E=m(u),C=d(E),b=p(u,C),S=i(u);return{method:P,headers:E,body:b,credentials:S}},r={canParse:()=>!0,parse:u=>(u.get("accept")||u.set("accept","application/json, text/plain, */*"),u)},g=u=>({canParse:P=>(P?.method?P?.method.toLowerCase():"")===u,parse:P=>(P.get("content-type")||P.set("content-type","application/json"),P)}),f=g("post"),o=g("put"),l=g("patch"),a=[f,o,l,r],m=u=>{const P=u?.headers?new Headers(u.headers):new Headers;return a.filter(b=>b.canParse(u)).reduce((b,S)=>S.parse(b),P)},d=u=>{if(!u)return!1;const P=u.get("content-type");return!!(P&&P.toLowerCase()==="application/json")},p=(u,P)=>u&&(!u.data||typeof u.data=="string"?u.data:P?JSON.stringify(u.data):new URLSearchParams(u.data));async function h(u,P){if(P)switch(P){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"json":return u.headers.get("Content-Length")==="0"?(console.warn(`${u.url} returned an invalid JSON`),{}):await u.json();case"text":return u.text()}const E=await u.text();try{return JSON.parse(E)}catch{}return E}function y(u){return Object.keys(u).map(P=>{const E=u[P];return Array.isArray(E)?E.map(C=>`${encodeURIComponent(P)}=${encodeURIComponent(C)}`).join("&"):`${encodeURIComponent(P)}=${encodeURIComponent(E)}`}).join("&")}const v=u=>{const P=(0,t.omitBy)(u.params,C=>C===void 0||C&&C.length===0),E=y(P);return u.params&&E.length?`${u.url}?${E}`:u.url},i=u=>u&&(u.credentials?u.credentials:u.withCredentials?((0,c.d)("BackendSrvRequest","withCredentials","credentials"),"include"):"same-origin")},40229:(H,T,e)=>{"use strict";e.r(T),e.d(T,{default:()=>t});function t(n,c){c=c||{};const s=c.delimiter||".";let r=c.maxDepth||3,g=1;const f={};function o(l,a){Object.keys(l).forEach(m=>{const d=l[m],p=c?.safe&&Array.isArray(d),y=Object.prototype.toString.call(d)==="[object Object]",v=a?a+s+m:m;if(c?.maxDepth||(r=g+1),!p&&y&&Object.keys(d).length&&g<r)return++g,o(d,v);f[v]=d})}return o(n,null),f}},24816:(H,T,e)=>{"use strict";e.d(T,{Z:()=>g});var t=e(99227),n=e(29076),c=e(33180),s=e(20112);const r={valueFormats:{},intervalRegex:/(\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,intervalsInSeconds:{y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001},regexEscape:f=>((0,t.d)("kbn.ts","kbn.regexEscape()","escapeRegex from @grafana/data"),(0,n.yI)(f)),roundInterval:f=>((0,t.d)("kbn.ts","kbn.roundInterval()","@grafana/data"),c.roundInterval(f)),secondsToHms:f=>((0,t.d)("kbn.ts","kbn.secondsToHms()","@grafana/data"),c.secondsToHms(f)),secondsToHhmmss:f=>{const o=[],l=Math.floor(f/3600),a=Math.floor(f%3600/60),m=Math.floor(f%3600%60);return l>9?o.push(""+l):o.push("0"+l),a>9?o.push(""+a):o.push("0"+a),m>9?o.push(""+m):o.push("0"+m),o.join(":")},toPercent:(f,o)=>Math.floor(f/o*1e4)/100+"%",addSlashes:f=>f.replace(/[\'\"\\0]/g,"\\$&"),describeInterval:f=>((0,t.d)("kbn.ts","kbn.describeInterval()","@grafana/data"),c.describeInterval(f)),intervalToSeconds:f=>((0,t.d)("kbn.ts","rangeUtil.intervalToSeconds()","@grafana/data"),c.intervalToSeconds(f)),intervalToMs:f=>((0,t.d)("kbn.ts","rangeUtil.intervalToMs()","@grafana/data"),c.intervalToMs(f)),calculateInterval:(f,o,l)=>((0,t.d)("kbn.ts","kbn.calculateInterval()","@grafana/data"),c.calculateInterval(f,o,l)),queryColorDot:(f,o)=>'<div class="icon-circle" style="'+["display:inline-block","color:"+f,"font-size:"+o+"px"].join(";")+'"></div>',slugifyForUrl:f=>f.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),stringToJsRegex:f=>((0,t.d)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),(0,n.jO)(f)),toFixed:(f,o)=>{if(f===null)return"";const l=o?Math.pow(10,Math.max(0,o)):1,a=String(Math.round(f*l)/l);if(a.indexOf("e")!==-1||f===0)return a;if(o!=null){const m=a.indexOf("."),d=m===-1?0:a.length-m-1;if(d<o)return(d?a:a+".")+String(l).slice(1,o-d+1)}return a},toFixedScaled:(f,o,l,a,m)=>l===null?r.toFixed(f,o)+m:r.toFixed(f,l+a)+m,roundValue:(f,o)=>{if(f===null)return null;const l=Math.pow(10,o),a=(l*f).toFixed(o);return Math.round(parseFloat(a))/l},getUnitFormats:s.QW};typeof Proxy<"u"?r.valueFormats=new Proxy(r.valueFormats,{get(f,o,l){if(typeof o!="string")throw{message:`Value format ${String(o)} is not a string`};const a=(0,s.Cf)(o);return a?(m,d,p,h)=>(0,s.zc)(a(m,d,p,h?"utc":"browser")):Reflect.get(f,o,l)}}):r.valueFormats=(0,s.Td)();const g=r},99822:(H,T,e)=>{"use strict";e.d(T,{DI:()=>c,Hs:()=>t,R8:()=>r,mu:()=>s,sB:()=>f,vH:()=>n});const t=o=>{for(let l=0;;l++){const a=g(l);if(!o.some(m=>m.refId===a))return a}};function n(o){const l=["refId","hide","key","queryType","datasource"];for(const a in o)if(a!=="label"&&!l.includes(a))return!1;return!0}function c(o,l,a){const m=l||{};return m.refId=t(o),m.hide=!1,!m.datasource&&a&&(m.datasource=a),[...o,m]}function s(o){return o.indexOf("api/datasources/proxy")!==-1||o.indexOf("api/ds/query")!==-1}function r(o){return!o.match(/^http/)}function g(o){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return o<l.length?l[o]:g(Math.floor(o/l.length)-1)+l[o%l.length]}function f(o){return o||void 0}},51424:(H,T,e)=>{"use strict";e.d(T,{As:()=>h.A,DR:()=>U,HK:()=>P,OH:()=>R,VI:()=>E,au:()=>y,bQ:()=>O,di:()=>u,gt:()=>C,k4:()=>A,kg:()=>i,rq:()=>M,rv:()=>S,t2:()=>x,ub:()=>v,y9:()=>b});var t=e(82897),n=e.n(t),c=e(27677),s=e(38849),r=e(86647),g=e(659),f=e(60499),o=e(3153),l=e(47694),a=e(66719),m=e(4420),d=e(12151),p=e(40967),h=e(43823);async function y(N,F,D,Y,j,K,z){const Z=D&&D.filter(ae=>I(ae));if(Z.length>0){let ae=!1,J=!1,oe;try{oe=(await(0,p.b)().addToRichHistory({datasourceUid:N,datasourceName:F??"",queries:Z,starred:Y,comment:j??""})).warning}catch(Ee){return Ee instanceof Error&&(Ee.name===d.j.StorageFull?(ae=!0,K&&(0,o.WI)((0,g.$l)((0,f.t_)(Ee.message)))):Ee.name!==d.j.DuplicatedEntry&&(0,o.WI)((0,g.$l)((0,f.t_)("Rich History update failed",Ee.message)))),{richHistoryStorageFull:ae,limitExceeded:J}}return oe&&oe.type===d.V.LimitExceeded&&(J=!0,z&&(0,o.WI)((0,g.$l)((0,f.ZR)(oe.message)))),{richHistoryStorageFull:ae,limitExceeded:J}}return{}}async function v(N){return await(0,p.b)().getRichHistory(N)}async function i(N){await(0,p.b)().updateSettings(N)}async function u(){return await(0,p.b)().getSettings()}async function P(){return(0,p.b)().deleteAll()}async function E(N,F){try{return await(0,p.b)().updateStarred(N,F)}catch(D){D instanceof Error&&(0,o.WI)((0,g.$l)((0,f.t_)("Saving rich history failed",D.message)));return}}async function C(N,F){try{return await(0,p.b)().updateComment(N,F)}catch(D){D instanceof Error&&(0,o.WI)((0,g.$l)((0,f.t_)("Saving rich history failed",D.message)));return}}async function b(N){try{return await(0,p.b)().deleteRichHistory(N),N}catch(F){F instanceof Error&&(0,o.WI)((0,g.$l)((0,f.t_)("Saving rich history failed",F.message)));return}}var S=(N=>(N.Successful="successful",N.Failed="failed",N.NotNeeded="not-needed",N))(S||{});async function M(){const N=new a.ZP,F=new m.Z;try{const{richHistory:D}=await N.getRichHistory({datasourceFilters:[],from:0,search:"",sortOrder:h.A.Descending,starred:!1,to:14});return D.length===0?{status:"not-needed"}:(await F.migrate(D),(0,o.WI)((0,g.$l)((0,f.AT)("Query history successfully migrated from local storage"))),{status:"successful"})}catch(D){const Y=D instanceof Error?D:new Error("Uknown error occurred.");return(0,o.WI)((0,g.$l)((0,f.ZR)(`Query history migration failed. ${Y.message}`))),{status:"failed",error:Y}}}const x=N=>{const F={range:{from:"now-1h",to:"now"},datasource:N.datasourceName,queries:N.queries,context:"explore"},D=(0,c.S)(F),Y=/.*(?=\/explore)/.exec(`${window.location.href}`)[0];return c.Cj.renderUrl(`${Y}/explore`,{left:D})},O=N=>{let F;switch(N){case 0:F="today";break;case 1:F="yesterday";break;case 7:F="a week ago";break;case 14:F="two weeks ago";break;default:F=`${N} days ago`}return F};function L(N){return(0,s.dq)(N,{format:"MMMM D"})}function B(N){const F=(0,t.omit)(N,["key","refId","datasource"]);return JSON.stringify(F)}function w(N,F){let D="";return F===h.A.DatasourceAZ||F===h.A.DatasourceZA?D=N.datasourceName:D=L(N.createdAt),D}function R(N,F){return F?.getQueryDisplayText?F.getQueryDisplayText(N):B(N)}function A(N,F){let D={};return N.forEach(Y=>{let j=w(Y,F);j in D?D[j]=[...D[j],Y]:D[j]=[Y]}),D}function U(){return(0,r.F)().getList({mixed:l.vc.featureToggles.exploreMixedDatasource===!0}).map(N=>({name:N.name,uid:N.uid,imgUrl:N.meta.info.logos.small}))}function I(N){const F=(0,t.omit)(N,["key","refId","datasource"]);return Object.keys(F).length>0}},43823:(H,T,e)=>{"use strict";e.d(T,{A:()=>t});var t=(n=>(n.Descending="Descending",n.Ascending="Ascending",n.DatasourceAZ="Datasource A-Z",n.DatasourceZA="Datasource Z-A",n))(t||{})},57465:(H,T,e)=>{"use strict";e.d(T,{D:()=>a,L:()=>m});var t=e(58635),n=e(35645),c=e(54899),s=e(659),r=e(60499),g=e(3153),f=e(55935);function o(){return`${window.location.protocol}//${window.location.host}${n.v.appSubUrl}`}function l(d){let p=d.replace(o(),"");return p.startsWith("/")?p.substring(1,p.length):p}const a=(0,t.Z)(async function(d){try{return(await(0,c.i)().post("/api/short-urls",{path:l(d)})).url}catch(p){console.error("Error when creating shortened link: ",p),(0,g.WI)((0,s.$l)((0,r.t_)("Error generating shortened link")))}}),m=async d=>{const p=await a(d);p?((0,f.n9)(p),(0,g.WI)((0,s.$l)((0,r.AT)("Shortened link copied to clipboard")))):(0,g.WI)((0,s.$l)((0,r.t_)("Error generating shortened link")))}},97724:(H,T,e)=>{"use strict";e.r(T),e.d(T,{getFlotRange:()=>s,getFlotTickDecimals:()=>r,getFlotTickSize:()=>c,getPrecision:()=>o,getScaledDecimals:()=>n,getStringPrecision:()=>l,grafanaTimeFormat:()=>g,logp:()=>f,tickStep:()=>t});function t(a,m,d){const p=Math.sqrt(50),h=Math.sqrt(10),y=Math.sqrt(2),v=Math.abs(m-a)/Math.max(0,d);let i=Math.pow(10,Math.floor(Math.log(v)/Math.LN10));const u=v/i;return u>=p?i*=10:u>=h?i*=5:u>=y&&(i*=2),m<a?-i:i}function n(a,m){return a-Math.floor(Math.log(m)/Math.LN10)}function c(a,m,d,p){const h=(m-a)/d;let y=-Math.floor(Math.log(h)/Math.LN10);const v=p,i=Math.pow(10,-y),u=h/i;let P;return u<1.5?P=1:u<3?(P=2,u>2.25&&(v==null||y+1<=v)&&(P=2.5,++y)):u<7.5?P=5:P=10,P*=i,P}function s(a,m,d,p){let y=+(a??d),v=+(m??p);const i=v-y;if(i===0){const P=Math.abs(v===0?1:v*.25);a===null&&(y-=P),(m==null||a!=null)&&(v+=P)}else .02!=null&&(a==null&&(y-=i*.02,y<0&&d!=null&&d>=0&&(y=0)),m==null&&(v+=i*.02,v>0&&p!=null&&p<=0&&(v=0)));return{min:y,max:v}}function r(a,m,d,p){const{min:h,max:y}=s(d.min,d.max,a,m),v=.3*Math.sqrt(p),i=(y-h)/v,u=-Math.floor(Math.log(i)/Math.LN10),P=Math.pow(10,-u),E=i/P;let C;E<1.5?C=1:E<3?(C=2,E>2.25&&(C=2.5)):E<7.5?C=5:C=10,C*=P;const b=Math.max(0,-Math.floor(Math.log(i)/Math.LN10)+1),S=b-Math.floor(Math.log(C)/Math.LN10);return{tickDecimals:b,scaledDecimals:S}}function g(a,m,d){if(m&&d&&a){const p=d-m,h=p/a/1e3,y=864e5,v=31536e6;return h<=45?"HH:mm:ss":h<=7200||p<=y?"HH:mm":h<=8e4?"MM/DD HH:mm":h<=2419200||p<=v?"MM/DD":"YYYY-MM"}return"HH:mm"}function f(a,m){return Math.log(a)/Math.log(m)}function o(a){const m=a.toString();return l(m)}function l(a){if(isNaN(a))return 0;const m=a.indexOf(".");return m===-1?0:a.length-m-1}},5242:(H,T,e)=>{"use strict";e.d(T,{e:()=>n,h:()=>c});var t=e(46519);const n=(s,r)=>{const g={from:(0,t.zh)(r.from),to:(0,t.zh)(r.to)},f=(g.to.valueOf()-g.from.valueOf())/2;let o,l;return s===-1?(o=g.to.valueOf()-f,l=g.from.valueOf()-f):s===1?(o=g.to.valueOf()+f,l=g.from.valueOf()+f,o>Date.now()&&g.to.valueOf()<Date.now()&&(o=Date.now(),l=g.from.valueOf())):(o=g.to.valueOf(),l=g.from.valueOf()),{from:l,to:o}},c=(s,r)=>{const g=s.to.valueOf()-s.from.valueOf(),f=s.to.valueOf()-g/2,o=g===0?3e4:g*r,l=f+o/2;return{from:f-o/2,to:l}}},53747:(H,T,e)=>{"use strict";e.d(T,{v:()=>n});let t="";const n=()=>{const s=new URLSearchParams(window.location.search).get("auth_token");return s!==null&&s!==""?(t=s,s):t}},25841:(H,T,e)=>{"use strict";e.r(T),e.d(T,{addExtensionReducers:()=>hm,init:()=>zm});var t=e(66121),n=e(35645),c=e(41818),s=e(77582),r=e(86475),g=e(10323),f=e(29408),o=e(81168),l=e(68082),a=e(68404),m=e(53217),d=e(39904);const p="licensedRole",h=[{value:"server_admin",label:"Server admin"},{value:"admin_editor",label:"Admin/editor"},{value:"viewer",label:"Viewer"}],y=({filters:V,onChange:ve,className:$e})=>a.createElement(m.NU,{value:V.find(ft=>ft.name===p)?.value,options:h,onChange:ft=>{ve({name:p,value:ft})},prefix:a.createElement(d.J,{name:"filter"}),width:64,placeholder:"Filter by licensed role",menuShouldPortal:!0,className:$e}),v=()=>{(0,l.addExtraFilters)(y)};var i=e(30562),u=e(52423),P=e(72648),E=e(8180),C=e(62316);class b extends C.R{}b.type="page-banner-display";var S=(V=>(V[V.info=0]="info",V[V.warning=1]="warning",V[V.error=2]="error",V))(S||{});function M(){const[V,ve]=(0,a.useState)(),$e=x(V?.severity),ft=(0,P.wW)(on=>O(on,$e));(0,a.useEffect)(()=>s.h$.subscribe(b,gn=>{ve(gn.payload)}).unsubscribe,[ve]);const Tt=(0,a.useCallback)(()=>{ve(void 0),V?.onClose&&V.onClose()},[V]);if(!V)return null;const Wt=V.body;return a.createElement("div",{className:ft.banner},a.createElement("div",{className:ft.icon},a.createElement(d.J,{size:"xl",name:$e.icon})),a.createElement("div",{className:ft.content},a.createElement(Wt,{severity:V.severity??S.info})),V?.onClose&&a.createElement("div",{className:ft.icon},a.createElement(E.h,{size:"xl",name:"times",onClick:Tt,className:ft.close})))}function x(V){const ve=(0,P.l4)();return(0,a.useMemo)(()=>{switch(V){case S.error:return{icon:"exclamation-triangle",background:ve.colors.error.main,text:ve.colors.error.contrastText};case S.warning:return{icon:"exclamation-triangle",background:ve.colors.warning.main,text:ve.colors.warning.contrastText};case S.info:default:return{icon:"info-circle",background:ve.colors.info.main,text:ve.colors.info.contrastText}}},[ve,V])}function O(V,ve){return{banner:u.css`
      flex-grow: 0;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      background-color: ${ve.background};
      border-radius: 2px;
      height: 52px;
    `,icon:u.css`
      padding: ${V.spacing(0,2)};
      color: ${ve.text};
      display: flex;
    `,content:u.css`
      flex-grow: 1;
      display: flex;
      align-items: center;
      color: ${ve.text};
    `,close:u.css`
      color: ${ve.text};
    `}}function L(){(0,i.nH)(M)}var B=e(70356),w=e(79396),R=e(86245),A=e(79508),U=e(36635),I=e(52081),N=e(39284),F=e(77293),D=e(40897),Y=e(96116),j=e(48649);Array.from(Array(31),(V,ve)=>{const $e=(ve+1).toString();return{value:$e,label:$e}}).unshift({value:"last",label:"Last"});const z=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}];var Z=(V=>(V.Monthly="monthly",V.Weekly="weekly",V.Daily="daily",V.Hourly="hourly",V.Never="never",V.Custom="custom",V.Once="once",V))(Z||{}),ae=(V=>(V.Hours="hours",V.Days="days",V.Weeks="weeks",V.Months="months",V))(ae||{}),J=(V=>(V.Default="",V.SentBy="sent-by",V.None="none",V))(J||{}),oe=(V=>(V.Paused="paused",V.Scheduled="scheduled",V.Expired="expired",V.Draft="draft",V.Never="not scheduled",V))(oe||{});const Ee=[{value:"landscape",label:"Landscape",icon:"gf-landscape"},{value:"portrait",label:"Portrait",icon:"gf-portrait"}],me=[{value:"grid",label:"Grid",icon:"gf-grid"},{value:"simple",label:"Simple",icon:"gf-layout-simple"}];var re=(V=>(V.SelectDashboard="select-dashboard",V.FormatReport="format-report",V.Schedule="schedule",V.Share="share",V.Confirm="confirm",V))(re||{}),le=(V=>(V.Stats="stats",V.Users="users",V.PublicDashboards="public-dashboards",V))(le||{}),pe=e(5238),ee=(V=>(V.ReportingCreate="reports:create",V.ReportingWrite="reports:write",V.ReportingDelete="reports:delete",V.ReportingRead="reports:read",V.ReportingSend="reports:send",V.ReportingSettingsWrite="reports.settings:write",V.ReportingSettingsRead="reports.settings:read",V.DataSourcesPermissionsRead="datasources.permissions:read",V.DataSourcesPermissionsWrite="datasources.permissions:write",V.DataSourcesCachingWrite="datasources.caching:write",V.LicensingRead="licensing:read",V.LicensingWrite="licensing:write",V.LicensingReportsRead="licensing.reports:read",V.DashboardsInsightsRead="dashboards.insights:read",V))(ee||{}),se=e(69142);const Q=V=>{const{enableDataSourceCache:ve,dataSource:$e,pageId:ft}=V,Tt=s.Vt.hasPermissionInMetadata(ee.DataSourcesCachingWrite,$e);return a.createElement(se.Z,{title:"Caching is not enabled for this data source.",buttonTitle:"Enable",buttonIcon:"database",onClick:()=>{ve(ft)},proTip:"Enabling caching can reduce the amount of redundant requests sent to the data source.",proTipLink:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",proTipLinkTitle:"Learn more",buttonDisabled:!Tt})};var G=e(31403),q=e(98102);const X=V=>{const{cleanCache:ve,dataSource:$e,pageId:ft}=V,[Tt,Wt]=(0,a.useState)(!1),on=Sn=>()=>{Wt(Sn)},gn=()=>{ve(ft),Wt(!1)},bn=s.Vt.hasPermissionInMetadata(ee.DataSourcesCachingWrite,$e);return a.createElement("div",null,a.createElement(G.zx,{variant:"destructive",onClick:on(!0),disabled:!bn},"Clear cache"),a.createElement(q.s,{isOpen:Tt,title:"Clear cache",body:"Warning: This action impacts all cache-enabled data sources. If you are using Memcached, the system clears all data from the Memcached instance. Do you want to continue?",confirmText:"Clear cache",onConfirm:gn,onDismiss:on(!1)}))};var de=e(24799),Be=e(8944),ke=e(46967),He=e(64353),ue=e(61860);const Oe=V=>{const{disableDataSourceCache:ve,dataSource:$e,pageId:ft}=V,Tt=s.Vt.hasPermissionInMetadata(ee.DataSourcesCachingWrite,$e);return a.createElement(G.zx,{variant:"destructive",onClick:()=>ve(ft),disabled:!Tt},"Disable")},Fe=V=>{const{updateDataSourceCache:ve,pageId:$e,useDefaultTTL:ft,setUseDefaultTTL:Tt,defaultTTLMs:Wt,ttlQueriesMs:on,setTtlQueriesMs:gn,ttlResourcesMs:bn,setTtlResourcesMs:Sn,loading:On,enabled:Pn,dataSource:na,dataSourceID:aa,dataSourceUID:la}=V,da=s.Vt.hasPermissionInMetadata(ee.DataSourcesCachingWrite,na);return a.createElement("div",null,a.createElement(de.g,{description:`Enable this to use the default TTL set in Grafana's configuration (${Wt} ms)`,label:"Use default TTL",disabled:On||!da},a.createElement(Be.r,{value:ft,onChange:()=>{Tt(!ft)}})),a.createElement(de.g,{description:"The time-to-live for a query cache item in milliseconds. Example: 5000",label:"Query TTL",disabled:On||ft||!da},a.createElement(ke.I,{type:"number",className:"max-width-10",placeholder:"1000",min:0,value:(ft?Wt:on)||0,onChange:sa=>{gn(sa.currentTarget.valueAsNumber)}})),a.createElement(de.g,{description:"The time-to-live for resources cache items in milliseconds. Example: 5000",label:a.createElement(He._,null,a.createElement("span",null,"Resource TTL"),a.createElement(ue.u,{content:a.createElement("div",null,"Resources are dynamic values that Grafana data source plugins retrieve from data sources for use in the query editor. Examples are Splunk namespaces, Prometheus labels, and CloudWatch metric names. Since these values update less frequently, you might prefer a longer cache TTL for Resources than queries. See the ",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/"},"docs")," ","for more info.")},a.createElement(d.J,{name:"question-circle"}))),disabled:On||ft||!da},a.createElement(ke.I,{type:"number",className:"max-width-10",placeholder:"1000",min:0,value:(ft?Wt:bn)||0,onChange:sa=>{Sn(sa.currentTarget.valueAsNumber)}})),a.createElement(I.Lh,{spacing:"md",align:"flex-start",justify:"flex-start"},a.createElement(Oe,{...V}),a.createElement(G.zx,{disabled:On||!da,onClick:()=>ve($e,{dataSourceID:aa,dataSourceUID:la,enabled:Pn,defaultTTLMs:Wt,ttlQueriesMs:on,ttlResourcesMs:bn,useDefaultTTL:ft})},"Save")))};var Ie=e(29930),we=(V=>(V.LoadDataSourceCache="LOAD_DATA_SOURCE_CACHE",V))(we||{});const Re=V=>({type:"LOAD_DATA_SOURCE_CACHE",payload:V});function _e(V){return async ve=>{const $e=await(0,Ie.i)().post(`/api/datasources/${V}/cache/enable`,{});ve(Re($e))}}function et(V){return async ve=>{const $e=await(0,Ie.i)().post(`/api/datasources/${V}/cache/disable`,{});ve(Re($e))}}function qe(V,ve){return async $e=>{const ft=await(0,Ie.i)().post(`/api/datasources/${V}/cache`,ve);$e(Re(ft))}}function Je(V){return async ve=>{const $e=await(0,Ie.i)().get(`/api/datasources/${V}/cache`);ve(Re($e))}}function lt(V){return async ve=>{const $e=await(0,Ie.i)().post(`/api/datasources/${V}/cache/clean`,{});ve(Re($e))}}function at(V,ve){return{...V.dataSourceCache,pageId:ve.uid,dataSource:V.dataSources.dataSource}}const Xe={disableDataSourceCache:et,updateDataSourceCache:qe,enableDataSourceCache:_e,loadDataSourceCache:Je,loadDataSource:D.gv,cleanCache:lt,loadDataSourceMeta:D.b2},gt=(0,U.connect)(at,Xe),ot=V=>{const[ve,$e]=(0,a.useState)(V.enabled),[ft,Tt]=(0,a.useState)(!0),[Wt,on]=(0,a.useState)(V.useDefaultTTL),[gn,bn]=(0,a.useState)(V.ttlQueriesMs),[Sn,On]=(0,a.useState)(V.ttlResourcesMs),{pageId:Pn,dataSource:na,loadDataSource:aa,loadDataSourceCache:la,loadDataSourceMeta:da,enableDataSourceCache:sa}=V;(0,a.useEffect)(()=>{$e(V.enabled),on(V.useDefaultTTL),bn(V.ttlQueriesMs),On(V.ttlResourcesMs),Tt(!1)},[V.useDefaultTTL,V.ttlQueriesMs,V.ttlResourcesMs,V.enabled]),(0,a.useEffect)(()=>{aa(Pn).then(da),la(Pn)},[la,aa,da,Pn]);const Ia=s.Vt.hasPermissionInMetadata(ee.DataSourcesCachingWrite,na),Ma=ve?Fe({...V,loading:ft,useDefaultTTL:Wt,setUseDefaultTTL:on,ttlQueriesMs:gn,setTtlQueriesMs:bn,ttlResourcesMs:Sn,setTtlResourcesMs:On}):(0,F.d5)()?a.createElement(Ye,{action:Ia?{text:"Enable caching",onClick:()=>{sa(Pn)}}:void 0}):Q(V);return a.createElement(a.Fragment,null,(0,F.d5)()&&a.createElement(N.Xz,{featureId:"query-caching",eventVariant:"trial",featureName:"query caching",text:"Enable query caching for free during your trial of Grafana Pro."}),a.createElement("div",{className:"page-action-bar"},ve&&!(0,F.d5)()&&a.createElement("h3",{className:"page-sub-heading"},"Caching"),a.createElement("div",{className:"page-action-bar__spacer"}),a.createElement(I.Lh,{spacing:"md",align:"flex-end",justify:"flex-end"},ve&&a.createElement(X,{...V}))),Ma)},Ye=({action:V})=>{const ve=(0,P.l4)();return a.createElement(N.TA,{action:V,listItems:["Load dashboards in less than a second from the cache, even when they include big queries and lots of users are looking at once","Save money and avoid rate limiting by reducing the number of API calls you make to data sources like Splunk, CloudWatch and Github","Author dashboards more smoothly by caching the data used to construct queries, like fields in ServiceNow or metrics available from Datadog"],image:`query-caching-${ve.isLight?"light":"dark"}.png`,featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/query-caching",featureName:"query caching",description:"With query caching, you can load dashboards faster and reduce costly queries to data sources by temporarily storing query results in memory, Redis, or Memcached."})},mt=gt(ot),ce=()=>{const{uid:V}=(0,B.UO)(),ve=(0,A.xG)("cache"),$e=(0,o.useSelector)(Tt=>Tt.navIndex),ft=(0,R.ht)($e,`datasource-cache-${V}`,ve);return a.createElement(w.T,{navId:"datasources",pageNav:ft.main},a.createElement(w.T.Contents,null,a.createElement(mt,{uid:V})))};var be=e(25e3);const Te=({uid:V})=>((0,be.E)(V),a.createElement(a.Fragment,null,a.createElement(N.Xz,{featureName:"query caching",featureId:"query-caching"}),a.createElement(Ye,null))),Ke=()=>{const{uid:V}=(0,B.UO)(),ve=(0,be.xG)("cache"),$e=(0,o.useSelector)(Tt=>Tt.navIndex),ft=(0,R.ht)($e,`datasource-cache-${V}`,ve);return a.createElement(w.T,{navId:"datasources",pageNav:ft.main},a.createElement(w.T.Contents,null,a.createElement(Te,{uid:V})))},ge={enabled:!1,dataSourceID:0,dataSourceUID:"",ttlQueriesMs:0,ttlResourcesMs:0,defaultTTLMs:0,useDefaultTTL:!0},ye={dataSourceCache:(V=ge,ve)=>{switch(ve.type){case we.LoadDataSourceCache:return{...ve.payload}}return V}};var fe=e(56090);const he=()=>{const{uid:V}=(0,B.UO)(),{navId:ve,pageNav:$e}=(0,fe.M)("cache");return a.createElement(w.T,{navId:ve,pageNav:$e},a.createElement(w.T.Contents,null,a.createElement(mt,{uid:V})))},De=()=>{const{uid:V}=(0,B.UO)(),{navId:ve,pageNav:$e}=(0,fe.M)("cache");return a.createElement(w.T,{navId:ve,pageNav:$e},a.createElement(w.T.Contents,null,a.createElement(Te,{uid:V})))};var Ae=e(89050),Ne=e(46519),Ze=e(19695),Se=e(14582),Ue=e(40538),Qe=e(87691),pt=e(24505),bt=e(17784),yt=e(36512),Mt=e(16911),At=e(72788),Pt=e(49922),rn=e(21760),Fn=e(66926),kn=e(7370),Jn=e(47513),qn=e(89890),Ut=e(16514);const ut=(V,ve,$e,ft,Tt,Wt)=>{const on=[],gn=(0,yt.U)({field:{config:{unit:Wt?.defaults?.unit,decimals:Tt.decimals}},theme:n.v.theme2,timeZone:ve});let bn=-1;for(const Sn of V){const{timeField:On}=(0,Mt.sV)(Sn);if(On)for(const Pn of Sn.fields){if(Pn.type!==Se.fS.number)continue;bn++;const na=(0,At.k)({xField:On,yField:Pn,nullValueMode:Pt.Gl.Null});if(na.length>0){const aa=(0,rn.Kx)({field:Pn,reducers:Tt.stats||[]});let la=[];Tt.stats&&(la=Tt.stats.map(Ma=>({...gn(aa[Ma]),title:Ma})));let da;$e[Pn.name]&&$e[Pn.name].color?da={mode:Fn.S.Fixed,fixedColor:$e[Pn.name].color}:Pn.config&&Pn.config.color?da=Pn.config.color:da={mode:Fn.S.Fixed,fixedColor:Ut.O9[on.length%Ut.O9.length]},Pn.config=Wt?{...Pn.config,unit:Wt.defaults.unit,decimals:Wt.defaults.decimals,color:da}:{...Pn.config,color:da},Pn.display=(0,yt.U)({field:Pn,timeZone:ve,theme:n.v.theme2});const sa=(0,kn.e)(On),Ia=(0,kn.f)(On);On.display=(0,yt.U)({timeZone:ve,field:{...On,type:On.type,config:{unit:Jn.U6.getTimeFieldUnit(Ia)}},theme:n.v.theme2}),on.push({label:(0,qn.C)(Pn,Sn,V),data:na,color:Pn.config.color?.fixedColor,info:la,isVisible:!0,yAxis:{index:$e[Pn.name]&&$e[Pn.name].yAxis||1},seriesIndex:bn,timeField:{...On},valueField:{...Pn},timeStep:sa})}}}return on};var nt=e(54899);const vt="YYYY-MM-DD",ht=async(V,ve)=>await(0,nt.i)().get(`/api/usage/dashboard/${V}/views/recent?limit=${ve}`),It=async(V,ve)=>await(0,nt.i)().get(`/api/usage/dashboard/${V}/views?limit=${ve}`),Ft=V=>{const ve=[];for(let $e in V)ve.push(V[$e]);return ve.sort(($e,ft)=>(0,Ne.CQ)($e.day,vt).valueOf()-(0,Ne.CQ)(ft.day,vt).valueOf()),ve},en=async(V,ve)=>{const $e=await(0,nt.i)().get(`/api/usage/dashboard/${V}/daily`,{days:ve});return Ft($e)},sn=async(V,ve)=>{const $e=await(0,nt.i)().get(`/api/usage/dashboard/${V}/public/daily`,{days:ve});return Ft($e)},Mn=async(V,ve,$e)=>{const ft=await(0,nt.i)().get(`/api/usage/datasource/${V}/daily`,{from:ve,to:$e});return Ft(ft)},En=async V=>await(0,nt.i)().get(`/api/usage/dashboard/${V}/info`);var yn=e(7804);const Bn=(0,yn.B)(V=>{const ve=V.colors.background.secondary;return{tabContent:u.css`
      height: 100%;
    `,tabsBar:u.css`
      padding-left: ${V.spacing(2)};
      margin: ${V.spacing(3,-1,-3,-3)};
    `,graphContainer:u.css`
      margin-top: ${V.spacing(2)};
      background-color: ${ve};
    `,panelContent:u.css`
      contain: none;
    `,userBoxesContainer:u.css`
      display: flex;
      margin-top: ${V.spacing(3)};

      > div + div {
        margin-left: ${V.spacing(2)};
      }
    `,userBox:u.css`
      padding: ${V.spacing(2)};
      flex: 1;
      text-align: center;
      background-color: ${ve};
      border-radius: 3px;

      button,
      img {
        margin: ${V.spacing(0,0,1,0)};
      }
    `,userName:u.css`
      font-weight: ${V.typography.fontWeightBold};
    `,tableContainer:u.css`
      margin-top: ${V.spacing(3)};
      background-color: ${ve};
      padding-bottom: ${V.spacing(1)};
      border-radius: 3px;

      [role='cell']:first-child > div {
        padding: 4px;
      }
      [role='columnheader']:first-child {
        height: 33px;
      }
      [role='row']:not(:only-child):nth-child(odd) {
        background-color: ${V.colors.background.primary};
      }
    `,tableHeader:u.css`
      padding: ${V.spacing(0,2,.5,2)};
      display: flex;
      justify-content: space-between;
      align-items: center;

      h4 {
        margin-bottom: 0px;
        padding: ${V.spacing(3,0)};
      }
    `,userIcon:u.css`
      margin: 0 0;
      width: 26px;
      height: 26px;
    `}}),ea=(V,ve)=>({dataSourceUid:ve.uid}),Qn={loadDataSource:D.gv,loadDataSourceMeta:D.b2},Kn=(0,U.connect)(ea,Qn);class Ua extends a.PureComponent{constructor(ve){super(ve),this.state={dailySummaries:[],from:"",to:""}}async componentDidMount(){const{dataSourceUid:ve,loadDataSource:$e,loadDataSourceMeta:ft}=this.props;if($e(ve).then(ft),(0,t.v)("analytics")){let Tt=(0,Ne.CQ)().subtract(30,"days").format(vt),Wt=(0,Ne.CQ)().format(vt);const on=await Mn(ve,Tt,Wt);this.setState({dailySummaries:on,from:Tt,to:Wt})}}buildTimeRange(){const{from:ve,to:$e}=this.state,ft=(0,Ne.CQ)(ve),Tt=(0,Ne.CQ)($e).add(24,"hours");return{from:ft,to:Tt,raw:{from:ve,to:$e}}}convertDailySummariesToDataFrame(ve,$e,ft){const Tt=new Ze.G([]),Wt=new Ze.G([]);return ve.forEach(on=>{Tt.buffer.push((0,Ne.CQ)(on.day,vt).valueOf());let gn=on[$e];$e==="loadDuration"&&(gn=on.queries?on.loadDuration/(on.queries*1e6):0),Wt.buffer.push(gn)}),{name:$e,fields:[{name:"Time",type:Se.fS.time,config:{},values:Tt},{name:$e,type:ft,config:{},values:Wt}],length:ve.length}}renderChart(ve,$e){const{dailySummaries:ft}=this.state,{color:Tt,fieldType:Wt,showBars:on,showLines:gn,timeRange:bn,title:Sn,valueField:On,width:Pn}=ve;let na=this.convertDailySummariesToDataFrame(ft,On,Wt);const aa={[On]:{color:Tt}},la=ut([na],"browser",aa,{showBars:on,showLines:gn,showPoints:!1},{placement:"bottom",displayMode:Ue.jK.List,showLegend:!1});return a.createElement("div",{className:(0,u.cx)($e.graphContainer,"panel-container"),"aria-label":"Graph container",key:ve.valueField},a.createElement("div",{className:"panel-title"},Sn),a.createElement("div",{className:(0,u.cx)("panel-content",$e.panelContent)},a.createElement(Qe.k,{height:150,width:Pn,timeRange:bn,showBars:on,showLines:gn,showPoints:!1,series:la,timeZone:"browser"},a.createElement(pt.I,{mode:Ue.f3.Multi}))))}renderContent(){const{theme:ve}=this.props,$e=Bn(ve),{dailySummaries:ft}=this.state,Tt=this.buildTimeRange();return ft?.length>0?a.createElement(Ae.Z,{disableHeight:!0},({width:Wt})=>{const on=[{title:"Queries last 30 days",valueField:"queries",fieldType:Se.fS.number,width:Wt,timeRange:Tt,color:"",showBars:!0,showLines:!1},{title:"Errors last 30 days",valueField:"errors",fieldType:Se.fS.number,width:Wt,timeRange:Tt,color:ve.colors.error.border,showBars:!0,showLines:!1},{title:"Average load duration last 30 days (ms)",valueField:"loadDuration",fieldType:Se.fS.number,width:Wt,timeRange:Tt,color:ve.colors.primary.border,showBars:!0,showLines:!1}];return a.createElement("main",{style:{width:Wt}},on.map(gn=>this.renderChart(gn,$e)))}):a.createElement("span",null,"No available data for this data source.")}render(){return(0,t.v)("analytics.writers")&&!(0,t.v)("analytics")?a.createElement(bt.v,{title:"Feature not available with an expired license",url:"https://grafana.com/docs/grafana/latest/enterprise/license-expiration/",urlTitle:"Read more on license expiration"},a.createElement("span",null,"Data source insights are not available with an expired license. Data will continue to be collected but you need to update your license to see this page.")):a.createElement(a.Fragment,null,(0,F.d5)()&&a.createElement(N.Xz,{featureId:"data-source-insights",eventVariant:"trial",featureName:"data source usage insights",text:"Enable data source usage insights for free during your trial of Grafana Pro."}),this.renderContent())}}const pa=Kn((0,P.HE)(Ua)),va=()=>{const{uid:V}=(0,B.UO)(),{navId:ve,pageNav:$e}=(0,fe.M)("insights");return a.createElement(w.T,{navId:ve,pageNav:$e},a.createElement(w.T.Contents,null,a.createElement(pa,{uid:V})))},za=({uid:V})=>{(0,be.E)(V);const ve=(0,P.l4)();return a.createElement(a.Fragment,null,a.createElement(N.Xz,{featureName:"data source usage insights",featureId:"data-source-insights"}),a.createElement(N.TA,{listItems:["Demonstrate and improve the value of your observability service by keeping track of user engagement","Keep Grafana performant by identifying and fixing slow, error-prone data sources","Clean up your instance by finding and removing unused data sources","Review individual data source usage insights at a glance in the UI, sort search results by usage and errors, or dig into detailed usage logs"],image:`datasource-insights-${ve.isLight?"light":"dark"}.png`,featureName:"data source usage insights",description:"Usage Insights provide detailed information about data source usage, like the number of views, queries, and errors users have experienced. You can use this to improve users\u2019 experience and troubleshoot issues",featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/usage-insights/dashboard-datasource-insights"}))},ja=()=>{const{uid:V}=(0,B.UO)(),{navId:ve,pageNav:$e}=(0,fe.M)("insights");return a.createElement(w.T,{navId:ve,pageNav:$e},a.createElement(w.T.Contents,null,a.createElement(za,{uid:V})))};var Ea=e(45253),ma=e(1108),Xa=e(94270),Oa=e(50796),ss=e(94080),Ks=e(28038);class Ss extends a.PureComponent{constructor(){super(...arguments),this.state=this.cleanState(),this.onTeamSelected=ve=>{const $e=ve?.value;this.setState({teamId:$e?$e.id:0})},this.onUserSelected=ve=>{this.setState({userId:ve?ve.id:0})},this.onPermissionChanged=ve=>{this.setState({permission:ve.value})},this.onTypeChanged=ve=>{this.setState({type:ve.value,userId:0,teamId:0})},this.onSubmit=async()=>{await this.props.onAddPermission(this.state),this.setState(this.cleanState())}}cleanState(){return{userId:0,teamId:0,type:o.AclTarget.Team,permission:o.DataSourcePermissionLevel.Query}}isValid(){switch(this.state.type){case o.AclTarget.Team:return this.state.teamId>0;case o.AclTarget.User:return this.state.userId>0}return!0}render(){const{onCancel:ve}=this.props,{type:$e}=this.state,ft="width-20",Tt=[{value:o.AclTarget.Team,label:"Team"},{value:o.AclTarget.User,label:"User"}];return a.createElement("div",{className:"cta-form","aria-label":"Permissions slider"},a.createElement(Oa.P,{onClick:ve}),a.createElement("h5",null,"Add Permission For"),a.createElement(Xa.l,{name:"addPermission",maxWidth:"none",onSubmit:this.onSubmit},()=>a.createElement(I.Lh,null,a.createElement(m.Ph,{"aria-label":"Role to add new permission to",isSearchable:!1,value:$e,options:Tt,onChange:this.onTypeChanged,menuShouldPortal:!0}),$e===o.AclTarget.User&&a.createElement(Ks.f,{onSelected:this.onUserSelected,className:ft}),$e===o.AclTarget.Team&&a.createElement(ss.c,{onSelected:this.onTeamSelected,className:ft}),a.createElement(m.Ph,{isSearchable:!1,options:o.dataSourceAclLevels,onChange:this.onPermissionChanged,value:o.dataSourceAclLevels.find(Wt=>Wt.value===this.state.permission),width:25,menuShouldPortal:!0}),a.createElement(G.zx,{type:"submit",disabled:!this.isValid()},"Save"))))}}var Bs=e(14835),ls=e(73757);const{Select:ws}=Bs.LegacyForms,qs={id:-1,datasourceId:-1,updated:"",created:"",permissionName:"Admin",builtInRole:"Admin",permission:ls.zV.Admin},Da={label:"Admin",description:"",value:ls.zV.Admin},Vs=({items:V,onRemoveItem:ve})=>{const $e=V.filter(Wt=>Wt.userId!==void 0),ft=V.filter(Wt=>Wt.teamId!==void 0),Tt=[qs];return a.createElement("div",null,a.createElement(Es,{title:"Roles",items:Tt,onRemove:ve}),a.createElement(Es,{title:"Users",items:$e,onRemove:ve}),a.createElement(Es,{title:"Teams",items:ft,onRemove:ve}))},Es=({title:V,items:ve,onRemove:$e})=>ve.length===0?null:a.createElement("div",null,a.createElement("h5",null,V),a.createElement("table",{className:"filter-table gf-form-group"},a.createElement("tbody",null,ve.map((ft,Tt)=>a.createElement(er,{key:`${Tt}-${ft.id}`,item:ft,onRemove:$e}))))),er=({item:V,onRemove:ve})=>{const $e=()=>V.teamId?a.createElement("img",{className:"filter-table__avatar",src:V.teamAvatarUrl,alt:`Avatar for team ${V.teamId}`}):V.userId?a.createElement("img",{className:"filter-table__avatar",src:V.userAvatarUrl,alt:`Avatar for user ${V.userId}`}):a.createElement(d.J,{size:"xl",name:"shield"}),ft=()=>V.userId?a.createElement("span",{key:"name"},V.userLogin," "):V.teamId?a.createElement("span",{key:"name"},V.team," "):V.builtInRole?a.createElement("span",{key:"name"},V.builtInRole," "):a.createElement("span",{key:"name"}),Tt=[...ls.nl,Da];return a.createElement("tr",null,a.createElement("td",{style:{width:"1%"}},$e()),a.createElement("td",{style:{width:"90%"}},ft()),a.createElement("td",null),a.createElement("td",{className:"query-keyword"},"Can"),a.createElement("td",null,a.createElement("div",{className:"gf-form"},a.createElement(ws,{isDisabled:!0,onChange:()=>{},options:Tt,value:Tt.find(Wt=>Wt.value===V.permission)}))),a.createElement("td",null,V.builtInRole?a.createElement("button",{className:"btn btn-inverse btn-small"},a.createElement(d.J,{name:"lock",size:"sm"})):a.createElement("button",{className:"btn btn-danger btn-small",onClick:()=>ve(V)},a.createElement(d.J,{name:"times",size:"sm"}))))},dr=({uid:V})=>((0,be.E)(V),a.createElement(a.Fragment,null,a.createElement(N.Xz,{featureName:"data source permissions",featureId:"data-source-permissions"}),a.createElement(es,null))),es=({action:V})=>{const ve=(0,P.l4)();return a.createElement(N.TA,{action:V,featureName:"data source permissions",description:"With data source permissions, you can protect sensitive data by limiting access to this data source to specific users, teams, and roles.",listItems:["Protect sensitive data, like security logs, production databases, and personally-identifiable information","Clean up users\u2019 experience by hiding data sources they don\u2019t need to use","Share Grafana access more freely, knowing that users will not unwittingly see sensitive data"],image:`ds-permissions-${ve.isLight?"light":"dark"}.png`,featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/datasource_permissions"})},tr=dr;var Is=(V=>(V.LoadDataSourcePermissions="LOAD_DATA_SOURCE_PERMISSIONS",V))(Is||{});const ts=V=>({type:"LOAD_DATA_SOURCE_PERMISSIONS",payload:V});function Zs(V){return async ve=>{const $e=await(0,Ie.i)().get(`/api/datasources/${V}/permissions`);ve(ts($e))}}function Xt(V){return async ve=>{await(0,Ie.i)().post(`/api/datasources/${V}/enable-permissions`,{}),ve(Zs(V))}}function kt(V){return async ve=>{await(0,Ie.i)().post(`/api/datasources/${V}/disable-permissions`,{}),ve(Zs(V))}}function vn(V,ve){return async $e=>{await(0,Ie.i)().post(`/api/datasources/${V}/permissions`,ve),$e(Zs(V))}}function An(V,ve){return async $e=>{await(0,Ie.i)().delete(`/api/datasources/${V}/permissions/${ve}`),$e(Zs(V))}}function Wn(V,ve){const{uid:$e}=ve;return{uid:$e,enabled:V.dataSourcePermission.enabled,isDefault:V.dataSources.dataSource.isDefault,permissions:V.dataSourcePermission.permissions}}const Xn={addDataSourcePermission:vn,enableDataSourcePermissions:Xt,disableDataSourcePermissions:kt,loadDataSourcePermissions:Zs,loadDataSource:D.gv,loadDataSourceMeta:D.b2,removeDataSourcePermission:An},Ha=(0,U.connect)(Wn,Xn);class Qa extends a.PureComponent{constructor(){super(...arguments),this.state={datasourceId:0,isAdding:!1},this.onOpenAddPermissions=()=>{this.setState({isAdding:!0})},this.onEnablePermissions=()=>{const{enableDataSourcePermissions:ve}=this.props;ve(this.state.datasourceId)},this.onDisablePermissions=()=>{const{disableDataSourcePermissions:ve}=this.props;ve(this.state.datasourceId)},this.onAddPermission=ve=>{const{addDataSourcePermission:$e}=this.props,ft={permission:ve.permission};ve.type===o.AclTarget.Team?$e(this.state.datasourceId,Object.assign(ft,{teamId:ve.teamId})):ve.type===o.AclTarget.User&&$e(this.state.datasourceId,Object.assign(ft,{userId:ve.userId}))},this.onRemovePermission=ve=>{this.props.removeDataSourcePermission(ve.datasourceId,ve.id)},this.onCancelAddPermission=()=>{this.setState({isAdding:!1})},this.isEnabled=()=>this.props.enabled,this.renderActions=()=>{const ve=[],{isAdding:$e}=this.state;return this.isEnabled()&&(ve.push(a.createElement(G.zx,{variant:"primary",key:"add-permission",onClick:this.onOpenAddPermissions,disabled:$e},"Add a permission")),ve.push(a.createElement(G.zx,{variant:"destructive",key:"disable-permissions",onClick:this.onDisablePermissions},"Disable permissions"))),ve}}componentDidMount(){this.fetchDataSource().then(ve=>{this.props.loadDataSourceMeta(ve),this.setState({datasourceId:ve.id}),this.fetchDataSourcePermissions(ve.id)})}async fetchDataSource(){const{uid:ve,loadDataSource:$e}=this.props;return $e(ve)}async fetchDataSourcePermissions(ve){const{loadDataSourcePermissions:$e}=this.props;return $e(ve)}render(){const{permissions:ve,isDefault:$e}=this.props,{isAdding:ft}=this.state;return a.createElement(a.Fragment,null,(0,F.d5)()&&a.createElement(N.Xz,{featureId:"data-source-permissions",eventVariant:"trial",featureName:"data source permissions",text:"Enable data source permissions for free during your trial of Grafana Pro."}),a.createElement("div",{className:"page-action-bar"},a.createElement("h3",{className:"page-sub-heading"},"Permissions"),a.createElement("div",{className:"page-action-bar__spacer"}),this.renderActions()),$e&&!this.isEnabled()&&a.createElement(Ea.b,{title:"Warning!"},"Enabling permissions on the default data source makes it unavailable for users not listed in the permissions."),this.isEnabled()?a.createElement("div",null,a.createElement(ma.s,{in:ft},a.createElement(Ss,{onAddPermission:Tt=>this.onAddPermission(Tt),onCancel:this.onCancelAddPermission})),a.createElement(Vs,{items:ve,onRemoveItem:this.onRemovePermission})):(0,F.d5)()?a.createElement(es,{action:{onClick:this.onEnablePermissions,text:"Enable permissions"}}):a.createElement(se.Z,{title:"Permissions not enabled for this data source.",buttonTitle:"Enable",buttonIcon:"unlock",onClick:this.onEnablePermissions,proTip:"Only admins will be able to query the data source after you enable permissions.",proTipLink:"https://docs.grafana.org/permissions/datasource_permissions/",proTipLinkTitle:"Learn more"}))}}const ka=Ha(Qa),ys=()=>{const{uid:V}=(0,B.UO)(),{navId:ve,pageNav:$e}=(0,fe.M)("permissions");return a.createElement(w.T,{navId:ve,pageNav:$e},a.createElement(w.T.Contents,null,a.createElement(ka,{uid:V})))};var xs=e(73546);function Ga(V,ve){const{uid:$e}=ve;return{resourceId:$e}}const or={loadDataSource:D.gv,loadDataSourceMeta:D.b2},mr=(0,U.connect)(Ga,or)(({resourceId:V,loadDataSource:ve,loadDataSourceMeta:$e})=>{(0,a.useEffect)(()=>{ve(V)},[V,ve]);const ft=s.Vt.hasPermission(ee.DataSourcesPermissionsWrite);return(0,a.useEffect)(()=>{ve(V).then($e)},[ve,$e,V]),a.createElement(a.Fragment,null,(0,F.d5)()&&a.createElement(N.Xz,{featureId:"data-source-permissions",eventVariant:"trial",featureName:"data source permissions",text:"Enable data source permissions for free during your trial of Grafana Pro."}),a.createElement(xs.P,{resource:"datasources",resourceId:V,canSetPermissions:ft}))}),Sr=()=>{const{uid:V}=(0,B.UO)(),{navId:ve,pageNav:$e}=(0,fe.M)("permissions");return a.createElement(w.T,{navId:ve,pageNav:$e},a.createElement(w.T.Contents,null,a.createElement(mr,{uid:V})))},Wr=()=>{const{uid:V}=(0,B.UO)(),{navId:ve,pageNav:$e}=(0,fe.M)("permissions");return a.createElement(w.T,{navId:ve,pageNav:$e},a.createElement(w.T.Contents,null,a.createElement(tr,{uid:V})))};var ms=e(82002),Mr=e(58379);const ir=({title:V,subTitle:ve,severity:$e,onButtonClick:ft,buttonText:Tt})=>{const Wt=(0,P.yK)(Lt);return a.createElement("div",{className:Wt.container},a.createElement("div",{className:"page-container"},a.createElement(Ea.b,{title:V,severity:$e,buttonContent:Tt,onRemove:ft},ve)))},tn=({isLicensingReader:V,children:ve})=>V?a.createElement("a",{href:"/admin/licensing"},ve):a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license-expiration/",target:"_blank",rel:"noreferrer noopener"},ve),pr=({isLicensingReader:V})=>a.createElement(ir,{title:"Your Grafana Enterprise license has expired",subTitle:a.createElement(a.Fragment,null,a.createElement(tn,{isLicensingReader:V},"Some features")," have been disabled."),severity:"error"}),$r=({isLicensingReader:V})=>a.createElement(ir,{title:"Your Grafana Enterprise license is invalid",subTitle:a.createElement(a.Fragment,null,a.createElement(tn,{isLicensingReader:V},"Some features")," have been disabled."),severity:"error"}),Br=({days:V,onCloseWarning:ve,isLicensingReader:$e})=>a.createElement(ir,{onButtonClick:ve,title:"Your Grafana Enterprise license will expire soon",subTitle:a.createElement(a.Fragment,null,V," days remaining, after which"," ",a.createElement(tn,{isLicensingReader:$e},"Enterprise features will be disabled.")),severity:"info",buttonText:"Dismiss"}),it=({days:V,onCloseWarning:ve,isLicensingReader:$e})=>a.createElement(ir,{onButtonClick:ve,title:"Your Grafana Enterprise token needs to be renewed",subTitle:a.createElement(a.Fragment,null,"Your license token has ",V," days remaining, after which"," ",a.createElement(tn,{isLicensingReader:$e},"Enterprise features will be disabled.")),severity:"info",buttonText:"Dismiss"}),Dt=({activeUsers:V,maxUsers:ve,slug:$e,onRefreshWarning:ft})=>a.createElement(ir,{onButtonClick:ft,title:"You have exceeded the included number of active users",subTitle:a.createElement(a.Fragment,null,"Your Grafana Enterprise license includes ",ve," active users; you currently have ",V," active users. Please"," ",$e?a.createElement("a",{href:"https://grafana.com/orgs/"+$e+"/licenses",target:"_blank",rel:"noreferrer noopener"},"upgrade your license."):"upgrade your license."),severity:"error",buttonText:"Refresh"}),Lt=V=>({container:u.css`
      position: absolute;
      bottom: 0;
      width: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      z-index: 3;
    `}),Gt=80,Zt=100,cn=0,hn=1,Tn=2,fn=3,Rt=4,ya=5,Sa=6,Ca=5,wa=3600,rs="grafana.licence.warning.dismissUntil",Fa="users",zs="AWS/Marketplace",_a=async()=>(0,Ie.i)().get("/api/licensing/token"),Bt=async V=>(0,Ie.i)().post("/api/licensing/token",{token:V}),Ge=async()=>(0,Ie.i)().post("/api/licensing/token/renew",{}),We=async()=>(0,Ie.i)().get("/api/licensing/refresh-stats");function ct(){(0,i.b4)(St)}function St(){const[V,ve]=(0,a.useState)(!1),[$e,ft]=(0,a.useState)(n.v.licensing),Tt=Mr.Z.get(rs),Wt=Tt&&Tt>(0,Ne.CQ)().valueOf(),on=ms.Vt.hasAccess(ee.LicensingRead,ms.Vt.hasRole(o.OrgRole.Admin)),gn=ms.Vt.hasAccess(ee.LicensingRead,ms.Vt.isGrafanaAdmin),bn=on&&qt()&&!Wt,Sn=on&&Nn()&&!Wt,On=_n();let Pn=!1,na=0,aa=0;if($e.limitBy===Fa){const sa=Un($e.includedUsers,$e.activeUsers);Pn=On&&sa&&(on||gn),na=$e.activeUsers,aa=$e.includedUsers}if(os()||ks())return null;const la=()=>{const sa=(0,Ne.CQ)().add(Ca,"d").valueOf();Mr.Z.set(rs,sa),ve(!0)},da=async()=>{const sa=await We().catch(Ia=>null);if(sa){const Ia={...$e,activeUsers:sa.active_users};n.v.licensing=Ia,ft(Ia)}};if(V)return null;if($t())return a.createElement($r,{isLicensingReader:gn});if(Dn())return a.createElement(pr,{isLicensingReader:gn});if(Pn)return a.createElement(Dt,{activeUsers:na,maxUsers:aa,slug:$e.slug,onRefreshWarning:on?da:void 0});if(bn){const sa=Yt();return setTimeout(la,1e3*wa),a.createElement(Br,{days:sa,onCloseWarning:la,isLicensingReader:gn})}else if(Sn){const sa=wn();return setTimeout(la,1e3*wa),a.createElement(it,{days:sa,onCloseWarning:la,isLicensingReader:gn})}return null}function $t(){const{expiry:V,hasLicense:ve}=n.v.licenseInfo;return ve&&!V}function qt(){const{licenseExpiry:V,licenseExpiryWarnDays:ve=30}=n.v.licensing;return V>0&&(0,Ne.CQ)(V*1e3)<(0,Ne.CQ)().add(ve,"d")}function Yt(){const{licenseExpiry:V}=n.v.licensing;return Math.ceil((V-(0,Ne.CQ)().unix())/3600/24)}function Dn(){const{licenseExpiry:V}=n.v.licensing;return V>0&&(0,Ne.CQ)(V*1e3)<(0,Ne.CQ)()}function Nn(){const{tokenExpiry:V,tokenExpiryWarnDays:ve=3}=n.v.licensing;return V>0&&(0,Ne.CQ)(V*1e3)<(0,Ne.CQ)().add(ve,"d")}function wn(){const{tokenExpiry:V}=n.v.licensing;return Math.ceil((V-(0,Ne.CQ)().unix())/3600/24)}function Un(V,ve){return V===void 0||ve===void 0?!1:V!==-1&&ve>V}function _n(){return!n.v.licensing.usageBilling}function ns(){const V=/\/d-solo\//,ve=window.location.pathname;return V.test(ve)}function os(){return ns()}function ks(){const V=/\/admin\/licensing$/,ve=window.location.pathname;return V.test(ve)}var Aa=e(97629),Za=e(38849),cs=e(37932),as=e(62446),Rs=e(39229);const Ys=({orgSlug:V,licenseId:ve})=>{let $e="https://grafana.com/contact";return V&&ve&&($e=`https://grafana.com/orgs/${V}/tickets?support=licensing&licenseId=${ve}`),a.createElement(G.Qj,{href:$e,target:"_blank",rel:"noopener noreferrer"},"Contact customer support")};var hr=e(35633);const kr=({title:V,children:ve,footer:$e,state:ft,status:Tt,className:Wt})=>{const on=(0,P.l4)(),gn=Ns(on,ft);return a.createElement(hr._,{className:(0,u.cx)(gn.container,Wt),disableHover:!0},a.createElement("div",{className:gn.inner},(V||Tt)&&a.createElement("div",{className:gn.row},V&&a.createElement("h3",{className:gn.title},V),Tt&&a.createElement(vr,{state:ft,status:Tt})),a.createElement("div",{className:gn.content},ve),$e&&a.createElement("div",{className:gn.footer},$e)))},Ns=(0,yn.B)((V,ve)=>({container:u.css`
      padding: ${V.spacing(2)};
      margin-bottom: 0;
      ${ve&&`border: 1px solid ${V.colors[ve].border}`};
    `,inner:u.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,title:u.css`
      font-size: ${V.typography.h3.fontSize};
      color: ${V.colors.text.secondary};
      margin-bottom: 0;
    `,row:u.css`
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-bottom: ${V.spacing(2)};
      align-items: center;
    `,content:u.css`
      display: flex;
      flex-direction: column;
      flex: 1 0 auto;
      width: 100%;
    `,footer:u.css`
      display: flex;
      flex-direction: column;
      align-items: self-start;
      margin-top: ${V.spacing(2)};
    `})),vr=({state:V,status:ve})=>{const $e=new Map([["warning","bell"],["error","exclamation-triangle"]]),ft=(0,P.l4)(),Tt=wr(ft,V);return V&&$e.has(V)?a.createElement("div",{role:"alert",className:Tt.container},a.createElement(d.J,{name:$e.get(V)}),ve):null},wr=(V,ve)=>({container:u.css`
      background-color: ${V.colors.background.primary};
      color: ${ve&&V.colors[ve].text};
      padding: ${V.spacing(.5)} ${V.spacing(1)};

      svg {
        margin-right: ${V.spacing(1)};
      }
    `}),Nr=({state:V,title:ve,orgSlug:$e,licenseId:ft})=>{const Tt=(0,P.wW)(Yr);return V?a.createElement(Ea.b,{title:ve,severity:V,className:Tt.container},a.createElement(Ys,{orgSlug:$e,licenseId:ft})):null},Yr=V=>({container:u.css`
      background: ${V.colors.secondary.main};
      margin-bottom: ${V.spacing(3)};
    `}),Ts=({content:V,state:ve})=>{const $e=(0,P.l4)(),ft=To($e,ve);return a.createElement(a.Fragment,null,V.map(Tt=>Tt?a.createElement("div",{key:Tt.name,className:ft.row},a.createElement("span",null,Tt.name,Tt.tooltip&&a.createElement(ue.u,{placement:"top",content:Tt.tooltip,theme:"info"},a.createElement(d.J,{name:"info-circle",size:"sm"}))),a.createElement("span",{className:Tt.highlight?ft.highlight:""},Tt.value)):null))},To=(V,ve)=>({row:u.css`
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-bottom: ${V.spacing(2)};
      align-items: center;
      svg {
        margin-left: ${V.spacing(.5)};
        cursor: pointer;
      }
    `,highlight:u.css`
      background-color: ${V.colors.background.primary};
      color: ${ve&&V.colors[ve].text};
      padding: ${V.spacing(.5)} ${V.spacing(1)};
      margin-right: -${V.spacing(1)};

      svg {
        margin-right: ${V.spacing(1)};
      }
    `});var ds=e(82381);const nr=({isUploading:V,title:ve,onFileUpload:$e,isDisabled:ft,licensedUrl:Tt})=>{const Wt=Bo();return a.createElement(a.Fragment,null,ve&&a.createElement("h2",{className:Wt.title},ve),V?a.createElement(G.zx,{disabled:!0},"Uploading\u2026"):ft?a.createElement(G.zx,{disabled:!0},"Upload a new token"):a.createElement(ds.p,{onFileUpload:$e,accept:".jwt"},"Upload a new token"),Tt&&a.createElement("p",{className:Wt.instanceUrl},"Instance URL: ",a.createElement("code",null,Tt)))},Bo=(0,yn.B)(()=>({title:u.css`
      margin-top: 30px;
      margin-bottom: 20px;
    `,instanceUrl:u.css`
      margin-top: 10px;
    `})),Oo=(V,ve)=>(ve?`${ve} of `:"")+(V>0?V:"unlimited"),gi=V=>(0,Ne.CQ)(V.exp*1e3)<(0,Ne.CQ)(),Ol=V=>(0,Ne.CQ)(V.exp*1e3)<(0,Ne.CQ)().add(n.v.licensing.tokenExpiryWarnDays,"d"),pi=V=>Math.ceil((V.exp-(0,Ne.CQ)().unix())/3600/24),qo=V=>V?gi(V)?{state:"error",status:"Expired",title:"Token expired",message:"Contact support to renew your token, or visit the Cloud portal to learn more."}:Ol(V)?{state:"warning",status:` Expiring in ${pi(V)} day(s)`,title:"Token expires soon",message:`Your token expires in ${pi(V)} day(s). Contact support to renew your token.`}:{state:"",status:"",title:"",message:""}:{state:"",status:"",title:"",message:""},Il=V=>V.trial_exp&&(0,Ne.CQ)(V.trial_exp*1e3)<(0,Ne.CQ)(),ji=V=>V.trial_exp?Math.ceil((V.trial_exp-(0,Ne.CQ)().unix())/3600/24):0,Ec=V=>!V||!V.trial||!V.trial_exp?{state:"",status:"",title:"",message:""}:Il(V)?{state:"error",status:"Expired",title:"Trial expired",message:"Your trial period has expired, please contact sales to purchase a license."}:{state:"info",status:` Trial expiring in ${ji(V)} day(s)`,title:"Trial active",message:`Your trial expires in ${ji(V)} day(s), please contact sales to purchase a license.`},Qr=(V,ve=0)=>100*ve/V,ei=(V,ve)=>{let $e="",ft="",Tt="",Wt="";if(!V)return{state:$e,status:ft,title:Tt,message:Wt};if(V.limit_by===Fa){const on=ve?.active_users,gn=V.included_users;let bn=0;typeof on=="number"&&(bn=Qr(gn,on)),bn>Zt?($e="error",ft="Quota exceeded: active users",Tt="User limit exceeded",Wt=`There are more than ${gn} active users using Grafana.`,Wt+=" Contact support to increase the quotas."):bn>=Gt&&($e="warning",bn>=Zt?(ft="Limit reached",Tt="User utilization limit reached",Wt=`You are at your limit of ${gn} active users.`):(ft="Reaching limit",Tt="User utilization reaching limit",Wt=`There are ${on} active users.`,Wt+=` You are approaching your limit of ${gn} active users.`),ft+=": active users",Wt+=" Contact support to increase the quotas.")}return{state:$e,status:ft,title:Tt,message:Wt}},Yi=({token:V,stats:ve,tokenRenewed:$e,tokenUpdated:ft,isLoading:Tt,licensedUrl:Wt})=>{const[on,gn]=(0,a.useState)(!1),[bn,Sn]=(0,a.useState)(!1),On=qo(V).state,Pn=ei(V,ve).state,na=ms.Vt.hasAccess(ee.LicensingWrite,ms.Vt.isGrafanaAdmin),aa=(0,P.wW)(Oi),la=Ia=>{const Ma=Ia.currentTarget?.files?.[0];if(Ma){cs.E1.partial({tokenUpdated:null,tokenRenewed:null});const Fs=new FileReader,Gs=()=>async is=>{gn(!0);try{await Bt(is.target.result),cs.E1.partial({tokenUpdated:!0}),setTimeout(()=>{location.reload()},1e3)}catch(Hs){throw gn(!1),Hs}};Fs.onload=Gs(),Fs.readAsText(Ma)}},da=async()=>{cs.E1.partial({tokenUpdated:null,tokenRenewed:null}),Sn(!0);try{await Ge(),cs.E1.partial({tokenRenewed:!0}),setTimeout(()=>{location.reload()},1e3)}catch(Ia){throw Sn(!1),Ia}};if(!ms.Vt.hasAccess(ee.LicensingRead,ms.Vt.isGrafanaAdmin))return null;if(Tt)return a.createElement(Rs.a,{text:"Loading licensing info..."});let sa="You are running Grafana Enterprise without a license. The Enterprise features are disabled.";return V&&![hn,ya].includes(V.status)&&(sa="There is a problem with your Enterprise license token. The Enterprise features are disabled."),!V||![hn,ya].includes(V.status)?a.createElement(a.Fragment,null,a.createElement(as.UpgradeInfo,{editionNotice:sa}),a.createElement("div",{className:aa.uploadWrapper},a.createElement(nr,{title:"Have a license?",onFileUpload:la,isUploading:on,isDisabled:!na,licensedUrl:Wt}))):a.createElement("div",null,a.createElement("h2",{className:aa.title},"License details"),a.createElement(wo,{...ei(V,ve),orgSlug:V.slug,licenseId:V.lid}),a.createElement(wo,{...qo(V),orgSlug:V.slug,licenseId:V.lid}),a.createElement(wo,{...Ec(V),orgSlug:V.slug,licenseId:V.lid}),ft&&a.createElement(Ea.b,{title:"License token uploaded. Restart Grafana for the changes to take effect.",severity:"success",onRemove:()=>cs.E1.partial({tokenUpdated:null})}),$e&&a.createElement(Ea.b,{title:"License token renewed.",severity:"success",onRemove:()=>cs.E1.partial({tokenRenewed:null})}),a.createElement("div",{className:aa.row},a.createElement(kr,{title:"License",className:aa.licenseCard,footer:a.createElement(G.Qj,{variant:"secondary",href:V.details_url||`${V.iss}/licenses/${V.lid}`,"aria-label":"View details about your license in Grafana Cloud",target:"_blank",rel:"noopener noreferrer"},"License details")},a.createElement(Ts,{content:[{name:V.prod?.length<=1?"Product":"Products",value:V.prod?.length<=1?V.prod[0]||"None":a.createElement("ul",null,V.prod?.map(Ia=>a.createElement("li",{key:Ia},Ia)))},V.iss===zs&&V.account?{name:"AWS Account",value:V.account}:{name:"Company",value:V.company},{name:"License ID",value:V.lid},V.iss===zs?null:{name:"URL",value:V.sub,tooltip:"License URL is the root URL of your Grafana instance. The license will not work on an instance of Grafana with a different root URL."},{name:"Purchase date",value:(0,Za.dq)(V.nbf*1e3)},V.iss===zs?null:{name:"License expires",value:(0,Za.dq)(V.lexp*1e3),highlight:!!qo(V)?.state,tooltip:"The license expiration date is the date when the current license is no longer active. As the license expiration date approaches, Grafana Enterprise displays a banner."},V.iss===zs?null:{name:"Usage billing",value:V.usage_billing?"On":"Off",tooltip:"You can request Grafana Labs to turn on usage billing to allow an unlimited number of active users. When usage billing is enabled, Grafana does not enforce active user limits or display warning banners. Instead, you are charged for active users above the limit, according to your customer contract."}]})),a.createElement(kr,{...qo(V),title:"Token",footer:a.createElement("div",{className:aa.row},V.iss!==zs&&a.createElement(nr,{onFileUpload:la,isUploading:on,isDisabled:!na}),bn?a.createElement("span",null," (Renewing...)"):a.createElement(G.zx,{variant:"secondary",onClick:da,disabled:!na},"Renew token"))},a.createElement(a.Fragment,null,On&&a.createElement(Nr,{title:"Contact support to renew your token, or visit the Cloud portal to learn more.",state:On,orgSlug:V.slug,licenseId:V.lid}),a.createElement("div",{className:aa.message},a.createElement(d.J,{name:"document-info"}),"Read about"," ",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license/license-expiration/",target:"_blank",rel:"noreferrer noopener"},"license expiration")," ","and"," ",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license/activate-license/",target:"_blank",rel:"noreferrer noopener"},"license activation"),"."),a.createElement(Ts,{content:[{name:"Token ID",value:V.jti},{name:"Token issued",value:(0,Za.dq)(V.iat*1e3)},{name:"Token expires",value:(0,Za.dq)(V.exp*1e3),highlight:!!qo(V)?.state,tooltip:"Grafana automatically updates the token before it expires. If your token is not updating, contact support."}],state:On}))),a.createElement(kr,{...ei(V,ve),title:"Utilization",footer:a.createElement("small",{className:aa.footerText},"Utilization of licenced users is determined based on signed-in users' activity in the past 30 days.")},a.createElement(a.Fragment,null,a.createElement("div",{className:aa.message},a.createElement(d.J,{name:"document-info"}),"Read about"," ",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license/license-restrictions/#active-users-limit",target:"_blank",rel:"noreferrer noopener"},"active user limits")," ","and"," ",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license/license-restrictions/#concurrent-sessions-limit",target:"_blank",rel:"noreferrer noopener"},"concurrent session limits"),"."),V.limit_by===Fa&&a.createElement(Ts,{content:[{name:"Users",value:Oo(V.included_users,ve?.active_users),highlight:Qr(V.included_users,ve?.active_users)>=Gt}],state:Pn})))))},Oi=V=>({title:u.css`
      margin: ${V.spacing(4)} 0;
    `,infoText:u.css`
      font-size: ${V.typography.size.sm};
    `,uploadWrapper:u.css`
      margin-left: 79px;
    `,row:u.css`
      display: flex;
      justify-content: space-between;
      width: 100%;
      flex-wrap: wrap;
      gap: ${V.spacing(2)};

      & > div {
        flex: 1 1 340px;
      }
    `,footerText:u.css`
      margin-bottom: ${V.spacing(2)};
    `,licenseCard:u.css`
      background: url('/public/img/licensing/card-bg-${V.isLight?"light":"dark"}.svg') center no-repeat;
      background-size: cover;
    `,message:u.css`
      height: 70px;
      a {
        color: ${V.colors.text.link};

        &:hover {
          text-decoration: underline;
        }
      }

      svg {
        margin-right: ${V.spacing(.5)};
      }
    `}),wo=({state:V,message:ve,title:$e,orgSlug:ft,licenseId:Tt})=>{const Wt=(0,P.wW)(Qi);return V?a.createElement(Ea.b,{title:$e,severity:V||void 0},a.createElement("div",{className:Wt.container},a.createElement("div",null,a.createElement("p",null,ve),a.createElement("a",{className:Wt.link,href:"https://grafana.com/docs/grafana/latest/enterprise/license/license-restrictions/",target:"_blank",rel:"noopener noreferrer"},"Learn about Enterprise licenses")),a.createElement(Ys,{orgSlug:ft,licenseId:Tt}))):null},Qi=V=>({container:u.css`
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      width: 100%;
    `,link:u.css`
      font-size: ${V.typography.bodySmall.fontSize};
      text-decoration: underline;
      color: ${V.colors.text.secondary};

      &:hover {
        color: ${V.colors.text.primary};
      }
    `}),Po=V=>({navModel:(0,R.ht)(V.navIndex,"licensing")}),ti=(0,U.connect)(Po,{})(({navModel:V,queryParams:ve})=>{const[$e,ft]=(0,a.useState)(null),[Tt,Wt]=(0,a.useState)(null),[on,gn]=(0,a.useState)(!1),{tokenUpdated:bn,tokenRenewed:Sn}=ve;return(0,a.useEffect)(()=>ms.Vt.hasAccess(ee.LicensingRead,ms.Vt.isGrafanaAdmin)?(gn(!0),(async()=>{const Pn=await _a().catch(()=>null),na=await We().catch(()=>null);ft(Pn),Wt(na),gn(!1)})(),ct):void 0,[]),a.createElement(w.T,{navModel:V},a.createElement(w.T.Contents,null,a.createElement(Aa.ServerStats,null),a.createElement(Yi,{token:$e,stats:Tt,tokenUpdated:bn,tokenRenewed:Sn,isLoading:on,licensedUrl:n.v.licenseInfo?.appUrl})))});var Zi=e(5494),Zr=e(47694),Al=e(64319),No=e(30979),Uo=e(60721),ni=(V=>(V.Test="test",V.Control="control",V))(ni||{});const ps=V=>"feature-highlights"+(V?`-${V}`:"");var Fo=e(32557);const Ji={isDrawerOpen:!1,drawerTab:le.Stats},Ri=(0,Fo.oM)({name:"metaAnalytics",initialState:Ji,reducers:{setDrawerOpen:(V,ve)=>({...V,isDrawerOpen:ve.payload}),setDrawerTab:(V,ve)=>({...V,drawerTab:ve.payload})}}),{setDrawerOpen:Wo,setDrawerTab:hi}=Ri.actions,xe={metaAnalytics:Ri.reducer};var xt=e(72142),Nt=e(79841),Jt=e(94893),nn=e(29781);class an extends a.PureComponent{convertSummariesToDataFrame(ve,$e,ft,Tt){const Wt=new Ze.G([]),on=new Ze.G([]);return ve.forEach(gn=>{Wt.buffer.push((0,Ne.CQ)(gn.day,vt).valueOf()),on.buffer.push(gn[$e])}),{fields:[{name:"Time",type:Se.fS.time,config:{},values:Wt},{name:$e,type:ft,config:{displayName:Tt??$e},values:on}],length:ve.length}}buildTimeRange(){const{dailySummaries:ve}=this.props,$e=(0,Ne.CQ)(ve[0].day),ft=(0,Ne.CQ)(ve[ve.length-1].day).add(12,"hours");return{from:$e,to:ft,raw:{from:$e,to:ft}}}renderChart(ve){const{dailySummaries:$e,theme:ft}=this.props,{showBars:Tt,showLines:Wt,timeRange:on,title:gn,width:bn,fields:Sn,isStacked:On=!1}=ve,Pn=Bn(ft),na=Sn.map(da=>this.convertSummariesToDataFrame($e,da.name,da.type,da.label)),aa=Sn.reduce((da,sa)=>({...da,[sa.name]:{color:sa.color??""}}),{}),la=ut(na,"browser",aa,{showBars:Tt,showLines:Wt,showPoints:!1},{placement:"bottom",displayMode:Ue.jK.List,showLegend:!1});return a.createElement("div",{className:(0,u.cx)(Pn.graphContainer,"panel-container"),"aria-label":"Graph container"},a.createElement("div",{className:"panel-title"},gn),a.createElement("div",{className:(0,u.cx)("panel-content",Pn.panelContent)},a.createElement(nn.U,{height:150,width:bn,timeRange:on,showBars:Tt,showLines:Wt,showPoints:!1,series:la,isStacked:On,timeZone:"browser",legendVisibility:la.length>1,onToggleSort:()=>{},legendDisplayMode:Ue.jK.List,placement:"bottom"},a.createElement(pt.I,{mode:Ue.f3.Multi}))))}}class xn extends an{render(){const{dailySummaries:ve,theme:$e}=this.props;if(ve&&ve.length>0){const ft=this.buildTimeRange();return a.createElement(Ae.Z,{disableHeight:!0},({width:Tt})=>Tt===0?null:a.createElement("main",{style:{width:Tt}},this.renderChart({title:"Daily query count",fields:[{name:"queries",type:Se.fS.number},{name:"cachedQueries",type:Se.fS.number,label:"cached queries"}],width:Tt,timeRange:ft,showBars:!1,showLines:!0}),this.renderChart({title:"Views last 30 days",fields:[{name:"views",type:Se.fS.number}],width:Tt,timeRange:ft,showBars:!0,showLines:!1}),this.renderChart({title:"Errors last 30 days",fields:[{name:"errors",type:Se.fS.number,color:$e.colors.error.border}],width:Tt,timeRange:ft,showBars:!1,showLines:!0})))}return a.createElement("span",null,"No data.")}}const Gn={setDrawerOpen:Wo},Ln=(0,P.HE)((0,U.connect)(null,Gn)(xn));class ia extends an{render(){const{dailySummaries:ve,theme:$e}=this.props;if(ve&&ve.length>0){const ft=this.buildTimeRange();return a.createElement(Ae.Z,{disableHeight:!0},({width:Tt})=>Tt===0?null:a.createElement("main",{style:{width:Tt}},this.renderChart({title:"Daily query count",fields:[{name:"queries",type:Se.fS.number},{name:"cachedQueries",type:Se.fS.number,label:"cached queries"}],width:Tt,timeRange:ft,showBars:!1,showLines:!0}),this.renderChart({title:"Errors last 30 days",fields:[{name:"errors",type:Se.fS.number,color:$e.colors.error.border}],width:Tt,timeRange:ft,showBars:!1,showLines:!0})))}return a.createElement("span",null,"No data.")}}const ta=(0,P.HE)(ia);var fa=e(36998),ha=e(88144);const zn=V=>`0 0 0 1px ${V}`,Zn=(0,yn.B)((V,ve,$e)=>{const ft=ve?V.palette.blue80:V.colors.border2,Tt=ve?V.palette.blue95:V.colors.border3,Wt=$e?V.colors.dashboardBg:"transparent";return{icon:u.css`
      border-radius: 50%;
      width: 30px;
      height: 30px;
      margin-left: -6px;
      border: 3px ${Wt} solid;
      box-shadow: ${zn(ft)};
      background-clip: padding-box;
      &:hover {
        background-clip: padding-box;
        box-shadow: ${zn(Tt)};
      }
    `,textIcon:u.css`
      padding: 0px;
      text-align: center;
      line-height: 22px;
      justify-content: center;
      color: ${V.colors.textSemiWeak};
      cursor: auto;
      font-size: ${V.typography.size.sm};
      background: ${V.isDark?V.palette.dark9:V.palette.gray90};
      &:focus {
        box-shadow: ${zn(ft)};
      }
      &:hover {
        background: ${V.isDark?V.palette.dark10:V.palette.gray95};
      }
    `,tooltipContainer:u.css`
      text-align: center;
      padding: 0px ${V.spacing.sm};
    `,tooltipName:u.css`
      font-weight: ${V.typography.weight.bold};
    `,tooltipDate:u.css`
      font-weight: ${V.typography.weight.regular};
    `,dot:u.css`
      height: 6px;
      width: 6px;
      background-color: ${V.palette.blue80};
      border-radius: 50%;
      display: inline-block;
      margin-left: 6px;
      margin-bottom: 1px;
    `}}),xa=V=>{const $e=(0,Ne.CQ)(V).diff((0,Ne.CQ)(),"hours",!1);return`Active last ${(Math.floor(-$e/24)+1)*24}h`},Wa=({userView:V,showTooltip:ve=!0,showBorder:$e=!1,className:ft})=>{const{user:Tt,viewed:Wt}=V,on=(0,Ne.CQ)(Wt).diff((0,Ne.CQ)(),"minutes",!0)>=-15,gn=(0,P.Fg)(),bn=Zn(gn,on,$e),Sn=Tt.name||Tt.login,On=Sn.split(" "),Pn=((On.shift()?.slice(0,1)||"")+(On.pop()?.slice(0,1)||"")).toUpperCase(),na=Tt.avatarUrl&&Tt.hasCustomAvatar?a.createElement("img",{className:(0,u.cx)(bn.icon,ft),src:Tt.avatarUrl,"aria-label":"Avatar icon",alt:`${Pn} avatar`}):a.createElement(G.zx,{variant:"secondary",className:(0,u.cx)(bn.textIcon,bn.icon,ft),"aria-label":"Initials icon"},Pn);if(ve){const aa=a.createElement("div",{className:bn.tooltipContainer},a.createElement("div",{className:bn.tooltipName},Sn),a.createElement("div",{className:bn.tooltipDate},on?a.createElement(a.Fragment,null,a.createElement("span",null,"Active last 15m"),a.createElement("span",{className:bn.dot})):xa(Wt)));return a.createElement(ue.u,{content:aa,key:`recent-user-${Tt.id}`},na)}else return na};class Ba extends an{constructor(ve){super(ve),this.onOpenVersionHistory=()=>{const{setDrawerOpen:$e}=this.props;$e(!1),cs.E1.partial({editview:"versions"})},this.state={dashboardUsersInfo:null}}async componentDidMount(){const{dashboard:ve}=this.props;try{const $e=await En(ve.id);this.setState({dashboardUsersInfo:$e})}catch($e){console.log("Error getting dashboard users info",$e)}}formatDate(ve){const $e=ve.diff((0,Ne.CQ)().startOf("day"),"days",!0);if($e<-6)return ve.format("YYYY-MM-DD");if($e<-1)return ve.locale("en").format("dddd");if($e<0)return"Yesterday";{const ft=ve.diff((0,Ne.CQ)(),"minutes",!0);return ft<-60?"Today":ft<-15?"Last hour":"Currently viewing"}}renderUserBox(ve,$e,ft){return a.createElement("div",{className:ft.userBox,"aria-label":"User information box"},a.createElement("h6",{"aria-label":"User box title"},ve),a.createElement(Wa,{userView:$e,showTooltip:!1}),a.createElement("div",{className:ft.userName},$e.user.name||$e.user.login),a.createElement("div",null,(0,Ne.CQ)($e.viewed).format("YYYY-MM-DD")))}renderViewsChart(){const ve=this.buildTimeRange();return a.createElement(Ae.Z,{disableHeight:!0},({width:$e})=>$e===0?null:a.createElement("main",{style:{width:$e}},this.renderChart({title:"Views last 30 days",fields:[{name:"views",type:Se.fS.number}],width:$e,timeRange:ve,showBars:!0,showLines:!1})))}convertUserViewsToDataFrame(ve,$e){const{userViews:ft}=this.props;if(ft&&ft.length>0){const Tt=new Ze.G([]),Wt=new Ze.G([]),on=new Ze.G([]);ft.forEach(On=>{Tt.buffer.push(this.formatDate((0,Ne.CQ)(On.viewed))),Wt.buffer.push(On.user.name||On.user.login),on.buffer.push(a.createElement(Wa,{className:ve.userIcon,userView:On,showTooltip:!1}))});const gn={displayName:" ",filterable:!1,custom:{width:50,align:"center",minWidth:50,cellOptions:{type:Ue.h2.ColorText},inspect:!1}},bn=[{fields:[{name:" ",type:Se.fS.other,config:gn,values:on},{name:"User",type:Se.fS.string,config:{},values:Wt},{name:"When",type:Se.fS.string,config:{},values:Tt}],length:ft.length}],Sn=(0,fa.SM)({data:bn,theme:$e,replaceVariables:On=>On,fieldConfig:{}});return Sn.length>0?Sn[0]:null}else return null}render(){const{dailySummaries:ve,dashboard:$e,theme:ft,userViews:Tt}=this.props,{dashboardUsersInfo:Wt}=this.state,on=Bn(ft),gn=this.convertUserViewsToDataFrame(on,ft);return a.createElement("div",null,ve&&ve.length>0&&this.renderViewsChart(),a.createElement("div",{className:on.userBoxesContainer},Wt?.creator&&this.renderUserBox("Created",Wt.creator,on),Wt?.lastEditor&&this.renderUserBox("Last edited",Wt.lastEditor,on),Tt?.length>0&&this.renderUserBox("Last viewed",Tt[0],on)),Tt?.length>0&&a.createElement("div",{className:on.tableContainer},a.createElement("div",{className:on.tableHeader},a.createElement("h4",null,"Last 30 dashboard viewers"),$e.meta.showSettings&&a.createElement(G.zx,{icon:"history",variant:"secondary",onClick:this.onOpenVersionHistory,"aria-label":"Version history button"},"Dashboard version history")),a.createElement(Ae.Z,{disableHeight:!0},({width:bn})=>{if(bn===0)return null;const Sn=35*(gn.length+1);return a.createElement("main",{style:{width:bn}},a.createElement(ha.i,{data:gn,height:Sn,width:bn,"aria-label":"Recent users table"}))})))}}const La={setDrawerOpen:Wo},Tr=(0,P.HE)((0,U.connect)(null,La)(Ba)),Co=30;class Io extends a.PureComponent{constructor(ve){super(ve),this.onSelectTab=$e=>{this.props.setDrawerTab($e.value||le.Stats)},this.state={drawerWidth:"50%",dailySummaries:[],publicDailySummaries:[],userViews:[]}}async componentDidMount(){const{dashboard:ve}=this.props,$e=[];for(let ft=0;ft<30;ft++)$e.push((0,Ne.CQ)(Date.now()).subtract(ft,"days").format(vt));if(ve?.id&&ve.meta.url){const ft=await en(ve.id,$e),Tt=await It(ve.id,Co);let Wt=[];(0,Zr.iE)().featureToggles.publicDashboards&&(Wt=await sn(ve.id,$e)),this.setState({dailySummaries:ft,userViews:Tt,publicDailySummaries:Wt})}}renderHeader(ve){const $e=[{label:"Stats",value:le.Stats},{label:"Users and activity",value:le.Users}];return(0,Zr.iE)().featureToggles.publicDashboards&&$e.push({label:"Public dashboards",value:le.PublicDashboards}),a.createElement(xt.J,{className:ve.tabsBar},$e.map((ft,Tt)=>a.createElement(Nt.O,{key:`${ft.value}-${Tt}`,label:ft.label,active:ft.value===this.props.drawerTab,onChangeTab:()=>this.onSelectTab(ft)})))}render(){const{dailySummaries:ve,publicDailySummaries:$e,drawerWidth:ft,userViews:Tt}=this.state,{dashboard:Wt,drawerTab:on,setDrawerOpen:gn,theme:bn}=this.props,Sn=Bn(bn);return a.createElement(No.d,{scrollableContent:!0,title:`${Wt.title} - analytics`,width:ft,onClose:()=>gn(!1),subtitle:this.renderHeader(Sn),expandable:!0},a.createElement(Jt.I,{className:Sn.tabContent},(0,F.d5)()&&a.createElement(N.Xz,{featureId:"dashboard-insights",eventVariant:"trial",featureName:"dashboard usage insights",text:"Get full access to usage insights for free during your trial of Grafana Pro."}),on===le.Stats&&a.createElement(ta,{dashboard:Wt,dailySummaries:ve}),on===le.Users&&a.createElement(Tr,{dashboard:Wt,dailySummaries:ve,userViews:Tt}),(0,Zr.iE)().featureToggles.publicDashboards&&on===le.PublicDashboards&&a.createElement(Ln,{dashboard:Wt,dailySummaries:$e})))}}function xo(V){return{drawerTab:V.metaAnalytics.drawerTab}}const Ro={setDrawerOpen:Wo,setDrawerTab:hi},Kr=(0,P.HE)((0,U.connect)(xo,Ro)(Io)),Ur=({onClick:V,isHighlighted:ve})=>a.createElement(Al.h,{icon:"info-circle",tooltip:"Dashboard insights",onClick:V,isHighlighted:ve}),vi=({dashboard:V,isDrawerOpen:ve,setDrawerOpen:$e})=>{const ft=V?.id&&V.meta.url,Tt=(0,F.d5)();return(0,a.useEffect)(()=>{ft&&Tt&&(0,c.SZ)(ps("dashboard-insights-dot"),ni.Test,"trial")},[ft,Tt]),ft&&a.createElement(a.Fragment,null,a.createElement(Ur,{onClick:()=>{$e(!0)},isHighlighted:Tt}),ve&&a.createElement(Kr,{dashboard:V}))};function Ai(V){return{isDrawerOpen:V.metaAnalytics.isDrawerOpen}}const Or={setDrawerOpen:Wo},yc=({dashboard:V})=>{const ve=V?.id&&V.meta.url,[$e,ft]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{ve&&(0,c.SZ)(ps("dashboard-insights-dot"),ni.Test,"")},[ve]),ve&&a.createElement(a.Fragment,null,a.createElement(Ur,{isHighlighted:!0,onClick:()=>{ft(!0)}}),$e&&a.createElement(Bl,{dashboard:V,onClose:()=>ft(!1)}))},Xi=()=>{(0,t.v)("analytics")?s.Vt.hasPermission(ee.DashboardsInsightsRead)&&(0,Uo.hf)({show:()=>!0,component:(0,U.connect)(Ai,Or)(vi),index:-1}):n.v.featureToggles.featureHighlights&&(0,Uo.hf)({show:()=>!0,component:yc,index:-1})},Bl=({onClose:V,dashboard:ve})=>{const $e=(0,P.l4)();return a.createElement(No.d,{onClose:V,title:`${ve?.title} - analytics`,width:"50%"},a.createElement(N.Xz,{featureName:"dashboard usage insights",featureId:"dashboard-insights"}),a.createElement(N.tM,{featureName:"dashboard usage insights",image:`usage-insights-${$e.isLight?"light":"dark"}.png`,featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/usage-insights/dashboard-datasource-insights",description:"Usage Insights provide detailed information about dashboard usage, like the number of views, queries, and errors users have experienced. You can use this to improve users\u2019 experience and troubleshoot issues."}))};class wl{constructor(ve){this.options=ve,this.buffer=[],this.supportedEvents=[Zi.ee.MetaAnalytics],this.addEvent=$e=>{this.buffer.push($e)},this.flush=()=>{if(this.buffer.length===0)return;const $e=[];for(const ft of this.buffer)$e.push({type:ft.type,...ft.payload,meta:ft.meta});this.buffer=[],this.options.url&&(0,nt.i)().fetch({method:"POST",url:this.options.url,showSuccessAlert:!1,showErrorAlert:!1,data:$e}).toPromise()}}}var mo=e(82897);function vd(V){return ve=>{ve(Wo(!0)),ve(hi(V))}}const Ed=(0,yn.B)((V,ve)=>({container:u.css`
      display: flex;
      justify-content: center;
      flex-direction: row-reverse;
      margin-left: ${V.spacing.sm};
    `,moreIcon:u.css`
      cursor: pointer;
      span {
        margin-bottom: ${ve?"3px":"0px"};
      }
    `})),Pc={openDrawer:vd},yd=(0,U.connect)(null,Pc),Li=4,ai=6e4;function Cc(V,ve){const $e=ms.Vt.user;ht(V,Li+10).then(ft=>{const Tt=ft.filter(Wt=>Wt.user.id!==$e.id);ve(Wt=>(0,mo.isEqual)(Tt,Wt)?Wt:Tt)})}const Pd=({dashboard:V,openDrawer:ve})=>{const $e=V?.id,[ft,Tt]=(0,a.useState)([]),Wt=ft.length-Li+1,on=Wt>9,gn=(0,P.Fg)(),bn=Ed(gn,on),Sn=Zn(gn,!1,!0);(0,a.useEffect)(()=>{if(!$e||!V?.meta.url)return;Cc($e,Tt);const Pn=setInterval(()=>Cc($e,Tt),ai);return()=>{clearInterval(Pn)}},[$e,V]);const On=ft.length>Li;return a.createElement(a.Fragment,null,ft.length>0&&a.createElement("div",{className:bn.container,"aria-label":"Presence indicators container"},On&&a.createElement(G.zx,{variant:"secondary",className:(0,u.cx)(Sn.textIcon,Sn.icon,bn.moreIcon),"aria-label":"More users icon",onClick:()=>ve(le.Users)},on?"...":`+${Wt}`),ft.slice(0,On?Li-1:Li).reverse().map(Pn=>a.createElement(Wa,{key:Pn.user.id,userView:Pn,showBorder:!0}))))},qr=()=>{ms.Vt.hasPermission(ee.DashboardsInsightsRead)&&(0,Uo.NN)({show:()=>!0,component:yd(Pd),index:"end"})};function xc(){if((0,Zr.iE)().isPublicDashboardView){const ve=window.location.pathname.split("/");return ve[ve.length-1]}return""}const $o=()=>{(0,t.v)("analytics")?((0,Zi.e6)(new wl({url:ar()})),ms.Vt.user.isSignedIn&&(qr(),Xi())):n.v.featureToggles.featureHighlights&&Xi()},ar=()=>(0,Zr.iE)().isPublicDashboardView?`api/public/ma/events/${xc()}`:"api/ma/events",_i=()=>{const{uid:V}=(0,B.UO)(),ve=(0,A.xG)("insights"),$e=(0,o.useSelector)(Tt=>Tt.navIndex),ft=(0,R.ht)($e,`datasource-insights-${V}`,ve);return a.createElement(w.T,{navId:"datasources",pageNav:ft.main},a.createElement(w.T.Contents,null,a.createElement(pa,{uid:V})))},Cd=()=>{const{uid:V}=(0,B.UO)(),ve=(0,be.xG)("insights"),$e=(0,o.useSelector)(Tt=>Tt.navIndex),ft=(0,R.ht)($e,`datasource-insights-${V}`,ve);return a.createElement(w.T,{navId:"datasources",pageNav:ft.main},a.createElement(w.T.Contents,null,a.createElement(za,{uid:V})))},Bi=()=>{const{uid:V}=(0,B.UO)(),ve=(0,A.xG)("permissions"),$e=(0,o.useSelector)(Tt=>Tt.navIndex),ft=(0,R.ht)($e,`datasource-permissions-${V}`,ve);return a.createElement(w.T,{navId:"datasources",pageNav:ft.main},a.createElement(w.T.Contents,null,a.createElement(mr,{uid:V})))},bc=()=>{const{uid:V}=(0,B.UO)(),ve=(0,A.xG)("permissions"),$e=(0,o.useSelector)(Tt=>Tt.navIndex),ft=(0,R.ht)($e,`datasource-permissions-${V}`,ve);return a.createElement(w.T,{navId:"datasources",pageNav:ft.main},a.createElement(w.T.Contents,null,a.createElement(ka,{uid:V})))},Nl=()=>{const{uid:V}=(0,B.UO)(),ve=(0,be.xG)("permissions"),$e=(0,o.useSelector)(Tt=>Tt.navIndex),ft=(0,R.ht)($e,`datasource-permissions-${V}`,ve);return a.createElement(w.T,{navId:"datasources",pageNav:ft.main},a.createElement(w.T.Contents,null,a.createElement(tr,{uid:V})))},qi={permissions:[],enabled:!1,datasourceId:0},bd={dataSourcePermission:(V=qi,ve)=>{switch(ve.type){case Is.LoadDataSourcePermissions:return{enabled:ve.payload.enabled,permissions:ve.payload.permissions,datasourceId:ve.payload.datasourceId}}return V}};var wi=e(80472);const Ul=u.css`
  justify-content: center;
  width: 100%;
`,Ei=/^[A-Z\d._%+-]+@[A-Z\d.-]+\.[A-Z]{2,}$/i,Dd=()=>{const V=ve=>{};return a.createElement(wi.dd,{branding:{loginSubtitle:"Enter your email to request access to the dashboard. You will receive an email with a one-time use link.",loginTitle:"Request Access",hideFooter:!0}},a.createElement(wi.$s,null,a.createElement(Xa.l,{className:Ul,onSubmit:V,validateOn:"onChange"},({register:ve,errors:$e,formState:{isSubmitSuccessful:ft}})=>a.createElement(a.Fragment,null,a.createElement(de.g,{label:"Email",error:$e?.email?.message,invalid:!!$e.email},a.createElement(ke.I,{"data-testid":"requestAccessEmail",placeholder:"email",autoCapitalize:"none",...ve("email",{required:"Email is required",pattern:{value:Ei,message:"Invalid email"}})})),a.createElement(G.zx,{"data-testid":"requestAccessSubmitButton",disabled:ft,type:"submit",className:Ul},ft?"Access requested":"Request access")))))};var ju=e(22069),Fl=e(9386),yi=e(3153),Pi=e(25318),si=e(86647),bo=e(35029),ri=e(58255),Wl=e(97063),Sd=e(63496),$l=e(53117),Md=e(11543),Kl=e(19426),el=e(81764);const Yu=V=>{const{onChange:ve,value:$e}=V,ft=(0,P.wW)(ao);return a.createElement(Md.Z,{className:ft.filter},a.createElement(Kl.c,{width:"auto"},"Filter by data source"),a.createElement(el._,null,a.createElement($l.q,{width:30,placeholder:"Select a data source",onChange:Tt=>{ve({name:Tt.name,id:Tt.id,uid:Tt.uid})},noDefault:!0,current:$e})),a.createElement(el._,null,a.createElement(G.zx,{className:ft.button,icon:"trash-alt",variant:"secondary",onClick:()=>{ve(void 0)}})))},ao=V=>({filter:u.css`
      margin-bottom: ${n.v.theme.spacing.md};
    `,button:u.css`
      color: ${V.colors.text.secondary};
    `});var oi=e(33180);const Ao=({recordedQuery:V,buttons:ve})=>{const $e=(0,P.wW)(Ko),ft=(0,si.F)()?.getInstanceSettings(V.queries[0]?.datasource);return a.createElement("div",{className:$e.alert},ft?.meta&&a.createElement("img",{className:$e.media,src:ft.meta.info.logos.small,alt:"Query logo"}),a.createElement("div",{className:$e.body},a.createElement("div",{className:$e.info},a.createElement("div",null,a.createElement("h2",{className:$e.heading},V.name),a.createElement("p",{className:$e.description},tl(V))),a.createElement("div",{className:$e.buttonWrapper},ve.map((Tt,Wt)=>a.createElement("div",{key:`button-${Wt}`,className:$e.button},Tt))))))},tl=V=>{const ve=[`Interval: ${(0,oi.secondsToHms)(V.interval)}`,`Range: Last ${(0,oi.secondsToHms)(V.range)}`],$e=(0,si.F)()?.getInstanceSettings(V.queries[0]?.datasource);return $e!==void 0&&ve.unshift($e.name),V.description!==""&&ve.push(`${V.description}`),ve.join(" | ")},Ko=V=>{const ve=V.shape.borderRadius();return{info:u.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      width: 100%;
    `,heading:u.css`
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      margin-bottom: 0;
      font-size: ${V.typography.size.md};
      letter-spacing: inherit;
      line-height: ${V.typography.body.lineHeight};
      color: ${V.colors.text.primary};
      font-weight: ${V.typography.fontWeightMedium};
    `,description:u.css`
      width: 100%;
      margin: ${V.spacing(1,0,0)};
      color: ${V.colors.text.secondary};
      line-height: ${V.typography.body.lineHeight};
    `,alert:u.css`
      flex-grow: 1;
      position: relative;
      border-radius: ${ve};
      display: flex;
      flex-direction: row;
      align-items: center;
      background: ${V.colors.background.secondary};
      box-shadow: ${V.shadows.z1};
      margin-bottom: ${V.spacing(1)};

      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: ${V.colors.background.primary};
        z-index: -1;
      }
    `,body:u.css`
      color: ${V.colors.text.secondary};
      padding: ${V.spacing(2)};
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      overflow-wrap: break-word;
      word-break: break-word;
    `,content:u.css`
      color: ${V.colors.text.secondary};
      padding-top: ${V.spacing(1)};
      margin-left: 26px;
    `,media:u.css`
      margin-left: ${V.spacing(2)};
      width: 40px;
    `,buttonWrapper:u.css`
      padding: ${V.spacing(1)};
      background: none;
      display: flex;
      align-items: center;
      margin-right: ${V.spacing()};
    `,button:u.css`
      margin-left: ${V.spacing()};
    `}};var po=e(3363);const Td={recordedQueries:[],isLoading:!1,errorRecordedQueryTestResponse:""},nl=(0,Fo.oM)({name:"recorded-queries",initialState:Td,reducers:{loadRecordedQueries:V=>({...V,isLoading:!0}),endLoadRecordedQueries:V=>({...V,isLoading:!1}),loadedRecordedQueries:(V,ve)=>{const $e=ve.payload;return{...V,recordedQueries:$e}},updateRecordedQueries:(V,ve)=>{const $e=ve.payload,ft=V.recordedQueries.map(Tt=>Tt.id===$e.id?$e:Tt);return{...V,recordedQueries:ft}},deleteRecordedQueries:(V,ve)=>{const $e=ve.payload,ft=V.recordedQueries.filter(Tt=>Tt.id!==$e.id);return{...V,recordedQueries:ft}},setPrometheusWriteTarget:(V,ve)=>{const $e=ve.payload;return{...V,prometheusWriteTarget:$e}}}}),{loadRecordedQueries:Vl,endLoadRecordedQueries:Od,loadedRecordedQueries:Id,updateRecordedQueries:Rd,deleteRecordedQueries:Ad,setPrometheusWriteTarget:Ld}=nl.actions,wd={recordedQueries:nl.reducer},ho="api/recording-rules";function Dc(){return async V=>{V(Vl());try{const ve=await(0,nt.i)().get(ho);V(Id(ve))}finally{V(Od())}}}function Nd(V){return async ve=>{await(0,nt.i)().put(ho,V),ve(Rd(V))}}function al(V){return async ve=>{await(0,nt.i)().delete(`${ho}/${V.id}`),ve(Ad(V))}}function Em(V){return(0,po.n)((0,nt.i)().fetch({method:"POST",url:ho,data:V,showErrorAlert:!1}))}function sl(V){return(0,po.n)((0,nt.i)().fetch({method:"POST",url:`${ho}/test`,data:V,showSuccessAlert:!1,showErrorAlert:!1}))}function Vo(){return async V=>{try{const ve=await(0,po.n)((0,nt.i)().fetch({method:"GET",url:`${ho}/writer`,showSuccessAlert:!1,showErrorAlert:!1}));V(Ld(ve.data))}catch(ve){console.error(ve)}}}function Ud(V){return(0,po.n)((0,nt.i)().fetch({method:"POST",url:`${ho}/writer`,data:V,showSuccessAlert:!1,showErrorAlert:!1}))}const Sc=V=>V.recordedQueries,Ci=V=>V.prometheusWriteTarget,Fd=V=>({expr:`${V.prom_name}{id="${V.id}", name="${V.name}"}`,legendFormat:"",interval:"",exemplar:!0,datasource:V.dest_data_source_uid});function Wd(V){return{recordedQueries:Sc(V.recordedQueries)}}const Mc={getRecordedQueriesAsync:Dc},$d=(0,U.connect)(Wd,Mc),Kd=({onAddQuery:V,getRecordedQueriesAsync:ve,recordedQueries:$e,onChangeDataSource:ft,filterValue:Tt})=>{const[Wt,on]=(0,a.useState)(!1),[gn,bn]=(0,a.useState)(Tt),[Sn,On]=(0,a.useState)([]),Pn=(0,P.wW)(zd);(0,a.useEffect)(ve,[Wt,ve]);const na=(Ia,Ma)=>{On(Ma?Sn.concat(Ia):Sn.filter(Fs=>!(0,mo.isEqual)(Fs,Ia)))},aa=()=>{(0,c.ff)("cloud_user_clicked_add_selected_recorded_queries",{recorded_queries_selected:Sn.map(Ma=>Ma.name)});const Ia=(0,si.F)().getInstanceSettings(Sd.D);ft?.(Ia),Sn.map(Fd).forEach(Ma=>{V?.(Ma)}),on(!1),On([]),Wl.Z.emit(Pi.SI.alertSuccess,["Selected recorded queries added to the editor. The data source has been changed to mixed."])},la=Vd($e,gn).map(Ia=>a.createElement(Tc,{key:Ia.id,onQueryToggle:na,recordedQuery:Ia})),da=()=>{on(!1),On([])},sa=()=>{(0,c.ff)("cloud_user_clicked_add_recorded_query_button"),on(!0)};return a.createElement(a.Fragment,null,a.createElement(G.zx,{icon:"plus",onClick:sa,variant:"secondary",className:Pn.openButton},"Recorded query"),a.createElement(bo.u,{isOpen:Wt,title:"Add recorded query",onDismiss:da,className:Pn.modal},a.createElement(Yu,{value:gn?.name,onChange:bn}),a.createElement(Ea.b,{title:"",severity:"info"},"To create a new Recorded Query, return to the query editor and use the "," ",a.createElement(d.J,{name:"record-audio"})," "," icon in the series bar."),la.length>0?la:gn&&a.createElement("div",{className:Pn.noQueries},"No recorded queries available for ",gn?.name),a.createElement("div",{className:Pn.modalButtons},a.createElement(G.zx,{variant:"secondary",className:Pn.modalButton,onClick:da},"Cancel"),a.createElement(G.zx,{variant:"primary",className:Pn.modalButton,onClick:aa,disabled:Sn.length===0},"Add"))))},Tc=({onQueryToggle:V,recordedQuery:ve})=>{const[$e,ft]=(0,a.useState)(!1);return a.createElement(Ao,{recordedQuery:ve,buttons:[a.createElement(ri.X,{name:ve.id,value:$e,key:`${ve.id}-checked`,onChange:()=>{V(ve,!$e),ft(!$e)}})]})},Vd=(V,ve)=>{const $e=(0,si.F)();return V.filter(ft=>ft.active).filter(ft=>!ve||ft.queries[0].datasource.uid===ve.uid).sort((ft,Tt)=>{const Wt=$e?.getInstanceSettings(ft.queries[0]?.datasource),on=$e?.getInstanceSettings(Tt.queries[0]?.datasource),gn=Wt?.meta.name.localeCompare(on?.meta.name??"");if(gn!==void 0&&gn!==0)return gn;const bn=Wt?.name.localeCompare(on?.name??"");return bn!==void 0&&bn!==0?bn:ft.name.localeCompare(Tt.name)})},zd=V=>({modalButtons:u.css`
      display: flex;
      justify-content: end;
    `,openButton:u.css`
      margin-left: -8px;
    `,modalButton:u.css`
      margin-left: ${V.spacing(1)};
    `,modal:u.css`
      width: 750px;
    `,noQueries:u.css`
      margin-left: ${V.spacing(1)};
      margin-bottom: ${V.spacing(3)};
    `}),Oc=$d(Kd);var Ic=e(69311),Vr=e(63619),Jr=e(19115),Hd=e(27581),kd=e(1029),rl=e(22323),Ni=e(15546),Ir=e(87095),ii=e(10672);const Rc=[{label:"30 seconds",value:30},{label:"1 minute",value:60},{label:"5 minutes",value:300},{label:"30 minutes",value:1800},{label:"1 hour",value:3600},{label:"12 hours",value:43200},{label:"24 hours",value:86400},{label:"1 week",value:604800},{label:"1 month",value:2592e3}],Ac=({label:V,description:ve,value:$e,onChange:ft})=>a.createElement("div",null,a.createElement(de.g,{label:V,description:ve,required:!0},a.createElement(m.Ph,{options:Rc,onChange:Tt=>{ft(Tt.value)},value:$e,"aria-label":`${V}-select`,menuShouldPortal:!0})));function Ui(V){return{variables:(0,Ir.ng)(V)}}const Lc=(0,U.connect)(Ui),zl=({href:V,trackingSource:ve})=>{const $e=(0,P.wW)(Pa);return a.createElement("a",{href:V,className:$e.docsLink,target:"_blank",rel:"noreferrer",onClick:()=>(0,c.ff)("cloud_user_clicked_create_recorded_query_modal_documentation_icon",{source:ve})},a.createElement(d.J,{name:"info-circle"}))},Gd=({query:V,queries:ve,dataSource:$e,variables:ft})=>{const[Tt,Wt]=(0,a.useState)(!1),[on,gn]=(0,a.useState)(),[bn,Sn]=(0,a.useState)("info"),[On,Pn]=(0,a.useState)(""),na=(0,P.wW)(Hd.J),aa=(0,P.wW)(Pa);(0,a.useEffect)(()=>{(async()=>{s.Vt.hasAccess(ee.LicensingRead,s.Vt.isGrafanaAdmin)&&gn(await _a().catch(()=>{}))})()},[]);const la=()=>{Pn(""),Sn("info"),Wt(!1)},da=async $a=>{try{return await Ma($a,Fs)}catch(Ya){Sn("error"),(0,nt.kW)(Ya)&&Pn(Ya.data.message);return}},sa=async $a=>{const Ya=await da($a);Ya&&Em(Ya).then(()=>{Sn("success"),Pn("Your new recorded query is recording successfully!"),(0,c.ff)("cloud_user_created_recorded_query")}).catch(hs=>{Sn("error"),Pn(`Result: ${hs.data.message}`)})},Ia=async $a=>{const Ya=await da($a);Ya&&sl(Ya).then(hs=>{Sn("info"),Pn(`Result: ${hs.data.message}`)}).catch(hs=>{Sn("error"),Pn(hs.data.message)})},Ma=async($a,Ya)=>{const hs={target_ref_id:V?V.refId:"",name:$a.name,description:$a.description,interval:$a.interval,range:$a.range,count:$a.isCount,active:!0},Er=ve?.map(async _s=>{const Ds=_s.datasource||$e?.name,Ws=await(0,si.F)().get(Ds),uo=Ws.interpolateVariablesInQueries?Ws.interpolateVariablesInQueries([_s],{...Ya})[0]:_s;return uo.datasourceId=Ws?Ws.id:-1,uo.datasource===void 0&&(_s.datasource!==void 0&&_s.datasource!==null?uo.datasource=_s.datasource:Ws&&(uo.datasource={uid:Ws.uid,type:Ws.type})),uo});return hs.queries=Er?await Promise.all(Er):[],hs},Fs=ft?.filter($a=>$a.hide!==ii.bU.hideVariable),Gs=a.createElement("h2",{className:na.modalHeaderTitle},"Create recorded query",a.createElement(zl,{href:"https://grafana.com/docs/grafana/latest/enterprise/recorded-queries/#create-a-recorded-query",trackingSource:"modal-title"})),is=bn!=="success"?a.createElement("div",{"aria-label":"Test the recorded query"},a.createElement(d.J,{name:"sync"})):void 0,Hs=bn==="success"?a.createElement(G.zx,{type:"button",variant:"primary",onClick:la,"aria-label":"Close recording query button"},"Close"):a.createElement(G.zx,{type:"button",variant:"secondary",onClick:la,fill:"outline","aria-label":"Cancel recording query button"},"Cancel");return a.createElement(a.Fragment,null,a.createElement(kd.y,{title:"Create recorded query",icon:"record-audio",onClick:()=>{Wt(!0),(0,c.ff)("cloud_user_clicked_create_recorded_query_icon")}}),a.createElement(bo.u,{isOpen:Tt,title:Gs,onDismiss:la,className:aa.modal},a.createElement(Xa.l,{onSubmit:sa,validateOn:"all"},({register:$a,errors:Ya,control:hs,getValues:Er})=>a.createElement(a.Fragment,null,a.createElement(de.g,{label:"Name",description:"Give this query a name",invalid:!!Ya.name,error:Ya.name?.message,required:!0},a.createElement(ke.I,{...$a("name",{required:{value:!0,message:"Name is required"}}),id:"add-recorded-query-name",autoFocus:!0})),a.createElement(de.g,{label:"Description",description:"Provide a description for this query"},a.createElement(ke.I,{...$a("description"),id:"add-recorded-query-desc"})),a.createElement("div",{className:aa.timeSelect},a.createElement(Vr.g,{name:"interval",control:hs,defaultValue:Rc[0].value,render:({field:{ref:_s,value:Ds,onChange:Ws,...to}})=>a.createElement(Ac,{label:"Interval",description:"Decide how often to record this query",value:Ds,onChange:Ws})})),a.createElement("div",{className:aa.timeSelect},a.createElement(Vr.g,{name:"range",control:hs,defaultValue:(0,Ic.Rr)().from,render:({field:{ref:_s,value:Ds,onChange:Ws,...to}})=>{const uo=a.createElement(a.Fragment,null,"Select this query's relative time range",a.createElement(zl,{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/#time-units-and-relative-ranges",trackingSource:"time-range"})),Fr=a.createElement(He._,{description:uo},"Relative Time Range *");return a.createElement(de.g,{label:Fr,invalid:!!Ya.range,error:Ya.name?.message,required:!0},a.createElement(Jr.x,{timeRange:{from:Ds,to:0},onChange:Pr=>Ws(Pr.from)}))}})),Fs?.length>0?a.createElement(de.g,{label:"Template variables",description:"Select a value for each template variable"},a.createElement(a.Fragment,null,Fs.map(_s=>{const{picker:Ds,setValue:Ws}=rl.z.get(_s.type);return a.createElement(el._,{label:_s.name,key:_s.name,labelWidth:16},a.createElement(Ds,{onVariableChange:to=>{(0,Ni.eL)(to)&&Ws(to,to.current)},variable:_s,readOnly:!1}))}))):null,a.createElement(de.g,{label:"Count query results",description:a.createElement(a.Fragment,null,"Count the rows returned from this query",a.createElement(zl,{href:"https://grafana.com/docs/grafana/latest/enterprise/recorded-queries/#create-a-recorded-query",trackingSource:"count-field"}))},a.createElement(Be.r,{...$a("isCount"),id:"add-recorded-query-count"})),a.createElement(Ea.b,{className:aa.testQuery,severity:bn,title:bn==="success"?On:"Test this recorded query",buttonContent:is,onRemove:bn!=="success"?()=>Ia(Er()):void 0},a.createElement(a.Fragment,null,bn!=="success"&&On),On==="An unknown issue is preventing the system from processing your query."&&zo(on)),a.createElement(bo.u.ButtonRow,null,Hs,bn!=="success"&&a.createElement(G.zx,{type:"submit","aria-label":"Start recording query button"},"Start recording query"))))))},zo=V=>{let ve="https://grafana.com/contact";return V&&V.slug&&V.lid&&(ve=`https://grafana.com/orgs/${V.slug}/tickets?support=licensing&licenseId=${V.lid}`),a.createElement(a.Fragment,null,"To submit a support ticket to Grafana Labs, complete the ",a.createElement("a",{href:ve},"Contact Grafana Labs"))},Pa=V=>({modal:u.css`
      width: 550px;
    `,testQuery:u.css`
      margin-top: ${V.spacing(3)};
    `,timeSelect:u.css`
      width: 50%;
    `,docsLink:u.css`
      margin-left: ${V.spacing(.5)};
    `}),Bc=Lc(Gd),Hl=()=>{const ve=yi.h.getState().recordedQueries.prometheusWriteTarget;return Boolean(ve?.data_source_uid)&&Boolean(ve?.remote_write_path)};function Do(){(0,t.v)("recordedqueries")&&n.v?.recordedQueries?.enabled&&((0,yi.WI)(Vo()),Fl.f.addExtraRenderAction(ve=>Hl()&&(ve.dataSource?.meta.backend||(0,ju.Pr)(ve.dataSource))?a.createElement(Bc,{...ve}):null),Fl.S.addExtraRenderAction(ve=>Hl()?a.createElement(Oc,{...ve}):null))}var So=e(2555),wc=e(97097);const kl=()=>{const V=(0,P.wW)(Gl);return a.createElement(wc._,{className:V.cta,message:"No recorded queries defined",footer:a.createElement("span",{key:"proTipFooter"},a.createElement(d.J,{name:"rocket"}),"ProTip: ","You can record queries from the query editor."),callToActionElement:a.createElement(a.Fragment,null)})},Gl=V=>({cta:u.css`
      text-align: center;
    `});function Ps(V){return{navModel:(0,R.ht)(V.navIndex,"recordedQueries"),recordedQueries:Sc(V.recordedQueries),isLoading:V.recordedQueries.isLoading}}const xi={getRecordedQueriesAsync:Dc,updateRecordedQuery:Nd,deleteRecordedQuery:al},Nc=(0,U.connect)(Ps,xi),jd=({navModel:V,isLoading:ve,recordedQueries:$e,getRecordedQueriesAsync:ft,updateRecordedQuery:Tt,deleteRecordedQuery:Wt})=>{(0,a.useEffect)(ft,[ft]);const on=(0,P.wW)(Yd),[gn,bn]=(0,a.useState)(),Sn=$e.map(Pn=>{const na=[a.createElement(G.zx,{key:"toggle-recorded-query-active",onClick:async()=>{await Tt({...Pn,active:!Pn.active})},variant:Pn.active?"secondary":"primary"},Pn.active?"Pause recording":"Resume recording"),a.createElement(G.zx,{key:"delete-recorded-query","aria-label":"Delete recorded query",onClick:()=>bn(Pn),variant:"destructive"},"Delete")];return a.createElement(Ao,{key:Pn.id,recordedQuery:Pn,buttons:na})}),On=()=>ve?a.createElement(So.Z,null):Sn.length===0?a.createElement(kl,null):Sn;return a.createElement(w.T,{navModel:V},a.createElement(w.T.Contents,null,a.createElement("div",{className:on.header},a.createElement(w.T.OldNavOnly,null,a.createElement("h2",{className:on.title},"Recorded queries")),a.createElement(G.Qj,{icon:"cog",href:"/recorded-queries/write-target"},"Edit remote write target")),On(),gn&&a.createElement(q.s,{isOpen:!0,icon:"trash-alt",title:"Delete",body:a.createElement("div",null,"Are you sure you want to delete '",gn.name,"'?"),confirmText:"Delete",onDismiss:()=>bn(void 0),onConfirm:async()=>{await Wt(gn),bn(void 0)}})))},Yd=V=>({header:u.css`
      display: flex;
      justify-content: flex-end;
      margin-bottom: ${V.spacing(1)};
    `,title:u.css`
      margin-bottom: 0;
      width: 100%;
    `}),Qd=Nc(jd);function Zd(V){return{navModel:(0,R.ht)(V.navIndex,"recordedQueries"),prometheusWriteTarget:Ci(V.recordedQueries)}}const so={getPrometheusWriteTarget:Vo},Uc=(0,U.connect)(Zd,so),Qu=({navModel:V,prometheusWriteTarget:ve,getPrometheusWriteTarget:$e})=>{const[ft,Tt]=(0,a.useState)(),[Wt,on]=(0,a.useState)(ve?.remote_write_path),gn=(0,P.wW)(Yl);(0,a.useEffect)($e,[$e]),(0,a.useEffect)(()=>{(async()=>{if(ve){const Pn=await(0,si.F)().getInstanceSettings(ve.data_source_uid);Tt(Pn)}})()},[ve]);const bn=On=>{jl(ft?.uid,On.remote_write_path)},Sn=a.createElement("span",null,"Select the data source where metrics will be written",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/recorded-queries/#remote-write-target",className:gn.docsLink,target:"_blank",rel:"noreferrer"},a.createElement(d.J,{name:"info-circle"})));return a.createElement(w.T,{navModel:V},a.createElement(w.T.Contents,null,a.createElement(Xa.l,{key:ve?.data_source_uid,defaultValues:ve,onSubmit:bn},({register:On})=>a.createElement(a.Fragment,null,a.createElement(de.g,{label:Sn},a.createElement($l.q,{onChange:Tt,current:ft?.name,placeholder:"Select a data source",type:"prometheus",noDefault:!0,alerting:!0,"aria-label":"Write target config select data source"})),a.createElement(de.g,{label:"Remote write path"},a.createElement(ke.I,{...On("remote_write_path"),onChange:Pn=>on(Pn.currentTarget.value),placeholder:"/api/v1/write","aria-label":"Write target config remote write path"})),a.createElement(G.zx,{disabled:Boolean(!Wt||!ft),type:"submit","aria-label":"Write target config save"},"Save")))))};function jl(V,ve){Ud({data_source_uid:V,remote_write_path:ve}).then(()=>{Wl.Z.emit(Pi.SI.alertSuccess,["Prometheus remote write target created"])}).catch($e=>{Wl.Z.emit(Pi.SI.alertError,[$e.data.message])})}const Yl=V=>({docsLink:u.css`
      margin-left: ${V.spacing(1)};
    `}),Fc=Uc(Qu);var Jd=e(73194),ol=e(18262),li=e(27677),Wc=e(19349),Xd=e(69155);const $c=({dashboard:V,onDismiss:ve})=>{(0,a.useEffect)(()=>{(0,c.ff)("grafana_dashboards_report_share_viewed")},[]);const $e=(0,P.wW)(il),ft=()=>{const Wt=li.Cj.toUrlParams((0,Xd.c)()),on=li.Cj.toUrlParams((0,Wc.$t)().timeRangeForUrl());return`?${Wt}&${on}&db-uid=${V.uid}&db-id=${V.id}&db-name=${V.title}`};return(0,t.v)("reports.creation")?a.createElement(a.Fragment,null,(0,F.d5)()&&a.createElement("div",{className:$e.highlight},a.createElement(N.Xz,{featureId:"reporting-tab",eventVariant:"trial",featureName:"reporting",text:"Create unlimited reports during your trial of Grafana Pro."}),a.createElement("h3",null,"Get started with reporting"),a.createElement("h6",null,"Reporting allows you to automatically generate PDFs from any of your dashboards and have Grafana email them to interested parties on a schedule.")),a.createElement(G.Qj,{href:`reports/new/${ft()}`,onClick:ve,className:$e.button},"Create report using this dashboard"),(0,F.d5)()&&a.createElement(G.Qj,{fill:"text",href:"https://grafana.com/docs/grafana/latest/enterprise/reporting"},"Learn more")):a.createElement("div",{className:$e.container},a.createElement(N.Xz,{featureName:"reporting",featureId:"reporting-tab"}),a.createElement(N.tM,{image:"reporting-email.png",featureName:"reporting",featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/reporting",description:"Reporting allows you to automatically generate PDFs from any of your dashboards and have Grafana email them to interested parties on a schedule."}))},il=V=>({container:u.css`
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    `,button:u.css`
      margin-right: ${V.spacing(2)};
    `,highlight:u.css`
      margin-bottom: ${V.spacing(3)};

      h6 {
        font-weight: ${V.typography.fontWeightLight};
      }
    `});var co=e(59052),br=e(13393),ll=e(4883);const cl="/public/img/grafana_icon.svg",Js="https://grafana.com/static/assets/img/grafana_logo_lockup_ltbg.png",vo="/reports",Kc="api/reports/images/",Fi=2,Ho={1:{label:"Zoom in",style:{transform:"translateX(-10%)"}},2:{label:"Standard"},3:{label:"Zoom out",style:{width:"100%",left:"91%"}}};var _d=e(86899),dl=e(85803);const Ql=(V,ve={hour:0,minute:0},$e)=>{const ft=`${ve.hour}:${ve.minute}:00`,Tt=typeof V=="string"?Lo(V):V,Wt=new Date(`${(0,Ne.CQ)(Tt).format("YYYY/MM/DD")} ${ft}`),on=(0,Za.dq)(Wt.getTime(),{timeZone:$e,format:"Z"});return ko((0,Ne.CQ)(Wt).format())+on},ko=V=>V.includes("Z")?V.replace("Z",""):V.slice(0,-6),Lo=V=>V?(0,Ne.CQ)(V.split("T")[0]).toDate():"",bi=V=>String(V).length===1?`0${V}`:String(V),Xs=V=>{if(!V)return{hour:0,minute:0};const ve=V.match(/T(\d+):(\d+)/);if(ve){const[,$e,ft]=ve;return{hour:parseInt($e,10),minute:parseInt(ft,10)}}return{hour:0,minute:0}},Rr=V=>V?dateTime(V).isBefore(dateTime()):!1,Us=V=>{if(!V)return{time:void 0,date:void 0};const{hour:ve,minute:$e}=Xs(V);return{date:(0,Za.dq)(V,{format:"MMMM DD, YYYY"}),time:`${bi(ve)}:${bi($e)}`}},Di=V=>{if(!V.from||!V.to)return"Dashboard time range";const ve=parseInt(V.from,10),$e=parseInt(V.to,10);return!isNaN(ve)&&!isNaN($e)?(0,oi.describeTimeRange)({from:(0,Ne.CQ)(ve),to:(0,Ne.CQ)($e)}):(0,oi.describeTimeRange)(V)},ro=V=>!V||!V.from||!V.to,Gr=V=>V?.length?Object.fromEntries(V.map(ve=>{const{getValueForUrl:$e}=rl.z.get(ve.type),ft=$e(ve);return[ve.name,Array.isArray(ft)?ft.join(","):ft]})):{},qd=(V,ve)=>!ve||!Object.keys(ve).length?V:V.map($e=>{const ft=ve[$e.name];if(!ft||!(0,Ni.eL)($e))return $e;const Tt=ft.split(","),Wt=Tt.map(on=>$e.options.find(gn=>gn.value===on)||{text:on,value:on}).filter(Boolean);return{...$e,current:{...$e.current,text:Wt.map(on=>on?.text),value:Wt.map(on=>on?.value)},options:$e.options.map(on=>({...on,selected:typeof on.value=="string"&&Tt.includes(on.value)}))}}),eu=()=>{const V="var-",ve=new URLSearchParams(window.location.search),$e={};for(const[ft,Tt]of ve.entries())if(ft.startsWith(V)){const Wt=ft.replace(V,"");$e[Wt]=[...$e[Wt]||[],Tt]}return Object.fromEntries(Object.entries($e).map(([ft,Tt])=>[ft,Tt.join(",")]))},Vc=V=>V.some(ve=>(0,Ni.Xh)(ve)&&ve.refresh===ii.Bd.onTimeRangeChanged);var jr=e(92624);const Wi=()=>{if(!window.Intl)return"";const V=window.Intl.DateTimeFormat();if(!V.resolvedOptions)return"";const ve=V.resolvedOptions();return ve.timeZone?ve.timeZone:""},Zl={from:(0,Ne.CQ)(null),to:(0,Ne.CQ)(null),raw:{from:"",to:""}},zc={id:0,name:"",recipients:"",replyTo:"",message:`Hi, 
Please find attached a PDF status report. If you have any questions, feel free to contact me!
Best,`,dashboardId:void 0,dashboardName:"",dashboards:[{dashboard:void 0,timeRange:Zl.raw}],schedule:{frequency:Z.Weekly,timeZone:Wi()},formats:["pdf"],scaleFactor:Fi,options:{orientation:"landscape",layout:"grid",timeRange:Zl.raw},enableDashboardUrl:!0,state:oe.Scheduled},ul={reports:[],report:zc,hasFetchedList:!1,hasFetchedSingle:!1,searchQuery:"",reportCount:0,isLoading:!0,isUpdated:!1,visitedSteps:[],settings:{branding:{reportLogoUrl:"",emailLogoUrl:"",emailFooterMode:J.SentBy,emailFooterText:"",emailFooterLink:""}}},Hc=(0,Fo.oM)({name:"reports",initialState:ul,reducers:{reportsLoaded:(V,ve)=>({...V,reports:ve.payload,reportCount:ve.payload.length,hasFetchedList:!0}),reportLoaded:(V,ve)=>({...V,report:ve.payload,hasFetchedSingle:!0,isLoading:!1}),updateReportProp:(V,ve)=>({...V,isUpdated:!0,report:ve.payload}),clearReportState:V=>({...V,isUpdated:!1,visitedSteps:[],report:zc}),reportLoadingBegin:V=>({...V,isLoading:!0}),reportLoadingEnd:V=>({...V,isLoading:!1}),testEmailSendBegin:V=>({...V,testEmailIsSending:!0}),testEmailSendEnd:V=>({...V,testEmailIsSending:!1}),setLastUid:(V,ve)=>({...V,lastUid:(0,jr.mn)(ve.payload)}),addVisitedStep:(V,ve)=>({...V,visitedSteps:[...V.visitedSteps,...ve.payload]})}}),{clearReportState:kc,reportLoaded:tu,reportsLoaded:ml,updateReportProp:fl,reportLoadingBegin:Gc,reportLoadingEnd:nu,testEmailSendBegin:au,testEmailSendEnd:Zu,setLastUid:jc,addVisitedStep:$i}=Hc.actions,Yc={reports:Hc.reducer},Si="api/reports";function Ki(){return async V=>{const ve=await(0,nt.i)().get(Si);V(ml(ve))}}function Qc(V,ve,$e){return async ft=>{const Tt=await Ie.ae.getDashboardByUid(V),Wt=new _d.f(Tt.dashboard,Tt.meta);if(Vc(Wt.templating.list)){const gn=ro($e)?Wt?.time:$e;(0,Wc.$t)().setTime(gn)}const on=qd(Wt.templating.list,ve);await ft((0,dl.LX)(Tt.dashboard.uid,{...Wt,templating:{list:on}})),ft(jc(V))}}function gl(V){return async ve=>{ve(Gc());try{const $e=await(0,nt.i)().get(`${Si}/${V}`);$e.dashboards||($e.dashboards=[{dashboard:{uid:$e.dashboardUid,id:$e.dashboardId,name:$e.dashboardName},reportVariables:$e.templateVars,timeRange:$e.options.timeRange}]);for(const ft of $e.dashboards)ft.dashboard.uid&&await ve(Qc(ft.dashboard.uid,ft.reportVariables,ft.timeRange));ve(tu($e))}catch{ve(nu())}}}function Go(V){return ve=>(ve(au()),(0,nt.i)().post(`${Si}/test-email/`,V).finally(()=>ve(Zu())))}function Zc(V){return async ve=>{await(0,nt.i)().delete(`${Si}/${V}`),ve(Ki())}}function Jl(V){return async()=>{try{await(0,nt.i)().post(Si,V)}catch(ve){throw ve}}}function Xl(V,ve){return async $e=>{const ft=["hour","minute","day"];V={...V,schedule:Object.fromEntries(Object.entries(V.schedule).filter(([Tt,Wt])=>!ft.includes(Tt)))},await(0,nt.i)().put(`${Si}/${V.id}`,V),ve&&$e(Ki())}}const Jc=V=>(0,mo.upperFirst)(V.map(ve=>{switch(ve){case"csv":case"pdf":return ve.toUpperCase();case"image":return"embedded image"}}).join(", ")),Xc=V=>{const ve=V.state,$e=V.schedule.frequency===Z.Never,ft=$e||[oe.Draft,oe.Expired,oe.Paused].includes(ve),Tt=$e||[oe.Draft,oe.Expired].includes(ve);return{isNever:$e,showPlay:ft,disableEdit:Tt,reportState:ve}},pl=(V={})=>{const{time:ve,startDate:$e,endDate:ft,endTime:Tt,timeZone:Wt,frequency:on,dayOfMonth:gn,workdaysOnly:bn,intervalFrequency:Sn,intervalAmount:On,sendTime:Pn}=V,na=!ve&&$e?Xs(String($e)):ve,aa=$e&&Pn!=="now"?Ql($e,na,Wt):"",la=ft&&![Z.Once,Z.Never].includes(on)?Ql(ft,Tt,Wt):"",da={frequency:on,timeZone:Wt,workdaysOnly:bn,intervalFrequency:Sn,intervalAmount:On?parseInt(On,10):0,startDate:aa,endDate:la,dayOfMonth:gn?"last":""};return Object.fromEntries(Object.entries(da).filter(([sa,Ia])=>Ia))};function _c(V){const ve=["th","st","nd","rd"],$e=V%100;return V+(ve[($e-20)%10]||ve[$e]||ve[0])}const qc=(V,ve=ae.Hours)=>V===Z.Custom&&ve===ae.Hours,hl=(V,ve=ae.Hours)=>[Z.Hourly,Z.Daily].includes(V)||qc(V,ve);function ed({startDate:V,endDate:ve,intervalFrequency:$e=ae.Hours,intervalAmount:ft=2,frequency:Tt,dayOfMonth:Wt,timeZone:on,workdaysOnly:gn}){if(!V)return"";const bn="en-US",{hour:Sn,minute:On}=Xs(V),Pn=bi(On),na=bi(Sn),aa=(0,Ne.CQ)(Lo(V)).locale(bn).format("dddd"),la=Wt==="last"?"the last":_c(Lo(V).getDate());let da,sa;const Ia=(0,ll.k)(Date.now(),on),Ma=`at ${na}:${Pn}${Ia?` ${Ia}`:""}`,Fs=gn&&hl(Tt,$e)?", Monday to Friday":"";switch(ve&&(da=`${(0,Ne.CQ)(Lo(V)).locale(bn).format("LL")} - ${(0,Ne.CQ)(Lo(ve)).locale(bn).format("LL")}`),Tt){case Z.Monthly:sa=`Monthly on ${la} day ${Ma}`;break;case Z.Weekly:sa=`Every ${aa} ${Ma}`;break;case Z.Daily:sa=`Daily ${Ma}`;break;case Z.Hourly:sa=`Hourly at minute ${Pn}`;break;case Z.Custom:sa=`Every ${ft} ${$e}`;break;case Z.Once:sa=`Once on ${(0,Ne.CQ)(Lo(V)).locale(bn).format("LL")}`;break;case Z.Never:sa="Never";break}return da&&sa?`${sa}, ${da}${Fs}`:(Tt===Z.Custom&&(sa+=`, ${$e===ae.Hours?`from ${na}:${Pn}${Ia?` ${Ia}`:""}`:`from ${(0,Ne.CQ)(Lo(V)).locale(bn).format("LL")}`}`),sa+Fs)}const _l=new Map([[Z.Monthly,"month"],[Z.Daily,"day"],[Z.Weekly,"week"],[Z.Hourly,"hour"]]),ql=V=>{const{frequency:ve,intervalFrequency:$e=ae.Hours,intervalAmount:ft="2"}=V;if(ve===Z.Never)return"The report will not be sent.";const Tt=V.workdaysOnly?", Monday to Friday.":".";if(!V.sendTime||V.sendTime==="now"){let on="The report will be sent immediately after it is saved",gn;return _l.has(ve)?gn=_l.get(ve):ve===Z.Custom&&(gn=`${ft}  ${$e}`),gn&&(on+=` and will be sent every ${gn}`),`${on}${Tt}`}const Wt=ed(pl(V));return Wt?`The report will be sent: ${Wt}.`:""},jo=V=>{const ve=ul.report.schedule;return Object.keys(ve).length!==Object.keys(V).length?!0:Object.entries(ve).some(([$e,ft])=>ft!==V[$e])},oo=()=>{if(!window.location.search)return null;const V=new URLSearchParams(window.location.search);return{timeRange:{to:V.get("to")||"",from:V.get("from")||""},dashboard:{uid:V.get("db-uid"),id:V.get("db-id"),name:V.get("db-name")},variables:eu()}},su=V=>{if(V.id)return V;const ve=oo();if(!ve)return V;const{timeRange:$e,dashboard:ft,variables:Tt}=ve;let Wt=[...ul.report.dashboards];return $e?.from&&$e?.to&&(Wt[0]={...Wt[0],timeRange:$e}),ft.name&&ft.id&&ft.uid&&(Wt[0]={...Wt[0],dashboard:{uid:ft.uid,id:Number(ft.id),name:ft.name}}),Tt&&Object.keys(Tt).length&&(Wt[0]={...Wt[0],reportVariables:Tt}),{...V,dashboards:Wt}},ru=()=>{const V=new URLSearchParams(window.location.search),ve=V.get("to"),$e=V.get("from");return $e&&ve?{from:$e,to:ve}:null},Mi=(V,ve)=>`${vo}/${V}${ve?"/"+ve:""}`,vl=V=>Array.isArray(V)?V?.length:!0,Eo=(V,ve)=>{const $e=[{step:re.SelectDashboard,fields:["dashboards"]},{step:re.FormatReport,fields:["formats"]},{step:re.Share,fields:["name","recipients"]}],ft=!V.dashboards?.[0]?.dashboard?.uid;return ve?ve===re.SelectDashboard?ft:$e.find(Wt=>Wt.step===ve)?.fields?.some(Wt=>!V[Wt]||!vl(V[Wt])):$e.flatMap(on=>on.fields)?.some(on=>!V[on]||!vl(V[on]))||ft},eo=({uid:V,name:ve,className:$e})=>{const ft=(0,P.wW)(Yo);return V?a.createElement("a",{href:`${n.v.appUrl}d/${V}`,className:(0,u.cx)(ft.link,$e),target:"_blank",rel:"noreferrer"},ve||"View dashboard"):null},Yo=V=>({link:u.css`
      display: inline-block;
      color: ${V.colors.text.link};
      margin-top: ${V.spacing(1)};
      font-size: ${V.typography.bodySmall.fontSize};

      :hover {
        text-decoration: underline;
      }
    `}),Xu=({confirmRedirect:V,onDiscard:ve,onLocationChange:$e})=>{const[ft,Tt]=(0,a.useState)(!1),[Wt,on]=(0,a.useState)(null),[gn,bn]=(0,a.useState)(!1);(0,a.useEffect)(()=>{const na=aa=>{V&&(aa.preventDefault(),aa.returnValue="")};return window.addEventListener("beforeunload",na),()=>{window.removeEventListener("beforeunload",na)}},[V]);const Sn=na=>{const aa=$e?.(na);let la=V&&!gn;return aa!==void 0&&(la=la&&aa),la?(Tt(!0),on(na),!1):(aa&&ve(),!0)},On=()=>{Tt(!1),on(null)},Pn=()=>{Tt(!1),bn(!0),ve()};return a.createElement(a.Fragment,null,a.createElement(B.NL,{when:!0,message:Sn}),Wt&&gn&&a.createElement(B.l_,{to:Wt}),a.createElement(_u,{isOpen:ft,onDiscard:Pn,onBackToForm:On}))},_u=({onDiscard:V,onBackToForm:ve,isOpen:$e})=>a.createElement(bo.u,{isOpen:$e,title:"Leave page?",onDismiss:ve,icon:"exclamation-triangle",className:u.css`
        width: 500px;
      `},a.createElement("h5",null,"Changes that you made may not be saved."),a.createElement(bo.u.ButtonRow,null,a.createElement(G.zx,{variant:"secondary",onClick:ve,fill:"outline"},"Continue editing"),a.createElement(G.zx,{variant:"destructive",onClick:V},"Discard unsaved changes"))),ci=V=>{if(!V)return yr[0];const ve=yr.findIndex($e=>$e.id===V);return ve===yr.length-1?yr[ve]:yr[ve+1]},Qo=V=>{if(!V||V===yr[0].id)return;const ve=yr.findIndex($e=>$e.id===V);return yr[ve-1]},ou=(V,ve)=>{const $e=Qo(V);$e&&$e.id!==V&&cs.E1.push(Mi($e.id,ve))},ec=(0,a.forwardRef)(({activeStep:V,existingReport:ve,disabled:$e,saveDraft:ft,reportId:Tt},Wt)=>{const on=(0,P.wW)(td),gn=(0,a.useRef)(null),bn=Qo(V),Sn=ci(V),Pn=Sn.id===V?ve?"Update report":"Save report":`Next: ${Sn.name}`;return(0,a.useImperativeHandle)(Wt,()=>({click:()=>{gn.current?.click()}})),a.createElement("div",{className:on.buttonRow},a.createElement("div",{className:on.buttonRowInner},a.createElement("div",null,bn&&a.createElement(G.zx,{variant:"secondary",onClick:()=>ou(V,Tt)},"Previous: ",bn.name),a.createElement(G.zx,{ref:gn,disabled:$e,type:"submit"},Pn)),a.createElement(G.zx,{variant:"secondary",onClick:ft},"Save as draft")))});ec.displayName="ButtonRow";const td=V=>({buttonRow:u.css`
      display: flex;
      padding: ${V.spacing(2,0,.5,0)};
      border-top: 1px solid ${V.colors.secondary.border};
      width: 100%;
      background-color: ${V.colors.background.primary};
      button {
        &:first-of-type {
          margin-right: ${V.spacing(2)};
        }
        &:last-of-type {
          margin-right: 0;
        }
      }
    `,buttonRowInner:u.css`
      display: flex;
      justify-content: space-between;
      margin-left: calc(min(30%, 200px) + 72px); // align with form
      width: min(70%, 800px);
    `});var iu=e(29460);const lu=({report:V,onStepChange:ve,visitedSteps:$e,reportId:ft,activeStep:Tt=re.SelectDashboard})=>{const Wt=(0,P.wW)(cu),on=yr[yr.length-1];return a.createElement("ol",{className:Wt.container},yr.map(gn=>{const bn=gn.id===on.id,Sn=gn.id===Tt,On=$e.includes(gn.id)||Tt===on.id,Pn=Eo(V,gn.id),na=!Sn&&!bn&&On&&!Pn,aa=!Sn&&!bn&&On&&Pn,la=(0,u.cx)(Wt.item,{[Wt.active]:Sn,[Wt.successItem]:na,[Wt.warnItem]:aa});return a.createElement("li",{key:gn.id,className:la},na&&a.createElement(d.J,{name:"check",size:"xl",className:Wt.successItem}),aa&&a.createElement(d.J,{name:"exclamation-triangle",className:Wt.warnItem}),a.createElement(iu.r,{onClick:Sn?void 0:ve,href:Mi(gn.id,ft),className:Wt.link},gn.name),!bn&&a.createElement("div",{className:Wt.divider}))}))},cu=V=>({container:u.css`
      counter-reset: item;
      list-style-type: none;
      width: min(30%, 200px);
      margin-right: ${V.spacing(9)};
      padding-left: ${V.spacing(1)};
      position: relative;

      &::after {
        content: '';
        background-color: ${V.colors.border.medium};
        position: absolute;
        top: 0;
        right: 0;
        height: 240px;
        width: 1px;
      }
    `,item:u.css`
      color: ${V.colors.text.secondary};
    `,successItem:u.css`
      a {
        &::before {
          content: '';
        }
      }

      svg {
        color: ${V.colors.success.text};
        margin: ${V.spacing(0,.5,0,-1)};
      }
    `,warnItem:u.css`
      a::before {
        content: '';
      }
      svg {
        color: ${V.colors.warning.text};
        margin: ${V.spacing(0,1,.5,-.5)};
      }
    `,link:u.css`
      color: inherit;
      &:hover {
        color: ${V.colors.text.link};
      }

      &::before {
        content: counter(item) '  ';
        counter-increment: item;
      }
    `,active:u.css`
      font-weight: 500;
      color: ${V.colors.text.maxContrast};

      &::before {
        font-weight: 500;
      }
    `,divider:u.css`
      height: ${V.spacing(2)};
      border-left: 1px dotted ${V.colors.text.secondary};
      margin: ${V.spacing(1,.5)};
    `}),du=V=>{const{report:ve,isUpdated:$e,visitedSteps:ft}=V.reports;return{existingReport:!!ve.id,isUpdated:$e,report:ve,visitedSteps:ft}},uu={addVisitedStep:$i,clearReportState:kc,createReport:Jl,updateReport:Xl},mu=(0,U.connect)(du,uu),El=({activeStep:V,addVisitedStep:ve,children:$e,clearReportState:ft,confirmRedirect:Tt,createReport:Wt,disabled:on,editMode:gn,existingReport:bn,getFormData:Sn,isUpdated:On,onSubmit:Pn,report:na,reportId:aa,updateReport:la,visitedSteps:da})=>{const sa=(0,P.wW)(Vi),Ia=ci(V),Ma=(0,B.k6)(),Fs=(0,a.useRef)(null),[Gs,is]=(0,a.useState)(Tt||On);(0,a.useEffect)(()=>{(Ds=>{Ds===yr[yr.length-1].id?ve(yr.map(Ws=>Ws.id)):ve([Ds])})(V)},[V,ve]),(0,a.useEffect)(()=>{is(Tt||On)},[Tt,On]);const Hs=_s=>{_s.preventDefault();const Ds=Mi(Ia.id,aa);Pn(),Ma.push(Ds)},$a=async()=>{if(Sn){const Ds=Sn();na={...na,...Ds}}await(na.id?la:Wt)({...na,state:oe.Draft}),is(!1),(0,c.ff)("reports_draft_saved"),ft(),Ma.push(vo)},Ya=()=>{ft(),(0,c.ff)("reports_report_abandoned",{namePopulated:!!na.name,recipientsPopulated:!!na.recipients,replyToPopulated:!!na.replyTo,numberOfDashboardsSelected:na.dashboards.length,scheduleCustomized:jo(na.schedule)})},hs=_s=>!yr.map(Ws=>Mi(Ws.id,aa)).includes(_s.pathname),Er=()=>{const _s=yr[yr.length-1].id;V!==_s&&Fs.current?.click()};return a.createElement("form",{onSubmit:Hs,className:sa.container},a.createElement(Xu,{confirmRedirect:Gs,onDiscard:Ya,onLocationChange:hs}),a.createElement("div",{className:sa.inner},gn&&!n.v.featureToggles.topnav&&a.createElement("div",{className:sa.placeholder}),!gn&&a.createElement(lu,{activeStep:V,onStepChange:Er,reportId:aa,report:na,visitedSteps:da}),a.createElement("div",{className:sa.content},$e)),!gn&&a.createElement(ec,{ref:Fs,activeStep:V,existingReport:bn,disabled:on,saveDraft:$a,reportId:aa}))},Vi=V=>({container:u.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      align-content: center;
    `,inner:u.css`
      display: flex;
      justify-content: flex-start;

      flex: 1 0 auto;
    `,content:u.css`
      width: min(70%, 800px);
      padding-bottom: ${V.spacing(3)};
    `,placeholder:u.css`
      width: min(30%, 272px);
    `}),Zo=mu(El),fu=V=>{const{report:ve,isUpdated:$e}=V.reports;return{report:ve,isUpdated:$e}},gu={createReport:Jl,loadReport:gl,deleteReport:Zc,updateReport:Xl,clearReportState:kc},pu=(0,U.connect)(fu,gu)(({report:V,createReport:ve,loadReport:$e,updateReport:ft,deleteReport:Tt,clearReportState:Wt,isUpdated:on,reportId:gn})=>{const{formats:bn,options:Sn,schedule:On,dashboards:Pn}=V,{handleSubmit:na,formState:{isSubmitSuccessful:aa}}=(0,co.cI)(),[la,da]=(0,a.useState)(!1),sa=(0,P.wW)(tc),Ia=!!gn&&!on,Ma=Eo(V),Fs=ms.Vt.hasPermission(ee.ReportingDelete),Gs=ms.Vt.hasPermission(ee.ReportingWrite),{showPlay:is,disableEdit:Hs,reportState:$a}=Xc(V),{time:Ya,date:hs}=Us(On.startDate),{time:Er,date:_s}=Us(On.endDate),Ds=async()=>{let $s=oe.Scheduled;[oe.Draft,oe.Expired].includes($a)?$s=$a:$a!==oe.Paused&&($s=oe.Paused),await ft({...V,state:$s}),gn&&$e(parseInt(gn,10))},Ws=()=>{Tt(V.id),da(!1),cs.E1.push(vo)},to=async()=>{const $s=V.id?ft:ve;if(V.state===oe.Draft){const lr=V.schedule.frequency===Z.Never?oe.Never:oe.Scheduled;V={...V,state:lr}}await $s(V),(0,c.ff)("reports_report_submitted",{replyToPopulated:!!V.replyTo,includesDashboardLink:V.enableDashboardUrl,numberOfDashboardsSelected:V.dashboards.length,templateVariablesSelected:V.dashboards.some(lr=>!!lr.reportVariables),orientation:V.options.orientation,layout:V.options.layout,frequency:V.schedule.frequency,sendTime:V.schedule.startDate?"later":"now",endDate:!!V.schedule.endDate}),Wt(),cs.E1.push(vo)},{orientation:uo,layout:Fr}=ul.report.options,Pr=[{title:"Select dashboard",id:re.SelectDashboard,items:(Pn||[]).flatMap(($s,lr,zr)=>[{title:`Source dashboard${lr===0?"*":""}`,value:$s.dashboard?.uid?a.createElement(eo,{name:$s.dashboard.name,uid:$s.dashboard?.uid,className:sa.dashboardLink}):"",id:"name",required:!0},{title:"Template variables",value:a.createElement(hu,{variables:$s.reportVariables,className:sa.title})},{title:"Time range",value:Di($s.timeRange)},...zr.length>1?[{title:"",value:""}]:[]])},{title:"Format report",id:re.FormatReport,items:[{title:"Preferred format*",value:Jc(bn),id:"formats",required:!0},...bn.includes("pdf")?[{title:"PDF orientation",value:(0,mo.capitalize)(Sn.orientation||uo)},{title:"PDF layout",value:(0,mo.capitalize)(Sn.layout||Fr)},{title:"Scale factor",value:Ho[V.scaleFactor||Fi].label}]:[]]},{title:"Schedule",id:re.Schedule,items:[{title:"Recurrence",value:(0,mo.capitalize)(On.frequency)},...On.frequency===Z.Custom?[{title:"Repeat every",value:`${On.intervalAmount} ${On.intervalFrequency}`}]:[],...On.frequency!==Z.Never?[{title:"Start date",value:hs||"Now"},{title:"Start time",value:Ya||"Now"},{title:"End date",value:_s},{title:"End time",value:Er},{title:"Time zone",value:On.timeZone?(0,ll.k)(Date.now(),On.timeZone):""}]:[],...hl(On.frequency,On.intervalFrequency)?[{title:"Send Monday to Friday only",value:On.workdaysOnly?"Yes":"No"}]:[]]},{title:"Share",id:re.Share,items:[{title:"Report name*",value:V.name,id:"name",required:!0},{title:"Recipients*",value:V.recipients,id:"recipients",required:!0},{title:"Reply-to-email",value:V.replyTo||"none"},{title:"Message",value:V.message||"none"},{title:"Dashboard link",value:V.enableDashboardUrl?"Included":"Not included"}]}];return a.createElement(Zo,{activeStep:re.Confirm,confirmRedirect:!aa&&on,disabled:Ma,editMode:Ia,onSubmit:na(to),reportId:gn},Ia&&a.createElement("div",{className:sa.editActions},a.createElement(G.zx,{type:"button",variant:"secondary",icon:is?"play":"pause",disabled:Hs||!Gs,onClick:Ds},is?"Resume":"Pause"),a.createElement(G.Qj,{href:Mi(re.SelectDashboard,gn),type:"button",variant:"secondary",icon:"pen",disabled:!Gs},"Edit report"),a.createElement(G.zx,{type:"button",variant:"secondary",icon:"trash-alt",disabled:!Fs,onClick:()=>da(!0)},"Delete report"),a.createElement(q.s,{isOpen:la,title:"Delete report",body:"Are you sure you want to delete this report?",confirmText:"Delete",onConfirm:Ws,onDismiss:()=>da(!1)})),a.createElement(br.C,{label:Ia?"":"5. Confirm"},Pr.map($s=>{const lr=Eo(V,$s.id);return a.createElement("div",{className:(0,u.cx)(sa.section,lr&&sa.warningSection),key:$s.title},a.createElement("div",{className:sa.sectionHeader},a.createElement("h3",{className:sa.sectionTitle},$s.title),a.createElement(G.Qj,{variant:"secondary",fill:lr?"solid":"outline",href:Mi($s.id,gn),size:"sm"},"Edit section")),$s.items.filter(zr=>zr.value!==void 0).map((zr,Vu)=>{const vm=!!zr.required&&(!zr.value||Array.isArray(zr.value)&&!zr.value.length);return zr.title?a.createElement("div",{className:sa.row,key:Vu},a.createElement("div",{className:(0,u.cx)(sa.title,vm&&sa.warning)},zr.title,":"),a.createElement("div",{className:(0,u.cx)(sa.value,zr.value==="none"&&!vm?sa.textMuted:"")},vm?a.createElement(d.J,{name:"exclamation-triangle",className:sa.warning}):zr.value)):a.createElement("div",{className:sa.row,key:Vu})}))})))}),tc=V=>({section:u.css`
      width: 100%;
      padding: ${V.spacing(3)};
      background-color: ${V.colors.background.secondary};
      margin-bottom: ${V.spacing(3)};
    `,sectionHeader:u.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: ${V.spacing(3)};
    `,warningSection:u.css`
      border: 1px solid ${V.colors.warning.text};
    `,row:u.css`
      display: flex;
      width: 100%;
      padding: ${V.spacing(1,0)};
    `,warning:u.css`
      color: ${V.colors.warning.text};
    `,title:u.css`
      width: 30%;
      color: ${V.colors.text.secondary};
    `,textMuted:u.css`
      color: ${V.colors.text.secondary};
    `,value:u.css`
      width: 70%;
      word-break: break-word;
    `,sectionTitle:u.css`
      margin: 0;
    `,dashboardLink:u.css`
      color: ${V.colors.text.primary};
      font-size: ${V.typography.body.fontSize};
      margin-top: 0;
    `,editActions:u.css`
      display: flex;
      align-items: center;
      justify-content: flex-end;
      width: 100%;
      margin-bottom: ${V.spacing(3)};

      button,
      a {
        margin-left: ${V.spacing(2)};
      }
    `}),hu=({variables:V,className:ve})=>{const $e=(0,P.wW)(tc);return!V||!Object.keys(V).length?a.createElement("span",{className:$e.textMuted},"none"):a.createElement(a.Fragment,null,Object.entries(V).map(([ft,Tt])=>a.createElement("span",{key:ft},a.createElement("span",{className:ve},ft),": ",Tt,";"," ")))};var Jo=e(2594),nd=e(90330),nc=e(21053);const yl=V=>nc.isValid(V.from)&&nc.isValid(V.to),ac=V=>!V||!yl(V)?{from:"",to:""}:{to:V.to.valueOf().toString(),from:V.from.valueOf().toString()},Pl=V=>{const ve=zi(V.from),$e=zi(V.to);return yl({from:ve,to:$e})?{from:ve,to:$e,raw:{from:ve,to:$e}}:Zl},zi=V=>{const ve=parseInt(V,10);return isNaN(ve)?V:(0,Ne.zh)(ve)},sc=V=>V?.length?!V.some(ve=>!!ve.dashboard?.uid):!0,yo=s.Vt.hasPermission(ee.ReportingWrite)||s.Vt.hasPermission(ee.ReportingCreate),ad=()=>{const V=n.v.rendererVersion;if(V==="")return null;const $e=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/.exec(V);let ft="";if($e&&$e.length>1&&(ft=$e[1]),ft==="")return 1;let Tt=parseInt(ft,10);return isNaN(Tt)&&(Tt=1),Tt},tm=V=>{const{report:ve}=V.reports;return{report:ve}},Cl={updateReportProp:fl},sd=(0,U.connect)(tm,Cl),vu=new Map([["grid","Display the panels in their positions on the dashboard."],["simple","Display one panel per row."]]),Eu=new Map([["pdf","Attach the report as a PDF"],["image","Embed a dashboard image in the email"],["csv","Attach a CSV file of table panel data"]]),rd=({report:V,updateReportProp:ve,reportId:$e})=>{const{dashboards:ft,formats:Tt,options:Wt,name:on,scaleFactor:gn=Fi}=V||{},{handleSubmit:bn,control:Sn,register:On,watch:Pn,getValues:na,formState:{isDirty:aa}}=(0,co.cI)({defaultValues:{formats:Tt,scaleFactor:gn,options:{layout:Wt.layout,orientation:Wt.orientation}}}),la=Pn("options.layout"),da=Pn("options.orientation"),sa=Pn("formats"),Ia=Pn("scaleFactor"),Ma=ad(),Fs=(0,t.v)("reports.email")&&!sc(V.dashboards),Gs=({formats:$a,options:Ya,scaleFactor:hs})=>{aa&&ve({...V,options:{...V.options,...Ya},formats:$a,scaleFactor:hs})},is=()=>{const{formats:$a,options:Ya,scaleFactor:hs}=na();return{options:{...V.options,...Ya},formats:$a,scaleFactor:hs}},Hs=()=>{if(sc(ft))return;const $a={title:on,scaleFactor:Ia};return da&&($a.orientation=da),la&&($a.layout=la),$a.dashboards=JSON.stringify(ft.map(Ya=>{const{from:hs,to:Er}=Pl(Ya.timeRange).raw;return{dashboard:{uid:Ya.dashboard?.uid},timeRange:{from:hs.valueOf().toString(),to:Er.valueOf().toString()},reportVariables:Ya.reportVariables}})),li.Cj.appendQueryToUrl("api/reports/render/pdfs/",li.Cj.toUrlParams($a))};return a.createElement(Zo,{activeStep:re.FormatReport,onSubmit:bn(Gs),confirmRedirect:aa,getFormData:is,reportId:$e},a.createElement(br.C,{label:"2. Format report",disabled:!yo},a.createElement(br.C,null,a.createElement(I.wc,null,[...Eu].map(([$a,Ya])=>{const{onChange:hs,...Er}=On("formats");return a.createElement(ri.X,{...Er,key:$a,htmlValue:$a,label:Ya,onChange:_s=>{$a==="csv"&&_s.currentTarget.checked&&Ma!==null&&Ma<3&&s.h$.emit(Pi.SI.alertError,["To export CSV files, you must update the Grafana Image Renderer plugin."]),hs(_s)}})}))),sa.includes("pdf")&&a.createElement(br.C,{label:"Style the PDF"},a.createElement(de.g,{label:"Orientation"},a.createElement(Vr.g,{name:"options.orientation",control:Sn,render:({field:{ref:$a,...Ya}})=>a.createElement(Jo.S,{...Ya,options:Ee,size:"md"})})),a.createElement(de.g,{label:"Layout",description:vu.get(la)},a.createElement(Vr.g,{name:"options.layout",control:Sn,render:({field:{ref:$a,...Ya}})=>a.createElement(Jo.S,{...Ya,options:me,size:"md"})})),a.createElement(de.g,{label:"Zoom",description:"Zoom in to enlarge text, or zoom out to see more data (like table columns) per panel.",className:od},a.createElement(Vr.g,{name:"scaleFactor",control:Sn,render:({field:{ref:$a,value:Ya,...hs}})=>a.createElement(nd.i,{...hs,value:Number(Ya),min:1,max:3,step:1,marks:Ho,included:!1})})),a.createElement(de.g,{disabled:!Fs},a.createElement(G.Qj,{onClick:()=>Fs&&(0,c.ff)("reports_preview_pdf"),icon:"external-link-alt",href:Hs(),size:"xs",target:"_blank",rel:"noreferrer noopener",variant:"secondary"},"Preview PDF")))))},od=u.css`
  max-width: 350px;
  // Hide Slider input
  input {
    display: none;
  }
`,yu=sd(rd);var Pu=e(86348),rc=e(91942),oc=e(52566);const Cu=V=>{const{report:ve}=V.reports;return{report:ve}},xu={updateReportProp:fl},bu=(0,U.connect)(Cu,xu),id=[{label:"Once",value:Z.Once},{label:"Hourly",value:Z.Hourly},{label:"Daily",value:Z.Daily},{label:"Weekly",value:Z.Weekly},{label:"Monthly",value:Z.Monthly},{label:"Custom",value:Z.Custom},{label:"Never",value:Z.Never}],ld=[{label:"hours",value:ae.Hours},{label:"days",value:ae.Days},{label:"weeks",value:ae.Weeks},{label:"months",value:ae.Months}],ic=V=>V==="now"&&[29,30,31].includes((0,Ne.CQ)().toDate().getDate()),lc=bu(({report:V,updateReportProp:ve,reportId:$e})=>{const{handleSubmit:ft,control:Tt,watch:Wt,register:on,setValue:gn,getValues:bn,formState:{isDirty:Sn}}=(0,co.cI)(),{frequency:On,timeZone:Pn,startDate:na,endDate:aa,dayOfMonth:la,intervalAmount:da,intervalFrequency:sa}=V.schedule,Ia=On===Z.Never?"":na,Ma=Ia?"later":"now",Fs={startDate:Ia,sendTime:Ma,intervalFrequency:ae.Hours,intervalAmount:"2",...V.schedule},Gs=Wt("schedule",Fs)||{},{frequency:is,startDate:Hs,endDate:$a,intervalFrequency:Ya=ae.Hours,dayOfMonth:hs,sendTime:Er=Ma,workdaysOnly:_s}=Gs,Ds=(0,P.wW)(Du),Ws=new Date(Hs).getDate(),to=Fr=>{if(Sn){const Pr=pl(Fr.schedule);ve({...V,schedule:Pr})}},uo=()=>({schedule:pl(bn().schedule)});return a.createElement(Zo,{activeStep:re.Schedule,onSubmit:ft(to),confirmRedirect:Sn,getFormData:uo,reportId:$e},a.createElement(br.C,{label:"3. Schedule"},a.createElement(de.g,{label:"Frequency"},a.createElement(Vr.g,{defaultValue:On,name:"schedule.frequency",render:({field:{ref:Fr,onChange:Pr,...$s}})=>a.createElement(Jo.S,{...$s,fullWidth:!0,options:id,disabled:!yo,onChange:lr=>{hl(lr,Ya)||gn("schedule.workdaysOnly",!1),Pr(lr)}}),control:Tt})),is!==Z.Never&&a.createElement(de.g,{label:"Time"},a.createElement(Vr.g,{control:Tt,name:"schedule.sendTime",defaultValue:Ma,render:({field:{ref:Fr,onChange:Pr,...$s}})=>a.createElement(Jo.S,{...$s,onChange:lr=>{lr!=="now"&&!Hs?gn("schedule.startDate",(0,Ne.CQ)().toDate()):lr==="now"&&gn("schedule.startDate",""),Pr(lr)},options:[{label:"Send now",value:"now"},{label:"Send later",value:"later"}]})})),a.createElement(a.Fragment,null,is===Z.Custom&&a.createElement(I.Lh,null,a.createElement(de.g,{label:"Repeat every"},a.createElement(ke.I,{type:"number",min:"2",...on("schedule.intervalAmount"),placeholder:"e.g. 2",defaultValue:da||2,id:"repeat-frequency"})),a.createElement(de.g,{label:" "},a.createElement(Vr.g,{control:Tt,defaultValue:ld.find(Fr=>Fr.value===sa)?.value||ae.Hours,render:({field:{ref:Fr,onChange:Pr,...$s}})=>a.createElement(m.Ph,{...$s,onChange:lr=>Pr(lr.value),options:ld,width:16,placeholder:"hours","aria-label":"Custom frequency"}),name:"schedule.intervalFrequency"}))),is===Z.Monthly&&(ic(Er)||Er==="later")&&a.createElement(de.g,null,a.createElement(Vr.g,{control:Tt,defaultValue:la==="last",render:({field:{onChange:Fr,...Pr}})=>a.createElement(ri.X,{...Pr,label:"Send on the last day of month",onChange:$s=>{gn("schedule.startDate",(0,Ne.CQ)().endOf("month").toDate()),Fr($s)}}),name:"schedule.dayOfMonth"}))),a.createElement("div",{className:Er!=="now"&&is!==Z.Never?"":Ds.hidden},a.createElement(I.Lh,{width:"100%"},a.createElement(de.g,{label:"Start date"},a.createElement(Vr.g,{name:"schedule.startDate",control:Tt,defaultValue:Lo(Ia),render:({field:{ref:Fr,...Pr}})=>a.createElement(Pu.d,{...Pr,width:16,placeholder:"Select date","aria-label":"Report schedule start date",closeOnSelect:!0})})),a.createElement(de.g,{label:"Start time"},a.createElement(Vr.g,{name:"schedule.time",render:({field:{onChange:Fr,ref:Pr,value:$s,...lr}})=>a.createElement(rc.y,{...lr,value:$s,minuteStep:10,disabled:!yo,onChange:zr=>{zr.isValid()&&Fr({hour:zr.hour?.(),minute:zr.minute?.()})}}),defaultValue:Xs(na),control:Tt})),a.createElement(a.Fragment,null,a.createElement(de.g,{label:"Time zone"},a.createElement(Vr.g,{name:"schedule.timeZone",render:({field:{ref:Fr,...Pr}})=>a.createElement(oc.O,{...Pr,width:30,disabled:!yo}),defaultValue:Pn||Wi(),control:Tt}))))),is===Z.Monthly&&!hs&&([29,30,31].includes(Ws)||ic(Er))&&a.createElement("small",{className:Ds.warningText},"Note: some months do not have a"," ",_c(ic(Er)?(0,Ne.CQ)().toDate().getDate():Ws)," day and reports will not be sent on those months. Choose an earlier date or"," ",a.createElement("strong",null,'"Send on the last day of month"')," to send a report at the end of each month."),![Z.Once,Z.Never].includes(is)&&a.createElement(I.Lh,{width:"100%"},a.createElement(de.g,{label:"End date"},a.createElement(Vr.g,{name:"schedule.endDate",control:Tt,defaultValue:Lo(aa),render:({field:{ref:Fr,...Pr}})=>a.createElement(Pu.d,{...Pr,width:16,placeholder:"Does not end","aria-label":"Report schedule end date",minDate:new Date(Hs),closeOnSelect:!0})})),$a&&(is===Z.Hourly||qc(is,Ya))&&a.createElement(de.g,{label:"End time"},a.createElement(Vr.g,{name:"schedule.endTime",render:({field:{onChange:Fr,ref:Pr,value:$s,...lr}})=>a.createElement(rc.y,{...lr,value:$s,minuteStep:10,disabled:!yo,onChange:zr=>{zr?.isValid()&&Fr({hour:zr.hour?.(),minute:zr.minute?.()})}}),defaultValue:Xs(aa),control:Tt}))),hl(is,Ya)&&a.createElement(de.g,null,a.createElement(ri.X,{...on("schedule.workdaysOnly"),label:"Send Monday to Friday only",defaultChecked:_s})),a.createElement("div",{className:Ds.schedulePreview},a.createElement(d.J,{name:"calendar-alt"}),ql({...Fs,...Gs}))))}),Du=V=>({warningText:u.css`
      color: ${V.colors.warning.main};
      display: block;
      margin: -${V.spacing(1)} 0 ${V.spacing(3)} 0;
    `,hidden:u.css`
      display: none;
    `,schedulePreview:u.css`
      display: flex;
      align-items: center;

      svg {
        margin-right: ${V.spacing(1)};
      }
    `});var cc=e(95794),xl=e(99151),dc=e.n(xl);const uc=({onChange:V,value:ve,width:$e,isClearable:ft=!1,invalid:Tt,disabled:Wt,id:on,optionLabel:gn="label",excludedDashboards:bn})=>{const Sn=dc()(na=>cd(na||"",gn,bn),300),On=ve?{value:ve,[gn]:ve[gn]}:void 0,Pn=na=>{V(na?.value)};return a.createElement(m.qb,{inputId:on,width:$e,isClearable:ft,defaultOptions:!0,loadOptions:Sn,onChange:Pn,placeholder:"Select dashboard",noOptionsMessage:"No dashboards found",value:On,invalid:Tt,disabled:Wt,getOptionLabel:na=>na[gn]})};async function cd(V,ve,$e){const Tt=(await Ie.ae.search({type:"dash-db",query:V,limit:100})).map(({id:Wt,uid:on="",title:gn,folderTitle:bn})=>{const Sn={id:Wt,uid:on,[ve]:`${bn??"General"}/${gn}`};return{value:Sn,[ve]:Sn[ve]}});return $e?Tt.filter(({value:Wt})=>!$e.includes(Wt.uid)):Tt}const Su=V=>{const{report:ve}=V.reports;return{report:ve,templating:V.templating.keys}},dd={updateReportProp:fl,initVariables:Qc,cleanUpVariables:dl.kG},mc=(0,U.connect)(Su,dd),fc={dashboard:void 0,timeRange:{from:"",to:""},reportVariables:{}},Mu=({report:V,reportId:ve,updateReportProp:$e,initVariables:ft,cleanUpVariables:Tt})=>{const{handleSubmit:Wt,control:on,formState:{isDirty:gn},setValue:bn,getValues:Sn,watch:On}=(0,co.cI)({defaultValues:{dashboards:su(V).dashboards||[fc]}}),{fields:Pn,append:na,remove:aa}=(0,co.Dq)({control:on,name:"dashboards",keyName:"fieldId"}),la=On("dashboards"),da=(0,P.wW)(am);(0,a.useEffect)(()=>{const Gs=oo();if(Gs){const{dashboard:is,variables:Hs,timeRange:$a}=Gs;Hs&&is.uid&&ft(is.uid,Hs,$a),is.uid&&bn("dashboards.0.dashboard",{...is,id:parseInt(is.id,10)},{shouldDirty:!0})}},[ft,V,bn]);const sa=Gs=>(is,Hs)=>{bn(`dashboards.${Gs}.timeRange`,{from:"",to:""});const $a=Sn().dashboards?.map(({dashboard:hs})=>hs);if(!is){if(!Hs)return;$a.some(Er=>Er?.uid===Hs)||Tt(Hs);return}const Ya=$a.filter(hs=>hs?.uid===is.uid).length>1;if(is.uid&&!Ya){const hs=V.dashboards?.[Gs],Er=is.id===hs?.dashboard?.id?hs?.reportVariables:void 0;ft(is.uid,Er)}},Ia=Gs=>{const is=Ma(Gs.dashboards);gn&&$e({...V,dashboards:is})},Ma=Gs=>{const is=Gs?.filter(({dashboard:Hs})=>Hs?.uid).map(({dashboard:Hs,timeRange:$a})=>{const Ya=Hs?.uid;return{dashboard:Ya?{uid:Ya,id:Hs?.id,name:Hs?.name}:void 0,timeRange:ac($a?.raw),reportVariables:Ya?Gr((0,Ir.gt)(Ya).filter(hs=>hs.hide!==ii.bU.hideVariable)):void 0}});return is?.length?is:[fc]},Fs=()=>({dashboards:Ma(Sn().dashboards)});return a.createElement(Zo,{activeStep:re.SelectDashboard,onSubmit:Wt(Ia),confirmRedirect:gn,getFormData:Fs,reportId:ve},a.createElement(br.C,{label:"1. Select dashboard"},a.createElement(a.Fragment,null,Pn.map((Gs,is)=>{const Hs=la[is].dashboard?.uid||"",$a=la[is]?.reportVariables,Ya=Hs?(0,Ir.gt)(Hs):[],hs=Er=>{Vc(Ya)&&ft(Hs,$a,Er)};return a.createElement("div",{key:Gs.fieldId,className:(0,u.cx)(da.section,la.length>1&&da.sectionBorder)},a.createElement(Tu,{field:Gs,dashboardUid:Hs,onDashboardChange:sa(is),variables:Ya,control:on,index:is,setValue:bn,selectedDashboards:la,onTimeRangeChange:hs}),Pn.length>1&&a.createElement(G.zx,{className:da.removeBtn,variant:"secondary",fill:"outline",icon:"trash-alt",onClick:()=>aa(is)},"Remove dashboard"))}),a.createElement(G.zx,{type:"button",variant:"secondary",onClick:()=>na(fc)},"+ Add another dashboard"))))},Tu=({field:V,index:ve,onDashboardChange:$e,variables:ft,control:Tt,dashboardUid:Wt,setValue:on,onTimeRangeChange:gn,selectedDashboards:bn=[]})=>{const Sn=Pl(V.timeRange),On=ft.filter(da=>da.hide!==ii.bU.hideVariable),Pn=Wt!==void 0&&Boolean(On.length),na=bn.filter(({dashboard:da})=>da?.uid===Wt).length>1,aa=bn.findIndex(({dashboard:da})=>da?.uid===Wt),la=na&&aa!==ve;return a.createElement(a.Fragment,null,a.createElement(de.g,{label:"Source dashboard",required:!0},a.createElement(a.Fragment,null,a.createElement(Vr.g,{name:`dashboards.${ve}.dashboard`,control:Tt,render:({field:{onChange:da,ref:sa,...Ia}})=>a.createElement(uc,{...Ia,"aria-label":"Source dashboard",isClearable:!0,optionLabel:"name",disabled:!yo,onChange:Ma=>{da(Ma||null),$e(Ma,Wt)}})}),a.createElement(eo,{uid:Wt}))),Pn&&a.createElement(de.g,{label:"Template variables",description:la&&`When adding the same dashboard multiple times in one report, template variables that you selected first
are applied to all instances of that dashboard in the report.`},la?a.createElement(a.Fragment,null):a.createElement(a.Fragment,null,On.map(da=>{const{picker:sa,setValue:Ia}=rl.z.get(da.type);return a.createElement(el._,{label:da.name,key:da.name,labelWidth:16,disabled:!yo},a.createElement(sa,{variable:da,readOnly:!1,onVariableChange:Ma=>{(0,Ni.eL)(Ma)&&(Ia(Ma,Ma.current),on(`dashboards.${ve}.reportVariables`,Gr([Ma]),{shouldDirty:!0}))}}))}))),a.createElement(de.g,{label:"Time range",description:"Generate report with the data from specified time range. If custom time range is empty the time range from the report's dashboard is used.",disabled:!yo},a.createElement(Vr.g,{control:Tt,name:`dashboards.${ve}.timeRange`,defaultValue:Sn,render:({field:{ref:da,value:sa,onChange:Ia,...Ma}})=>a.createElement(cc.K,{value:sa||Sn,onChange:Fs=>{Ia(Fs),gn(Fs.raw)},...Ma,clearable:!0})})))},Ou=mc(Mu),am=V=>({removeBtn:u.css`
      margin-bottom: ${V.spacing(2)};
    `,section:u.css`
      padding-bottom: ${V.spacing(2)};
    `,sectionBorder:u.css`
      &:not(:last-of-type) {
        border-bottom: 1px solid ${V.colors.border.weak};
        margin-bottom: ${V.spacing(3)};
      }
    `,infoText:u.css`
      color: ${V.colors.text.secondary};
      font-size: ${V.typography.size.sm};
      font-weight: ${V.typography.fontWeightRegular};
    `});var bl=e(43339),Hi=e(97379),Iu=e(5191);const di=V=>V?/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(V):!1,Dl=/[,;\n]/,gc=(V,ve=Dl)=>V?V.split(ve).filter(Boolean).every($e=>di($e)):!0,Ru=(V="",ve=["png","jpg","gif"])=>{if(!V)return!0;const $e=V.split(".");return ve.includes($e[$e.length-1])},Au=({onDismiss:V,onSendTestEmail:ve,emails:$e})=>{const ft=(0,P.Fg)(),Tt=Lu(ft),[Wt,on]=(0,a.useState)(""),[gn,bn]=(0,a.useState)(""),[Sn,On]=(0,a.useState)(!1),[Pn,na]=(0,a.useState)(!1),aa=Ma=>{const{checked:Fs}=Ma.target;na(Fs),Fs?(on($e),da($e)):(sa(),on(""))},la=Ma=>{on(Ma.currentTarget.value),On(!1)},da=Ma=>gc(Ma)?(sa(),!0):(On(!0),bn("Invalid email"),!1),sa=()=>{On(!1),bn("")},Ia=()=>{da(Wt),da(Wt)&&(ve(Wt,Pn),V())};return a.createElement(bo.u,{className:Tt.modal,isOpen:!0,title:"Send test email",icon:"share-alt",onDismiss:V},a.createElement(a.Fragment,null,a.createElement("div",{className:Tt.content},a.createElement(de.g,{label:"Email",disabled:Pn,invalid:Sn,error:gn},a.createElement(ke.I,{disabled:Pn,name:"email",placeholder:"your.address@company.com",type:"email",value:Wt,onChange:la})),a.createElement(ri.X,{value:Pn,label:"Use emails from report",onChange:aa})),a.createElement(bo.u.ButtonRow,null,a.createElement(G.zx,{variant:"secondary",onClick:V,fill:"outline"},"Cancel"),a.createElement(G.zx,{variant:"primary",onClick:Ia},"Send"))))},Lu=(0,yn.B)(V=>({modal:u.css`
      width: 500px;
    `,content:u.css`
      margin-bottom: ${V.spacing.lg};
    `})),sm=V=>{const{testEmailIsSending:ve,report:$e}=V.reports;return{report:$e,testEmailIsSending:ve}},Xr={updateReportProp:fl,sendTestEmail:Go},ud=(0,U.connect)(sm,Xr),rm=({report:V,reportId:ve,updateReportProp:$e,sendTestEmail:ft,testEmailIsSending:Tt})=>{const{message:Wt,name:on,recipients:gn,replyTo:bn,enableDashboardUrl:Sn,dashboards:On}=V,{handleSubmit:Pn,control:na,register:aa,setError:la,clearErrors:da,watch:sa,getValues:Ia,formState:{errors:Ma,isDirty:Fs}}=(0,co.cI)({mode:"onBlur"}),Gs=(0,P.wW)(ki),is=s.Vt.hasPermission(ee.ReportingSend),Hs=sa("name",on),$a=sa("recipients",gn),Ya=!is||!(0,t.v)("reports.email")||!Hs||!$a||sc(On),hs=(Ds,Ws)=>{const to={...V,...Ia()},uo=Ws?to.recipients:Ds;return ft({...to,recipients:uo})},Er=Ds=>{if(Fs){const{name:Ws}=Ds;$e({...V,...Ds,name:Ws.trim()})}},_s=()=>{const Ds=Ia(),{name:Ws}=Ds;return{...Ds,name:Ws.trim()}};return a.createElement(Zo,{activeStep:re.Share,onSubmit:Pn(Er),confirmRedirect:Fs,getFormData:_s,reportId:ve},Tt&&a.createElement("div",{className:"page-alert-list"},a.createElement(Ea.b,{title:"Sending test email...",severity:"info",elevated:!0})),a.createElement(br.C,{label:"4. Share",disabled:!yo},a.createElement(de.g,{label:"Report name",required:!0,invalid:!!Ma.name,error:"Name is required"},a.createElement(ke.I,{...aa("name"),type:"text",id:"name",defaultValue:on,placeholder:"System status report"})),a.createElement(de.g,{className:Gs.field,label:"Recipients",required:!0,invalid:!!Ma.recipients,error:Ma.recipients?.message,description:"Separate multiple emails with a comma or semicolon."},a.createElement(Vr.g,{name:"recipients",control:na,defaultValue:gn,render:({field:{ref:Ds,value:Ws,onChange:to,...uo}})=>a.createElement(bl.B,{...uo,disabled:!yo,invalid:!!Ma.recipients,onChange:Fr=>{const Pr=Fr.join(";").split(Dl).filter(Boolean).map(lr=>lr.trim()),$s=Pr.filter(lr=>!di(lr));$s.length?la("recipients",{type:"manual",message:`Invalid email${$s.length>1?"s":""}: ${$s.join("; ")}`}):da("recipients"),to(Pr.filter(lr=>di(lr)).join(";"))},placeholder:"Type in the recipients email addresses and press Enter",tags:Ws?Ws.split(Dl):[],className:Gs.tagsInput,addOnBlur:!0}),rules:{validate:Ds=>gc(Ds)||"Invalid email"}})),a.createElement(de.g,{invalid:!!Ma.replyTo,error:Ma.replyTo?.message,className:Gs.field,label:"Reply-to email address",description:"The address that will appear in the Reply to field of the email"},a.createElement(ke.I,{...aa("replyTo",{validate:Ds=>gc(Ds)||"Invalid email"}),id:"replyTo",placeholder:"your.address@company.com - optional",type:"email",defaultValue:bn})),a.createElement(de.g,{className:Gs.field,label:"Message"},a.createElement(Hi.K,{...aa("message"),id:"message",placeholder:Wt,rows:10,defaultValue:Wt})),a.createElement(de.g,{className:Gs.field},a.createElement(ri.X,{...aa("enableDashboardUrl"),defaultChecked:Sn,label:"Include a dashboard link"}))),a.createElement(Iu.JY,null,({showModal:Ds,hideModal:Ws})=>a.createElement(G.zx,{disabled:Ya,size:"xs",variant:"secondary",onClick:to=>{to.preventDefault(),Ds(Au,{onDismiss:Ws,onSendTestEmail:hs,emails:$a})}},"Send test email")))},ki=V=>({field:u.css`
      &:not(:last-of-type) {
        margin-bottom: ${V.spacing(3)};
      }
    `,tagsInput:u.css`
      li {
        margin-bottom: ${V.spacing(1)};
        background-color: ${V.colors.background.secondary} !important;
        border-color: ${V.components.input.borderColor} !important;
        color: ${V.colors.text.primary};
      }
    `}),pc=ud(rm);var Bu=e(72535);const md=(V=window.location.origin)=>{let ve=V+n.v.appSubUrl;return ve.endsWith("/")&&ve.slice(0,-1),ve},fd="Please contact your Grafana administrator to install the plugin.",wu=()=>a.createElement(a.Fragment,null,a.createElement(a.Fragment,null,"To generate PDF reports, you must install the "),a.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana Image Renderer"),a.createElement(a.Fragment,null," plugin.")),Sl=({variant:V="info"})=>a.createElement(Ea.b,{title:"Image renderer plugin not installed",severity:V},a.createElement(wu,null)," ",a.createElement("br",null),fd),Nu=()=>a.createElement(a.Fragment,null,a.createElement(a.Fragment,null,"To generate CSV files, you must update the "),a.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana Image Renderer"),a.createElement(a.Fragment,null," plugin.")),gd=()=>a.createElement(Ea.b,{title:"You are using an old version of the image renderer plugin",severity:"warning"},a.createElement(Nu,null)," ",a.createElement("br",null),fd),Gi=({message:V})=>a.createElement(bt.v,{title:"Feature not available with an expired license",url:"https://grafana.com/docs/grafana/latest/enterprise/license-expiration/",urlTitle:"Read more on license expiration"},a.createElement("span",null,V)),Uu=({dashboard:V,onDismiss:ve})=>{(0,a.useEffect)(()=>{(0,c.ff)("grafana_dashboards_pdf_share_viewed")},[]);const[$e,ft]=(0,a.useState)("landscape"),[Tt,Wt]=(0,a.useState)("grid"),[on,gn]=(0,a.useState)(Fi),bn=()=>{let Pn=`${md()}/api/reports/render/pdfs`;const na={orientation:$e,layout:Tt,scaleFactor:on},aa=(0,Ir.gt)(V.uid),la={dashboard:{uid:V.uid}};aa.length&&(la.reportVariables=Gr(aa));const da=ru();return da&&(la.timeRange=da),na.dashboards=JSON.stringify([la]),Pn=li.Cj.appendQueryToUrl(Pn,li.Cj.toUrlParams(na)),Pn},Sn=Pn=>{ft(Pn)},On=Pn=>{Wt(Pn)};return n.v.rendererAvailable?(0,t.v)("reports.pdf")?V.isSnapshot()?a.createElement("p",{className:"share-modal-info-text"},"Sharing a PDF from a snapshot is not supported."):a.createElement(Bu.Q,{icon:"file-alt"},a.createElement("p",{className:"share-modal-info-text"},"Save the dashboard as a PDF document."),a.createElement(de.g,{label:"Orientation"},a.createElement(Jo.S,{options:Ee,value:$e,onChange:Sn})),a.createElement(de.g,{label:"Layout"},a.createElement(Jo.S,{options:me,value:Tt,onChange:On})),a.createElement(de.g,{label:"Zoom",description:"Increase the number of rows and columns in table panels.",className:u.css`
          max-width: 350px;
          // Hide Slider input
          input {
            display: none;
          }
        `},a.createElement(nd.i,{value:on,min:1,max:3,step:1,marks:Ho,onChange:gn,included:!1})),a.createElement(bo.u.ButtonRow,null,a.createElement(G.zx,{variant:"secondary",onClick:ve},"Cancel"),a.createElement(G.Qj,{variant:"primary",href:bn(),target:"_blank",rel:"noreferrer noopener"},"Save as PDF"))):a.createElement(Gi,{message:`Rendering a dashboard as a PDF document is not available with your current license.
            To enable this feature, update your license.`}):a.createElement(Sl,null)},pd=Zr.vc.featureToggles.featureHighlights,Fu={label:"PDF",value:"pdf",component:Uu},Ml={label:"Report",value:"report",tabSuffix:pd&&!(0,t.v)("reports.creation")||(0,F.d5)()?()=>(0,Jd.Z)({experimentId:ps("reporting-tab-badge")}):void 0,component:$c};function Wu(){Zr.vc.reporting?.enabled&&((0,t.v)("reports.creation")?((0,ol.addDashboardShareTab)(Fu),ms.Vt.hasAccess(ee.ReportingCreate,ms.Vt.hasRole("Admin"))&&(0,ol.addDashboardShareTab)(Ml)):pd&&(0,ol.addDashboardShareTab)(Ml))}const yr=[{id:re.SelectDashboard,name:"Select dashboard",component:Ou},{id:re.FormatReport,name:"Format report",component:yu},{id:re.Schedule,name:"Schedule",component:lc},{id:re.Share,name:"Share",component:pc},{id:re.Confirm,name:"Confirm",component:pu}];var $u=e(3574),_=e(89230),k=e(34177),ne=e(30237),Pe=e(87464);const ze=V=>({dashboard:V.dashboard.getModel()}),tt={initDashboard:Pe.mV},st=(0,U.connect)(ze,tt);class Ot extends a.Component{constructor(){super(...arguments),this.state={panel:null,notFound:!1}}componentDidMount(){const{match:ve,route:$e}=this.props;this.props.initDashboard({urlSlug:ve.params.slug,urlUid:ve.params.uid,urlType:ve.params.type,routeName:$e.routeName,fixUrl:!1,keybindingSrv:this.context.keybindings})}getPanelId(){return parseInt(this.props.queryParams.panelId??"0",10)}componentDidUpdate(ve){const{dashboard:$e}=this.props;if($e&&(!ve.dashboard||ve.dashboard.uid!==$e.uid)){const ft=$e.getPanelByUrlId(this.props.queryParams.panelId);if(!ft){this.setState({notFound:!0});return}this.setState({panel:ft}),ft.getQueryRunner().getData({withTransforms:!0,withFieldConfig:!0}).subscribe({next:Tt=>this.onDataUpdate(Tt)})}}onDataUpdate(ve){const{panel:$e}=this.state;if(!ve||!$e||ve.state!==Pt.Gu.Done)return;const{dashboard:ft}=this.props,Tt=ve.series,Wt=this.props.queryParams.timezone||ft?.timezone,on=(0,fa.SM)({data:Tt,theme:n.v.theme2,fieldConfig:$e.fieldConfig,replaceVariables:On=>On,timeZone:Wt}),gn=(0,_.MJ)([on[0]],{}),bn=new Blob([String.fromCharCode(65279),gn],{type:"text/csv;charset=utf-8"}),Sn=`${$e?.getDisplayTitle()}-data-${(0,Za.dq)(new Date)}.csv`;(0,$u.saveAs)(bn,Sn)}render(){return a.createElement(ne.SoloPanel,{dashboard:this.props.dashboard,notFound:this.state.notFound,panel:this.state.panel,panelId:this.getPanelId(),timezone:this.props.queryParams.timezone})}}Ot.contextType=k.h;const Kt=st(Ot);var Ht=e(68226);const jt=({report:V,editMode:ve})=>{const{name:$e,dashboardName:ft=""}=V;return{text:!Boolean(V.id)&&!ve?"New report":$e||ft,breadcrumbs:[{title:"Reports",url:"reports"}]}},pn=({children:V,editMode:ve,isLoading:$e,className:ft,report:Tt,...Wt})=>{const on=(0,P.wW)(Rn);(0,a.useEffect)(()=>{document.title=`Reporting: ${ve?"Edit report":"New report"}`},[ve]);const gn=jt({report:Tt,editMode:ve});return a.createElement(w.T,{navId:"reports-list",pageNav:gn},a.createElement(w.T.Contents,null,a.createElement("div",{className:on.page,...Wt},a.createElement(Ht.$,{autoHeightMin:"100%"},$e?a.createElement(So.Z,null):n.v.rendererAvailable?V:a.createElement(Sl,{variant:"error"})))))},Rn=V=>({page:u.css`
      height: 100%;
    `}),$n=(V,ve)=>{const{report:$e,isLoading:ft}=V.reports,{id:Tt,step:Wt}=ve.match.params;return{activeStep:Wt,existingReport:!!$e.id,isLoading:Boolean(Tt&&ft),report:$e,reportId:Tt}},Vn={loadReport:gl},sr=(0,U.connect)($n,Vn)(({existingReport:V,isLoading:ve,loadReport:$e,report:ft,reportId:Tt,activeStep:Wt=re.SelectDashboard})=>{(0,a.useEffect)(()=>{Tt&&$e(parseInt(Tt,10))},[Tt,$e]);const on=(0,a.useCallback)(()=>{const gn=yr.find(({id:bn})=>bn===Wt)?.component;return gn?a.createElement(gn,{reportId:Tt}):null},[Wt,Tt]);return a.createElement(pn,{isLoading:ve,editMode:V,report:ft},ve?a.createElement(Rs.a,null):on())});var Ar=e(71657);const Lr=(V,ve)=>{const $e=["name","recipients"],ft=Tt=>Tt.dashboards.some(({dashboard:Wt})=>Wt?.name.toLowerCase().includes(ve.toLowerCase()));return V.filter(Tt=>$e.some(Wt=>Tt[Wt]?.toLowerCase().includes(ve.toLowerCase()))||ft(Tt))},Xo=V=>new Map([[oe.Scheduled,V.colors.success.text],[oe.Expired,V.colors.warning.text],[oe.Draft,V.colors.text.primary],[oe.Never,V.colors.text.primary],[oe.Paused,V.colors.text.disabled]]),Ti=({deleteReport:V,updateReport:ve,reports:$e,filter:ft})=>{const Tt=(0,P.l4)(),Wt=(0,P.wW)(hd),on=Sn=>{const{state:On}=Sn;let Pn;[oe.Draft,oe.Expired].includes(On)?Pn=On:On!==oe.Paused?Pn=oe.Paused:Pn=oe.Scheduled,ve({...Sn,state:Pn},!0)},gn=s.Vt.hasPermission(ee.ReportingWrite),bn=s.Vt.hasPermission(ee.ReportingDelete);return a.createElement("div",null,Lr($e,ft).map(Sn=>{const On=Sn.recipients.split(";"),Pn=On.length,na=ed(Sn.schedule),{isNever:aa,showPlay:la,disableEdit:da,reportState:sa}=Xc(Sn),Ia=Xo(Tt).get(Sn.state);return a.createElement(hr._,{key:Sn.id,href:`reports/confirm/${Sn.id}`,className:Wt.container},a.createElement("div",{className:Wt.info},a.createElement("span",{className:Wt.title},Sn.name),a.createElement("span",{className:Wt.dashboards},[...new Set(Sn.dashboards.map(({dashboard:Ma})=>Ma?.name))].join(", "))),a.createElement("div",{className:Wt.recipients},a.createElement(ue.u,{content:On.join(", "),placement:"top"},a.createElement("div",null,`${Pn} recipient${Pn>1?"s":""}`))),a.createElement("div",{className:Wt.schedule},a.createElement("span",{className:(0,u.cx)(Wt.scheduleStatus,u.css`
                    color: ${Ia};
                  `)},sa.toUpperCase()),!aa&&a.createElement("span",{className:Wt.text},na)),a.createElement("div",{className:Wt.buttonWrapper},a.createElement(ue.u,{content:`${la?"Resume":"Pause"} report`,placement:"top"},a.createElement(G.zx,{type:"button",variant:"secondary",fill:"text",icon:la?"play":"pause",size:"md",onClick:Ma=>{Ma.preventDefault(),on(Sn)},disabled:da||!gn})),a.createElement(Ar.p,{confirmText:"Delete",confirmVariant:"destructive",size:"md",disabled:!bn,onConfirm:()=>V(Sn)},a.createElement(G.zx,{type:"button",className:Wt.deleteButton,"aria-label":`Delete report ${Sn.name}`,variant:"secondary",icon:"trash-alt",size:"md",fill:"text"}))))}))},hd=V=>({container:u.css`
    & > a {
        align-items: center;
      },
    `,info:u.css`
      display: flex;
      flex-direction: column;
      width: 30%;
    `,title:u.css`
      font-size: ${V.typography.h5.fontSize};
      font-weight: ${V.typography.fontWeightBold};
    `,dashboards:u.css`
      font-size: ${V.typography.bodySmall.fontSize};
      color: ${V.colors.text.secondary};
    `,recipients:u.css`
      display: flex;
      width: 25%;
      cursor: pointer;

      &:hover {
        text-decoration: underline;
      },
    `,schedule:u.css`
      display: flex;
      flex-direction: column;
      width: 40%;
    `,scheduleStatus:u.css`
      text-transform: uppercase;
    `,buttonWrapper:u.css`
      display: flex;
      align-items: center;
      width: 5%;
      & > button {
        &[disabled] {
          pointer-events: all;
        },
      },
    `,deleteButton:u.css`
      &:hover {
        color: ${V.colors.error.text};
    `,text:u.css`
      color: ${V.colors.text.secondary};
    `}),ym=()=>{const V=(0,P.wW)(Pm);return a.createElement(w.T,{navId:"reports",subTitle:"Manage automatically generated PDF reports from any dashboards and have Grafana email them to interested parties."},a.createElement("div",{className:V.box},a.createElement(N.Xz,{featureName:"reporting",featureId:"reporting"})),a.createElement(w.T.Contents,{className:V.contents},a.createElement(hc,null)),a.createElement("div",{className:V.spacer}))},hc=({action:V})=>a.createElement(N.TA,{featureName:"reporting",description:"Reporting allows you to automatically generate PDFs from any of your dashboards and have Grafana email them to interested parties on a schedule.",listItems:["Customize your exact layout and orientation","Personalize with your unique branding","Specify permissions for users across your company","Choose to send a report at custom intervals"],featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/reporting/",image:"reporting-email.png",caption:"Create reports to share your SLO performance, business metrics, cost and utilization metrics or anything else you can express in a Grafana dashboard.",action:V}),Pm=V=>({contents:u.css`
      &.page-body {
        flex: 0;
      }
    `,spacer:u.css`
      flex: 1;
    `,box:u.css`
      ${V.breakpoints.up("sm")} {
        padding: ${V.spacing(0,1)};
      }

      ${V.breakpoints.up("md")} {
        padding: ${V.spacing(0,2)};
      }
    `}),om=ym;function Cm(V){return{navModel:(0,R.ht)(V.navIndex,"reports-list"),reports:V.reports.reports,hasFetched:V.reports.hasFetchedList,searchQuery:V.reports.searchQuery,reportCount:V.reports.reportCount}}const xm={getReports:Ki,deleteReport:Zc,updateReport:Xl},im=(0,U.connect)(Cm,xm)(({getReports:V,deleteReport:ve,updateReport:$e,reports:ft,reportCount:Tt,hasFetched:Wt,navModel:on})=>{const[gn,bn]=(0,a.useState)("");(0,a.useEffect)(()=>{V()},[V]);const Sn=Pn=>{ve(Pn.id)},On=()=>{const{rendererAvailable:Pn}=n.v,na=ad(),aa=s.Vt.hasPermission(ee.ReportingCreate),la=Pn&&aa;return(0,t.v)("reports.creation")?a.createElement(a.Fragment,null,!Pn&&a.createElement(Sl,{variant:"error"}),Pn&&na!==null&&na<3&&a.createElement(gd,null),(0,F.d5)()&&a.createElement(N.Xz,{featureId:"reporting",eventVariant:"trial",featureName:"reporting",text:"Create unlimited reports during your trial of Grafana Pro."}),Tt>0?a.createElement(a.Fragment,null,a.createElement("div",{className:"page-action-bar"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement(ke.I,{placeholder:"Search reports by report name, dashboard name or recipients",prefix:a.createElement(d.J,{name:"search"}),width:56,onChange:da=>bn(da.target.value)}),a.createElement("div",{className:"page-action-bar__spacer"}),a.createElement(G.Qj,{variant:"primary",href:"reports/new",disabled:!la,icon:"plus"},"Create a new report"))),a.createElement(Ti,{reports:ft,deleteReport:Sn,updateReport:$e,filter:gn})):Pn&&((0,F.d5)()?a.createElement(hc,{action:{text:"Create report",link:"reports/new"}}):a.createElement(se.Z,{title:"You haven't created any reports yet.",buttonIcon:"envelope",buttonLink:"reports/new",buttonTitle:"Create a new report",buttonDisabled:!la,proTip:"",proTipLink:"",proTipLinkTitle:"",proTipTarget:"_blank"}))):a.createElement(a.Fragment,null,a.createElement(Gi,{message:`Creating new reports is not available with an expired license.
              Existing reports continue to be processed but you need to update your license to create a new one.`}),Tt>0&&a.createElement(Ti,{reports:ft,deleteReport:Sn,updateReport:$e,filter:gn}))};return a.createElement(w.T,{navId:"reports-list",subTitle:"Manage automatically generated PDF reports from any dashboards and have Grafana email them to interested parties."},a.createElement(w.T.Contents,{isLoading:!Wt},On()))});var Wm=e(22350),bm=e(44407),ui=e(30784),$m=e(27119),Dm=e(83957);const lm=V=>V?vc(V)?"file":V.startsWith("http")||V.startsWith("data:")?"url":V.startsWith("#")||V.startsWith("rgb(")||V.startsWith("rgba(")?"color":"file":"url",vc=V=>V instanceof File,cm=V=>vc(V)?URL.createObjectURL(V):lm(V)==="file"?`${Kc}${V}`:V,Sm=V=>!V||V instanceof File?!0:typeof V=="string"&&V.startsWith("http"),dm=[{label:"Paste URL",value:"url"},{label:"Upload file",value:"file"},{label:"Custom color",value:"color"}];function um({name:V,disabled:ve,allowedTypes:$e=["url","file"]}){const{control:ft,register:Tt,getValues:Wt,setValue:on,watch:gn,formState:{errors:bn}}=(0,co.Gc)(),[Sn]=(0,a.useState)(Wt()[V]),On=gn(V,Sn),[Pn,na]=(0,a.useState)(lm(Wt()[V])),aa=(0,P.wW)(Ku);return a.createElement("div",{"data-testid":`resource-picker-${V}`},a.createElement(Jo.S,{options:dm.filter(la=>$e.includes(la.value)),onChange:la=>{na(la),lm(Sn)===la?on(V,Sn):on(V,"")},disabled:ve,className:aa.buttonGroup,value:Pn}),Pn==="file"&&a.createElement(co.Qr,{control:ft,name:V,render:({field:{onChange:la,ref:da,...sa}})=>a.createElement("div",{className:(0,u.cx)(aa.dropzone,ve&&aa.disabled)},a.createElement(ui.Yo,{...sa,readAs:"readAsBinaryString",onFileRemove:ve?void 0:()=>on(V,""),options:{disabled:ve,multiple:!1,accept:{"image/*":[".jpeg",".jpg",".png"]},onDrop:Ia=>{la(Ia[0])}}}),!vc(On)&&On!==""&&a.createElement($m.K,{removeFile:ve?void 0:()=>on(V,""),file:{file:new File([On],On),error:null,id:""}}))}),Pn==="url"&&a.createElement(de.g,{invalid:!!bn[V],error:bn[V]?.message,label:"",className:aa.customField},a.createElement(ke.I,{...Tt(V,{validate:la=>Sm(la)||"Invalid URL"}),id:V,placeholder:"https://your.site/image.png",disabled:ve})),Pn==="color"&&a.createElement(co.Qr,{control:ft,name:V,render:({field:la})=>a.createElement("div",{className:aa.pickerContainer},a.createElement(Dm.T,{...la,id:V,placeholder:"Select color",disabled:ve}))}))}const Ku=V=>({pickerContainer:u.css`
      display: flex;
      position: relative;
    `,dropzone:u.css`
      & > div {
        & > small:first-of-type {
          display: none;
        }
      }
      // FileListItem
      & > div:nth-of-type(2) {
        & > span {
          & > span:nth-of-type(2) {
            display: none;
          }
        }
      }
    `,colorValue:u.css`
      margin-left: ${V.spacing(1)};
    `,buttonGroup:u.css`
      margin-bottom: ${V.spacing(2)};
    `,disabled:u.css`
      div {
        cursor: not-allowed;
      }
    `,customField:u.css`
      margin-top: -${V.spacing(2)};
    `}),Km=V=>V.startsWith("http")?Ru(V):!0,mm=({url:V,altText:ve,width:$e="200px"})=>{const ft=(0,P.yK)(fm);return V?a.createElement("div",{className:(0,u.cx)(ft.wrapper,u.css`
          width: ${$e};
        `)},Km(V)?a.createElement("img",{src:V,className:ft.img,alt:ve}):"Invalid image"):null},fm=V=>({wrapper:u.css`
      padding: ${V.spacing.sm};
      border: 1px solid ${V.colors.border3};
      border-radius: ${V.border.radius.sm};
      margin-bottom: ${V.spacing.md};
    `,img:u.css`
      width: 100%;
    `}),Mm=[{label:"Sent By",value:J.SentBy},{label:"None",value:J.None}],gm=()=>{const{register:V,control:ve,watch:$e,formState:{errors:ft}}=(0,co.Gc)(),Tt=$e("reportLogoUrl")||cl,Wt=$e("emailLogoUrl")||Js,on=$e("emailFooterMode"),gn=s.Vt.hasPermission(ee.ReportingSettingsWrite);return a.createElement(a.Fragment,null,a.createElement(br.C,{label:"Report branding",disabled:!gn},a.createElement(de.g,{htmlFor:"reportLogoUrl",label:"Company logo URL",description:"The logo will be displayed in the document footer. Supported formats: png, jpg, gif.",invalid:!!ft.branding?.reportLogoUrl,error:ft.branding?.reportLogoUrl?.message},a.createElement(um,{name:"reportLogoUrl"})),a.createElement(mm,{url:Tt===cl?cl:cm(Tt),width:"60px",altText:"Company logo preview"})),a.createElement(br.C,{label:"Email branding",disabled:!gn},a.createElement(de.g,{htmlFor:"emailLogoUrl",label:"Company logo URL",description:"The logo will be displayed in the email header. Supported formats: png, jpg, gif.",invalid:!!ft.branding?.emailLogoUrl,error:ft.branding?.emailLogoUrl?.message},a.createElement(um,{name:"emailLogoUrl"})),a.createElement(mm,{url:Wt===Js?Js:cm(Wt),altText:"Company logo preview"}),a.createElement(de.g,{label:"Email footer"},a.createElement(Vr.g,{name:"emailFooterMode",render:({field:{ref:bn,...Sn}})=>a.createElement(Jo.S,{...Sn,options:Mm}),control:ve})),on===J.SentBy&&a.createElement(a.Fragment,null,a.createElement(de.g,{label:"Footer link text"},a.createElement(ke.I,{...V("emailFooterText"),id:"emailFooterText",placeholder:"Grafana",type:"text"})),a.createElement(de.g,{label:"Footer link URL"},a.createElement(ke.I,{...V("emailFooterLink"),id:"emailFooterLink",placeholder:"https://your.site",type:"url"})))))},Tm=()=>{const{value:V,loading:ve,error:$e}=(0,Wm.Z)(async()=>{const bn=await(0,nt.i)().get("/api/reports/settings");return Tt(bn.branding),bn}),{handleSubmit:ft,reset:Tt,...Wt}=(0,co.cI)({mode:"onBlur",defaultValues:V?.branding}),on=bn=>{const Sn=new FormData;for(const[On,Pn]of Object.entries(bn))Pn instanceof File&&(bn={...bn,[On]:Pn.name},Sn.append("files",Pn));return Sn.append("config",JSON.stringify({branding:bn})),fetch("/api/reports/settings",{method:"POST",body:Sn}).then(On=>{On.ok?(s.h$.emit(Pi.SI.alertSuccess,["Successfully saved configuration"]),cs.E1.push("/reports")):s.h$.emit(Pi.SI.alertError,["Error saving configuration",On.statusText])})};if($e)return a.createElement(bm.m,null);const gn=s.Vt.hasPermission(ee.ReportingSettingsWrite);return a.createElement(w.T,{navId:"reports-settings",subTitle:"Manage report template settings."},a.createElement(w.T.Contents,{isLoading:ve},n.v.rendererAvailable?a.createElement(co.RV,{...Wt,reset:Tt,handleSubmit:ft},a.createElement("form",{onSubmit:ft(on),style:{maxWidth:"500px"}},a.createElement(gm,null),a.createElement(G.zx,{type:"submit",size:"md",variant:"primary",disabled:!gn},"Save"))):a.createElement(Sl,{variant:"error"})))};var Om=e(85419),fo=e(36578),Im=e(25337),Rm=e(50432);function pm(){const V=n.v.whitelabeling;if(!V)return;fo.c.LoginTitle="Welcome to Grafana Enterprise",V.links.length>0&&(0,Im.Dv)(()=>V.links.map($e=>({...$e,target:"_blank"})));const ve=V.publicDashboardFooter;if((ve?.hide||ve?.text||ve?.link||ve?.logo)&&(0,Rm.Jc)(()=>V.publicDashboardFooter),V.appTitle&&(fo.c.AppTitle=V.appTitle),V.loginLogo&&(fo.c.LoginLogo=$e=>a.createElement("img",{className:(0,u.cx)($e.className,u.css`
            max-width: 150px;
            max-height: 250px;
            width: auto;
            @media ${Om.mediaUp(n.v.theme.breakpoints.sm)} {
              max-width: 250px;
            }
          `),src:V.loginLogo,alt:"Login logo"}),fo.c.LoginLogo.displayName="BrandingLoginLogo",fo.c.LoginTitle="",fo.c.GetLoginSubTitle=()=>""),V.loginTitle&&(fo.c.LoginTitle=V.loginTitle),V.loginSubtitle&&(fo.c.GetLoginSubTitle=()=>V.loginSubtitle),V.menuLogo&&(fo.c.MenuLogo=$e=>a.createElement("img",{className:$e.className,src:V.menuLogo,alt:"Menu logo"}),fo.c.MenuLogo.displayName="BrandingMenuLogo"),V.loginBackground){const $e=u.css`
      background: ${V.loginBackground};
      background-size: cover;
    `;fo.c.LoginBackground=ft=>a.createElement("div",{className:(0,u.cx)($e,ft.className)},ft.children),fo.c.LoginBackground.displayName="BrandingLoginBackground"}if(V.loginBoxBackground){const $e=u.css`
      background: ${V.loginBoxBackground};
      background-size: cover;
    `;fo.c.LoginBoxBackground=()=>$e}}const Am="ServerAdmin";function hm(){(0,t.v)("dspermissions.enforcement")&&(0,f.U)(bd),(0,t.v)("caching")&&(0,f.U)(ye),(0,t.v)("reports")&&(0,f.U)(Yc),(0,t.v)("analytics")&&(0,f.U)(xe),(0,t.v)("recordedqueries")&&(0,f.U)(wd)}function Lm(){const V=n.v.featureToggles.featureHighlights;ct(),Wu(),$o(),((0,t.v)("whitelabeling")||(0,t.v)("grafanacloud"))&&pm(),(0,t.v)("recordedqueries")&&Do(),(0,t.v)("admin")&&v(),(0,t.v)("publicDashboardsEmailSharing")&&g.gV.push({path:"/public-dashboards/:accessToken/request-access",component:Dd});const ve="/datasources/edit/:uid/cache",$e=`${r.Z.DataSourcesEdit}/cache`;(0,t.v)("caching")?(g.gV.push({path:ve,component:ce}),g.gV.push({path:$e,component:he})):V&&(g.gV.push({path:`${ve}/upgrade`,component:Ke}),g.gV.push({path:`${$e}/upgrade`,component:De}));const ft="/datasources/edit/:uid/insights",Tt=`${r.Z.DataSourcesEdit}/insights`;(0,t.v)("analytics")?s.Vt.hasPermission(o.AccessControlAction.DataSourcesInsightsRead)&&(g.gV.push({path:ft,component:_i}),g.gV.push({path:Tt,component:va})):V&&(g.gV.push({path:`${ft}/upgrade`,component:Cd}),g.gV.push({path:`${Tt}/upgrade`,component:ja}));const Wt="/datasources/edit/:uid/permissions",on=`${r.Z.DataSourcesEdit}/permissions`;(0,t.v)("dspermissions.enforcement")?s.Vt.hasPermission(o.AccessControlAction.DataSourcesPermissionsRead)&&(n.v.rbacEnabled?(g.gV.push({path:Wt,component:Bi}),g.gV.push({path:on,component:Sr})):(g.gV.push({path:Wt,component:bc}),g.gV.push({path:on,component:ys}))):V&&(g.gV.push({path:Wt+"/upgrade",component:Nl}),g.gV.push({path:`${on}/upgrade`,component:Wr})),n.v.reporting?.enabled&&((0,t.v)("reports")?g.gV.push({path:vo,component:im},{path:`${vo}/settings`,component:Tm},{path:"/d-csv/:uid",pageClass:"dashboard-solo",routeName:o.DashboardRoutes.Normal,component:Kt}):V&&g.gV.push({path:vo,component:om}),(0,t.v)("reports.creation")&&(g.gV.push({path:`${vo}/new`,component:sr}),g.gV.push({path:`${vo}/:step?/:id?`,component:sr})));const gn=(0,t.v)("recordedqueries")&&n.v?.recordedQueries?.enabled;s.Vt.isEditor&&gn&&g.gV.push({path:"/recorded-queries",component:Qd},{path:"/recorded-queries/write-target",component:Fc})}function Bm(){L(),g.gV.push({path:"/admin/licensing",roles:()=>s.Vt.evaluatePermission(()=>[Am],[ee.LicensingRead,o.AccessControlAction.ActionServerStatsRead]),component:ti}),s.Vt.isSignedIn&&n.v.licenseInfo.stateInfo!=="Licensed"&&(0,c.SZ)(ps(),n.v.featureToggles.featureHighlights?ni.Test:ni.Control,"")}function zm(){Bm(),Lm()}},5238:()=>{"use strict"},96116:()=>{"use strict"},48649:()=>{"use strict"},65135:(H,T,e)=>{"use strict";e.d(T,{A:()=>r});var t=e(68404),n=e(74020),c=e(53217);const s=Object.keys(n.B).map(g=>({label:g,value:g}));function r({value:g,onChange:f,"aria-label":o,inputId:l,autoFocus:a,...m}){return t.createElement(c.Ph,{inputId:l,value:g,options:s,onChange:d=>f(d.value),placeholder:"Choose role...","aria-label":o,autoFocus:a,...m})}},97629:(H,T,e)=>{"use strict";e.r(T),e.d(T,{ServerStats:()=>E});var t=e(52423),n=e(68404),c=e(35645),s=e(72648),r=e(31403),g=e(35633),f=e(81168),o=e(82002),l=e(39229),a=e(62626),m=e(75118),d=e(54899),p=e(35029),h=e(9405);const y=()=>{const M=v((0,s.l4)()),[x,O]=(0,n.useState)(!1),[L,B]=(0,n.useState)({mode:"thumbs",theme:c.v.theme2.isLight?"light":"dark"}),w=()=>O(!1),R=()=>{(0,d.i)().post("/api/admin/crawler/start",L).then(A=>{console.log("GOT",A),w()})};return n.createElement(n.Fragment,null,n.createElement(p.u,{title:"Start crawler",isOpen:x,onDismiss:w},n.createElement("div",{className:M.wrap},n.createElement(h.p,{height:200,value:JSON.stringify(L,null,2)??"",showLineNumbers:!1,readOnly:!1,language:"json",showMiniMap:!1,onBlur:A=>{B(JSON.parse(A))}})),n.createElement(p.u.ButtonRow,null,n.createElement(r.zx,{type:"submit",onClick:R},"Start"),n.createElement(r.zx,{variant:"secondary",onClick:w},"Cancel"))),n.createElement(r.zx,{onClick:()=>O(!0),variant:"primary"},"Start"))},v=M=>({wrap:t.css`
      border: 2px solid #111;
    `}),i=()=>{const M=u((0,s.l4)()),[x,O]=(0,n.useState)();return(0,n.useEffect)(()=>{const L=(0,m.gj)().getStream({scope:a.z.Grafana,namespace:"broadcast",path:"crawler"}).subscribe({next:B=>{((0,a.RL)(B)||(0,a.se)(B))&&O(B.message)}});return()=>{L.unsubscribe()}},[]),x?n.createElement("div",{className:M.wrap},n.createElement("pre",null,JSON.stringify(x,null,2)),x.state!=="running"&&n.createElement(y,null),x.state!=="stopped"&&n.createElement(r.zx,{variant:"secondary",onClick:()=>{(0,d.i)().post("/api/admin/crawler/stop")}},"Stop")):n.createElement("div",{className:M.wrap},"No status (never run)",n.createElement("br",null),n.createElement(y,null))},u=M=>({wrap:t.css`
      border: 4px solid red;
    `,running:t.css`
      border: 4px solid green;
    `}),P=async()=>(0,d.i)().get("api/admin/stats").catch(M=>(console.error(M),null)),E=()=>{const[M,x]=(0,n.useState)(null),[O,L]=(0,n.useState)(!1),B=(0,s.wW)(C),w=o.Vt.hasAccess(f.AccessControlAction.DataSourcesRead,o.Vt.isGrafanaAdmin),R=o.Vt.hasAccess(f.AccessControlAction.UsersRead,o.Vt.isGrafanaAdmin);return(0,n.useEffect)(()=>{o.Vt.hasAccess(f.AccessControlAction.ActionServerStatsRead,o.Vt.isGrafanaAdmin)&&(L(!0),P().then(A=>{x(A),L(!1)}))},[]),o.Vt.hasAccess(f.AccessControlAction.ActionServerStatsRead,o.Vt.isGrafanaAdmin)?n.createElement(n.Fragment,null,n.createElement("h2",{className:B.title},"Instance statistics"),O?n.createElement("div",{className:B.loader},n.createElement(l.a,{text:"Loading instance stats..."})):M?n.createElement("div",{className:B.row},n.createElement(b,{content:[{name:"Dashboards (starred)",value:`${M.dashboards} (${M.stars})`},{name:"Tags",value:M.tags},{name:"Playlists",value:M.playlists},{name:"Snapshots",value:M.snapshots}],footer:n.createElement(r.Qj,{href:"/dashboards",variant:"secondary"},"Manage dashboards")}),n.createElement("div",{className:B.doubleRow},n.createElement(b,{content:[{name:"Data sources",value:M.datasources}],footer:w&&n.createElement(r.Qj,{href:"/datasources",variant:"secondary"},"Manage data sources")}),n.createElement(b,{content:[{name:"Alerts",value:M.alerts}],footer:n.createElement(r.Qj,{href:"/alerting/list",variant:"secondary"},"Alerts")})),n.createElement(b,{content:[{name:"Organisations",value:M.orgs},{name:"Users total",value:M.users},{name:"Active users in last 30 days",value:M.activeUsers},{name:"Active sessions",value:M.activeSessions}],footer:R&&n.createElement(r.Qj,{href:"/admin/users",variant:"secondary"},"Manage users")})):n.createElement("p",{className:B.notFound},"No stats found."),c.v.featureToggles.dashboardPreviews&&c.v.featureToggles.dashboardPreviewsAdmin&&n.createElement(i,null)):null},C=M=>({title:t.css`
      margin-bottom: ${M.spacing(4)};
    `,row:t.css`
      display: flex;
      justify-content: space-between;
      width: 100%;

      & > div:not(:last-of-type) {
        margin-right: ${M.spacing(2)};
      }

      & > div {
        width: 33.3%;
      }
    `,doubleRow:t.css`
      display: flex;
      flex-direction: column;

      & > div:first-of-type {
        margin-bottom: ${M.spacing(2)};
      }
    `,loader:t.css`
      height: 290px;
    `,notFound:t.css`
      font-size: ${M.typography.h6.fontSize};
      text-align: center;
      height: 290px;
    `}),b=({content:M,footer:x})=>{const O=(0,s.wW)(S);return n.createElement(g._,{className:O.container,disableHover:!0},n.createElement("div",{className:O.inner},n.createElement("div",{className:O.content},M.map(L=>n.createElement("div",{key:L.name,className:O.row},n.createElement("span",null,L.name),n.createElement("span",null,L.value)))),x&&n.createElement("div",null,x)))},S=M=>({container:t.css`
      padding: ${M.spacing(2)};
    `,inner:t.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,content:t.css`
      flex: 1 0 auto;
    `,row:t.css`
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-bottom: ${M.spacing(2)};
      align-items: center;
    `})},62446:(H,T,e)=>{"use strict";e.r(T),e.d(T,{UpgradeInfo:()=>y,UpgradePage:()=>p,default:()=>x});var t=e(52423),n=e(68404),c=e(36635),s=e(72648),r=e(31403),g=e(79396),f=e(86245);const o={fontWeight:500,fontSize:"26px",lineHeight:"123%"},l=O=>{const L=O.isDark?"public/img/licensing/header_dark.svg":"public/img/licensing/header_light.svg",B=O.isDark?O.v1.palette.dark9:O.v1.palette.gray6;return{container:t.css`
      padding: 36px 79px;
      background: ${O.components.panel.background};
    `,footer:t.css`
      text-align: center;
      padding: 16px;
      background: ${B};
    `,header:t.css`
      height: 137px;
      padding: 40px 0 0 79px;
      position: relative;
      background: url('${L}') right;
    `}};function a({header:O,editionNotice:L,subheader:B,children:w}){const R=(0,s.wW)(l);return n.createElement(n.Fragment,null,n.createElement("div",{className:R.header},n.createElement("h2",{style:o},O),B&&n.createElement("h3",null,B),n.createElement(m,{size:"128px",style:{boxShadow:"0px 0px 24px rgba(24, 58, 110, 0.45)",background:"#0A1C36",position:"absolute",top:"19px",left:"71%"}},n.createElement("img",{src:"public/img/grafana_icon.svg",alt:"Grafana",width:"80px",style:{position:"absolute",left:"23px",top:"20px"}}))),n.createElement("div",{className:R.container},w),L&&n.createElement("div",{className:R.footer},L))}const m=({size:O,style:L,children:B})=>n.createElement("div",{style:{width:O,height:O,position:"absolute",bottom:0,right:0,borderRadius:"50%",...L}},B);var d=e(97629);function p({navModel:O}){return n.createElement(g.T,{navModel:O},n.createElement(g.T.Contents,null,n.createElement(d.ServerStats,null),n.createElement(y,{editionNotice:`You are running the open-source version of Grafana.
        You have to install the Enterprise edition in order enable Enterprise features.`})))}const h={fontWeight:500,fontSize:"26px",lineHeight:"123%"},y=({editionNotice:O})=>{const L=(0,s.wW)(v);return n.createElement(n.Fragment,null,n.createElement("h2",{className:L.title},"Enterprise license"),n.createElement(a,{header:"Grafana Enterprise",subheader:"Get your free trial",editionNotice:O},n.createElement("div",{className:L.column},n.createElement(E,null),n.createElement(P,null))))},v=O=>({column:t.css`
      display: grid;
      grid-template-columns: 100%;
      column-gap: 20px;
      row-gap: 40px;

      @media (min-width: 1050px) {
        grid-template-columns: 50% 50%;
      }
    `,title:t.css`
      margin: ${O.spacing(4)} 0;
    `}),i=()=>n.createElement("div",{style:{marginTop:"40px",marginBottom:"30px"}},n.createElement("h2",{style:h},"Get Grafana Enterprise"),n.createElement(u,null),n.createElement("p",{style:{paddingTop:"12px"}},"You can use the trial version for free for 30 days. We will remind you about it five days before the trial period ends.")),u=()=>n.createElement(r.Qj,{variant:"primary",size:"lg",href:"https://grafana.com/contact?about=grafana-enterprise&utm_source=grafana-upgrade-page"},"Contact us and get a free trial"),P=()=>n.createElement("div",null,n.createElement("h4",null,"At your service"),n.createElement(b,null,n.createElement(S,{title:"Enterprise Plugins",image:"public/img/licensing/plugin_enterprise.svg"}),n.createElement(S,{title:"Critical SLA: 2 hours",image:"public/img/licensing/sla.svg"}),n.createElement(S,{title:"Unlimited Expert Support",image:"public/img/licensing/customer_support.svg"},"24 x 7 x 365 support via",n.createElement(b,{nested:!0},n.createElement(S,{title:"Email"}),n.createElement(S,{title:"Private Slack channel"}),n.createElement(S,{title:"Phone"}))),n.createElement(S,{title:"Hand-in-hand support",image:"public/img/licensing/handinhand_support.svg"},"in the upgrade process")),n.createElement("div",{style:{marginTop:"20px"}},n.createElement("strong",null,"Also included:"),n.createElement("br",null),"Indemnification, working with Grafana Labs on future prioritization, and training from the core Grafana team."),n.createElement(i,null)),E=()=>n.createElement("div",{style:{paddingRight:"11px"}},n.createElement("h4",null,"Enhanced functionality"),n.createElement(C,null)),C=()=>n.createElement(b,null,n.createElement(S,{title:"Data source permissions"}),n.createElement(S,{title:"Reporting"}),n.createElement(S,{title:"SAML authentication"}),n.createElement(S,{title:"Enhanced LDAP integration"}),n.createElement(S,{title:"Team Sync"},"LDAP, GitHub OAuth, Auth Proxy, Okta"),n.createElement(S,{title:"White labeling"}),n.createElement(S,{title:"Auditing"}),n.createElement(S,{title:"Settings updates at runtime"}),n.createElement(S,{title:"Grafana usage insights"},n.createElement(b,{nested:!0},n.createElement(S,{title:"Sort dashboards by popularity in search"}),n.createElement(S,{title:"Find unused dashboards"}),n.createElement(S,{title:"Dashboard usage stats drawer"}),n.createElement(S,{title:"Dashboard presence indicators"}))),n.createElement(S,{title:"Enterprise plugins"},n.createElement(b,{nested:!0},n.createElement(S,{title:"Oracle"}),n.createElement(S,{title:"Splunk"}),n.createElement(S,{title:"Service Now"}),n.createElement(S,{title:"Dynatrace"}),n.createElement(S,{title:"New Relic"}),n.createElement(S,{title:"DataDog"}),n.createElement(S,{title:"AppDynamics"}),n.createElement(S,{title:"SAP HANA\xAE"}),n.createElement(S,{title:"Gitlab"}),n.createElement(S,{title:"Honeycomb"}),n.createElement(S,{title:"Jira"}),n.createElement(S,{title:"MongoDB"}),n.createElement(S,{title:"Salesforce"}),n.createElement(S,{title:"Snowflake"}),n.createElement(S,{title:"Wavefront"})))),b=({children:O,nested:L})=>{const B=t.css`
    display: flex;
    flex-direction: column;
    padding-top: 8px;

    > div {
      margin-bottom: ${L?0:8}px;
    }
  `;return n.createElement("div",{className:B},O)},S=({children:O,title:L,image:B})=>{const w=B||"public/img/licensing/checkmark.svg",R=t.css`
    display: flex;

    > img {
      display: block;
      height: 22px;
      flex-grow: 0;
      padding-right: 12px;
    }
  `,A=t.css`
    font-weight: 500;
    line-height: 1.7;
  `;return n.createElement("div",{className:R},n.createElement("img",{src:w,alt:""}),n.createElement("div",null,n.createElement("div",{className:A},L),O))},M=O=>({navModel:(0,f.ht)(O.navIndex,"upgrading")}),x=(0,c.connect)(M)(p)},68082:(H,T,e)=>{"use strict";e.r(T),e.d(T,{UserListAdminPage:()=>M,UserListAdminPageContent:()=>S,addExtraFilters:()=>u,default:()=>w});var t=e(52423),n=e(68404),c=e(36635),s=e(72648),r=e(14747),g=e(2594),f=e(31403),o=e(61860),l=e(39904),a=e(78889),m=e(79396),d=e(21731),p=e(77582),h=e(2555),y=e(81168),v=e(37592);const i=[],u=R=>{i.push(R)},P={fetchUsers:v.uh,changeQuery:v.R5,changePage:v.oO,changeFilter:v.M6},E=R=>({users:R.userListAdmin.users,query:R.userListAdmin.query,showPaging:R.userListAdmin.showPaging,totalPages:R.userListAdmin.totalPages,page:R.userListAdmin.page,filters:R.userListAdmin.filters,isLoading:R.userListAdmin.isLoading}),S=(0,c.connect)(E,P)(({fetchUsers:R,query:A,changeQuery:U,users:I,showPaging:N,totalPages:F,page:D,changePage:Y,changeFilter:j,filters:K,isLoading:z})=>{const Z=(0,s.wW)(B);(0,n.useEffect)(()=>{R()},[R]);const ae=(0,n.useMemo)(()=>I.some(J=>J.licensedRole),[I]);return n.createElement(m.T.Contents,null,n.createElement("div",{className:"page-action-bar"},n.createElement("div",{className:"gf-form gf-form--grow"},n.createElement(r.H,{placeholder:"Search user by login, email, or name.",autoFocus:!0,value:A,onChange:U}),n.createElement(g.S,{options:[{label:"All users",value:!1},{label:"Active last 30 days",value:!0}],onChange:J=>j({name:"activeLast30Days",value:J}),value:K.find(J=>J.name==="activeLast30Days")?.value,className:Z.filter}),i.map((J,oe)=>n.createElement(J,{key:oe,filters:K,onChange:j,className:Z.filter}))),p.Vt.hasPermission(y.AccessControlAction.UsersCreate)&&n.createElement(f.Qj,{href:"admin/users/create",variant:"primary"},"New user")),z?n.createElement(h.Z,null):n.createElement(n.Fragment,null,n.createElement("div",{className:(0,t.cx)(Z.table,"admin-list-table")},n.createElement("table",{className:"filter-table form-inline filter-table--hover"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null),n.createElement("th",null,"Login"),n.createElement("th",null,"Email"),n.createElement("th",null,"Name"),n.createElement("th",null,"Belongs to"),ae&&n.createElement("th",null,"Licensed role"," ",n.createElement(o.u,{placement:"top",content:n.createElement(n.Fragment,null,"Licensed role is based on a user's Org role (i.e. Viewer, Editor, Admin) and their dashboard/folder permissions."," ",n.createElement("a",{className:Z.link,target:"_blank",rel:"noreferrer noopener",href:"https://grafana.com/docs/grafana/next/enterprise/license/license-restrictions/#active-users-limit"},"Learn more"))},n.createElement(l.J,{name:"question-circle"}))),n.createElement("th",null,"Last active\xA0",n.createElement(o.u,{placement:"top",content:"Time since user was seen using Grafana"},n.createElement(l.J,{name:"question-circle"}))),n.createElement("th",{style:{width:"1%"}}))),n.createElement("tbody",null,I.map(J=>n.createElement(O,{user:J,showLicensedRole:ae,key:J.id}))))),N&&n.createElement(a.t,{numberOfPages:F,currentPage:D,onNavigate:Y})))});function M(){return n.createElement(m.T,{navId:"global-users"},n.createElement(S,null))}const x=R=>`Edit user's ${R} details`,O=(0,n.memo)(({user:R,showLicensedRole:A})=>{const U=(0,s.wW)(B),I=`admin/users/edit/${R.id}`;return n.createElement("tr",{key:R.id},n.createElement("td",{className:"width-4 text-center link-td"},n.createElement("a",{href:I,"aria-label":`Edit user's ${R.name} details`},n.createElement("img",{className:"filter-table__avatar",src:R.avatarUrl,alt:`Avatar for user ${R.name}`}))),n.createElement("td",{className:"link-td max-width-10"},n.createElement("a",{className:"ellipsis",href:I,title:R.login,"aria-label":x(R.name)},R.login)),n.createElement("td",{className:"link-td max-width-10"},n.createElement("a",{className:"ellipsis",href:I,title:R.email,"aria-label":x(R.name)},R.email)),n.createElement("td",{className:"link-td max-width-10"},n.createElement("a",{className:"ellipsis",href:I,title:R.name,"aria-label":x(R.name)},R.name)),n.createElement("td",{className:U.row,title:R.orgs?.length?`The user is a member of the following organizations: ${R.orgs.map(N=>N.name).join(",")}`:void 0},n.createElement(L,{units:R.orgs,icon:"building"}),R.isAdmin&&n.createElement("a",{href:I,"aria-label":x(R.name)},n.createElement(o.u,{placement:"top",content:"Grafana Admin"},n.createElement(l.J,{name:"shield"})))),A&&n.createElement("td",{className:(0,t.cx)("link-td",U.iconRow)},n.createElement("a",{className:"ellipsis",href:I,title:R.name,"aria-label":x(R.name)},R.licensedRole==="None"?n.createElement("span",{className:U.disabled},"Not assigned"," ",n.createElement(o.u,{placement:"top",content:"A licensed role will be assigned when this user signs in"},n.createElement(l.J,{name:"question-circle"}))):R.licensedRole)),n.createElement("td",{className:"link-td"},R.lastSeenAtAge&&n.createElement("a",{href:I,"aria-label":`Last seen at ${R.lastSeenAtAge}. Follow to edit user's ${R.name} details.`},R.lastSeenAtAge==="10 years"?n.createElement("span",{className:U.disabled},"Never"):R.lastSeenAtAge)),n.createElement("td",{className:"text-right"},Array.isArray(R.authLabels)&&R.authLabels.length>0&&n.createElement(d.e,{label:R.authLabels[0],removeIcon:!1,count:0})),n.createElement("td",{className:"text-right"},R.isDisabled&&n.createElement("span",{className:"label label-tag label-tag--gray"},"Disabled")))});O.displayName="UserListItem";const L=({units:R,icon:A})=>{const U=(0,s.wW)(B);return R?.length?R.length>1?n.createElement(o.u,{placement:"top",content:n.createElement("div",{className:U.unitTooltip},R?.map(I=>n.createElement("a",{href:I.url,className:U.link,title:I.name,key:I.name,"aria-label":`Edit ${I.name}`},I.name)))},n.createElement("div",{className:U.unitItem},n.createElement(l.J,{name:A})," ",n.createElement("span",null,R.length))):n.createElement("a",{href:R[0].url,className:U.unitItem,title:R[0].name,key:R[0].name,"aria-label":`Edit ${R[0].name}`},n.createElement(l.J,{name:A})," ",R[0].name):null},B=R=>({table:t.css`
      margin-top: ${R.spacing(3)};
    `,filter:t.css`
      margin: 0 ${R.spacing(1)};
    `,iconRow:t.css`
      svg {
        margin-left: ${R.spacing(.5)};
      }
    `,row:t.css`
      display: flex;
      align-items: center;
      height: 100% !important;

      a {
        padding: ${R.spacing(.5)} 0 !important;
      }
    `,unitTooltip:t.css`
      display: flex;
      flex-direction: column;
    `,unitItem:t.css`
      cursor: pointer;
      padding: ${R.spacing(.5)} 0;
      margin-right: ${R.spacing(1)};
    `,disabled:t.css`
      color: ${R.colors.text.disabled};
    `,link:t.css`
      color: inherit;
      cursor: pointer;
      text-decoration: underline;
    `}),w=M},37592:(H,T,e)=>{"use strict";e.d(T,{B9:()=>v,CP:()=>B,Dx:()=>i,Fm:()=>O,IS:()=>U,Jk:()=>b,M6:()=>Y,Nq:()=>h,PK:()=>d,R5:()=>D,V0:()=>A,Xx:()=>P,Y3:()=>w,_1:()=>x,bN:()=>C,b_:()=>R,h8:()=>u,j4:()=>L,oO:()=>j,tQ:()=>y,uV:()=>S,uh:()=>N});var t=e(82897),n=e.n(t),c=e(38849),s=e(66121),r=e(54899),g=e(37932),f=e(47694),o=e(77582),l=e(95156),a=e(81168),m=e(66114);function d(K){return async z=>{try{z((0,m.UA)(!1)),await z(p(K)),await z(E(K)),await z(M(K)),f.ZP.ldapEnabled&&(0,s.v)("ldapsync")&&await z(L()),z((0,m.UA)(!0))}catch(Z){if(console.error(Z),(0,r.kW)(Z)){const ae={title:Z.data.message,body:Z.data.error};z((0,m.sL)(ae))}}}}function p(K){return async z=>{const Z=await(0,r.i)().get(`/api/users/${K}`,(0,l.y)());z((0,m.pm)(Z))}}function h(K){return async z=>{await(0,r.i)().put(`/api/users/${K.id}`,K),z(d(K.id))}}function y(K,z){return async Z=>{const ae={password:z};await(0,r.i)().put(`/api/admin/users/${K}/password`,ae),Z(d(K))}}function v(K){return async z=>{await(0,r.i)().post(`/api/admin/users/${K}/disable`),g.E1.push("/admin/users")}}function i(K){return async z=>{await(0,r.i)().post(`/api/admin/users/${K}/enable`),z(d(K))}}function u(K){return async z=>{await(0,r.i)().delete(`/api/admin/users/${K}`),g.E1.push("/admin/users")}}function P(K,z){return async Z=>{const ae={isGrafanaAdmin:z};await(0,r.i)().put(`/api/admin/users/${K}/permissions`,ae),Z(d(K))}}function E(K){return async z=>{const Z=await(0,r.i)().get(`/api/users/${K}/orgs`);z((0,m.fm)(Z))}}function C(K,z,Z){return async ae=>{const J={loginOrEmail:K.login,role:Z};await(0,r.i)().post(`/api/orgs/${z}/users/`,J),ae(d(K.id))}}function b(K,z,Z){return async ae=>{const J={role:Z};await(0,r.i)().patch(`/api/orgs/${z}/users/${K}`,J),ae(d(K))}}function S(K,z){return async Z=>{await(0,r.i)().delete(`/api/orgs/${z}/users/${K}`),Z(d(K))}}function M(K){return async z=>{if(!o.Vt.hasPermission(a.AccessControlAction.UsersAuthTokenList))return;const Z=await(0,r.i)().get(`/api/admin/users/${K}/auth-tokens`);Z.reverse();const ae=Z.map(J=>({id:J.id,isActive:J.isActive,seenAt:(0,c.E8)(J.seenAt),createdAt:J.createdAt,clientIp:J.clientIp,browser:J.browser,browserVersion:J.browserVersion,os:J.os,osVersion:J.osVersion,device:J.device}));z((0,m.RC)(ae))}}function x(K,z){return async Z=>{const ae={authTokenId:K};await(0,r.i)().post(`/api/admin/users/${z}/revoke-auth-token`,ae),Z(M(z))}}function O(K){return async z=>{await(0,r.i)().post(`/api/admin/users/${K}/logout`),z(M(K))}}function L(){return async K=>{const z=o.Vt.hasPermission(a.AccessControlAction.LDAPStatusRead);if((0,s.v)("ldapsync")&&z){const Z=await(0,r.i)().get("/api/admin/ldap-sync-status");K((0,m.CY)(Z))}}}function B(K){return async z=>{await(0,r.i)().post(`/api/admin/ldap/sync/${K}`),z(d(K))}}function w(){return async K=>{if(o.Vt.hasPermission(a.AccessControlAction.LDAPStatusRead))try{const z=await(0,r.i)().get("/api/admin/ldap/status");K((0,m.Ls)(z))}catch(z){if((0,r.kW)(z)){z.isHandled=!0;const Z={title:z.data.message,body:z.data.error};K((0,m.y3)(Z))}}}}function R(K){return async z=>{try{const Z=await(0,r.i)().get(`/api/admin/ldap/${encodeURIComponent(K)}`),{name:ae,surname:J,email:oe,login:Ee,isGrafanaAdmin:me,isDisabled:re,roles:le,teams:pe}=Z,ee={info:{name:ae,surname:J,email:oe,login:Ee},permissions:{isGrafanaAdmin:me,isDisabled:re},roles:le,teams:pe};z((0,m.sJ)(ee))}catch(Z){if((0,r.kW)(Z)){Z.isHandled=!0;const ae={title:Z.data.message,body:Z.data.error};z((0,m.eq)()),z((0,m.VB)(ae))}}}}function A(){return K=>{K((0,m.WO)())}}function U(){return K=>{K((0,m.WO)()),K((0,m.eq)())}}const I=K=>K.map(z=>Array.isArray(z.value)?z.value.map(Z=>`${z.name}=${Z.value}`).join("&"):`${z.name}=${z.value}`).join("&");function N(){return async(K,z)=>{try{const{perPage:Z,page:ae,query:J,filters:oe}=z().userListAdmin,Ee=await(0,r.i)().get(`/api/users/search?perpage=${Z}&page=${ae}&query=${J}&${I(oe)}`);K((0,m.xh)(Ee))}catch(Z){(0,m.k7)(),console.error(Z)}}}const F=(0,t.debounce)(K=>K(N()),500);function D(K){return async z=>{z((0,m.tZ)()),z((0,m.aj)(K)),F(z)}}function Y(K){return async z=>{z((0,m.tZ)()),z((0,m.qz)(K)),F(z)}}function j(K){return async z=>{z((0,m.tZ)()),z((0,m.PJ)(K)),z(N())}}},66114:(H,T,e)=>{"use strict";e.d(T,{CY:()=>o,Ls:()=>g,PJ:()=>O,RC:()=>v,UA:()=>i,VB:()=>l,WO:()=>s,ZP:()=>w,aj:()=>x,eq:()=>r,fm:()=>y,k7:()=>M,pm:()=>h,qz:()=>L,sJ:()=>a,sL:()=>u,tZ:()=>S,xh:()=>b,y3:()=>f});var t=e(32557);const n={connectionInfo:[],syncInfo:void 0,user:void 0,connectionError:void 0,userError:void 0},c=(0,t.oM)({name:"ldap",initialState:n,reducers:{ldapConnectionInfoLoadedAction:(R,A)=>({...R,ldapError:void 0,connectionInfo:A.payload}),ldapFailedAction:(R,A)=>({...R,ldapError:A.payload}),ldapSyncStatusLoadedAction:(R,A)=>({...R,syncInfo:A.payload}),userMappingInfoLoadedAction:(R,A)=>({...R,user:A.payload,userError:void 0}),userMappingInfoFailedAction:(R,A)=>({...R,user:void 0,userError:A.payload}),clearUserMappingInfoAction:(R,A)=>({...R,user:void 0}),clearUserErrorAction:(R,A)=>({...R,userError:void 0})}}),{clearUserErrorAction:s,clearUserMappingInfoAction:r,ldapConnectionInfoLoadedAction:g,ldapFailedAction:f,ldapSyncStatusLoadedAction:o,userMappingInfoFailedAction:l,userMappingInfoLoadedAction:a}=c.actions,m=c.reducer,d={user:void 0,sessions:[],orgs:[],isLoading:!0,error:void 0},p=(0,t.oM)({name:"userAdmin",initialState:d,reducers:{userProfileLoadedAction:(R,A)=>({...R,user:A.payload}),userOrgsLoadedAction:(R,A)=>({...R,orgs:A.payload}),userSessionsLoadedAction:(R,A)=>({...R,sessions:A.payload}),userAdminPageLoadedAction:(R,A)=>({...R,isLoading:!A.payload}),userAdminPageFailedAction:(R,A)=>({...R,error:A.payload,isLoading:!1})}}),{userProfileLoadedAction:h,userOrgsLoadedAction:y,userSessionsLoadedAction:v,userAdminPageLoadedAction:i,userAdminPageFailedAction:u}=p.actions,P=p.reducer,E={users:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!1}],isLoading:!1},C=(0,t.oM)({name:"userListAdmin",initialState:E,reducers:{usersFetched:(R,A)=>{const{totalCount:U,perPage:I,...N}=A.payload,F=Math.ceil(U/I);return{...R,...N,totalPages:F,perPage:I,showPaging:F>1,isLoading:!1}},usersFetchBegin:R=>({...R,isLoading:!0}),usersFetchEnd:R=>({...R,isLoading:!1}),queryChanged:(R,A)=>({...R,query:A.payload,page:0}),pageChanged:(R,A)=>({...R,page:A.payload}),filterChanged:(R,A)=>{const{name:U,value:I}=A.payload;return R.filters.some(N=>N.name===U)?{...R,page:0,filters:R.filters.map(N=>N.name===U?{...N,value:I}:N)}:{...R,page:0,filters:[...R.filters,A.payload]}}}}),{usersFetched:b,usersFetchBegin:S,usersFetchEnd:M,queryChanged:x,pageChanged:O,filterChanged:L}=C.actions,B=C.reducer,w={ldap:m,userAdmin:P,userListAdmin:B}},77293:(H,T,e)=>{"use strict";e.d(T,{Yb:()=>n,d5:()=>s});var t=e(35645);const n=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function c(){const r=t.v.licenseInfo?.trialExpiry;return!!(r&&r>0)}const s=()=>c()&&t.v.featureToggles.featureHighlights},67162:(H,T,e)=>{"use strict";e.d(T,{$:()=>f,Z:()=>u});var t=e(82897),n=e.n(t),c=e(57591);const s=new c.zU({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["10s","1m","5m","10m","15m","1h","2h","6h","12h","24h","48h"]},{name:"to",type:"string",options:["now","now-1m","now-5m","now-10m","now-1h"]}],defaultParams:["#A","15m","now","avg"]}),r=[{text:"Query",value:"query"}],g={alerting:1,firing:1,no_data:2,pending:3,ok:4,paused:5,inactive:5};var f=(P=>(P.IsAbove="gt",P.IsBelow="lt",P.IsOutsideRange="outside_range",P.IsWithinRange="within_range",P.HasNoValue="no_value",P))(f||{});const o=[{value:"gt",text:"IS ABOVE"},{value:"lt",text:"IS BELOW"},{value:"outside_range",text:"IS OUTSIDE RANGE"},{value:"within_range",text:"IS WITHIN RANGE"},{value:"no_value",text:"HAS NO VALUE"}],l=[{text:"OR",value:"or"},{text:"AND",value:"and"}],a=[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"diff_abs()",value:"diff_abs"},{text:"percent_diff()",value:"percent_diff"},{text:"percent_diff_abs()",value:"percent_diff_abs"},{text:"count_non_null()",value:"count_non_null"}],m=[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],d=[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}];function p(P){const E=new c.zU({type:P.type,defaultParams:[]});return new c.XN(P,E)}function h(P){return P.toLowerCase().replace(/_/g,"").split(" ")[0]}function y(P){switch(h(P)){case"normal":case"ok":return{text:"OK",iconClass:"heart",stateClass:"alert-state-ok"};case"alerting":return{text:"ALERTING",iconClass:"heart-break",stateClass:"alert-state-critical"};case"nodata":return{text:"NO DATA",iconClass:"question-circle",stateClass:"alert-state-warning"};case"paused":return{text:"PAUSED",iconClass:"pause",stateClass:"alert-state-paused"};case"pending":return{text:"PENDING",iconClass:"hourglass",stateClass:"alert-state-warning"};case"firing":return{text:"FIRING",iconClass:"fire",stateClass:""};case"inactive":return{text:"INACTIVE",iconClass:"check",stateClass:""};case"error":return{text:"ERROR",iconClass:"heart-break",stateClass:"alert-state-critical"};case"unknown":default:return{text:"UNKNOWN",iconClass:"question-circle",stateClass:".alert-state-paused"}}}function v(P,E){return(0,t.reduce)(P,(C,b)=>(b.metric!==void 0&&b.value!==void 0&&C.push(b.metric+"="+b.value),b.Metric!==void 0&&b.Value!==void 0&&C.push(b.Metric+"="+b.Value),C),[]).join(E)}function i(P){return(0,t.isArray)(P.data)?v(P.data,", "):(0,t.isArray)(P.data.evalMatches)?v(P.data.evalMatches,", "):P.data.error?"Error: "+P.data.error:""}const u={alertQueryDef:s,getStateDisplayModel:y,conditionTypes:r,evalFunctions:o,evalOperators:l,noDataModes:m,executionErrorModes:d,reducerTypes:a,createReducerPart:p,getAlertAnnotationInfo:i,alertStateSortScore:g}},57591:(H,T,e)=>{"use strict";e.d(T,{C7:()=>g,D:()=>r,XN:()=>s,zU:()=>c});var t=e(82897),n=e.n(t);class c{constructor(a){this.type=a.type,this.params=a.params,this.defaultParams=a.defaultParams,this.renderer=a.renderer,this.category=a.category,this.addStrategy=a.addStrategy}}class s{constructor(a,m){if(this.part=a,this.def=m,!this.def)throw{message:"Could not find query part "+a.type};a.params=a.params||(0,t.clone)(this.def.defaultParams),this.params=a.params,this.text="",this.updateText()}render(a){return this.def.renderer(this,a)}hasMultipleParamsInString(a,m){return a.indexOf(",")===-1?!1:this.def.params[m+1]&&this.def.params[m+1].optional}updateParam(a,m){if(this.hasMultipleParamsInString(a,m)){(0,t.each)(a.split(","),(d,p)=>{this.updateParam(d.trim(),p)});return}a===""&&this.def.params[m].optional?this.params.splice(m,1):this.params[m]=a,this.part.params=this.params,this.updateText()}updateText(){if(this.params.length===0){this.text=this.def.type+"()";return}let a=this.def.type+"(";a+=this.params.join(", "),a+=")",this.text=a}}function r(l,a){const m=l.def.type+"(",d=(0,t.map)(l.params,(p,h)=>{const y=l.def.params[h];return y.type==="time"&&p==="auto"&&(p="$__interval"),y.quote==="single"?"'"+p+"'":y.quote==="double"?'"'+p+'"':p});return a&&d.unshift(a),m+d.join(", ")+")"}function g(l,a){return a+" "+l.params[0]}function f(l,a){return l.params[0]}function o(l,a){return'"'+l.params[0]+'"'}},11626:(H,T,e)=>{"use strict";e.d(T,{ZP:()=>b,Gr:()=>a,gz:()=>h,Oc:()=>y,K:()=>u,J0:()=>P,T2:()=>i,ql:()=>v});var t=e(32557),n=e(46519),c=e(31259),s=e(46818),r=e(72004);const f=(0,c.combineReducers)({dataSources:(0,s.jK)("dataSources",r.nw,({rulesSourceName:x})=>x).reducer,promRules:(0,s.jK)("promRules",r.y6,({rulesSourceName:x})=>x).reducer,rulerRules:(0,s.jK)("rulerRules",r.UR,({rulesSourceName:x})=>x).reducer,amConfigs:(0,s.jK)("amConfigs",r.Yh,x=>x).reducer,silences:(0,s.jK)("silences",r.je,x=>x).reducer,ruleForm:(0,c.combineReducers)({saveRule:(0,s.i6)("saveRule",r.wy).reducer,existingRule:(0,s.i6)("existingRule",r.on).reducer}),grafanaNotifiers:(0,s.i6)("grafanaNotifiers",r.Vj).reducer,saveAMConfig:(0,s.i6)("saveAMConfig",r.mM).reducer,deleteAMConfig:(0,s.i6)("deleteAMConfig",r.Nc).reducer,updateSilence:(0,s.i6)("updateSilence",r.QY).reducer,amAlerts:(0,s.jK)("amAlerts",r.dB,x=>x).reducer,folders:(0,s.jK)("folders",r.vL,x=>x).reducer,amAlertGroups:(0,s.jK)("amAlertGroups",r.mS,x=>x).reducer,testReceivers:(0,s.i6)("testReceivers",r.D8).reducer,updateLotexNamespaceAndGroup:(0,s.i6)("updateLotexNamespaceAndGroup",r.hv).reducer,externalAlertmanagers:(0,c.combineReducers)({alertmanagerConfig:(0,s.i6)("alertmanagerConfig",r.wE).reducer,discoveredAlertmanagers:(0,s.i6)("discoveredAlertmanagers",r.zy).reducer}),managedAlertStateHistory:(0,s.i6)("managedAlertStateHistory",r.Ms).reducer});var o=e(67162);const l={items:[],searchQuery:"",isLoading:!1},a={notificationChannelTypes:[],notificationChannel:{},notifiers:[]};function m(x,O){const L=o.Z.getStateDisplayModel(O),B={...x,stateText:L.text,stateIcon:L.iconClass,stateClass:L.stateClass,stateAge:(0,n.CQ)(x.newStateDate).fromNow(!0)};return B.state!=="paused"&&(B.executionError&&(B.info="Execution Error: "+B.executionError),B.evalData&&B.evalData.noData&&(B.info="Query returned no data")),B}const d=(0,t.oM)({name:"alertRules",initialState:l,reducers:{loadAlertRules:x=>({...x,isLoading:!0}),loadedAlertRules:(x,O)=>{const B=O.payload.map(w=>m(w,w.state));return{...x,items:B,isLoading:!1}},setSearchQuery:(x,O)=>({...x,searchQuery:O.payload})}}),p=(0,t.oM)({name:"notificationChannel",initialState:a,reducers:{setNotificationChannels:(x,O)=>({...x,notificationChannelTypes:M(O.payload),notifiers:O.payload}),notificationChannelLoaded:(x,O)=>{const L=O.payload,w=x.notifiers.find(R=>R.type===L.type).options.filter(R=>R.secure);return w.length>0&&w.some(R=>L.settings[R.propertyName]!=="")?S(x,O.payload,w):{...x,notificationChannel:L}},resetSecureField:(x,O)=>({...x,notificationChannel:{...x.notificationChannel,secureFields:{...x.notificationChannel.secureFields,[O.payload]:!1}}})}}),{loadAlertRules:h,loadedAlertRules:y,setSearchQuery:v}=d.actions,{setNotificationChannels:i,notificationChannelLoaded:u,resetSecureField:P}=p.actions,E=d.reducer,C=p.reducer,b={alertRules:E,notificationChannel:C,unifiedAlerting:f};function S(x,O,L){const B={},w={};return L.forEach(R=>{w[R.propertyName]=O.settings[R.propertyName],B[R.propertyName]=""}),{...x,notificationChannel:{...O,settings:{...O.settings,...B},secureSettings:{...w}}}}function M(x){return x.map(O=>({value:O.type,label:O.name,...O,typeName:O.type})).sort((O,L)=>O.name>L.name?1:-1)}},41904:(H,T,e)=>{"use strict";e.d(T,{Hc:()=>p,I5:()=>d,PN:()=>l,Z0:()=>h,pM:()=>a,z7:()=>o});var t=e(46519),n=e(53843),c=e(56986),s=e(54899),r=e(35645),g=e(41818);const f=15,o={filterByLabel:"filtering alert instances by label",loadedList:"loaded Alert Rules list",leavingRuleGroupEdit:"leaving rule group edit without saving",alertRuleFromPanel:"creating alert rule from panel",alertRuleFromScratch:"creating alert rule from scratch",clickingAlertStateFilters:"clicking alert state filters",cancelSavingAlertRule:"user canceled alert rule creation",successSavingAlertRule:"alert rule saved successfully"};function l(y,v={}){r.v.grafanaJavascriptAgent.enabled&&n.s.api.pushLog([y],{level:c.in.INFO,context:{...v,module:"Alerting"}})}function a(y,v,i){return async function(...u){const P=performance.now(),E=await y(...u);return l(v,{loadTimeMs:(performance.now()-P).toFixed(0),...i}),E}}async function m(){try{const{createdAt:y}=await(0,s.i)().get("/api/user"),v=(0,t.CQ)().subtract(f,"days"),i=(0,t.CQ)(y);return v.isBefore(i)}catch{return!0}}const d=async y=>{await m()||(0,g.ff)("grafana_alerting_rule_creation",y)},p=async y=>{await m()||(0,g.ff)("grafana_alerting_rule_aborted",y)},h=async y=>{await m()||(0,g.ff)("grafana_alerting_rule_form_error",y)}},29427:(H,T,e)=>{"use strict";e.d(T,{C:()=>g});var t=e(32504),n=e(3363),c=e(54899),s=e(41904);const r=()=>async f=>{try{const o=performance.now(),{data:l,...a}=await(0,n.n)((0,c.i)().fetch(f));return(0,s.PN)("Request finished",{loadTimeMs:(performance.now()-o).toFixed(0),url:f.url,method:f.method??"",responseStatus:a.statusText}),{data:l,meta:a}}catch(o){return{error:o}}},g=(0,t.LC)({reducerPath:"alertingApi",baseQuery:r(),tagTypes:["AlertmanagerChoice"],endpoints:()=>({})})},44737:(H,T,e)=>{"use strict";e.d(T,{C$:()=>o,SJ:()=>m,WG:()=>l,Zy:()=>a});var t=e(3363),n=e(54899),c=e(46063),s=e(37190),r=e(45849),g=e(95454),f=e(49011);async function o(i){if(i===r.GC)return{features:{rulerApiEnabled:!0}};const u=(0,r.c$)(i);if(!u)throw new Error(`Cannot find data source configuration for ${i}`);const{url:P,name:E,type:C}=u;if(!P)throw new Error("The data source url cannot be empty.");if(C!=="prometheus"&&C!=="loki")throw new Error(`The build info request is not available for ${C}. Only 'prometheus' and 'loki' are supported`);return l({name:E,url:P,type:C})}async function l(i){const{url:u,name:P,type:E}=i,C=E==="loki"?void 0:await p(u);if(!(C!==void 0)){if(!await h(P))throw new Error(`Unable to fetch alert rules. Is the ${P} data source properly configured?`);const x=await y(P);return{application:c.T8.Cortex,features:{rulerApiEnabled:x}}}const{features:S}=C.data;return S?{application:c.T8.Mimir,features:{rulerApiEnabled:S?.ruler_config_api==="true"}}:{application:c.T8.Prometheus,features:{rulerApiEnabled:!1}}}async function a(i){if(i===r.GC)return{lazyConfigInit:!1};const u=d(i),{url:P,type:E}=u;if(!P)throw new Error("The data source url cannot be empty.");if(E!=="alertmanager")throw new Error(`Alertmanager feature discovery is not available for ${E}. Only 'alertmanager' type is supported`);return await m(P)}async function m(i){try{return{lazyConfigInit:(await p(i))?.data?.application==="Grafana Mimir"}}catch{return{lazyConfigInit:!1}}}function d(i){const u=(0,r.c$)(i);if(!u)throw new Error(`Cannot find data source configuration for ${i}`);return u}async function p(i){return(await(0,t.n)((0,n.i)().fetch({url:`${i}/api/v1/status/buildinfo`,showErrorAlert:!1,showSuccessAlert:!1})).catch(P=>{if(!("status"in P&&P.status===404))throw P}))?.data}async function h(i){try{return await(0,g.j)(i),!0}catch{return!1}}async function y(i){try{return await(0,f.jw)(i),!0}catch(u){if(v(u))return!1;throw u}}function v(i){return(0,n.kW)(i)?i.data.message?.includes("GetRuleGroup unsupported in rule local store")||i.data.message?.includes("page not found")||i.data.message?.includes(s.jZ):i instanceof Error&&i.message?.includes("404 from rules config endpoint")}},79572:(H,T,e)=>{"use strict";e.d(T,{T:()=>c});var t=e(29427),n=e(44737);const c=t.C.injectEndpoints({endpoints:s=>({discoverAmFeatures:s.query({queryFn:async({amSourceName:r})=>{try{return{data:await(0,n.Zy)(r)}}catch(g){return{error:g}}}})})})},644:(H,T,e)=>{"use strict";e.d(T,{QE:()=>o,i9:()=>s});var t=e(3363),n=e(54899),c=e(45849);function s(){return(0,n.i)().get("/api/alert-notifiers")}const r=l=>{const a=l.match(/^(\w+)(\[\d+\])?$/);return a?{type:a[1],index:a[2]}:{type:l,index:void 0}},g=l=>{const a={receivers:{},errorCount:0};l.forEach(d=>{a.receivers[d.name]={active:d.active,notifiers:{},errorCount:0};const p=a.receivers[d.name];d.integrations.forEach(h=>{Boolean(h?.lastNotifyAttemptError)&&(p.errorCount+=1);const v=f(h.name);v&&(p.notifiers[v]||(p.notifiers[v]=[]),p.notifiers[v].push(h))})});const m=Object.values(a.receivers).reduce((d,p)=>d+p.errorCount,0);return{...a,errorCount:m}},f=l=>r(l)?.type;async function o(l){try{const a=await(0,t.n)((0,n.i)().fetch({url:`/api/alertmanager/${(0,c.gt)(l)}/config/api/v1/receivers`,showErrorAlert:!1,showSuccessAlert:!1}));return g(a.data)}catch{return g([])}}},95454:(H,T,e)=>{"use strict";e.d(T,{hd:()=>r,j:()=>g});var t=e(3363),n=e(54899),c=e(45849);function s(f){const{dataSourceName:o}=f;return{rules:l=>{const a=new URLSearchParams,m=r(a,l);return{url:`/api/prometheus/${(0,c.gt)(o)}/api/v1/rules`,params:m}}}}function r(f,o){return o?.dashboardUID&&(f.set("dashboard_uid",o.dashboardUID),o?.panelId&&f.set("panel_id",String(o.panelId))),Object.fromEntries(f)}async function g(f,o){if(o?.dashboardUID&&f!==c.GC)throw new Error("Filtering by dashboard UID is only supported for Grafana Managed rules.");const{url:l,params:a}=s({dataSourceName:f}).rules(o),m=await(0,t.n)((0,n.i)().fetch({url:l,params:a,showErrorAlert:!1,showSuccessAlert:!1})).catch(p=>{throw"status"in p&&p.status===404?new Error("404 from rule state endpoint. Perhaps ruler API is not enabled?"):p}),d={};return m.data.data.groups.forEach(p=>{p.rules.forEach(h=>{h.query=h.query||""}),d[p.file]?d[p.file].groups.push(p):d[p.file]={dataSourceName:f,name:p.file,groups:[p]}}),Object.values(d)}},49011:(H,T,e)=>{"use strict";e.d(T,{BC:()=>d,P4:()=>f,jJ:()=>m,jw:()=>a,m6:()=>o,sz:()=>i});var t=e(3363),n=e(54899),c=e(37190),s=e(45849),r=e(95454);function g(u){const E=`${`/api/ruler/${(0,s.gt)(u.dataSourceName)}`}/api/v1/rules`,C=new URLSearchParams;return C.set("subtype",u.apiVersion==="legacy"?"cortex":"mimir"),{rules:b=>{const S=(0,r.hd)(C,b);return{path:`${E}`,params:S}},namespace:b=>({path:`${E}/${encodeURIComponent(b)}`,params:Object.fromEntries(C)}),namespaceGroup:(b,S)=>({path:`${E}/${encodeURIComponent(b)}/${encodeURIComponent(S)}`,params:Object.fromEntries(C)})}}async function f(u,P,E){const{path:C,params:b}=g(u).namespace(P);await(0,t.n)((0,n.i)().fetch({method:"POST",url:C,data:E,showErrorAlert:!1,showSuccessAlert:!1,params:b}))}async function o(u,P){if(P?.dashboardUID&&u.dataSourceName!==s.GC)throw new Error("Filtering by dashboard UID is only supported by Grafana.");const{path:E,params:C}=g(u).rules(P);return p(E,{},C)}async function l(u,P){const{path:E,params:C}=g(u).namespace(P);return(await p(E,{},C))[P]||[]}async function a(u){return p(`/api/ruler/${(0,s.gt)(u)}/api/v1/rules/test/test`,null)}async function m(u,P,E){const{path:C,params:b}=g(u).namespaceGroup(P,E);return p(C,null,b)}async function d(u,P,E){const{path:C,params:b}=g(u).namespaceGroup(P,E);await(0,t.n)((0,n.i)().fetch({url:C,method:"DELETE",showSuccessAlert:!1,showErrorAlert:!1,params:b}))}async function p(u,P,E){try{return(await(0,t.n)((0,n.i)().fetch({url:u,showErrorAlert:!1,showSuccessAlert:!1,params:E}))).data}catch(C){if(!h(C))throw C;if(v(C))return P;throw y(C)?{...C,data:{...C.data,message:c.jZ}}:C}}function h(u){const P=u.data!=null;return Number.isFinite(u.status)&&P}function y(u){return u.status===404||u.status===500&&u.data.message?.includes("unexpected content type from upstream. expected YAML, got text/html")}function v(u){return u.status===404&&(u.data.message?.includes("group does not exist")||u.data.message?.includes("no rule groups found"))}async function i(u,P){const{path:E,params:C}=g(u).namespace(P);await(0,t.n)((0,n.i)().fetch({method:"DELETE",url:E,showErrorAlert:!1,showSuccessAlert:!1,params:C}))}},24782:(H,T,e)=>{"use strict";e.d(T,{i:()=>r});var t=e(52423),n=e(68404),c=e(72648),s=e(8180);const r=({labelKey:f,value:o,operator:l="=",onRemoveLabel:a})=>{const m=(0,c.wW)(g);return n.createElement("div",{className:m.wrapper},f,l,o,!!a&&n.createElement(s.h,{name:"times",size:"xs",onClick:a}))},g=f=>({wrapper:t.css`
    padding: ${f.spacing(.5,1)};
    border-radius: ${f.shape.borderRadius(1)};
    border: solid 1px ${f.colors.border.medium};
    font-size: ${f.typography.bodySmall.fontSize};
    background-color: ${f.colors.background.secondary};
    font-weight: ${f.typography.fontWeightBold};
    color: ${f.colors.text.primary};
    display: inline-block;
    line-height: 1.2;
  `})},52694:(H,T,e)=>{"use strict";e.d(T,{s:()=>c});var t=e(68404),n=e(34807);const c=({labels:s,className:r})=>{const g=Object.entries(s).filter(([f])=>!(f.startsWith("__")&&f.endsWith("__")));return t.createElement("div",{className:r},t.createElement(n.P,{tags:Object.values(g).map(([f,o])=>`${f}=${o}`),className:r}))}},94984:(H,T,e)=>{"use strict";e.d(T,{P:()=>o});var t=e(52423),n=e(68404),c=e(72648),s=e(24799),r=e(53217),g=e(45849);function f(a){return a.name===g.GC?"Grafana":a.name.slice(0,37)}const o=({onChange:a,current:m,dataSources:d,disabled:p=!1})=>{const h=(0,c.wW)(l),y=(0,n.useMemo)(()=>d.map(v=>({label:f(v),value:v.name,imgUrl:v.imgUrl,meta:v.meta})),[d]);return n.createElement(s.g,{className:h.field,label:p?"Alertmanager":"Choose Alertmanager",disabled:p||y.length===1,"data-testid":"alertmanager-picker"},n.createElement(r.Ph,{"aria-label":p?"Alertmanager":"Choose Alertmanager",width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:v=>v.value&&a(v.value),options:y,maxMenuHeight:500,noOptionsMessage:"No datasources found",value:m,getOptionLabel:v=>v.label}))},l=a=>({field:t.css`
    margin-bottom: ${a.spacing(4)};
  `})},78543:(H,T,e)=>{"use strict";e.d(T,{a:()=>a});var t=e(52423),n=e(68404),c=e(61860),s=e(72648),r=e(37190),g=e(80498),f=e(46587),o=e(94884);const l=["message","description"],a=({annotationKey:p,value:h})=>{const y=r.vY[p]?n.createElement(c.u,{content:p,placement:"top",theme:"info"},n.createElement("span",null,r.vY[p])):p;return n.createElement(g.C,{label:y,horizontal:!0},n.createElement(m,{annotationKey:p,value:h}))},m=({annotationKey:p,value:h})=>{const y=(0,s.wW)(d),v=l.includes(p),i=h&&h.startsWith("http"),u=n.createElement(f.Z,{input:h,delimiter:["{{","}}"]});return v?n.createElement(o.t,{className:y.well},u):i?n.createElement("a",{href:h,target:"__blank",className:y.link},h):n.createElement(n.Fragment,null,u)},d=p=>({well:t.css`
    word-break: break-word;
  `,link:t.css`
    word-break: break-all;
    color: ${p.colors.primary.text};
  `})},33950:(H,T,e)=>{"use strict";e.d(T,{U:()=>r});var t=e(52423),n=e(68404),c=e(72648),s=e(31403);const r=({isCollapsed:f,onToggle:o,idControlled:l,className:a,text:m,size:d="xl",...p})=>{const h=(0,c.wW)(g);return n.createElement(s.zx,{type:"button",fill:"text",variant:"secondary","aria-expanded":!f,"aria-controls":l,className:(0,t.cx)(h.expandButton,a),icon:f?"angle-right":"angle-down",onClick:()=>o(!f),...p},m)},g=f=>({expandButton:t.css`
    margin-right: ${f.spacing(1)};
  `})},80498:(H,T,e)=>{"use strict";e.d(T,{C:()=>s});var t=e(52423),n=e(68404),c=e(72648);const s=({className:g,label:f,horizontal:o,children:l,childrenWrapperClassName:a})=>{const m=(0,c.wW)(r);return n.createElement("div",{className:(0,t.cx)(m.field,o?m.fieldHorizontal:m.fieldVertical,g)},n.createElement("div",null,f),n.createElement("div",{className:a},l))},r=g=>({fieldHorizontal:t.css`
    flex-direction: row;
    ${g.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,fieldVertical:t.css`
    flex-direction: column;
  `,field:t.css`
    display: flex;
    margin: ${g.spacing(2)} 0;

    & > div:first-child {
      width: 110px;
      padding-right: ${g.spacing(1)};
      font-size: ${g.typography.size.sm};
      font-weight: ${g.typography.fontWeightBold};
      line-height: 1.8;
    }
    & > div:nth-child(2) {
      flex: 1;
      color: ${g.colors.text.secondary};
    }
  `})},53731:(H,T,e)=>{"use strict";e.d(T,{t:()=>o});var t=e(52423),n=e(68404),c=e(72648),s=e(8180),r=e(78889),g=e(25724),f=e(1562);const o=({cols:a,items:m,isExpandable:d=!1,onCollapse:p,onExpand:h,isExpanded:y,renderExpandedContent:v,testIdGenerator:i,pagination:u,paginationStyles:P,renderPrefixCell:E,renderPrefixHeader:C,footerRow:b})=>{const S=(0,c.wW)(f.Z);if((p||h||y)&&!(p&&h&&y))throw new Error("either all of onCollapse, onExpand, isExpanded must be provided, or none");if((d||v)&&!(d&&v))throw new Error("either both isExpanded and renderExpandedContent must be provided, or neither");const M=(0,c.wW)(l(a,d,!!C)),[x,O]=(0,n.useState)([]),L=I=>{y&&p&&h?y(I)?p(I):h(I):O(x.includes(I.id)?x.filter(N=>N!==I.id):[...x,I.id])},B=u?.itemsPerPage??m.length,{page:w,numberOfPages:R,onPageChange:A,pageItems:U}=(0,g.h)(m,1,B);return n.createElement(n.Fragment,null,n.createElement("div",{className:M.container,"data-testid":"dynamic-table"},n.createElement("div",{className:M.row,"data-testid":"header"},C&&C(),d&&n.createElement("div",{className:M.cell}),a.map(I=>n.createElement("div",{className:M.cell,key:I.id},I.label))),U.map((I,N)=>{const F=y?y(I):x.includes(I.id);return n.createElement("div",{className:M.row,key:`${I.id}-${N}`,"data-testid":i?.(I,N)??"row"},E&&E(I,N,m),d&&n.createElement("div",{className:(0,t.cx)(M.cell,M.expandCell)},n.createElement(s.h,{"aria-label":`${F?"Collapse":"Expand"} row`,size:"xl","data-testid":"collapse-toggle",className:M.expandButton,name:F?"angle-down":"angle-right",onClick:()=>L(I),type:"button"})),a.map(D=>n.createElement("div",{className:(0,t.cx)(M.cell,M.bodyCell),"data-column":D.label,key:`${I.id}-${D.id}`},D.renderCell(I,N))),F&&v&&n.createElement("div",{className:M.expandedContentRow,"data-testid":"expanded-content"},v(I,N,m)))}),b&&n.createElement("div",{className:(0,t.cx)(M.row,M.footerRow)},b)),u&&n.createElement(r.t,{className:(0,t.cx)(S,P),currentPage:w,numberOfPages:R,onNavigate:A,hideWhenSinglePage:!0}))},l=(a,m,d)=>{const p=a.map(h=>h.size?typeof h.size=="number"?`${h.size}fr`:h.size:"auto");return m&&p.unshift("calc(1em + 16px)"),d&&p.unshift("0"),h=>({container:t.css`
      border: 1px solid ${h.colors.border.strong};
      border-radius: 2px;
      color: ${h.colors.text.secondary};
    `,row:t.css`
      display: grid;
      grid-template-columns: ${p.join(" ")};
      grid-template-rows: 1fr auto;

      &:nth-child(2n + 1) {
        background-color: ${h.colors.background.secondary};
      }

      &:nth-child(2n) {
        background-color: ${h.colors.background.primary};
      }

      ${h.breakpoints.down("sm")} {
        grid-template-columns: auto 1fr;
        grid-template-areas: 'left right';
        padding: 0 ${h.spacing(.5)};

        &:first-child {
          display: none;
        }

        ${d?`
            & > *:first-child {
              display: none;
            }
          `:""}
      }
    `,footerRow:t.css`
      display: flex;
      padding: ${h.spacing(1)};
    `,cell:t.css`
      align-items: center;
      padding: ${h.spacing(1)};

      ${h.breakpoints.down("sm")} {
        padding: ${h.spacing(1)} 0;
        grid-template-columns: 1fr;
      }
    `,bodyCell:t.css`
      overflow: hidden;

      ${h.breakpoints.down("sm")} {
        grid-column-end: right;
        grid-column-start: right;

        &::before {
          content: attr(data-column);
          display: block;
          color: ${h.colors.text.primary};
        }
      }
    `,expandCell:t.css`
      justify-content: center;

      ${h.breakpoints.down("sm")} {
        align-items: start;
        grid-area: left;
      }
    `,expandedContentRow:t.css`
      grid-column-end: ${p.length+1};
      grid-column-start: ${d?3:2};
      grid-row: 2;
      padding: 0 ${h.spacing(3)} 0 ${h.spacing(1)};
      position: relative;

      ${h.breakpoints.down("sm")} {
        grid-column-start: 2;
        border-top: 1px solid ${h.colors.border.strong};
        grid-row: auto;
        padding: ${h.spacing(1)} 0 0 0;
      }
    `,expandButton:t.css`
      margin-right: 0;
      display: block;
    `})}},42042:(H,T,e)=>{"use strict";e.d(T,{z:()=>o});var t=e(52423),n=e(9085),c=e.n(n),s=e(68404),r=e(72648),g=e(39604),f=e(56921);const o=({children:a,content:m,wrapperClassName:d,disabled:p=!1,...h})=>{const y=(0,s.useRef)(null),v=(0,r.wW)(l);return p?a:s.createElement(g.D,{content:m,hideAfter:100},(i,u,P)=>s.createElement(s.Fragment,null,y.current&&s.createElement(f.J,{...P,...h,wrapperClassName:c()(v.popover,d),onMouseLeave:u,onMouseEnter:i,referenceElement:y.current}),s.cloneElement(a,{ref:y,onMouseEnter:i,onMouseLeave:u})))},l=a=>({popover:t.css`
    border-radius: ${a.shape.borderRadius()};
    box-shadow: ${a.shadows.z3};
    background: ${a.colors.background.primary};
    border: 1px solid ${a.colors.border.medium};

    padding: ${a.spacing(1)};
  `})},63613:(H,T,e)=>{"use strict";e.d(T,{s:()=>s});var t=e(68404),n=e(61860),c=e(39904);function s({text:r}){return t.createElement(n.u,{placement:"top",content:t.createElement("div",null,r)},t.createElement(c.J,{name:"info-circle",size:"xs"}))}},74542:(H,T,e)=>{"use strict";e.d(T,{j:()=>r});var t=e(68404),n=e(35645),c=e(2594),s=e(37190);function r(o){const{value:l,onChange:a,size:m="md"}=o,d=(0,t.useMemo)(()=>g(),[]);return t.createElement(c.S,{options:d,value:l,onChange:a,size:m})}function g(){return Object.values(n.v.panels).reduce((o,l)=>(f(l.id)&&o.push({value:l.id,label:l.name,imgUrl:l.info.logos.small}),o),[])}function f(o){switch(o){case s.GC:case s.Fe:case s.Kd:return!0;default:return!1}}},79453:(H,T,e)=>{"use strict";e.d(T,{i:()=>s});var t=e(52423),n=e(68404),c=e(72648);const s=({children:g,state:f,size:o="md"})=>{const l=(0,c.wW)(r);return n.createElement("span",{className:(0,t.cx)(l.common,l[f],l[o])},g||f)},r=g=>({common:t.css`
    display: inline-block;
    color: white;
    border-radius: ${g.shape.borderRadius()};
    font-size: ${g.typography.size.sm};
    text-transform: capitalize;
    line-height: 1.2;
    text-align: center;
    font-weight: ${g.typography.fontWeightBold};
  `,good:t.css`
    background-color: ${g.colors.success.main};
    border: solid 1px ${g.colors.success.main};
    color: ${g.colors.success.contrastText};
  `,warning:t.css`
    background-color: ${g.colors.warning.main};
    border: solid 1px ${g.colors.warning.main};
    color: ${g.colors.warning.contrastText};
  `,bad:t.css`
    background-color: ${g.colors.error.main};
    border: solid 1px ${g.colors.error.main};
    color: ${g.colors.error.contrastText};
  `,neutral:t.css`
    background-color: ${g.colors.secondary.main};
    border: solid 1px ${g.colors.secondary.main};
    color: ${g.colors.secondary.contrastText};
  `,info:t.css`
    background-color: ${g.colors.primary.main};
    border: solid 1px ${g.colors.primary.main};
    color: ${g.colors.primary.contrastText};
  `,md:t.css`
    padding: ${g.spacing(.5,1)};
    min-width: ${g.spacing(8)};
  `,sm:t.css`
    padding: ${g.spacing(.3,.5)};
    min-width: 52px;
  `})},46587:(H,T,e)=>{"use strict";e.d(T,{Z:()=>o});var t=e(52423),n=e(68404),c=e(72648),s=e(19985),r=e(42042),g=e(86922);const f=["$",".",'"'];function o({input:v,delimiter:i=["{{","}}"]}){const u=(0,c.wW)(y),[P,E]=i,C=new RegExp(`(?<before>.*?)(${P}(?<token>.*?)${E}|$)`,"gm"),b=v.split(`
`),S=[];return b.forEach((M,x)=>{Array.from(M.matchAll(C)).forEach((L,B)=>{const w=L.groups?.before,R=L.groups?.token?.trim();if(w&&S.push(n.createElement("span",{key:`${x}-${B}-before`},w)),R){const A=h(R),U=A===l.Variable?R:"",I=`${P} ${R} ${E}`;S.push(n.createElement(a,{key:`${x}-${B}-token`,content:I,type:A,description:U}))}}),S.push(n.createElement("br",{key:`${x}-newline`}))}),n.createElement("span",{className:u.wrapper},S)}var l=(v=>(v.Variable="variable",v.Function="function",v.Keyword="keyword",v.Unknown="unknown",v))(l||{});function a({content:v,description:i,type:u}){const P=(0,c.wW)(y),E=Boolean(u)===!1;return n.createElement(r.z,{placement:"top-start",disabled:E,content:n.createElement("div",{className:P.hoverTokenItem},n.createElement(s.C,{text:n.createElement(n.Fragment,null,u),color:"blue"})," ",i&&n.createElement("code",null,i))},n.createElement("span",null,n.createElement(s.C,{className:P.token,text:v,color:"blue"})))}function m(v){return f.some(i=>v.startsWith(i))}function d(v){return g.keywords.some(i=>v.startsWith(i))}function p(v){return g.builtinFunctions.some(i=>v.startsWith(i))}function h(v){let i;return m(v)?i="variable":d(v)?i="keyword":p(v)?i="function":i="unknown",i}const y=v=>({wrapper:t.css`
    white-space: pre-wrap;
  `,token:t.css`
    cursor: default;
    font-family: ${v.typography.fontFamilyMonospace};
  `,popover:t.css`
    border-radius: ${v.shape.borderRadius()};
    box-shadow: ${v.shadows.z3};
    background: ${v.colors.background.primary};
    border: 1px solid ${v.colors.border.medium};

    padding: ${v.spacing(1)};
  `,hoverTokenItem:t.css`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${v.spacing(1)};
  `})},94884:(H,T,e)=>{"use strict";e.d(T,{t:()=>s});var t=e(52423),n=e(68404),c=e(72648);const s=({children:g,className:f})=>{const o=(0,c.wW)(r);return n.createElement("div",{className:(0,t.cx)(o.wrapper,f)},g)},r=g=>({wrapper:t.css`
    background-color: ${g.components.panel.background};
    border: solid 1px ${g.components.input.borderColor};
    border-radius: ${g.shape.borderRadius(1)};
    padding: ${g.spacing(.5,1)};
    font-family: ${g.typography.fontFamilyMonospace};
  `})},96308:(H,T,e)=>{"use strict";e.d(T,{Z:()=>g});var t=e(64681),n=e.n(t),c=e(68404),s=e(72648),r=e(53715);const g=({group:f})=>{const o=(0,s.wW)(r.r),l=f.alerts.length,a=f.alerts.reduce((m,d)=>(m[d.status.state]?m[d.status.state]+=1:m[d.status.state]=1,m),{});return c.createElement("div",null,`${l} ${n()("alert",l)}: `,Object.entries(a).map(([m,d],p)=>c.createElement("span",{key:`${JSON.stringify(f.labels)}-notifications-${p}`,className:o[m]},p>0&&", ",`${d} ${m}`)))}},50362:(H,T,e)=>{"use strict";e.d(T,{_:()=>r});var t=e(52423),n=e(68404),c=e(72648),s=e(19985);const r=({enabled:f=!1,error:o,warning:l,onSetCondition:a})=>{const m=(0,c.wW)(g);return f&&o?n.createElement(s.C,{color:"red",icon:"exclamation-circle",text:"Alert condition",tooltip:o.message}):f&&l?n.createElement(s.C,{color:"orange",icon:"exclamation-triangle",text:"Alert condition",tooltip:l.message}):f&&!o&&!l?n.createElement(s.C,{color:"green",icon:"check",text:"Alert condition"}):f?null:n.createElement("div",{className:m.actionLink,onClick:()=>a&&a()},"Make this the alert condition")},g=f=>({actionLink:t.css`
    color: ${f.colors.text.link};
    cursor: pointer;

    &:hover {
      text-decoration: underline;
    }
  `})},76726:(H,T,e)=>{"use strict";e.d(T,{A2:()=>w,bw:()=>R});var t=e(52423),n=e(82897),c=e(68404),s=e(49922),r=e(38849),g=e(34472),f=e(26418),o=e(72648),l=e(68668),a=e(39904),m=e(53217),d=e(8180),p=e(5076),h=e(71263),y=e(75897),v=e(436),i=e(70227),u=e(97573),P=e(46063),E=e(42042);const C=()=>c.createElement("span",{className:t.css`
      flex: 1;
    `});var b=e(45608),S=e(50362),M=e(43211);const x=D=>D.name??L(D.fields[0]?.labels??{}),O=D=>{const Y=D.fields[0]?.values.get(0);return Number.isFinite(Y)?(0,M.O)(Y,5):Y},L=D=>Object.entries(D).map(([Y,j])=>Y+"="+j).join(", "),B=D=>D.every(j=>j.fields.every(K=>K.values.toArray().every(z=>z==null))),w=({queries:D=[],query:Y,data:j,error:K,warning:z,isAlertCondition:Z,onSetCondition:ae,onUpdateRefId:J,onRemoveExpression:oe,onUpdateExpressionType:Ee,onChangeQuery:me})=>{const re=(0,o.wW)(F),le=Y?.type,pe=j&&Object.values(j).some(de=>Boolean(de)&&de.state===s.Gu.Loading),ee=Array.isArray(j?.series)&&!pe,se=j?.series??[],Q=Z??!1,G=Z&&ee,q={[P.x_.Firing]:se.filter(de=>O(de)>=1),[P.x_.Inactive]:se.filter(de=>O(de)<1)},X=(0,c.useCallback)(de=>{const Be=D.filter(ke=>de.refId!==ke.refId).map(ke=>({value:ke.refId,label:ke.refId}));switch(de.type){case u.Us.math:return c.createElement(h.Z,{onChange:me,query:de,labelWidth:"auto",onRunQuery:()=>{}});case u.Us.reduce:return c.createElement(y.v,{onChange:me,refIds:Be,labelWidth:"auto",query:de});case u.Us.resample:return c.createElement(v.p,{onChange:me,query:de,labelWidth:"auto",refIds:Be});case u.Us.classic:return c.createElement(p.I,{onChange:me,query:de,refIds:Be});case u.Us.threshold:return c.createElement(i.M,{onChange:me,query:de,labelWidth:"auto",refIds:Be});default:return c.createElement(c.Fragment,null,"Expression not supported: ",de.type)}},[me,D]);return c.createElement("div",{className:(0,t.cx)(re.expression.wrapper,Q&&re.expression.alertCondition)},c.createElement("div",{className:re.expression.stack},c.createElement(U,{refId:Y.refId,queryType:le,onRemoveExpression:()=>oe(Y.refId),onUpdateRefId:de=>J(Y.refId,de),onUpdateExpressionType:de=>Ee(Y.refId,de)}),c.createElement("div",{className:re.expression.body},X(Y)),ee&&c.createElement(R,{series:se,isAlertCondition:Z}),c.createElement("div",{className:re.footer},c.createElement(f.Stack,{direction:"row",alignItems:"center"},c.createElement(S._,{onSetCondition:()=>ae(Y.refId),enabled:Q,error:K,warning:z}),c.createElement(C,null),G&&c.createElement(A,{firing:q[P.x_.Firing].length,normal:q[P.x_.Inactive].length})))))},R=({series:D,isAlertCondition:Y})=>{const j=(0,o.wW)(F),K=B(D),z=!K&&(0,g.hZ)(D);return c.createElement("div",{className:j.expression.results},!K&&z&&c.createElement("div",null,D.map((Z,ae)=>c.createElement(N,{key:(0,n.uniqueId)(),frame:Z,index:ae,isAlertCondition:Y}))),!K&&!z&&D.map((Z,ae)=>c.createElement(I,{key:(0,n.uniqueId)(),frame:Z,index:ae,isAlertCondition:Y})),K&&c.createElement("div",{className:(0,t.cx)(j.expression.noData,j.mutedText)},"No data"))},A=({firing:D,normal:Y})=>{const{mutedText:j}=(0,o.wW)(F);return c.createElement("span",{className:j},`${D} firing, ${Y} normal`)},U=({refId:D,queryType:Y,onUpdateRefId:j,onUpdateExpressionType:K,onRemoveExpression:z})=>{const Z=(0,o.wW)(F),[ae,J]=(0,c.useState)(!1),oe=ae!==!1,Ee=oe&&ae==="refId",me=oe&&ae==="expressionType",re=u._M.find(le=>le.value===Y);return c.createElement("header",{className:Z.header.wrapper},c.createElement(f.Stack,{direction:"row",gap:.5,alignItems:"center"},c.createElement(f.Stack,{direction:"row",gap:1,alignItems:"center",wrap:!1},!Ee&&c.createElement("div",{className:Z.editable,onClick:()=>J("refId")},c.createElement("div",{className:Z.expression.refId},D)),Ee&&c.createElement(l.H,{autoFocus:!0,defaultValue:D,minWidth:5,onChange:le=>{j(le.currentTarget.value),J(!1)},onFocus:le=>le.target.select(),onBlur:le=>{j(le.currentTarget.value),J(!1)}}),!me&&c.createElement("div",{className:Z.editable,onClick:()=>J("expressionType")},c.createElement("div",{className:Z.mutedText},(0,n.capitalize)(Y)),c.createElement(a.J,{size:"xs",name:"pen",className:Z.mutedIcon,onClick:()=>J("expressionType")})),me&&c.createElement(m.Ph,{isOpen:!0,autoFocus:!0,onChange:le=>{K(le.value??u.Us.classic),J(!1)},onBlur:()=>{J(!1)},options:u._M,value:re,width:25})),c.createElement(C,null),c.createElement(d.h,{type:"button",name:"trash-alt",variant:"secondary",className:Z.mutedIcon,onClick:z})))},I=({frame:D,index:Y,isAlertCondition:j})=>{const K=(0,o.wW)(F),z=x(D)||"Series "+Y,Z=O(D),ae=j&&Z!==0,J=j&&Z===0;return c.createElement("div",{className:K.expression.resultsRow},c.createElement(f.Stack,{direction:"row",gap:1,alignItems:"center"},c.createElement("span",{className:(0,t.cx)(K.mutedText,K.expression.resultLabel),title:z},z),c.createElement("div",{className:K.expression.resultValue},Z),ae&&c.createElement(b.l,{state:P.x_.Firing,size:"sm"}),J&&c.createElement(b.l,{state:P.x_.Inactive,size:"sm"})))},N=({frame:D,index:Y})=>{const j=(0,o.wW)(F),z=D.fields[1].labels?L(D.fields[1].labels??{}):"Series "+Y,Z=D.fields[0].values.toArray(),ae=oe=>D.fields[0].values.get(oe),J=oe=>D.fields[1].values.get(oe);return c.createElement("div",{className:j.expression.resultsRow},c.createElement(f.Stack,{direction:"row",gap:1,alignItems:"center"},c.createElement("span",{className:(0,t.cx)(j.mutedText,j.expression.resultLabel),title:z},z),c.createElement("div",{className:j.expression.resultValue},c.createElement(E.z,{placement:"right",wrapperClassName:j.timeseriesTableWrapper,content:c.createElement("table",{className:j.timeseriesTable},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",null,"Timestamp"),c.createElement("th",null,"Value"))),c.createElement("tbody",null,Z.map((oe,Ee)=>c.createElement("tr",{key:Ee},c.createElement("td",{className:j.mutedText},(0,r.dq)(ae(Ee))),c.createElement("td",{className:j.expression.resultValue},J(Ee))))))},c.createElement("span",null,"Time series data")))))},F=D=>({expression:{wrapper:t.css`
      display: flex;
      border: solid 1px ${D.colors.border.medium};

      border-radius: ${D.shape.borderRadius()};
      max-width: 640px;
    `,stack:t.css`
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;
      gap: 0;
      min-width: 0; // this one is important to prevent text overflow
    `,alertCondition:t.css``,body:t.css`
      padding: ${D.spacing(1)};
      flex: 1;
    `,refId:t.css`
      font-weight: ${D.typography.fontWeightBold};
      color: ${D.colors.primary.text};
    `,results:t.css`
      border-top: solid 1px ${D.colors.border.medium};
    `,noResults:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
    `,resultsRow:t.css`
      padding: ${D.spacing(.75)} ${D.spacing(1)};

      &:nth-child(odd) {
        background-color: ${D.colors.background.secondary};
      }

      &:hover {
        background-color: ${D.colors.background.canvas};
      }
    `,resultValue:t.css`
      color: ${D.colors.text.maxContrast};
      text-align: right;
    `,resultLabel:t.css`
      flex: 1;
    `,noData:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
      padding: ${D.spacing()};
    `},mutedText:t.css`
    color: ${D.colors.text.secondary};
    font-size: 0.9em;

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,header:{wrapper:t.css`
      background: ${D.colors.background.secondary};
      padding: ${D.spacing(.5)} ${D.spacing(1)};
      border-bottom: solid 1px ${D.colors.border.medium};
    `},footer:t.css`
    background: ${D.colors.background.secondary};
    padding: ${D.spacing(1)};
    border-top: solid 1px ${D.colors.border.medium};
  `,draggableIcon:t.css`
    cursor: grab;
  `,mutedIcon:t.css`
    color: ${D.colors.text.secondary};
  `,editable:t.css`
    padding: ${D.spacing(.5)} ${D.spacing(1)};
    border: solid 1px ${D.colors.border.weak};
    border-radius: ${D.shape.borderRadius()};

    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${D.spacing(1)};

    cursor: pointer;
  `,timeseriesTableWrapper:t.css`
    max-height: 500px;
    max-width: 300px;

    overflow-y: scroll;

    padding: 0 !important; // not sure why but style override doesn't work otherwise :( (Gilles)
  `,timeseriesTable:t.css`
    table-layout: auto;

    width: 100%;
    height: 100%;

    td,
    th {
      padding: ${D.spacing(1)};
    }

    td {
      background: ${D.colors.background.primary};
    }

    th {
      background: ${D.colors.background.secondary};
    }

    tr {
      border-bottom: 1px solid ${D.colors.border.medium};

      &:last-of-type {
        border-bottom: none;
      }
    }
  `})},86922:(H,T,e)=>{"use strict";e.r(T),e.d(T,{AlertmanagerTemplateFunction:()=>n,availableAlertManagerFunctions:()=>c,builtinFunctions:()=>r,conf:()=>o,keywords:()=>g,language:()=>f});var t=(l=>(l.Delimiter="delimiter",l.Keyword="keyword",l.Function="type.identifier",l.String="string",l.Variable="variable.name",l.Number="number",l.Comment="comment",l.Operator="operator",l.Identifier="idenfifier",l))(t||{}),n=(l=>(l.toUpper="toUpper",l.toLower="toLower",l.title="title",l.join="join",l.match="match",l.safeHtml="safeHtml",l.reReplaceAll="reReplaceAll",l.stringSlice="stringSlice",l))(n||{});const c=Object.values(n),r=["and","call","html","index","slice","js","len","not","or","print","printf","println","urlquery",...["eq","ne","lt","le","gt","ge"]],g=["define","if","else","end","range","break","continue","template","block","with"],f={defaultToken:"",keywords:g,functions:[...r,...c],operators:["|"],tokenizer:{root:[[/"/,"string","@string"],[/`/,"string","@rawstring"],[/\d*\d+[eE]([\-+]?\d+)?/,"number.float"],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F']*[0-9a-fA-F]/,"number.hex"],[/0[0-7']*[0-7]/,"number.octal"],[/0[bB][0-1']*[0-1]/,"number.binary"],[/\d[\d']*/,"number"],[/\d/,"number"],[/[;,.]/,"delimiter"],[/{{-?/,"delimiter"],[/-?}}/,"delimiter"],[/\.([A-Za-z]+)?/,"variable.name"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":{token:"keyword"},"@functions":{token:"type.identifier"},"@default":"idenfifier"}}],[/\/\*.*\*\//,"comment"]],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],rawstring:[[/[^\`]/,"string"],[/`/,"string","@pop"]]}},o={comments:{blockComment:["/*","*/"]},brackets:[["{{","}}"],["(",")"]],autoClosingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}]}},11376:(H,T,e)=>{"use strict";e.d(T,{p:()=>Fa,E:()=>rs});var t=e(52423),n=e(68404),c=e(59052),s=e(16144),r=e(35645),g=e(54408),f=e(72648),o=e(24799),l=e(46967),a=e(52081),m=e(31403),d=e(67487),p=e(68226),h=e(98102),y=e(60499),v=e(77582),i=e(40014),u=e(96044),P=e(81168),E=e(41904),C=e(69945),b=e(72004),S=e(94617),M=e(46818),x=e(21767),O=e(60048),L=e(63619),B=e(53217),w=e(58593),R=e(24015),A=e(84380),U=e(38849),I=e(49922),N=e(86647),F=e(45253),D=e(53786),Y=e(2101),j=e(94514),K=e(44962),z=e(83849),Z=e(70006),ae=e(69311),J=e(54899),oe=e(77599);function Ee(Bt){return"expr"in Bt}function me(Bt){return"grafana_condition"in Bt}var re=e(45849);function le(Bt){if(Ee(Bt))return pe(Bt,Bt.dataSourceUid,S.$.cloudAlerting);if(me(Bt))return pe(Bt,re.GC,S.$.grafana);throw new Error("unsupported preview rule request")}function pe(Bt,Ge,We){return(0,z.x)({whileLoading:ee(We),source:(0,J.i)().fetch({method:"POST",url:`/api/v1/rule/test/${Ge}`,data:Bt}).pipe((0,Y.U)(({data:ct})=>ee(We,{state:I.Gu.Done,series:ct.instances.map(Z.vP)})),(0,j.K)(ct=>(0,D.of)(ee(We,{state:I.Gu.Error,error:(0,oe.P)(ct)}))),(0,K.B)())})}function ee(Bt,Ge={}){return{ruleType:Bt,data:{state:I.Gu.Loading,series:[],timeRange:(0,ae.JK)(),...Ge}}}var se=e(69369),Q=e(89050),G=e(85854),q=e(98825),X=e(40538);function de(Bt){const{preview:Ge}=Bt,We=(0,f.wW)(Be),ct={defaults:{},overrides:[{matcher:{id:G.mi.byName,options:"Info"},properties:[{id:"custom.displayMode",value:X.h2.JSONView}]}]};if(!Ge)return null;const{data:St,ruleType:$t}=Ge;return St.state===I.Gu.Loading?n.createElement("div",{className:We.container},n.createElement("span",null,"Loading preview...")):St.state===I.Gu.Error?n.createElement("div",{className:We.container},St.error?(0,M.kk)(St.error):"Failed to preview alert rule"):n.createElement("div",{className:We.container},n.createElement("span",null,"Preview based on the result of running the query, for this moment."," ",$t===S.$.grafana?"Configuration for `no data` and `error handling` is not applied.":null),n.createElement("div",{className:We.table},n.createElement(Q.Z,null,({width:qt,height:Yt})=>n.createElement("div",{style:{width:`${qt}px`,height:`${Yt}px`}},n.createElement(q.$,{title:"",width:qt,height:Yt,pluginId:"table",data:St,fieldConfig:ct})))))}function Be(Bt){return{container:t.css`
      margin: ${Bt.spacing(2)} 0;
    `,table:t.css`
      flex: 1 1 auto;
      height: 135px;
      margin-top: ${Bt.spacing(2)};
      border: 1px solid ${Bt.colors.border.medium};
      border-radius: ${Bt.shape.borderRadius(1)};
    `}}const ke=["type","dataSourceName","condition","queries","expression"];function He(){const Bt=(0,f.wW)(Ie),[Ge,We]=ue(),{watch:ct}=(0,c.Gc)(),[St,$t,qt]=ct(["type","condition","queries"]),{allDataSourcesAvailable:Yt}=(0,se.S)(qt);if(St===S.$.cloudRecording||St===S.$.cloudAlerting)return null;const Dn=Boolean($t)&&Yt;return n.createElement("div",{className:Bt.container},n.createElement(a.Lh,null,Yt&&n.createElement(m.zx,{disabled:!Dn,type:"button",variant:"primary",onClick:We},"Preview alerts"),!Yt&&n.createElement(F.b,{title:"Preview is not available",severity:"warning"},"Cannot display the query preview. Some of the data sources used in the queries are not available.")),n.createElement(de,{preview:Ge}))}function ue(){const[Bt,Ge]=(0,n.useState)(),{getValues:We}=(0,c.Gc)(),ct=(0,R.Z)(),St=(0,n.useCallback)(()=>{const $t=We(ke),qt=Oe($t);le(qt).pipe((0,A.o)(Yt=>!Fe(Yt),!0)).subscribe(Yt=>{ct()&&Ge(Yt)})},[We,ct]);return[Bt,St]}function Oe(Bt){const[Ge,We,ct,St,$t]=Bt,qt=(0,N.F)().getInstanceSettings(We);if(!qt)throw new Error(`Cannot find data source settings for ${We}`);switch(Ge){case S.$.cloudAlerting:return{dataSourceUid:qt.uid,dataSourceName:We,expr:$t};case S.$.grafana:return{grafana_condition:{condition:ct,data:St,now:(0,U.lf)(Date.now())}};default:throw new Error(`Alert type ${Ge} not supported by preview.`)}}function Fe(Bt){switch(Bt.data.state){case I.Gu.Done:case I.Gu.Error:return!0;default:return!1}}function Ie(Bt){return{container:t.css`
      margin-top: ${Bt.spacing(2)};
      max-width: ${Bt.breakpoints.values.xxl}px;
    `}}var we=e(36894);const Re=()=>{const Bt=(0,f.wW)(_e),{register:Ge,control:We,watch:ct,formState:{errors:St}}=(0,c.Gc)();return ct("type")===S.$.cloudRecording?null:n.createElement(we.z,{stepNo:3,title:"Alert evaluation behavior"},n.createElement(o.g,{label:"For",description:"Expression has to be true for this long for the alert to be fired."},n.createElement("div",{className:Bt.flexRow},n.createElement(o.g,{invalid:!!St.forTime?.message,error:St.forTime?.message,className:Bt.inlineField},n.createElement(l.I,{...Ge("forTime",{pattern:{value:/^\d+$/,message:"Must be a positive integer."}}),width:8})),n.createElement(L.g,{name:"forTimeUnit",render:({field:{onChange:qt,ref:Yt,...Dn}})=>n.createElement(B.Ph,{...Dn,options:w.qr,onChange:Nn=>qt(Nn?.value),width:15,className:Bt.timeUnit}),control:We}))),n.createElement(He,null))},_e=Bt=>({inlineField:t.css`
    margin-bottom: 0;
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: flex-start;
  `,timeUnit:t.css`
    margin-left: ${Bt.spacing(.5)};
  `});var et=e(16808),qe=e(20700);const Je=({rulesSourceName:Bt})=>{const{control:Ge,watch:We,formState:{errors:ct},setValue:St}=(0,c.Gc)(),$t=(0,f.wW)(lt),qt=(0,C._)(_n=>_n.rulerRules),Yt=(0,P.useDispatch)();(0,n.useEffect)(()=>{Yt((0,b.UR)({rulesSourceName:Bt}))},[Bt,Yt]);const Dn=qt[Bt]?.result,Nn=We("namespace"),wn=(0,n.useMemo)(()=>Dn?Object.keys(Dn).map(_n=>({label:_n,value:_n})):[],[Dn]),Un=(0,n.useMemo)(()=>Nn&&Dn?.[Nn]?.map(_n=>({label:_n.name,value:_n.name}))||[],[Nn,Dn]);return n.createElement("div",{className:$t.flexRow},n.createElement(o.g,{"data-testid":"namespace-picker",label:"Namespace",error:ct.namespace?.message,invalid:!!ct.namespace?.message},n.createElement(L.g,{render:({field:{onChange:_n,ref:ns,...os}})=>n.createElement(B.LT,{...os,allowCustomValue:!0,className:$t.input,onChange:ks=>{St("group",""),_n(ks.value)},options:wn,width:42}),name:"namespace",control:Ge,rules:{required:{value:!0,message:"Required."},validate:{pathSeparator:qe.p0}}})),n.createElement(o.g,{"data-testid":"group-picker",label:"Group",error:ct.group?.message,invalid:!!ct.group?.message},n.createElement(L.g,{render:({field:{ref:_n,...ns}})=>n.createElement(B.LT,{...ns,allowCustomValue:!0,options:Un,width:42,onChange:os=>{St("group",os.value??"")},className:$t.input}),name:"group",control:Ge,rules:{required:{value:!0,message:"Required."},validate:{pathSeparator:qe.p0}}})))},lt=Bt=>({flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;

    & > * + * {
      margin-left: ${Bt.spacing(3)};
    }
  `,input:t.css`
    width: 330px !important;
  `});function at(){const{watch:Bt}=(0,c.Gc)(),Ge=Bt("type"),We=Bt("dataSourceName"),ct=Bt("type");return n.createElement(we.z,{stepNo:ct===S.$.cloudRecording?3:4,title:ct===S.$.cloudRecording?"Folder and group":"Add details for your alert rule",description:ct===S.$.cloudRecording?"Select the Namespace and Group for your recording rule":"Select the folder and evaluation group for your alert. Write a summary to help you better manage your alerts"},(Ge===S.$.cloudRecording||Ge===S.$.cloudAlerting)&&We&&n.createElement(Je,{rulesSourceName:We}),ct!==S.$.cloudRecording&&n.createElement(et.Z,null))}var Xe=e(56412),gt=e(72948),ot=e(29460),Ye=e(19191);const mt=()=>{const Bt=(0,f.wW)(be),{watch:Ge,getValues:We}=(0,c.Gc)(),ct=Ge("type"),St=Ge("dataSourceName")??re.GC,$t=ce(We("labels")).length>0;return n.createElement(we.z,{stepNo:ct===S.$.cloudRecording?4:5,title:ct===S.$.cloudRecording?"Labels":"Notifications",description:ct===S.$.cloudRecording?"Add labels to help you better manage your recording rules":"Grafana handles the notifications for alerts by assigning labels to alerts. These labels connect alerts to contact points and silence alert instances that have matching labels."},n.createElement("div",{className:Bt.contentWrapper},n.createElement("div",{style:{display:"flex",flexDirection:"column"}},!$t&&ct!==S.$.cloudRecording&&n.createElement(gt.Z,{className:Bt.card},n.createElement(gt.Z.Heading,null,"Root route \u2013 default for all alerts"),n.createElement(gt.Z.Description,null,"Without custom labels, your alert will be routed through the root route. To view and edit the root route, go to ",n.createElement(ot.r,{href:"/alerting/routes"},"notification policies")," or contact your admin in case you are using non-Grafana alert management.")),n.createElement(Ye.Z,{dataSourceName:St}))))};function ce(Bt){return Bt.filter(Ge=>Ge.key&&Ge.value)}const be=Bt=>({contentWrapper:t.css`
    display: flex;
    align-items: center;
  `,hideButton:t.css`
    color: ${Bt.colors.text.secondary};
    cursor: pointer;
    margin-bottom: ${Bt.spacing(1)};
  `,card:t.css`
    max-width: 500px;
  `,flowChart:t.css`
    margin-right: ${Bt.spacing(3)};
  `});var Te=e(20091),Ke=e(30979),ge=e(72142),Me=e(79841),ye=e(61860),fe=e(39904),he=e(9405),De=e(79662);const Ae=[{label:"Yaml",value:"yaml"}],Ne=({onClose:Bt})=>{const[Ge,We]=(0,n.useState)("yaml"),{setValue:ct}=(0,c.Gc)(),St=(0,f.wW)(bt),$t=qt=>{for(const Yt in qt)ct(Yt,qt[Yt]);Bt()};return n.createElement(Ke.d,{title:"Inspect Alert rule",subtitle:n.createElement("div",{className:St.subtitle},n.createElement(Ze,{setActiveTab:We,activeTab:Ge})),onClose:Bt},Ge==="yaml"&&n.createElement(Se,{onSubmit:$t}))},Ze=({activeTab:Bt,setActiveTab:Ge})=>n.createElement(ge.J,null,Ae.map((We,ct)=>n.createElement(Me.O,{key:`${We.value}-${ct}`,label:We.label,value:We.value,onChangeTab:()=>Ge(We.value),active:Bt===We.value}))),Se=({onSubmit:Bt})=>{const Ge=(0,f.wW)(pt),{getValues:We}=(0,c.Gc)(),ct=(0,x.yh)(We()),[St,$t]=(0,n.useState)((0,Te.$w)(ct)),qt=()=>{const Yt=(0,Te.zD)(St),Dn=We(),Nn=Qe(Yt);Bt({...Dn,...Nn})};return n.createElement(n.Fragment,null,n.createElement("div",{className:Ge.applyButton},n.createElement(m.zx,{type:"button",onClick:qt},"Apply"),n.createElement(ye.u,{content:n.createElement(Ue,null),theme:"info",placement:"left-start",interactive:!0},n.createElement(fe.J,{name:"exclamation-triangle",size:"xl"}))),n.createElement("div",{className:Ge.content},n.createElement(Q.Z,{disableWidth:!0},({height:Yt})=>n.createElement(he.p,{width:"100%",height:Yt,language:"yaml",value:St,onBlur:$t,monacoOptions:{minimap:{enabled:!1}}}))))};function Ue(){return n.createElement("div",null,"The YAML content in the editor only contains alert rule configuration ",n.createElement("br",null),"To configure Prometheus, you need to provide the rest of the"," ",n.createElement("a",{href:"https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/",target:"_blank",rel:"noreferrer"},"configuration file content."))}function Qe(Bt){return(0,De.cG)(Bt)?(0,x.WL)(Bt):(0,De.yF)(Bt)?(0,x.lN)(Bt):{}}const pt=Bt=>({content:t.css`
    flex-grow: 1;
    height: 100%;
    padding-bottom: 16px;
    margin-bottom: ${Bt.spacing(2)};
  `,applyButton:t.css`
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    flex-grow: 0;
    margin-bottom: ${Bt.spacing(2)};
  `}),bt=()=>({subtitle:t.css`
    display: flex;
    align-items: center;
    justify-content: space-between;
  `});var yt=e(68183),Mt=e(26418),At=e(75e3),Pt=e(81001),rn=e(82897),Fn=e(22350),kn=e(94929),Jn=e(40400),qn=e(34807);function Ut(Bt){return Object.entries(Bt).map(([Ge,We])=>`${Ge}=${We}`).sort()}var ut=e(45608),nt=e(46063);function vt({fields:Bt}){const Ge=Bt.filter(Yt=>!["State","Info"].includes(Yt.name)),We=Bt.findIndex(Yt=>Yt.name==="State"),ct=Bt.findIndex(Yt=>Yt.name==="Info"),St=Ge.map(Yt=>Bt.indexOf(Yt)),$t=Bt[We]?.values.length??0,qt=[];for(let Yt=0;Yt<$t;Yt++){const Dn=St.map(Un=>[Bt[Un].name,Bt[Un].values.get(Yt)]),Nn=Bt[We]?.values?.get(Yt),wn=Bt[ct]?.values?.get(Yt);(0,nt.Yb)(Nn)&&qt.push({state:Nn,info:wn,labels:Object.fromEntries(Dn)})}return{instances:qt}}function ht({preview:Bt}){const Ge=(0,f.wW)(It),We=vt(Bt);return n.createElement("table",{className:Ge.table},n.createElement("caption",null,n.createElement("div",null,"Alerts preview"),n.createElement("span",null,"Preview based on the result of running the query for this moment.")),n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"State"),n.createElement("th",null,"Labels"),n.createElement("th",null,"Info"))),n.createElement("tbody",null,We.instances.map(({state:ct,info:St,labels:$t},qt)=>{const Yt=Ut($t);return n.createElement("tr",{key:qt},n.createElement("td",null,n.createElement(ut.l,{state:ct})),n.createElement("td",null,n.createElement(qn.P,{tags:Yt,className:Ge.tagList})),n.createElement("td",null,St&&n.createElement(ye.u,{content:St},n.createElement(fe.J,{name:"info-circle"}))))})))}const It=Bt=>({table:t.css`
    width: 100%;
    margin: ${Bt.spacing(2,0)};

    caption {
      caption-side: top;
      color: ${Bt.colors.text.primary};

      & > span {
        font-size: ${Bt.typography.bodySmall.fontSize};
        color: ${Bt.colors.text.secondary};
      }
    }

    td,
    th {
      padding: ${Bt.spacing(1,1)};
    }

    td + td,
    th + th {
      padding-left: ${Bt.spacing(3)};
    }

    thead th {
      &:nth-child(1) {
        width: 80px;
      }

      &:nth-child(2) {
        width: auto;
      }

      &:nth-child(3) {
        width: 40px;
      }
    }

    td:nth-child(3) {
      text-align: center;
    }

    tbody tr:nth-child(2n + 1) {
      background-color: ${Bt.colors.background.secondary};
    }
  `,tagList:t.css`
    justify-content: flex-start;
  `}),Ft=({value:Bt,onChange:Ge,dataSourceName:We,showPreviewAlertsButton:ct=!0})=>{const St=(0,f.wW)(en),{mapToValue:$t,mapToQuery:qt}=sn(We),Yt=qt({refId:"A",hide:!1},Bt),{error:Dn,loading:Nn,value:wn}=(0,Fn.Z)(()=>(0,N.F)().get(We),[We]),Un=(0,n.useCallback)(Rs=>{Ge($t(Rs))},[Ge,$t]),[_n,ns]=ue(),os=async()=>{ns()};if(Nn||wn?.name!==We)return null;const ks=(0,N.F)().getInstanceSettings(We);if(Dn||!wn||!wn?.components?.QueryEditor||!ks){const Rs=Dn?.message||"Data source plugin does not export any Query Editor component";return n.createElement("div",null,"Could not load query editor due to: ",Rs)}const Aa=_n?.data.state===I.Gu.Done,Za=wn?.components?.QueryEditor,cs=_n?.data?.series?.find(Rs=>Rs.name==="evaluation results"),as=cs&&cs.fields.some(Rs=>Rs.values.length>0);return n.createElement(n.Fragment,null,n.createElement(kn.n,{instanceSettings:ks},n.createElement(Za,{query:Yt,queries:[Yt],app:Jn.zj.CloudAlerting,onChange:Un,onRunQuery:rn.noop,datasource:wn})),ct&&n.createElement("div",{className:St.preview},n.createElement(m.zx,{type:"button",onClick:os,disabled:_n?.data.state===I.Gu.Loading},"Preview alerts"),Aa&&!as&&n.createElement(F.b,{title:"Alerts preview",severity:"info",className:St.previewAlert},"There are no firing alerts for your query."),as&&n.createElement(ht,{preview:cs})))},en=Bt=>({preview:t.css`
    padding: ${Bt.spacing(2,0)};
    max-width: ${Bt.breakpoints.values.xl}px;
  `,previewAlert:t.css`
    margin: ${Bt.spacing(1,0)};
  `});function sn(Bt){return(0,n.useMemo)(()=>{switch((0,N.F)().getInstanceSettings(Bt)?.type){case"loki":case"prometheus":return{mapToValue:We=>We.expr,mapToQuery:(We,ct)=>({...We,expr:ct})};default:throw new Error(`${Bt} is not supported as an expression editor`)}},[Bt])}var Mn=e(76726);const En=({condition:Bt,onSetCondition:Ge,queries:We,panelData:ct,onUpdateRefId:St,onRemoveExpression:$t,onUpdateExpressionType:qt,onUpdateQueryExpression:Yt})=>{const Dn=(0,n.useMemo)(()=>We.reduce((Nn,wn)=>(0,At.j)(wn.model)?Nn.concat(wn.model):Nn,[]),[We]);return n.createElement(Mt.Stack,{direction:"row",alignItems:"stretch"},Dn.map(Nn=>{const wn=ct[Nn.refId],Un=Bt===Nn.refId,_n=Un&&wn?(0,qe.Vp)(wn.series):void 0,ns=Un&&wn?(0,qe.Yq)(wn.series):void 0;return n.createElement(Mn.A2,{key:Nn.refId,isAlertCondition:Un,data:wn,error:_n,warning:ns,queries:We,query:Nn,onSetCondition:Ge,onRemoveExpression:$t,onUpdateRefId:St,onUpdateExpressionType:qt,onChangeQuery:Yt})}))};var yn=e(19677),Bn=e(67254),ea=e(91162),Qn=e(19115),Kn=e(19426),Ua=e(36584),pa=e(37190),va=e(50362),za=e(60325),ja=e(97063);function Ea(Bt,Ge,We){const ct=(0,f.l4)();if(Ge===pa.GC||Ge===pa.Kd||ma(Bt))return 200;const St=Bt.series[We].fields[0].values.length,$t=ct.spacing.gridSize*5,qt=St*$t+$t;return qt>=200?200:qt}function ma(Bt){return!Bt||!Bt.series[0]||!Bt.series[0].fields[0]||!Bt.series[0].fields[0].values}var Xa=e(74542);const Oa=({data:Bt,currentPanel:Ge,changePanel:We,thresholds:ct,thresholdsType:St=X.i3.Line})=>{const[$t,qt]=(0,n.useState)({frameIndex:0,showHeader:!0}),Yt=Ea(Bt,Ge,$t.frameIndex),Dn=(0,f.wW)(ss(Yt)),[Nn,wn]=(0,n.useState)(Ss(Bt,ct));(0,n.useEffect)(()=>{wn(_n=>({..._n,defaults:{..._n.defaults,thresholds:ct,unit:Ks(Bt),custom:{..._n.defaults.custom,thresholdsStyle:{mode:St}}}}))},[ct,wn,Bt,St]);const Un=(0,n.useMemo)(()=>({eventBus:ja.Z,canEditThresholds:!1,showThresholds:!0}),[]);return!$t||!Bt?null:n.createElement("div",{className:Dn.wrapper},n.createElement("div",{className:Dn.buttonGroup},n.createElement(Xa.j,{onChange:We,value:Ge})),n.createElement(Q.Z,null,({width:_n})=>_n===0?null:n.createElement("div",{style:{height:`${Yt}px`,width:`${_n}px`}},n.createElement(za._w,{value:Un},n.createElement(q.$,{height:Yt,width:_n,data:Bt,pluginId:Ge,title:"title",onOptionsChange:qt,options:$t,fieldConfig:Nn})))))},ss=Bt=>Ge=>({wrapper:t.css`
    padding: 0 ${Ge.spacing(2)};
    height: ${Bt+Ge.spacing.gridSize*4}px;
  `,buttonGroup:t.css`
    display: flex;
    justify-content: flex-end;
  `});function Ks(Bt){return Bt.series[0]?.fields.find(Ge=>Ge.type==="number")?.config.unit}function Ss(Bt,Ge){return Ge?{defaults:{thresholds:Ge,unit:Ks(Bt),custom:{thresholdsStyle:{mode:X.i3.Line}}},overrides:[]}:{defaults:{},overrides:[]}}const Bs=43200,ls=({data:Bt,error:Ge,dsSettings:We,index:ct,onChangeDataSource:St,onChangeQuery:$t,onChangeTimeRange:qt,onRunQueries:Yt,onRemoveQuery:Dn,onDuplicateQuery:Nn,query:wn,queries:Un,thresholds:_n,thresholdsType:ns,onChangeThreshold:os,condition:ks,onSetCondition:Aa,onChangeQueryOptions:Za})=>{const cs=(0,f.wW)(Da),as=(0,At.j)(wn.model),[Rs,Ys]=(0,n.useState)(as?pa.Fe:pa.GC);function hr(){const Ns=(0,f.wW)(Da);return n.createElement("div",{className:Ns.dsTooltip},n.createElement(ye.u,{content:n.createElement(n.Fragment,null,"Not finding the data source you want? Some data sources are not supported for alerting. Click on the icon for more information.")},n.createElement(fe.J,{name:"info-circle",onClick:()=>window.open(" https://grafana.com/docs/grafana/latest/alerting/fundamentals/data-source-alerting/","_blank")})))}function kr({query:Ns,error:vr,index:wr}){const Yr={maxDataPoints:{maxDataPoints:Ns.model.maxDataPoints}.maxDataPoints};return(0,At.j)(Ns.model)?null:n.createElement(Mt.Stack,{direction:"row",alignItems:"baseline",gap:1},n.createElement(hr,null),qt&&n.createElement(Qn.x,{timeRange:Ns.relativeTimeRange??(0,ae.Rr)(),onChange:Ts=>qt(Ts,wr)}),n.createElement("div",{className:cs.queryOptions},n.createElement(qs,{options:Yr,onChange:Ts=>Za(Ts,wr)})),n.createElement(va._,{onSetCondition:()=>Aa(Ns.refId),enabled:ks===Ns.refId,error:vr}))}return n.createElement("div",{className:cs.wrapper},n.createElement(Ua.x,{alerting:!0,dataSource:We,onChangeDataSource:as?void 0:Ns=>St(Ns,ct),id:wn.refId,index:ct,key:wn.refId,data:Bt,query:(0,rn.cloneDeep)(wn.model),onChange:Ns=>$t(Ns,ct),onRemoveQuery:Dn,onAddQuery:()=>Nn((0,rn.cloneDeep)(wn)),onRunQuery:Yt,queries:Un,renderHeaderExtras:()=>n.createElement(kr,{query:wn,index:ct,error:Ge}),app:Jn.zj.UnifiedAlerting,visualization:Bt.state!==I.Gu.NotStarted?n.createElement(Oa,{data:Bt,changePanel:Ys,currentPanel:Rs,thresholds:_n,thresholdsType:ns,onThresholdsChange:os?Ns=>os(Ns,ct):void 0}):null,hideDisableQuery:!0}))},ws=({children:Bt})=>{const Ge=(0,f.wW)(Da);return n.createElement("div",{className:Ge.wrapper},Bt)};function qs({options:Bt,onChange:Ge}){const We=Bt.maxDataPoints??"",ct=St=>{const $t=parseInt(St.target.value,10),qt=isNaN($t)||$t===0?void 0:$t;qt!==Bt.maxDataPoints&&Ge({...Bt,maxDataPoints:qt})};return n.createElement(Mt.Stack,{direction:"row",alignItems:"baseline",gap:1},n.createElement(Kn.c,{width:8,tooltip:n.createElement(n.Fragment,null,"The maximum data points per series. Used directly by some data sources and used in calculation of auto interval. With streaming data this value is used for the rolling buffer.")},"Max data points"),n.createElement(l.I,{type:"number",className:"width-6",placeholder:Bs.toLocaleString(),spellCheck:!1,onBlur:ct,defaultValue:We}))}const Da=Bt=>({wrapper:t.css`
    label: AlertingQueryWrapper;
    margin-bottom: ${Bt.spacing(1)};
    border: 1px solid ${Bt.colors.border.medium};
    border-radius: ${Bt.shape.borderRadius(1)};
  `,queryOptions:t.css`
    margin-bottom: -${Bt.spacing(2)};
  `,dsTooltip:t.css`
    display: flex;
    align-items: center;
    &:hover {
      opacity: 0.85;
      cursor: pointer;
    }
  `});class Vs extends n.PureComponent{constructor(Ge){super(Ge),this.onRemoveQuery=We=>{const{queries:ct,onQueriesChange:St}=this.props;St(ct.filter($t=>$t.refId!==We.refId))},this.onChangeTimeRange=(We,ct)=>{const{queries:St,onQueriesChange:$t}=this.props;$t(St.map((qt,Yt)=>Yt!==ct?qt:{...qt,relativeTimeRange:We}))},this.onChangeQueryOptions=(We,ct)=>{const{queries:St,onQueriesChange:$t}=this.props;$t(St.map((qt,Yt)=>Yt!==ct?qt:{...qt,model:{...qt.model,maxDataPoints:We.maxDataPoints}}))},this.onChangeDataSource=(We,ct)=>{const{queries:St,onQueriesChange:$t}=this.props,qt=St.map((Yt,Dn)=>{if(Dn!==ct)return Yt;const Nn=this.getDataSourceSettings(Yt);return We.type===Nn?.type?Es(Yt,We):er(Yt,We)});$t(qt)},this.onChangeQuery=(We,ct)=>{const{queries:St,onQueriesChange:$t}=this.props;$t(St.map((qt,Yt)=>Yt!==ct?qt:{...qt,refId:We.refId,queryType:qt.model.queryType??"",model:{...qt.model,...We,datasource:We.datasource}}))},this.onDragEnd=We=>{const{queries:ct,onQueriesChange:St}=this.props;if(!We||!We.destination)return;const $t=We.source.index,qt=We.destination.index;if($t===qt)return;const Yt=Array.from(ct),[Dn]=Yt.splice($t,1);Yt.splice(qt,0,Dn),St(Yt)},this.getDataSourceSettings=We=>(0,N.F)().getInstanceSettings(We.datasourceUid)}render(){const{queries:Ge,expressions:We}=this.props,ct=(0,qe.Fu)([...Ge,...We]);return n.createElement(yn.Z5,{onDragEnd:this.onDragEnd},n.createElement(yn.bK,{droppableId:"alerting-queries",direction:"vertical"},St=>n.createElement("div",{ref:St.innerRef,...St.droppableProps},Ge.map(($t,qt)=>{const Yt=this.props.data?.[$t.refId]??{series:[],state:I.Gu.NotStarted},Dn=this.getDataSourceSettings($t),wn=this.props.condition===$t.refId?(0,qe.Vp)(Yt.series):void 0;return Dn?n.createElement(ls,{index:qt,key:$t.refId,dsSettings:Dn,data:Yt,error:wn,query:$t,onChangeQuery:this.onChangeQuery,onRemoveQuery:this.onRemoveQuery,queries:Ge,onChangeDataSource:this.onChangeDataSource,onDuplicateQuery:this.props.onDuplicateQuery,onChangeTimeRange:this.onChangeTimeRange,onChangeQueryOptions:this.onChangeQueryOptions,thresholds:ct[$t.refId]?.config,thresholdsType:ct[$t.refId]?.mode,onRunQueries:this.props.onRunQueries,condition:this.props.condition,onSetCondition:this.props.onSetCondition}):n.createElement(dr,{key:`${$t.refId}-${qt}`,index:qt,model:$t.model,onUpdateDatasource:()=>{const Un=(0,ea.ak)().getInstanceSettings(null);Un&&this.onChangeDataSource(Un,qt)},onRemoveQuery:()=>{this.onRemoveQuery($t)}})}),St.placeholder)))}}function Es(Bt,Ge){return{...Bt,model:{...(0,rn.omit)(Bt.model,"datasource"),datasource:{type:Ge.type,uid:Ge.uid}},datasourceUid:Ge.uid}}function er(Bt,Ge){return{refId:Bt.refId,relativeTimeRange:Bt.relativeTimeRange,queryType:"",datasourceUid:Ge.uid,model:{refId:Bt.refId,hide:!1,datasource:{type:Ge.type,uid:Ge.uid}}}}const dr=({index:Bt,onUpdateDatasource:Ge,onRemoveQuery:We,model:ct})=>{const St=ct.refId,[$t,qt]=(0,n.useState)(!1),Yt=()=>{qt(Nn=>!Nn)},Dn=()=>{Ge()};return n.createElement(ws,null,n.createElement(Bn.t,{title:St,draggable:!0,index:Bt,id:St,isOpen:!0},n.createElement(gt.Z,null,n.createElement(gt.Z.Heading,null,"This datasource has been removed"),n.createElement(gt.Z.Description,null,"The datasource for this query was not found, it was either removed or is not installed correctly."),n.createElement(gt.Z.Figure,null,n.createElement(fe.J,{name:"question-circle"})),n.createElement(gt.Z.Actions,null,n.createElement(m.zx,{key:"update",variant:"secondary",onClick:Dn},"Update datasource"),n.createElement(m.zx,{key:"remove",variant:"destructive",onClick:We},"Remove query")),n.createElement(gt.Z.SecondaryActions,null,n.createElement(m.zx,{key:"details",onClick:Yt,icon:$t?"angle-up":"angle-down",fill:"text",size:"sm"},"Show details"))),$t&&n.createElement("div",null,n.createElement("pre",null,n.createElement("code",null,JSON.stringify(ct,null,2))))))},es=({queries:Bt,expressions:Ge,panelData:We,onRunQueries:ct,onChangeQueries:St,onDuplicateQuery:$t,condition:qt,onSetCondition:Yt})=>{const Dn=(0,f.wW)(tr);return n.createElement("div",{className:Dn.container},n.createElement(Vs,{data:We,queries:Bt,expressions:Ge,onRunQueries:ct,onQueriesChange:St,onDuplicateQuery:$t,condition:qt,onSetCondition:Yt}))},tr=Bt=>({container:t.css`
    background-color: ${Bt.colors.background.primary};
    height: 100%;
    max-width: ${Bt.breakpoints.values.xxl}px;
  `});var Is=e(82002),ts=e(53117),Zs=e(3153);function Xt(){const Bt=(0,C._)(We=>We.dataSources);return Object.values(Bt).map(We=>We.result).filter(We=>Boolean(We?.rulerConfig)).map(We=>(0,re.c$)(We.name)).filter(We=>Boolean(We))}function kt({value:Bt,...Ge}){const We=Xt(),{loading:ct=!0}=(0,Fn.Z)(()=>(0,Zs.WI)((0,b.dV)()),[Zs.WI]),St=(0,n.useCallback)($t=>!!We.find(({id:qt})=>qt===$t.id),[We]);return n.createElement(ts.q,{disabled:ct,isLoading:ct,noDefault:!0,alerting:!0,filter:St,current:Bt,...Ge})}const vn=Bt=>{const{name:Ge,description:We,image:ct,selected:St=!1,value:$t,onClick:qt,disabled:Yt=!1}=Bt,Dn=(0,f.wW)(An),Nn=(0,t.cx)({[Dn.wrapper]:!0,[Dn.disabled]:Yt});return n.createElement(gt.Z,{className:Nn,isSelected:St,onClick:()=>qt($t),disabled:Yt},n.createElement(gt.Z.Figure,null,n.createElement("img",{src:ct,alt:""})),n.createElement(gt.Z.Heading,null,Ge),n.createElement(gt.Z.Description,null,We))},An=Bt=>({wrapper:t.css`
    width: 380px;
    cursor: pointer;
    user-select: none;
  `,disabled:t.css`
    opacity: 0.5;
  `}),Wn=({selected:Bt=!1,disabled:Ge,onClick:We})=>n.createElement(vn,{name:"Grafana managed alert",description:n.createElement("span",null,"Supports multiple data sources of any kind.",n.createElement("br",null),"Transform data with expressions."),image:"public/img/grafana_icon.svg",selected:Bt,disabled:Ge,value:S.$.grafana,onClick:We}),Xn=({children:Bt,visible:Ge=!1})=>Ge?n.createElement(ye.u,{content:"You do not appear to have any compatible datasources.",placement:"top"},n.createElement("div",null,Bt)):n.createElement(n.Fragment,null,Bt),Ha=({selected:Bt=!1,disabled:Ge=!1,onClick:We})=>n.createElement(Xn,{visible:Ge},n.createElement(vn,{name:"Mimir or Loki alert",description:n.createElement("span",null,"Use a Mimir, Loki or Cortex datasource.",n.createElement("br",null),"Expressions are not supported."),image:"public/img/alerting/mimir_logo.svg",selected:Bt,disabled:Ge,value:S.$.cloudAlerting,onClick:We})),Qa=({selected:Bt=!1,disabled:Ge=!1,onClick:We})=>n.createElement(Xn,{visible:Ge},n.createElement(vn,{name:"Mimir or Loki recording rule",description:n.createElement("span",null,"Precompute expressions.",n.createElement("br",null),"Should be combined with an alert rule."),image:"public/img/alerting/mimir_logo_recording.svg",selected:Bt,disabled:Ge,value:S.$.cloudRecording,onClick:We})),ka=({selected:Bt,onChange:Ge,enabledTypes:We})=>{const ct=Xt(),St=!(0,rn.isEmpty)(ct);(0,n.useEffect)(()=>{(0,Zs.WI)((0,b.dV)())},[]);const $t=(0,f.wW)(ys);return n.createElement(n.Fragment,null,n.createElement(Mt.Stack,{direction:"row",gap:2},We.includes(S.$.grafana)&&n.createElement(Wn,{selected:Bt===S.$.grafana,onClick:Ge}),We.includes(S.$.cloudAlerting)&&n.createElement(Ha,{selected:Bt===S.$.cloudAlerting,onClick:Ge,disabled:!St}),We.includes(S.$.cloudRecording)&&n.createElement(Qa,{selected:Bt===S.$.cloudRecording,onClick:Ge,disabled:!St})),We.includes(S.$.grafana)&&n.createElement("small",{className:$t.meta},"Select \u201CGrafana managed\u201D unless you have a Mimir, Loki or Cortex data source with the Ruler API enabled."))},ys=Bt=>({meta:t.css`
    color: ${Bt.colors.text.disabled};
  `}),xs=({editingExistingRule:Bt})=>{const{enabledRuleTypes:Ge,defaultRuleType:We}=Ga(),{control:ct,formState:{errors:St},getValues:$t,setValue:qt,watch:Yt}=(0,c.Gc)(),Dn=(0,f.wW)(or),Nn=Yt("type");return n.createElement(n.Fragment,null,!Bt&&n.createElement(o.g,{error:St.type?.message,invalid:!!St.type?.message,"data-testid":"alert-type-picker"},n.createElement(L.g,{render:({field:{onChange:wn}})=>n.createElement(ka,{"aria-label":"Rule type",selected:$t("type")??We,onChange:wn,enabledTypes:Ge}),name:"type",control:ct,rules:{required:{value:!0,message:"Please select alert type"}}})),n.createElement("div",{className:Dn.flexRow},(Nn===S.$.cloudRecording||Nn===S.$.cloudAlerting)&&n.createElement(o.g,{className:Dn.formInput,label:"Select data source",error:St.dataSourceName?.message,invalid:!!St.dataSourceName?.message,"data-testid":"datasource-picker"},n.createElement(L.g,{render:({field:{onChange:wn,ref:Un,..._n}})=>n.createElement(kt,{..._n,onChange:ns=>{qt("location",void 0),wn(ns?.name??null)}}),name:"dataSourceName",control:ct,rules:{required:{value:!0,message:"Please select a data source"}}}))))};function Ga(){const Bt=Is.Vt.hasAccess(P.AccessControlAction.AlertingRuleCreate,Is.Vt.hasEditPermissionInFolders),Ge=Is.Vt.hasAccess(P.AccessControlAction.AlertingRuleExternalWrite,Is.Vt.isEditor),We=Bt?S.$.grafana:S.$.cloudAlerting,ct=[];return Bt&&ct.push(S.$.grafana),Ge&&ct.push(S.$.cloudAlerting,S.$.cloudRecording),{enabledRuleTypes:ct,defaultRuleType:We}}const or=Bt=>({formInput:t.css`
    width: 330px;
    & + & {
      margin-left: ${Bt.spacing(3)};
    }
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: flex-end;
  `});var bs=e(32557),ur=e(99822),mr=e(97573);const Sr=Bt=>{try{return JSON.stringify(Bt),!1}catch{return!0}},Wr=(Bt,Ge)=>{if(Sr(Bt))return null;if(Ge.datasourceUid!==mr.Yq)return Ge;{const We=Bt.find(ct=>ct.refId===Ge.model.expression);return We?Wr(Bt,We):null}};var ms=e(47471),Mr=e(51935);const ir=(Bt,Ge)=>{const We=Bt.find(St=>St.refId===Ge);return We&&Wr(Bt,We)},tn={queries:[]},pr=(0,bs.PH)("duplicateQuery"),$r=(0,bs.PH)("addNewDataQuery"),Br=(0,bs.PH)("setDataQueries"),it=(0,bs.PH)("addNewExpression"),Dt=(0,bs.PH)("removeExpression"),Lt=(0,bs.PH)("updateExpression"),Gt=(0,bs.PH)("updateExpressionRefId"),Zt=(0,bs.PH)("rewireExpressions"),cn=(0,bs.PH)("updateExpressionType"),hn=(0,bs.PH)("updateExpressionTimeRange"),Tn=(0,bs.PH)("updateMaxDataPoints"),fn=(0,bs.Lq)(tn,Bt=>{Bt.addCase(pr,(Ge,{payload:We})=>{Ge.queries=Rt(Ge.queries,We)}).addCase($r,Ge=>{const We=(0,re.P)();We&&(Ge.queries=Rt(Ge.queries,{datasourceUid:We.uid,model:{refId:"",datasource:{type:We.type,uid:We.uid}}}))}).addCase(Br,(Ge,{payload:We})=>{const ct=Ge.queries.filter(St=>(0,At.j)(St.model));Ge.queries=[...We,...ct]}).addCase(Tn,(Ge,We)=>{Ge.queries=Ge.queries.map(ct=>ct.refId===We.payload.refId?{...ct,model:{...ct.model,maxDataPoints:We.payload.maxDataPoints}}:ct)}),Bt.addCase(it,Ge=>{Ge.queries=Rt(Ge.queries,{datasourceUid:mr.Yq,model:ms.mV.newQuery({type:mr.Us.math,conditions:[{...Mr.R,query:{params:[]}}],expression:""})})}).addCase(Dt,(Ge,{payload:We})=>{Ge.queries=Ge.queries.filter(ct=>ct.refId!==We)}).addCase(Lt,(Ge,{payload:We})=>{Ge.queries=Ge.queries.map(ct=>{const St=ir(Ge.queries,We.expression),$t=St?St.relativeTimeRange:(0,ae.Rr)();return ct.refId===We.refId&&(ct.model=We,We.type===mr.Us.resample&&(ct.relativeTimeRange=$t)),ct})}).addCase(hn,Ge=>{const We=Ge.queries.map(ct=>{if(ct.datasourceUid===mr.Yq){const St=ir(Ge.queries,ct.model.expression),$t=St?St.relativeTimeRange:(0,ae.Rr)();ct.relativeTimeRange=$t}return ct});Ge.queries=We}).addCase(Gt,(Ge,{payload:We})=>{const{newRefId:ct,oldRefId:St}=We;if((0,qe.Dr)(Ge.queries,ct))return;const qt=(0,qe.Ry)(Ge.queries,St,ct);Ge.queries=qt.map(Yt=>Yt.refId===St?{...Yt,refId:ct,model:{...Yt.model,refId:ct}}:Yt)}).addCase(Zt,(Ge,{payload:We})=>{Ge.queries=(0,qe.Ry)(Ge.queries,We.oldRefId,We.newRefId)}).addCase(cn,(Ge,We)=>{Ge.queries=Ge.queries.map(ct=>ct.refId===We.payload.refId?{...ct,model:{...ms.mV.newQuery({type:We.payload.type,conditions:[{...Mr.R,query:{params:[]}}],expression:""}),refId:We.payload.refId}}:ct)})}),Rt=(Bt,Ge)=>{const We=(0,ur.Hs)(Bt),ct={...Ge,refId:We,queryType:"",model:{...Ge.model,hide:!1,refId:We},relativeTimeRange:Ge.relativeTimeRange??ya(Ge.model)};return[...Bt,ct]},ya=Bt=>{if(!(0,At.j)(Bt))return(0,ae.Rr)()},Sa=({editingExistingRule:Bt,onDataChange:Ge})=>{const We=(0,n.useRef)(new Pt.v),{setValue:ct,getValues:St,watch:$t,formState:{errors:qt},control:Yt}=(0,c.Gc)(),[Dn,Nn]=(0,n.useState)({}),wn={queries:St("queries"),panelData:{}},[{queries:Un},_n]=(0,n.useReducer)(fn,wn),[ns,os,ks]=$t(["type","condition","dataSourceName"]),Aa=ns===S.$.grafana,Za=ns===S.$.cloudAlerting,cs=ns===S.$.cloudRecording,as=(cs||Za)&&ks,Rs=(0,n.useCallback)(()=>{We.current.cancel()},[]),Ys=(0,n.useCallback)(()=>{We.current.run(St("queries"))},[St]);(0,n.useEffect)(()=>{ct("queries",Un,{shouldValidate:!1})},[Un,Ys,ct]),(0,n.useEffect)(()=>{const ds=We.current;return We.current.get().subscribe(nr=>{Nn(nr)}),()=>ds.destroy()},[]);const hr=(0,re.P)()===void 0,kr=(0,n.useMemo)(()=>Object.values(Dn).some(ds=>ds.state===I.Gu.Loading),[Dn]),Ns=(0,n.useMemo)(()=>Un.filter(ds=>!(0,At.j)(ds.model)),[Un]),vr=(0,n.useMemo)(()=>Un.filter(ds=>(0,At.j)(ds.model)),[Un]),wr=Un.length===0;(0,n.useEffect)(()=>{const ds=St("condition");if(!ds)return;const nr=(0,qe.Vp)(Dn[ds]?.series||[]);Ge(nr?.message||"")},[Dn,St,Ge]);const Nr=(0,n.useCallback)(ds=>{ds&&(Ys(),ct("condition",ds))},[Ys,ct]),Yr=(0,n.useCallback)((ds,nr)=>{(0,qe.Dr)(Un,nr)||(_n(Gt({oldRefId:ds,newRefId:nr})),os===ds&&Nr(nr))},[os,Un,Nr]),Ts=(0,n.useCallback)(ds=>{_n(Br(ds)),_n(hn()),ds.forEach((nr,Bo)=>{const Oo=Un[Bo].refId,gi=nr.refId;Oo!==gi&&_n(Zt({oldRefId:Oo,newRefId:gi}))})},[Un]),To=(0,n.useCallback)(ds=>{_n(pr(ds))},[]);return(0,n.useEffect)(()=>{if(!(0,qe.Dr)(Un,os)){const ds=Un.at(-1)?.refId??null;Nr(ds)}},[os,Un,Nr]),n.createElement(we.z,{stepNo:2,title:"Set a query and alert condition"},n.createElement(xs,{editingExistingRule:Bt}),as&&n.createElement(o.g,{error:qt.expression?.message,invalid:!!qt.expression?.message},n.createElement(L.g,{name:"expression",render:({field:{ref:ds,...nr}})=>n.createElement(Ft,{...nr,dataSourceName:ks,showPreviewAlertsButton:!cs}),control:Yt,rules:{required:{value:!0,message:"A valid expression is required"}}})),Aa&&n.createElement(Mt.Stack,{direction:"column"},n.createElement(es,{queries:Ns,expressions:vr,onRunQueries:Ys,onChangeQueries:Ts,onDuplicateQuery:To,panelData:Dn,condition:os,onSetCondition:Nr}),n.createElement(En,{queries:Un,panelData:Dn,condition:os,onSetCondition:Nr,onRemoveExpression:ds=>{_n(Dt(ds))},onUpdateRefId:Yr,onUpdateExpressionType:(ds,nr)=>{_n(cn({refId:ds,type:nr}))},onUpdateQueryExpression:ds=>{_n(Lt(ds))}}),n.createElement(Mt.Stack,{direction:"row"},n.createElement(ye.u,{content:"You appear to have no compatible data sources",show:hr},n.createElement(m.zx,{type:"button",icon:"plus",onClick:()=>{_n($r())},variant:"secondary","aria-label":yt.wl.components.QueryTab.addQuery,disabled:hr},"Add query")),r.v.expressionsEnabled&&n.createElement(m.zx,{type:"button",icon:"plus",onClick:()=>{_n(it())},variant:"secondary"},"Add expression"),kr&&n.createElement(m.zx,{icon:"fa fa-spinner",type:"button",variant:"destructive",onClick:Rs},"Cancel"),!kr&&n.createElement(m.zx,{icon:"sync",type:"button",onClick:()=>Ys(),disabled:wr},"Preview")),wr&&n.createElement(F.b,{title:"No queries or expressions have been configured",severity:"warning"},"Create at least one query or expression to be alerted on")))},Ca={message:"Recording rule name must be valid metric name. It may only contain letters, numbers, and colons. It may not contain whitespace.",value:/^[a-zA-Z_:][a-zA-Z0-9_:]*$/},wa=()=>{const Bt=(0,f.wW)(_a),{register:Ge,watch:We,formState:{errors:ct}}=(0,c.Gc)(),St=We("type");return n.createElement(we.z,{stepNo:1,title:"Set an alert rule name"},n.createElement(o.g,{className:Bt.formInput,label:"Rule name",description:"Name for the alert rule.",error:ct?.name?.message,invalid:!!ct.name?.message},n.createElement(l.I,{id:"name",...Ge("name",{required:{value:!0,message:"Must enter an alert name"},pattern:St===S.$.cloudRecording?Ca:void 0}),placeholder:"Give your alert rule a name."})))},rs="1m",Fa=({existing:Bt,prefill:Ge})=>{const We=(0,f.wW)(_a),ct=(0,P.useDispatch)(),St=(0,y.iG)(),[$t]=(0,u.K)(),[qt,Yt]=(0,n.useState)(!1),[Dn,Nn]=(0,n.useState)(Bt?.group.interval??rs),wn=$t.returnTo??"/alerting/list",[Un,_n]=(0,n.useState)(!1),ns=(0,n.useMemo)(()=>Bt?(0,x.DQ)(Bt):Ge?{...(0,x.uZ)(),...Ge}:{...(0,x.uZ)(),queries:(0,x.s0)(),condition:"C",...$t.defaults?JSON.parse($t.defaults):{},type:S.$.grafana,evaluateEvery:Dn},[Bt,Ge,$t,Dn]),os=(0,c.cI)({mode:"onSubmit",defaultValues:ns,shouldFocusError:!0}),{handleSubmit:ks,watch:Aa}=os,Za=Aa("type"),cs=Aa("dataSourceName"),as=Boolean(Za&&(Za===S.$.grafana||!!cs)),Rs=(0,C._)(Ts=>Ts.ruleForm.saveRule)||M.oq;(0,i.x)(Ts=>Ts.unifiedAlerting.ruleForm.saveRule=M.oq);const[Ys,hr]=(0,n.useState)(""),kr=(Ts="")=>{hr(Ts)},Ns=(Ts,To)=>{if(Ys!==""){St.error(Ys);return}ct((0,b.wy)({values:{...ns,...Ts,annotations:Ts.annotations?.map(({key:ds,value:nr})=>({key:ds.trim(),value:nr.trim()})).filter(({key:ds,value:nr})=>!!ds&&!!nr)??[],labels:Ts.labels?.map(({key:ds,value:nr})=>({key:ds.trim(),value:nr.trim()})).filter(({key:ds})=>!!ds)??[]},existing:Bt,redirectOnSave:To?wn:void 0,initialAlertRuleName:ns.name,evaluateEvery:Dn}))},vr=()=>{if(Bt){const Ts=O.Zk(Bt.ruleSourceName,Bt.namespace,Bt.group.name,Bt.rule);ct((0,b.hS)(Ts,{navigateTo:"/alerting/list"}))}},wr=Ts=>{Bt||(0,E.Z0)({grafana_version:r.v.buildInfo.version,org_id:v.Vt.user.orgId,user_id:v.Vt.user.id,error:Object.keys(Ts).toString()}),St.error("There are errors in the form. Please correct them and try again!")},Nr=()=>{(0,g.PN)(E.z7.cancelSavingAlertRule),Bt||(0,E.Hc)({grafana_version:r.v.buildInfo.version,org_id:v.Vt.user.orgId,user_id:v.Vt.user.id})},Yr=Aa("evaluateEvery");return(0,n.useEffect)(()=>Nn(Yr),[Yr]),n.createElement(c.RV,{...os},n.createElement("form",{onSubmit:Ts=>Ts.preventDefault(),className:We.form},n.createElement(a.Lh,{height:"auto",justify:"flex-end"},n.createElement(s.Link,{to:wn},n.createElement(m.zx,{variant:"secondary",disabled:Rs.loading,type:"button",fill:"outline",onClick:Nr},"Cancel")),Bt?n.createElement(m.zx,{variant:"destructive",type:"button",onClick:()=>_n(!0)},"Delete"):null,zs(Aa)&&n.createElement(m.zx,{variant:"secondary",type:"button",onClick:()=>Yt(!0),disabled:Rs.loading},"Edit yaml"),n.createElement(m.zx,{variant:"primary",type:"button",onClick:ks(Ts=>Ns(Ts,!1),wr),disabled:Rs.loading},Rs.loading&&n.createElement(d.$,{className:We.buttonSpinner,inline:!0}),"Save"),n.createElement(m.zx,{variant:"primary",type:"button",onClick:ks(Ts=>Ns(Ts,!0),wr),disabled:Rs.loading},Rs.loading&&n.createElement(d.$,{className:We.buttonSpinner,inline:!0}),"Save and exit")),n.createElement("div",{className:We.contentOuter},n.createElement(p.$,{autoHeightMin:"100%",hideHorizontalTrack:!0},n.createElement("div",{className:We.contentInner},n.createElement(wa,null),n.createElement(Sa,{editingExistingRule:!!Bt,onDataChange:kr}),as&&n.createElement(n.Fragment,null,Za===S.$.grafana?n.createElement(Xe.wO,{initialFolder:ns.folder,evaluateEvery:Dn,setEvaluateEvery:Nn,existing:Boolean(Bt)}):n.createElement(Re,null),n.createElement(at,null),n.createElement(mt,null)))))),Un?n.createElement(h.s,{isOpen:!0,title:"Delete rule",body:"Deleting this rule will permanently remove it. Are you sure you want to delete this rule?",confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:vr,onDismiss:()=>_n(!1)}):null,qt?n.createElement(Ne,{onClose:()=>Yt(!1)}):null)},zs=Bt=>{const[Ge,We]=Bt(["type","dataSourceName"]);return(Ge===S.$.cloudAlerting||Ge===S.$.cloudRecording)&&We!==""},_a=Bt=>({buttonSpinner:t.css`
      margin-right: ${Bt.spacing(1)};
    `,form:t.css`
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
    `,contentInner:t.css`
      flex: 1;
      padding: ${Bt.spacing(2)};
    `,contentOuter:t.css`
      background: ${Bt.colors.background.primary};
      border: 1px solid ${Bt.colors.border.weak};
      border-radius: ${Bt.shape.borderRadius()};
      overflow: hidden;
      flex: 1;
      margin-top: ${Bt.spacing(1)};
    `,flexRow:t.css`
      display: flex;
      flex-direction: row;
      justify-content: flex-start;
    `,formInput:t.css`
      width: 275px;

      & + & {
        margin-left: ${Bt.spacing(3)};
      }
    `})},16808:(H,T,e)=>{"use strict";e.d(T,{Z:()=>I});var t=e(52423),n=e(64421),c=e(68404),s=e(59052),r=e(86253),g=e(26418),f=e(72648),o=e(64353),l=e(46967),a=e(97379),m=e(24799),d=e(63619),p=e(31403),h=e(37190),y=e(53217);const v=({value:N,onChange:F,options:D,className:Y,placeholder:j,width:K,custom:z,onCustomChange:Z,disabled:ae=!1,addLabel:J="+ Add new","aria-label":oe,getOptionLabel:Ee})=>{const[me,re]=(0,c.useState)(z);(0,c.useEffect)(()=>{re(z)},[z]);const le=(0,c.useMemo)(()=>[...D,{value:"__add__",label:J}],[D,J]),pe=(0,c.useRef)(null);return(0,c.useEffect)(()=>{pe.current&&me&&pe.current.focus()},[me]),me?c.createElement(l.I,{"aria-label":oe,width:K,autoFocus:!z,value:N||"",placeholder:j,className:Y,disabled:ae,ref:pe,onChange:ee=>F(ee.currentTarget.value)}):c.createElement(y.Ph,{"aria-label":oe,width:K,options:le,value:N,className:Y,placeholder:j,getOptionLabel:Ee,disabled:ae,onChange:ee=>{const se=ee?.value;se==="__add__"?(re(!0),Z&&Z(!0),F("")):F(se)}})},i=({value:N,existingKeys:F,"aria-label":D,...Y})=>{const j=(0,c.useMemo)(()=>Object.values(h.q6).filter(K=>!F.includes(K)).map(K=>({value:K,label:h.vY[K]})),[F]);return c.createElement(v,{"aria-label":D,value:N,options:j,custom:!!N&&!Object.values(h.q6).includes(N),...Y})};var u=e(70197),P=e(89050),E=e(75478),C=e(39904),b=e(35029),S=e(45253),M=e(14747),x=e(61744),O=e(29427);const L=O.C.injectEndpoints({endpoints:N=>({search:N.query({query:({query:F})=>{const D=new URLSearchParams({type:"dash-db",limit:"1000",page:"1",sort:"name_sort"});return F&&D.set("query",F),{url:`/api/search?${D.toString()}`}}}),dashboard:N.query({query:({uid:F})=>({url:`/api/dashboards/uid/${F}`})})})});function B(N,F){return N.title&&F.title?N.title.localeCompare(F.title):N.title&&!F.title?1:!N.title&&F.title?-1:0}const w=({dashboardUid:N,panelId:F,isOpen:D,onChange:Y,onDismiss:j})=>{const K=(0,f.wW)(R),[z,Z]=(0,c.useState)(N),[ae,J]=(0,c.useState)(F),[oe,Ee]=(0,c.useState)(""),[me,re]=(0,c.useState)(""),[le,pe]=(0,c.useState)(""),{useSearchQuery:ee,useDashboardQuery:se}=L,{currentData:Q=[],isFetching:G}=ee({query:me}),{currentData:q,isFetching:X}=se({uid:z??""},{skip:!z}),de=(0,c.useCallback)(Re=>{Z(Re),J(void 0)},[]),Be=q?.dashboard?.panels?.filter(Re=>typeof Re.id=="number")?.filter(Re=>Re.title?.toLowerCase().includes(le.toLowerCase())).sort(B)??[],ke=q?.dashboard?.panels?.find(Re=>Re.id.toString()===ae),He=(0,c.useMemo)(()=>Q.map(Re=>Re.uid).indexOf(z??""),[Q,z]),ue=N&&N===z,Oe=He>=0,Fe=(0,c.useCallback)(Re=>{const _e=He>=0;ue&&_e&&Re?.scrollToItem(He,"smart")},[ue,He]);(0,u.Z)(()=>{re(oe)},500,[oe]);const Ie=({index:Re,style:_e})=>{const et=Q[Re],qe=z===et.uid;return c.createElement("div",{title:et.title,style:_e,className:(0,t.cx)(K.row,{[K.rowOdd]:Re%2===1,[K.rowSelected]:qe}),onClick:()=>de(et.uid)},c.createElement("div",{className:K.dashboardTitle},et.title),c.createElement("div",{className:K.dashboardFolder},c.createElement(C.J,{name:"folder"})," ",et.folderTitle??"General"))},we=({index:Re,style:_e})=>{const et=Be[Re],qe=ae===et.id.toString();return c.createElement("div",{style:_e,className:(0,t.cx)(K.row,{[K.rowOdd]:Re%2===1,[K.rowSelected]:qe}),onClick:()=>J(et.id.toString())},et.title||"<No title>")};return c.createElement(b.u,{title:"Select dashboard and panel",closeOnEscape:!0,isOpen:D,onDismiss:j,className:K.modal,contentClassName:K.modalContent},!Oe&&N&&c.createElement(S.b,{title:"Current selection",severity:"info",topSpacing:0,bottomSpacing:1,className:K.modalAlert},c.createElement("div",null,"Dashboard: ",q?.dashboard.title," (",q?.dashboard.uid,") in folder"," ",q?.meta.folderTitle??"General"),Boolean(ke)&&c.createElement("div",null,"Panel: ",ke.title," (",ke.id,")")),c.createElement("div",{className:K.container},c.createElement(M.H,{value:oe,onChange:Ee,title:"Search dashboard",placeholder:"Search dashboard",autoFocus:!0}),c.createElement(M.H,{value:le,onChange:pe,title:"Search panel",placeholder:"Search panel"}),c.createElement("div",{className:K.column},G&&c.createElement(x.u,{text:"Loading dashboards...",className:K.loadingPlaceholder}),!G&&c.createElement(P.Z,null,({height:Re,width:_e})=>c.createElement(E.t7,{ref:Fe,itemSize:50,height:Re,width:_e,itemCount:Q.length},Ie))),c.createElement("div",{className:K.column},!N&&!X&&c.createElement("div",null,"Select a dashboard to get a list of available panels"),X&&c.createElement(x.u,{text:"Loading dashboard...",className:K.loadingPlaceholder}),!X&&c.createElement(P.Z,null,({width:Re,height:_e})=>c.createElement(E.t7,{itemSize:32,height:_e,width:Re,itemCount:Be.length},we)))),c.createElement(b.u.ButtonRow,null,c.createElement(p.zx,{type:"button",variant:"secondary",onClick:j},"Cancel"),c.createElement(p.zx,{type:"button",variant:"primary",disabled:!(z&&ae),onClick:()=>{z&&ae&&Y(z,ae)}},"Confirm")))},R=N=>({container:t.css`
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: min-content auto;
    gap: ${N.spacing(2)};
    flex: 1;
  `,column:t.css`
    flex: 1 1 auto;
  `,dashboardTitle:t.css`
    height: 22px;
    font-weight: ${N.typography.fontWeightBold};
  `,dashboardFolder:t.css`
    height: 20px;
    font-size: ${N.typography.bodySmall.fontSize};
    color: ${N.colors.text.secondary};
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    column-gap: ${N.spacing(1)};
    align-items: center;
  `,row:t.css`
    padding: ${N.spacing(.5)};
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    cursor: pointer;
    border: 2px solid transparent;
  `,rowSelected:t.css`
    border-color: ${N.colors.primary.border};
  `,rowOdd:t.css`
    background-color: ${N.colors.background.secondary};
  `,loadingPlaceholder:t.css`
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
  `,modal:t.css`
    height: 100%;
  `,modalContent:t.css`
    flex: 1;
    display: flex;
    flex-direction: column;
  `,modalAlert:t.css`
    flex-grow: 0;
  `}),A=()=>{const N=(0,f.wW)(U),[F,D]=(0,r.Z)(!1),{control:Y,register:j,watch:K,formState:{errors:z},setValue:Z}=(0,s.Gc)(),ae=K("annotations"),J=(0,c.useCallback)(ee=>ae.filter((se,Q)=>Q!==ee).map(({key:se})=>se),[ae]),{fields:oe,append:Ee,remove:me}=(0,s.Dq)({control:Y,name:"annotations"}),re=ae.find(ee=>ee.key===h.q6.dashboardUID)?.value,le=ae.find(ee=>ee.key===h.q6.panelID)?.value,pe=(ee,se)=>{const Q=(0,n.ZP)(ae,G=>{const q=G.find(de=>de.key===h.q6.dashboardUID),X=G.find(de=>de.key===h.q6.panelID);q?q.value=ee:G.push({key:h.q6.dashboardUID,value:ee}),X?X.value=se:G.push({key:h.q6.panelID,value:se})});Z("annotations",Q),D(!1)};return c.createElement(c.Fragment,null,c.createElement(o._,null,"Summary and annotations"),c.createElement("div",{className:N.flexColumn},oe.map((ee,se)=>{const Q=ae[se]?.key?.toLocaleLowerCase().endsWith("url"),G=Q?l.I:a.K;return c.createElement("div",{key:ee.id,className:N.flexRow},c.createElement(m.g,{className:N.field,invalid:!!z.annotations?.[se]?.key?.message,error:z.annotations?.[se]?.key?.message,"data-testid":`annotation-key-${se}`},c.createElement(d.g,{name:`annotations.${se}.key`,defaultValue:ee.key,render:({field:{ref:q,...X}})=>c.createElement(i,{...X,"aria-label":`Annotation detail ${se+1}`,existingKeys:J(se),width:18}),control:Y,rules:{required:{value:!!ae[se]?.value,message:"Required."}}})),c.createElement(m.g,{className:(0,t.cx)(N.flexRowItemMargin,N.field),invalid:!!z.annotations?.[se]?.value?.message,error:z.annotations?.[se]?.value?.message},c.createElement(G,{"data-testid":`annotation-value-${se}`,className:(0,t.cx)(N.annotationValueInput,{[N.textarea]:!Q}),...j(`annotations.${se}.value`),placeholder:Q?"https://":"Text",defaultValue:ee.value})),c.createElement(p.zx,{type:"button",className:N.flexRowItemMargin,"aria-label":"delete annotation",icon:"trash-alt",variant:"secondary",onClick:()=>me(se)}))}),c.createElement(g.Stack,{direction:"row",gap:1},c.createElement(p.zx,{className:N.addAnnotationsButton,icon:"plus-circle",type:"button",variant:"secondary",onClick:()=>{Ee({key:"",value:""})}},"Add annotation"),c.createElement(p.zx,{type:"button",variant:"secondary",icon:"dashboard",onClick:()=>D(!0)},"Set dashboard and panel")),F&&c.createElement(w,{isOpen:!0,dashboardUid:re,panelId:le,onChange:pe,onDismiss:()=>D(!1)})))},U=N=>({annotationValueInput:t.css`
    width: 394px;
  `,textarea:t.css`
    height: 76px;
  `,addAnnotationsButton:t.css`
    flex-grow: 0;
    align-self: flex-start;
    margin-left: 148px;
  `,flexColumn:t.css`
    display: flex;
    flex-direction: column;
  `,field:t.css`
    margin-bottom: ${N.spacing(.5)};
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
  `,flexRowItemMargin:t.css`
    margin-left: ${N.spacing(.5)};
  `}),I=A},56412:(H,T,e)=>{"use strict";e.d(T,{wO:()=>q,Xr:()=>re,Jm:()=>le});var t=e(52423),n=e(68404),c=e(59052),s=e(26418),r=e(72648),g=e(24799),f=e(77117),o=e(46967),l=e(31403),a=e(63619),m=e(8944),d=e(61860),p=e(39904),h=e(41904),y=e(69945),v=e(45849),i=e(58593),u=e(33950),P=e(61068),E=e(11376),C=e(82897),b=e(64353),S=e(61744),M=e(53217),x=e(77582),O=e(81168),L=e(72004),B=e(79662),w=e(63613),R=e(79658);const A=()=>{const de=(0,r.wW)(N),Be=()=>window.open("https://github.com/grafana/grafana/issues/42947","_blank");return n.createElement(s.Stack,{gap:.5},n.createElement("div",{className:de.slashNotAllowed},"Folders with '/' character are not allowed."),n.createElement(d.u,{placement:"top",content:"Link to the Github issue",theme:"info"},n.createElement(p.J,{name:"info-circle",size:"xs",className:de.infoIcon,onClick:Be})))},U=de=>de.indexOf("/")!==-1;function I(de){const{value:Be}=de,He={warningCondition:Oe=>U(Oe),warningComponent:A},ue={disallowValues:!0,isAllowedValue:Oe=>!U(Oe)};return n.createElement(R.Es,{showRoot:!1,rootName:"",allowEmpty:!0,initialTitle:Be?.title,initialFolderUid:Be?.uid,accessControlMetadata:!0,...de,permissionLevel:O.PermissionLevelString.View,customAdd:ue,folderWarning:He})}const N=de=>({slashNotAllowed:t.css`
    color: ${de.colors.warning.main};
    font-size: 12px;
    margin-bottom: 2px;
  `,infoIcon:t.css`
    color: ${de.colors.warning.main};
    font-size: 12px;
    margin-bottom: 2px;
    cursor: pointer;
  `});var F=e(20700);const D=1e3,Y=(de,Be)=>(0,n.useMemo)(()=>(de?de[Be]??[]:[]).map(Oe=>({name:Oe.name,provisioned:Oe.rules.some(Fe=>(0,B.Pc)(Fe)&&Boolean(Fe.grafana_alert.provenance))})).filter(Oe=>!Oe.provisioned).map(Oe=>Oe.name),[de,Be]);function j(de,Be,ke){return Be.map(He=>({label:He,value:He,description:`${le(de,He,ke)}`}))}const K=de=>{const ke=(0,y._)(Oe=>Oe.rulerRules)[v.GC],He=ke?.result;return{groupOptions:j(He,Y(ke?.result,de),de),loading:ke?.loading}},z=de=>{const Be=(0,n.useCallback)(ke=>{const He=x.Vt.hasEditPermissionInFolders,ue=x.Vt.hasAccessInMetadata(O.AccessControlAction.AlertingRuleCreate,ke,He),Oe=de&&ke.folderId===de.id&&x.Vt.hasAccessInMetadata(O.AccessControlAction.AlertingRuleUpdate,ke,He);return ue||Oe},[de]);return(0,n.useCallback)(ke=>ke.filter(Be).filter(He=>!U(He.title??"")),[Be])};function Z({initialFolder:de}){const{formState:{errors:Be},watch:ke,control:He}=(0,c.Gc)(),ue=(0,r.wW)(ae),Oe=(0,O.useDispatch)(),Fe=z(de),Ie=ke("folder"),we=ke("group"),[Re,_e]=(0,n.useState)({label:we,title:we}),et=(0,n.useRef)(!0),{groupOptions:qe,loading:Je}=K(Ie?.title??"");(0,n.useEffect)(()=>_e({label:we,title:we}),[we,_e]),(0,n.useEffect)(()=>{Oe((0,L.IA)(v.GC))},[Oe]);const lt=(0,n.useCallback)(()=>{we&&!et.current&&Ie?.title&&_e({label:"",title:""}),et.current=!1},[we,Ie?.title]),at=(0,n.useCallback)(Ye=>qe.includes(mt=>mt.label===Ye),[qe]),Xe=Ye=>Ye.slice(0,D),gt=(0,n.useCallback)(async Ye=>Xe(Ye?qe.filter(ce=>(ce.label??"").toLowerCase().includes(Ye.toLowerCase())):qe),[qe]),ot=(0,n.useMemo)(()=>(0,C.debounce)(gt,300,{leading:!0}),[gt]);return n.createElement("div",{className:ue.container},n.createElement(g.g,{label:n.createElement(b._,{htmlFor:"folder",description:"Select a folder for your rule."},n.createElement(s.Stack,{gap:.5},"Folder",n.createElement(w.s,{text:"Each folder has unique folder permission. When you store multiple rules in a folder, the folder access permissions are assigned to the rules."}))),className:ue.formInput,error:Be.folder?.message,invalid:!!Be.folder?.message,"data-testid":"folder-picker"},n.createElement(a.g,{render:({field:{ref:Ye,...mt}})=>n.createElement(I,{inputId:"folder",...mt,enableCreateNew:x.Vt.hasPermission(O.AccessControlAction.FoldersCreate),enableReset:!0,filter:Fe,onChange:({title:ce,uid:be})=>{mt.onChange({title:ce,uid:be}),at(Re.value??"")||lt()}}),name:"folder",rules:{required:{value:!0,message:"Select a folder"},validate:{pathSeparator:Ye=>(0,F.p0)(Ye.title)}}})),n.createElement(g.g,{label:"Evaluation group (interval)","data-testid":"group-picker",description:"Select a group to evaluate all rules in the same group over the same time interval.",className:ue.formInput,error:Be.group?.message,invalid:!!Be.group?.message},n.createElement(a.g,{render:({field:{ref:Ye,...mt}})=>Je?n.createElement(S.u,{text:"Loading..."}):n.createElement(M.qb,{disabled:!Ie,inputId:"group",key:`my_unique_select_key__${Re?.title??""}`,...mt,loadOptions:ot,loadingMessage:"Loading groups...",defaultOptions:qe,defaultValue:Re,getOptionLabel:ce=>`${ce.label}`,placeholder:"Evaluation group name",onChange:ce=>{mt.onChange(ce.label??"")},value:Re,allowCustomValue:!0,formatCreateLabel:ce=>"+ Add new ",noOptionsMessage:"Start typing to create evaluation group"}),name:"group",control:He,rules:{required:{value:!0,message:"Must enter a group name"},validate:{pathSeparator:Ye=>(0,F.p0)(Ye)}}})))}const ae=de=>({container:t.css`
    display: flex;
    flex-direction: row;
    align-items: baseline;
    max-width: ${de.breakpoints.values.sm}px;
    justify-content: space-between;
  `,formInput:t.css`
    width: 275px;
    & + & {
      margin-left: ${de.spacing(3)};
    }
  `});var J=e(46063);const oe=[{value:J.g0.Alerting,label:"Alerting"},{value:J.g0.NoData,label:"No Data"},{value:J.g0.OK,label:"OK"},{value:J.g0.Error,label:"Error"}],Ee=({includeNoData:de,includeError:Be,...ke})=>{const He=(0,n.useMemo)(()=>de?Be?oe:oe.filter(ue=>ue.value!==J.g0.Error):oe.filter(ue=>ue.value!==J.g0.NoData),[de,Be]);return n.createElement(M.Ph,{options:He,...ke})};var me=e(36894);const re=10,le=(de,Be,ke)=>(de?de[ke]:[])?.find(Fe=>Fe.name===Be)?.interval??E.E,pe=de=>({required:{value:!0,message:"Required."},validate:Be=>{if(Be==="0")return!0;try{const ke=(0,i.nd)(Be);if(ke===0)return!0;try{const He=(0,i.nd)(de);return ke>=He?!0:"For duration must be greater than or equal to the evaluation interval."}catch{return!0}}catch(ke){return ke instanceof Error?ke.message:"Failed to parse duration"}}}),ee=(de,Be)=>{const{groupOptions:ke}=K(de);return!(0,n.useCallback)(ue=>ke.some(Oe=>Oe.label===ue),[ke])(Be)},se=({rules:de})=>{const{watch:Be,register:ke,formState:{errors:He}}=(0,c.Gc)(),ue=(0,r.wW)(X),Oe="eval-every-input";return n.createElement(g.g,{label:"Evaluation interval",description:"Applies to every rule within a group. It can overwrite the interval of an existing alert rule."},n.createElement("div",{className:ue.alignInterval},n.createElement(s.Stack,{direction:"row","justify-content":"left","align-items":"baseline",gap:0},n.createElement(f.W,{htmlFor:Oe,width:16,tooltip:"How often the alert will be evaluated to see if it fires"},"Evaluate every"),n.createElement(g.g,{className:ue.inlineField,error:He.evaluateEvery?.message,invalid:!!He.evaluateEvery,validationMessageHorizontalOverflow:!0},n.createElement(o.I,{id:Oe,width:8,...ke("evaluateEvery",(0,P.MD)(de,Be("group"),Be("folder.title")))})))))};function Q({initialFolder:de,evaluateEvery:Be,setEvaluateEvery:ke}){const He=(0,r.wW)(X),{watch:ue,setValue:Oe}=(0,c.Gc)(),[Fe,Ie]=(0,n.useState)(!1),we=ue("group"),Re=ue("folder"),et=(0,y._)(Xe=>Xe.rulerRules)[v.GC],qe=ee(Re?.title??"",we);(0,n.useEffect)(()=>{qe?(ke(E.E),Oe("evaluateEvery",E.E)):we&&Re&&ke(le(et?.result,we,Re?.title??""))},[we,Re,et?.result,ke,qe,Oe]);const Je=(Xe=!1)=>{Xe||(0,h.PN)(h.z7.leavingRuleGroupEdit),Ie(!1)},lt=()=>Ie(!0),at=et?.loading||qe||!Re||!we;return n.createElement("div",null,n.createElement(Z,{initialFolder:de}),Fe&&n.createElement(P.vq,{groupInterval:Be,nameSpaceAndGroup:{namespace:Re?.title??"",group:we},sourceName:v.GC,onClose:()=>Je(),folderAndGroupReadOnly:!0}),Re&&we&&n.createElement("div",{className:He.evaluationContainer},n.createElement(s.Stack,{direction:"column",gap:0},n.createElement("div",{className:He.marginTop},qe&&we?n.createElement(se,{rules:et?.result}):n.createElement(s.Stack,{direction:"column",gap:1},n.createElement("div",{className:He.evaluateLabel},"Alert rules in the "," ",n.createElement("span",{className:He.bold},we)," group are evaluated every"," ",n.createElement("span",{className:He.bold},Be),"."),!qe&&n.createElement("div",null,"Evaluation group interval applies to every rule within a group. It overwrites intervals defined for existing alert rules."))),n.createElement(s.Stack,{direction:"row","justify-content":"right","align-items":"center"},!qe&&n.createElement("div",{className:He.marginTop},n.createElement(l.zx,{icon:"edit",type:"button",variant:"secondary",disabled:at,onClick:lt},n.createElement("span",null,"Edit evaluation group")))))))}function G({evaluateEvery:de}){const Be=(0,r.wW)(X),{register:ke,formState:{errors:He}}=(0,c.Gc)(),ue="eval-for-input";return n.createElement(s.Stack,{direction:"row","justify-content":"flex-start","align-items":"flex-start"},n.createElement(f.W,{htmlFor:ue,width:7,tooltip:'Once the condition is breached, the alert goes into pending state. If the alert is pending longer than the "for" value, it becomes a firing alert.'},"for"),n.createElement(g.g,{className:Be.inlineField,error:He.evaluateFor?.message,invalid:!!He.evaluateFor?.message,validationMessageHorizontalOverflow:!0},n.createElement(o.I,{id:ue,width:8,...ke("evaluateFor",pe(de))})))}function q({initialFolder:de,evaluateEvery:Be,setEvaluateEvery:ke,existing:He}){const ue=(0,r.wW)(X),[Oe,Fe]=(0,n.useState)(!1),{watch:Ie,setValue:we}=(0,c.Gc)(),Re=Ie("isPaused");return n.createElement(me.z,{stepNo:3,title:"Alert evaluation behavior"},n.createElement(s.Stack,{direction:"column","justify-content":"flex-start","align-items":"flex-start"},n.createElement(Q,{initialFolder:de,setEvaluateEvery:ke,evaluateEvery:Be}),n.createElement(G,{evaluateEvery:Be}),He&&n.createElement(g.g,{htmlFor:"pause-alert-switch"},n.createElement(a.g,{render:()=>n.createElement(s.Stack,{gap:1,direction:"row",alignItems:"center"},n.createElement(m.r,{id:"pause-alert",onChange:_e=>{we("isPaused",_e.currentTarget.checked)},value:Boolean(Re)}),n.createElement("label",{htmlFor:"pause-alert",className:ue.switchLabel},"Pause evaluation",n.createElement(d.u,{placement:"top",content:"Turn on to pause evaluation for this alert rule.",theme:"info"},n.createElement(p.J,{tabIndex:0,name:"info-circle",size:"sm",className:ue.infoIcon})))),name:"isPaused"}))),n.createElement(u.U,{isCollapsed:!Oe,onToggle:_e=>Fe(!_e),text:"Configure no data and error handling",className:ue.collapseToggle}),Oe&&n.createElement(n.Fragment,null,n.createElement(g.g,{htmlFor:"no-data-state-input",label:"Alert state if no data or all values are null"},n.createElement(a.g,{render:({field:{onChange:_e,ref:et,...qe}})=>n.createElement(Ee,{...qe,inputId:"no-data-state-input",width:42,includeNoData:!0,includeError:!1,onChange:Je=>_e(Je?.value)}),name:"noDataState"})),n.createElement(g.g,{htmlFor:"exec-err-state-input",label:"Alert state if execution error or timeout"},n.createElement(a.g,{render:({field:{onChange:_e,ref:et,...qe}})=>n.createElement(Ee,{...qe,inputId:"exec-err-state-input",width:42,includeNoData:!1,includeError:!0,onChange:Je=>_e(Je?.value)}),name:"execErrState"}))))}const X=de=>({inlineField:t.css`
    margin-bottom: 0;
  `,collapseToggle:t.css`
    margin: ${de.spacing(2,0,2,-1)};
  `,evaluateLabel:t.css`
    align-self: left;
    margin-right: ${de.spacing(1)};
  `,evaluationContainer:t.css`
    background-color: ${de.colors.background.secondary};
    padding: ${de.spacing(2)};
    max-width: ${de.breakpoints.values.sm}px;
    font-size: ${de.typography.size.sm};
  `,intervalChangedLabel:t.css`
    margin-bottom: ${de.spacing(1)};
  `,warningIcon:t.css`
    justify-self: center;
    margin-right: ${de.spacing(1)};
    color: ${de.colors.warning.text};
  `,infoIcon:t.css`
    margin-left: 10px;
  `,warningMessage:t.css`
    color: ${de.colors.warning.text};
  `,bold:t.css`
    font-weight: bold;
  `,alignInterval:t.css`
    margin-top: ${de.spacing(1)};
    margin-left: -${de.spacing(1)};
  `,marginTop:t.css`
    margin-top: ${de.spacing(1)};
  `,switchLabel:(0,t.css)(`
    color: ${de.colors.text.primary},
    cursor: 'pointer',
    fontSize: ${de.typography.bodySmall.fontSize},
  `)})},19191:(H,T,e)=>{"use strict";e.d(T,{Z:()=>I});var t=e(52423),n=e(82897),c=e(68404),s=e(59052),r=e(26418),g=e(31403),f=e(72648),o=e(61744),l=e(24799),a=e(77117),m=e(46967),d=e(64353),p=e(61860),h=e(39904),y=e(81168),v=e(69945),i=e(72004),u=e(51484),P=e(53217);const E=(0,u.c)({ignoreCase:!1});function C(N,F){return E({label:N.label??"",value:N.value??"",data:{}},F)}const b=(N,F,D)=>{const Y=D.some(K=>K.label===N),j=N.trim().length;return!Boolean(Y)&&Boolean(j)},M=c.forwardRef(function({onChange:F,options:D,defaultValue:Y,type:j,onOpenMenu:K=()=>{}},z){return c.createElement("div",{ref:z},c.createElement(l.g,{disabled:!1,"data-testid":`alertlabel-${j}-picker`},c.createElement(P.Ph,{placeholder:`Choose ${j}`,width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:F,onOpenMenu:K,filterOption:C,isValidNewOption:b,options:D,maxMenuHeight:500,noOptionsMessage:"No labels found",defaultValue:Y,allowCustomValue:!0})))}),x=N=>{const F=(0,y.useDispatch)();(0,c.useEffect)(()=>{F((0,i.IA)(N))},[F,N]);const Y=(0,v._)(Z=>Z.rulerRules)[N],j=Y?.result||{},K=(0,n.compact)((0,n.flattenDeep)(Object.keys(j).map(Z=>j[Z].map(ae=>ae.rules.map(J=>J.labels))))),z={};return K.forEach(Z=>{Object.entries(Z).forEach(([ae,J])=>{z[ae]=[...new Set([...z[ae]||[],J])]})}),{loading:Y?.loading,labelsByKey:z}};function O(N=[]){return N.map(F=>({label:F,value:F}))}const L=({remove:N,className:F,index:D})=>c.createElement(g.zx,{className:F,"aria-label":"delete label",icon:"trash-alt","data-testid":`delete-label-${D}`,variant:"secondary",onClick:()=>{N(D)}}),B=({append:N,className:F})=>c.createElement(g.zx,{className:F,icon:"plus-circle",type:"button",variant:"secondary",onClick:()=>{N({key:"",value:""})}},"Add label"),w=({dataSourceName:N})=>{const F=(0,f.wW)(U),{register:D,control:Y,watch:j,formState:{errors:K},setValue:z}=(0,s.Gc)(),Z=j("labels"),{fields:ae,remove:J,append:oe}=(0,s.Dq)({control:Y,name:"labels"}),{loading:Ee,labelsByKey:me}=x(N),[re,le]=(0,c.useState)(""),pe=(0,c.useMemo)(()=>O(Object.keys(me)),[me]),ee=(0,c.useCallback)(Q=>O(me[Q]),[me]),se=(0,c.useMemo)(()=>ee(re),[re,ee]);return c.createElement(c.Fragment,null,Ee&&c.createElement(o.u,{text:"Loading"}),!Ee&&c.createElement(c.Fragment,null,ae.map((Q,G)=>c.createElement("div",{key:Q.id},c.createElement("div",{className:(0,t.cx)(F.flexRow,F.centerAlignRow)},c.createElement(l.g,{className:F.labelInput,invalid:Boolean(K.labels?.[G]?.key?.message),error:K.labels?.[G]?.key?.message,"data-testid":`label-key-${G}`},c.createElement(M,{...D(`labels.${G}.key`,{required:{value:Boolean(Z[G]?.value),message:"Required."}}),defaultValue:Q.key?{label:Q.key,value:Q.key}:void 0,options:pe,onChange:q=>{z(`labels.${G}.key`,q.value),le(q.value)},type:"key"})),c.createElement(a.W,{className:F.equalSign},"="),c.createElement(l.g,{className:F.labelInput,invalid:Boolean(K.labels?.[G]?.value?.message),error:K.labels?.[G]?.value?.message,"data-testid":`label-value-${G}`},c.createElement(M,{...D(`labels.${G}.value`,{required:{value:Boolean(Z[G]?.key),message:"Required."}}),defaultValue:Q.value?{label:Q.value,value:Q.value}:void 0,options:se,onChange:q=>{z(`labels.${G}.value`,q.value)},onOpenMenu:()=>{le(Z[G].key)},type:"value"})),c.createElement(L,{className:F.deleteLabelButton,index:G,remove:J})))),c.createElement(B,{className:F.addLabelButton,append:oe})))},R=()=>{const N=(0,f.wW)(U),{register:F,control:D,watch:Y,formState:{errors:j}}=(0,s.Gc)(),K=Y("labels"),{fields:z,remove:Z,append:ae}=(0,s.Dq)({control:D,name:"labels"});return c.createElement(c.Fragment,null,z.map((J,oe)=>c.createElement("div",{key:J.id},c.createElement("div",{className:(0,t.cx)(N.flexRow,N.centerAlignRow),"data-testid":"alertlabel-input-wrapper"},c.createElement(l.g,{className:N.labelInput,invalid:!!j.labels?.[oe]?.key?.message,error:j.labels?.[oe]?.key?.message},c.createElement(m.I,{...F(`labels.${oe}.key`,{required:{value:!!K[oe]?.value,message:"Required."}}),placeholder:"key","data-testid":`label-key-${oe}`,defaultValue:J.key})),c.createElement(a.W,{className:N.equalSign},"="),c.createElement(l.g,{className:N.labelInput,invalid:!!j.labels?.[oe]?.value?.message,error:j.labels?.[oe]?.value?.message},c.createElement(m.I,{...F(`labels.${oe}.value`,{required:{value:!!K[oe]?.key,message:"Required."}}),placeholder:"value","data-testid":`label-value-${oe}`,defaultValue:J.value})),c.createElement(L,{className:N.deleteLabelButton,index:oe,remove:Z})))),c.createElement(B,{className:N.addLabelButton,append:ae}))},A=({className:N,dataSourceName:F})=>{const D=(0,f.wW)(U);return c.createElement("div",{className:(0,t.cx)(N,D.wrapper)},c.createElement(d._,null,c.createElement(r.Stack,{gap:.5},c.createElement("span",null,"Custom Labels"),c.createElement(p.u,{content:c.createElement("div",null,"The dropdown only displays labels that you have previously used for alerts. Select a label from the dropdown or type in a new one.")},c.createElement(h.J,{className:D.icon,name:"info-circle",size:"sm"})))),c.createElement(c.Fragment,null,c.createElement("div",{className:D.flexRow},c.createElement(a.W,{width:18},"Labels"),c.createElement("div",{className:D.flexColumn},F&&c.createElement(w,{dataSourceName:F}),!F&&c.createElement(R,null)))))},U=N=>({icon:t.css`
      margin-right: ${N.spacing(.5)};
    `,wrapper:t.css`
      margin-bottom: ${N.spacing(4)};
    `,flexColumn:t.css`
      display: flex;
      flex-direction: column;
    `,flexRow:t.css`
      display: flex;
      flex-direction: row;
      justify-content: flex-start;

      & + button {
        margin-left: ${N.spacing(.5)};
      }
    `,deleteLabelButton:t.css`
      margin-left: ${N.spacing(.5)};
      align-self: flex-start;
    `,addLabelButton:t.css`
      flex-grow: 0;
      align-self: flex-start;
    `,centerAlignRow:t.css`
      align-items: baseline;
    `,equalSign:t.css`
      align-self: flex-start;
      width: 28px;
      justify-content: center;
      margin-left: ${N.spacing(.5)};
    `,labelInput:t.css`
      width: 175px;
      margin-bottom: ${N.spacing(1)};
      & + & {
        margin-left: ${N.spacing(1)};
      }
    `}),I=A},36894:(H,T,e)=>{"use strict";e.d(T,{z:()=>r});var t=e(52423),n=e(68404),c=e(72648),s=e(13393);const r=({title:f,stepNo:o,children:l,description:a})=>{const m=(0,c.wW)(g);return n.createElement("div",{className:m.parent},n.createElement("div",null,n.createElement("span",{className:m.stepNo},o)),n.createElement("div",{className:m.content},n.createElement(s.C,{label:f,className:m.fieldset},a&&n.createElement("p",{className:m.description},a),l)))},g=f=>({fieldset:t.css`
    legend {
      font-size: 16px;
      padding-top: ${f.spacing(.5)};
    }
  `,parent:t.css`
    display: flex;
    flex-direction: row;
    max-width: ${f.breakpoints.values.xl};
    & + & {
      margin-top: ${f.spacing(4)};
    }
  `,description:t.css`
    margin-top: -${f.spacing(2)};
    color: ${f.colors.text.secondary};
  `,stepNo:t.css`
    display: inline-block;
    width: ${f.spacing(4)};
    height: ${f.spacing(4)};
    line-height: ${f.spacing(4)};
    border-radius: ${f.spacing(4)};
    text-align: center;
    color: ${f.colors.text.maxContrast};
    background-color: ${f.colors.background.canvas};
    font-size: ${f.typography.size.lg};
    margin-right: ${f.spacing(2)};
  `,content:t.css`
    flex: 1;
  `})},20700:(H,T,e)=>{"use strict";e.d(T,{p0:()=>C,Vp:()=>b,Fu:()=>M,Ry:()=>u,Dr:()=>E,Yq:()=>S});var t=e(24177),n=e(34472),c=e(40538),s=e(47694),r=e(67162),g=e(75e3),f=e(97573),o=e(82897),l=e(58635),a=e(28630);const m=(0,l.Z)(d,(O,L)=>i(O[0])===i(L[0]));function d(O){const L=new a.kJ,B=O.map(w=>w.refId);return L.createNodes(B),O.forEach(w=>{const R=w.refId;((0,g.j)(w.model)&&w.model.type==="math"?p(w.model.expression??""):[w.model.expression]).forEach(I=>{R&&I&&!(R===I)&&L.link(I,R)})}),L}function p(O){const L=new RegExp(/\$\{(?<var>[a-zA-Z0-9_ ]+?)\}/gm),B=new RegExp(/\$(?<var>[a-zA-Z0-9_]+)/gm),w=Array.from(O.matchAll(L)).map(A=>A.groups?.var),R=Array.from(O.matchAll(B)).map(A=>A.groups?.var);return(0,o.compact)((0,o.uniq)([...w,...R]))}const h=(0,o.memoize)(y,(O,L)=>O+v(L));function y(O,L){const B=L.getNode(O);let w=[];function R(A){const U=A.inputEdges;U.length>0?U.forEach(I=>{I.inputNode&&R(I.inputNode)}):w?.push(A)}return R(B),w.map(A=>A.name)}function v(O){return Object.keys(O.nodes).map(L=>{const B=O.nodes[L];let w=B.outputEdges.map(A=>A.outputNode?.name).join(", "),R=B.inputEdges.map(A=>A.inputNode?.name).join(", ");return`${B.name}:${w}:${R}`}).join(" ")}function i(O){return O.map(L=>{const B=(0,g.j)(L.model)?L.model.type:L.queryType;return L.refId+(L.model.expression??"")+B}).join()}function u(O,L,B){return O.map(w=>{if(L===B||!(0,g.j)(w.model))return w;const R=w.model.type==="math",A=w.model.type==="reduce",U=w.model.type==="resample",I=w.model.type==="classic_conditions",N=w.model.type==="threshold";if(R)return{...w,model:{...w.model,expression:P(w.model.expression??"",L,B)}};if(U||A||N){const F=w.model.expression===L;return{...w,model:{...w.model,expression:F?B:w.model.expression}}}if(I){const F=w.model.conditions?.map(D=>({...D,query:{...D.query,params:D.query.params.map(Y=>Y===L?B:Y)}}));return{...w,model:{...w.model,conditions:F}}}return w})}function P(O,L,B){const w=new RegExp("(\\$"+L+"\\b)|(\\${"+L+"})","gm"),R="${"+B+"}";return O.replace(w,R)}function E(O,L){return O.find(B=>B.refId===L)!==void 0}function C(O){return O.includes("/")||O.includes("\\")?'Cannot contain "/" or "\\" characters':!0}function b(O){if(O.length===0)return;const L=(0,n.hZ)(O);let B;return L&&(B=new Error("You cannot use time series data as an alert condition, consider adding a reduce expression.")),B}function S(O){const B=(O[0]?.meta?.notices??[]).find(w=>w.severity==="warning")?.text;return B?new Error(B):void 0}function M(O){const L={},B=[f.Us.threshold,f.Us.classic];for(const A of O){if(!(0,g.j)(A.model)||!B.includes(A.model.type)||!Array.isArray(A.model.conditions))continue;const U=A.model.conditions.some(x);A.model.conditions.forEach((I,N)=>{const F=I.evaluator.params,D=I.query.params[0]??A.model.expression,Y=x(I);try{const j=m(O),K=h(D,j);O.filter(Z=>K.includes(Z.refId)).forEach(Z=>{const ae=Z.refId,J=!(0,g.j)(Z?.model),oe=Boolean(J&&ae);ae&&!L[ae]&&(L[ae]={config:{mode:t.H.Absolute,steps:[]},mode:c.i3.Line}),ae&&oe&&!Y&&!U?w(ae,F[0]):ae&&oe&&Y&&(R(ae,F,I.evaluator.type),L[ae].mode=c.i3.LineAndArea)})}catch(j){console.error("Failed to parse thresholds",j);return}})}function w(A,U){L[A].config.steps.push({value:-1/0,color:"transparent"},{value:U,color:s.vc.theme2.colors.error.main})}function R(A,U,I){I===r.$.IsWithinRange&&L[A].config.steps.push({value:-1/0,color:"transparent"},{value:U[0],color:s.vc.theme2.colors.error.main},{value:U[1],color:s.vc.theme2.colors.error.main},{value:U[1],color:"transparent"}),I===r.$.IsOutsideRange&&L[A].config.steps.push({value:-1/0,color:s.vc.theme2.colors.error.main},{value:U[0],color:s.vc.theme2.colors.error.main},{value:U[0],color:"transparent"},{value:U[1],color:s.vc.theme2.colors.error.main}),L[A].config.steps.sort((N,F)=>N.value-F.value)}return L}function x(O){return O.evaluator.type===r.$.IsWithinRange||O.evaluator.type===r.$.IsOutsideRange}},48563:(H,T,e)=>{"use strict";e.d(T,{o:()=>a});var t=e(68404),n=e(46519),c=e(79662),s=e(52694),r=e(53731),g=e(78543),f=e(80498);const o=({instance:d})=>{const p=(Object.entries(d.annotations||{})||[]).filter(([h,y])=>!!y.trim());return t.createElement("div",null,d.value&&t.createElement(f.C,{label:"Value",horizontal:!0},d.value),p.map(([h,y])=>t.createElement(g.a,{key:h,annotationKey:h,value:y})))};var l=e(45608);const a=({instances:d,pagination:p,footerRow:h})=>{const y=(0,t.useMemo)(()=>d.map(v=>({data:v,id:(0,c.pB)(v)})),[d]);return t.createElement(r.t,{cols:m,isExpandable:!0,items:y,renderExpandedContent:({data:v})=>t.createElement(o,{instance:v}),pagination:p,footerRow:h})},m=[{id:"state",label:"State",renderCell:({data:{state:d}})=>t.createElement(l.l,{state:d}),size:"80px"},{id:"labels",label:"Labels",renderCell:({data:{labels:d}})=>t.createElement(s.s,{labels:d})},{id:"created",label:"Created",renderCell:({data:{activeAt:d}})=>t.createElement(t.Fragment,null,d.startsWith("0001")?"-":(0,n.CQ)(d).format("YYYY-MM-DD HH:mm:ss")),size:"150px"}]},45608:(H,T,e)=>{"use strict";e.d(T,{l:()=>s});var t=e(68404),n=e(79662),c=e(79453);const s=({state:r,isPaused:g=!1,size:f="md"})=>t.createElement(c.i,{state:(0,n.Aq)(r),size:f},(0,n.SS)(r)," ",g?" (Paused)":"")},61068:(H,T,e)=>{"use strict";e.d(T,{vq:()=>K,MD:()=>j,qd:()=>U,BT:()=>N,Bg:()=>D});var t=e(52423),n=e(68404),c=e(59052),s=e(26418),r=e(19985),g=e(72648),f=e(35029),o=e(24799),l=e(64353),a=e(46967),m=e(31403),d=e(60499),p=e(40014),h=e(81168),y=e(69945),v=e(72004),i=e(82963),u=e(45849),P=e(46818),E=e(79662),C=e(58593),b=e(53731),S=e(63613),M=e(35645),x=e(45253);const O=()=>n.createElement(x.b,{severity:"warning",title:"Global evalutation interval limit exceeded"},"A minimum evaluation interval of ",n.createElement("strong",null,M.v.unifiedAlerting.minInterval)," has been configured in Grafana.",n.createElement("br",null),"Please contact the administrator to configure a lower interval.");var L=e(56412);const B="1m",w=10;function R({message:Z,error:ae}){return ae?n.createElement(r.C,{color:"red",icon:"exclamation-circle",text:"Error",tooltip:Z}):n.createElement(r.C,{color:"orange",icon:"exclamation-triangle",text:"Unknown",tooltip:Z})}const A=(Z,ae)=>{const J=D(ae),oe=D(Z);return oe===0&&J!==0?1:J===0||oe/J<1?0:Math.ceil(oe/J)+1},U=(Z,ae)=>{const J={alertName:"",forDuration:"0s",evaluationsToFire:0};return(0,E.Pc)(Z)?{alertName:Z.grafana_alert.title,forDuration:Z.for,evaluationsToFire:A(Z.for,ae)}:(0,E.cG)(Z)?{alertName:Z.alert,forDuration:Z.for??"1m",evaluationsToFire:A(Z.for??"1m",ae)}:J},I=Z=>{try{const ae=(0,C.nd)(Z);return!(ae<L.Xr*1e3||ae%(L.Xr*1e3)!==0)}catch{return!1}},N=(Z,ae,J)=>(Z?Z[J]:[])?.find(Ee=>Ee.name===ae),F=(Z,ae,J)=>N(Z,ae,J)?.interval??B,D=Z=>{try{return(0,C.nd)(Z)}catch{return 0}},Y=({rulesWithoutRecordingRules:Z})=>{const ae=(0,g.wW)(z),{watch:J}=(0,c.Gc)(),oe=J("groupInterval"),Ee=!Boolean(oe),me=Z.slice().map((le,pe)=>({id:pe,data:U(le,oe)})).sort((le,pe)=>D(le.data.forDuration)-D(pe.data.forDuration)),re=(0,n.useMemo)(()=>[{id:"alertName",label:"Alert",renderCell:({data:{alertName:le}})=>n.createElement(n.Fragment,null,le),size:"330px"},{id:"for",label:"For",renderCell:({data:{forDuration:le}})=>n.createElement(n.Fragment,null,le),size:.5},{id:"numberEvaluations",label:"#Eval",renderCell:({data:{evaluationsToFire:le}})=>Ee?n.createElement(R,{message:"#Evaluations not available."}):I(oe)?le===0?n.createElement(R,{message:"Invalid 'For' value: it should be greater or equal to evaluation interval.",error:!0}):n.createElement(n.Fragment,null,le):n.createElement(R,{message:"Invalid evaluation interval format",error:!0}),size:.4}],[oe,Ee]);return n.createElement("div",{className:ae.tableWrapper},n.createElement(b.t,{items:me,cols:re,pagination:{itemsPerPage:w}}))},j=(Z,ae,J)=>({required:{value:!0,message:"Required."},validate:oe=>{try{const Ee=(0,C.nd)(oe);return Ee<L.Xr*1e3?`Cannot be less than ${L.Xr} seconds.`:Ee%(L.Xr*1e3)!==0?`Must be a multiple of ${L.Xr} seconds.`:(0,v.iH)(Z,ae,J,oe).length===0?!0:"Invalid evaluation interval. Evaluation interval should be smaller or equal to 'For' values for existing rules in this group."}catch(Ee){return Ee instanceof Error?Ee.message:"Failed to parse duration"}}});function K(Z){const{nameSpaceAndGroup:{namespace:ae,group:J},onClose:oe,groupInterval:Ee,sourceName:me,folderAndGroupReadOnly:re}=Z,le=(0,g.wW)(z),pe=(0,h.useDispatch)(),{loading:ee,error:se,dispatched:Q}=(0,y._)(Ye=>Ye.updateLotexNamespaceAndGroup)??P.oq,G=(0,d.iG)(),q=typeof ae=="string"?ae:ae.name,X=typeof J=="string"?J:J.name,de=(0,n.useMemo)(()=>({namespaceName:q,groupName:X,groupInterval:Ee??""}),[q,X,Ee]),Be=me===u.GC,ke=Be?"Folder":"Namespace",Oe=re?Be?"Folder name can be updated in folder view":"Name space can be updated folder view":Be?"Folder name can be updated to a non-existing folder name":"Name space can be updated to a non-existing name space";(0,n.useEffect)(()=>{Q&&!ee&&!se&&oe(!0)},[Q,ee,oe,se]),(0,p.x)(Ye=>Ye.unifiedAlerting.updateLotexNamespaceAndGroup=P.oq);const Fe=Ye=>{pe((0,v.hv)({rulesSourceName:me,groupName:X,newGroupName:Ye.groupName,namespaceName:q,newNamespaceName:Ye.namespaceName,groupInterval:Ye.groupInterval||void 0}))},Ie=(0,c.cI)({mode:"onBlur",defaultValues:de,shouldFocusError:!0}),{handleSubmit:we,register:Re,watch:_e,formState:{isDirty:et,errors:qe}}=Ie,Je=()=>{G.error("There are errors in the form. Correct the errors and retry.")},lt=(0,y._)(Ye=>Ye.rulerRules),at=lt[me],gt=N(at?.result,X,q)?.rules.filter(Ye=>!(0,E.yF)(Ye))??[],ot=gt.length>0;return n.createElement(f.u,{className:le.modal,isOpen:!0,title:re?"Edit evaluation group":`Edit ${ke} or evaluation group`,onDismiss:oe,onClickBackdrop:oe},n.createElement(c.RV,{...Ie},n.createElement("form",{onSubmit:Ye=>Ye.preventDefault(),key:JSON.stringify(de)},n.createElement(n.Fragment,null,n.createElement(o.g,{label:n.createElement(l._,{htmlFor:"namespaceName"},n.createElement(s.Stack,{gap:.5},ke,n.createElement(S.s,{text:Oe}))),invalid:!!qe.namespaceName,error:qe.namespaceName?.message},n.createElement(a.I,{id:"namespaceName",readOnly:re,...Re("namespaceName",{required:"Namespace name is required."})})),n.createElement(o.g,{label:n.createElement(l._,{htmlFor:"groupName"},n.createElement(s.Stack,{gap:.5},"Evaluation group",Be?n.createElement(S.s,{text:"Group name can be updated on Group view."}):n.createElement(S.s,{text:"Group name can be updated to a non existing group name."}))),invalid:!!qe.groupName,error:qe.groupName?.message},n.createElement(a.I,{id:"groupName",readOnly:re,...Re("groupName",{required:"Evaluation group name is required."})})),n.createElement(o.g,{label:n.createElement(l._,{htmlFor:"groupInterval",description:"Evaluation interval should be smaller or equal to 'For' values for existing rules in this group."},n.createElement(s.Stack,{gap:.5},"Rule group evaluation interval",n.createElement(S.s,{text:"How frequently to evaluate rules."}))),invalid:!!qe.groupInterval,error:qe.groupInterval?.message},n.createElement(a.I,{id:"groupInterval",placeholder:"1m",...Re("groupInterval",j(at?.result,X,q))})),(0,i.f)(_e("groupInterval")).exceedsLimit&&n.createElement(O,null),n.createElement("div",{className:le.modalButtons},n.createElement(f.u.ButtonRow,null,n.createElement(m.zx,{variant:"secondary",type:"button",disabled:ee,onClick:()=>oe(!1),fill:"outline"},"Close"),n.createElement(m.zx,{type:"button",disabled:!et||ee,onClick:we(Ye=>Fe(Ye),Je)},ee?"Saving...":"Save changes"))),lt&&!ot&&n.createElement("div",null,"This group does not contain alert rules."),lt&&ot&&n.createElement(n.Fragment,null,n.createElement("div",null,"List of rules that belong to this group"),n.createElement("div",{className:le.evalRequiredLabel},"#Eval column represents the number of evaluations needed before alert starts firing."),n.createElement(Y,{rulesWithoutRecordingRules:gt}))))))}const z=Z=>({modal:t.css`
    max-width: 560px;
  `,modalButtons:t.css`
    top: -24px;
    position: relative;
  `,formInput:t.css`
    width: 275px;
    & + & {
      margin-left: ${Z.spacing(3)};
    }
  `,tableWrapper:t.css`
    margin-top: ${Z.spacing(2)};
    margin-bottom: ${Z.spacing(2)};
    height: 100%;
  `,evalRequiredLabel:t.css`
    font-size: ${Z.typography.bodySmall.fontSize};
  `})},69369:(H,T,e)=>{"use strict";e.d(T,{S:()=>s});var t=e(68404),n=e(86647),c=e(22069);function s(r){return{allDataSourcesAvailable:(0,t.useMemo)(()=>r.filter(f=>!(0,c.Pr)(f.datasourceUid)).every(f=>{const o=(0,n.F)().getInstanceSettings(f.datasourceUid);return Boolean(o)}),[r])}}},25724:(H,T,e)=>{"use strict";e.d(T,{h:()=>n});var t=e(68404);function n(c,s,r){const[g,f]=(0,t.useState)(s),o=Math.ceil(c.length/r),l=r*(g-1),a=(0,t.useMemo)(()=>c.slice(l,l+r),[c,l,r]),m=(0,t.useCallback)(d=>{f(d)},[f]);return(0,t.useEffect)(()=>f(1),[o]),{page:g,onPageChange:m,numberOfPages:o,pageItems:a}}},69945:(H,T,e)=>{"use strict";e.d(T,{_:()=>n});var t=e(81168);function n(c,s){return(0,t.useSelector)(r=>c(r.unifiedAlerting),s)}},734:(H,T,e)=>{"use strict";e.d(T,{VG:()=>F,HY:()=>Y,ug:()=>D});var t=e(46063),n=e(79662);const c=1,s=2,r=3,g=4,f=5,o=6,l=7,a=8,m=9,d=10,p=11,h=12,y=0,v=1,i=2,u=3,P=4,E=5,C=6,b=7;var S=e(82897),M=e(27765);const x=M.WQ.deserialize({version:14,states:"!vOQOPOOOrOPO'#ChOOOO'#Ch'#ChOQOPO'#ClOOOO'#Ci'#CiQQOPOOO!gOQO'#C^O!lOPO'#CjO!qOPO,59SOOOO,59W,59WOOOO-E6g-E6gOOOO,58x,58xOOOO,59U,59UOOOO-E6h-E6h",stateData:"$O~ORUOTUOUUOVUOWUOXUOYUOZUOaPOcQO~ObVOR[XT[XU[XV[XW[XX[XY[XZ[Xa[Xc[X~OSZO~Oa[O~ObVOR[aT[aU[aV[aW[aX[aY[aZ[aa[ac[a~OR~T~U~V~W~Y~Z~RZYXWVUTa~",goto:"zaPPbPPPPPPPPPbgmPsVRORTQTORYTQWPR]WSSOTRXR",nodeNames:"\u26A0 AlertRuleSearch FilterExpression DataSourceToken FilterValue NameSpaceToken LabelToken GroupToken RuleToken StateToken TypeToken HealthToken FreeFormExpression",maxTerm:19,skippedNodes:[0],repeatNodeCount:2,tokenData:"#$QRRqqr#Yrs&fst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]+h!]#W#Y#W#X,z#X#Z#Y#Z#[=b#[#]F[#]#`#Y#`#a!!n#a#b#Y#b#c!+h#c#f#Y#f#g!:f#g#h!Av#h#i!Jp#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#acSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YQ$qcSQqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lQ&PP;=`<%l$lQ&VP;=`;NQ$lR&]P;=`<%l#YR&cP;=`;NQ#YR&irX^(spq(sqr(sst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR(vsX^(spq(sqr(srs+Tst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR+[OSQcPR+_P;=`<%l(sR+eP;=`;NQ(sR+ocSQbPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR-ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U.d#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR.keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i/|#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR0TeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U1f#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR1meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h3O#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR3VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d4h#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR4oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j6Q#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR6XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g7j#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR7qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W9S#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR9ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y:l#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR:scSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]<O!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR<VcSQRPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR=ieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g>z#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR?ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d@d#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR@keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#jA|#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRBTeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#eCf#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRCmcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]Dx!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YREPcSQVPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lRFceSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#YGt#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRG{eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#UI^#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRIeeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#aJv#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRJ}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#iL`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRLgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#[#Y#[#]Mx#]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRNPcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]! [!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR! ccSQZPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!!ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!$W#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!$_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#U#Y#U#V!%p#V$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!%weSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!'Y#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!'aeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!(r#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!(ycSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!*U!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!*]cSQUPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!+oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!-Q#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!-XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#a#Y#a#b!.j#b$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!.qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!0S#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!0ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h!1l#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!1seSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!3U#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!3]eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!4n#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!4ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W!6W#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!6_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!7p#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!7wcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!9S!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!9ZcSQTPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!:meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j!<O#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!<VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!=h#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!=oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!?Q#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!?XcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!@d!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!@kcSQWPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!A}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!C`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!CgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!Dx#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!EPeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!Fb#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!FieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!Gz#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!HRcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!I^!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!IecSQXPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!JweSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#m#Y#m#n!LY#n$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!LaeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!Mr#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!MyeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y# [#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR# ccSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]#!n!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#!ucSQYPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$l",tokenizers:[0,1],topRules:{AlertRuleSearch:[0,1]},dialects:{dataSourceFilter:114,nameSpaceFilter:116,labelFilter:118,groupFilter:120,ruleFilter:122,stateFilter:66,typeFilter:124,healthFilter:126},tokenPrec:128}),O={[r]:"datasource",[f]:"namespace",[o]:"label",[a]:"rule",[l]:"group",[m]:"state",[d]:"type",[p]:"health"};var L=(K=>(K.dataSource="dataSourceFilter",K.nameSpace="nameSpaceFilter",K.label="labelFilter",K.group="groupFilter",K.rule="ruleFilter",K.state="stateFilter",K.type="typeFilter",K.health="healthFilter",K))(L||{});function B(K,z,Z){U(K,z,ae=>{if(ae.type.id===s){const J=w(K,ae);if(J.type&&J.value){const oe=Z[J.type];oe&&oe(J.value)}}else if(ae.type.id===h){const J=Z[h];J&&J(R(K,ae))}})}function w(K,z){if(z.type.id!==s)throw new Error("Invalid node provided. Only FilterExpression nodes are supported");const Z=z.firstChild;if(!Z)return{type:void 0,value:void 0};const ae=z.getChild(g),J=ae?(0,S.trim)(R(K,ae),'"'):void 0;return{type:Z.type.id,value:J}}function R(K,z){return K.slice(z.from,z.to).trim().replace(/\"/g,"")}function A(K,z,Z){const ae=[];U(K,z,oe=>{oe.type.id===s&&oe.firstChild&&ae.push(oe.firstChild),oe.type.id===h&&ae.push(oe)});let J=[];return ae.forEach(oe=>{const Ee=Z.findIndex(me=>me.type===oe.type.id);if(Ee!==-1){if(oe.parent?.type.is(s)){const me=O[oe.type.id],re=Z.splice(Ee,1)[0];J.push(`${me}:${I(re.value)}`)}if(oe.type.is(h)){const me=Z.splice(Ee,1)[0];J.push(me.value)}}}),Z.forEach(oe=>{oe.type===h?J.push(oe.value):J.push(`${O[oe.type]}:${I(oe.value)}`)}),J.join(" ")}function U(K,z,Z){const ae=z.join(" ");let oe=x.configure({dialect:ae}).parse(K).cursor();do Z(oe.node);while(oe.next())}function I(K){return/\s/.test(K)?`"${K}"`:K}const N=[L.dataSource,L.nameSpace,L.label,L.group,L.rule,L.state,L.type,L.health];var F=(K=>(K.Ok="ok",K.Error="error",K.NoData="nodata",K.Unknown="unknown",K))(F||{});function D(K){const z={labels:[],freeFormWords:[]},Z={[r]:ae=>z.dataSourceName=ae,[f]:ae=>z.namespace=ae,[l]:ae=>z.groupName=ae,[a]:ae=>z.ruleName=ae,[o]:ae=>z.labels.push(ae),[m]:ae=>z.ruleState=j(ae),[d]:ae=>(0,n.Wd)(ae)?z.ruleType=ae:void 0,[p]:ae=>z.ruleHealth=(0,n.vU)(ae),[h]:ae=>z.freeFormWords.push(ae)};return B(K,N,Z),z}function Y(K,z){const Z=[];return z.dataSourceName&&Z.push({type:r,value:z.dataSourceName}),z.namespace&&Z.push({type:f,value:z.namespace}),z.groupName&&Z.push({type:l,value:z.groupName}),z.ruleName&&Z.push({type:a,value:z.ruleName}),z.ruleState&&Z.push({type:m,value:z.ruleState}),z.ruleType&&Z.push({type:d,value:z.ruleType}),z.ruleHealth&&Z.push({type:p,value:z.ruleHealth}),z.labels&&Z.push(...z.labels.map(ae=>({type:o,value:ae}))),z.freeFormWords&&Z.push(...z.freeFormWords.map(ae=>({type:h,value:ae}))),A(K,N,Z)}function j(K){if(K==="normal")return t.x_.Inactive;if((0,t.I9)(K))return K}},81001:(H,T,e)=>{"use strict";e.d(T,{v:()=>L});var t=e(16527),n=e(53786),c=e(94514),s=e(44962),r=e(2101),g=e(44288),f=e(49922),o=e(83849),l=e(33180),a=e(69311),m=e(70006),d=e(86647),p=e(77599),h=e(29930),y=e(75e3),v=e(88039),i=e(59584),u=e(75434),P=e(97573);const E={from:21600,to:0},C=(N,F)=>{const D=b(N,F);if(!D)return E;const{from:Y,to:j}=M(D,F);return!Y.length&&!j.length?E:{from:Math.max(...Y),to:Math.min(...j)}},b=(N,F)=>{switch(N.type){case P.Us.classic:return S(N);case P.Us.math:return x(N,F);case P.Us.resample:case P.Us.reduce:case P.Us.threshold:return O(N)}},S=N=>N.conditions?.map(F=>F.query.params[0]),M=(N,F)=>{let D=[],Y=[E.to];for(const j of N){const K=F.find(z=>z.refId===j);!K||!K.relativeTimeRange||(D.push(K.relativeTimeRange.from),Y.push(K.relativeTimeRange.to))}return{from:D,to:Y}},x=(N,F)=>F.filter(D=>D.queryType==="query"&&N.expression?.includes(D.refId)).map(D=>D.refId),O=N=>N.expression?[N.expression]:void 0;class L{constructor(F=(0,h.i)(),D=(0,d.F)()){this.backendSrv=F,this.dataSourceSrv=D,this.subject=new t.t(1),this.lastResult={}}get(){return this.subject.asObservable()}async run(F){if(F.length===0){const D=w(F,f.Gu.Done);return this.subject.next(D)}for(const D of F)if(!(0,y.j)(D.model)){const Y=await this.dataSourceSrv.get(D.datasourceUid);if(Y.filterQuery&&!Y.filterQuery(D.model)){const j=w(F,f.Gu.Done);return this.subject.next(j)}}this.subscription=B(this.backendSrv,F).subscribe({next:D=>{const Y=I(D,(j,K)=>{const z=this.lastResult[j],Z=(0,u.zR)(K,z);return(0,i.C)(Z,z)});this.lastResult=Y,this.subject.next(this.lastResult)},error:D=>{this.lastResult=U(this.lastResult,D),this.subject.next(this.lastResult)}})}cancel(){if(!this.subscription)return;this.subscription.unsubscribe();let F=!1;const D=I(this.lastResult,(Y,j)=>(j.state===f.Gu.Loading&&(F=!0),{...j,state:f.Gu.Done}));F&&this.subject.next(D)}destroy(){this.subject&&this.subject.complete(),this.cancel()}}const B=(N,F)=>{const D=w(F,f.Gu.Loading),Y={data:{data:F},url:"/api/v1/eval",method:"POST",requestId:(0,g.Z)()};return(0,o.x)({whileLoading:D,source:N.fetch(Y).pipe(A(D),(0,c.K)(j=>(0,n.of)(U(D,j))),(0,v.V)(N,Y.requestId),(0,s.B)())})},w=(N,F)=>N.reduce((D,Y)=>(D[Y.refId]={state:F,series:[],timeRange:R(Y,N)},D),{}),R=(N,F)=>{if((0,y.j)(N.model)){const D=C(N.model,F);return l.relativeToTimeRange(D)}return N.relativeTimeRange?l.relativeToTimeRange(N.relativeTimeRange):(console.warn(`Query with refId: ${N.refId} did not have any relative time range, using default.`),(0,a.JK)())},A=N=>(0,r.U)(F=>{const{data:D}=F,Y={};for(const[j,K]of Object.entries(D.results))Y[j]={timeRange:N[j].timeRange,state:f.Gu.Done,series:K.frames.map(m.vP)};return Y}),U=(N,F)=>{const D=(0,p.P)(F);return I(N,(Y,j)=>({...j,state:f.Gu.Error,error:D}))},I=(N,F)=>{const D={};for(const[Y,j]of Object.entries(N))D[Y]=F(Y,j);return D}},72004:(H,T,e)=>{"use strict";e.d(T,{QY:()=>at,Nc:()=>ce,r0:()=>be,X4:()=>Xe,hS:()=>we,oE:()=>Ie,S6:()=>gt,yO:()=>lt,mS:()=>mt,Yh:()=>se,ei:()=>ue,dV:()=>ke,lB:()=>Oe,dB:()=>Je,on:()=>Fe,zy:()=>Q,wE:()=>G,vL:()=>ot,sw:()=>Ye,Ms:()=>et,Vj:()=>_e,dn:()=>X,y6:()=>ee,UR:()=>q,IA:()=>Be,nw:()=>He,je:()=>de,iH:()=>Ke,wy:()=>Re,D8:()=>Te,mM:()=>qe,hv:()=>ge,tg:()=>Me});var t=e(32557),n=e(82897),c=e(37932),s=e(35645),r=e(46063),g=e(77582),f=e(29930),o=e(41904),l=e(3363),a=e(27677),m=e(54899),d=e(45849);async function p(fe){try{const he=await(0,l.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,d.gt)(fe)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}));return{template_files:he.data.template_files??{},template_file_provenances:he.data.template_file_provenances??{},alertmanager_config:he.data.alertmanager_config??{}}}catch(he){if(fe===d.GC&&(0,m.kW)(he)&&he.data?.message?.includes("could not find an Alertmanager configuration"))return{template_files:{},alertmanager_config:{}};throw he}}async function h(fe,he){await(0,l.n)((0,m.i)().fetch({method:"POST",url:`/api/alertmanager/${(0,d.gt)(fe)}/config/api/v1/alerts`,data:he,showErrorAlert:!1,showSuccessAlert:!1}))}async function y(fe){await(0,l.n)((0,m.i)().fetch({method:"DELETE",url:`/api/alertmanager/${(0,d.gt)(fe)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}))}async function v(fe){return(await(0,l.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,d.gt)(fe)}/api/v2/silences`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function i(fe,he){return(await(0,l.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,d.gt)(fe)}/api/v2/silences`,data:he,showErrorAlert:!1,showSuccessAlert:!1,method:"POST"}))).data}async function u(fe,he){await(0,m.i)().delete(`/api/alertmanager/${(0,d.gt)(fe)}/api/v2/silence/${encodeURIComponent(he)}`)}async function P(fe,he,De=!0,Ae=!0,Ne=!0){const Ze=a.Cj.toUrlParams({silenced:De,active:Ae,inhibited:Ne})+he?.map(Ue=>`filter=${encodeURIComponent(`${w(Ue.name)}=${Ue.isRegex?"~":""}"${w(Ue.value)}"`)}`).join("&")||"";return(await(0,l.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,d.gt)(fe)}/api/v2/alerts`+(Ze?"?"+Ze:""),showErrorAlert:!1,showSuccessAlert:!1}))).data}async function E(fe){return(await(0,l.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,d.gt)(fe)}/api/v2/alerts/groups`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function C(fe){return(await(0,l.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,d.gt)(fe)}/api/v2/status`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function b(fe,he,De){const Ae={receivers:he,alert:De};try{const Ne=await(0,l.n)((0,m.i)().fetch({method:"POST",data:Ae,url:`/api/alertmanager/${(0,d.gt)(fe)}/config/api/v1/receivers/test`,showErrorAlert:!1,showSuccessAlert:!1}));if(S(Ne.data))throw new Error(x(Ne.data))}catch(Ne){throw(0,m.kW)(Ne)&&M(Ne.data)&&S(Ne.data)?new Error(x(Ne.data)):Ne}}function S(fe){return fe.receivers.some(he=>he.grafana_managed_receiver_configs.some(De=>De.status==="failed"))}function M(fe){const he=fe?.receivers;return Array.isArray(he)?he.every(De=>typeof De.name=="string"&&Array.isArray(De.grafana_managed_receiver_configs)):!1}function x(fe){return fe.receivers.flatMap(he=>he.grafana_managed_receiver_configs.filter(De=>De.status==="failed").map(De=>De.error??"Unknown error.")).join("; ")}async function O(fe){await(0,l.n)((0,m.i)().fetch({method:"POST",data:fe,url:"/api/v1/ngalert/admin_config",showErrorAlert:!1,showSuccessAlert:!1})).then(()=>{B()})}async function L(){return(await(0,l.n)((0,m.i)().fetch({method:"GET",url:"/api/v1/ngalert/alertmanagers"}))).data}async function B(){return(await(0,l.n)((0,m.i)().fetch({method:"GET",url:"/api/v1/ngalert/admin_config",showErrorAlert:!1}))).data}function w(fe){return fe.replace(/"/g,'\\"')}function R(fe){return(0,m.i)().get("/api/annotations",{alertId:fe}).then(he=>he?.sort(A))}function A(fe,he){const De=(Ze,Se)=>Ze>Se?-1:Se>Ze?1:0,Ae=De(fe.timeEnd,he.timeEnd);if(Ae)return Ae;const Ne=De(fe.time,he.time);return Ne||De(fe.id,he.id)}var U=e(44737),I=e(79572),N=e(644),F=e(95454),D=e(49011),Y=e(61068),j=e(94617),K=e(20194),z=e(10505),Z=e(46818),ae=e(60048),J=e(21767),oe=e(79662);function Ee(fe){const he=async Qe=>{if((0,oe.Kl)(Qe)){const pt=await(0,D.m6)(fe);for(const[bt,yt]of Object.entries(pt))for(const Mt of yt){const At=Mt.rules.find(Pt=>(0,oe.Pc)(Pt)&&Pt.grafana_alert?.uid===Qe.uid);if(At)return{group:Mt,ruleSourceName:d.GC,namespace:bt,rule:At}}}if((0,oe.E4)(Qe)){const{ruleSourceName:pt,namespace:bt,groupName:yt}=Qe,Mt=await(0,D.jJ)(fe,bt,yt);if(!Mt)return null;const At=Mt.rules.find(Pt=>{const rn=ae.Zk(pt,bt,Mt.name,Pt);return ae.Dg(rn,Qe)});return At?{group:Mt,ruleSourceName:pt,namespace:bt,rule:At}:null}if((0,oe.qE)(Qe))throw new Error("Native prometheus rules can not be edited in grafana.");return null},De=async Qe=>{const{namespace:pt,group:bt,rule:yt}=Qe;if(bt.rules.length===1){await(0,D.BC)(fe,pt,bt.name);return}await(0,D.P4)(fe,pt,{...bt,rules:bt.rules.filter(Mt=>Mt!==yt)})},Ae=async(Qe,pt,bt)=>{const{dataSourceName:yt,group:Mt,namespace:At}=Qe,Pt=(0,J.yh)(Qe);if(yt&&Mt&&At){if(bt){const kn=await he(ae.CK(bt));if(!kn)throw new Error("Rule not found.");if(kn.namespace!==At||kn.group.name!==Mt)await De(kn);else{const Jn={...kn.group,rules:kn.group.rules.map(qn=>qn===kn.rule?Pt:qn),evaluateEvery:pt};return await(0,D.P4)(fe,At,Jn),ae.Zk(yt,At,Mt,Pt)}}const rn=await(0,D.jJ)(fe,At,Mt),Fn=rn?{...rn,rules:[...rn.rules,Pt]}:{name:Mt,rules:[Pt]};return await(0,D.P4)(fe,At,Fn),ae.Zk(yt,At,Mt,Pt)}else throw new Error("Data source and location must be specified")},Ne=async(Qe,pt,bt)=>{const{folder:yt,group:Mt}=Qe;if(!yt)throw new Error("Folder must be specified");const At=(0,J.mI)(Qe),Pt=yt.title,rn={name:Mt,interval:pt};if(!bt)return Ze(Pt,rn,At);const Fn=await he(ae.CK(bt));if(!Fn)throw new Error("Rule not found.");const kn=Fn.namespace===Pt,Jn=Fn.group.name===Qe.group;return kn&&Jn?Ue(Fn,At,pt):Se(Pt,rn,Fn,At)},Ze=async(Qe,pt,bt)=>{const yt=await(0,D.jJ)(fe,Qe,pt.name);if(!yt)throw new Error(`No group found with name "${pt.name}"`);const Mt={name:pt.name,interval:pt.interval,rules:(yt.rules??[]).concat(bt)};return await(0,D.P4)(fe,Qe,Mt),{uid:bt.grafana_alert.uid??"",ruleSourceName:d.GC}},Se=async(Qe,pt,bt,yt)=>(me(bt,yt),await Ze(Qe,pt,yt)),Ue=async(Qe,pt,bt)=>{me(Qe,pt);const yt=Qe.group.rules.map(Mt=>(0,oe.Pc)(Mt)&&Mt.grafana_alert.uid===Qe.rule.grafana_alert.uid?pt:Mt);return await(0,D.P4)(fe,Qe.namespace,{name:Qe.group.name,interval:bt,rules:yt}),{uid:Qe.rule.grafana_alert.uid,ruleSourceName:d.GC}};return{findEditableRule:he,deleteRule:De,saveLotexRule:Ae,saveGrafanaRule:Ne}}function me(fe,he){if(!(0,oe.Pc)(fe.rule))throw new Error("The rule is not a Grafana managed rule");const De=fe.rule.grafana_alert.uid;he.grafana_alert.uid=De}const re=30*1e3;function le(fe,he){const Ae=fe().unifiedAlerting.dataSources[he]?.result;if(!Ae)throw new Error(`Data source configuration is not available for "${he}" data source`);return Ae}function pe(fe,he){const De=le(fe,he);if(!De.rulerConfig)throw new Error(`Ruler API is not available for ${he}`);return De.rulerConfig}const ee=(0,t.hg)("unifiedalerting/fetchPromRules",async({rulesSourceName:fe,filter:he},De)=>{await De.dispatch(He({rulesSourceName:fe}));const Ae=(0,o.pM)(F.j,`[${fe}] Prometheus rules loaded`,{dataSourceName:fe,thunk:"unifiedalerting/fetchPromRules"});return await(0,Z.$b)(Ae(fe,he))}),se=(0,t.hg)("unifiedalerting/fetchAmConfig",(fe,he)=>(0,Z.$b)((async()=>{if((0,d.RY)(fe))return C(fe).then(Ze=>({alertmanager_config:Ze.config,template_files:{}}));const{data:De}=await he.dispatch(I.T.endpoints.discoverAmFeatures.initiate({amSourceName:fe})),Ae=De?.lazyConfigInit??!1,Ne=(0,o.pM)(p,`[${fe}] Alertmanager config loaded`,{dataSourceName:fe,thunk:"unifiedalerting/fetchAmConfig"});return(0,z.fm)(()=>Ne(fe),Ze=>!!(0,Z.kk)(Ze)?.includes("alertmanager storage object not found")&&!Ae,re).then(Ze=>(0,n.isEmpty)(Ze.alertmanager_config)&&(0,n.isEmpty)(Ze.template_files)&&fe!==d.GC?C(fe).then(Se=>({alertmanager_config:Se.config,template_files:{},template_file_provenances:Ze.template_file_provenances})):Ze).catch(Ze=>{if(Ae&&(0,Z.kk)(Ze)?.includes("alertmanager storage object not found"))return Promise.resolve({alertmanager_config:{},template_files:{},template_file_provenances:{}});throw Ze})})())),Q=(0,t.hg)("unifiedAlerting/fetchExternalAlertmanagers",()=>(0,Z.$b)(L())),G=(0,t.hg)("unifiedAlerting/fetchExternAlertmanagersConfig",()=>(0,Z.$b)(B())),q=(0,t.hg)("unifiedalerting/fetchRulerRules",async({rulesSourceName:fe,filter:he},{dispatch:De,getState:Ae})=>{await De(He({rulesSourceName:fe}));const Ne=pe(Ae,fe),Ze=(0,o.pM)(D.m6,`[${fe}] Ruler rules loaded`,{dataSourceName:fe,thunk:"unifiedalerting/fetchRulerRules"});return await(0,Z.$b)(Ze(Ne,he))});function X({rulesSourceName:fe}){return async(he,De)=>{await he(He({rulesSourceName:fe}));const Ae=le(De,fe);await he(ee({rulesSourceName:fe})),Ae.rulerConfig&&await he(q({rulesSourceName:fe}))}}const de=(0,t.hg)("unifiedalerting/fetchSilences",fe=>{const he=(0,o.pM)(v,`[${fe}] Silences loaded`,{dataSourceName:fe,thunk:"unifiedalerting/fetchSilences"});return(0,Z.$b)(he(fe))});function Be(fe){return(he,De)=>{const{rulerRules:Ae}=De().unifiedAlerting,Ne=Ae[fe];(0,n.isEmpty)(Ne?.result)&&!(Ne&&(0,oe.m$)(Ne))&&!Ne?.loading&&he(q({rulesSourceName:fe}))}}function ke(){return async fe=>{const he=(0,d.mA)().map(De=>fe(He({rulesSourceName:De})));await Promise.allSettled(he)}}const He=(0,t.hg)("unifiedalerting/fetchPromBuildinfo",async({rulesSourceName:fe})=>(0,Z.$b)((async()=>{if(fe===d.GC)return{name:d.GC,id:d.GC,rulerConfig:{dataSourceName:d.GC,apiVersion:"legacy"}};const he=(0,d.VX)(fe);if(!he)throw new Error(`Missing data source configuration for ${fe}`);const{id:De,name:Ae}=he,Ze=await(0,o.pM)(U.C$,`[${fe}] Rules source features discovered`,{dataSourceName:fe,thunk:"unifiedalerting/fetchPromBuildinfo"})(Ae),Se=Ze.features.rulerApiEnabled?{dataSourceName:Ae,apiVersion:Ze.application===r.T8.Cortex?"legacy":"config"}:void 0;return{name:Ae,id:De,rulerConfig:Se}})()),{condition:({rulesSourceName:fe},{getState:he})=>{const De=he().unifiedAlerting.dataSources,Ae=Boolean(De[fe]?.result),Ne=Boolean(De[fe]?.error);return!(Ae||Ne)}});function ue(fe=!1){return async(he,De)=>{const Ae=performance.now();await Promise.allSettled((0,d.mA)().map(async Ne=>{await he(He({rulesSourceName:Ne}));const{promRules:Ze,rulerRules:Se,dataSources:Ue}=De().unifiedAlerting,Qe=Ue[Ne].result;if(!Qe)return;const pt=fe||!Ze[Ne]?.loading,bt=(fe||!Se[Ne]?.loading)&&Boolean(Qe.rulerConfig);await Promise.allSettled([pt&&he(ee({rulesSourceName:Ne})),bt&&he(q({rulesSourceName:Ne}))])})),(0,o.PN)("All Prom and Ruler rules loaded",{loadTimeMs:(performance.now()-Ae).toFixed(0)})}}function Oe(fe=!1){return async(he,De)=>{const{promRules:Ae}=De().unifiedAlerting;(0,d.mA)().map(Ne=>{(fe||!Ae[Ne]?.loading)&&he(ee({rulesSourceName:Ne}))})}}const Fe=(0,t.hg)("unifiedalerting/fetchEditableRule",(fe,he)=>{const De=pe(he.getState,fe.ruleSourceName);return(0,Z.$b)(Ee(De).findEditableRule(fe))});function Ie(fe,he){return async(De,Ae)=>{(0,Z.Ez)((async()=>{const Ne=(0,d.EG)(fe.rulesSource),Ze=pe(Ae,Ne);await(0,D.BC)(Ze,fe.name,he.name),await De(X({rulesSourceName:Ne}))})(),{successMessage:"Group deleted"})}}function we(fe,he={}){return async(De,Ae)=>{(0,Z.Ez)((async()=>{const Ne=pe(Ae,fe.ruleSourceName),Ze=Ee(Ne),Se=await Ze.findEditableRule(fe);if(!Se)throw new Error("Rule not found.");await Ze.deleteRule(Se),await De(X({rulesSourceName:Se.ruleSourceName})),he.navigateTo&&c.E1.replace(he.navigateTo)})(),{successMessage:"Rule deleted."})}}const Re=(0,t.hg)("unifiedalerting/saveRuleForm",({values:fe,existing:he,redirectOnSave:De,evaluateEvery:Ae},Ne)=>(0,Z.Ez)((0,Z.$b)((async()=>{const{type:Ze}=fe;let Se;if(Ze===j.$.cloudAlerting||Ze===j.$.cloudRecording){if(!fe.dataSourceName)throw new Error("The Data source has not been defined.");const Ue=pe(Ne.getState,fe.dataSourceName);Se=await Ee(Ue).saveLotexRule(fe,Ae,he),await Ne.dispatch(q({rulesSourceName:fe.dataSourceName}))}else if(Ze===j.$.grafana){const Ue=pe(Ne.getState,d.GC);Se=await Ee(Ue).saveGrafanaRule(fe,Ae,he),await Ne.dispatch(q({rulesSourceName:d.GC}))}else throw new Error("Unexpected rule form type");if((0,o.PN)(o.z7.successSavingAlertRule,{type:Ze,isNew:(!he).toString()}),he||(0,o.I5)({grafana_version:s.v.buildInfo.version,org_id:g.Vt.user.orgId,user_id:g.Vt.user.id}),De)c.E1.push(De);else{const Ue=ae.$V(Se);if(!Ue){c.E1.push("/alerting/list");return}const Qe=`/alerting/${encodeURIComponent(Ue)}/edit`;c.E1.getLocation().pathname!==Qe?c.E1.replace(Qe):Ne.dispatch(Fe(Se))}})()),{successMessage:he?`Rule "${fe.name}" updated.`:`Rule "${fe.name}" saved.`,errorMessage:"Failed to save rule"})),_e=(0,t.hg)("unifiedalerting/fetchGrafanaNotifiers",()=>(0,Z.$b)((0,N.i9)())),et=(0,t.hg)("unifiedalerting/fetchGrafanaAnnotations",fe=>(0,Z.$b)(R(fe))),qe=(0,t.hg)("unifiedalerting/updateAMConfig",({alertManagerSourceName:fe,oldConfig:he,newConfig:De,successMessage:Ae,redirectPath:Ne,refetch:Ze},Se)=>(0,Z.Ez)((0,Z.$b)((async()=>{const Ue=await Se.dispatch(se(fe)).unwrap();if(!((0,n.isEmpty)(Ue.alertmanager_config)&&(0,n.isEmpty)(Ue.template_files))&&JSON.stringify(Ue)!==JSON.stringify(he))throw new Error("It seems configuration has been recently updated. Please reload page and try again to make sure that recent changes are not overwritten.");await h(fe,(0,K.X4)(De)),Ze&&await Se.dispatch(se(fe)),Ne&&c.E1.push((0,z.eQ)(Ne,fe))})()),{successMessage:Ae})),Je=(0,t.hg)("unifiedalerting/fetchAmAlerts",fe=>(0,Z.$b)(P(fe,[],!0,!0,!0))),lt=(fe,he)=>async De=>{await(0,Z.Ez)(u(fe,he),{successMessage:"Silence expired."}),De(de(fe)),De(Je(fe))},at=(0,t.hg)("unifiedalerting/updateSilence",({alertManagerSourceName:fe,payload:he,exitOnSave:De,successMessage:Ae})=>(0,Z.Ez)((0,Z.$b)((async()=>{await i(fe,he),De&&c.E1.push("/alerting/silences")})()),{successMessage:Ae})),Xe=(fe,he)=>(De,Ae)=>{const Ne=Ae().unifiedAlerting.amConfigs?.[he]?.result;if(!Ne)throw new Error(`Config for ${he} not found`);if(!Ne.alertmanager_config.receivers?.find(Se=>Se.name===fe))throw new Error(`Cannot delete receiver ${fe}: not found in config.`);const Ze={...Ne,alertmanager_config:{...Ne.alertmanager_config,receivers:Ne.alertmanager_config.receivers.filter(Se=>Se.name!==fe)}};return De(qe({newConfig:Ze,oldConfig:Ne,alertManagerSourceName:he,successMessage:"Contact point deleted.",refetch:!0}))},gt=(fe,he)=>(De,Ae)=>{const Ne=Ae().unifiedAlerting.amConfigs?.[he]?.result;if(!Ne)throw new Error(`Config for ${he} not found`);if(typeof Ne.template_files?.[fe]!="string")throw new Error(`Cannot delete template ${fe}: not found in config.`);const Ze={...Ne.template_files};delete Ze[fe];const Se={...Ne,alertmanager_config:{...Ne.alertmanager_config,templates:Ne.alertmanager_config.templates?.filter(Ue=>Ue!==fe)},template_files:Ze};return De(qe({newConfig:Se,oldConfig:Ne,alertManagerSourceName:he,successMessage:"Template deleted.",refetch:!0}))},ot=(0,t.hg)("unifiedalerting/fetchFolder",fe=>(0,Z.$b)(f.ae.getFolderByUid(fe,{withAccessControl:!0}))),Ye=fe=>(he,De)=>{De().unifiedAlerting.folders[fe]?.dispatched||he(ot(fe))},mt=(0,t.hg)("unifiedalerting/fetchAlertGroups",fe=>(0,Z.$b)(E(fe))),ce=(0,t.hg)("unifiedalerting/deleteAlertManagerConfig",async(fe,he)=>(0,Z.Ez)((0,Z.$b)((async()=>{await y(fe),await he.dispatch(se(fe))})()),{errorMessage:"Failed to reset Alertmanager configuration",successMessage:"Alertmanager configuration reset."})),be=(fe,he)=>async(De,Ae)=>{const Ne=Ae().unifiedAlerting.amConfigs[fe].result,Ze=Ne?.alertmanager_config?.mute_time_intervals?.filter(({name:Se})=>Se!==he)??[];Ne&&(0,Z.Ez)(De(qe({alertManagerSourceName:fe,oldConfig:Ne,newConfig:{...Ne,alertmanager_config:{...Ne.alertmanager_config,route:Ne.alertmanager_config.route?(0,K.rU)(he,Ne.alertmanager_config?.route):void 0,mute_time_intervals:Ze}},refetch:!0})),{successMessage:`Deleted "${he}" from Alertmanager configuration`,errorMessage:"Failed to delete mute timing"})},Te=(0,t.hg)("unifiedalerting/testReceivers",({alertManagerSourceName:fe,receivers:he,alert:De})=>(0,Z.Ez)((0,Z.$b)(b(fe,he,De)),{errorMessage:"Failed to send test alert.",successMessage:"Test alert sent."})),Ke=(fe,he,De,Ae)=>((0,Y.BT)(fe,he,De)?.rules??[]).filter(Se=>{const{forDuration:Ue}=(0,Y.qd)(Se,Ae),Qe=(0,Y.Bg)(Ue),pt=(0,Y.Bg)(Ae);return Qe!==0&&Qe<pt}),ge=(0,t.hg)("unifiedalerting/updateLotexNamespaceAndGroup",async(fe,he)=>(0,Z.Ez)((0,Z.$b)((async()=>{const{rulesSourceName:De,namespaceName:Ae,groupName:Ne,newNamespaceName:Ze,newGroupName:Se,groupInterval:Ue}=fe,Qe=pe(he.getState,De),pt=await(0,D.m6)(Qe);if(!Boolean(pt[Ae]))throw new Error(`Namespace "${Ae}" not found.`);const yt=pt[Ae].find(Pt=>Pt.name===Ne);if(!yt)throw new Error(`Group "${Ne}" not found.`);const Mt=Boolean(pt[Ae].find(Pt=>Pt.name===Se));if(Se!==Ne&&Mt)throw new Error(`Group "${Se}" already exists in namespace "${Ae}".`);const At=Boolean(pt[Ze]);if(Ze!==Ae&&At)throw new Error(`Namespace "${Ze}" already exists.`);if(Ze===Ae&&Ne===Se&&Ue===yt.interval)throw new Error("Nothing changed.");if(Ue!==yt.interval){const rn=he.getState()?.unifiedAlerting.rulerRules[De],Fn=Ke(rn?.result,Ne,Ae,Ue??"1m");if(Fn.length>0)throw new Error(`These alerts belonging to this group will have an invalid 'For' value: ${Fn.map(kn=>{const{alertName:Jn}=(0,Y.qd)(kn,Ue??"");return Jn}).join(",")}`)}if(Ze!==Ae){for(const Pt of pt[Ae])await(0,D.P4)(Qe,Ze,Pt.name===Ne?{...Pt,name:Se,interval:Ue}:Pt);await(0,D.sz)(Qe,Ae)}else await(0,D.P4)(Qe,Ae,{...yt,name:Se,interval:Ue}),Se!==Ne&&await(0,D.BC)(Qe,Ae,Ne);await he.dispatch(q({rulesSourceName:De}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),Me=(0,t.hg)("unifiedalerting/updateRulesOrderForGroup",async(fe,he)=>(0,Z.Ez)((0,Z.$b)((async()=>{const{rulesSourceName:De,namespaceName:Ae,groupName:Ne,newRules:Ze}=fe,Se=pe(he.getState,De),Qe=(await(0,D.m6)(Se))[Ae].find(bt=>bt.name===Ne);if(!Qe)throw new Error(`Group "${Ne}" not found.`);const pt={name:Qe.name,interval:Qe.interval,rules:Ze};await(0,D.P4)(Se,Ae,pt),await he.dispatch(q({rulesSourceName:De}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),ye=(0,t.hg)("unifiedAlerting/addExternalAlertmanagers",async(fe,he)=>(0,Z.Ez)((0,Z.$b)((async()=>{await O(fe),he.dispatch(G())})()),{errorMessage:"Failed adding alertmanagers",successMessage:"Alertmanagers updated"}))},53715:(H,T,e)=>{"use strict";e.d(T,{r:()=>c});var t=e(52423),n=e(39031);const c=s=>({[n.Z9.Active]:t.css`
    color: ${s.colors.error.text};
  `,[n.Z9.Suppressed]:t.css`
    color: ${s.colors.primary.text};
  `,[n.Z9.Unprocessed]:t.css`
    color: ${s.colors.secondary.text};
  `})},1562:(H,T,e)=>{"use strict";e.d(T,{Z:()=>n});var t=e(52423);const n=c=>t.css`
    float: none;
    display: flex;
    justify-content: flex-start;
    margin: ${c.spacing(2,0)};
  `},94617:(H,T,e)=>{"use strict";e.d(T,{$:()=>t});var t=(n=>(n.grafana="grafana",n.cloudAlerting="cloud-alerting",n.cloudRecording="cloud-recording",n))(t||{})},97953:(H,T,e)=>{"use strict";e.d(T,{Bz:()=>m,Fo:()=>g,Ko:()=>a,Ob:()=>r,QX:()=>l,Rv:()=>p,ql:()=>d});var t=e(82002),n=e(81168),c=e(45849);function s(h){return(0,c.HY)(h)?"grafana":"external"}const r={read:{grafana:n.AccessControlAction.AlertingInstanceRead,external:n.AccessControlAction.AlertingInstancesExternalRead},create:{grafana:n.AccessControlAction.AlertingInstanceCreate,external:n.AccessControlAction.AlertingInstancesExternalWrite},update:{grafana:n.AccessControlAction.AlertingInstanceUpdate,external:n.AccessControlAction.AlertingInstancesExternalWrite},delete:{grafana:n.AccessControlAction.AlertingInstanceUpdate,external:n.AccessControlAction.AlertingInstancesExternalWrite}},g={read:{grafana:n.AccessControlAction.AlertingNotificationsRead,external:n.AccessControlAction.AlertingNotificationsExternalRead},create:{grafana:n.AccessControlAction.AlertingNotificationsWrite,external:n.AccessControlAction.AlertingNotificationsExternalWrite},update:{grafana:n.AccessControlAction.AlertingNotificationsWrite,external:n.AccessControlAction.AlertingNotificationsExternalWrite},delete:{grafana:n.AccessControlAction.AlertingNotificationsWrite,external:n.AccessControlAction.AlertingNotificationsExternalWrite}},f={read:n.AccessControlAction.AlertingProvisioningRead,write:n.AccessControlAction.AlertingProvisioningWrite},o={read:{grafana:n.AccessControlAction.AlertingRuleRead,external:n.AccessControlAction.AlertingRuleExternalRead},create:{grafana:n.AccessControlAction.AlertingRuleCreate,external:n.AccessControlAction.AlertingRuleExternalWrite},update:{grafana:n.AccessControlAction.AlertingRuleUpdate,external:n.AccessControlAction.AlertingRuleExternalWrite},delete:{grafana:n.AccessControlAction.AlertingRuleDelete,external:n.AccessControlAction.AlertingRuleExternalWrite}};function l(h){const y=s(h);return{read:r.read[y],create:r.create[y],update:r.update[y],delete:r.delete[y]}}function a(h){const y=s(h);return{read:g.read[y],create:g.create[y],update:g.update[y],delete:g.delete[y]}}function m(h){const y=s(h);return{read:o.read[y],create:o.create[y],update:o.update[y],delete:o.delete[y]}}function d(h,y){return()=>t.Vt.evaluatePermission(()=>y,h)}function p(){return{canCreateGrafanaRules:t.Vt.hasAccess(n.AccessControlAction.FoldersRead,t.Vt.hasEditPermissionInFolders)&&t.Vt.hasAccess(o.create.grafana,t.Vt.hasEditPermissionInFolders),canCreateCloudRules:t.Vt.hasAccess(n.AccessControlAction.DataSourcesRead,t.Vt.isEditor)&&t.Vt.hasAccess(o.create.external,t.Vt.isEditor),canEditRules:h=>{const y=h===c.GC?t.Vt.hasEditPermissionInFolders:t.Vt.isEditor;return t.Vt.hasAccess(m(h).update,y)},canReadProvisioning:t.Vt.hasAccess(f.read,t.Vt.isGrafanaAdmin)}}},20194:(H,T,e)=>{"use strict";e.d(T,{FM:()=>g,J8:()=>M,X4:()=>s,Xy:()=>E,Zh:()=>i,_J:()=>d,cm:()=>m,eD:()=>u,m8:()=>x,nv:()=>o,oI:()=>p,qw:()=>O,rU:()=>r,tA:()=>h,tC:()=>v,u6:()=>b,uK:()=>C,v7:()=>S,zy:()=>l});var t=e(39031),n=e(82963),c=e(45849);function s(L){return L.alertmanager_config.receivers||(L.alertmanager_config.receivers=[{name:"default "}]),L.alertmanager_config.route||(L.alertmanager_config.route={receiver:L.alertmanager_config.receivers[0].name}),L.template_files||(L.template_files={}),L}function r(L,B){return{...B,mute_time_intervals:B.mute_time_intervals?.filter(R=>R!==L)??[],routes:B.routes?.map(R=>r(L,R))}}function g(L,B,w){return{...w,mute_time_intervals:w.mute_time_intervals?.map(R=>R===B?L:R),routes:w.routes?.map(R=>g(L,B,R))}}function f(L,B){return(B.receiver===L||B.routes?.some(w=>f(L,w)))??!1}function o(L,B){return(B.alertmanager_config.route&&f(L,B.alertmanager_config.route))??!1}function l(L){return L.isEqual?L.isRegex?t._M.regex:t._M.equal:L.isRegex?t._M.notRegex:t._M.notEqual}function a(L){switch(L){case t._M.equal:return{isEqual:!0,isRegex:!1};case t._M.notEqual:return{isEqual:!1,isRegex:!1};case t._M.regex:return{isEqual:!0,isRegex:!0};case t._M.notRegex:return{isEqual:!1,isRegex:!0}}}function m(L){return{name:L.name,value:L.value,operator:l(L)}}function d(L){return{name:L.name,value:L.value,...a(L.operator)}}function p(L){return`{${L.map(m).reduce((R,A)=>{const U=`${A.name}${A.operator}"${A.value}"`;return R?`${R},${U}`:U},"")}}`}const h=[{label:t._M.equal,description:"Equals",value:t._M.equal},{label:t._M.notEqual,description:"Does not equal",value:t._M.notEqual},{label:t._M.regex,description:"Matches regex",value:t._M.regex},{label:t._M.notRegex,description:"Does not match regex",value:t._M.notRegex}],y=[t._M.regex,t._M.notRegex,t._M.notEqual,t._M.equal];function v(L){const B=L.trim();if(B.startsWith("{")&&B.endsWith("}"))throw new Error(`PromQL matchers not supported yet, sorry! PromQL matcher found: ${B}`);const w=y.map(N=>[N,B.indexOf(N)]).filter(([N,F])=>F>-1).sort((N,F)=>N[1]-F[1]);if(!w.length)throw new Error(`Invalid matcher: ${B}`);const[R,A]=w[0],U=B.slice(0,A).trim(),I=B.slice(A+R.length).trim();if(!U)throw new Error(`Invalid matcher: ${B}`);return{name:U,value:I,isRegex:R===t._M.regex||R===t._M.notRegex,isEqual:R===t._M.equal||R===t._M.regex}}function i(L){const B=/\b([\w.-]+)(=~|!=|!~|=(?="?\w))"?([^"\n,]*)"?/g,w=[];return L.replace(B,(R,A,U,I)=>{const N=U===t._M.equal||U===t._M.regex,F=U===t._M.regex||U===t._M.notRegex;return w.push({name:A,value:I,isEqual:N,isRegex:F}),""}),w}function u(L,B){return B.every(({name:w,value:R,isRegex:A,isEqual:U})=>Object.entries(L).some(([I,N])=>{const F=w===I;let D;return U&&!A&&(D=R===N),!U&&!A&&(D=R!==N),U&&A&&(D=new RegExp(R).test(N)),!U&&A&&(D=!new RegExp(R).test(N)),F&&D}))}function P(){return(0,n.x)().filter(L=>L.type===c.ye.Alertmanager)}function E(L){return P().find(B=>L===B.uid)}function C(L){const{times:B,weekdays:w,days_of_month:R,months:A,years:U}=L,I=b(B),N=S(w),F=M(R),D=x(A),Y=O(U);return[I,N,F,D,Y].join(", ")}function b(L){return"Times: "+(L?L?.map(({start_time:B,end_time:w})=>`${B} - ${w} UTC`).join(" and "):"All")}function S(L){return"Weekdays: "+(L?.map(B=>{if(B.includes(":"))return B.split(":").map(w=>{const R=w.slice(0,3);return R[0].toLocaleUpperCase()+R.slice(1)}).join("-");{const w=B.slice(0,3);return w[0].toLocaleUpperCase()+w.slice(1)}}).join(", ")??"All")}function M(L){return"Days of the month: "+(L?.join(", ")??"All")}function x(L){return"Months: "+(L?.join(", ")??"All")}function O(L){return"Years: "+(L?.join(", ")??"All")}},82963:(H,T,e)=>{"use strict";e.d(T,{f:()=>s,x:()=>c});var t=e(35645),n=e(58593);function c(){return Object.values(t.v.datasources)}function s(r){if(!(0,n.wd)(t.v.unifiedAlerting.minInterval))return{globalLimit:0,exceedsLimit:!1};const g=(0,n.nd)(t.v.unifiedAlerting.minInterval);if(!r||!(0,n.wd)(r))return{globalLimit:g,exceedsLimit:!1};const f=(0,n.nd)(r),o=g>f&&f>0;return{globalLimit:g,exceedsLimit:o}}},37190:(H,T,e)=>{"use strict";e.d(T,{Fe:()=>l,GC:()=>o,Kd:()=>a,c4:()=>c,cm:()=>r,de:()=>s,iF:()=>g,jZ:()=>t,m4:()=>f,p4:()=>n,q6:()=>m,vY:()=>d});const t="ruler not supported",n=2e4,c="alertmanager",s="alerting-alertmanager",r=2e4,g=2e4,f=2e4,o="timeseries",l="table",a="stat";var m=(p=>(p.description="description",p.summary="summary",p.runbookURL="runbook_url",p.alertId="__alertId__",p.dashboardUID="__dashboardUid__",p.panelID="__panelId__",p))(m||{});const d={description:"Description",summary:"Summary",runbook_url:"Runbook URL",__dashboardUid__:"Dashboard UID",__panelId__:"Panel ID",__alertId__:"Alert ID"}},45849:(H,T,e)=>{"use strict";e.d(T,{EG:()=>E,Eu:()=>m,GC:()=>f,HY:()=>M,JY:()=>o,LE:()=>v,P:()=>R,RY:()=>S,VX:()=>d,aM:()=>p,c$:()=>x,gt:()=>B,h_:()=>P,jq:()=>b,mA:()=>u,o_:()=>O,v_:()=>C,ye:()=>l,z3:()=>y});var t=e(86647),n=e(82002),c=e(39031),s=e(81168),r=e(97953),g=e(82963);const f="grafana",o="-- Grafana --";var l=(A=>(A.Alertmanager="alertmanager",A.Loki="loki",A.Prometheus="prometheus",A))(l||{});const a=["loki","prometheus"];function m(){return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleExternalRead)?(0,g.x)().filter(A=>a.includes(A.type)&&A.jsonData.manageAlerts!==!1).sort((A,U)=>A.name.localeCompare(U.name)):[]}function d(A){return m().find(U=>U.name===A)}function p(){return(0,g.x)().filter(A=>A.type==="alertmanager").sort((A,U)=>A.name.localeCompare(U.name))}const h={name:f,imgUrl:"public/img/grafana_icon.svg"};function y(){return[h,...p().map(A=>({name:A.name,displayName:A.name,imgUrl:A.meta.info.logos.small,meta:A.meta}))]}function v(A){const U=[],I={instance:r.Ob.read,notification:r.Fo.read};if(n.Vt.hasPermission(I[A].grafana)&&U.push(h),n.Vt.hasPermission(I[A].external)){const N=p().map(F=>({name:F.name,displayName:F.name,imgUrl:F.meta.info.logos.small,meta:F.meta}));U.push(...N)}return U}function i(A){const U=x(A);if(!U)throw new Error(`Data source ${A} not found`);if(U.type!=="loki"&&U.type!=="prometheus")throw new Error(`Unexpected data source type ${U.type}`);return U}function u(){const A=m().map(U=>U.name);return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleRead)&&A.push(f),A}function P(){const A=m();return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleRead)&&A.push(f),A}function E(A){return b(A)?A.name:A}function C(A){return b(A)?A.uid:f}function b(A){return A!==f}function S(A){return A!==f&&x(A)?.jsonData?.implementation===c.sK.prometheus}function M(A){return A===f}function x(A){return(0,g.x)().find(U=>U.name===A)}function O(A){return A===f?f:x(A)}function L(A){if(A===f)return f;const U=x(A);if(!U)throw new Error(`Datasource "${A}" not found`);return String(U.id)}function B(A){if(A===f)return f;const U=x(A);if(!U)throw new Error(`Datasource "${A}" not found`);return U.uid}function w(){return(0,t.F)().getList({alerting:!0})[0]}function R(){const A=(0,t.F)().getInstanceSettings("default");return A?.meta.alerting??!1?A:w()}},66367:(H,T,e)=>{"use strict";e.d(T,{RT:()=>r,TZ:()=>f,rz:()=>g});var t=e(82897),n=e.n(t),c=e(39031),s=e(20194);function r(o){const l=o.filter(a=>!!a.trim()).map(a=>(0,s.tC)(a.trim()));return(0,t.uniqBy)(l,a=>a.name)}const g=o=>{const l=Object.entries(o).filter(([m])=>!(m.startsWith("__")&&m.endsWith("__"))),a=new URLSearchParams;return l.forEach(([m,d])=>a.append("matcher",`${m}=${d}`)),a},f=(o,l)=>{const a=h=>(h.startsWith("^")||(h="^"+h),h.endsWith("$")||(h=h+"$"),new RegExp(h)),m=(h,y)=>Object.entries(h.labels).some(([v,i])=>{if(!y.name||!y.value||y.name!==v)return!1;switch(y.operator){case c._M.equal:return y.value===i;case c._M.notEqual:return y.value!==i;case c._M.regex:return a(y.value).test(i);case c._M.notRegex:return!a(y.value).test(i);default:return!1}});return o.filter(h=>l.every(y=>m(h,y))).map(h=>({id:`${h.activeAt}-${h.value}`,data:{matchedInstance:h}}))}},10505:(H,T,e)=>{"use strict";e.d(T,{$f:()=>y,HV:()=>b,J8:()=>i,S0:()=>p,V2:()=>m,VN:()=>E,Vv:()=>P,Zl:()=>x,__:()=>C,eQ:()=>u,fm:()=>S,lC:()=>h,mH:()=>d,pF:()=>v});var t=e(82897),n=e.n(t),c=e(79662),s=e(40286),r=e(46063),g=e(37190),f=e(45849),o=e(66367),l=e(60048),a=e(93411);function m(O,L,B){const w=(0,f.EG)(O),R=l.Yd(w,L),A=encodeURIComponent(l.$V(R)),U=encodeURIComponent(w);return(0,a.u)(`/alerting/${U}/${A}/view`,{returnTo:B})}function d(O,L){return(0,a.u)("/explore",{left:JSON.stringify({datasource:O,queries:[{refId:"A",datasource:O,expr:L}],range:{from:"now-1h",to:"now"}})})}function p(O){return O.reduce((L,{key:B,value:w})=>(L[B]=w,L),{})}const h=O=>{const L=O.queryString===void 0?void 0:String(O.queryString),B=O.alertState===void 0?void 0:String(O.alertState),w=O.dataSource===void 0?void 0:String(O.dataSource),R=O.ruleType===void 0?void 0:String(O.ruleType),A=O.groupBy===void 0?void 0:String(O.groupBy).split(",");return{queryString:L,alertState:B,dataSource:w,groupBy:A,ruleType:R}},y=O=>({queryString:O.get("queryString")??void 0,contactPoint:O.get("contactPoint")??void 0}),v=O=>{const L=O.queryString===void 0?void 0:String(O.queryString),B=O.silenceState===void 0?void 0:String(O.silenceState);return{queryString:L,silenceState:B}};function i(O){return Object.entries(O).map(([L,B])=>({key:L,value:B}))}function u(O,L,B){const w=new URLSearchParams(B);return L&&w.append(g.c4,L),`${O}?${w.toString()}`}function P(O,L){const B={alertname:L.name,...L.labels};return E(O,B)}function E(O,L){const B=new URLSearchParams;return B.append("alertmanager",O),(0,o.rz)(L).forEach((R,A)=>B.append(A,R)),(0,a.u)("/alerting/silence/new",B)}function C(O){return(0,a.u)(`/datasources/edit/${O.uid}`)}function b(O){return(0,a.u)(`/dashboards/f/${O}`)}function S(O,L,B,w=1e3){const R=new Date().getTime(),A=()=>O().catch(U=>{if(L(U)&&new Date().getTime()-R<B)return new Promise(I=>setTimeout(I,w)).then(A);throw U});return A()}const M={[r.bj.Alerting]:1,[r.x_.Firing]:1,[r.bj.Error]:1,[r.bj.Pending]:2,[r.x_.Pending]:2,[r.x_.Inactive]:2,[r.bj.NoData]:3,[r.bj.Normal]:4};function x(O,L){if(O===s.As.Importance)return(0,t.sortBy)(L,w=>[M[(0,r.ED)(w.state)],(0,c.pB)(w).toLocaleLowerCase()]);if(O===s.As.TimeAsc)return(0,t.sortBy)(L,w=>[new Date(w.activeAt)||new Date,(0,c.pB)(w).toLocaleLowerCase()]);if(O===s.As.TimeDesc)return(0,t.sortBy)(L,w=>[new Date(w.activeAt)||new Date,(0,c.pB)(w).toLocaleLowerCase()]).reverse();const B=(0,t.sortBy)(L,w=>(0,c.pB)(w).toLocaleLowerCase());return O===s.As.AlphaDesc&&B.reverse(),B}},46818:(H,T,e)=>{"use strict";e.d(T,{$b:()=>l,Ez:()=>a,PE:()=>d,i6:()=>f,jK:()=>o,kk:()=>m,op:()=>i,oq:()=>r,yR:()=>v});var t=e(32557),n=e(25318),c=e(54899),s=e(77582);const r=Object.freeze({loading:!1,result:void 0,error:void 0,dispatched:!1});function g(u,P=r,E){if(u.pending.match(E))return{result:P.result,loading:!0,error:P.error,dispatched:!0,requestId:E.meta.requestId};if(u.fulfilled.match(E)){if(P.requestId===void 0||P.requestId===E.meta.requestId)return{...P,result:E.payload,loading:!1,error:void 0}}else if(u.rejected.match(E)&&P.requestId===E.meta.requestId)return{...P,loading:!1,error:E.error};return P}function f(u,P){return(0,t.oM)({name:u,initialState:r,reducers:{},extraReducers:E=>E.addDefaultCase((C,b)=>g(P,C,b))})}function o(u,P,E){return(0,t.oM)({name:u,initialState:{},reducers:{},extraReducers:C=>C.addDefaultCase((b,S)=>{if((0,t.Gx)(P)(S)){const M=S,x=E(M.meta.arg);return{...b,[x]:g(P,b[x],M)}}return b})})}function l(u){return u.catch(P=>{throw{message:m(P),code:P.statusCode}})}function a(u,P){return u.then(E=>(P.successMessage&&s.h$.emit(n.SI.alertSuccess,[P.successMessage]),E)).catch(E=>{const C=m(E);throw s.h$.emit(n.SI.alertError,[`${P.errorMessage??"Error"}: ${C}`]),E})}function m(u){if((0,c.kW)(u))if(u.data?.message){let P=u.data?.message;return typeof u.data?.error=="string"&&(P+=`; ${u.data.error}`),P}else{if(Array.isArray(u.data)&&u.data.length&&u.data[0]?.message)return u.data.map(P=>P?.message).filter(P=>!!P).join(" ");if(u.statusText)return u.statusText}return u?.message||String(u)}function d(u){return Object.values(u).every(p)}function p(u){return u.dispatched&&!u.loading}function h(u){return Object.values(u).every(y)}function y(u){return u.dispatched&&!u.loading&&!u.error}function v(u){return Object.values(u).some(i)}function i(u){return u?u.dispatched&&u.loading:!1}},21767:(H,T,e)=>{"use strict";e.d(T,{DQ:()=>C,WL:()=>b,aR:()=>L,lN:()=>S,mI:()=>E,s0:()=>M,uZ:()=>i,yh:()=>u});var t=e(69311),n=e(33180),c=e(86647),s=e(22069),r=e(99822),g=e(97573),f=e(46063),o=e(67162),l=e(11376),a=e(94617),m=e(97953),d=e(37190),p=e(45849),h=e(10505),y=e(79662),v=e(58593);const i=()=>{const{canCreateGrafanaRules:A,canCreateCloudRules:U}=(0,m.Rv)();return Object.freeze({name:"",labels:[{key:"",value:""}],annotations:[{key:d.q6.summary,value:""},{key:d.q6.description,value:""},{key:d.q6.runbookURL,value:""}],dataSourceName:null,type:A?a.$.grafana:U?a.$.cloudAlerting:void 0,group:"",folder:null,queries:[],condition:"",noDataState:f.g0.NoData,execErrState:f.g0.Error,evaluateFor:"5m",evaluateEvery:l.E,namespace:"",expression:"",forTime:1,forTimeUnit:"m"})};function u(A){const{name:U,expression:I,forTime:N,forTimeUnit:F,type:D}=A;if(D===a.$.cloudAlerting)return{alert:U,for:`${N}${F}`,annotations:(0,h.S0)(A.annotations||[]),labels:(0,h.S0)(A.labels||[]),expr:I};if(D===a.$.cloudRecording)return{record:U,labels:(0,h.S0)(A.labels||[]),expr:I};throw new Error(`unexpected rule type: ${D}`)}function P(A){return[...(0,h.J8)(A||{}),{key:"",value:""}]}function E(A){const{name:U,condition:I,noDataState:N,execErrState:F,evaluateFor:D,queries:Y,isPaused:j}=A;if(I)return{grafana_alert:{title:U,condition:I,no_data_state:N,exec_err_state:F,data:Y.map(w),is_paused:Boolean(j)},for:D,annotations:(0,h.S0)(A.annotations||[]),labels:(0,h.S0)(A.labels||[])};throw new Error("Cannot create rule without specifying alert condition")}function C(A){const{ruleSourceName:U,namespace:I,group:N,rule:F}=A,D=i();if((0,p.HY)(U))if((0,y.Pc)(F)){const Y=F.grafana_alert;return{...D,name:Y.title,type:a.$.grafana,group:N.name,evaluateEvery:N.interval||D.evaluateEvery,evaluateFor:F.for||"0",noDataState:Y.no_data_state,execErrState:Y.exec_err_state,queries:Y.data,condition:Y.condition,annotations:P(F.annotations),labels:P(F.labels),folder:{title:I,id:Y.namespace_id},isPaused:Y.is_paused}}else throw new Error("Unexpected type of rule for grafana rules source");else if((0,y.cG)(F)){const Y=b(F);return{...D,...Y,type:a.$.cloudAlerting,dataSourceName:U,namespace:I,group:N.name}}else if((0,y.yF)(F)){const Y=S(F);return{...D,...Y,type:a.$.cloudRecording,dataSourceName:U,namespace:I,group:N.name}}else throw new Error("Unexpected type of rule for cloud rules source")}function b(A){const U=i(),[I,N]=A.for?(0,v.bG)(A.for):[U.forTime,U.forTimeUnit];return{name:A.alert,expression:A.expr,forTime:I,forTimeUnit:N,annotations:P(A.annotations),labels:P(A.labels)}}function S(A){return{name:A.record,expression:A.expr,labels:P(A.labels)}}const M=()=>{const A=(0,p.P)();if(!A)return[...x("A","B")];const U=(0,t.Rr)();return[{refId:"A",datasourceUid:A.uid,queryType:"",relativeTimeRange:U,model:{refId:"A",hide:!1}},...x("B","C")]},x=(...A)=>{const U=A[0],I=A[1],N={refId:A[0],hide:!1,type:g.Us.reduce,datasource:{uid:g.Yq,type:s.hr.type},conditions:[{type:"query",evaluator:{params:[],type:o.$.IsAbove},operator:{type:"and"},query:{params:[U]},reducer:{params:[],type:"last"}}],reducer:"last",expression:"A"},F={refId:I,hide:!1,type:g.Us.threshold,datasource:{uid:g.Yq,type:s.hr.type},conditions:[{type:"query",evaluator:{params:[0],type:o.$.IsAbove},operator:{type:"and"},query:{params:[I]},reducer:{params:[],type:"last"}}],expression:U};return[{refId:U,datasourceUid:g.Yq,queryType:"",model:N},{refId:I,datasourceUid:g.Yq,queryType:"",model:F}]},O=async(A,U,I,N,F,D)=>{const Y=[];for(const j of A){const K=await(0,c.F)().get(j.datasource?.uid?j.datasource:N),z={uid:K.uid,type:K.type},Z=n.relativeToTimeRange(U),{interval:ae,intervalMs:J}=B(Z,D??K.interval,F),oe={__interval:{text:ae,value:ae},__interval_ms:{text:J,value:J},...I},Ee=K.interpolateVariablesInQueries?await K.interpolateVariablesInQueries([j],oe)[0]:j;if(z.uid===g.Yq){const me={refId:Ee.refId,queryType:"",relativeTimeRange:U,datasourceUid:g.Yq,model:Ee};Y.push(me)}else{const me=(0,c.F)().getInstanceSettings(z);if(me&&me.meta.alerting){const re={refId:Ee.refId,queryType:Ee.queryType??"",relativeTimeRange:U,datasourceUid:me.uid,model:{...Ee,maxDataPoints:F,intervalMs:J}};Y.push(re)}}}return Y},L=async(A,U)=>{const{targets:I}=A;if(!A.id||!U.uid)return;const N=n.timeRangeToRelative(n.convertRawToRange(U.time)),F=await O(I,N,A.scopedVars||{},A.datasource??void 0,A.maxDataPoints??void 0,A.interval??void 0);if(!F.length||!F.find(K=>K.datasourceUid!==g.Yq))return;if(!F.find(K=>K.datasourceUid===g.Yq)){const[K,z]=x((0,r.Hs)(F),"-");F.push(K);const[Z,ae]=x(K.refId,(0,r.Hs)(F));F.push(ae)}const{folderId:D,folderTitle:Y}=U.meta;return{type:a.$.grafana,folder:D&&Y?{id:D,title:Y}:void 0,queries:F,name:A.title,condition:F[F.length-1].refId,annotations:[{key:d.q6.dashboardUID,value:U.uid},{key:d.q6.panelID,value:String(A.id)}]}};function B(A,U,I){return I?n.calculateInterval(A,I,U):U&&n.intervalToMs(U)>1e3?{interval:U,intervalMs:n.intervalToMs(U)}:{interval:"1s",intervalMs:1e3}}function w(A){const U=A.model;return R(U)&&U.instant&&U.range?{...A,model:{...U,range:!0,instant:!1}}:A}function R(A){return"expr"in A&&"instant"in A&&"range"in A}},60048:(H,T,e)=>{"use strict";e.d(T,{$V:()=>v,CK:()=>g,Dg:()=>f,OA:()=>y,Om:()=>u,Yd:()=>r,Zk:()=>c,s0:()=>C});var t=e(45849),n=e(79662);function c(b,S,M,x){return(0,n.Pc)(x)?{uid:x.grafana_alert.uid,ruleSourceName:"grafana"}:{ruleSourceName:b,namespace:S,groupName:M,rulerRuleHash:u(x)}}function s(b,S,M,x){return{ruleSourceName:b,namespace:S,groupName:M,ruleHash:P(x)}}function r(b,S){const M=S.namespace.name,x=S.group.name;if(S.rulerRule)return c(b,M,x,S.rulerRule);if(S.promRule)return s(b,M,x,S.promRule);throw new Error("Could not create an id for a rule that is missing both `rulerRule` and `promRule`.")}function g(b){return c(b.ruleSourceName,b.namespace,b.group.name,b.rule)}function f(b,S){return(0,n.Kl)(b)&&(0,n.Kl)(S)?b.uid===S.uid:(0,n.E4)(b)&&(0,n.E4)(S)?b.groupName===S.groupName&&b.namespace===S.namespace&&b.rulerRuleHash===S.rulerRuleHash&&b.ruleSourceName===S.ruleSourceName:(0,n.qE)(b)&&(0,n.qE)(S)?b.groupName===S.groupName&&b.namespace===S.namespace&&b.ruleHash===S.ruleHash&&b.ruleSourceName===S.ruleSourceName:!1}const o="cri",l="pri";function a(b){return b.replace(/\$/g,"_DOLLAR_")}function m(b){return b.replace(/\_DOLLAR\_/g,"$")}function d(b){return b.replace(/\//g,"").replace(/\\/g,"")}function p(b){return b.replace(/\x1f/g,"/").replace(/\x1e/g,"\\")}function h(b,S=!1){const x=(S?decodeURIComponent(b):b).split("$");if(x.length===1)return{uid:b,ruleSourceName:"grafana"};if(x.length===5){const[O,L,B,w,R]=x.map(m).map(p);if(O===o)return{ruleSourceName:L,namespace:B,groupName:w,rulerRuleHash:R};if(O===l)return{ruleSourceName:L,namespace:B,groupName:w,ruleHash:R}}throw new Error(`Failed to parse rule location: ${b}`)}function y(b,S=!1){if(b)try{return h(b,S)}catch{return}}function v(b){return(0,n.Kl)(b)?b.uid:(0,n.E4)(b)?[o,b.ruleSourceName,b.namespace,b.groupName,b.rulerRuleHash].map(String).map(a).map(d).join("$"):[l,b.ruleSourceName,b.namespace,b.groupName,b.ruleHash].map(String).map(a).map(d).join("$")}function i(b){let S=0;if(b.length===0)return S;for(let M=0;M<b.length;M++){const x=b.charCodeAt(M);S=(S<<5)-S+x,S=S&S}return S}function u(b){if((0,n.yF)(b))return i(JSON.stringify([b.record,b.expr,E(b.labels)])).toString();if((0,n.cG)(b))return i(JSON.stringify([b.alert,b.expr,E(b.annotations),E(b.labels)])).toString();if((0,n.Pc)(b))return b.grafana_alert.uid;throw new Error("only recording and alerting ruler rules can be hashed")}function P(b){if((0,n.OP)(b))return i(JSON.stringify([b.type,b.query,E(b.labels)])).toString();if((0,n.x_)(b))return i(JSON.stringify([b.type,b.query,E(b.annotations),E(b.labels)])).toString();throw new Error("only recording and alerting rules can be hashed")}function E(b){return JSON.stringify(Object.entries(b||{}).sort((S,M)=>S[0].localeCompare(M[0])))}function C(b){return(0,n.Kl)(b)?t.GC:b.ruleSourceName}},79662:(H,T,e)=>{"use strict";e.d(T,{Aq:()=>C,E4:()=>y,Jq:()=>M,Kl:()=>h,OP:()=>o,PW:()=>x,Pc:()=>m,SS:()=>P,Wd:()=>v,ZL:()=>E,cG:()=>l,m$:()=>p,pB:()=>d,qE:()=>i,ub:()=>S,vU:()=>u,x_:()=>f,yF:()=>a});var t=e(82897),n=e.n(t),c=e(23309),s=e(46063),r=e(734),g=e(37190);function f(O){return typeof O=="object"&&O.type===s.pz.Alerting}function o(O){return typeof O=="object"&&O.type===s.pz.Recording}function l(O){return typeof O=="object"&&"alert"in O}function a(O){return typeof O=="object"&&"record"in O}function m(O){return typeof O=="object"&&"grafana_alert"in O}function d(O){return JSON.stringify(O.labels)}function p(O){return O.error&&O.error?.message?.includes(g.jZ)}function h(O){return"uid"in O}function y(O){return"rulerRuleHash"in O}function v(O){return Object.values(s.pz).includes(O)}function i(O){return"ruleHash"in O}function u(O){switch(O){case"ok":return r.VG.Ok;case"nodata":return r.VG.NoData;case"error":case"err":return r.VG.Error;case"unknown":return r.VG.Unknown;default:return}}function P(O){return O===s.x_.Inactive?"Normal":(0,t.capitalize)(O)}const E=O=>O.reduce((L,{dataSourceName:B,name:w,groups:R})=>(R.forEach(({name:A,rules:U})=>{U.forEach(I=>{f(I)&&L.push({dataSourceName:B,namespaceName:w,groupName:A,rule:I})})}),L),[]);function C(O){let L;return Object.values(c.Z).includes(O)?L=O:L=(0,s.ED)(O),b[L]}const b={[s.x_.Inactive]:"good",[s.x_.Firing]:"bad",[s.x_.Pending]:"warning",[s.bj.Alerting]:"bad",[s.bj.Error]:"bad",[s.bj.NoData]:"info",[s.bj.Normal]:"good",[s.bj.Pending]:"warning",[c.Z.NoData]:"info",[c.Z.Paused]:"warning",[c.Z.Alerting]:"bad",[c.Z.OK]:"good",[c.Z.Pending]:"warning",[c.Z.Unknown]:"info"};function S(O){return O.alerts?O.alerts.reduce((L,B)=>{const w=(0,s.ED)(B.state)!==s.bj.Normal;if(B.activeAt&&w){const R=new Date(B.activeAt);if(L===null||L.getTime()>R.getTime())return R}return L},null):null}function M(O){return Array.isArray(O.source_tenants)}function x(O){return m(O)?O.grafana_alert.title:l(O)?O.alert:a(O)?O.record:""}},58593:(H,T,e)=>{"use strict";e.d(T,{gV:()=>m,wd:()=>g,bG:()=>n,nd:()=>a,qr:()=>s});var t=(d=>(d.seconds="s",d.minutes="m",d.hours="h",d.days="d",d.weeks="w",d))(t||{});function n(d){const p=d.match(/(\d+)(\w+)/);if(p)return[Number(p[1]),p[2]];throw new Error(`Invalid interval description: ${d}`)}function c(d){const{sec:p,count:h}=describeInterval(d);return p*h}const s=Object.entries(t).map(([d,p])=>({label:d[0].toUpperCase()+d.slice(1),value:p}));function r(d){return durationToMilliseconds(parseDuration(d))}function g(d){try{return a(d),!0}catch{return!1}}const f={ms:1,s:1e3,m:60*1e3,h:60*60*1e3,d:24*60*60*1e3,w:7*24*60*60*1e3,y:365*24*60*60*1e3},o=new RegExp(/^(?:(?<value>\d+)(?<type>ms|s|m|h|d|w|y))|0$/),l=new Error(`Must be of format "(number)(unit)", for example "1m", or just "0". Available units: ${Object.values(t).join(", ")}`);function a(d){let p=d,h=[];function y(i){const u=o.exec(i),P=u?.groups?.value&&u?.groups?.type;if(!u||!P)throw l;u&&u.groups?.value&&u.groups?.type&&(p=p.replace(u[0],""),h.push([Number(u.groups.value),u.groups.type])),p&&y(p)}if(y(d),!h.length)throw l;return h.reduce((i,[u,P])=>{const E=u*f[P];return i+E},0)}const m=d=>d.includes("0001-01-01T00")},93411:(H,T,e)=>{"use strict";e.d(T,{u:()=>n});var t=e(35645);function n(c,s){const r=new URLSearchParams(s);return`${t.v.appSubUrl}${c}?${r.toString()}`}},70659:(H,T,e)=>{"use strict";e.d(T,{Dl:()=>s,_E:()=>c,lK:()=>r,xD:()=>n});var t=e(54899);function n(g){return(0,t.i)().post("/api/annotations",g)}function c(g){return(0,t.i)().put(`/api/annotations/${g.id}`,g)}function s(g){return(0,t.i)().delete(`/api/annotations/${g.id}`)}async function r(){return(await(0,t.i)().get("/api/annotations/tags")).result.tags.map(({tag:f,count:o})=>({term:f,count:o}))}},86953:(H,T,e)=>{"use strict";e.d(T,{r:()=>a});var t=e(53786),n=e(98356),c=e(2101),s=e(33180),r=e(40400),g=e(75434),f=e(66228);let o=100;function l(){return"AQ"+o++}function a(m,d,p){const h={...f.yA,...d.annotations},y=h.prepareAnnotation(p);if(!y)return(0,t.of)({});const v=h.prepareQuery(y);if(!v)return(0,t.of)({});const i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,u=s.calculateInterval(m.range,i,d.interval),P={__interval:{text:u.interval,value:u.interval},__interval_ms:{text:u.intervalMs.toString(),value:u.intervalMs},__annotation:{text:y.name,value:y}},E={startTime:Date.now(),requestId:l(),range:m.range,maxDataPoints:i,scopedVars:P,...u,app:r.zj.Dashboard,publicDashboardAccessToken:m.dashboard.meta.publicDashboardAccessToken,timezone:m.dashboard.timezone,targets:[{...v,refId:"Anno"}]};return(0,g.v7)(d,E).pipe((0,n.z)(C=>C.series?h.processEvents(y,C.series).pipe((0,c.U)(b=>({panelData:C,events:b}))):(0,t.of)({panelData:C,events:[]})))}},66228:(H,T,e)=>{"use strict";e.d(T,{$w:()=>u,r0:()=>p,yA:()=>m,yr:()=>P});var t=e(82897),n=e.n(t),c=e(53786),s=e(98356),r=e(2101),g=e(74940),f=e(14582),o=e(89890),l=e(20442),a=e(47694);const m={prepareAnnotation:E=>{if((0,t.isString)(E?.query)){const{query:C,...b}=E;return{...b,target:{refId:"annotation_query",query:C},mappings:{}}}return E},prepareQuery:E=>E.target,processEvents:(E,C)=>v(C,E.mappings)};function d(){return E=>E.pipe((0,s.z)(C=>{if(!C?.length)return(0,c.of)(void 0);if(C.length===1)return(0,c.of)(C[0]);const b={interpolate:S=>S};return(0,c.of)(C).pipe(g.Y.mergeTransformer.operator({},b),(0,r.U)(S=>S[0]))}))}const p=[{key:"time",field:E=>E.fields.find(C=>C.type===f.fS.time),placeholder:"time, or the first time field"},{key:"timeEnd",help:"When this field is defined, the annotation will be treated as a range"},{key:"title"},{key:"text",field:E=>E.fields.find(C=>C.type===f.fS.string),placeholder:"text, or the first text field"},{key:"tags",split:",",help:"The results will be split on comma (,)"},{key:"id"}],h=[{key:"color"},{key:"isRegion"},{key:"source"}],y=[...a.vc.isPublicDashboardView?h:[],...p,{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"},{key:"dashboardId"},{key:"dashboardUID"}];function v(E,C){return(0,c.of)(E).pipe(d(),(0,r.U)(b=>{if(!b?.length)return[];let S=!1,M=!1;const x={};for(const B of b.fields){const w=(0,o.C)(B,b);x[w.toLowerCase()]=B}C||(C={});const O=[];for(const B of y){const w=C[B.key]||{};if(w.source===l.L.Skip)continue;const R={key:B.key,split:B.split};if(w.source===l.L.Text)R.text=w.value;else{const A=(w.value||B.key).toLowerCase();R.field=x[A],!R.field&&B.field&&(R.field=B.field(b))}(R.field||R.text)&&(O.push(R),R.key==="time"?S=!0:R.key==="text"&&(M=!0))}if(!S||!M)return console.error("Cannot process annotation fields. No time or text present."),[];const L=[];for(let B=0;B<b.length;B++){const w={type:"default",color:"red"};for(const R of O){let A;if(R.text)A=R.text;else if(R.field&&(A=R.field.values.get(B),A!==void 0&&R.regex)){const U=R.regex.exec(A);U&&(A=U[1]?U[1]:U[0])}A!=null&&(R.split&&typeof A=="string"&&(A=A.split(",")),w[R.key]=A)}L.push(w)}return L}))}const i=["prometheus","loki","elasticsearch","grafana-opensearch-datasource"];function u(E){const{type:C}=E;return!(C==="datasource"||i.includes(C))}function P(E){const{type:C}=E;return i.includes(C)}},56777:(H,T,e)=>{"use strict";e.d(T,{ZP:()=>a,cB:()=>o,dF:()=>g,iK:()=>s,j4:()=>r,ql:()=>f});var t=e(32557);const n={hasFetched:!1,includeExpired:!1,keys:[],keysIncludingExpired:[],searchQuery:"",apiKeysMigrated:!1},c=(0,t.oM)({name:"apiKeys",initialState:n,reducers:{apiKeysLoaded:(m,d)=>{const{keys:p,keysIncludingExpired:h}=d.payload,y=d.payload.keys.length===0&&d.payload.keysIncludingExpired.length>0?!0:m.includeExpired;return{...m,hasFetched:!0,keys:p,keysIncludingExpired:h,includeExpired:y}},apiKeysMigrationStatusLoaded:(m,d)=>({...m,apiKeysMigrated:d.payload}),setSearchQuery:(m,d)=>({...m,searchQuery:d.payload}),includeExpiredToggled:m=>({...m,includeExpired:!m.includeExpired}),isFetching:m=>({...m,hasFetched:!1})}}),{apiKeysLoaded:s,includeExpiredToggled:r,isFetching:g,setSearchQuery:f,apiKeysMigrationStatusLoaded:o}=c.actions,a={apiKeys:c.reducer}},65580:(H,T,e)=>{"use strict";e.d(T,{t:()=>y});var t=e(68404),n=e(62626),c=e(75118),s=e(54899),r=e(52423),g=e(72648),f=e(68226),o=e(97379),l=e(54391),a=e(41959);const m=({message:v})=>{const i=(0,g.wW)(d);let u="#34BA18",P="System",E="/public/img/grafana_icon.svg";v.userId>0&&(u="#19a2e7",P=v.user.login,E=v.user.avatarUrl);const C="#898989",b=new Date(v.created*1e3).toLocaleTimeString(),S=(0,a.a)(v.content,{breaks:!0});return t.createElement("div",{className:i.comment},t.createElement("div",{className:i.avatarContainer},t.createElement("img",{src:E,alt:"User avatar",className:i.avatar})),t.createElement("div",null,t.createElement("div",null,t.createElement("span",{style:{color:u}},P),"\xA0",t.createElement("span",{style:{color:C}},b)),t.createElement("div",null,t.createElement(l.Z,{html:S,className:i.content}))))},d=v=>({comment:r.css`
    margin-bottom: 10px;
    padding-top: 3px;
    padding-bottom: 3px;
    word-break: break-word;
    display: flex;
    flex-direction: row;
    align-items: top;

    :hover {
      background-color: #1e1f24;
    }

    blockquote {
      padding: 0 0 0 10px;
      margin: 0 0 10px;
    }
  `,avatarContainer:r.css`
    align-self: left;
    margin-top: 6px;
    margin-right: 10px;
  `,avatar:r.css`
    width: 30px;
    height: 30px;
  `,content:r.css`
    display: block;
    overflow: hidden;

    p {
      margin: 0;
      padding: 0;
    }

    blockquote p {
      font-size: 14px;
      padding-top: 4px;
    }

    a {
      color: #43c57e;
    }

    a:hover {
      text-decoration: underline;
    }
  `}),p=({comments:v,packetCounter:i,addComment:u})=>{const P=(0,g.wW)(h),[E,C]=(0,t.useState)(""),[b,S]=(0,t.useState)(0),M=(0,t.useRef)(null);(0,t.useLayoutEffect)(()=>{M.current?S(M.current.offsetHeight):S(0)},[i]);const x=L=>{const B=L.currentTarget;C(B.value)},O=async L=>{L?.key==="Enter"&&!L?.shiftKey&&(L.preventDefault(),E.length>0&&await u(E)&&C(""))};return t.createElement(f.$,{scrollTop:b},t.createElement("div",{ref:M,className:P.commentViewContainer},v.map(L=>t.createElement(m,{key:L.id,message:L})),t.createElement(o.K,{placeholder:"Write a comment",value:E,onChange:x,onKeyPress:O,autoFocus:!0})))},h=v=>({commentViewContainer:r.css`
    margin: 5px;
  `});class y extends t.PureComponent{constructor(i){super(i),this.packetCounter=0,this.getLiveChannel=()=>{const u=(0,c.gj)();if(!u){console.error('Grafana live not running, enable "live" feature toggle');return}const P=this.getLiveAddress();if(P)return u.getStream(P)},this.getLiveAddress=()=>({scope:n.z.Grafana,namespace:"comment",path:`${this.props.objectType}/${this.props.objectId}`}),this.updateSubscription=()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0);const u=this.getLiveChannel();u&&(this.subscription=u.subscribe({next:P=>{if((0,n.RL)(P)){const{commentCreated:E}=P.message;E&&(this.setState(C=>({messages:[...C.messages,E]})),this.packetCounter++)}}}))},this.addComment=async u=>{const P=await(0,s.i)().post("/api/comments/create",{objectType:this.props.objectType,objectId:this.props.objectId,content:u});return console.log(P),!0},this.state={messages:[],value:""}}async componentDidMount(){const i=await(0,s.i)().post("/api/comments/get",{objectType:this.props.objectType,objectId:this.props.objectId});this.packetCounter++,this.setState({messages:i.comments}),this.updateSubscription()}render(){return t.createElement(p,{comments:this.state.messages,packetCounter:this.packetCounter,addComment:this.addComment})}}},86475:(H,T,e)=>{"use strict";e.d(T,{D:()=>t,Z:()=>n});const t="connections",n={Base:`/${t}`,YourConnections:`/${t}/your-connections`,DataSources:`/${t}/your-connections/datasources`,DataSourcesNew:`/${t}/your-connections/datasources/new`,DataSourcesEdit:`/${t}/your-connections/datasources/edit/:uid`,DataSourcesDashboards:`/${t}/your-connections/datasources/edit/:uid/dashboards`,ConnectData:`/${t}/connect-data`,DataSourcesDetails:`/${t}/datasources/:id`}},56090:(H,T,e)=>{"use strict";e.d(T,{M:()=>s});var t=e(70356),n=e(24231),c=e(74509);function s(r){const{uid:g}=(0,t.UO)(),f=(0,t.TH)(),o=(0,n.wl)(g),l=(0,c.bJ)(o.type),a=new URLSearchParams(f.search),m=(0,n.MF)(g,r||a.get("page"));return{navId:"connections-your-connections-datasources",pageNav:{...m.main,text:o.name,subTitle:`Type: ${l?.name}`,active:!0,children:(m.main.children||[]).map(p=>({...p,url:p.url?.replace("datasources/edit/","/connections/your-connections/datasources/edit/")}))}}}},10655:(H,T,e)=>{"use strict";e.d(T,{Mi:()=>d,Rh:()=>l,WJ:()=>h,Ym:()=>a,bS:()=>p,zZ:()=>m});var t=e(32504),n=e(73736),c=e(3363),s=e(54899),r=e(659),g=e(60499);const f=({baseUrl:y})=>async v=>{try{const{data:i,...u}=await(0,c.n)((0,s.i)().fetch({...v,url:y+v.url,showErrorAlert:v.showErrorAlert}));return{data:i,meta:u}}catch(i){return v.manageError?v.manageError(i):{error:i}}},o=y=>({error:y.status!==404?y:null}),l=(0,t.LC)({reducerPath:"publicDashboardApi",baseQuery:(0,n.XD)(f({baseUrl:"/api/dashboards"}),{maxRetries:0}),tagTypes:["PublicDashboard","AuditTablePublicDashboard"],refetchOnMountOrArgChange:!0,endpoints:y=>({getPublicDashboard:y.query({query:v=>({url:`/uid/${v}/public-dashboards`,manageError:o,showErrorAlert:!1}),async onQueryStarted(v,{dispatch:i,queryFulfilled:u}){try{await u}catch(P){const E=P;i((0,r.$l)((0,g.t_)(E?.error?.data?.message)))}},providesTags:(v,i,u)=>[{type:"PublicDashboard",id:u}]}),createPublicDashboard:y.mutation({query:v=>({url:`/uid/${v.dashboard.uid}/public-dashboards`,method:"POST",data:v.payload}),async onQueryStarted({dashboard:v,payload:i},{dispatch:u,queryFulfilled:P}){const{data:E}=await P;u((0,r.$l)((0,g.AT)("Public dashboard created!"))),v.updateMeta({publicDashboardUid:E.uid,publicDashboardEnabled:E.isEnabled})},invalidatesTags:(v,i,{payload:u})=>[{type:"PublicDashboard",id:u.dashboardUid}]}),updatePublicDashboard:y.mutation({query:v=>({url:`/uid/${v.dashboard.uid}/public-dashboards/${v.payload.uid}`,method:"PUT",data:v.payload}),extraOptions:{maxRetries:0},async onQueryStarted({dashboard:v,payload:i},{dispatch:u,queryFulfilled:P}){const{data:E}=await P;u((0,r.$l)((0,g.AT)("Public dashboard updated!"))),v.updateMeta({publicDashboardUid:E.uid,publicDashboardEnabled:E.isEnabled})},invalidatesTags:(v,i,{payload:u})=>[{type:"PublicDashboard",id:u.dashboardUid}]}),listPublicDashboards:y.query({query:()=>({url:"/public-dashboards"}),providesTags:["AuditTablePublicDashboard"]}),deletePublicDashboard:y.mutation({query:v=>({url:`/uid/${v.dashboardUid}/public-dashboards/${v.uid}`,method:"DELETE"}),async onQueryStarted({dashboard:v,uid:i},{dispatch:u,queryFulfilled:P}){await P,u((0,r.$l)((0,g.AT)("Public dashboard deleted!"))),v?.updateMeta({publicDashboardUid:i,publicDashboardEnabled:!1})},invalidatesTags:(v,i,{dashboardUid:u})=>[{type:"PublicDashboard",id:u},"AuditTablePublicDashboard"]})})}),{useGetPublicDashboardQuery:a,useCreatePublicDashboardMutation:m,useUpdatePublicDashboardMutation:d,useDeletePublicDashboardMutation:p,useListPublicDashboardsQuery:h}=l},134:(H,T,e)=>{"use strict";e.d(T,{E:()=>a});var t=e(82897),n=e(86647),c=e(47694),s=e(86648),r=e(6297),g=e(59096),f=e(15546),o=e(10672);function l(m){return m.libraryPanel&&typeof m.libraryPanel.name=="string"&&typeof m.libraryPanel.uid=="string"}class a{async makeExportable(d){d.cleanUpRepeats();const p=d.getSaveModelClone();p.id=null,d.processRepeats();const h=[],y={},v={},i={},u=new Map;for(const b of p.getVariables())i[b.name]=b;const P=(b,S)=>{if(b.datasource===void 0){b.datasource=S;return}let M=b.datasource,x=null;const O=M?.uid;return O&&O.indexOf("$")===0&&(x=i[O.substring(1)],x&&x.current&&(M=x.current.value)),(0,n.F)().get(M).then(L=>{if(L.meta?.builtIn||(y["datasource"+L.meta?.id]={type:"datasource",id:L.meta.id,name:L.meta.name,version:L.meta.info.version||"1.0.0"},x))return;const B="DS_"+L.name.replace(" ","_").toUpperCase();v[B]={name:B,label:L.name,description:"",type:"datasource",pluginId:L.meta?.id,pluginName:L.meta?.name},b.datasource={type:L.meta.id,uid:"${"+B+"}"}})},E=async b=>{if(b.type!=="row"){if(await P(b),b.targets)for(const M of b.targets)await P(M,b.datasource);const S=c.ZP.panels[b.type];S&&(y["panel"+S.id]={type:"panel",id:S.id,name:S.name,version:S.info.version})}},C=async b=>{if((0,r.V)(b)){const{name:S,uid:M}=b.libraryPanel;let x=b.libraryPanel.model;x||(x=(await(0,s.Mh)(M,!0)).model);const{gridPos:O,id:L,...B}=x;u.has(M)||u.set(M,{name:S,uid:M,kind:g.V.Panel,model:B})}};try{for(const M of p.panels)if(await E(M),M.collapsed!==void 0&&M.collapsed===!0&&M.panels)for(const x of M.panels)await E(x);for(const M of p.getVariables())(0,f.Xh)(M)&&(await P(M),M.options=[],M.current={},M.refresh=M.refresh!==o.Bd.never?M.refresh:o.Bd.onDashboardLoad);for(const M of p.annotations.list)await P(M);y.grafana={type:"grafana",id:"grafana",name:"Grafana",version:c.ZP.buildInfo.version},(0,t.each)(v,M=>{h.push(M)});for(const M of d.panels)if(await C(M),M.collapsed!==void 0&&M.collapsed===!0&&M.panels)for(const x of M.panels)await C(x);for(const M of p.getVariables())if((0,f.VC)(M)){const x="VAR_"+M.name.replace(" ","_").toUpperCase();h.push({name:x,type:"constant",label:M.label||M.name,value:M.query,description:""}),M.query="${"+x+"}",M.current={value:M.query,text:M.query,selected:!1},M.options=[M.current]}const b=[...u.entries()].reduce((M,[x,O])=>(M[x]=O,M),{}),S=(0,t.defaults)({__inputs:h,__elements:b,__requires:(0,t.sortBy)(y,["id"])},p);for(let M=0;M<S.panels.length;M++){const x=S.panels[M];l(x)&&(S.panels[M]={gridPos:x.gridPos,id:x.id,libraryPanel:{uid:x.libraryPanel.uid,name:x.libraryPanel.name}})}return S}catch(b){return console.error("Export failed:",b),{error:b}}}}},60721:(H,T,e)=>{"use strict";e.d(T,{NN:()=>Ee,hf:()=>me,ZP:()=>le});var t=e(52423),n=e(68404),c=e(36635),s=e(70356),r=e(8928),g=e(83383),f=e(68183),o=e(37932),l=e(32434),a=e(5191),m=e(98102),d=e(34719),p=e(26202),h=e(64319),y=e(8125),v=e(35224),i=e(95379),u=e(89097),P=e(47694),E=e(34177),C=e(60499),b=e(77582);function S(ee,se){const[Q,G]=(0,n.useState)();return(0,n.useEffect)(()=>{const q=ee.subscribe(se,G);return()=>q.unsubscribe()},[ee,se]),Q}var M=e(35287),x=e(72648),O=e(35029),L=e(65580);const B=({dashboard:ee,onDismiss:se})=>{const Q=(0,x.wW)(w);return n.createElement(O.u,{isOpen:!0,title:"Dashboard comments",icon:"save",onDismiss:se,className:Q.modal},n.createElement(L.t,{objectType:"dashboard",objectId:ee.uid}))},w=ee=>({modal:t.css`
    width: 500px;
    height: 60vh;
  `});var R=e(7196),A=e(18262),U=e(10079),I=e(54294),N=e(81168),F=e(45984),D=e(61962),Y=e(9398),j=e(64503),K=e(37877);const z={setStarred:D.OQ,updateTimeZoneForSession:I.YT},Z=(0,c.connect)(null,z),ae=f.wl.pages.Dashboard.DashNav,J=[],oe=[];function Ee(ee){J.push(ee)}function me(ee){oe.push(ee)}const re=n.memo(ee=>{const se=(0,l.N)(),{chrome:Q}=(0,E.p)(),{showModal:G,hideModal:q}=(0,n.useContext)(a.kr);S(ee.dashboard.events,F.hS);const X=ee.dashboard.snapshot?.originalUrl??"",de=()=>{window.location.href=r.QX.sanitizeUrl(ee.dashboard.snapshot.originalUrl)},Be=(0,C.iG)(),ke=()=>{try{const Te=new URL(r.QX.sanitizeUrl(X),P.ZP.appUrl),Ke=new URL(P.ZP.appUrl);Te.host!==Ke.host?b.h$.publish(new F.Dn({component:m.s,props:{title:"Proceed to external site?",modalClass:pe,body:n.createElement(n.Fragment,null,n.createElement("p",null,"This link connects to an external website at"," ",n.createElement("code",null,X)),n.createElement("p",null,"Are you sure you'd like to proceed?")),confirmVariant:"primary",confirmText:"Proceed",onConfirm:de}})):de()}catch(Te){Be.error("Invalid URL",Te instanceof Error?Te.message:void 0)}},He=()=>{const Te=(0,Y.h4)(),{dashboard:Ke,setStarred:ge}=ee;Te.starDashboard(Ke.id,Boolean(Ke.meta.isStarred)).then(Me=>{ge({id:Ke.uid,title:Ke.title,url:Ke.meta.url??"",isStarred:Me}),Ke.meta.isStarred=Me,se()})},ue=()=>{o.E1.partial({viewPanel:null})},Oe=()=>{Q.onToggleKioskMode()},Fe=()=>{o.E1.partial({editview:"settings"})},Ie=()=>{U.r0.prev()},we=()=>{U.r0.next()},Re=()=>{U.r0.stop(),se()},_e=(Te,Ke)=>{Te.map((ge,Me)=>{const ye=ge.component,fe=n.createElement(ye,{...ee,key:`button-custom-${Me}`});typeof ge.index=="number"?Ke.splice(ge.index,0,fe):Ke.push(fe)})},et=()=>U.r0.isPlaying;(0,n.useEffect)(()=>{const Te=ee.dashboard,Ke=ee.shareModalActiveTab,{canShare:ge}=Te.meta;return ge&&Ke&&G(A.ShareModal,{dashboard:Te,onDismiss:q,activeTab:Ke}),()=>{q()}},[G,q,ee.dashboard,ee.shareModalActiveTab]);const qe=()=>{const{dashboard:Te,kioskMode:Ke}=ee,{canStar:ge,canShare:Me,isStarred:ye}=Te.meta,fe=[];if(Ke||et())return[];if(ge){let he=ye?(0,M.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,M.t)("dashboard.toolbar.mark-favorite","Mark as favorite");fe.push(n.createElement(j.u,{tooltip:he,icon:ye?"favorite":"star",iconType:ye?"mono":"default",iconSize:"lg",onClick:He,key:"button-star"}))}return Me&&fe.push(n.createElement(a.JY,{key:"button-share"},({showModal:he,hideModal:De})=>n.createElement(j.u,{tooltip:(0,M.t)("dashboard.toolbar.share","Share dashboard or panel"),icon:"share-alt",iconSize:"lg",onClick:()=>{he(A.ShareModal,{dashboard:Te,onDismiss:De})}}))),Te.meta.publicDashboardEnabled&&fe.push(n.createElement(d.V,{key:"public-dashboard",name:"Public",colorIndex:5,"data-testid":ae.publicDashboardTag})),Te.uid&&P.ZP.featureToggles.dashboardComments&&fe.push(n.createElement(a.JY,{key:"button-dashboard-comments"},({showModal:he,hideModal:De})=>n.createElement(j.u,{tooltip:(0,M.t)("dashboard.toolbar.comments-show","Show dashboard comments"),icon:"comment-alt-message",iconSize:"lg",onClick:()=>{he(B,{dashboard:Te,onDismiss:De})}}))),_e(J,fe),fe},Je=()=>n.createElement(p.h,{key:"playlist-buttons"},n.createElement(h.h,{tooltip:(0,M.t)("dashboard.toolbar.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:Ie,narrow:!0}),n.createElement(h.h,{onClick:Re},n.createElement(M.cC,{i18nKey:"dashboard.toolbar.playlist-stop"},"Stop playlist")),n.createElement(h.h,{tooltip:(0,M.t)("dashboard.toolbar.playlist-next","Go to next dashboard"),icon:"forward",onClick:we,narrow:!0})),lt=()=>{const{dashboard:Te,updateTimeZoneForSession:Ke,hideTimePicker:ge}=ee;return ge?null:n.createElement(K.C,{dashboard:Te,onChangeTimeZone:Ke,key:"time-controls"})},at=()=>{const{dashboard:Te,onAddPanel:Ke,isFullscreen:ge,kioskMode:Me}=ee,{canSave:ye,canEdit:fe,showSettings:he}=Te.meta,{snapshot:De}=Te,Ae=De&&De.originalUrl,Ne=[],Ze=P.ZP.featureToggles.topnav?null:n.createElement(h.h,{tooltip:(0,M.t)("dashboard.toolbar.tv-button","Cycle view mode"),icon:"monitor",onClick:Oe,key:"tv-button"});return et()?[Je(),lt()]:Me===N.KioskMode.TV?[lt(),Ze]:(fe&&!ge&&Ne.push(n.createElement(h.h,{tooltip:(0,M.t)("dashboard.toolbar.add-panel","Add panel"),icon:"panel-add",onClick:Ke,key:"button-panel-add"})),ye&&!ge&&Ne.push(n.createElement(a.JY,{key:"button-save"},({showModal:Se,hideModal:Ue})=>n.createElement(h.h,{tooltip:(0,M.t)("dashboard.toolbar.save","Save dashboard"),icon:"save",onClick:()=>{Se(R.d,{dashboard:Te,onDismiss:Ue})}}))),Ae&&Ne.push(n.createElement(h.h,{tooltip:(0,M.t)("dashboard.toolbar.open-original","Open original dashboard"),onClick:ke,icon:"link",key:"button-snapshot"})),he&&Ne.push(n.createElement(h.h,{tooltip:(0,M.t)("dashboard.toolbar.settings","Dashboard settings"),icon:"cog",onClick:Fe,key:"button-settings"})),_e(oe,Ne),Ne.push(lt()),Ne.push(Ze),P.ZP.featureToggles.scenes&&Ne.push(n.createElement(h.h,{key:"button-scenes",tooltip:"View as Scene",icon:"apps",onClick:()=>o.E1.push(`/scenes/dashboard/${Te.uid}`)})),Ne)},{isFullscreen:Xe,title:gt,folderTitle:ot}=ee,Ye=(0,s.TH)(),mt=g.u.getUrlForPartial(Ye,{search:"open"}),ce=g.u.getUrlForPartial(Ye,{search:"open",query:"folder:current"}),be=Xe?ue:void 0;return P.ZP.featureToggles.topnav?n.createElement(i.A,{actions:n.createElement(n.Fragment,null,qe(),n.createElement(u.M,{leftActionsSeparator:!0}),n.createElement(y.R,{alignment:"right"},at()))}):n.createElement(v.X,{pageIcon:Xe?void 0:"apps",title:gt,parent:ot,titleHref:mt,parentHref:ce,onGoBack:be,leftItems:qe()},at())});re.displayName="DashNav";const le=Z(re),pe=(0,t.css)({width:"max-content",maxWidth:"80vw"})},64503:(H,T,e)=>{"use strict";e.d(T,{u:()=>r});var t=e(52423),n=e(68404),c=e(72648),s=e(8180);const r=({icon:f,iconType:o,iconSize:l,tooltip:a,onClick:m,children:d})=>{const p=(0,c.wW)(g);return n.createElement("div",{className:p.noBorderContainer},f&&n.createElement(s.h,{name:f,size:l,iconType:o,tooltip:a,tooltipPlacement:"bottom",onClick:m}),d)},g=f=>({noBorderContainer:t.css`
    padding: 0 ${f.spacing(.5)};
    display: flex;
  `})},37877:(H,T,e)=>{"use strict";e.d(T,{C:()=>a});var t=e(68404),n=e(21053),c=e(82378),s=e(5562),r=e(32873),g=e(77582),f=e(35287),o=e(19349),l=e(45984);class a extends t.Component{constructor(){super(...arguments),this.onChangeRefreshInterval=d=>{(0,o.$t)().setAutoRefresh(d),this.forceUpdate()},this.onRefresh=()=>((0,o.$t)().refreshTimeModel(),Promise.resolve()),this.onMoveBack=()=>{g.h$.publish(new l.Qt({direction:l.Im.Left}))},this.onMoveForward=()=>{g.h$.publish(new l.Qt({direction:l.Im.Right}))},this.onChangeTimePicker=d=>{const{dashboard:p}=this.props,h=p.timepicker,y=h.nowDelay&&d.raw.to==="now",v=n.isMathString(d.raw.from)?d.raw.from:d.from,i=n.isMathString(d.raw.to)?d.raw.to:d.to,u={from:v,to:y?"now-"+h.nowDelay:i};(0,o.$t)().setTime(u)},this.onChangeTimeZone=d=>{this.props.dashboard.timezone=d,this.props.onChangeTimeZone(d),this.onRefresh()},this.onChangeFiscalYearStartMonth=d=>{this.props.dashboard.fiscalYearStartMonth=d,this.onRefresh()},this.onZoom=()=>{g.h$.publish(new l.p8({scale:2}))}}componentDidMount(){this.sub=this.props.dashboard.events.subscribe(c.md,()=>this.forceUpdate())}componentWillUnmount(){this.sub?.unsubscribe()}render(){const{dashboard:d,isOnCanvas:p}=this.props,{refresh_intervals:h}=d.timepicker,y=(0,o.$t)().getValidIntervals(h||s.o5),v=(0,o.$t)().timeRange(),i=d.getTimezone(),u=d.fiscalYearStartMonth,P=d.panelInEdit?.isEditing;return t.createElement(t.Fragment,null,t.createElement(r.a,{value:v,onChange:this.onChangeTimePicker,timeZone:i,fiscalYearStartMonth:u,onMoveBackward:this.onMoveBack,onMoveForward:this.onMoveForward,onZoom:this.onZoom,onChangeTimeZone:this.onChangeTimeZone,onChangeFiscalYearStartMonth:this.onChangeFiscalYearStartMonth,isOnCanvas:p}),t.createElement(s.dP,{onIntervalChanged:this.onChangeRefreshInterval,onRefresh:this.onRefresh,value:d.refresh,intervals:y,isOnCanvas:p,tooltip:(0,f.t)("dashboard.toolbar.refresh","Refresh dashboard"),noIntervalPicker:P}))}}},39514:(H,T,e)=>{"use strict";e.d(T,{t:()=>t.ZP});var t=e(60721)},42557:(H,T,e)=>{"use strict";e.d(T,{P:()=>v});var t=e(82897),n=e(68404),c=e(33180),s=e(68183),r=e(20941),g=e(24799),f=e(52566),o=e(80124),l=e(46967),a=e(8944),m=e(5562),d=e(19349);const p=({refreshIntervals:i,onRefreshIntervalChange:u,getIntervalsFunc:P=y,validateIntervalsFunc:E=h})=>{const[C,b]=(0,n.useState)(P(i??m.o5)),[S,M]=(0,n.useState)(null);(0,n.useEffect)(()=>{const B=P(i??m.o5);b(B)},[P,i]);const x=(0,n.useMemo)(()=>Array.isArray(C)?C.join(","):"",[C]),O=(0,n.useCallback)(B=>{const w=B.currentTarget.value?B.currentTarget.value.split(","):[];b(w)},[b]),L=(0,n.useCallback)(B=>{const w=E(C);w===null&&u(P(C)),M(w)},[P,C,u,E]);return n.createElement(g.g,{label:"Auto refresh",description:"Define the auto refresh intervals that should be available in the auto refresh list.",error:S,invalid:!!S},n.createElement(l.I,{id:"auto-refresh-input",invalid:!!S,value:x,onChange:O,onBlur:L}))},h=(i,u={getTimeSrv:d.$t})=>{try{return y(i,u),null}catch(P){return P instanceof Error?P.message:"Invalid intervals"}},y=(i,u={getTimeSrv:d.$t})=>{const P=i.filter(E=>E.trim()!=="").map(E=>E.replace(/\s+/g,""));return[...new Set(u.getTimeSrv().getValidIntervals(P))]};class v extends n.PureComponent{constructor(){super(...arguments),this.state={isNowDelayValid:!0},this.onNowDelayChange=u=>{const P=u.currentTarget.value;if((0,t.isEmpty)(P))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(P);if(c.isValidTimeSpan(P))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(P);this.setState({isNowDelayValid:!1})},this.onHideTimePickerChange=()=>{this.props.onHideTimePickerChange(!this.props.timePickerHidden)},this.onLiveNowChange=()=>{this.props.onLiveNowChange(!this.props.liveNow)},this.onTimeZoneChange=u=>{typeof u=="string"&&this.props.onTimeZoneChange(u)},this.onWeekStartChange=u=>{this.props.onWeekStartChange(u)}}render(){return n.createElement(r.s,{label:"Time options",isOpen:!0},n.createElement(g.g,{label:"Time zone","data-testid":s.wl.components.TimeZonePicker.containerV2},n.createElement(f.O,{inputId:"time-options-input",includeInternal:!0,value:this.props.timezone,onChange:this.onTimeZoneChange,width:40})),n.createElement(g.g,{label:"Week start","data-testid":s.wl.components.WeekStartPicker.containerV2},n.createElement(o.z,{inputId:"week-start-input",width:40,value:this.props.weekStart,onChange:this.onWeekStartChange})),n.createElement(p,{refreshIntervals:this.props.refreshIntervals,onRefreshIntervalChange:this.props.onRefreshIntervalChange}),n.createElement(g.g,{label:"Now delay",description:"Exclude recent data that may be incomplete."},n.createElement(l.I,{id:"now-delay-input",invalid:!this.state.isNowDelayValid,placeholder:"0m",onChange:this.onNowDelayChange,defaultValue:this.props.nowDelay})),n.createElement(g.g,{label:"Hide time picker"},n.createElement(a.r,{id:"hide-time-picker-toggle",value:!!this.props.timePickerHidden,onChange:this.onHideTimePickerChange})),n.createElement(g.g,{label:"Refresh live dashboards",description:"Continuously re-draw panels where the time range references 'now'"},n.createElement(a.r,{id:"refresh-live-dashboards-toggle",value:!!this.props.liveNow,onChange:this.onLiveNowChange})))}}},36182:(H,T,e)=>{"use strict";e.d(T,{D:()=>rs});var t=e(68404),n=e(70356),c=e(83383),s=e(37932),r=e(31403),g=e(35224),f=e(8125),o=e(95379),l=e(79008),a=e(47694),m=e(82002),d=e(81168),p=e(45984),h=e(36635),y=e(31259),v=e(52423),i=e(22350),u=e(41818),P=e(72648),E=e(20941),C=e(52081),b=e(67487),S=e(61860),M=e(39904),x=e(8180),O=e(35029);const L=({nodes:Ge,edges:We,direction:ct,width:St,height:$t,onDoubleClick:qt})=>{const Yt=(0,t.useRef)(null),Dn=(0,t.useRef)(null),Nn=(0,t.useCallback)(wn=>{qt&&qt(wn.nodes[0])},[qt]);return(0,t.useEffect)(()=>((async()=>{const Un=await e.e(8271).then(e.t.bind(e,47137,23)),_n={nodes:B(Un,Ge),edges:w(Un,We)},ns={width:"100%",height:"100%",autoResize:!0,layout:{improvedLayout:!0,hierarchical:{enabled:!0,direction:ct??"DU",sortMethod:"directed"}},interaction:{navigationButtons:!0,dragNodes:!1}};Yt.current=new Un.Network(Dn.current,_n,ns),Yt.current?.on("doubleClick",Nn)})(),()=>{Yt.current&&Yt.current.off("doubleClick")}),[ct,We,Ge,Nn]),t.createElement("div",null,t.createElement("div",{ref:Dn,style:{width:St??"100%",height:$t??"60vh"}}))};function B(Ge,We){const ct=We.map(St=>({...St,shape:"box"}));return new Ge.DataSet(ct)}function w(Ge,We){const ct=We.map(St=>({...St,arrows:"to",dashes:!0}));return new Ge.DataSet(ct)}function R({edges:Ge,nodes:We,show:ct,title:St,children:$t}){const[qt,Yt]=(0,t.useState)(ct),Dn=(0,t.useCallback)(()=>Yt(!0),[Yt]),Nn=(0,t.useCallback)(()=>Yt(!1),[Yt]);return t.createElement(t.Fragment,null,t.createElement(O.u,{isOpen:qt,title:St,icon:"info-circle",iconTooltip:"The graph can be moved, zoomed in, and zoomed out.",onClickBackdrop:Nn,onDismiss:Nn},t.createElement(L,{nodes:We,edges:Ge})),$t({showModal:Dn}))}const A=({id:Ge,usages:We})=>{const ct=(0,t.useMemo)(()=>We.find($t=>$t.variable.id===Ge),[Ge,We]);if(!ct)return null;const St=ct.nodes.map($t=>$t.label.includes(`$${Ge}`)?{...$t,color:"#FB7E81"}:$t);return t.createElement(R,{show:!1,title:`Showing usages for: $${Ge}`,nodes:St,edges:ct.edges},({showModal:$t})=>t.createElement(x.h,{onClick:()=>$t(),name:"code-branch",title:"Show usages","data-testid":"VariablesUnknownButton"}))};var U=e(19248);const I=1e3;function N({variables:Ge,dashboard:We}){const[ct,St]=(0,t.useState)(!1),[$t,qt]=(0,t.useState)(0),[Yt,Dn]=(0,t.useState)([]),Nn=(0,P.wW)(j);(0,t.useEffect)(()=>qt(_n=>_n+1),[Ge,We]);const{loading:wn}=(0,i.Z)(async()=>{if(ct&&$t>0){const _n=Date.now(),ns=await(0,U.Yg)(Ge,We),ks=Date.now()-_n;return ks>=I&&(0,u.ff)("Slow unknown variables expansion",{elapsed:ks}),qt(0),Dn(ns),ns}return[]},[Ge,We,ct,$t]),Un=_n=>{_n&&(0,u.ff)("Unknown variables section expanded"),St(_n)};return t.createElement("div",{className:Nn.container},t.createElement(E.s,{label:t.createElement(F,null),isOpen:ct,onToggle:Un},wn&&t.createElement(C.wc,{justify:"center"},t.createElement(C.Lh,{justify:"center"},t.createElement("span",null,"Loading..."),t.createElement(b.$,{size:16}))),!wn&&Yt&&t.createElement(t.Fragment,null,Yt.length===0&&t.createElement(D,null),Yt.length>0&&t.createElement(Y,{usages:Yt}))))}function F(){const Ge=(0,P.wW)(j);return t.createElement("h5",null,"Renamed or missing variables",t.createElement(S.u,{content:"Click to expand a list with all variable references that have been renamed or are missing from the dashboard."},t.createElement(M.J,{name:"info-circle",className:Ge.infoIcon})))}function D(){return t.createElement("span",null,"No renamed or missing variables found.")}function Y({usages:Ge}){const We=(0,P.wW)(j);return t.createElement("table",{className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",{colSpan:5}))),t.createElement("tbody",null,Ge.map(ct=>{const{variable:St}=ct,{id:$t,name:qt}=St;return t.createElement("tr",{key:$t},t.createElement("td",{className:We.firstColumn},t.createElement("span",null,qt)),t.createElement("td",{className:We.defaultColumn}),t.createElement("td",{className:We.defaultColumn}),t.createElement("td",{className:We.defaultColumn}),t.createElement("td",{className:We.lastColumn},t.createElement(A,{id:St.id,usages:Ge})))})))}const j=Ge=>({container:v.css`
    margin-top: ${Ge.spacing(4)};
    padding-top: ${Ge.spacing(4)};
  `,infoIcon:v.css`
    margin-left: ${Ge.spacing(1)};
  `,defaultColumn:v.css`
    width: 1%;
  `,firstColumn:v.css`
    width: 1%;
    vertical-align: top;
    color: ${Ge.colors.text.maxContrast};
  `,lastColumn:v.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    text-align: right;
  `});var K=e(7240),z=e(87095),Z=e(92990),ae=e(92624),J=e(98102);function oe({varName:Ge,isOpen:We=!1,onConfirm:ct,onDismiss:St}){return t.createElement(J.s,{title:"Delete variable",isOpen:We,onConfirm:ct,onDismiss:St,body:`
      Are you sure you want to delete variable "${Ge}"?
    `,modalClass:Ee.modal,confirmText:"Delete"})}const Ee={modal:(0,v.css)({width:"max-content",maxWidth:"80vw"})};var me=e(49922),re=e(68183),le=e(22323),pe=e(15546),ee=e(85803),se=e(22107),Q=e(24799),G=e(2594);const q=[{label:"Label and value",value:se.bU.dontHide},{label:"Value",value:se.bU.hideLabel},{label:"Nothing",value:se.bU.hideVariable}];function X({onChange:Ge,hide:We,type:ct}){const St=(0,t.useMemo)(()=>q.find($t=>$t.value===We)?.value??q[0].value,[We]);return ct==="constant"?null:t.createElement(Q.g,{label:"Show on dashboard"},t.createElement(G.S,{options:q,onChange:Ge,value:St}))}var de=e(41624),Be=e(49993),ke=e(57052),He=e(83704);function ue({onChange:Ge,type:We}){const ct=(0,t.useMemo)(()=>(0,ae.bi)(),[]),St=(0,t.useMemo)(()=>ct.find($t=>$t.value===We)??ct[0],[ct,We]);return t.createElement(He.u,{name:"Select variable type",value:St,options:ct,onChange:Ge,testId:re.wl.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelectV2})}var Oe=e(11543),Fe=e(77117);const Ie=({variable:{options:Ge}})=>{const[We,ct]=(0,t.useState)(20),[St,$t]=(0,t.useState)([]),qt=(0,t.useCallback)(Dn=>{Dn.preventDefault(),ct(We+20)},[We,ct]),Yt=(0,P.wW)(we);return(0,t.useEffect)(()=>$t(Ge.slice(0,We)),[We,Ge]),St.length?t.createElement("div",{style:{display:"flex",flexDirection:"column",marginTop:"16px"}},t.createElement("h5",null,"Preview of values"),t.createElement(Oe.Z,null,St.map((Dn,Nn)=>t.createElement(Oe.Z,{key:`${Dn.value}-${Nn}`,className:Yt.optionContainer},t.createElement(Fe.W,{"aria-label":re.wl.pages.Dashboard.Settings.Variables.Edit.General.previewOfValuesOption},t.createElement("div",{className:Yt.label},Dn.text))))),Ge.length>We&&t.createElement(Oe.Z,{className:Yt.optionContainer},t.createElement(r.zx,{onClick:qt,variant:"secondary",size:"sm","aria-label":"Variable editor Preview of Values Show More link"},"Show more"))):null};Ie.displayName="VariableValuesPreview";function we(Ge){return{wrapper:(0,v.css)({display:"flex",flexDirection:"column",marginTop:Ge.spacing(2)}),optionContainer:(0,v.css)({marginLeft:Ge.spacing(.5),marginBottom:Ge.spacing(.5)}),label:(0,v.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"50vw"})}}var Re=e(82897),_e=e(37737),et=e(50678);const qe=Ge=>async We=>{const{rootStateKey:ct}=Ge;We((0,K.mb)(ct,(0,et.wJ)({name:(0,z.E0)(Ge).name,id:Ge.id})))},Je=Ge=>async(We,ct)=>{const{rootStateKey:St}=Ge;We((0,K.mb)(St,(0,et.qe)((0,ae.Y6)(Ge))))},lt=(Ge,We)=>(ct,St)=>{const{id:$t,rootStateKey:qt}=Ge;let Yt=null;if(We.match(/^(?!__).*$/)||(Yt="Template names cannot begin with '__', that's reserved for Grafana's global variables"),We.match(/^\w+$/)||(Yt="Only word and digit characters are allowed in variable names"),(0,z.gt)(qt,St()).filter(wn=>wn.name===We&&wn.id!==$t).length&&(Yt="Variable with the same name already exists"),Yt){ct((0,K.mb)(qt,(0,et.y8)({newName:We,errorText:Yt})));return}ct(at(Ge,We))},at=(Ge,We)=>(ct,St)=>{const{rootStateKey:$t}=Ge,qt=(0,z.E0)(Ge,St());if(qt.name===We){ct((0,K.mb)($t,(0,et.Yo)((0,ae.Y6)(Ge,{newName:We}))));return}const Yt={...(0,Re.cloneDeep)(qt),name:We,id:We},Dn=qt.global,Nn=qt.index,wn=(0,ae.yQ)(Yt);ct((0,K.mb)($t,(0,Z.VN)((0,ae.Y6)(wn,{global:Dn,index:Nn,model:Yt})))),ct((0,K.mb)($t,(0,et.Yo)((0,ae.Y6)(wn,{newName:We})))),ct((0,K.mb)($t,(0,Z.mZ)((0,ae.Y6)(Ge,{reIndex:!1}))))},Xe=(Ge,We="query")=>(ct,St)=>{const $t=(0,ae.mn)(Ge),qt=(0,z.gt)($t,St()),Yt=ot(We,qt),Dn={type:We,id:Yt},Nn=!1,wn=(0,z.Eo)($t,St()),Un=(0,Re.cloneDeep)(le.z.get(We).initialState);Un.id=Yt,Un.name=Yt,Un.rootStateKey=$t,ct((0,K.mb)($t,(0,Z.VN)((0,ae.Y6)(Dn,{global:Nn,model:Un,index:wn})))),s.E1.partial({editIndex:qt.length})},gt=Ge=>(We,ct)=>{const St=(0,ae.mn)(Ge),$t=ct(),qt=(0,z.xD)(St,$t),Yt=$t.dashboard.getModel(),{usages:Dn}=(0,U.V)(qt,Yt),Nn=(0,U.vI)(Dn);We((0,K.mb)(St,(0,_e.j4)({usages:Dn,usagesNetwork:Nn})))};function ot(Ge,We){let ct=0,St=`${Ge}${ct}`;for(;We.find($t=>$t.id===St);)St=`${Ge}${++ct}`;return St}var Ye=(Ge=>(Ge[Ge.MaxSize=50]="MaxSize",Ge))(Ye||{});const mt=(Ge,We)=>({editor:(0,z.AE)(We.identifier.rootStateKey,Ge).editor,variable:(0,z.E0)(We.identifier,Ge)}),ce=Ge=>({...(0,y.bindActionCreators)({variableEditorMount:qe,variableEditorUnMount:Je,changeVariableName:lt,updateOptions:ee.Rk},Ge),changeVariableProp:(We,ct,St)=>Ge((0,K.mb)(We.rootStateKey,(0,Z.Pl)((0,ae.Y6)(We,{propName:ct,propValue:St})))),changeVariableType:(We,ct)=>Ge((0,K.mb)(We.rootStateKey,(0,Z.Be)((0,ae.Y6)(We,{newType:ct})))),removeVariable:We=>{Ge((0,K.mb)(We.rootStateKey,(0,Z.mZ)((0,ae.Y6)(We,{reIndex:!0}))))}}),be=(0,h.connect)(mt,ce);class Te extends t.PureComponent{constructor(){super(...arguments),this.state={showDeleteModal:!1},this.onNameChange=We=>{We.preventDefault(),this.props.changeVariableName(this.props.identifier,We.currentTarget.value)},this.onTypeChange=We=>{We.value&&this.props.changeVariableType(this.props.identifier,We.value)},this.onLabelChange=We=>{We.preventDefault(),this.props.changeVariableProp(this.props.identifier,"label",We.currentTarget.value)},this.onDescriptionChange=We=>{this.props.changeVariableProp(this.props.identifier,"description",We.currentTarget.value)},this.onHideChange=We=>{this.props.changeVariableProp(this.props.identifier,"hide",We)},this.onPropChanged=({propName:We,propValue:ct,updateOptions:St=!1})=>{this.props.changeVariableProp(this.props.identifier,We,ct),St&&this.props.updateOptions((0,ae.yQ)(this.props.variable))},this.onHandleSubmit=async We=>{We.preventDefault(),this.props.editor.isValid&&this.props.updateOptions((0,ae.yQ)(this.props.variable))},this.onModalOpen=()=>{this.setState({showDeleteModal:!0})},this.onModalClose=()=>{this.setState({showDeleteModal:!1})},this.onDelete=()=>{this.props.removeVariable(this.props.identifier),this.onModalClose(),s.E1.partial({editIndex:null})},this.onApply=()=>{s.E1.partial({editIndex:null})}}componentDidMount(){this.props.variableEditorMount(this.props.identifier)}componentWillUnmount(){this.props.variableEditorUnMount(this.props.identifier)}render(){const{variable:We}=this.props,ct=le.z.get(this.props.variable.type).editor;if(!ct)return null;const St=We.state===me.Gu.Loading;return t.createElement(t.Fragment,null,t.createElement("form",{"aria-label":"Variable editor Form",onSubmit:this.onHandleSubmit},t.createElement(ue,{onChange:this.onTypeChange,type:this.props.variable.type}),t.createElement(de.e,null,"General"),t.createElement(ke.V,{value:this.props.editor.name,onChange:this.onNameChange,name:"Name",placeholder:"Variable name",description:"The name of the template variable. (Max. 50 characters)",invalid:!!this.props.editor.errors.name,error:this.props.editor.errors.name,testId:re.wl.pages.Dashboard.Settings.Variables.Edit.General.generalNameInputV2,maxLength:Ye.MaxSize,required:!0}),t.createElement(ke.V,{name:"Label",description:"Optional display name",value:this.props.variable.label??"",placeholder:"Label name",onChange:this.onLabelChange,testId:re.wl.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInputV2}),t.createElement(Be.W,{name:"Description",value:We.description??"",placeholder:"Descriptive text",onChange:this.onDescriptionChange,width:52}),t.createElement(X,{onChange:this.onHideChange,hide:this.props.variable.hide,type:this.props.variable.type}),ct&&t.createElement(ct,{variable:this.props.variable,onPropChange:this.onPropChanged}),(0,pe.eL)(this.props.variable)?t.createElement(Ie,{variable:this.props.variable}):null,t.createElement("div",{style:{marginTop:"16px"}},t.createElement(C.Lh,{spacing:"md",height:"inherit"},t.createElement(r.zx,{variant:"destructive",fill:"outline",onClick:this.onModalOpen},"Delete"),t.createElement(r.zx,{type:"submit","aria-label":re.wl.pages.Dashboard.Settings.Variables.Edit.General.submitButton,disabled:St,variant:"secondary"},"Run query",St&&t.createElement(M.J,{className:"spin-clockwise",name:"sync",size:"sm",style:{marginLeft:"2px"}})),t.createElement(r.zx,{variant:"primary",onClick:this.onApply,"data-testid":re.wl.pages.Dashboard.Settings.Variables.Edit.General.applyButton},"Apply")))),t.createElement(oe,{isOpen:this.state.showDeleteModal,varName:this.props.editor.name,onConfirm:this.onDelete,onDismiss:this.onModalClose}))}}const Ke=be(Te);var ge=e(19677),Me=e(26418),ye=e(69142),fe=e(3153);const he=({variables:Ge})=>{const We=(0,t.useMemo)(()=>(0,U.GQ)(Ge),[Ge]),ct=(0,t.useMemo)(()=>(0,U.MJ)(Ge),[Ge]);return ct.length?t.createElement(R,{show:!1,title:"Dependencies",nodes:(0,U.Of)(We,ct),edges:ct},({showModal:St})=>t.createElement(r.zx,{onClick:()=>{(0,u.ff)("Show variable dependencies"),St()},icon:"channel-add",variant:"secondary"},"Show dependencies")):null},De=Ge=>t.createElement(h.Provider,{store:fe.h},t.createElement(he,{...Ge})),Ae=({id:Ge,usages:We,isAdhoc:ct})=>{const St=(0,t.useMemo)(()=>We.find(qt=>qt.variable.id===Ge),[We,Ge]);if(We.length===0||ct||!St)return null;const $t=St.nodes.map(qt=>qt.label.includes(`$${Ge}`)?{...qt,color:"#FB7E81"}:qt);return t.createElement(R,{show:!1,title:`Showing usages for: $${Ge}`,nodes:$t,edges:St.edges},({showModal:qt})=>t.createElement(x.h,{onClick:()=>{(0,u.ff)("Show variable usages"),qt()},name:"code-branch",title:"Show usages"}))};function Ne({index:Ge,variable:We,usageTree:ct,usagesNetwork:St,onEdit:$t,onDuplicate:qt,onDelete:Yt}){const Dn=(0,P.l4)(),Nn=(0,P.wW)(Ue),wn=Ze(We),_n=(0,U.Rv)(We.id,ct)>0||(0,pe.Kn)(We),ns=(0,ae.yQ)(We);return t.createElement(ge._l,{draggableId:JSON.stringify(ns),index:Ge},(os,ks)=>t.createElement("tr",{ref:os.innerRef,...os.draggableProps,style:{userSelect:ks.isDragging?"none":"auto",background:ks.isDragging?Dn.colors.background.secondary:void 0,...os.draggableProps.style}},t.createElement("td",{role:"gridcell",className:Nn.column},t.createElement(r.zx,{size:"xs",fill:"text",onClick:Aa=>{Aa.preventDefault(),$t(ns)},className:Nn.nameLink,"aria-label":re.wl.pages.Dashboard.Settings.Variables.List.tableRowNameFields(We.name)},We.name)),t.createElement("td",{role:"gridcell",className:Nn.definitionColumn,onClick:Aa=>{Aa.preventDefault(),$t(ns)},"aria-label":re.wl.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(We.name)},wn),t.createElement("td",{role:"gridcell",className:Nn.column},t.createElement(Se,{passed:_n})),t.createElement("td",{role:"gridcell",className:Nn.column},t.createElement(Ae,{id:We.id,isAdhoc:(0,pe.Kn)(We),usages:St})),t.createElement("td",{role:"gridcell",className:Nn.column},t.createElement(x.h,{onClick:Aa=>{Aa.preventDefault(),(0,u.ff)("Duplicate variable"),qt(ns)},name:"copy",title:"Duplicate variable","aria-label":re.wl.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(We.name)})),t.createElement("td",{role:"gridcell",className:Nn.column},t.createElement(x.h,{onClick:Aa=>{Aa.preventDefault(),(0,u.ff)("Delete variable"),Yt(ns)},name:"trash-alt",title:"Remove variable","aria-label":re.wl.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(We.name)})),t.createElement("td",{role:"gridcell",className:Nn.column},t.createElement("div",{...os.dragHandleProps,className:Nn.dragHandle},t.createElement(M.J,{name:"draggabledots",size:"lg"})))))}function Ze(Ge){let We="";return(0,pe.Xh)(Ge)?Ge.definition?We=Ge.definition:typeof Ge.query=="string"&&(We=Ge.query):(0,pe.eL)(Ge)&&(We=Ge.query),We}function Se({passed:Ge}){const We=(0,P.wW)(Ue);return Ge?t.createElement(M.J,{name:"check",className:We.iconPassed,title:"This variable is referenced by other variables or dashboard."}):t.createElement(M.J,{name:"exclamation-triangle",className:We.iconFailed,title:"This variable is not referenced by any variable or dashboard."})}function Ue(Ge){return{dragHandle:v.css`
      cursor: grab;
    `,column:v.css`
      width: 1%;
    `,nameLink:v.css`
      cursor: pointer;
      color: ${Ge.colors.primary.text};
    `,definitionColumn:v.css`
      width: 100%;
      max-width: 200px;
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      -o-text-overflow: ellipsis;
      white-space: nowrap;
    `,iconPassed:v.css`
      color: ${Ge.v1.palette.greenBase};
    `,iconFailed:v.css`
      color: ${Ge.v1.palette.orange};
    `}}function Qe({variables:Ge,usages:We,usagesNetwork:ct,onChangeOrder:St,onAdd:$t,onEdit:qt,onDelete:Yt,onDuplicate:Dn}){const Nn=wn=>{if(!wn.destination||!wn.source)return;(0,u.ff)("Variable drag and drop");const Un=JSON.parse(wn.draggableId);St(Un,Ge[wn.source.index].index,Ge[wn.destination.index].index)};return t.createElement("div",null,t.createElement("div",null,Ge.length===0&&t.createElement(pt,{onAdd:$t}),Ge.length>0&&t.createElement(Me.Stack,{direction:"column",gap:4},t.createElement("table",{className:"filter-table filter-table--hover","aria-label":re.wl.pages.Dashboard.Settings.Variables.List.table,role:"grid"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",null,"Definition"),t.createElement("th",{colSpan:5}))),t.createElement(ge.Z5,{onDragEnd:Nn},t.createElement(ge.bK,{droppableId:"variables-list",direction:"vertical"},wn=>t.createElement("tbody",{ref:wn.innerRef,...wn.droppableProps},Ge.map((Un,_n)=>t.createElement(Ne,{index:_n,key:`${Un.name}-${_n}`,variable:Un,usageTree:We,usagesNetwork:ct,onDelete:Yt,onDuplicate:Dn,onEdit:qt})),wn.placeholder)))),t.createElement(Me.Stack,null,t.createElement(De,{variables:Ge}),t.createElement(r.zx,{"aria-label":re.wl.pages.Dashboard.Settings.Variables.List.newButton,onClick:$t,icon:"plus"},"New variable")))))}function pt({onAdd:Ge}){return t.createElement("div",null,t.createElement(ye.Z,{title:"There are no variables yet",buttonIcon:"calculator-alt",buttonTitle:"Add variable",infoBox:{__html:` <p>
                    Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server
                    or sensor names in your metric queries you can use variables in their place. Variables are shown as
                    list boxes at the top of the dashboard. These drop-down lists make it easy to change the data
                    being displayed in your dashboard. Check out the
                    <a class="external-link" href="https://grafana.com/docs/grafana/latest/variables/" target="_blank">
                      Templates and variables documentation
                    </a>
                    for more information.
                  </p>`},infoBoxTitle:"What do variables do?",onClick:We=>{We.preventDefault(),Ge()}}))}const bt=(Ge,We)=>{const{uid:ct}=We.dashboard,St=(0,z.AE)(ct,Ge);return{variables:(0,z.xD)(ct,Ge),idInEditor:St.editor.id,usagesNetwork:St.inspect.usagesNetwork,usages:St.inspect.usages}},yt=Ge=>({...(0,y.bindActionCreators)({createNewVariable:Xe,initListMode:gt},Ge),changeVariableOrder:(We,ct,St)=>Ge((0,K.mb)(We.rootStateKey,(0,Z.gE)((0,ae.Y6)(We,{fromIndex:ct,toIndex:St})))),duplicateVariable:We=>Ge((0,K.mb)(We.rootStateKey,(0,Z.Y9)((0,ae.Y6)(We,{newId:void 0})))),removeVariable:We=>{Ge((0,K.mb)(We.rootStateKey,(0,Z.mZ)((0,ae.Y6)(We,{reIndex:!0}))))}}),Mt=(0,h.connect)(bt,yt);class At extends t.PureComponent{constructor(){super(...arguments),this.state={variableId:void 0},this.onEditVariable=We=>{const ct=this.props.variables.findIndex(St=>St.id===We.id);s.E1.partial({editIndex:ct})},this.onNewVariable=()=>{this.props.createNewVariable(this.props.dashboard.uid)},this.onChangeVariableOrder=(We,ct,St)=>{this.props.changeVariableOrder(We,ct,St)},this.onDuplicateVariable=We=>{this.props.duplicateVariable(We)},this.onModalOpen=We=>{this.setState({variableId:We})},this.onModalClose=()=>{this.setState({variableId:void 0})},this.onRemoveVariable=()=>{this.props.removeVariable(this.state.variableId),this.onModalClose()}}componentDidMount(){this.props.initListMode(this.props.dashboard.uid)}render(){const{editIndex:We,variables:ct}=this.props,St=We!=null?ct[We]:void 0,$t=St?{text:St.name}:void 0;return t.createElement(l.T,{navModel:this.props.sectionNav,pageNav:$t},!St&&t.createElement(Qe,{variables:this.props.variables,onAdd:this.onNewVariable,onEdit:this.onEditVariable,onChangeOrder:this.onChangeVariableOrder,onDuplicate:this.onDuplicateVariable,onDelete:this.onModalOpen,usages:this.props.usages,usagesNetwork:this.props.usagesNetwork}),!St&&this.props.variables.length>0&&t.createElement(N,{variables:this.props.variables,dashboard:this.props.dashboard}),St&&t.createElement(Ke,{identifier:(0,ae.yQ)(St)}),t.createElement(oe,{isOpen:this.state.variableId!==void 0,varName:this.state.variableId?.id??"",onConfirm:this.onRemoveVariable,onDismiss:this.onModalClose}))}}const Pt=Mt(At);var rn=e(73546),Fn=e(77582);const kn=({dashboard:Ge,sectionNav:We})=>{const ct=Fn.Vt.hasPermission(d.AccessControlAction.DashboardsPermissionsWrite);return t.createElement(l.T,{navModel:We},t.createElement(rn.P,{resource:"dashboards",resourceId:Ge.uid,canSetPermissions:ct}))};var Jn=e(1108),qn=e(6645),Ut=e(92103),ut=e(54630),nt=e(61986),vt=e(86977);const ht=Ge=>({permissions:Ge.dashboard.permissions,canViewFolderPermissions:Ge.folder.canViewFolderPermissions}),It={getDashboardPermissions:vt.qm,addDashboardPermission:vt.Yq,removeDashboardPermission:vt.Qk,updateDashboardPermission:vt.RF,checkFolderPermissions:nt.J6},Ft=(0,h.connect)(ht,It);class en extends t.PureComponent{constructor(We){super(We),this.onOpenAddPermissions=()=>{this.setState({isAdding:!0})},this.onRemoveItem=ct=>{this.props.removeDashboardPermission(this.props.dashboard.id,ct)},this.onPermissionChanged=(ct,St)=>{this.props.updateDashboardPermission(this.props.dashboard.id,ct,St)},this.onAddPermission=ct=>this.props.addDashboardPermission(this.props.dashboard.id,ct),this.onCancelAddPermission=()=>{this.setState({isAdding:!1})},this.state={isAdding:!1}}componentDidMount(){this.props.getDashboardPermissions(this.props.dashboard.id),this.props.dashboard.meta.folderUid&&this.props.checkFolderPermissions(this.props.dashboard.meta.folderUid)}getFolder(){const{dashboard:We,canViewFolderPermissions:ct}=this.props;return{id:We.meta.folderId,title:We.meta.folderTitle,url:We.meta.folderUrl,canViewFolderPermissions:ct}}render(){const{permissions:We,dashboard:ct,sectionNav:St}=this.props,{isAdding:$t}=this.state;return ct.meta.hasUnsavedFolderChange?t.createElement(l.T,{navModel:St},t.createElement("h5",null,"You have changed a folder, please save to view permissions.")):t.createElement(l.T,{navModel:St},t.createElement("div",{className:"page-action-bar"},t.createElement(S.u,{placement:"auto",content:t.createElement(ut.Z,null)},t.createElement(M.J,{className:"icon--has-hover page-sub-heading-icon",name:"question-circle"})),t.createElement("div",{className:"page-action-bar__spacer"}),t.createElement(r.zx,{className:"pull-right",onClick:this.onOpenAddPermissions,disabled:$t},"Add permission")),t.createElement(Jn.s,{in:$t},t.createElement(qn.Z,{onAddPermission:this.onAddPermission,onCancel:this.onCancelAddPermission})),t.createElement(Ut.Z,{items:We,onRemoveItem:this.onRemoveItem,onPermissionChanged:this.onPermissionChanged,isFetching:!1,folderInfo:this.getFolder()}))}}const sn=Ft(en);var Mn=e(84135),En=e(5916),yn=e(86647),Bn=e(53117),ea=e(13393),Qn=e(46967),Kn=e(58255),Ua=e(13355),pa=e(3363),va=e(94929),za=e(9398),ja=e(19349),Ea=e(86899),ma=e(86953),Xa=e(66228),Oa=e(89890),ss=e(20442),Ks=e(20112),Ss=e(53217);class Bs extends t.PureComponent{constructor(We){super(We),this.updateFields=()=>{const ct=this.props.response?.panelData?.series[0];if(ct&&ct.fields){const St=ct.fields.map($t=>{const qt=(0,Oa.C)($t,ct);let Yt="";for(let Dn=0;Dn<ct.length;Dn++){if(Dn>0&&(Yt+=", "),Dn>2){Yt+="...";break}Yt+=$t.values.get(Dn)}return Yt.length>50&&(Yt=Yt.substring(0,50)+"..."),{label:`${qt} (${$t.type})`,value:qt,description:Yt}});this.setState({fieldNames:St})}},this.onFieldSourceChange=(ct,St)=>{const $t=this.props.mappings||{},qt=$t[ct]||{};this.props.change({...$t,[ct]:{...qt,source:St.value||ss.L.Field}})},this.onFieldNameChange=(ct,St)=>{const $t=this.props.mappings||{},qt=$t[ct]||{};this.props.change({...$t,[ct]:{...qt,value:St.value,source:ss.L.Field}})},this.state={fieldNames:[]}}componentDidMount(){this.updateFields()}componentDidUpdate(We){We.response!==this.props.response&&this.updateFields()}renderRow(We,ct,St){const{fieldNames:$t}=this.state;let qt=$t;const Yt=ct.value;let Dn=$t.find(wn=>Yt===wn.value);Yt&&(qt=[...$t],Dn||qt.push({label:Yt,value:Yt}));let Nn=St?St[We.key]:"";if(Nn&&We.key.startsWith("time")){const wn=(0,Ks.Cf)("dateTimeAsIso");Nn=(0,Ks.zc)(wn(Nn))}return Nn==null&&(Nn=""),t.createElement("tr",{key:We.key},t.createElement("td",null,We.key," ",We.help&&t.createElement(S.u,{content:We.help},t.createElement(M.J,{name:"info-circle"}))),t.createElement("td",null,t.createElement(Ss.Ph,{value:Dn,options:qt,placeholder:We.placeholder||We.key,onChange:wn=>{this.onFieldNameChange(We.key,wn)},noOptionsMessage:"Unknown field names",allowCustomValue:!0})),t.createElement("td",null,`${Nn}`))}render(){const We=this.props.response?.events?.[0],ct=this.props.mappings||{};return t.createElement("table",{className:"filter-table"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Annotation"),t.createElement("th",null,"From"),t.createElement("th",null,"First Value"))),t.createElement("tbody",null,Xa.r0.map(St=>this.renderRow(St,ct[St.key]||{},We))))}}class ls extends t.PureComponent{constructor(){super(...arguments),this.state={},this.onRunQuery=async()=>{const{datasource:We,annotation:ct}=this.props;if((0,Xa.yr)(We))return;const St=(0,za.h4)().getCurrent();if(!St)return;this.setState({running:!0});const $t=await(0,pa.n)((0,ma.r)({range:(0,ja.$t)().timeRange(),panel:new Ea.r({}),dashboard:St},We,ct));this.setState({running:!1,response:$t})},this.onQueryChange=We=>{this.props.onChange({...this.props.annotation,target:We})},this.onMappingChange=We=>{this.props.onChange({...this.props.annotation,mappings:We})},this.onAnnotationChange=We=>{this.props.onChange(We)}}componentDidMount(){this.verifyDataSource()}componentDidUpdate(We){this.props.annotation!==We.annotation&&!(0,Xa.yr)(this.props.datasource)&&this.verifyDataSource()}verifyDataSource(){const{datasource:We,annotation:ct}=this.props,$t={...Xa.yA,...We.annotations}.prepareAnnotation(ct);$t!==ct?this.props.onChange($t):this.onRunQuery()}renderStatus(){const{response:We,running:ct}=this.state;let St="alert-info",$t="...",qt;if(ct||We?.panelData?.state===me.Gu.Loading||!We)$t="loading...";else{const{events:Yt,panelData:Dn}=We;if(Dn?.error)St="alert-error",qt="exclamation-triangle",$t=Dn.error.message??"error";else if(!Yt?.length)St="alert-warning",qt="exclamation-triangle",$t="No events found";else{const Nn=Dn?.series[0];$t=`${Yt.length} events (from ${Nn?.fields.length} fields)`}}return t.createElement("div",{className:(0,v.cx)(St,v.css`
            margin: 4px 0px;
            padding: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          `)},t.createElement("div",null,qt&&t.createElement(t.Fragment,null,t.createElement(M.J,{name:qt}),"\xA0"),$t),t.createElement("div",null,ct?t.createElement(b.$,null):t.createElement(r.zx,{variant:"secondary",size:"xs",onClick:this.onRunQuery},"TEST")))}render(){const{datasource:We,annotation:ct,datasourceInstanceSettings:St}=this.props,{response:$t}=this.state;let qt=We.annotations?.QueryEditor||We.components?.QueryEditor;if(!qt)return t.createElement("div",null,"Annotations are not supported. This datasource needs to export a QueryEditor");const Yt=ct.target??{refId:"Anno"};return t.createElement(t.Fragment,null,t.createElement(va.n,{instanceSettings:St},t.createElement(qt,{key:We?.name,query:Yt,datasource:We,onChange:this.onQueryChange,onRunQuery:this.onRunQuery,data:$t?.panelData,range:(0,ja.$t)().timeRange(),annotation:ct,onAnnotationChange:this.onAnnotationChange})),(0,Xa.$w)(We)&&t.createElement(t.Fragment,null,this.renderStatus(),t.createElement(Bs,{response:$t,mappings:ct.mappings,change:this.onMappingChange})))}}var ws=e(11484);class qs extends t.PureComponent{constructor(){super(...arguments),this.ref=null}componentWillUnmount(){this.angularComponent&&this.angularComponent.destroy()}componentDidMount(){this.ref&&this.loadAngular()}componentDidUpdate(We){We.datasource!==this.props.datasource&&this.loadAngular(),this.scopeProps&&this.scopeProps.ctrl.currentAnnotation!==this.props.annotation&&(this.scopeProps.ctrl.ignoreNextWatcherFiring=!0,this.scopeProps.ctrl.currentAnnotation=this.props.annotation,this.angularComponent?.digest())}loadAngular(){this.angularComponent&&(this.angularComponent.destroy(),this.scopeProps=void 0);const We=(0,ws.w)(),ct='<plugin-component type="annotations-query-ctrl"> </plugin-component>',St={ctrl:{currentDatasource:this.props.datasource,currentAnnotation:this.props.annotation,ignoreNextWatcherFiring:!1}};this.angularComponent=We.load(this.ref,St,ct),this.angularComponent.digest(),this.angularComponent.getScope().$watch(()=>{if(St.ctrl.ignoreNextWatcherFiring){St.ctrl.ignoreNextWatcherFiring=!1;return}this.props.onChange(St.ctrl.currentAnnotation)}),this.scopeProps=St}render(){return t.createElement("div",{ref:We=>this.ref=We})}}const Da="New annotation",Vs=({editIdx:Ge,dashboard:We})=>{const[ct,St]=(0,t.useState)(We.annotations.list[Ge]),{value:$t}=(0,i.Z)(()=>(0,yn.F)().get(ct.datasource),[ct.datasource]),qt=(0,yn.F)().getInstanceSettings(ct.datasource),Yt=Aa=>{const Za=[...We.annotations.list];Za.splice(Ge,1,Aa),St(Aa),We.annotations.list=Za},Dn=Aa=>{Yt({...ct,name:Aa.currentTarget.value})},Nn=Aa=>{Yt({...ct,datasource:(0,En.iU)(Aa)})},wn=Aa=>{const Za=Aa.currentTarget;Yt({...ct,[Za.name]:Za.type==="checkbox"?Za.checked:Za.value})},Un=Aa=>{Yt({...ct,iconColor:Aa})},_n=Es,ns=()=>{s.E1.partial({editview:null,editIndex:null})},os=()=>{const Aa=We.annotations.list;We.annotations.list=[...Aa.slice(0,Ge),...Aa.slice(Ge+1)],Es()},ks=ct.name===Da;return t.createElement("div",null,t.createElement(ea.C,null,t.createElement(Q.g,{label:"Name"},t.createElement(Qn.I,{"aria-label":re.wl.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:ks,value:ct.name,onChange:Dn,width:50})),t.createElement(Q.g,{label:"Data source",htmlFor:"data-source-picker"},t.createElement(Bn.q,{width:50,annotations:!0,variables:!0,current:ct.datasource,onChange:Nn})),t.createElement(Q.g,{label:"Enabled",description:"When enabled the annotation query is issued every dashboard refresh"},t.createElement(Kn.X,{name:"enable",id:"enable",value:ct.enable,onChange:wn})),t.createElement(Q.g,{label:"Hidden",description:"Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden."},t.createElement(Kn.X,{name:"hide",id:"hide",value:ct.hide,onChange:wn})),t.createElement(Q.g,{label:"Color",description:"Color to use for the annotation event markers"},t.createElement(C.Lh,null,t.createElement(Ua.B,{value:ct?.iconColor,onChange:Un}))),t.createElement("h3",{className:"page-heading"},"Query"),$t?.annotations&&qt&&t.createElement(ls,{datasource:$t,datasourceInstanceSettings:qt,annotation:ct,onChange:Yt}),$t&&!$t.annotations&&t.createElement(qs,{datasource:$t,annotation:ct,onChange:Yt})),t.createElement(Me.Stack,null,!ct.builtIn&&t.createElement(r.zx,{variant:"destructive",onClick:os},"Delete"),t.createElement(r.zx,{variant:"secondary",onClick:ns},"Preview in dashboard"),t.createElement(r.zx,{variant:"primary",onClick:_n},"Apply")))};Vs.displayName="AnnotationSettingsEdit";function Es(){s.E1.partial({editIndex:null})}var er=e(76553),dr=e(13626);const es=({children:Ge,...We})=>{const ct=(0,P.wW)(tr);return t.createElement("div",{className:ct.buttonWrapper},t.createElement(r.zx,{icon:"plus",variant:"secondary",...We},Ge))},tr=Ge=>({buttonWrapper:v.css`
    padding: ${Ge.spacing(3)} 0;
  `}),Is=({dashboard:Ge,onNew:We,onEdit:ct})=>{const[St,$t]=(0,t.useState)(Ge.annotations.list),qt=(Un,_n)=>{Ge.annotations.list=er.moveItemImmutably(St,Un,Un+_n),$t(Ge.annotations.list)},Yt=Un=>{Ge.annotations.list=[...St.slice(0,Un),...St.slice(Un+1)],$t(Ge.annotations.list)},Dn=St.length===0||St.length===1&&St[0].builtIn,Nn=Un=>Un.enable===!1?t.createElement(t.Fragment,null,t.createElement(M.J,{name:"times"})," \xA0",t.createElement("em",{className:"muted"},"(Disabled) \xA0 ",Un.name)):Un.builtIn?t.createElement(t.Fragment,null,t.createElement(M.J,{name:"comment-alt"})," \xA0",t.createElement("em",{className:"muted"},Un.name," (Built-in)")):t.createElement(t.Fragment,null,t.createElement(M.J,{name:"comment-alt"})," \xA0",Un.name),wn=(0,yn.F)();return t.createElement(C.wc,null,St.length>0&&t.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Query name"),t.createElement("th",null,"Data source"),t.createElement("th",{colSpan:3}))),t.createElement("tbody",null,Ge.annotations.list.map((Un,_n)=>t.createElement("tr",{key:`${Un.name}-${_n}`},Un.builtIn?t.createElement("td",{role:"gridcell",style:{width:"90%"},className:"pointer",onClick:()=>ct(_n)},Nn(Un)):t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>ct(_n)},Nn(Un)),t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>ct(_n)},wn.getInstanceSettings(Un.datasource)?.name||Un.datasource?.uid),t.createElement("td",{role:"gridcell",style:{width:"1%"}},_n!==0&&t.createElement(x.h,{name:"arrow-up","aria-label":"arrow-up",onClick:()=>qt(_n,-1)})),t.createElement("td",{role:"gridcell",style:{width:"1%"}},Ge.annotations.list.length>1&&_n!==Ge.annotations.list.length-1?t.createElement(x.h,{name:"arrow-down","aria-label":"arrow-down",onClick:()=>qt(_n,1)}):null),t.createElement("td",{role:"gridcell",style:{width:"1%"}},!Un.builtIn&&t.createElement(dr.m,{size:"sm",onConfirm:()=>Yt(_n),"aria-label":`Delete query with title "${Un.name}"`})))))),Dn&&t.createElement(ye.Z,{onClick:We,title:"There are no custom annotation queries added yet",buttonIcon:"comment-alt",buttonTitle:"Add annotation query",infoBoxTitle:"What are annotation queries?",infoBox:{__html:`<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines
          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for
          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or
          drag region). These will be stored in Grafana's annotation database.
        </p>
        Checkout the
        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'
          >Annotations documentation</a
        >
        for more information.`}}),!Dn&&t.createElement(es,{onClick:We},"New query"))};function ts({dashboard:Ge,editIndex:We,sectionNav:ct}){const St=()=>{const Yt={name:Da,enable:!0,datasource:(0,En.iU)((0,yn.F)().getInstanceSettings(null)),iconColor:"red"};Ge.annotations.list=[...Ge.annotations.list,{...Yt}],s.E1.partial({editIndex:Ge.annotations.list.length-1})},$t=Yt=>{s.E1.partial({editIndex:Yt})},qt=We!=null&&We<Ge.annotations.list.length;return t.createElement(l.T,{navModel:ct,pageNav:Zs(Ge,We)},!qt&&t.createElement(Is,{dashboard:Ge,onNew:St,onEdit:$t}),qt&&t.createElement(Vs,{dashboard:Ge,editIdx:We}))}function Zs(Ge,We){if(We==null)return;const ct=Ge.annotations.list[We];if(ct)return{text:ct.name}}var Xt=e(35645),kt=e(43339),vn=e(79658),An=e(5191),Wn=e(53787),Xn=e(671),Ha=e(60499),Qa=e(50946);const ka=(Ge,We)=>{const[ct,St]=(0,Xn.Z)(()=>(0,Qa.iM)(Ge,!1),[]),$t=(0,Ha.iG)();return(0,t.useEffect)(()=>{ct.value&&(We(),s.E1.replace("/"),$t.success("Dashboard Deleted",`${ct.value.title} has been deleted`))},[ct,$t,We]),{state:ct,onDeleteDashboard:St}},ys={cleanUpDashboardAndVariables:vt.lw},xs=(0,h.connect)(null,ys),Ga=({hideModal:Ge,cleanUpDashboardAndVariables:We,dashboard:ct})=>{const St=ct.meta.provisioned,{onDeleteDashboard:$t}=ka(ct.uid,We),[,qt]=(0,Wn.default)(async()=>{await $t(),Ge()},[Ge]),Yt=or(ct.panels,ct.title);return St?t.createElement(bs,{hideModal:Ge,provisionedId:ct.meta.provisionedExternalId}):t.createElement(J.s,{isOpen:!0,body:Yt,onConfirm:qt,onDismiss:Ge,title:"Delete",icon:"trash-alt",confirmText:"Delete"})},or=(Ge,We)=>{const ct=(0,Re.sumBy)(Ge,St=>St.alert?1:0);return ct>0&&!a.vc.unifiedAlertingEnabled?t.createElement(t.Fragment,null,t.createElement("p",null,"Do you want to delete this dashboard?"),t.createElement("p",null,"This dashboard contains ",ct," alert",ct>1?"s":"",". Deleting this dashboard also deletes those alerts.")):t.createElement(t.Fragment,null,t.createElement("p",null,"Do you want to delete this dashboard?"),t.createElement("p",null,We))},bs=({hideModal:Ge,provisionedId:We})=>t.createElement(O.u,{isOpen:!0,title:"Cannot delete provisioned dashboard",icon:"trash-alt",onDismiss:Ge,className:v.css`
      width: 500px;
    `},t.createElement("p",null,"This dashboard is managed by Grafana provisioning and cannot be deleted. Remove the dashboard from the config file to delete it."),t.createElement("p",null,t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null),"File path: ",We),t.createElement(O.u.ButtonRow,null,t.createElement(r.zx,{variant:"primary",onClick:Ge},"OK"))),ur=xs(Ga),mr=({dashboard:Ge})=>t.createElement(An.JY,null,({showModal:We,hideModal:ct})=>t.createElement(r.zx,{variant:"destructive",onClick:()=>{We(ur,{dashboard:Ge,hideModal:ct})},"aria-label":"Dashboard settings page delete dashboard button"},"Delete Dashboard"));var Sr=e(82381),Wr=e(29930),ms=e(43993);class Mr extends t.PureComponent{constructor(){super(...arguments),this.state={},this.doUpload=(We,ct)=>{const St=We?.files&&We.files[0];if(!St){console.log("NOPE!",We);return}const $t=(0,ms.A)(this.props.uid,ct),qt=new FormData;qt.append("file",St),fetch($t,{method:"POST",body:qt}).then(Yt=>Yt.json()).then(Yt=>{console.log("Success:",Yt),location.reload()}).catch(Yt=>{console.error("Error:",Yt)})},this.markAsStale=We=>async()=>(0,Wr.i)().put((0,ms.A)(this.props.uid,We),{state:"stale"})}render(){const{uid:We}=this.props,ct={maxWidth:300,maxHeight:300};return t.createElement(E.s,{label:"Preview settings",isOpen:!0},t.createElement("div",null,"DUMMY UI just so we have an upload button!"),t.createElement("table",{cellSpacing:"4"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("td",null,"[DARK]"),t.createElement("td",null,"[LIGHT]"))),t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",null,t.createElement(r.zx,{type:"button",variant:"primary",onClick:this.markAsStale(!1),fill:"outline"},"Mark as stale")),t.createElement("td",null,t.createElement(r.zx,{type:"button",variant:"primary",onClick:this.markAsStale(!0),fill:"outline"},"Mark as stale"))),t.createElement("tr",null,t.createElement("td",null,t.createElement("img",{src:(0,ms.A)(We,!1),alt:"Preview of dashboard in dark theme",style:ct})),t.createElement("td",null,t.createElement("img",{src:(0,ms.A)(We,!0),alt:"Preview of dashboard in light theme",style:ct}))),t.createElement("tr",null,t.createElement("td",null,t.createElement(Sr.p,{accept:"image/png, image/webp",onFileUpload:({currentTarget:St})=>this.doUpload(St,!1)},"Upload dark")),t.createElement("td",null,t.createElement(Sr.p,{accept:"image/png, image/webp",onFileUpload:({currentTarget:St})=>this.doUpload(St,!0)},"Upload light"))))))}}var ir=e(42557);const tn=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];function pr({dashboard:Ge,updateTimeZone:We,updateWeekStart:ct,sectionNav:St}){const[$t,qt]=(0,t.useState)(0),Yt=as=>{Ge.meta.folderUid=as.uid,Ge.meta.folderTitle=as.title,Ge.meta.hasUnsavedFolderChange=!0},Dn=as=>{(as.currentTarget.name==="title"||as.currentTarget.name==="description")&&(Ge[as.currentTarget.name]=as.currentTarget.value)},Nn=as=>{Ge.graphTooltip=as,qt($t+1)},wn=as=>{Ge.timepicker.refresh_intervals=as.filter(Rs=>Rs.trim()!=="")},Un=as=>{Ge.timepicker.nowDelay=as},_n=as=>{Ge.timepicker.hidden=as,qt($t+1)},ns=as=>{Ge.liveNow=as,qt($t+1)},os=as=>{Ge.timezone=as,qt($t+1),We(as)},ks=as=>{Ge.weekStart=as,qt($t+1),ct(as)},Aa=as=>{Ge.tags=as,qt($t+1)},Za=as=>{Ge.editable=as,qt($t+1)},cs=[{label:"Editable",value:!0},{label:"Read-only",value:!1}];return t.createElement(l.T,{navModel:St},t.createElement("div",{style:{maxWidth:"600px"}},t.createElement("div",{className:"gf-form-group"},t.createElement(Q.g,{label:"Name"},t.createElement(Qn.I,{id:"title-input",name:"title",onBlur:Dn,defaultValue:Ge.title})),t.createElement(Q.g,{label:"Description"},t.createElement(Qn.I,{id:"description-input",name:"description",onBlur:Dn,defaultValue:Ge.description})),t.createElement(Q.g,{label:"Tags"},t.createElement(kt.B,{id:"tags-input",tags:Ge.tags,onChange:Aa,width:40})),t.createElement(Q.g,{label:"Folder"},t.createElement(vn.Es,{inputId:"dashboard-folder-input",initialTitle:Ge.meta.folderTitle,initialFolderUid:Ge.meta.folderUid,onChange:Yt,enableCreateNew:!0,dashboardId:Ge.id,skipInitialLoad:!0})),t.createElement(Q.g,{label:"Editable",description:"Set to read-only to disable all editing. Reload the dashboard for changes to take effect"},t.createElement(G.S,{value:Ge.editable,options:cs,onChange:Za}))),Xt.v.featureToggles.dashboardPreviews&&Xt.v.featureToggles.dashboardPreviewsAdmin&&t.createElement(Mr,{uid:Ge.uid}),t.createElement(ir.P,{onTimeZoneChange:os,onWeekStartChange:ks,onRefreshIntervalChange:wn,onNowDelayChange:Un,onHideTimePickerChange:_n,onLiveNowChange:ns,refreshIntervals:Ge.timepicker.refresh_intervals,timePickerHidden:Ge.timepicker.hidden,nowDelay:Ge.timepicker.nowDelay,timezone:Ge.timezone,weekStart:Ge.weekStart,liveNow:Ge.liveNow}),t.createElement(E.s,{label:"Panel options",isOpen:!0},t.createElement(Q.g,{label:"Graph tooltip",description:"Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect"},t.createElement(G.S,{onChange:Nn,options:tn,value:Ge.graphTooltip}))),t.createElement("div",{className:"gf-form-button-row"},Ge.meta.canDelete&&t.createElement(mr,{dashboard:Ge}))))}const $r={updateTimeZone:vt.tM,updateWeekStart:vt.f4},it=(0,h.connect)(null,$r)(pr);var Dt=e(9405),Lt=e(30992);function Gt({dashboard:Ge,sectionNav:We}){const[ct,St]=(0,t.useState)(JSON.stringify(Ge.getSaveModelClone(),null,2)),$t=async()=>{await(0,za.h4)().saveJSONDashboard(ct),Lt.H.reloadPage()},qt=(0,P.wW)(Zt),Yt="The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on";return t.createElement(l.T,{navModel:We,subTitle:Yt},t.createElement("div",{className:qt.wrapper},t.createElement(Dt.p,{value:ct,language:"json",showMiniMap:!0,showLineNumbers:!0,onBlur:St,containerStyles:qt.codeEditor}),Ge.meta.canSave&&t.createElement("div",null,t.createElement(r.zx,{type:"submit",onClick:$t},"Save changes"))))}const Zt=Ge=>({wrapper:(0,v.css)({display:"flex",height:"100%",flexDirection:"column",gap:Ge.spacing(2)}),codeEditor:(0,v.css)({flexGrow:1})});var cn=e(18428),hn=e(34807);const Tn=({dashboard:Ge,onNew:We,onEdit:ct})=>{const[St,$t]=(0,t.useState)(Ge.links),qt=(wn,Un)=>{Ge.links=er.moveItemImmutably(St,wn,wn+Un),$t(Ge.links)},Yt=(wn,Un)=>{Ge.links=[...St,{...wn}],$t(Ge.links)},Dn=wn=>{Ge.links=[...St.slice(0,wn),...St.slice(wn+1)],$t(Ge.links)};return Ge.links.length===0?t.createElement("div",null,t.createElement(ye.Z,{onClick:We,title:"There are no dashboard links added yet",buttonIcon:"link",buttonTitle:"Add dashboard link",infoBoxTitle:"What are dashboard links?",infoBox:{__html:"<p>Dashboard Links allow you to place links to other dashboards and web sites directly below the dashboard header.</p>"}})):t.createElement(t.Fragment,null,t.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Type"),t.createElement("th",null,"Info"),t.createElement("th",{colSpan:3}))),t.createElement("tbody",null,St.map((wn,Un)=>t.createElement("tr",{key:`${wn.title}-${Un}`},t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>ct(Un)},t.createElement(M.J,{name:"external-link-alt"})," \xA0 ",wn.type),t.createElement("td",{role:"gridcell"},t.createElement(C.Lh,null,wn.title&&t.createElement("span",null,wn.title),wn.type==="link"&&t.createElement("span",null,wn.url),wn.type==="dashboards"&&t.createElement(hn.P,{tags:wn.tags??[]}))),t.createElement("td",{style:{width:"1%"},role:"gridcell"},Un!==0&&t.createElement(x.h,{name:"arrow-up","aria-label":"arrow-up",onClick:()=>qt(Un,-1)})),t.createElement("td",{style:{width:"1%"},role:"gridcell"},St.length>1&&Un!==St.length-1?t.createElement(x.h,{name:"arrow-down","aria-label":"arrow-down",onClick:()=>qt(Un,1)}):null),t.createElement("td",{style:{width:"1%"},role:"gridcell"},t.createElement(x.h,{"aria-label":"copy",name:"copy",onClick:()=>Yt(wn,Un)})),t.createElement("td",{style:{width:"1%"},role:"gridcell"},t.createElement(dr.m,{"aria-label":`Delete link with title "${wn.title}"`,size:"sm",onConfirm:()=>Dn(Un)})))))),t.createElement(es,{onClick:We},"New link"))};function fn({dashboard:Ge,sectionNav:We,editIndex:ct}){const[St,$t]=(0,t.useState)(!1),qt=()=>{$t(!1),s.E1.partial({editIndex:void 0})},Yt=()=>{Ge.links=[...Ge.links,{...cn.zA}],$t(!0),s.E1.partial({editIndex:Ge.links.length-1})},Dn=Un=>{$t(!1),s.E1.partial({editIndex:Un})},Nn=ct!==void 0;let wn;return Nn&&(wn={text:St?"New link":"Edit link",subTitle:St?"Create a new link on your dashboard":"Edit a specific link of your dashboard"}),t.createElement(l.T,{navModel:We,pageNav:wn},!Nn&&t.createElement(Tn,{dashboard:Ge,onNew:Yt,onEdit:Dn}),Nn&&t.createElement(cn.fD,{dashboard:Ge,editLinkIdx:ct,onGoBack:qt}))}var Rt=e(99714);const ya=10;class Sa extends t.PureComponent{constructor(We){super(We),this.getVersions=(ct=!1)=>{this.setState({isAppending:ct}),Rt.K8.getHistoryList(this.props.dashboard,{limit:this.limit,start:this.start}).then(St=>{this.setState({isLoading:!1,versions:[...this.state.versions,...this.decorateVersions(St)]}),this.start+=this.limit}).catch(St=>console.log(St)).finally(()=>this.setState({isAppending:!1}))},this.getDiff=async()=>{const ct=this.state.versions.filter(Nn=>Nn.checked),[St,$t]=ct,qt=St.version===this.props.dashboard.version;this.setState({isLoading:!0});const Yt=await Rt.K8.getDashboardVersion(this.props.dashboard.uid,$t.version),Dn=await Rt.K8.getDashboardVersion(this.props.dashboard.uid,St.version);this.setState({baseInfo:$t,isLoading:!1,isNewLatest:qt,newInfo:St,viewMode:"compare",diffData:{lhs:Yt.data,rhs:Dn.data}})},this.decorateVersions=ct=>ct.map(St=>({...St,createdDateString:this.props.dashboard.formatDate(St.created),ageString:this.props.dashboard.getRelativeTime(St.created),checked:!1})),this.onCheck=(ct,St)=>{this.setState({versions:this.state.versions.map($t=>$t.id===St?{...$t,checked:ct.currentTarget.checked}:$t)})},this.reset=()=>{this.setState({baseInfo:void 0,diffData:{lhs:{},rhs:{}},isNewLatest:!1,newInfo:void 0,versions:this.state.versions.map(ct=>({...ct,checked:!1})),viewMode:"list"})},this.limit=ya,this.start=0,this.state={isAppending:!0,isLoading:!0,versions:[],viewMode:"list",isNewLatest:!1,diffData:{lhs:{},rhs:{}}}}componentDidMount(){this.getVersions()}isLastPage(){return this.state.versions.find(We=>We.version===1)}render(){const{versions:We,viewMode:ct,baseInfo:St,newInfo:$t,isNewLatest:qt,isLoading:Yt,diffData:Dn}=this.state,Nn=We.filter(_n=>_n.checked).length===2,wn=We.length>1,Un=We.length>=this.limit;return ct==="compare"?t.createElement(l.T,{navModel:this.props.sectionNav},t.createElement(Rt.Cs,{onClick:this.reset,baseVersion:St?.version,newVersion:$t?.version,isNewLatest:qt}),Yt?t.createElement(Ca,{msg:"Fetching changes\u2026"}):t.createElement(Rt.U$,{newInfo:$t,baseInfo:St,isNewLatest:qt,diffData:Dn})):t.createElement(l.T,{navModel:this.props.sectionNav},Yt?t.createElement(Ca,{msg:"Fetching history list\u2026"}):t.createElement(Rt.Sd,{versions:We,onCheck:this.onCheck,canCompare:Nn}),this.state.isAppending&&t.createElement(Ca,{msg:"Fetching more entries\u2026"}),wn&&t.createElement(Rt.R1,{hasMore:Un,canCompare:Nn,getVersions:this.getVersions,getDiff:this.getDiff,isLastPage:!!this.isLastPage()}))}}const Ca=({msg:Ge})=>t.createElement(C.Lh,null,t.createElement(b.$,null),t.createElement("em",null,Ge)),wa=()=>s.E1.partial({editview:null,editIndex:null});function rs({dashboard:Ge,editview:We,pageNav:ct,sectionNav:St}){const[$t,qt]=(0,t.useState)(0);(0,t.useEffect)(()=>{Ge.events.subscribe(p.hS,()=>qt(cs=>cs+1))},[Ge]);const Yt=(0,t.useMemo)(()=>Fa(Ge),[Ge,$t]),Dn=()=>{Ge.meta.hasUnsavedFolderChange=!1},Nn=Ge.meta.folderTitle,wn=Yt.find(cs=>cs.id===We)??Yt[0],Un=m.Vt.hasEditPermissionInFolders,_n=Ge.meta.canSave,ns=(0,n.TH)(),os=Bt(ns),ks=zs(ct,St,Yt,wn,ns),Aa=a.ZP.featureToggles.topnav?"sm":"md",Za=[a.ZP.featureToggles.topnav&&t.createElement(r.zx,{variant:"secondary",key:"close",fill:"outline",size:Aa,onClick:wa},"Close"),Un&&t.createElement(Mn.t,{dashboard:Ge,onSaveSuccess:Dn,variant:"secondary",key:"save as",size:Aa}),_n&&t.createElement(Mn.i,{dashboard:Ge,onSaveSuccess:Dn,key:"Save",size:Aa})];return t.createElement(t.Fragment,null,a.ZP.featureToggles.topnav?t.createElement(o.A,{actions:t.createElement(f.R,{alignment:"right"},Za)}):t.createElement(g.X,{title:`${Ge.title} / Settings`,parent:Nn,onGoBack:wa},Za),t.createElement(wn.component,{sectionNav:ks,dashboard:Ge,editIndex:os}))}function Fa(Ge){const We=[];return Ge.meta.canEdit&&(We.push({title:"General",id:"settings",icon:"sliders-v-alt",component:it}),We.push({title:"Annotations",id:"annotations",icon:"comment-alt",component:ts,subTitle:"Annotation queries return events that can be visualized as event markers in graphs across the dashboard."}),We.push({title:"Variables",id:"templating",icon:"calculator-alt",component:Pt,subTitle:"Variables can make your dashboard more dynamic and act as global filters."}),We.push({title:"Links",id:"links",icon:"link",component:fn})),Ge.meta.canMakeEditable&&We.push({title:"General",icon:"sliders-v-alt",id:"settings",component:_a}),Ge.id&&Ge.meta.canSave&&We.push({title:"Versions",id:"versions",icon:"history",component:Sa}),Ge.id&&Ge.meta.canAdmin&&(a.ZP.rbacEnabled?m.Vt.hasPermission(d.AccessControlAction.DashboardsPermissionsRead)&&We.push({title:"Permissions",id:"permissions",icon:"lock",component:kn}):We.push({title:"Permissions",id:"permissions",icon:"lock",component:sn})),We.push({title:"JSON Model",id:"dashboard_json",icon:"arrow",component:Gt}),We}function zs(Ge,We,ct,St,$t){const qt={text:"Settings",children:[],icon:"apps",hideFromBreadcrumbs:!0};return qt.children=ct.map(Yt=>({text:Yt.title,icon:Yt.icon,id:Yt.id,url:c.u.getUrlForPartial($t,{editview:Yt.id,editIndex:null}),active:Yt===St,parentItem:qt,subTitle:Yt.subTitle})),Ge.parentItem?Ge={...Ge,parentItem:{...Ge.parentItem,parentItem:We.node}}:Ge={...Ge,parentItem:We.node},qt.parentItem=Ge,{main:qt,node:qt.children.find(Yt=>Yt.active)}}function _a({dashboard:Ge,sectionNav:We}){return t.createElement(l.T,{navModel:We},t.createElement("div",{className:"dashboard-settings__header"},"Dashboard not editable"),t.createElement(r.zx,{type:"submit",onClick:()=>Ge.makeEditable()},"Make editable"))}function Bt(Ge){const We=new URLSearchParams(Ge.search).get("editIndex");if(We!=null)return parseInt(We,10)}},18428:(H,T,e)=>{"use strict";e.d(T,{fD:()=>p,xy:()=>m,zA:()=>l});var t=e(68404),n=e(24799),c=e(46967),s=e(53217),r=e(43339),g=e(20941),f=e(58255),o=e(31403);const l={icon:"external link",title:"New link",tooltip:"",type:"dashboards",url:"",asDropdown:!1,tags:[],targetBlank:!1,keepTime:!1,includeVars:!1},a=[{value:"dashboards",label:"Dashboards"},{value:"link",label:"Link"}],m={"external link":"external-link-alt",dashboard:"apps",question:"question-circle",info:"info-circle",bolt:"bolt",doc:"file-alt",cloud:"cloud"},d=Object.keys(m).map(h=>({label:h,value:h})),p=({editLinkIdx:h,dashboard:y,onGoBack:v})=>{const[i,u]=(0,t.useState)(h!==null?y.links[h]:l),P=x=>{const O=[...y.links];O.splice(h,1,x),y.links=O,u(x)},E=x=>{P({...i,tags:x})},C=x=>{const O={...i,type:x.value};O.type==="dashboards"?(O.url="",O.tooltip=""):O.tags=[],P(O)},b=x=>{P({...i,icon:x.value})},S=x=>{const O=x.currentTarget;P({...i,[O.name]:O.type==="checkbox"?O.checked:O.value})},M=i.title===l.title;return t.createElement("div",{style:{maxWidth:"600px"}},t.createElement(n.g,{label:"Title"},t.createElement(c.I,{name:"title",id:"title",value:i.title,onChange:S,autoFocus:M})),t.createElement(n.g,{label:"Type"},t.createElement(s.Ph,{inputId:"link-type-input",value:i.type,options:a,onChange:C})),i.type==="dashboards"&&t.createElement(t.Fragment,null,t.createElement(n.g,{label:"With tags"},t.createElement(r.B,{tags:i.tags,onChange:E}))),i.type==="link"&&t.createElement(t.Fragment,null,t.createElement(n.g,{label:"URL"},t.createElement(c.I,{name:"url",value:i.url,onChange:S})),t.createElement(n.g,{label:"Tooltip"},t.createElement(c.I,{name:"tooltip",value:i.tooltip,onChange:S,placeholder:"Open dashboard"})),t.createElement(n.g,{label:"Icon"},t.createElement(s.Ph,{value:i.icon,options:d,onChange:b}))),t.createElement(g.s,{label:"Options",isOpen:!0},i.type==="dashboards"&&t.createElement(n.g,null,t.createElement(f.X,{label:"Show as dropdown",name:"asDropdown",value:i.asDropdown,onChange:S})),t.createElement(n.g,null,t.createElement(f.X,{label:"Include current time range",name:"keepTime",value:i.keepTime,onChange:S})),t.createElement(n.g,null,t.createElement(f.X,{label:"Include current template variable values",name:"includeVars",value:i.includeVars,onChange:S})),t.createElement(n.g,null,t.createElement(f.X,{label:"Open link in new tab",name:"targetBlank",value:i.targetBlank,onChange:S}))),t.createElement(o.zx,{onClick:v},"Apply"))}},91183:(H,T,e)=>{"use strict";e.d(T,{u:()=>m});var t=e(52423),n=e(68404),c=e(24664),s=e(68183),r=e(72648),g=e(51275),f=e(31403),o=e(96044),l=e(36281);const a="showCategory",m=n.memo(({id:h,title:y,children:v,forceOpen:i,isOpenDefault:u,renderTitle:P,className:E,itemsCount:C,isNested:b=!1})=>{const S=u!==!1,[M,x]=(0,c.Z)(p(h),{isExpanded:S}),O=(0,r.wW)(d),[L,B]=(0,o.K)(),[w,R]=(0,n.useState)(M?.isExpanded??S),A=(0,n.useRef)(0),U=(0,n.useRef)(null),I=L[a]===h;(0,n.useEffect)(()=>{A.current&&Date.now()-A.current<200||(I||i)&&(w||R(!0),I&&U.current?.scrollIntoView())},[i,w,I]);const N=(0,n.useCallback)(()=>{A.current=Date.now(),B({[a]:w?void 0:h},!0),x({isExpanded:!w}),R(!w)},[x,R,B,w,h]);P||(P=function(K){return K||C===void 0||C===0?y:n.createElement("span",null,y," ",n.createElement(g.A,{value:C}))});const F=(0,t.cx)({[O.box]:!0,[O.boxNestedExpanded]:b&&w},E,"options-group"),D=(0,t.cx)(O.header,{[O.headerExpanded]:w,[O.headerNested]:b}),Y=(0,t.cx)(O.body,{[O.bodyNested]:b});return n.createElement("div",{className:F,"data-testid":"options-category","aria-label":s.wl.components.OptionsGroup.group(h),ref:U},n.createElement("div",{className:D,onClick:N,"aria-label":s.wl.components.OptionsGroup.toggle(h)},n.createElement(f.zx,{type:"button",fill:"text",size:"sm",variant:"secondary","aria-expanded":w,className:O.toggleButton,icon:w?"angle-down":"angle-right",onClick:N}),n.createElement("h6",{id:`button-${h}`,className:O.title},P(w))),w&&n.createElement("div",{className:Y,id:h,"aria-labelledby":`button-${h}`},v))});m.displayName="OptionsPaneCategory";const d=h=>({box:t.css`
      border-top: 1px solid ${h.colors.border.weak};
    `,boxNestedExpanded:t.css`
      margin-bottom: ${h.spacing(2)};
    `,title:t.css`
      flex-grow: 1;
      overflow: hidden;
      line-height: 1.5;
      font-size: 1rem;
      padding-left: 6px;
      font-weight: ${h.typography.fontWeightMedium};
      margin: 0;
    `,header:t.css`
      display: flex;
      cursor: pointer;
      align-items: center;
      padding: ${h.spacing(.5)};
      color: ${h.colors.text.primary};
      font-weight: ${h.typography.fontWeightMedium};

      &:hover {
        background: ${h.colors.emphasize(h.colors.background.primary,.03)};
      }
    `,toggleButton:t.css`
      align-self: baseline;
    `,headerExpanded:t.css`
      color: ${h.colors.text.primary};
    `,headerNested:t.css`
      padding: ${h.spacing(.5,0,.5,0)};
    `,body:t.css`
      padding: ${h.spacing(1,2,1,4)};
    `,bodyNested:t.css`
      position: relative;
      padding-right: 0;
      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 8px;
        width: 1px;
        height: 100%;
        background: ${h.colors.border.weak};
      }
    `}),p=h=>`${l.jy}.optionGroup[${h}]`},91752:(H,T,e)=>{"use strict";e.d(T,{j:()=>c});var t=e(68404),n=e(91183);class c{constructor(r){this.props=r,this.items=[],this.categories=[]}addItem(r){return r.parent=this,this.items.push(r),this}addCategory(r){return r.props.isNested=!0,r.parent=this,this.categories.push(r),this}getCategory(r){let g=this.categories.find(f=>f.props.id===r);return g||(g=new c({title:r,id:r}),this.addCategory(g),g)}render(r){return this.props.customRender?this.props.customRender():t.createElement(n.u,{key:this.props.title,...this.props},this.items.map(g=>g.render(r)),this.categories.map(g=>g.render(r)))}}},66352:(H,T,e)=>{"use strict";e.d(T,{a:()=>d});var t=e(68404),n=e(14677),c=e.n(n),s=e(68183),r=e(64353),g=e(24799),f=e(52423),o=e(72648),l=e(61860);function a({overrides:p}){const h=(0,o.wW)(m);return t.createElement("div",{className:h.wrapper},p.map((y,v)=>t.createElement(l.u,{content:y.tooltip,key:v.toString(),placement:"top"},t.createElement("div",{"aria-label":y.description,className:h[y.type]}))))}const m=p=>{const h={width:8,height:8,borderRadius:"50%",marginLeft:p.spacing(1),position:"relative",top:"-1px"};return{wrapper:(0,f.css)({display:"flex"}),rule:(0,f.css)({...h,backgroundColor:p.colors.primary.main}),data:(0,f.css)({...h,backgroundColor:p.colors.warning.main})}};class d{constructor(h){this.props=h}getLabel(h){const{title:y,description:v,overrides:i}=this.props;if(!h)return this.parent.props.title===y&&!i?.length?null:t.createElement(r._,{description:v},y,i&&i.length>0&&t.createElement(a,{overrides:i}));const u=[];return this.parent.parent&&u.push(this.highlightWord(this.parent.parent.props.title,h)),this.parent.props.title!==y&&u.push(this.highlightWord(this.parent.props.title,h)),t.createElement(r._,{description:v&&this.highlightWord(v,h),category:u},this.highlightWord(y,h),i&&i.length>0&&t.createElement(a,{overrides:i}))}highlightWord(h,y){return t.createElement(c(),{textToHighlight:h,searchWords:[y],highlightClassName:"search-fragment-highlight"})}renderOverrides(){const{overrides:h}=this.props;!h||h.length}render(h){const{title:y,description:v,render:i,showIf:u,skipField:P}=this.props,E=`${this.parent.props.id} ${y}`;return u&&!u()?null:P?i():t.createElement(g.g,{label:this.getLabel(h),description:v,key:E,"aria-label":s.wl.components.PanelEditor.OptionsPane.fieldLabel(E)},i())}}},57054:(H,T,e)=>{"use strict";e.d(T,{HZ:()=>p,AL:()=>d});var t=e(82897),n=e(68404),c=e(91171),s=e(64703),r=e(91752),g=e(66352);const f="Some data fields have this option pre-configured. Add a field override rule to override the pre-configured value.",o="An override rule exists for this property";function l(h,y,v){const i=[];if(v){for(const P of v)for(const E of P.fields)if((0,t.get)(E.config,h.path)!=null){i.push({type:"data",description:f,tooltip:f});break}}return y.overrides.some(P=>P.properties.some(E=>E.id===h.id))&&i.push({type:"rule",description:o,tooltip:o}),i}var a=e(13505);function m({data:h,replaceVariables:y,options:v,eventBus:i,instanceState:u}){const P=h?.series??[];return{data:P,replaceVariables:y,options:v,eventBus:i,getSuggestions:C=>(0,s.PW)(P,C),instanceState:u}}function d(h){const{plugin:y,panel:v,onPanelOptionsChanged:i,onFieldConfigsChange:u,data:P,dashboard:E,instanceState:C}=h,b=v.getOptions(),S=v.fieldConfig,M={},x=m({data:P,replaceVariables:v.replaceVariables,options:b,eventBus:E.events,instanceState:C}),O=B=>{const w=(B&&B[0])??`${y.meta.name}`,R=M[w];return R||(M[w]=new r.j({title:w,id:w}))},L={getValue:B=>(0,t.get)(b,B),onChange:(B,w)=>{const R=(0,a.hs)(b,B,w);i(R)}};p(y.getPanelOptionsSupplier(),L,O,x);for(const B of y.fieldConfigRegistry.list()){if(B.isCustom&&B.showIf&&!B.showIf(S.defaults.custom,P?.series)||B.hideFromDefaults)continue;const w=O(B.category),R=B.editor,A=S.defaults,U=B.isCustom?A.custom?(0,t.get)(A.custom,B.path):void 0:(0,t.get)(A,B.path);B.getItemsCount&&(w.props.itemsCount=B.getItemsCount(U)),w.addItem(new g.a({title:B.name,description:B.description,overrides:l(B,S,P?.series),render:function(){const N=F=>{u((0,a.uJ)(S,B.path,F,B.isCustom))};return n.createElement(R,{value:U,onChange:N,item:B,context:x,id:B.id})}}))}return Object.values(M)}function p(h,y,v,i,u){const P=new c.rt;h(P,i);for(const E of P.getItems()){if(E.showIf&&!E.showIf(i.options,i.data))continue;let C=u;if(C?E.category?.[0]?.length&&(C=C.getCategory(E.category[0])):C=v(E.category),(0,c.j)(E)){const S=E.getNestedValueAccess(y),M=S.getContext?S.getContext(i):{...i,options:y.getValue(E.path)};p(E.getBuilder(),S,v,M,C);continue}const b=E.editor;C.addItem(new g.a({title:E.name,description:E.description,render:function(){return n.createElement(b,{value:y.getValue(E.path),onChange:M=>{y.onChange(E.path,M)},item:E,context:i,id:E.id})}}))}}},36281:(H,T,e)=>{"use strict";e.d(T,{Hl:()=>m,K9:()=>y,OT:()=>i,ZP:()=>P,g_:()=>v,jy:()=>f,my:()=>h,yi:()=>p});var t=e(32557),n=e(49922),c=e(69311),s=e(58379),r=e(96161),g=e(16200);const f="grafana.dashboard.editor.ui",o={isPanelOptionsVisible:!0,rightPaneSize:400,topPaneSize:.45,mode:g.d1.Fill},l=()=>{const E=s.Z.getObject(f,o);let C={...E};return typeof E.topPaneSize=="string"&&(C={...E,topPaneSize:parseFloat(E.topPaneSize)/100}),{getPanel:()=>new r.r({}),getSourcePanel:()=>new r.r({}),getData:()=>({state:n.Gu.NotStarted,series:[],timeRange:(0,c.JK)()}),initDone:!1,shouldDiscardChanges:!1,isOpen:!1,isVizPickerOpen:!1,tableViewEnabled:!1,ui:{...o,...C}}},a=(0,t.oM)({name:"panelEditor",initialState:l(),reducers:{updateEditorInitState:(E,C)=>{E.getPanel=()=>C.payload.panel,E.getSourcePanel=()=>C.payload.sourcePanel,E.initDone=!0,E.isOpen=!0,E.shouldDiscardChanges=!1},setEditorPanelData:(E,C)=>{E.getData=()=>C.payload},setDiscardChanges:(E,C)=>{E.shouldDiscardChanges=C.payload},setPanelEditorUIState:(E,C)=>{E.ui={...E.ui,...C.payload},!E.ui.isPanelOptionsVisible&&E.isVizPickerOpen&&(E.isVizPickerOpen=!1)},toggleVizPicker:(E,C)=>{E.isVizPickerOpen=C.payload,E.isVizPickerOpen&&(E.ui.isPanelOptionsVisible=!0)},toggleTableView(E){E.tableViewEnabled=!E.tableViewEnabled},closeEditor:E=>{E.getPanel=()=>new r.r({}),E.getSourcePanel=()=>new r.r({}),E.isOpen=!1,E.initDone=!1,E.isVizPickerOpen=!1,E.tableViewEnabled=!1}}}),{updateEditorInitState:m,setEditorPanelData:d,setDiscardChanges:p,closeEditor:h,setPanelEditorUIState:y,toggleVizPicker:v,toggleTableView:i}=a.actions,P={panelEditor:a.reducer}},16200:(H,T,e)=>{"use strict";e.d(T,{Ip:()=>t,Ok:()=>g,d1:()=>n,d7:()=>s});var t=(f=>(f.Query="query",f.Transform="transform",f.Visualize="visualize",f.Alert="alert",f))(t||{}),n=(f=>(f[f.Fill=0]="Fill",f[f.Fit=1]="Fit",f[f.Exact=2]="Exact",f))(n||{}),c=(f=>(f[f.Off=0]="Off",f[f.Table=1]="Table",f))(c||{});const s=[{value:0,label:"Fill",description:"Use all available space"},{value:2,label:"Actual",description:"Make same size as on the dashboard"}],r=[{value:0,label:"Visualization",description:"Show using selected visualization"},{value:1,label:"Table",description:"Show raw data in table form"}];var g=(f=>(f[f.Visualizations=0]="Visualizations",f[f.LibraryPanels=1]="LibraryPanels",f[f.Suggestions=2]="Suggestions",f))(g||{})},13505:(H,T,e)=>{"use strict";e.d(T,{hs:()=>o,jF:()=>r,sY:()=>g,uJ:()=>f});var t=e(82897),n=e.n(t),c=e(84952),s=e(16200);function r(l,a,m,d){if(l===s.d1.Fill)return{width:a,height:m};const p=8*6,h=60,v=(window.innerWidth-h-c.hD*4)/c.cz*d.gridPos.w,i=c.K3*d.gridPos.h+p,u=Math.min(a/v,m/i);return v<=a&&i<=m?{width:v,height:i}:{width:v*u,height:i*u}}function g(l){return l?.meta.skipDataQuery===!1}const f=(l,a,m,d)=>{let p={...l.defaults};const h=m==null||m==="";return d?p.custom?h?p.custom=(0,t.omit)(p.custom,a):p.custom=o(p.custom,a,m):h||(p.custom=o(p.custom,a,m)):h?p=(0,t.omit)(p,a):p=o(p,a,m),{...l,defaults:p}};function o(l,a,m){const d=Array.isArray(a)?a:a.split("."),p=d.shift();if(p.endsWith("]")){const y=p.lastIndexOf("["),v=+p.substring(y+1,p.length-1),i=p.substring(0,y);let u=l[i];const P=Array.isArray(u)?[...u]:[];return d.length&&(u=P[v],(u==null||typeof u!="object")&&(u={}),m=o(u,d,m)),P[v]=m,{...l,[i]:P}}if(!d.length)return{...l,[p]:m};let h=l[p];return(h==null||typeof h!="object")&&(h={}),{...l,[p]:o(h,d,m)}}},50432:(H,T,e)=>{"use strict";e.d(T,{Go:()=>s,Jc:()=>r});var t=e(52423),n=e(68404),c=e(72648);const s=function(){const o=(0,c.wW)(f),l=g();return l.hide?null:n.createElement("div",{className:o.footer},n.createElement("a",{className:o.link,href:l.link,target:"_blank",rel:"noreferrer noopener"},l.text," ",n.createElement("img",{className:o.logoImg,alt:"",src:l.logo})))};function r(o){g=o}let g=()=>({hide:!1,text:"powered by Grafana",logo:"public/img/grafana_icon.svg",link:"https://grafana.com/"});const f=o=>({footer:t.css`
    display: flex;
    justify-content: end;
    height: 30px;
    padding: ${o.spacing(0,2,0,1)};
  `,link:t.css`
    display: flex;
    gap: 4px;
    justify-content: end;
    align-items: center;
  `,logoImg:t.css`
    height: 100%;
    padding: ${o.spacing(.25,0,.5,0)};
  `})},84135:(H,T,e)=>{"use strict";e.d(T,{i:()=>f,t:()=>o});var t=e(68404),n=e(68183),c=e(41818),s=e(5191),r=e(31403),g=e(7196);const f=({dashboard:l,onSaveSuccess:a,size:m})=>t.createElement(s.JY,null,({showModal:d,hideModal:p})=>t.createElement(r.zx,{size:m,onClick:()=>{d(g.d,{dashboard:l,onSaveSuccess:a,onDismiss:p})},"aria-label":n.wl.pages.Dashboard.Settings.General.saveDashBoard},"Save dashboard")),o=({dashboard:l,onSaveSuccess:a,variant:m,size:d})=>t.createElement(s.JY,null,({showModal:p,hideModal:h})=>t.createElement(r.zx,{size:d,onClick:()=>{(0,c.ff)("grafana_dashboard_save_as_clicked"),p(g.d,{dashboard:l,onSaveSuccess:a,onDismiss:h,isCopy:!0})},variant:m,"aria-label":n.wl.pages.Dashboard.Settings.General.saveAsDashBoard},"Save as"))},7196:(H,T,e)=>{"use strict";e.d(T,{d:()=>_e});var t=e(68404),n=e(22350),c=e(35645),s=e(54899),r=e(67487),g=e(30979),f=e(72142),o=e(79841),l=e(29930),a=e(15092),m=e(52423),d=e(72648),p=e(45253);function h({dashboard:et}){const qe=(0,d.wW)(y),{loading:Je,value:lt,error:at}=(0,n.Z)(async()=>{const gt=et.getSaveModelClone();return l.ae.validateDashboard(gt).catch(Ye=>{if(Ye.status>=500)throw Ye;return Ye.data})},[et]);let Xe;if(Je)Xe=t.createElement(p.b,{severity:"info",title:"Checking dashboard validity"});else if(lt)lt.isValid||(Xe=t.createElement(p.b,{severity:"warning",title:"Dashboard failed schema validation"},t.createElement("p",null,"Validation is provided for development purposes and should be safe to ignore. If you are a Grafana developer, consider checking and updating the dashboard schema"),t.createElement("div",{className:qe.error},lt.message)));else{const gt=at?.message??"Unknown error";Xe=t.createElement(p.b,{severity:"info",title:"Error checking dashboard validity"},t.createElement("p",{className:qe.error},gt))}return Xe?t.createElement("div",{className:qe.root},Xe):null}const y=et=>({root:(0,m.css)({marginTop:et.spacing(1)}),error:(0,m.css)({fontFamily:et.typography.fontFamilyMonospace,whiteSpace:"pre-wrap",overflowX:"auto",maxWidth:"100%"})}),v=h;var i=e(64687),u=e(61017);const P=({diff:et,oldValue:qe,newValue:Je})=>{const lt=(0,d.wW)(E),at=(0,n.Z)(async()=>{const gt=JSON.stringify(qe??{},null,2),ot=JSON.stringify(Je??{},null,2);let Ye;const mt=[];let ce=0;if(et)for(const[be,Te]of Object.entries(et)){const Ke=t.createElement(i.B,{diffs:Te,key:be,title:be});be==="schemaVersion"?Ye=Ke:mt.push(Ke),ce+=Te.length}return{schemaChange:Ye,diffs:mt,count:ce,showDiffs:ce<15,jsonView:t.createElement(u.Z,{oldValue:gt,newValue:ot})}},[et,qe,Je]),{value:Xe}=at;return!Xe||!qe?t.createElement(r.$,null):Xe.count<1?t.createElement("div",null,"No changes in this dashboard"):t.createElement("div",null,Xe.schemaChange&&t.createElement("div",{className:lt.spacer},Xe.schemaChange),Xe.showDiffs&&t.createElement("div",{className:lt.spacer},Xe.diffs),t.createElement("h4",null,"JSON Model"),Xe.jsonView)},E=et=>({spacer:m.css`
    margin-bottom: ${et.v1.spacing.xl};
  `});var C=e(98102),b=e(35029),S=e(31403),M=e(84135),x=e(53787),O=e(83383),L=e(41818),B=e(37932),w=e(97063),R=e(60499),A=e(77582),U=e(61962),I=e(50946),N=e(81168),F=e(45984);const D=async(et,qe,Je)=>{let lt=qe.folderUid;lt===void 0&&(lt=Je.meta.folderUid??et.folderUid);const at=await(0,I.uC)({...qe,folderUid:lt,dashboard:et});return await A.Vt.fetchUserPermissions(),at},Y=(et,qe=!1)=>{const[Je,lt]=(0,x.default)(async(gt,ot,Ye)=>await D(gt,ot,Ye),[]),at=(0,N.useDispatch)(),Xe=(0,R.iG)();return(0,t.useEffect)(()=>{if(Je.error&&!Je.loading&&Xe.error(Je.error.message??"Error saving dashboard"),Je.value){et.version=Je.value.version,et.clearUnsavedChanges(),w.Z.publish(new F.Jd),Xe.success("Dashboard saved"),qe?(0,L.ff)("grafana_dashboard_copied",{name:et.title,url:Je.value.url}):(0,L.ff)(`grafana_dashboard_${et.id?"saved":"created"}`,{name:et.title,url:Je.value.url});const gt=B.E1.getLocation().pathname,ot=O.u.stripBaseFromUrl(Je.value.url);ot!==gt&&setTimeout(()=>B.E1.replace(ot)),et.meta.isStarred&&at((0,U.gd)({id:et.uid,title:et.title,url:ot}))}},[et,qe,Je,Xe,at]),{state:Je,onDashboardSave:lt}},j=({dashboard:et,dashboardSaveModel:qe,error:Je,onDismiss:lt})=>{const{onDashboardSave:at}=Y(et);return(0,t.useEffect)(()=>{Je.data&&z(Je.data.status)&&(Je.isHandled=!0)},[Je]),t.createElement(t.Fragment,null,Je.data&&Je.data.status==="version-mismatch"&&t.createElement(C.s,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"Someone else has updated this dashboard ",t.createElement("br",null)," ",t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await at(qe,{overwrite:!0},et),lt()},onDismiss:lt}),Je.data&&Je.data.status==="name-exists"&&t.createElement(C.s,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"A dashboard with the same name in selected folder already exists. ",t.createElement("br",null),t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await at(qe,{overwrite:!0},et),lt()},onDismiss:lt}),Je.data&&Je.data.status==="plugin-dashboard"&&t.createElement(K,{dashboard:et,onDismiss:lt}))},K=({onDismiss:et,dashboard:qe})=>{const{onDashboardSave:Je}=Y(qe),lt=(0,d.wW)(Z);return t.createElement(b.u,{className:lt.modal,title:"Plugin dashboard",icon:"copy",isOpen:!0,onDismiss:et},t.createElement("div",{className:lt.modalText},"Your changes will be lost when you update the plugin.",t.createElement("br",null),t.createElement("small",null,"Use ",t.createElement("strong",null,"Save As")," to create custom version.")),t.createElement(b.u.ButtonRow,null,t.createElement(S.zx,{variant:"secondary",onClick:et,fill:"outline"},"Cancel"),t.createElement(M.t,{dashboard:qe,onSaveSuccess:et}),t.createElement(S.zx,{variant:"destructive",onClick:async()=>{await Je(qe.getSaveModelClone(),{overwrite:!0},qe),et()}},"Overwrite")))},z=et=>{switch(et){case"version-mismatch":case"name-exists":case"plugin-dashboard":return!0;default:return!1}},Z=et=>({modal:m.css`
    width: 500px;
  `,modalText:m.css`
    font-size: ${et.typography.h4.fontSize};
    color: ${et.colors.text.primary};
    margin-bottom: ${et.spacing(4)}
    padding-top: ${et.spacing(2)};
  `,modalButtonRow:m.css`
    margin-bottom: 14px;
    a,
    button {
      margin-right: ${et.spacing(2)};
    }
  `});var ae=e(94270),J=e(24799),oe=e(46967),Ee=e(63619),me=e(8944),re=e(52081),le=e(79658),pe=e(85385);const ee=et=>{const qe=et.getSaveModelClone();return qe.id=null,qe.uid="",qe.title+=" Copy",qe.editable=!0,et.id>0&&qe.panels.forEach(Je=>{Je.type==="graph"&&Je.alert&&delete Je.thresholds,delete Je.alert}),qe},se=({dashboard:et,isNew:qe,onSubmit:Je,onCancel:lt,onSuccess:at})=>{const Xe={title:qe?et.title:`${et.title} Copy`,$folder:{uid:et.meta.folderUid,title:et.meta.folderTitle},copyTags:!1},gt=ot=>async Ye=>{if(Ye&&Ye===ot().$folder.title?.trim())return"Dashboard name cannot be the same as folder name";try{return await pe.t.validateNewDashboardName(ot().$folder.uid,Ye),!0}catch(mt){return mt instanceof Error?mt.message:"Dashboard name is invalid"}};return t.createElement(ae.l,{defaultValues:Xe,onSubmit:async ot=>{if(!Je)return;const Ye=ee(et);Ye.title=ot.title,ot.copyTags||(Ye.tags=[]),(await Je(Ye,{folderUid:ot.$folder.uid},et)).status==="success"&&at()}},({register:ot,control:Ye,errors:mt,getValues:ce})=>t.createElement(t.Fragment,null,t.createElement(J.g,{label:"Dashboard name",invalid:!!mt.title,error:mt.title?.message},t.createElement(oe.I,{...ot("title",{validate:gt(ce)}),"aria-label":"Save dashboard title field",autoFocus:!0})),t.createElement(J.g,{label:"Folder"},t.createElement(Ee.g,{render:({field:{ref:be,...Te}})=>t.createElement(le.Es,{...Te,dashboardId:et.id,initialFolderUid:et.meta.folderUid,initialTitle:et.meta.folderTitle,enableCreateNew:!0}),control:Ye,name:"$folder"})),!qe&&t.createElement(J.g,{label:"Copy tags"},t.createElement(me.r,{...ot("copyTags")})),t.createElement(re.Lh,null,t.createElement(S.zx,{type:"button",variant:"secondary",onClick:lt,fill:"outline"},"Cancel"),t.createElement(S.zx,{type:"submit","aria-label":"Save dashboard button"},"Save"))))};var Q=e(68183),G=e(26418),q=e(58255),X=e(97379);const de=({dashboard:et,saveModel:qe,options:Je,onSubmit:lt,onCancel:at,onSuccess:Xe,onOptionsChange:gt})=>{const ot=(0,t.useMemo)(()=>et.hasTimeChanged(),[et]),Ye=(0,t.useMemo)(()=>et.hasVariableValuesChanged(),[et]),[mt,ce]=(0,t.useState)(!1);return t.createElement(ae.l,{onSubmit:async be=>{if(!lt)return;ce(!0),Je={...Je,message:be.message},(await lt(qe.clone,Je,et)).status==="success"?(Je.saveVariables&&et.resetOriginalVariables(),Je.saveTimerange&&et.resetOriginalTime(),Xe()):ce(!1)}},({register:be,errors:Te})=>{const Ke=be("message");return t.createElement(G.Stack,{direction:"column",gap:2},ot&&t.createElement(q.X,{checked:!!Je.saveTimerange,onChange:()=>gt({...Je,saveTimerange:!Je.saveTimerange}),label:"Save current time range as dashboard default","aria-label":Q.wl.pages.SaveDashboardModal.saveTimerange}),Ye&&t.createElement(q.X,{checked:!!Je.saveVariables,onChange:()=>gt({...Je,saveVariables:!Je.saveVariables}),label:"Save current variable values as dashboard default","aria-label":Q.wl.pages.SaveDashboardModal.saveVariables}),t.createElement(X.K,{...Ke,"aria-label":"message",value:Je.message,onChange:ge=>{gt({...Je,message:ge.currentTarget.value}),Ke.onChange(ge)},placeholder:"Add a note to describe your changes.",autoFocus:!0,rows:5}),t.createElement(G.Stack,{alignItems:"center"},t.createElement(S.zx,{variant:"secondary",onClick:at,fill:"outline"},"Cancel"),t.createElement(S.zx,{type:"submit",disabled:!qe.hasChanges,icon:mt?"fa fa-spinner":void 0,"aria-label":Q.wl.pages.SaveDashboardModal.save},"Save"),!qe.hasChanges&&t.createElement("div",null,"No changes to save")))})};var Be=e(3574),ke=e(94599);const He=({dashboard:et,onCancel:qe})=>{const[Je,lt]=(0,t.useState)(()=>{const Xe=et.getSaveModelClone();return delete Xe.id,JSON.stringify(Xe,null,2)}),at=(0,t.useCallback)(()=>{const Xe=new Blob([Je],{type:"application/json;charset=utf-8"});(0,Be.saveAs)(Xe,et.title+"-"+new Date().getTime()+".json")},[et.title,Je]);return t.createElement(t.Fragment,null,t.createElement(G.Stack,{direction:"column",gap:2},t.createElement("div",null,"This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source.",t.createElement("br",null),t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null)," ",t.createElement("br",null),t.createElement("strong",null,"File path: ")," ",et.meta.provisionedExternalId),t.createElement(X.K,{spellCheck:!1,value:Je,onChange:Xe=>{lt(Xe.currentTarget.value)},className:ue.json}),t.createElement(re.Lh,null,t.createElement(S.zx,{variant:"secondary",onClick:qe,fill:"outline"},"Cancel"),t.createElement(ke.m,{icon:"copy",getText:()=>Je},"Copy JSON to clipboard"),t.createElement(S.zx,{type:"submit",onClick:at},"Save JSON to file"))))},ue={json:m.css`
    height: 400px;
    width: 100%;
    overflow: auto;
    resize: none;
    font-family: monospace;
  `};var Oe=e(2594),Fe=e(63163),Ie=e(94108);function we(et){const{dashboard:qe,saveModel:Je,onSubmit:lt,onCancel:at,onSuccess:Xe,onOptionsChange:gt,isNew:ot,isCopy:Ye}=et,mt=(0,t.useMemo)(()=>qe.hasTimeChanged(),[qe]),ce=(0,t.useMemo)(()=>qe.hasVariableValuesChanged(),[qe]),[be,Te]=(0,t.useState)(!1),[Ke,ge]=(0,t.useState)(),[Me,ye]=(0,t.useState)(qe.uid),[fe,he]=(0,t.useState)(Ie.c.Save),De=(0,t.useMemo)(()=>{switch(fe){case Ie.c.PR:return"Create PR";case Ie.c.Push:return"Push"}return console.log("???",fe),"Save"},[fe]),Ae=(0,n.Z)(async()=>{const Ue=await(0,Fe.$)().getOptions(qe.uid);return he(Ue.workflows[0]?.value??Ie.c.Save),Ue},[qe.uid]);if(Ae.error)return t.createElement("div",null,"Error loading workflows");if(Ae.loading||!Ae.value)return t.createElement(r.$,null);if(Ke)return t.createElement("div",null,Ke.url&&t.createElement("div",null,t.createElement("h2",null,"View pull request"),t.createElement("a",{href:Ke.url},Ke.url)),t.createElement("pre",null,JSON.stringify(Ke)),t.createElement(re.Lh,null,t.createElement(S.zx,{variant:"secondary",onClick:at},"Close")));let Ne=et.options;const Ze=Ae.value?.workflows??[],Se=Je.hasChanges||ot||Ye;return t.createElement(ae.l,{onSubmit:async Ue=>{if(!lt)return;Te(!0);let{uid:Qe,...pt}=Je.clone;(ot||Ye)&&(Qe=Me,Qe.endsWith("-dash.json")||(Qe+="-dash.json"));const bt=await(0,Fe.$)().write(Qe,{body:pt,kind:"dashboard",title:Ue.title,message:Ue.message,workflow:fe});console.log("GOT",bt),bt.code===200?(Ne.saveVariables&&qe.resetOriginalVariables(),Ne.saveTimerange&&qe.resetOriginalTime(),bt.pending||(Xe(),(ot||Ye)&&B.E1.push(`/g/${Qe}`))):Te(!1),ge(bt)}},({register:Ue,errors:Qe})=>t.createElement(G.Stack,{direction:"column",gap:1},t.createElement(G.Stack,{direction:"column",gap:1},mt&&t.createElement(q.X,{checked:!!Ne.saveTimerange,onChange:()=>gt({...Ne,saveTimerange:!Ne.saveTimerange}),label:"Save current time range as dashboard default","aria-label":Q.wl.pages.SaveDashboardModal.saveTimerange}),ce&&t.createElement(q.X,{checked:!!Ne.saveVariables,onChange:()=>gt({...Ne,saveVariables:!Ne.saveVariables}),label:"Save current variable values as dashboard default","aria-label":Q.wl.pages.SaveDashboardModal.saveVariables})),(ot||Ye)&&t.createElement(J.g,{label:"Path"},t.createElement(oe.I,{value:Me??"",required:!0,autoFocus:!0,placeholder:"Full path (todo, help validate)",onChange:pt=>ye(pt.currentTarget.value)})),!Re(Ae.value)&&t.createElement(J.g,{label:"Workflow"},t.createElement(Oe.S,{value:fe,options:Ze,onChange:he})),fe===Ie.c.PR&&t.createElement(J.g,{label:"PR Title"},t.createElement(oe.I,{...Ue("title"),required:!0,placeholder:"Enter a PR title",autoFocus:!0})),t.createElement(J.g,{label:"Message"},t.createElement(X.K,{...Ue("message"),placeholder:"Add a note to describe your changes.",rows:5})),t.createElement(re.Lh,null,t.createElement(S.zx,{variant:"secondary",onClick:at,fill:"outline"},"Cancel"),t.createElement(S.zx,{type:"submit",disabled:!Se,icon:be?"fa fa-spinner":void 0,"aria-label":Q.wl.pages.SaveDashboardModal.save},De),!Se&&t.createElement("div",null,"No changes to save"))))}function Re(et){return et.workflows.length===1?et.workflows.find(qe=>qe.value===Ie.c.Save)!=null:!1}const _e=({dashboard:et,onDismiss:qe,onSaveSuccess:Je,isCopy:lt})=>{const[at,Xe]=(0,t.useState)({}),gt=c.v.featureToggles.dashboardsFromStorage&&et.uid?.indexOf("/")>0,ot=et.meta.provisioned&&!gt,Ye=et.version===0&&!gt,mt=(0,n.Z)(async()=>Ye?void 0:(await l.ae.getDashboardByUid(et.uid)).dashboard,[et,Ye]),ce=(0,t.useMemo)(()=>{const he=et.getSaveModelClone({saveTimerange:Boolean(at.saveTimerange),saveVariables:Boolean(at.saveVariables)});if(!mt.value)return{clone:he,diff:{},diffCount:0,hasChanges:!1};const De=JSON.stringify(he,null,2),Ae=JSON.parse(De),Ne=(0,a.Q$)(mt.value,Ae);let Ze=0;for(const Se of Object.values(Ne))Ze+=Se.length;return{clone:he,diff:Ne,diffCount:Ze,hasChanges:Ze>0&&!Ye}},[et,mt.value,at,Ye]),[be,Te]=(0,t.useState)(!1),{state:Ke,onDashboardSave:ge}=Y(et,lt),Me=Je?()=>{qe(),Je()}:qe,ye=()=>be?t.createElement(P,{diff:ce.diff,oldValue:mt.value,newValue:ce.clone}):Ke.loading?t.createElement("div",null,t.createElement(r.$,null)):gt?t.createElement(we,{dashboard:et,saveModel:ce,onCancel:qe,onSuccess:Me,onSubmit:ge,options:at,onOptionsChange:Xe,isNew:Ye,isCopy:lt}):Ye||lt?t.createElement(se,{dashboard:et,onCancel:qe,onSuccess:Me,onSubmit:ge,isNew:Ye}):ot?t.createElement(He,{dashboard:et,onCancel:qe,onSuccess:Me}):t.createElement(de,{dashboard:et,saveModel:ce,onCancel:qe,onSuccess:Me,onSubmit:ge,options:at,onOptionsChange:Xe});if(Ke.error&&(0,s.kW)(Ke.error)&&!Ke.error.isHandled)return t.createElement(j,{error:Ke.error,dashboard:et,dashboardSaveModel:ce.clone,onDismiss:qe});let fe="Save dashboard";return lt?fe="Save dashboard copy":ot&&(fe="Provisioned dashboard"),t.createElement(g.d,{title:fe,onClose:qe,width:"40%",subtitle:et.title,tabs:t.createElement(f.J,null,t.createElement(o.O,{label:"Details",active:!be,onChangeTab:()=>Te(!1)}),ce.hasChanges&&t.createElement(o.O,{label:"Changes",active:be,onChangeTab:()=>Te(!0),counter:ce.diffCount})),expandable:!0,scrollableContent:!0},ye(),c.v.featureToggles.showDashboardValidationWarnings&&t.createElement(v,{dashboard:et}))}},18262:(H,T,e)=>{"use strict";e.d(T,{ShareModal:()=>Ke,addDashboardShareTab:()=>mt});var t=e(68404),n=e(41818),c=e(88683),s=e(35029),r=e(94893),g=e(47694),f=e(77582),o=e(35287),l=e(52423),a=e(59052),m=e(95484),d=e(68183),p=e(32434),h=e(72648),y=e(5191),v=e(52081),i=e(67487),u=e(45253),P=e(24799),E=e(46967),C=e(94599),b=e(31403),S=e(82002),M=e(10655),x=e(13393),O=e(58255);const L=d.wl.pages.ShareDashboardModal.PublicDashboard,B=[{type:"publicAcknowledgment",description:"Your entire dashboard will be public",testId:L.WillBePublicCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",tooltip:"Learn more about public dashboards"}},{type:"dataSourcesAcknowledgment",description:"Publishing currently only works with a subset of datasources",testId:L.LimitedDSCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/datasources/",tooltip:"Learn more about public datasources"}},{type:"usageAcknowledgment",description:"Making a dashboard public causes queries to run each time it is viewed, which may increase costs",testId:L.CostIncreaseCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",tooltip:"Learn more about query caching"}}],w=({disabled:ge,register:Me})=>t.createElement(t.Fragment,null,t.createElement("p",null,"Before you click Save, please acknowledge the following information:"),t.createElement(x.C,{disabled:ge},t.createElement(v.wc,{spacing:"md"},B.map(ye=>t.createElement(v.Lh,{key:ye.type,spacing:"none",align:"center"},t.createElement(O.X,{...Me(ye.type),label:ye.description,"data-testid":ye.testId}),t.createElement(b.Qj,{variant:"primary",href:ye.info.href,target:"_blank",fill:"text",icon:"info-circle",rel:"noopener noreferrer",tooltip:ye.info.tooltip}))))));var R=e(64353),A=e(95794),U=e(8944),I=e(98101);const N=()=>{const{width:ge}=(0,I.Z)();return ge>1024};var F=e(74124);const D=({disabled:ge,dashboard:Me,register:ye})=>{const fe=d.wl.pages.ShareDashboardModal.PublicDashboard,he=(0,h.wW)(Y),De=N(),Ae=(0,F.O)(Me.getDefaultTime(),Me);return t.createElement(t.Fragment,null,t.createElement("h4",{className:he.title},"Public dashboard configuration"),t.createElement(x.C,{disabled:ge,className:he.dashboardConfig},t.createElement(v.wc,{spacing:"md"},t.createElement(v.Ar,{orientation:De?0:1,spacing:"xs",justify:"space-between"},t.createElement(R._,{description:"The public dashboard uses the default time settings of the dashboard"},"Default time range"),t.createElement(A.K,{value:Ae,disabled:!0,onChange:()=>{}})),t.createElement(v.Ar,{orientation:De?0:1,spacing:"xs",justify:"space-between"},t.createElement(R._,{description:"Allow viewers to change time range"},"Time range picker enabled"),t.createElement(U.r,{...ye("isTimeRangeEnabled"),"data-testid":fe.EnableTimeRangeSwitch})),t.createElement(v.Ar,{orientation:De?0:1,spacing:"xs",justify:"space-between"},t.createElement(R._,{description:"Show annotations on public dashboard"},"Show annotations"),t.createElement(U.r,{...ye("isAnnotationsEnabled"),onChange:Ne=>{const{onChange:Ze}=ye("isAnnotationsEnabled");(0,n.ff)("grafana_dashboards_annotations_clicked",{action:Ne.currentTarget.checked?"enable":"disable"}),Ze(Ne)},"data-testid":fe.EnableAnnotationsSwitch})),t.createElement(v.Ar,{orientation:De?0:1,spacing:"xs",justify:"space-between"},t.createElement(R._,{description:"Configures whether current dashboard can be available publicly"},"Enabled"),t.createElement(U.r,{...ye("enabledSwitch"),onChange:Ne=>{const{onChange:Ze}=ye("enabledSwitch");(0,n.ff)("grafana_dashboards_public_enable_clicked",{action:Ne.currentTarget.checked?"enable":"disable"}),Ze(Ne)},"data-testid":fe.EnableSwitch})))))},Y=ge=>({title:l.css`
    margin-bottom: ${ge.spacing(2)};
  `,dashboardConfig:l.css`
    margin: ${ge.spacing(0,0,3,0)};
  `,timeRange:l.css`
    margin-bottom: ${ge.spacing(0)};
  `,timeRangeDisabledText:l.css`
    font-size: ${ge.typography.bodySmall.fontSize};
  `}),j=()=>t.createElement(t.Fragment,null,t.createElement("p",null,"To allow the current dashboard to be published publicly, toggle the switch. For now we do not support template variables or frontend datasources."),t.createElement("p",null,"We'd love your feedback. To share, please comment on this"," ",t.createElement("a",{href:"https://github.com/grafana/grafana/discussions/49253",target:"_blank",rel:"noreferrer",className:"text-link"},"GitHub discussion"),".")),K=new Set(["aquaqanalytics-kdbbackend-datasource","cloudwatch","dlopes7-appdynamics-datasource","doitintl-bigquery-datasource","elasticsearch","frser-sqlite-datasource","grafadruid-druid-datasource","grafana-athena-datasource","grafana-azure-data-explorer-datasource","grafana-azure-monitor-datasource","grafana-bigquery-datasource","grafana-clickhouse-datasource","grafana-databricks-datasource","grafana-datadog-datasource","grafana-db2-datasource","grafana-dynatrace-datasource","grafana-es-open-distro-datasource","grafana-github-datasource","grafana-honeycomb-datasource","grafana-iot-sitewise-datasource","grafana-jira-datasource","grafana-mock-datasource","grafana-mongodb-datasource","grafana-newrelic-datasource","grafana-odbc-datasource","grafana-opcua-datasource","grafana-opensearch-datasource","grafana-oracle-datasource","grafana-orbit-datasource","grafana-redshift-datasource","grafana-salesforce-datasource","grafana-saphana-datasource","grafana-sentry-datasource","grafana-servicenow-datasource","grafana-snowflake-datasource","grafana-splunk-datasource","grafana-splunk-monitoring-datasource","grafana-timestream-datasource","grafana-wavefront-datasource","grafana-x-ray-datasource","graphite","hadesarchitect-cassandra-datasource","influxdb","innius-grpc-datasource","kniepdennis-neo4j-datasource","loki","marcusolsson-csv-datasource","marcusolsson-ynab-datasource","mssql","mysql","opentsdb","postgres","prometheus","redis-datasource","sentinelone-dataset-datasource","tdengine-datasource","vertamedia-clickhouse-datasource","vertica-grafana-datasource","yesoreyeram-infinity-datasource"]),z=ge=>ge.length>0,Z=ge=>ge?.uid!==""&&ge?.uid!==void 0,ae=ge=>{let Me=new Set;for(const ye of ge)for(const fe of ye.targets){let he=fe?.datasource?.type;he&&!K.has(he)&&Me.add(he)}return Array.from(Me).sort()},J=ge=>`${(0,g.iE)().appUrl}public-dashboards/${ge.accessToken}`;var oe=e(80600),Ee=e(84532),me=e(81168),re=e(45984);const le=ge=>{const Me=(0,p.N)(),ye=(0,h.wW)(pe),{showModal:fe,hideModal:he}=(0,t.useContext)(y.kr),De=N(),Ae=ge.dashboard.getVariables(),Ne=d.wl.pages.ShareDashboardModal.PublicDashboard,{isLoading:Ze,data:Se,isError:Ue,isFetching:Qe}=(0,M.Ym)(ge.dashboard.uid),{reset:pt,handleSubmit:bt,watch:yt,register:Mt,formState:{dirtyFields:At}}=(0,a.cI)({defaultValues:{publicAcknowledgment:!1,dataSourcesAcknowledgment:!1,usageAcknowledgment:!1,isAnnotationsEnabled:!1,isTimeRangeEnabled:!1,enabledSwitch:!1}}),[Pt,{isLoading:rn}]=(0,M.zZ)(),[Fn,{isLoading:kn}]=(0,M.Mi)();(0,t.useEffect)(()=>{const It=new m.w0;return It.add(ge.dashboard.events.subscribe(re.hS,Me)),(0,n.ff)("grafana_dashboards_public_share_viewed"),()=>It.unsubscribe()},[ge.dashboard.events,Me]),(0,t.useEffect)(()=>{const It=Z(Se);pt({publicAcknowledgment:It,dataSourcesAcknowledgment:It,usageAcknowledgment:It,isAnnotationsEnabled:Se?.annotationsEnabled,isTimeRangeEnabled:Se?.timeSelectionEnabled,enabledSwitch:Se?.isEnabled})},[Se,pt]);const Jn=Ze||rn||kn,qn=S.Vt.hasAccess(me.AccessControlAction.DashboardsPublicWrite,(0,Ee.RN)()),Ut=yt("publicAcknowledgment")&&yt("dataSourcesAcknowledgment")&&yt("usageAcknowledgment"),ut=(0,t.useMemo)(()=>!qn||!Ut||ge.dashboard.hasUnsavedChanges()||Jn||Qe||Ue||!Z(Se)&&!At.enabledSwitch,[qn,Ut,ge.dashboard,Jn,Ue,Se,Qe,At.enabledSwitch]),nt=Jn||Qe||Ue,vt=async It=>{(0,n.ff)("grafana_dashboards_public_create_clicked");const Ft={dashboard:ge.dashboard,payload:{...Se,isEnabled:It.enabledSwitch,annotationsEnabled:It.isAnnotationsEnabled,timeSelectionEnabled:It.isTimeRangeEnabled}};Se?Fn(Ft):Pt(Ft)},ht=()=>{fe(Ke,{dashboard:ge.dashboard,onDismiss:he,activeTab:"share"})};return t.createElement(t.Fragment,null,t.createElement(v.Lh,null,t.createElement("p",{className:l.css`
            margin: 0;
          `},"Welcome to Grafana public dashboards alpha!"),(Ze||Qe)&&t.createElement(i.$,null)),t.createElement("div",{className:ye.content},ae(ge.dashboard.panels).length>0?t.createElement(u.b,{severity:"warning",title:"Unsupported Datasources","data-testid":Ne.UnsupportedDatasourcesWarningAlert},t.createElement("div",null,`There are datasources in this dashboard that are unsupported for public dashboards. Panels that use these datasources may not function properly: ${ae(ge.dashboard.panels).join(", ")}. See the `,t.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",className:"text-link"},"docs")," ","for supported datasources.")):null,z(Ae)&&!Z(Se)?t.createElement(u.b,{severity:"warning",title:"dashboard cannot be public","data-testid":Ne.TemplateVariablesWarningAlert},"This dashboard cannot be made public because it has template variables"):t.createElement("form",{onSubmit:bt(vt)},t.createElement(j,null),t.createElement("hr",null),t.createElement("div",{className:ye.checkboxes},t.createElement(w,{disabled:Z(Se)||!qn||Jn||Ue,register:Mt})),t.createElement("hr",null),t.createElement(D,{register:Mt,dashboard:ge.dashboard,disabled:!qn||Jn||Ue}),Z(Se)&&yt("enabledSwitch")&&t.createElement(P.g,{label:"Link URL",className:ye.publicUrl},t.createElement(E.I,{disabled:Jn,value:J(Se),readOnly:!0,"data-testid":Ne.CopyUrlInput,addonAfter:t.createElement(C.m,{"data-testid":Ne.CopyUrlButton,variant:"primary",icon:"copy",getText:()=>J(Se)},"Copy")})),qn?ge.dashboard.hasUnsavedChanges()?t.createElement(u.b,{title:"Please save your dashboard changes before updating the public configuration",severity:"warning"}):z(Ae)&&t.createElement(u.b,{title:"This public dashboard may not work since it uses template variables",severity:"warning"}):t.createElement(u.b,{title:"You don't have permissions to create or update a public dashboard",severity:"warning"}),t.createElement(v.Lh,null,t.createElement(v.Ar,{orientation:De?0:1},t.createElement(b.zx,{type:"submit",disabled:ut,"data-testid":Ne.SaveConfigButton},Se?"Save public dashboard":"Create public dashboard"),Se&&qn&&t.createElement(oe.H,{type:"button",disabled:nt,"data-testid":Ne.DeleteButton,onDismiss:ht,variant:"destructive",dashboard:ge.dashboard,publicDashboard:{uid:Se.uid,dashboardUid:ge.dashboard.uid,title:ge.dashboard.title}},"Delete public dashboard")),(rn||Qe)&&t.createElement(i.$,null)))))},pe=ge=>({content:l.css`
    margin: ${ge.spacing(1,0,0,0)};
  `,checkboxes:l.css`
    margin: ${ge.spacing(2,0)};
  `,timeRange:l.css`
    padding: ${ge.spacing(1,1)};
    margin: ${ge.spacing(0,0,2,0)};
  `,publicUrl:l.css`
    width: 100%;
    margin-bottom: ${ge.spacing(0,0,3,0)};
  `});var ee=e(6297),se=e(97379),Q=e(2594);const G=({selectedTheme:ge="current",onChange:Me})=>{const ye=[{label:(0,o.t)("share-modal.theme-picker.current","Current"),value:"current"},{label:(0,o.t)("share-modal.theme-picker.dark","Dark"),value:"dark"},{label:(0,o.t)("share-modal.theme-picker.light","Light"),value:"light"}];return t.createElement(P.g,{label:(0,o.t)("share-modal.theme-picker.field-name","Theme")},t.createElement(Q.S,{options:ye,value:ge,onChange:Me}))};var q=e(89346);class X extends t.PureComponent{constructor(Me){super(Me),this.buildIframeHtml=()=>{const{panel:ye,dashboard:fe}=this.props,{useCurrentTimeRange:he,selectedTheme:De}=this.state,Ae=(0,q.S_)(he,fe.uid,De,ye);this.setState({iframeHtml:Ae})},this.onIframeHtmlChange=ye=>{this.setState({iframeHtml:ye.currentTarget.value})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange},this.buildIframeHtml)},this.onThemeChange=ye=>{this.setState({selectedTheme:ye},this.buildIframeHtml)},this.getIframeHtml=()=>this.state.iframeHtml,this.state={useCurrentTimeRange:!0,selectedTheme:"current",iframeHtml:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_embed_share_viewed"),this.buildIframeHtml()}render(){const{useCurrentTimeRange:Me,selectedTheme:ye,iframeHtml:fe}=this.state,De=(this.props.dashboard?this.props.dashboard.time.to==="now":!1)?(0,o.t)("share-modal.embed.time-range-description","Transforms the current relative time range to an absolute time range"):"";return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.embed.info"},"Generate HTML for embedding an iframe with this panel.")),t.createElement(P.g,{label:(0,o.t)("share-modal.embed.time-range","Current time range"),description:De},t.createElement(U.r,{id:"share-current-time-range",value:Me,onChange:this.onUseCurrentTimeRangeChange})),t.createElement(G,{selectedTheme:ye,onChange:this.onThemeChange}),t.createElement(P.g,{label:(0,o.t)("share-modal.embed.html","Embed HTML"),description:(0,o.t)("share-modal.embed.html-description","The HTML code below can be pasted and included in another web page. Unless anonymous access is enabled, the user viewing that page need to be signed into Grafana for the graph to load.")},t.createElement(se.K,{"data-testid":"share-embed-html",id:"share-panel-embed-embed-html-textarea",rows:5,value:fe,onChange:this.onIframeHtmlChange})),t.createElement(s.u.ButtonRow,null,t.createElement(C.m,{icon:"copy",variant:"primary",getText:this.getIframeHtml},t.createElement(o.cC,{i18nKey:"share-modal.embed.copy"},"Copy to clipboard"))))}}var de=e(3574),Be=e(35645),ke=e(29930),He=e(134),ue=e(89050),Oe=e(9405);function Fe({json:ge,onDismiss:Me}){const ye=(0,t.useCallback)(()=>ge,[ge]);return t.createElement(s.u,{title:"JSON",onDismiss:Me,onClickBackdrop:Me,isOpen:!0},t.createElement(ue.Z,{disableHeight:!0},({width:fe})=>t.createElement(Oe.p,{value:ge,language:"json",showMiniMap:!1,height:"500px",width:fe})),t.createElement(s.u.ButtonRow,null,t.createElement(C.m,{icon:"copy",getText:ye},t.createElement(o.cC,{i18nKey:"share-modal.view-json.copy-button"},"Copy to Clipboard"))))}class Ie extends t.PureComponent{constructor(Me){super(Me),this.onShareExternallyChange=()=>{this.setState({shareExternally:!this.state.shareExternally})},this.onTrimDefaultsChange=()=>{this.setState({trimDefaults:!this.state.trimDefaults})},this.onSaveAsFile=()=>{const{dashboard:ye}=this.props,{shareExternally:fe}=this.state,{trimDefaults:he}=this.state;fe?this.exporter.makeExportable(ye).then(De=>{he?(0,ke.i)().post("/api/dashboards/trim",{dashboard:De}).then(Ae=>{this.openSaveAsDialog(Ae.dashboard)}):this.openSaveAsDialog(De)}):he?(0,ke.i)().post("/api/dashboards/trim",{dashboard:ye.getSaveModelClone()}).then(De=>{this.openSaveAsDialog(De.dashboard)}):this.openSaveAsDialog(ye.getSaveModelClone())},this.onViewJson=()=>{const{dashboard:ye}=this.props,{shareExternally:fe}=this.state,{trimDefaults:he}=this.state;fe?this.exporter.makeExportable(ye).then(De=>{he?(0,ke.i)().post("/api/dashboards/trim",{dashboard:De}).then(Ae=>{this.openJsonModal(Ae.dashboard)}):this.openJsonModal(De)}):he?(0,ke.i)().post("/api/dashboards/trim",{dashboard:ye.getSaveModelClone()}).then(De=>{this.openJsonModal(De.dashboard)}):this.openJsonModal(ye.getSaveModelClone())},this.openSaveAsDialog=ye=>{const fe=JSON.stringify(ye,null,2),he=new Blob([fe],{type:"application/json;charset=utf-8"}),De=new Date().getTime();(0,de.saveAs)(he,`${ye.title}-${De}.json`)},this.openJsonModal=ye=>{f.h$.publish(new re.Dn({props:{json:JSON.stringify(ye,null,2)},component:Fe})),this.props.onDismiss?.()},this.state={shareExternally:!1,trimDefaults:!1},this.exporter=new He.E}componentDidMount(){(0,n.ff)("grafana_dashboards_export_share_viewed")}render(){const{onDismiss:Me}=this.props,{shareExternally:ye}=this.state,{trimDefaults:fe}=this.state,he=(0,o.t)("share-modal.export.share-externally-label","Export for sharing externally"),De=(0,o.t)("share-modal.export.share-default-label","Export with default values removed");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.export.info-text"},"Export this dashboard.")),t.createElement(P.g,{label:he},t.createElement(U.r,{id:"share-externally-toggle",value:ye,onChange:this.onShareExternallyChange})),Be.v.featureToggles.trimDefaults&&t.createElement(P.g,{label:De},t.createElement(U.r,{id:"trim-defaults-toggle",value:fe,onChange:this.onTrimDefaultsChange})),t.createElement(s.u.ButtonRow,null,t.createElement(b.zx,{variant:"secondary",onClick:Me,fill:"outline"},t.createElement(o.cC,{i18nKey:"share-modal.export.cancel-button"},"Cancel")),t.createElement(b.zx,{variant:"secondary",onClick:this.onViewJson},t.createElement(o.cC,{i18nKey:"share-modal.export.view-button"},"View JSON")),t.createElement(b.zx,{variant:"primary",onClick:this.onSaveAsFile},t.createElement(o.cC,{i18nKey:"share-modal.export.save-button"},"Save to file"))))}}var we=e(76647);const Re=({panel:ge,initialFolderUid:Me,onDismiss:ye})=>((0,t.useEffect)(()=>{(0,n.ff)("grafana_dashboards_library_panel_share_viewed")},[]),ge?t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.library.info"},"Create library panel.")),t.createElement(we.T,{panel:ge,initialFolderUid:Me,onDismiss:ye})):null);var _e=e(39904);class et extends t.PureComponent{constructor(Me){super(Me),this.buildUrl=async()=>{const{panel:ye,dashboard:fe}=this.props,{useCurrentTimeRange:he,useShortUrl:De,selectedTheme:Ae}=this.state,Ne=await(0,q.bl)(he,Ae,ye,De),Ze=(0,q.Sc)(he,fe.uid,Ae,ye);this.setState({shareUrl:Ne,imageUrl:Ze})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange})},this.onUrlShorten=()=>{this.setState({useShortUrl:!this.state.useShortUrl})},this.onThemeChange=ye=>{this.setState({selectedTheme:ye})},this.getShareUrl=()=>this.state.shareUrl,this.state={useCurrentTimeRange:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_link_share_viewed"),this.buildUrl()}componentDidUpdate(Me,ye){const{useCurrentTimeRange:fe,useShortUrl:he,selectedTheme:De}=this.state;(ye.useCurrentTimeRange!==fe||ye.selectedTheme!==De||ye.useShortUrl!==he)&&this.buildUrl()}render(){const{panel:Me,dashboard:ye}=this.props,fe=ye?ye.time.to==="now":!1,{useCurrentTimeRange:he,useShortUrl:De,selectedTheme:Ae,shareUrl:Ne,imageUrl:Ze}=this.state,Se=d.wl.pages.SharePanelModal,Ue=Boolean(ye.id),Qe=(0,o.t)("share-modal.link.time-range-label","Lock time range"),pt=(0,o.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),bt=(0,o.t)("share-modal.link.shorten-url","Shorten URL"),yt=(0,o.t)("share-modal.link.link-url","Link URL");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.link.info-text"},"Create a direct link to this dashboard or panel, customized with the options below.")),t.createElement(x.C,null,t.createElement(P.g,{label:Qe,description:fe?pt:""},t.createElement(U.r,{id:"share-current-time-range",value:he,onChange:this.onUseCurrentTimeRangeChange})),t.createElement(G,{selectedTheme:Ae,onChange:this.onThemeChange}),t.createElement(P.g,{label:bt},t.createElement(U.r,{id:"share-shorten-url",value:De,onChange:this.onUrlShorten})),t.createElement(P.g,{label:yt},t.createElement(E.I,{id:"link-url-input",value:Ne,readOnly:!0,addonAfter:t.createElement(C.m,{icon:"copy",variant:"primary",getText:this.getShareUrl},t.createElement(o.cC,{i18nKey:"share-modal.link.copy-link-button"},"Copy"))}))),Me&&g.ZP.rendererAvailable&&t.createElement(t.Fragment,null,Ue&&t.createElement("div",{className:"gf-form"},t.createElement("a",{href:Ze,target:"_blank",rel:"noreferrer","aria-label":Se.linkToRenderedImage},t.createElement(_e.J,{name:"camera"}),"\xA0",t.createElement(o.cC,{i18nKey:"share-modal.link.rendered-image"},"Direct link rendered image"))),!Ue&&t.createElement(u.b,{severity:"info",title:(0,o.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0},t.createElement(o.cC,{i18nKey:"share-modal.link.save-dashboard"},"To render a panel image, you must save the dashboard first."))),Me&&!g.ZP.rendererAvailable&&t.createElement(u.b,{severity:"info",title:(0,o.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0},t.createElement(o.cC,{i18nKey:"share-modal.link.render-instructions"},"To render a panel image, you must install the\xA0",t.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana image renderer plugin"),". Please contact your Grafana administrator to install the plugin.")))}}var qe=e(54899),Je=e(53217),lt=e(19349),at=e(10672);const Xe="/api/snapshots";class gt extends t.PureComponent{constructor(Me){super(Me),this.createSnapshot=ye=>()=>{const{timeoutSeconds:fe}=this.state;this.dashboard.snapshot={timestamp:new Date},this.setState({isLoading:!0}),this.dashboard.startRefresh(),setTimeout(()=>{this.saveSnapshot(this.dashboard,ye)},fe*1e3)},this.saveSnapshot=async(ye,fe)=>{const{snapshotExpires:he}=this.state,De=this.dashboard.getSaveModelClone();this.scrubDashboard(De);const Ae={dashboard:De,name:De.title,expires:he,external:fe};try{const Ne=await(0,qe.i)().post(Xe,Ae);this.setState({deleteUrl:Ne.deleteUrl,snapshotUrl:Ne.url,step:2})}finally{(0,n.ff)("grafana_dashboards_snapshot_created",{location:fe?"raintank":"local"}),this.setState({isLoading:!1})}},this.scrubDashboard=ye=>{const{panel:fe}=this.props,{snapshotName:he}=this.state;ye.title=he,ye.time=(0,lt.$t)().timeRange(),ye.links=[],ye.panels.forEach(Ae=>{Ae.targets=[],Ae.links=[],Ae.datasource=null});const De=ye.annotations.list.filter(Ae=>Ae.enable);if(ye.annotations.list=De.map(Ae=>({name:Ae.name,enable:Ae.enable,iconColor:Ae.iconColor,snapshotData:Ae.snapshotData,type:Ae.type,builtIn:Ae.builtIn,hide:Ae.hide})),ye.getVariables().forEach(Ae=>{Ae.query="",Ae.options=Ae.current?[Ae.current]:[],Ae.refresh=at.Bd.never}),fe){const Ae=fe.getSaveModel();Ae.gridPos.w=24,Ae.gridPos.x=0,Ae.gridPos.y=0,Ae.gridPos.h=20,ye.panels=[Ae]}delete this.dashboard.snapshot,this.dashboard.forEachPanel(Ae=>{delete Ae.snapshotData}),this.dashboard.annotations.list.forEach(Ae=>{delete Ae.snapshotData})},this.deleteSnapshot=async()=>{const{deleteUrl:ye}=this.state;await(0,qe.i)().get(ye),this.setState({step:3})},this.getSnapshotUrl=()=>this.state.snapshotUrl,this.onSnapshotNameChange=ye=>{this.setState({snapshotName:ye.target.value})},this.onTimeoutChange=ye=>{this.setState({timeoutSeconds:Number(ye.target.value)})},this.onExpireChange=ye=>{this.setState({selectedExpireOption:ye,snapshotExpires:ye.value})},this.dashboard=Me.dashboard,this.expireOptions=[{label:(0,o.t)("share-modal.snapshot.expire-never","Never"),value:0},{label:(0,o.t)("share-modal.snapshot.expire-hour","1 Hour"),value:60*60},{label:(0,o.t)("share-modal.snapshot.expire-day","1 Day"),value:60*60*24},{label:(0,o.t)("share-modal.snapshot.expire-week","7 Days"),value:60*60*24*7}],this.state={isLoading:!1,step:1,selectedExpireOption:this.expireOptions[0],snapshotExpires:this.expireOptions[0].value,snapshotName:Me.dashboard.title,timeoutSeconds:4,snapshotUrl:"",deleteUrl:"",externalEnabled:!1,sharingButtonText:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_snapshot_share_viewed"),this.getSnaphotShareOptions()}async getSnaphotShareOptions(){const Me=await(0,qe.i)().get("/api/snapshot/shared-options");this.setState({sharingButtonText:Me.externalSnapshotName,externalEnabled:Me.externalEnabled})}renderStep1(){const{onDismiss:Me}=this.props,{snapshotName:ye,selectedExpireOption:fe,timeoutSeconds:he,isLoading:De,sharingButtonText:Ae,externalEnabled:Ne}=this.state,Ze=(0,o.t)("share-modal.snapshot.name","Snapshot name"),Se=(0,o.t)("share-modal.snapshot.expire","Expire"),Ue=(0,o.t)("share-modal.snapshot.timeout","Timeout (seconds)"),Qe=(0,o.t)("share-modal.snapshot.timeout-description","You might need to configure the timeout value if it takes a long time to collect your dashboard metrics.");return t.createElement(t.Fragment,null,t.createElement("div",null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.info-text-1"},"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard.")),t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.info-text-2"},"Keep in mind, your snapshot ",t.createElement("em",null,"can be viewed by anyone")," that has the link and can access the URL. Share wisely."))),t.createElement(P.g,{label:Ze},t.createElement(E.I,{id:"snapshot-name-input",width:30,value:ye,onChange:this.onSnapshotNameChange})),t.createElement(P.g,{label:Se},t.createElement(Je.Ph,{inputId:"expire-select-input",width:30,options:this.expireOptions,value:fe,onChange:this.onExpireChange})),t.createElement(P.g,{label:Ue,description:Qe},t.createElement(E.I,{id:"timeout-input",type:"number",width:21,value:he,onChange:this.onTimeoutChange})),t.createElement(s.u.ButtonRow,null,t.createElement(b.zx,{variant:"secondary",onClick:Me,fill:"outline"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.cancel-button"},"Cancel")),Ne&&t.createElement(b.zx,{variant:"secondary",disabled:De,onClick:this.createSnapshot(!0)},Ae),t.createElement(b.zx,{variant:"primary",disabled:De,onClick:this.createSnapshot()},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.local-button"},"Local Snapshot"))))}renderStep2(){const{snapshotUrl:Me}=this.state;return t.createElement(t.Fragment,null,t.createElement(P.g,{label:(0,o.t)("share-modal.snapshot.url-label","Snapshot URL")},t.createElement(E.I,{id:"snapshot-url-input",value:Me,readOnly:!0,addonAfter:t.createElement(C.m,{icon:"copy",variant:"primary",getText:this.getSnapshotUrl},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.copy-link-button"},"Copy"))})),t.createElement("div",{className:"pull-right",style:{padding:"5px"}},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.mistake-message"},"Did you make a mistake? "),"\xA0",t.createElement(b.Qj,{fill:"text",target:"_blank",onClick:this.deleteSnapshot},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.delete-button"},"Delete snapshot."))))}renderStep3(){return t.createElement("div",{className:"share-modal-header"},t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.deleted-message"},"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches.")))}render(){const{isLoading:Me,step:ye}=this.state;return t.createElement(t.Fragment,null,ye===1&&this.renderStep1(),ye===2&&this.renderStep2(),ye===3&&this.renderStep3(),Me&&t.createElement(i.$,{inline:!0}))}}const ot=[],Ye=[];function mt(ge){ot.push(ge)}function ce(ge){Ye.push(ge)}function be(ge,Me){const fe=[{label:(0,o.t)("share-modal.tab-title.link","Link"),value:"link",component:et}];if(f.Vt.isSignedIn&&g.vc.snapshotEnabled){const De=(0,o.t)("share-modal.tab-title.snapshot","Snapshot");fe.push({label:De,value:"snapshot",component:gt})}if(ge){const De=(0,o.t)("share-modal.tab-title.embed","Embed");if(fe.push({label:De,value:"embed",component:X}),!(0,ee.V)(ge)){const Ae=(0,o.t)("share-modal.tab-title.library-panel","Library panel");fe.push({label:Ae,value:"library_panel",component:Re})}fe.push(...Ye)}else{const De=(0,o.t)("share-modal.tab-title.export","Export");fe.push({label:De,value:"export",component:Ie}),fe.push(...ot)}Boolean(g.vc.featureToggles.publicDashboards)&&fe.push({label:"Public dashboard",value:"share",component:le});const he=fe.find(De=>De.value===Me);return{tabs:fe,activeTab:he?.value??fe[0].value}}function Te(ge){const{tabs:Me,activeTab:ye}=be(ge.panel,ge.activeTab);return{tabs:Me,activeTab:ye}}class Ke extends t.Component{constructor(Me){super(Me),this.onSelectTab=ye=>{this.setState(fe=>({...fe,activeTab:ye.value}))},this.state=Te(Me)}componentDidMount(){(0,n.ff)("grafana_dashboards_share_modal_viewed")}getActiveTab(){const{tabs:Me,activeTab:ye}=this.state;return Me.find(fe=>fe.value===ye)}renderTitle(){const{panel:Me}=this.props,{activeTab:ye}=this.state,fe=Me?(0,o.t)("share-modal.panel.title","Share Panel"):(0,o.t)("share-modal.dashboard.title","Share"),he=be(this.props.panel,this.state.activeTab).tabs;return t.createElement(c.H,{title:fe,icon:"share-alt",tabs:he,activeTab:ye,onChangeTab:this.onSelectTab})}render(){const{dashboard:Me,panel:ye}=this.props,he=this.getActiveTab().component;return t.createElement(s.u,{isOpen:!0,title:this.renderTitle(),onDismiss:this.props.onDismiss},t.createElement(r.I,null,t.createElement(he,{dashboard:Me,panel:ye,onDismiss:this.props.onDismiss})))}}},89346:(H,T,e)=>{"use strict";e.d(T,{OS:()=>o,S_:()=>d,Sc:()=>m,bl:()=>l});var t=e(27677),n=e(83383),c=e(46519),s=e(35645),r=e(57465),g=e(19349);function f({useCurrentTimeRange:h,selectedTheme:y,panel:v,search:i=window.location.search,range:u=(0,g.$t)().timeRange(),orgId:P=s.v.bootData.user.orgId}){const E=new URLSearchParams(i);return E.set("from",String(u.from.valueOf())),E.set("to",String(u.to.valueOf())),E.set("orgId",String(P)),h||(E.delete("from"),E.delete("to")),y!=="current"&&E.set("theme",y),v&&!E.has("editPanel")&&E.set("viewPanel",String(v.id)),E}function o(){let h=window.location.href;const y=h.indexOf("?");return y!==-1&&(h=h.substring(0,y)),h}async function l(h,y,v,i){const u=o(),P=f({useCurrentTimeRange:h,selectedTheme:y,panel:v}),E=t.Cj.appendQueryToUrl(u,P.toString());return i?await(0,r.D)(E):E}function a(h,y,v,i){const u=o(),P=f({useCurrentTimeRange:h,selectedTheme:v,panel:i});let E=u.replace(s.v.appSubUrl+"/dashboard/",s.v.appSubUrl+"/dashboard-solo/");E=E.replace(s.v.appSubUrl+"/d/",s.v.appSubUrl+"/d-solo/"),n.u.stripBaseFromUrl(u)==="/"&&(E=`${s.v.appUrl}d-solo/${y}`);const b=P.get("editPanel")??P.get("viewPanel")??"";return P.set("panelId",b),P.delete("editPanel"),P.delete("viewPanel"),t.Cj.appendQueryToUrl(E,P.toString())}function m(h,y,v,i){let P=a(h,y,v,i).replace(s.v.appSubUrl+"/dashboard-solo/",s.v.appSubUrl+"/render/dashboard-solo/");return P=P.replace(s.v.appSubUrl+"/d-solo/",s.v.appSubUrl+"/render/d-solo/"),P+="&width=1000&height=500"+p(),P}function d(h,y,v,i){return'<iframe src="'+a(h,y,v,i)+'" width="450" height="200" frameborder="0"></iframe>'}function p(){const h="&tz=UTC"+encodeURIComponent((0,c.CQ)().format("Z"));if(!window.Intl)return h;const y=window.Intl.DateTimeFormat();if(!y.resolvedOptions)return h;const v=y.resolvedOptions();return v.timeZone?"&tz="+encodeURIComponent(v.timeZone):h}},64687:(H,T,e)=>{"use strict";e.d(T,{B:()=>d});var t=e(52423),n=e(82897),c=e(68404),s=e(72648),r=e(39904);const g=({diff:h})=>{const y=(0,s.wW)(f),v=!(0,n.isUndefined)(h.originalValue)&&!(0,n.isArray)(h.originalValue)&&!(0,n.isObject)(h.originalValue),i=!(0,n.isUndefined)(h.value)&&!(0,n.isArray)(h.value)&&!(0,n.isObject)(h.value);return c.createElement(c.Fragment,null,v&&c.createElement("span",{className:y},String(h.originalValue)),v&&i?c.createElement(r.J,{name:"arrow-right"}):null,i&&c.createElement("span",{className:y},String(h.value)))},f=h=>t.css`
  background-color: ${h.colors.action.hover};
  border-radius: ${h.shape.borderRadius()};
  color: ${h.colors.text.primary};
  font-size: ${h.typography.body.fontSize};
  margin: 0 ${h.spacing(.5)};
  padding: ${h.spacing(.5,1)};
`;var o=e(15092);const l={op:"replace",originalValue:void 0,path:[""],value:void 0,startLineNumber:0},a=({diff:h,title:y})=>{const v=(0,s.wW)(m);return h?c.createElement(c.Fragment,null,c.createElement(r.J,{type:"mono",name:"circle",className:v[h.op]})," ",c.createElement("span",{className:v.embolden},y)," ",c.createElement("span",null,(0,o.dW)(h,h.path.length>1))," ",c.createElement(g,{diff:h})):c.createElement("div",{className:v.withoutDiff},c.createElement(r.J,{type:"mono",name:"circle",className:v.replace})," ",c.createElement("span",{className:v.embolden},y)," ",c.createElement("span",null,(0,o.dW)(l,!1)))},m=h=>({embolden:t.css`
    font-weight: ${h.typography.fontWeightBold};
  `,add:t.css`
    color: ${h.colors.success.main};
  `,replace:t.css`
    color: ${h.colors.success.main};
  `,move:t.css`
    color: ${h.colors.success.main};
  `,copy:t.css`
    color: ${h.colors.success.main};
  `,_get:t.css`
    color: ${h.colors.success.main};
  `,test:t.css`
    color: ${h.colors.success.main};
  `,remove:t.css`
    color: ${h.colors.success.main};
  `,withoutDiff:t.css`
    margin-bottom: ${h.spacing(2)};
  `}),d=({diffs:h,title:y})=>{const v=(0,s.wW)(p);return h.length===1?c.createElement("div",{className:v.container,"data-testid":"diffGroup"},c.createElement(a,{title:y,diff:h[0]})):c.createElement("div",{className:v.container,"data-testid":"diffGroup"},c.createElement(a,{title:y}),c.createElement("ul",{className:v.list},h.map((i,u)=>c.createElement("li",{className:v.listItem,key:`${(0,n.last)(i.path)}__${u}`},c.createElement("span",null,(0,o.dW)(i))," ",c.createElement(g,{diff:i})))))},p=h=>({container:t.css`
    background-color: ${h.colors.background.secondary};
    font-size: ${h.typography.h6.fontSize};
    margin-bottom: ${h.spacing(2)};
    padding: ${h.spacing(2)};
  `,list:t.css`
    margin-left: ${h.spacing(4)};
  `,listItem:t.css`
    margin-bottom: ${h.spacing(1)};
  `})},61017:(H,T,e)=>{"use strict";e.d(T,{Z:()=>o});var t=e(52423),n=e(68404),c=e(28072),s=e.n(c),r=e(35008),g=e.n(r),f=e(72648);const o=({oldValue:l,newValue:a})=>{const m=(0,f.l4)(),d={variables:{dark:{diffViewerBackground:m.colors.background.canvas,diffViewerColor:m.colors.text.primary,addedBackground:g()(m.v1.palette.greenShade).setAlpha(.3).toString(),addedColor:"white",removedBackground:g()(m.v1.palette.redShade).setAlpha(.3).toString(),removedColor:"white",wordAddedBackground:g()(m.v1.palette.greenBase).setAlpha(.4).toString(),wordRemovedBackground:g()(m.v1.palette.redBase).setAlpha(.4).toString(),addedGutterBackground:g()(m.v1.palette.greenShade).setAlpha(.2).toString(),removedGutterBackground:g()(m.v1.palette.redShade).setAlpha(.2).toString(),gutterBackground:m.colors.background.primary,gutterBackgroundDark:m.colors.background.primary,highlightBackground:g()(m.colors.primary.main).setAlpha(.4).toString(),highlightGutterBackground:g()(m.colors.primary.shade).setAlpha(.2).toString(),codeFoldGutterBackground:m.colors.background.secondary,codeFoldBackground:m.colors.background.secondary,emptyLineBackground:m.colors.background.secondary,gutterColor:m.colors.text.disabled,addedGutterColor:m.colors.text.primary,removedGutterColor:m.colors.text.primary,codeFoldContentColor:m.colors.text.disabled,diffViewerTitleBackground:m.colors.background.secondary,diffViewerTitleColor:m.colors.text.disabled,diffViewerTitleBorderColor:m.colors.border.strong}},codeFold:{fontSize:m.typography.bodySmall.fontSize},gutter:`
      pre {
        color: ${g()(m.colors.text.disabled).setAlpha(1).toString()};
        opacity: 0.61;
      }
    `};return n.createElement("div",{className:t.css`
        font-size: ${m.typography.bodySmall.fontSize};
        // prevent global styles interfering with diff viewer
        pre {
          all: revert;
        }
      `},n.createElement(s(),{styles:d,oldValue:l,newValue:a,splitView:!1,compareMethod:c.DiffMethod.CSS,useDarkTheme:m.isDark}))}},99714:(H,T,e)=>{"use strict";e.d(T,{U$:()=>N,Cs:()=>M,Sd:()=>E,R1:()=>B,K8:()=>s});var t=e(82897),n=e(54899);class c{getHistoryList(Y,j){const K=Y&&Y.uid?Y.uid:void 0;return K?(0,n.i)().get(`api/dashboards/uid/${K}/versions`,j):Promise.resolve([])}getDashboardVersion(Y,j){return(0,n.i)().get(`api/dashboards/uid/${Y}/versions/${j}`)}restoreDashboard(Y,j){const K=Y&&Y.uid?Y.uid:void 0,z=`api/dashboards/uid/${K}/restore`;return K&&(0,t.isNumber)(j)?(0,n.i)().post(z,{version:j}):Promise.resolve({})}}const s=new c;var r=e(52423),g=e(68404),f=e(58255),o=e(34719),l=e(5191),a=e(31403),m=e(98102),d=e(671),p=e(83383),h=e(37932),y=e(60499),v=e(81168);const i=async(D,Y)=>await s.restoreDashboard(Y,D),u=D=>{const Y=(0,v.useSelector)(Z=>Z.dashboard.getModel()),[j,K]=(0,d.Z)(async()=>await i(D,Y),[]),z=(0,y.iG)();return(0,g.useEffect)(()=>{if(j.value){const Z=h.E1.getLocation(),ae=p.u.stripBaseFromUrl(j.value.url),J=Z.state?.routeReloadCounter;h.E1.replace({...Z,pathname:ae,state:{routeReloadCounter:J?J+1:1}}),z.success("Dashboard restored",`Restored from version ${D}`)}},[j,D,z]),{state:j,onRestoreDashboard:K}},P=({hideModal:D,version:Y})=>{const{state:j,onRestoreDashboard:K}=u(Y);return(0,g.useEffect)(()=>{j.loading===!1&&j.value&&D()},[j,D]),g.createElement(m.s,{isOpen:!0,title:"Restore Version",icon:"history",onDismiss:D,onConfirm:K,body:g.createElement("p",null,"Are you sure you want to restore the dashboard to version ",Y,"? All unsaved changes will be lost."),confirmText:`Yes, restore to version ${Y}`})},E=({versions:D,canCompare:Y,onCheck:j})=>g.createElement("table",{className:"filter-table gf-form-group"},g.createElement("thead",null,g.createElement("tr",null,g.createElement("th",{className:"width-4"}),g.createElement("th",{className:"width-4"},"Version"),g.createElement("th",{className:"width-14"},"Date"),g.createElement("th",{className:"width-10"},"Updated by"),g.createElement("th",null,"Notes"),g.createElement("th",null))),g.createElement("tbody",null,D.map((K,z)=>g.createElement("tr",{key:K.id},g.createElement("td",null,g.createElement(f.X,{"aria-label":`Toggle selection of version ${K.version}`,className:r.css`
                display: inline;
              `,checked:K.checked,onChange:Z=>j(Z,K.id),disabled:!K.checked&&Y})),g.createElement("td",null,K.version),g.createElement("td",null,K.createdDateString),g.createElement("td",null,K.createdBy),g.createElement("td",null,K.message),g.createElement("td",{className:"text-right"},z===0?g.createElement(o.V,{name:"Latest",colorIndex:17}):g.createElement(l.JY,null,({showModal:Z,hideModal:ae})=>g.createElement(a.zx,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{Z(P,{version:K.version,hideModal:ae})}},"Restore")))))));var C=e(72648),b=e(8180),S=e(39904);const M=({onClick:D=t.noop,baseVersion:Y=0,newVersion:j=0,isNewLatest:K=!1})=>{const z=(0,C.wW)(x);return g.createElement("h3",{className:z.header},g.createElement(b.h,{name:"arrow-left",size:"xl",onClick:D}),g.createElement("span",null,"Comparing ",Y," ",g.createElement(S.J,{name:"arrows-h"})," ",j," ",K&&g.createElement("cite",{className:"muted"},"(Latest)")))},x=D=>({header:r.css`
    font-size: ${D.typography.h3.fontSize};
    display: flex;
    gap: ${D.spacing(2)};
    margin-bottom: ${D.spacing(3)};
  `});var O=e(26418),L=e(61860);const B=({hasMore:D,canCompare:Y,getVersions:j,getDiff:K,isLastPage:z})=>g.createElement(O.Stack,null,D&&g.createElement(a.zx,{type:"button",onClick:()=>j(!0),variant:"secondary",disabled:z},"Show more versions"),g.createElement(L.u,{content:"Select two versions to start comparing",placement:"bottom"},g.createElement(a.zx,{type:"button",disabled:!Y,onClick:K,icon:"code-branch"},"Compare versions")));var w=e(52081),R=e(20941),A=e(64687),U=e(61017),I=e(15092);const N=({baseInfo:D,newInfo:Y,diffData:j,isNewLatest:K})=>{const z=(0,I.Q$)(j.lhs,j.rhs),Z=(0,C.wW)(F);return g.createElement("div",null,g.createElement("div",{className:Z.spacer},g.createElement(w.Lh,{justify:"space-between",align:"center"},g.createElement("div",null,g.createElement("p",{className:Z.versionInfo},g.createElement("strong",null,"Version ",Y.version)," updated by ",Y.createdBy," ",Y.ageString," -"," ",Y.message),g.createElement("p",{className:(0,r.cx)(Z.versionInfo,Z.noMarginBottom)},g.createElement("strong",null,"Version ",D.version)," updated by ",D.createdBy," ",D.ageString," -"," ",D.message)),K&&g.createElement(l.JY,null,({showModal:ae,hideModal:J})=>g.createElement(a.zx,{variant:"destructive",icon:"history",onClick:()=>{ae(P,{version:D.version,hideModal:J})}},"Restore to version ",D.version)))),g.createElement("div",{className:Z.spacer},Object.entries(z).map(([ae,J])=>g.createElement(A.B,{diffs:J,key:ae,title:ae}))),g.createElement(R.s,{isOpen:!1,label:"View JSON Diff"},g.createElement(U.Z,{oldValue:JSON.stringify(j.lhs,null,2),newValue:JSON.stringify(j.rhs,null,2)})))},F=D=>({spacer:r.css`
    margin-bottom: ${D.spacing(4)};
  `,versionInfo:r.css`
    color: ${D.colors.text.secondary};
    font-size: ${D.typography.bodySmall.fontSize};
  `,noMarginBottom:r.css`
    margin-bottom: 0;
  `})},15092:(H,T,e)=>{"use strict";e.d(T,{Q$:()=>r,dW:()=>g});var t=e(92497),n=e(56070),c=e(82897),s=e.n(c);const r=(l,a)=>{const m=(0,t.qu)(l,a),d=n.stringify(l,null,2),p=n.stringify(a,null,2),h=i=>i.map(u=>{let P,E,C=0;const b=(0,c.tail)(u.path.split("/"));return u.op==="replace"&&(P=(0,c.get)(l,b),E=u.value,C=p.pointers[u.path].value.line),u.op==="add"&&(E=u.value,C=p.pointers[u.path].value.line),u.op==="remove"&&(P=(0,c.get)(l,b),C=d.pointers[u.path].value.line),{op:u.op,value:E,path:b,originalValue:P,startLineNumber:C}}),y=i=>(0,c.sortBy)(i,"startLineNumber"),v=i=>i.reduce((u,P)=>{const E=P.path[0];return u[E]||(u[E]=[]),u[E].push(P),u},{});return(0,c.flow)([h,y,v])(m)},g=(l,a=!0)=>{const m=(0,c.last)(l.path),d=f(m),p=l.op==="remove"?l.originalValue:l.value;let h=o(l.op);return a&&(d?h+=` item ${m}`:(0,c.isArray)(p)&&!(0,c.isEmpty)(p)?h+=` ${p.length} ${m}`:h+=` ${m}`),h},f=l=>!(0,c.isNaN)((0,c.toNumber)(l)),o=l=>l==="add"?"added":l==="remove"?"deleted":"changed"},30237:(H,T,e)=>{"use strict";e.r(T),e.d(T,{SoloPanel:()=>m,SoloPanelPage:()=>a,default:()=>d});var t=e(68404),n=e(36635),c=e(89050),s=e(34177),r=e(61802),g=e(87464);const f=p=>({dashboard:p.dashboard.getModel()}),o={initDashboard:g.mV},l=(0,n.connect)(f,o);class a extends t.Component{constructor(){super(...arguments),this.state={panel:null,notFound:!1}}componentDidMount(){const{match:h,route:y}=this.props;this.props.initDashboard({urlSlug:h.params.slug,urlUid:h.params.uid,urlType:h.params.type,routeName:y.routeName,fixUrl:!1,keybindingSrv:this.context.keybindings})}getPanelId(){return parseInt(this.props.queryParams.panelId??"0",10)}componentDidUpdate(h){const{dashboard:y}=this.props;if(y&&(!h.dashboard||h.dashboard.uid!==y.uid)){const v=y.getPanelByUrlId(this.props.queryParams.panelId);if(!v){this.setState({notFound:!0});return}this.setState({panel:v})}}render(){return t.createElement(m,{dashboard:this.props.dashboard,notFound:this.state.notFound,panel:this.state.panel,panelId:this.getPanelId(),timezone:this.props.queryParams.timezone})}}a.contextType=s.h;const m=({dashboard:p,notFound:h,panel:y,panelId:v,timezone:i})=>h?t.createElement("div",{className:"alert alert-error"},"Panel with id ",v," not found"):!y||!p?t.createElement("div",null,"Loading & initializing dashboard"):t.createElement("div",{className:"panel-solo"},t.createElement(c.Z,null,({width:u,height:P})=>u===0?null:t.createElement(r.l,{stateKey:y.key,width:u,height:P,dashboard:p,panel:y,isEditing:!1,isViewing:!1,lazy:!1,timezone:i}))),d=l(a)},61802:(H,T,e)=>{"use strict";e.d(T,{l:()=>Ut});var t=e(68404),n=e(36635),c=e(32294),s=e(46732),r=e(58252),g=e(56991);function f({children:ut,width:nt,height:vt,onLoad:ht,onChange:It}){const Ft=(0,g.L)(),[en,sn]=(0,t.useState)(!1),[Mn,En]=(0,t.useState)(!1),yn=(0,t.useRef)(null);return(0,r.Z)(()=>{f.addCallback(Ft,ea=>{!en&&ea.isIntersecting&&(sn(!0),ht?.()),En(ea.isIntersecting),It?.(ea.isIntersecting)});const Bn=yn.current;return Bn&&f.observer.observe(Bn),()=>{delete f.callbacks[Ft],Bn&&f.observer.unobserve(Bn),Object.keys(f.callbacks).length===0&&f.observer.disconnect()}}),t.createElement("div",{id:Ft,ref:yn,style:{width:nt,height:vt}},en&&(typeof ut=="function"?ut({isInView:Mn}):ut))}f.callbacks={},f.addCallback=(ut,nt)=>f.callbacks[ut]=nt,f.observer=new IntersectionObserver(ut=>{for(const nt of ut)f.callbacks[nt.target.id](nt)},{rootMargin:"100px"});var o=e(9085),l=e.n(o),a=e(95484),m=e(49922),d=e(69311),p=e(68183),h=e(11484),y=e(37932),v=e(47694),i=e(84952),u=e(73952);function P(ut){return/(d-solo|dashboard-solo)/.test(ut?.toLowerCase())}function E(ut,nt){return Boolean(nt.find(vt=>vt.id==="apps")?.children?.find(vt=>vt.id===`plugin-page-${ut}`)?.children?.some(vt=>vt.url?.endsWith(`/a/${ut}`)))}var C=e(19349),b=e(52423),S=e(72648),M=e(94437),x=e(39904),O=e(69600),L=e(53821),B=e(61860);const w=({state:ut,onClick:nt})=>{const vt=(0,S.wW)(R);return ut===m.Gu.Loading?t.createElement("div",{className:"panel-loading",onClick:nt},t.createElement(B.u,{content:"Cancel query"},t.createElement(x.J,{className:"panel-loading__spinner spin-clockwise",name:"sync"}))):ut===m.Gu.Streaming?t.createElement("div",{className:"panel-loading",onClick:nt},t.createElement("div",{title:"Streaming (click to stop)",className:vt.streamIndicator})):null};function R(ut){return{streamIndicator:b.css`
      width: 10px;
      height: 10px;
      background: ${ut.colors.text.disabled};
      box-shadow: 0 0 2px ${ut.colors.text.disabled};
      border-radius: 50%;
      position: relative;
      top: 6px;
      right: 1px;
    `}}function A({children:ut,...nt}){const[vt,ht]=(0,t.useState)({x:0,y:0}),[It,Ft]=(0,t.useState)(!1),en=(0,t.useCallback)(Mn=>{U(vt,I(Mn))&&Ft(!It)},[vt,It,Ft]),sn=(0,t.useCallback)(Mn=>{ht(I(Mn))},[ht]);return t.createElement("header",{...nt,className:"panel-title-container",onClick:en,onMouseDown:sn},ut({panelMenuOpen:It,closeMenu:()=>Ft(!1)}))}function U(ut,nt,vt=3.5){return Math.sqrt((ut.x-nt.x)**2+(ut.y-nt.y)**2)<=vt}function I(ut){return{x:ut.clientX,y:ut.clientY}}var N=e(79860);class F extends t.PureComponent{constructor(){super(...arguments),this.renderItems=(nt,vt=!1)=>t.createElement("ul",{className:l()("dropdown-menu","dropdown-menu--menu","panel-menu",this.props.itemsClassName),style:this.props.style,role:vt?"":"menu"},nt.map((ht,It)=>t.createElement(N.u,{key:`${ht.text}${It}`,type:ht.type,text:ht.text,iconClassName:ht.iconClassName,onClick:ht.onClick,shortcut:ht.shortcut},ht.subMenu&&this.renderItems(ht.subMenu,!0))))}render(){return t.createElement("div",{className:l()("panel-menu-container","dropdown","open",this.props.className)},this.renderItems(this.props.items))}}var D=e(81168),Y=e(41818),j=e(86647),K=e(85596),z=e(35287),Z=e(82002),ae=e(55935),J=e(2476),oe=e(39653),Ee=e(6297),me=e(3153),re=e(48197);function le(ut,nt,vt,ht){const It=ma=>{ma.preventDefault(),y.E1.partial({viewPanel:nt.id})},Ft=ma=>{ma.preventDefault(),y.E1.partial({editPanel:nt.id})},en=ma=>{ma.preventDefault(),(0,J.Po)(ut,nt)},sn=ma=>{ma.preventDefault(),(0,J.Kq)(ut,nt)},Mn=ma=>{ma.preventDefault(),(0,J.oe)(nt)},En=ma=>{y.E1.partial({inspect:nt.id,inspectTab:ma}),(0,Y.ff)("grafana_panel_menu_inspect",{tab:ma??oe.q.Data})},yn=ma=>{ma.preventDefault()},Bn=ma=>{ma.preventDefault(),(0,J.jN)(ut,nt)},ea=ma=>{ma.preventDefault(),(0,J.bY)(nt)},Qn=ma=>{ma.preventDefault(),(0,J.WJ)(ut,nt,!0)},Kn=ma=>{ma.preventDefault();const Xa=ma.ctrlKey||ma.metaKey?Oa=>window.open(`${v.ZP.appSubUrl}${Oa}`):void 0;me.h.dispatch((0,re.m$)(nt,{getDataSourceSrv:j.F,getTimeSrv:C.$t,getExploreUrl:ae.H6,openInNewWindow:Xa}))},Ua=ma=>{ma.preventDefault(),(0,J.qw)(nt)},pa=ma=>{ma.preventDefault(),nt.getQueryRunner().cancelQuery()},va=[];nt.isEditing||va.push({text:(0,z.t)("panel.header-menu.view","View"),iconClassName:"eye",onClick:It,shortcut:"v"}),ut.canEditPanel(nt)&&!nt.isEditing&&va.push({text:(0,z.t)("panel.header-menu.edit","Edit"),iconClassName:"edit",onClick:Ft,shortcut:"e"}),ut.canEditPanel(nt)&&(vt===K.Gu.Streaming||vt===K.Gu.Loading)&&va.push({text:"Stop query",iconClassName:"circle",onClick:pa}),va.push({text:(0,z.t)("panel.header-menu.share","Share"),iconClassName:"share-alt",onClick:en,shortcut:"p s"}),Z.Vt.hasAccessToExplore()&&!(nt.plugin&&nt.plugin.meta.skipDataQuery)&&va.push({text:(0,z.t)("panel.header-menu.explore","Explore"),iconClassName:"compass",onClick:Kn,shortcut:"x"});const za=[];nt.plugin&&!nt.plugin.meta.skipDataQuery&&(za.push({text:(0,z.t)("panel.header-menu.inspect-data","Data"),onClick:ma=>En(oe.q.Data)}),ut.meta.canEdit&&za.push({text:(0,z.t)("panel.header-menu.query","Query"),onClick:ma=>En(oe.q.Query)})),za.push({text:(0,z.t)("panel.header-menu.inspect-json","Panel JSON"),onClick:ma=>En(oe.q.JSON)}),va.push({type:"submenu",text:(0,z.t)("panel.header-menu.inspect","Inspect"),iconClassName:"info-circle",onClick:ma=>En(),shortcut:"i",subMenu:za});const ja=[],Ea=ut.canEditPanel(nt);if(Ea&&!(nt.isViewing||nt.isEditing)&&(ja.push({text:(0,z.t)("panel.header-menu.duplicate","Duplicate"),onClick:Bn,shortcut:"p d"}),ja.push({text:(0,z.t)("panel.header-menu.copy","Copy"),onClick:ea}),(0,Ee.V)(nt)?ja.push({text:(0,z.t)("panel.header-menu.unlink-library-panel","Unlink library panel"),onClick:Mn}):ja.push({text:(0,z.t)("panel.header-menu.create-library-panel","Create library panel"),onClick:sn})),ht){const ma=ht.getScope(),Xa=ma.$$childHead.ctrl,Oa=Xa.getExtendedMenu();for(const ss of Oa){const Ks={text:ss.text,href:ss.href,shortcut:ss.shortcut};ss.click&&(Ks.onClick=()=>{ma.$eval(ss.click,{ctrl:Xa})}),ja.push(Ks)}}return nt.options.legend&&ja.push({text:nt.options.legend.showLegend?(0,z.t)("panel.header-menu.hide-legend","Hide legend"):(0,z.t)("panel.header-menu.show-legend","Show legend"),onClick:Ua,shortcut:"p l"}),nt.isEditing&&(ja.length=0),Ea&&nt.plugin&&!nt.plugin.meta.skipDataQuery&&ja.push({text:(0,z.t)("panel.header-menu.get-help","Get help"),onClick:ma=>En(oe.q.Help)}),ja.length&&va.push({type:"submenu",text:(0,z.t)("panel.header-menu.more","More..."),iconClassName:"cube",subMenu:ja,onClick:yn}),ut.canEditPanel(nt)&&!nt.isEditing&&!nt.isViewing&&(va.push({type:"divider",text:""}),va.push({text:(0,z.t)("panel.header-menu.remove","Remove"),iconClassName:"trash-alt",onClick:Qn,shortcut:"p r"})),va}function pe({panel:ut,dashboard:nt,loadingState:vt,children:ht}){const[It,Ft]=(0,t.useState)([]),en=(0,D.useSelector)(sn=>(0,u.i)(sn,ut)?.angularComponent);return(0,t.useEffect)(()=>{Ft(le(nt,ut,vt,en))},[nt,ut,en,vt,Ft]),ht({items:It})}function ee({style:ut,panel:nt,dashboard:vt,loadingState:ht,menuItemsClassName:It,menuWrapperClassName:Ft}){return t.createElement(pe,{panel:nt,dashboard:vt,loadingState:ht},({items:en})=>t.createElement(F,{className:Ft,itemsClassName:It,style:ut,items:en}))}var se=e(64319),Q=e(85419);const G=({notice:ut,onClick:nt})=>{const vt=(0,S.wW)(q),ht=ut.severity==="error"||ut.severity==="warning"?"exclamation-triangle":"info-circle";return ut.inspect&&nt?t.createElement(se.h,{className:vt.notice,icon:ht,iconSize:"md",key:ut.severity,tooltip:ut.text,onClick:It=>nt(It,ut.inspect)}):ut.link?t.createElement("a",{className:vt.notice,"aria-label":ut.text,href:ut.link,target:"_blank",rel:"noreferrer"},t.createElement(x.J,{name:ht,style:{marginRight:"8px"},size:"md"})):t.createElement(B.u,{key:ut.severity,content:ut.text},t.createElement("span",{className:vt.iconTooltip},t.createElement(x.J,{name:ht,size:"md"})))},q=ut=>({notice:(0,b.css)({background:"inherit",border:"none",borderRadius:ut.shape.borderRadius()}),iconTooltip:(0,b.css)({color:`${ut.colors.text.secondary}`,backgroundColor:"inherit",cursor:"auto",border:"none",borderRadius:`${ut.shape.borderRadius()}`,padding:`${ut.spacing(0,1)}`,height:` ${ut.spacing(ut.components.height.md)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,Q.getFocusStyles)(ut),zIndex:1},"&: focus:not(:focus-visible)":(0,Q.getMouseFocusStyles)(ut),"&:hover ":{boxShadow:`${ut.shadows.z1}`,color:`${ut.colors.text.primary}`,background:`${ut.colors.background.secondary}`}})}),X=({frames:ut,panelId:nt})=>{const vt=(0,t.useCallback)((It,Ft)=>{It.stopPropagation(),y.E1.partial({inspect:nt,inspectTab:Ft})},[nt]),ht={};for(const It of ut)if(!(!It.meta||!It.meta.notices))for(const Ft of It.meta.notices)ht[Ft.severity]=Ft;return t.createElement(t.Fragment,null,Object.values(ht).map(It=>t.createElement(G,{notice:It,onClick:vt,key:It.severity})))};function de({panel:ut,error:nt,isViewing:vt,isEditing:ht,data:It,alertState:Ft,dashboard:en}){const sn=()=>ut.getQueryRunner().cancelQuery(),Mn=ut.getDisplayTitle(),En=(0,b.cx)("panel-header",vt||ht?"":"grid-drag-handle"),yn=(0,S.wW)(Be);return t.createElement(t.Fragment,null,t.createElement(w,{state:It.state,onClick:sn}),t.createElement(L.Z,{panel:ut,title:ut.title,description:ut.description,scopedVars:ut.scopedVars,links:(0,O.H)(ut),error:nt}),t.createElement("div",{className:En},t.createElement(A,{"data-testid":p.wl.components.Panels.Panel.title(Mn)},({closeMenu:Bn,panelMenuOpen:ea})=>t.createElement(M.L,{onClick:Bn,parent:document},t.createElement("div",{className:"panel-title"},t.createElement(X,{frames:It.series,panelId:ut.id}),Ft?t.createElement(x.J,{name:Ft==="alerting"?"heart-break":"heart",className:"icon-gf panel-alert-icon",style:{marginRight:"4px"},size:"sm"}):null,t.createElement("h2",{className:yn.titleText},Mn),!en.meta.publicDashboardAccessToken&&t.createElement("div",{"data-testid":"panel-dropdown"},t.createElement(x.J,{name:"angle-down",className:"panel-menu-toggle"}),ea?t.createElement(ee,{panel:ut,dashboard:en,onClose:Bn}):null),It.request&&It.request.timeInfo&&t.createElement("span",{className:"panel-time-info"},t.createElement(x.J,{name:"clock-nine",size:"sm"})," ",It.request.timeInfo))))))}const Be=ut=>({titleText:b.css`
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      max-width: calc(100% - 38px);
      cursor: pointer;
      font-weight: ${ut.typography.fontWeightMedium};
      font-size: ${ut.typography.body.fontSize};
      margin: 0;

      &:hover {
        color: ${ut.colors.text.primary};
      }
      .panel-has-alert & {
        max-width: calc(100% - 54px);
      }
    `});class ke extends t.PureComponent{constructor(nt){super(nt),this.element=null,this.timeSrv=(0,C.$t)(),this.subs=new a.w0,this.state={data:{state:m.Gu.NotStarted,series:[],timeRange:(0,d.JK)()}}}componentDidMount(){const{panel:nt}=this.props;this.loadAngularPanel();const vt=nt.getQueryRunner();this.subs.add(vt.getData({withTransforms:!1,withFieldConfig:!1}).subscribe({next:ht=>this.onPanelDataUpdate(ht)}))}onPanelDataUpdate(nt){let vt;if(nt.state===m.Gu.Error){const{error:ht}=nt;ht&&vt!==ht.message&&(vt=ht.message)}this.setState({data:nt,errorMessage:vt})}componentWillUnmount(){this.subs.unsubscribe(),this.props.angularComponent&&this.props.angularComponent?.destroy()}componentDidUpdate(nt,vt){const{plugin:ht,height:It,width:Ft,panel:en}=this.props;nt.plugin!==ht&&this.loadAngularPanel(),(nt.width!==Ft||nt.height!==It)&&this.scopeProps&&(this.scopeProps.size.height=this.getInnerPanelHeight(),this.scopeProps.size.width=this.getInnerPanelWidth(),en.render())}getInnerPanelHeight(){const{plugin:nt,height:vt}=this.props,{theme:ht}=v.ZP,It=this.hasOverlayHeader()?0:ht.panelHeaderHeight,Ft=nt.noPadding?0:ht.panelPadding;return vt-It-Ft*2-i.QO}getInnerPanelWidth(){const{plugin:nt,width:vt}=this.props,{theme:ht}=v.ZP,It=nt.noPadding?0:ht.panelPadding;return vt-It*2-i.QO}loadAngularPanel(){const{panel:nt,dashboard:vt,setPanelAngularComponent:ht}=this.props;if(!this.element)return;const It=(0,h.w)(),Ft='<plugin-component type="panel" class="panel-height-helper"></plugin-component>';this.scopeProps={panel:nt,dashboard:vt,size:{width:this.getInnerPanelWidth(),height:this.getInnerPanelHeight()}},ht({key:nt.key,angularComponent:It.load(this.element,this.scopeProps,Ft)})}hasOverlayHeader(){const{panel:nt}=this.props,{data:vt}=this.state;return vt.request&&vt.request.timeInfo?!1:!nt.hasTitle()}render(){const{dashboard:nt,panel:vt,isViewing:ht,isEditing:It,plugin:Ft}=this.props,{errorMessage:en,data:sn}=this.state,{transparent:Mn}=vt,En=sn.alertState?.state,yn=l()({"panel-container":!0,"panel-container--absolute":P(y.E1.getLocation().pathname),"panel-container--transparent":Mn,"panel-container--no-title":this.hasOverlayHeader(),"panel-has-alert":vt.alert!==void 0,[`panel-alert-state--${En}`]:En!==void 0}),Bn=l()({"panel-content":!0,"panel-content--no-padding":Ft.noPadding});return t.createElement("div",{className:yn,"aria-label":p.wl.components.Panels.Panel.containerByTitle(vt.title)},t.createElement(de,{panel:vt,dashboard:nt,title:vt.title,description:vt.description,links:vt.links,error:en,isViewing:ht,isEditing:It,data:sn,alertState:En}),t.createElement("div",{className:Bn},t.createElement("div",{ref:ea=>this.element=ea,className:"panel-height-helper"})))}}const He=(ut,nt)=>({angularComponent:(0,u.i)(ut,nt.panel)?.angularComponent}),ue={setPanelAngularComponent:s.o8},Oe=(0,n.connect)(He,ue)(ke);var Fe=e(29431),Ie=e(55294),we=e(46519),Re=e(5916),_e=e(41959),et=e(40400),qe=e(16911),Je=e(20231),lt=e(40885),at=e(82378),Xe=e(35645),gt=e(60325),ot=e(86635),Ye=e(53546),mt=e(29494),ce=e(91162),be=e(30002),Te=e(85854),Ke=e(66926);const ge=(ut,nt,vt)=>{const{overrides:ht}=vt,It=vt.overrides.findIndex(En=>En.matcher.id===Te.mi.byName&&En.matcher.options===ut);if(It<0)return{...vt,overrides:[...vt.overrides,Me(ut,nt)]};const Ft=Array.from(ht),en=Ft[It],sn=en.properties.findIndex(En=>En.id==="color");if(sn<0)return Ft[It]={...en,properties:[...en.properties,ye(nt)]},{...vt,overrides:Ft};const Mn=Array.from(en.properties);return Mn[sn]=ye(nt),Ft[It]={...en,properties:Mn},{...vt,overrides:Ft}},Me=(ut,nt)=>({matcher:{id:Te.mi.byName,options:ut},properties:[ye(nt)]}),ye=ut=>({id:"color",value:{mode:Ke.S.Fixed,fixedColor:ut}});var fe=e(45984),he=e(70659),De=e(87865),Ae=e(57277),Ne=e(23309),Ze=e(3630),Se=e(38484),Ue=e(71698);function Qe({panelLinks:ut,onShowPanelLinks:nt}){const vt=(0,S.wW)(pt),ht=()=>{const It=nt();return t.createElement(Se.v,null,It?.map((Ft,en)=>t.createElement(Se.v.Item,{key:en,label:Ft.title,url:Ft.href,target:Ft.target})))};if(ut.length===1){const It=nt()[0];return t.createElement(ot.fm.TitleItem,{href:It.href,onClick:It.onClick,target:It.target,title:It.title},t.createElement(x.J,{name:"external-link-alt",size:"md"}))}else return t.createElement(Ue.L,{overlay:ht},t.createElement(se.h,{icon:"external-link-alt",iconSize:"md","aria-label":"panel links",className:vt.menuTrigger}))}const pt=ut=>({menuTrigger:(0,b.css)({height:"100%",background:"inherit",border:"none",borderRadius:`${ut.shape.borderRadius()}`,cursor:"context-menu"})});function bt(ut){const{alertState:nt,data:vt,panelId:ht,onShowPanelLinks:It,panelLinks:Ft}=ut,en=(0,S.wW)(yt),sn=t.createElement(B.u,{content:`alerting is ${nt}`},t.createElement(ot.fm.TitleItem,{className:(0,b.cx)({[en.ok]:nt===Ne.Z.OK,[en.pending]:nt===Ne.Z.Pending,[en.alerting]:nt===Ne.Z.Alerting})},t.createElement(x.J,{name:nt==="alerting"?"heart-break":"heart",className:"panel-alert-icon",size:"md"}))),Mn=t.createElement(t.Fragment,null,vt.request&&vt.request.timeInfo&&t.createElement(B.u,{content:t.createElement(Ze.IF,{timeRange:vt.request?.range,timeZone:vt.request?.timezone})},t.createElement(ot.fm.TitleItem,{className:en.timeshift},t.createElement(x.J,{name:"clock-nine",size:"md"})," ",vt.request?.timeInfo)));return t.createElement(t.Fragment,null,Ft&&Ft.length>0&&It&&t.createElement(Qe,{onShowPanelLinks:It,panelLinks:Ft}),t.createElement(X,{panelId:ht,frames:vt.series}),Mn,nt&&sn)}const yt=ut=>({ok:(0,b.css)({color:ut.colors.success.text}),pending:(0,b.css)({color:ut.colors.warning.text}),alerting:(0,b.css)({color:ut.colors.error.text}),timeshift:(0,b.css)({color:ut.colors.text.link,"&:hover":{color:ut.colors.emphasize(ut.colors.text.link,.03)}})});var Mt=e(91551),At=e(6911);const Pt="Error in plugin";class rn extends t.PureComponent{constructor(nt){super(nt),this.timeSrv=(0,C.$t)(),this.subs=new a.w0,this.eventFilter={onlyLocal:!0},this.getSync=()=>this.props.isEditing?Fe.m.Off:this.props.dashboard.graphTooltip,this.onInstanceStateChange=ht=>{this.props.onInstanceStateChange(ht),this.setState({context:{...this.state.context,instanceState:ht}})},this.onSeriesColorChange=(ht,It)=>{this.onFieldConfigChange(ge(ht,It,this.props.panel.fieldConfig))},this.onSeriesVisibilityChange=(ht,It)=>{this.onFieldConfigChange((0,Mt.N)(ht,It,this.props.panel.fieldConfig,this.state.data.series))},this.onToggleLegendSort=ht=>{const It=this.props.panel.options.legend;if(!It)return;let Ft=It.sortDesc,en=It.sortBy;ht!==en&&(Ft=void 0),Ft===!1?(en=void 0,Ft=void 0):(Ft=!Ft,en=ht),this.onOptionsChange({...this.props.panel.options,legend:{...It,sortBy:en,sortDesc:Ft}})},this.onRefresh=()=>{const{dashboard:ht,panel:It,isInView:Ft,width:en}=this.props;if(!Ft){this.setState({refreshWhenInView:!0});return}const sn=(0,J.W1)(It,this.timeSrv.timeRange());if(this.wantsQueryExecution){if(en<0)return;this.state.refreshWhenInView&&this.setState({refreshWhenInView:!1}),It.runAllPanelQueries({dashboardId:ht.id,dashboardUID:ht.uid,dashboardTimezone:ht.getTimezone(),publicDashboardAccessToken:ht.meta.publicDashboardAccessToken,timeData:sn,width:en})}else this.setState({data:{...this.state.data,timeRange:this.timeSrv.timeRange()},renderCounter:this.state.renderCounter+1,liveTime:void 0})},this.onRender=()=>{const ht={renderCounter:this.state.renderCounter+1};this.setState(ht)},this.onOptionsChange=ht=>{this.props.panel.updateOptions(ht)},this.onFieldConfigChange=ht=>{this.props.panel.updateFieldConfig(ht)},this.onPanelError=ht=>{const It=ht.message||Pt;this.state.errorMessage!==It&&this.setState({errorMessage:It})},this.onPanelErrorRecover=()=>{this.setState({errorMessage:void 0})},this.onAnnotationCreate=async ht=>{const It=ht.from!==ht.to,Ft={dashboardUID:this.props.dashboard.uid,panelId:this.props.panel.id,isRegion:It,time:ht.from,timeEnd:It?ht.to:0,tags:ht.tags,text:ht.description};await(0,he.xD)(Ft),(0,De.kt)().run({dashboard:this.props.dashboard,range:this.timeSrv.timeRange()}),this.state.context.eventBus.publish(new Ie.n1(Ft))},this.onAnnotationDelete=async ht=>{await(0,he.Dl)({id:ht}),(0,De.kt)().run({dashboard:this.props.dashboard,range:this.timeSrv.timeRange()}),this.state.context.eventBus.publish(new Ie.n1({id:ht}))},this.onAnnotationUpdate=async ht=>{const It=ht.from!==ht.to,Ft={id:ht.id,dashboardUID:this.props.dashboard.uid,panelId:this.props.panel.id,isRegion:It,time:ht.from,timeEnd:It?ht.to:0,tags:ht.tags,text:ht.description};await(0,he._E)(Ft),(0,De.kt)().run({dashboard:this.props.dashboard,range:this.timeSrv.timeRange()}),this.state.context.eventBus.publish(new Ie.n1(Ft))},this.onChangeTimeRange=ht=>{this.timeSrv.setTime({from:(0,we.zh)(ht.from),to:(0,we.zh)(ht.to)})},this.onAddAdHocFilter=ht=>{const{key:It,value:Ft,operator:en}=ht,sn=(0,ce.ak)().getInstanceSettings(this.props.panel.datasource),Mn=sn&&(0,Re.iU)(sn);Mn&&(0,me.WI)((0,be.m2)({datasource:Mn,key:It,operator:en,value:Ft}))},this.onShowPanelDescription=()=>{const{panel:ht}=this.props,It=(0,lt.J)().replace(ht.description,ht.scopedVars);return(0,_e.a)(It)},this.onShowPanelLinks=()=>{const{panel:ht}=this.props,It=(0,O.H)(ht);return It?It&&It.getLinks(ht.replaceVariables):[]},this.onOpenInspector=(ht,It)=>{ht.stopPropagation(),y.E1.partial({inspect:this.props.panel.id,inspectTab:It})},this.onOpenErrorInspect=ht=>{ht.stopPropagation(),y.E1.partial({inspect:this.props.panel.id,inspectTab:oe.q.Error})};const vt=nt.dashboard.events.newScopedBus(`panel:${nt.panel.id}`,this.eventFilter);this.state={isFirstLoad:!0,renderCounter:0,refreshWhenInView:!1,context:{eventBus:vt,app:this.getPanelContextApp(),sync:this.getSync,onSeriesColorChange:this.onSeriesColorChange,onToggleSeriesVisibility:this.onSeriesVisibilityChange,onAnnotationCreate:this.onAnnotationCreate,onAnnotationUpdate:this.onAnnotationUpdate,onAnnotationDelete:this.onAnnotationDelete,onInstanceStateChange:this.onInstanceStateChange,onToggleLegendSort:this.onToggleLegendSort,canAddAnnotations:nt.dashboard.canAddAnnotations.bind(nt.dashboard),canEditAnnotations:nt.dashboard.canEditAnnotations.bind(nt.dashboard),canDeleteAnnotations:nt.dashboard.canDeleteAnnotations.bind(nt.dashboard),onAddAdHocFilter:this.onAddAdHocFilter},data:this.getInitialPanelDataState()}}getPanelContextApp(){return this.props.isEditing?et.zj.PanelEditor:this.props.isViewing?et.zj.PanelViewer:et.zj.Dashboard}getInitialPanelDataState(){return{state:m.Gu.NotStarted,series:[],timeRange:(0,d.JK)()}}componentDidMount(){const{panel:nt,dashboard:vt}=this.props;if(this.subs.add(nt.events.subscribe(at.U5,this.onRefresh)),this.subs.add(nt.events.subscribe(fe._z,this.onRender)),vt.panelInitialized(this.props.panel),this.hasPanelSnapshot){this.setState({data:(0,Ae.y)(nt,vt),isFirstLoad:!1});return}this.wantsQueryExecution||this.setState({isFirstLoad:!1}),this.subs.add(nt.getQueryRunner().getData({withTransforms:!0,withFieldConfig:!0}).subscribe({next:ht=>this.onDataUpdate(ht)})),At.A.listen(this)}componentWillUnmount(){this.subs.unsubscribe(),At.A.remove(this)}liveTimeChanged(nt){const{data:vt}=this.state;if(vt.timeRange){const ht=nt.to.valueOf()-vt.timeRange.to.valueOf();if(ht<100){console.log("Skip tick render",this.props.panel.title,ht);return}}this.setState({liveTime:nt})}componentDidUpdate(nt){const{isInView:vt,width:ht}=this.props,{context:It}=this.state,Ft=this.getPanelContextApp();It.app!==Ft&&this.setState({context:{...It,app:Ft}}),vt!==nt.isInView&&vt&&this.state.refreshWhenInView&&this.onRefresh(),ht!==nt.width&&At.A.updateInterval(this)}onDataUpdate(nt){const{dashboard:vt,panel:ht,plugin:It}=this.props;if(It.meta.skipDataQuery){this.setState({data:this.getInitialPanelDataState()});return}let{isFirstLoad:Ft}=this.state,en;switch(nt.state){case m.Gu.Loading:if(this.state.data.state===m.Gu.Loading)return;break;case m.Gu.Error:const{error:sn}=nt;sn&&en!==sn.message&&(en=sn.message);break;case m.Gu.Done:vt.snapshot&&(ht.snapshotData=nt.series.map(Mn=>(0,qe.og)(Mn))),Ft&&(Ft=!1);break}this.setState({isFirstLoad:Ft,errorMessage:en,data:nt,liveTime:void 0})}get hasPanelSnapshot(){const{panel:nt}=this.props;return nt.snapshotData&&nt.snapshotData.length}get wantsQueryExecution(){return!(this.props.plugin.meta.skipDataQuery||this.hasPanelSnapshot)}shouldSignalRenderingCompleted(nt,vt){return nt===m.Gu.Done||vt.skipDataQuery}skipFirstRender(nt){const{isFirstLoad:vt}=this.state;return this.wantsQueryExecution&&vt&&(nt===m.Gu.Loading||nt===m.Gu.NotStarted)}renderPanelContent(nt,vt){const{panel:ht,plugin:It,dashboard:Ft}=this.props,{renderCounter:en,data:sn}=this.state,{state:Mn}=sn;if(this.skipFirstRender(Mn))return null;this.shouldSignalRenderingCompleted(Mn,It.meta)&&mt.r.renderingCompleted();const En=It.panel,yn=this.state.liveTime??sn.timeRange??this.timeSrv.timeRange(),Bn=ht.getOptions();return this.eventFilter.onlyLocal=Ft.graphTooltip===0,t.createElement(t.Fragment,null,t.createElement(gt._w,{value:this.state.context},t.createElement(En,{id:ht.id,data:sn,title:ht.title,timeRange:yn,timeZone:this.props.dashboard.getTimezone(),options:Bn,fieldConfig:ht.fieldConfig,transparent:ht.transparent,width:nt,height:vt,renderCounter:en,replaceVariables:ht.replaceVariables,onOptionsChange:this.onOptionsChange,onFieldConfigChange:this.onFieldConfigChange,onChangeTimeRange:this.onChangeTimeRange,eventBus:Ft.events})))}renderPanel(nt,vt){const{panel:ht,plugin:It,dashboard:Ft}=this.props,{renderCounter:en,data:sn}=this.state,{theme:Mn}=Xe.v,{state:En}=sn;if(this.skipFirstRender(En))return null;this.shouldSignalRenderingCompleted(En,It.meta)&&mt.r.renderingCompleted();const yn=It.panel,Bn=this.state.liveTime??sn.timeRange??this.timeSrv.timeRange(),ea=this.hasOverlayHeader()?0:Mn.panelHeaderHeight,Qn=It.noPadding?0:Mn.panelPadding,Kn=nt-Qn*2-i.QO,Ua=vt-ea-Qn*2-i.QO,pa=l()({"panel-content":!0,"panel-content--no-padding":It.noPadding}),va=ht.getOptions();this.eventFilter.onlyLocal=Ft.graphTooltip===0;const za=this.props.timezone||this.props.dashboard.getTimezone();return t.createElement(t.Fragment,null,t.createElement("div",{className:pa},t.createElement(Je.b,{meta:It.meta},t.createElement(gt._w,{value:this.state.context},t.createElement(yn,{id:ht.id,data:sn,title:ht.title,timeRange:Bn,timeZone:za,options:va,fieldConfig:ht.fieldConfig,transparent:ht.transparent,width:Kn,height:Ua,renderCounter:en,replaceVariables:ht.replaceVariables,onOptionsChange:this.onOptionsChange,onFieldConfigChange:this.onFieldConfigChange,onChangeTimeRange:this.onChangeTimeRange,eventBus:Ft.events})))))}hasOverlayHeader(){const{panel:nt}=this.props,{data:vt}=this.state;return vt.request&&vt.request.timeInfo?!1:!nt.hasTitle()}render(){const{dashboard:nt,panel:vt,isViewing:ht,isEditing:It,width:Ft,height:en,plugin:sn}=this.props,{errorMessage:Mn,data:En}=this.state,{transparent:yn}=vt,Bn=En.alertState?.state,ea=l()({"panel-container":!0,"panel-container--absolute":P(y.E1.getLocation().pathname),"panel-container--transparent":yn,"panel-container--no-title":this.hasOverlayHeader(),[`panel-alert-state--${Bn}`]:Bn!==void 0}),Qn=vt.getDisplayTitle(),Kn=sn.noPadding?"none":"md",pa=(vt.links&&vt.links.length>0&&this.onShowPanelLinks||En.series.length>0&&En.series.some(Ea=>(Ea.meta?.notices?.length??0)>0)||En.request&&En.request.timeInfo||Bn)&&t.createElement(bt,{key:"title-items",alertState:Bn,data:En,panelId:vt.id,panelLinks:vt.links,onShowPanelLinks:this.onShowPanelLinks}),va={menuItemsClassName:void 0,menuWrapperClassName:void 0,pos:{top:0,left:"-156px"}};Xe.v.featureToggles.newPanelChromeUI&&(va.menuItemsClassName=b.css`
        width: inherit;
        top: inherit;
        left: inherit;
        position: inherit;
        float: inherit;
      `,va.menuWrapperClassName=b.css`
        position: inherit;
        width: inherit;
        top: inherit;
        left: inherit;
        float: inherit;
        .dropdown-submenu > .dropdown-menu {
          position: absolute;
        }
      `,va.pos=void 0);let za;nt.meta.publicDashboardAccessToken||(za=t.createElement("div",{"data-testid":"panel-dropdown"},t.createElement(ee,{style:va.pos,panel:vt,dashboard:nt,loadingState:En.state,onClose:()=>{},menuItemsClassName:va.menuItemsClassName,menuWrapperClassName:va.menuWrapperClassName})));const ja=ht||It?"":"grid-drag-handle";if(Xe.v.featureToggles.newPanelChromeUI){const Ea=(vt.gridPos?.y??0)===0?-16:void 0;return t.createElement(ot.fm,{width:Ft,height:en,title:Qn,loadingState:En.state,statusMessage:Mn,statusMessageOnClick:this.onOpenErrorInspect,description:vt.description?this.onShowPanelDescription:void 0,titleItems:pa,menu:za,dragClass:ja,dragClassCancel:"grid-drag-cancel",padding:Kn,hoverHeaderOffset:Ea,hoverHeader:!Qn,displayMode:yn?"transparent":"default"},(ma,Xa)=>t.createElement(t.Fragment,null,t.createElement(Ye.SV,{dependencies:[En,sn,vt.getOptions()],onError:this.onPanelError,onRecover:this.onPanelErrorRecover},({error:Oa})=>Oa?null:this.renderPanelContent(ma,Xa))))}else return t.createElement("section",{className:ea,"aria-label":p.wl.components.Panels.Panel.containerByTitle(vt.title)},t.createElement(de,{panel:vt,dashboard:nt,title:vt.title,description:vt.description,links:vt.links,error:Mn,isEditing:It,isViewing:ht,alertState:Bn,data:En}),t.createElement(Ye.SV,{dependencies:[En,sn,vt.getOptions()],onError:this.onPanelError,onRecover:this.onPanelErrorRecover},({error:Ea})=>Ea?null:this.renderPanel(Ft,en)))}}const Fn=(ut,nt)=>{const vt=ut.panels[nt.stateKey];return vt?{plugin:vt.plugin,instanceState:vt.instanceState}:{plugin:null}},kn={initPanelState:c.JI,setPanelInstanceState:s.pC},Jn=(0,n.connect)(Fn,kn);class qn extends t.PureComponent{constructor(){super(...arguments),this.onInstanceStateChange=nt=>{this.props.setPanelInstanceState({key:this.props.stateKey,value:nt})},this.onVisibilityChange=nt=>{this.props.panel.isInView=nt},this.onPanelLoad=()=>{this.props.plugin||this.props.initPanelState(this.props.panel)},this.renderPanel=nt=>{const{dashboard:vt,panel:ht,isViewing:It,isEditing:Ft,width:en,height:sn,plugin:Mn,timezone:En}=this.props;return Mn?Mn&&Mn.angularPanelCtrl?t.createElement(Oe,{plugin:Mn,panel:ht,dashboard:vt,isViewing:It,isEditing:Ft,isInView:nt,width:en,height:sn}):t.createElement(rn,{plugin:Mn,panel:ht,dashboard:vt,isViewing:It,isEditing:Ft,isInView:nt,width:en,height:sn,onInstanceStateChange:this.onInstanceStateChange,timezone:En}):null}}componentDidMount(){this.props.panel.isInView=!this.props.lazy,this.props.lazy||this.onPanelLoad()}render(){const{width:nt,height:vt,lazy:ht}=this.props;return ht?t.createElement(f,{width:nt,height:vt,onChange:this.onVisibilityChange,onLoad:this.onPanelLoad},this.renderPanel):this.renderPanel(!0)}}qn.defaultProps={lazy:!0};const Ut=Jn(qn)},53821:(H,T,e)=>{"use strict";e.d(T,{Z:()=>m});var t=e(68404),n=e(41959),c=e(68183),s=e(40885),r=e(37932),g=e(61860),f=e(19349),o=e(39653),l=(d=>(d.Error="Error",d.Info="Info",d.Links="Links",d))(l||{});class a extends t.Component{constructor(){super(...arguments),this.timeSrv=(0,f.$t)(),this.getInfoMode=()=>{const{panel:p,error:h}=this.props;if(h)return"Error";if(p.description)return"Info";if(p.links&&p.links.length)return"Links"},this.getInfoContent=()=>{const{panel:p}=this.props,h=p.description||"",y=(0,s.J)().replace(h,p.scopedVars),v=(0,n.a)(y),i=this.props.links&&this.props.links.getLinks(p.replaceVariables);return t.createElement("div",{className:"panel-info-content markdown-html"},t.createElement("div",{dangerouslySetInnerHTML:{__html:v}}),i&&i.length>0&&t.createElement("ul",{className:"panel-info-corner-links"},i.map((u,P)=>t.createElement("li",{key:P},t.createElement("a",{className:"panel-info-corner-links__item",href:u.href,target:u.target},u.title)))))},this.onClickError=()=>{r.E1.partial({inspect:this.props.panel.id,inspectTab:o.q.Error})}}renderCornerType(p,h,y){const v=p==="Error"?"error":"info",i=`panel-info-corner panel-info-corner--${p.toLowerCase()}`,u=c.wl.components.Panels.Panel.headerCornerInfo(p.toLowerCase());return t.createElement(g.u,{content:h,placement:"top-start",theme:v,interactive:!0},t.createElement("button",{type:"button",className:i,onClick:y,"aria-label":u},t.createElement("i",{"aria-hidden":!0,className:"fa"}),t.createElement("span",{className:"panel-info-corner-inner"})))}render(){const{error:p}=this.props,h=this.getInfoMode();return h?h==="Error"&&p?this.renderCornerType(h,p,this.onClickError):h==="Info"||h==="Links"?this.renderCornerType(h,this.getInfoContent):null:null}}const m=a},79860:(H,T,e)=>{"use strict";e.d(T,{u:()=>f});var t=e(52423),n=e(68404),c=e(68183),s=e(72648),r=e(40419),g=e(39904);const f=a=>{const[m,d]=(0,n.useState)(null),p=a.type==="submenu",h=a.type==="divider",y=(0,s.wW)(l),v=a.iconClassName?(0,r.toIconName)(a.iconClassName):void 0;return h?n.createElement("li",{className:"divider"}):n.createElement("li",{className:p?`dropdown-submenu ${o(m)}`:void 0,ref:d},n.createElement("a",{onClick:a.onClick,href:a.href},v&&n.createElement(g.J,{name:v,className:y.menuIconClassName}),n.createElement("span",{className:"dropdown-item-text","aria-label":c.wl.components.Panels.Panel.headerItems(a.text)},a.text,p&&n.createElement(g.J,{name:"angle-right",className:y.shortcutIconClassName})),a.shortcut&&n.createElement("span",{className:"dropdown-menu-item-shortcut"},n.createElement(g.J,{name:"keyboard",className:y.menuIconClassName})," ",a.shortcut)),a.children)};function o(a){if(!a)return"invisible";const m=a.parentElement.getBoundingClientRect(),d=a.getBoundingClientRect();return d.width===0?"invisible":m.right+d.width+10>window.innerWidth?"pull-left":"pull-right"}function l(a){return{menuIconClassName:(0,t.css)({marginRight:a.spacing(1),"a::after":{display:"none"}}),shortcutIconClassName:(0,t.css)({position:"absolute",top:"7px",right:a.spacing(.5),color:a.colors.text.secondary})}}},91551:(H,T,e)=>{"use strict";e.d(T,{N:()=>a});var t=e(68061),n=e(74188),c=e(85854),s=e(14582),r=e(89890),g=e(3249),f=e(17882);const o="hideSeriesFrom",l=(0,t.Y4)(o);function a(i,u,P,E){const{overrides:C}=P,b=i,S=C.findIndex(l);if(S<0){if(u===f.R.ToggleSelection){const w=m([b,...v(C,E)]);return{...P,overrides:[...P.overrides,w]}}const L=y(E,b),B=m(L);return{...P,overrides:[...P.overrides,B]}}const M=Array.from(C),[x]=M.splice(S,1);if(u===f.R.ToggleSelection){let L=p(x);const B=v(M,E);if(B.length>0&&(L=L.filter(R=>B.indexOf(R)<0)),L[0]===b&&L.length===1)return{...P,overrides:M};const w=m([b,...B]);return{...P,overrides:[...M,w]}}const O=d(x,b);return h(O,E)?{...P,overrides:M}:{...P,overrides:[...M,O]}}function m(i,u=n.Ys.exclude,P){return P=P??{id:"custom.hideFrom",value:{viz:!0,legend:!1,tooltip:!1}},{__systemRef:o,matcher:{id:c.mi.byNames,options:{mode:u,names:i,prefix:u===n.Ys.exclude?"All except:":void 0,readOnly:!0}},properties:[{...P,value:{viz:!0,legend:!1,tooltip:!1}}]}}const d=(i,u,P=n.Ys.exclude)=>{const E=i.properties.find(S=>S.id==="custom.hideFrom"),C=p(i),b=C.findIndex(S=>S===u);return b<0?C.push(u):C.splice(b,1),m(C,P,E)},p=i=>{const u=i.matcher.options?.names;return Array.isArray(u)?[...u]:[]},h=(i,u)=>p(i).length===y(u).length,y=(i,u)=>{const P=new Set;for(const E of i)for(const C of E.fields){if(C.type!==s.fS.number)continue;const b=(0,r.C)(C,E,i);b!==u&&P.add(b)}return Array.from(P)},v=(i,u)=>{let P=[];for(const E of i){const C=E.properties.find(b=>b.id==="custom.hideFrom");if(C!==void 0&&C.value?.legend===!0){const S=g.Ls.get(E.matcher.id).get(E.matcher.options);for(const M of u)for(const x of M.fields){if(x.type!==s.fS.number)continue;const O=(0,r.C)(x,M,u);S(x,M,u)&&P.push(O)}}}return P}},6911:(H,T,e)=>{"use strict";e.d(T,{A:()=>o});var t=e(63479),n=e(46519),c=e(21053);const s=100;class r{constructor(){this.listeners=[],this.budget=1,this.threshold=1.5,this.ok=new t.X(!0),this.lastUpdate=Date.now(),this.isLive=!1,this.liveTimeOffset=0,this.measure=()=>{const a=Date.now();this.budget=(a-this.lastUpdate)/s;const m=this.ok.getValue(),d=this.budget<=this.threshold;if(m!==d&&this.ok.next(d),this.lastUpdate=a,this.isLive&&this.ok.getValue()&&this.timeRange){let p;for(const h of this.listeners){if(!h.panel.props.isInView)continue;if(a-h.last>=h.intervalMs){if(!p){const{raw:v}=this.timeRange;p={raw:v,from:(0,n.CQ)(a-this.liveTimeOffset),to:(0,n.CQ)(a)}}h.panel.liveTimeChanged(p),h.last=a}}}}}setLiveTimeRange(a){if(this.timeRange=a,this.isLive=a?.raw?.to==="now",this.isLive){const m=c.parse(a.raw.from,!1)?.valueOf(),d=c.parse(a.raw.to,!0)?.valueOf();this.liveTimeOffset=d-m;for(const p of this.listeners)p.intervalMs=f(this.liveTimeOffset,p.panel.props.width)}}listen(a){this.listeners.push({last:this.lastUpdate,panel:a,intervalMs:f(6e4,a.props.width)})}remove(a){this.listeners=this.listeners.filter(m=>m.panel!==a)}updateInterval(a){if(!(!this.timeRange||!this.isLive)){for(const m of this.listeners)if(m.panel===a){m.intervalMs=f(this.liveTimeOffset,m.panel.props.width);return}}}}const g=5*60*1e3;function f(l,a){const m=Math.ceil(l/a/100)*100;return m>g?g:m}const o=new r;setInterval(o.measure,s)},87449:(H,T,e)=>{"use strict";e.d(T,{Bg:()=>P,pD:()=>E});var t=e(21256),n=e.n(t),c=e(82897),s=e.n(c),r=e(36365),g=e.n(r),f=e(25318),o=e(21053),l=e(54899),a=e(37932),m=e(29930),d=e(13019),p=e(24816),h=e(91162),y=e(63163),v=e(81168),i=e(77582),u=e(9398);class P{constructor(){}_dashboardLoadFailed(S,M){return M=M||!1,{meta:{canStar:!1,isSnapshot:M,canDelete:!1,canSave:!1,canEdit:!1,dashboardNotFound:!0},dashboard:{title:S}}}loadDashboard(S,M,x){let O;return S==="script"?O=this._loadScriptedDashboard(M):S==="snapshot"?O=m.ae.get("/api/snapshots/"+M).catch(()=>this._dashboardLoadFailed("Snapshot not found",!0)):S===v.DashboardRoutes.Path?O=(0,y.$)().getDashboard(M):S==="ds"?O=this._loadFromDatasource(M):S==="public"?O=m.ae.getPublicDashboardByUid(x).then(L=>L).catch(()=>this._dashboardLoadFailed("Public Dashboard Not found",!0)):O=m.ae.getDashboardByUid(x).then(L=>{if(L.meta.isFolder)throw i.h$.emit(f.SI.alertError,["Dashboard not found"]),new Error("Dashboard not found");return L}).catch(()=>this._dashboardLoadFailed("Not found",!0)),O.then(L=>(L.meta.dashboardNotFound!==!0&&d.Z.addDashboardImpression(L.dashboard.uid),L)),O}_loadScriptedDashboard(S){const M="public/dashboards/"+S.replace(/\.(?!js)/,"/")+"?"+new Date().getTime();return(0,l.i)().get(M).then(this._executeScript.bind(this)).then(x=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:x.data}),x=>(console.error("Script dashboard error "+x),i.h$.emit(f.SI.alertError,["Script Error","Please make sure it exists and returns a valid dashboard"]),this._dashboardLoadFailed("Scripted dashboard")))}async _loadFromDatasource(S){const M=await(0,h.ak)().get(S);if(!M)return Promise.reject("can not find datasource: "+S);const x=new URLSearchParams(window.location.search),O=x.get("path");if(!O)return Promise.reject("expecting path parameter");const L={};return x.forEach((B,w)=>{L[w]=B}),(0,l.i)().get(`/api/datasources/uid/${M.uid}/resources/${O}`,L).then(B=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:B}))}_executeScript(S){const M={dashboardSrv:(0,u.h4)(),datasourceSrv:(0,h.ak)()},O=new Function("ARGS","kbn","dateMath","_","moment","window","document","$","jQuery","services",S)(a.E1.getSearchObject(),p.Z,o,s(),g(),window,document,n(),n(),M);return(0,c.isFunction)(O)?new Promise(L=>{O(B=>{L({data:B})})}):{data:O}}}let E=new P;const C=b=>{throw new Error("dashboardLoaderSrv can be only overriden in test environment")}},9398:(H,T,e)=>{"use strict";e.d(T,{h4:()=>p});var t=e(3363),n=e(25318),c=e(97063),s=e(35287),r=e(29930),g=e(50946),f=e(45984),o=e(82302),l=e(2476);class a{constructor(){this.onRemovePanel=y=>{const v=this.getCurrent();v&&(0,l.WJ)(v,v.getPanelById(y),!0)},c.h.subscribe(f.Eb,y=>this.onRemovePanel(y.payload))}create(y,v){return new o.f(y,v)}setCurrent(y){this.dashboard=y}getCurrent(){return this.dashboard||console.warn("Calling getDashboardSrv().getCurrent() without calling getDashboardSrv().setCurrent() first."),this.dashboard}saveJSONDashboard(y){const v=JSON.parse(y);return(0,g.uC)({dashboard:v,folderUid:this.dashboard?.meta.folderUid||v.folderUid})}saveDashboard(y,v){return(0,t.n)((0,r.i)().fetch({url:"/api/dashboards/db/",method:"POST",data:{...y,dashboard:y.dashboard.getSaveModelClone()},...v}))}starDashboard(y,v){const i=(0,r.i)(),u={showSuccessAlert:!1,url:"/api/user/stars/dashboard/"+y,method:v?"DELETE":"POST"};return i.request(u).then(()=>{const P=!v;this.dashboard?.id===y&&(this.dashboard.meta.isStarred=P);const E=P?(0,s.t)("notifications.starred-dashboard","Dashboard starred"):(0,s.t)("notifications.unstarred-dashboard","Dashboard unstarred");return c.h.emit(n.SI.alertSuccess,[E]),P})}}let m;function d(h){m=h}function p(){return m||(m=new a),m}},17424:(H,T,e)=>{"use strict";e.d(T,{Qi:()=>d,lh:()=>h});var t=e(53786),n=e(85526),c=e(13016),s=e(94514),r=e(7238),g=e(16911),f=e(54899),o=e(32689),l=e(7832),a=e(63496),m=e(45849);const d="-- Public --",p="1min";class h extends r.MF{constructor(v){let i={};h.isMixedDatasource(v)&&(i.mixed=!0),super({name:"public-ds",id:0,type:"public-ds",meta:i,uid:h.resolveUid(v),jsonData:{},access:"proxy",readOnly:!0}),this.interval=h.resolveInterval(v),this.annotations={prepareQuery(u){return{...u,queryType:l.hR.Annotations,refId:"anno"}}}}static resolveUid(v){return typeof v=="string"?v:v?.uid??d}static isMixedDatasource(v){return typeof v=="string"||v==null?!1:v?.uid===a.D}static resolveInterval(v){return typeof v=="string"||v==null?p:("interval"in v?v.interval:void 0)??p}query(v){const{intervalMs:i,maxDataPoints:u,requestId:P,publicDashboardAccessToken:E,panelId:C,range:{from:b,to:S}}=v;let M;if(!v.targets.length)return(0,t.of)({data:[]});const x=v.targets[0];if(x.queryType===l.hR.Annotations)return x?.datasource?.uid===m.JY?(0,n.D)(this.getAnnotations(v)):(0,t.of)({data:[]});{const O={intervalMs:i,maxDataPoints:u,timeRange:{from:b.valueOf().toString(),to:S.valueOf().toString()}};return(0,f.i)().fetch({url:`/api/public/dashboards/${E}/panels/${C}/query`,method:"POST",data:O,requestId:P}).pipe((0,c.w)(L=>(0,t.of)((0,o.z1)(L,M))),(0,s.K)(L=>(0,t.of)((0,o.z1)(L))))}}async getAnnotations(v){const{publicDashboardAccessToken:i,range:{to:u,from:P}}=v,E={from:P.valueOf(),to:u.valueOf()},C=i?await(0,f.i)().get(`/api/public/dashboards/${i}/annotations`,E):[];return{data:[(0,g.g0)(C)]}}testDatasource(){return Promise.resolve(null)}}},19349:(H,T,e)=>{"use strict";e.d(T,{$t:()=>u});var t=e(82897),n=e(46519),c=e(69311),s=e(33180),r=e(21053),g=e(37932),f=e(97063),o=e(47694),l=e(82002),a=e(5242),m=e(74124),d=e(45984),p=e(5562);function h({urlRefresh:P,currentRefresh:E,isAllowedIntervalFn:C,minRefreshInterval:b,refreshIntervals:S=p.o5}){if(!P)return E;const M=C(P),x=S.find(O=>O===P);if(!M||!x){const O=b?S.find(B=>B===b):void 0,L=S?.length?S[0]:void 0;return O??L??E}return P||E}class y{constructor(E){this.contextSrv=E,this.autoRefreshPaused=!1,this.timeRangeForUrl=()=>{const C=this.timeRange().raw;return(0,n.v9)(C.from)&&(C.from=C.from.valueOf().toString()),(0,n.v9)(C.to)&&(C.to=C.to.valueOf().toString()),C},this.time=(0,c.JK)().raw,this.refreshTimeModel=this.refreshTimeModel.bind(this),f.Z.subscribe(d.p8,C=>{this.zoomOut(C.payload.scale,C.payload.updateUrl)}),f.Z.subscribe(d.Qt,C=>{this.shiftTime(C.payload.direction,C.payload.updateUrl)}),f.Z.subscribe(d.QI,()=>{this.makeAbsoluteTime()}),document.addEventListener("visibilitychange",()=>{this.autoRefreshBlocked&&document.visibilityState==="visible"&&(this.autoRefreshBlocked=!1,this.refreshTimeModel())})}init(E){this.timeModel=E,this.time=E.time,this.refresh=E.refresh,this.initTimeFromUrl(),this.parseTime(),this.timeAtLoad=(0,t.cloneDeep)(this.time);const C=s.convertRawToRange(this.time,this.timeModel?.getTimezone(),this.timeModel?.fiscalYearStartMonth);C.to.isBefore(C.from)&&this.setTime({from:C.raw.to,to:C.raw.from},!1),this.refresh&&this.setAutoRefresh(this.refresh)}getValidIntervals(E){return this.contextSrv.minRefreshInterval?E.filter(C=>C!=="").filter(this.contextSrv.isAllowedInterval):E}parseTime(){(0,t.isString)(this.time.from)&&this.time.from.indexOf("Z")>=0&&(this.time.from=(0,n.CQ)(this.time.from).utc()),(0,t.isString)(this.time.to)&&this.time.to.indexOf("Z")>=0&&(this.time.to=(0,n.CQ)(this.time.to).utc())}parseUrlParam(E){if(E.indexOf("now")!==-1)return E;if(E.length===8){const C=(0,n.zh)(E,"YYYYMMDD");if(C.isValid())return C}else if(E.length===15){const C=(0,n.zh)(E,"YYYYMMDDTHHmmss");if(C.isValid())return C}if(!isNaN(E)){const C=parseInt(E,10);return(0,n.zh)(C)}return null}getTimeWindow(E,C){const b=parseInt(E,10);let S;return C.match(/^\d+$/)&&parseInt(C,10)?S=parseInt(C,10):S=s.intervalToMs(C),{from:(0,n.zh)(b-S/2),to:(0,n.zh)(b+S/2)}}initTimeFromUrl(){if(o.vc.isPublicDashboardView&&this.timeModel?.timepicker?.hidden)return;const E=g.E1.getSearch();E.get("time")&&E.get("time.window")&&(this.time=this.getTimeWindow(E.get("time"),E.get("time.window"))),E.get("from")&&(this.time.from=this.parseUrlParam(E.get("from"))||this.time.from),E.get("to")&&(this.time.to=this.parseUrlParam(E.get("to"))||this.time.to),E.get("to")&&E.get("to").indexOf("now")===-1&&(this.refresh=!1,this.timeModel&&(this.timeModel.refresh=!1)),this.refresh=h({urlRefresh:E.get("refresh"),currentRefresh:this.refresh,refreshIntervals:Array.isArray(this.timeModel?.timepicker?.refresh_intervals)?this.timeModel?.timepicker?.refresh_intervals:void 0,isAllowedIntervalFn:this.contextSrv.isAllowedInterval,minRefreshInterval:o.vc.minRefreshInterval})}updateTimeRangeFromUrl(){const E=g.E1.getSearch();if(E.get("left"))return;const C=this.timeRangeForUrl(),b=E.get("from"),S=E.get("to");b&&S?(b!==C.from||S!==C.to)&&(this.initTimeFromUrl(),this.setTime(this.time,!1)):this.timeHasChangedSinceLoad()&&this.setTime(this.timeAtLoad,!0)}timeHasChangedSinceLoad(){return this.timeAtLoad&&(this.timeAtLoad.from!==this.time.from||this.timeAtLoad.to!==this.time.to)}setAutoRefresh(E){this.timeModel&&(this.timeModel.refresh=E),this.stopAutoRefresh();const C=g.E1.getSearchObject();if(!E){C.refresh&&g.E1.partial({refresh:null},!0);return}const b=this.contextSrv.getValidInterval(E),S=s.intervalToMs(b);this.refreshTimer=setTimeout(()=>{this.startNextRefreshTimer(S),!this.autoRefreshPaused&&this.refreshTimeModel()},S);const M=this.contextSrv.getValidInterval(E);C.refresh!==M&&g.E1.partial({refresh:M},!0)}refreshTimeModel(){this.timeModel?.timeRangeUpdated(this.timeRange())}startNextRefreshTimer(E){this.refreshTimer=setTimeout(()=>{this.startNextRefreshTimer(E),this.contextSrv.isGrafanaVisible()?!this.autoRefreshPaused&&this.refreshTimeModel():this.autoRefreshBlocked=!0},E)}stopAutoRefresh(){clearTimeout(this.refreshTimer)}pauseAutoRefresh(){this.autoRefreshPaused=!0}resumeAutoRefresh(){this.autoRefreshPaused=!1,this.refreshTimeModel()}setTime(E,C=!0){if((0,t.extend)(this.time,E),(0,n.v9)(E.to)?(this.oldRefresh=this.timeModel?.refresh||this.oldRefresh,this.setAutoRefresh(!1)):this.oldRefresh&&this.oldRefresh!==this.timeModel?.refresh&&(this.setAutoRefresh(this.oldRefresh),this.oldRefresh=null),C===!0){const b=this.timeRangeForUrl(),S=g.E1.getSearchObject();if(S.from===b.from.toString()&&S.to===b.to.toString())return;S.from=b.from.toString(),S.to=b.to.toString(),g.E1.partial(S)}this.refreshTimeModel()}timeRange(){return(0,m.O)(this.time,this.timeModel)}zoomOut(E,C=!0){const b=this.timeRange(),{from:S,to:M}=(0,a.h)(b,E);this.setTime({from:(0,n.zh)(S),to:(0,n.zh)(M)},C)}shiftTime(E,C=!0){const b=this.timeRange(),{from:S,to:M}=(0,a.e)(E,b);this.setTime({from:(0,n.zh)(S),to:(0,n.zh)(M)},C)}makeAbsoluteTime(){if(g.E1.getSearch().get("left"))return;const{from:C,to:b}=this.timeRange();this.setTime({from:C,to:b},!0)}isRefreshOutsideThreshold(E,C=.05){const b=this.timeRange();if(r.isMathString(b.raw.from)){const S=b.to.diff(b.from),M=Date.now()-E,x=S*C;return M>=x}return!1}}let v;function i(P){v=P}function u(){return v||(v=new y(l.Vt)),v}},7592:(H,T,e)=>{"use strict";e.d(T,{o:()=>I,p:()=>K});var t=e(82897),n=e(35363),c=e(5916),s=e(27677),r=e(89029),g=e(26031),f=e(58230),o=e(85854),l=e(14582),a=e(1052),m=e(10158),d=e(86647),p=e(40538),h=e(87388),y=e(52974),v=e(47694),i=e(84952);function u(re){return Array.from(new Array(re+1),(le,pe)=>pe).filter(le=>re%le===0)}var P=e(24816),E=e(91162),C=e(15546),b=e(96188),S=e(63496),M=e(7149),x=e(98967),O=e(99822),L=e(2868);function B(re,le){const pe=[];if(re?.statistics&&re?.statistics.length){re.statistic=re.statistics[0];for(const ee of re.statistics.splice(1))pe.push({...re,statistic:ee})}for(const ee of pe)ee.refId=(0,O.Hs)(le),delete ee.statistics,le.push(ee);return delete re.statistics,pe}function w(re){const le=[];if(re&&"statistics"in re&&re?.statistics?.length){for(const pe of re.statistics.splice(1)){const{statistics:ee,name:se,...Q}=re;le.push({...Q,statistic:pe,name:`${se} - ${pe}`})}re.statistic=re.statistics[0],le.length!==0&&(re.name=`${re.name} - ${re.statistic}`),delete re.statistics}return le}function R(re){re.hasOwnProperty("metricQueryType")||(re.metricQueryType=L.$5.Search),re.hasOwnProperty("metricEditorMode")||(re.metricQueryType===L.$5.Query?re.metricEditorMode=L.MQ.Code:re.metricEditorMode=re.expression?L.MQ.Code:L.MQ.Builder)}var A=e(10672),U=e(96161);n.S.setInit(y.u),n.N.setInit(y.l);class I{constructor(le){this.dashboard=le,(0,d.F)()||(0,d.w)(new E.ND)}updateSchema(le){let pe,ee,se,Q;const G=this.dashboard.schemaVersion,q=[];if(this.dashboard.schemaVersion=38,G!==this.dashboard.schemaVersion){if(G<2&&(le.services&&le.services.filter&&(this.dashboard.time=le.services.filter.time,this.dashboard.templating.list=le.services.filter.list||[]),q.push(X=>(X.type==="graphite"&&(X.type="graph"),X.type!=="graph"||((0,t.isBoolean)(X.legend)&&(X.legend={show:X.legend}),X.grid&&(X.grid.min&&(X.grid.leftMin=X.grid.min,delete X.grid.min),X.grid.max&&(X.grid.leftMax=X.grid.max,delete X.grid.max)),X.y_format&&(X.y_formats||(X.y_formats=[]),X.y_formats[0]=X.y_format,delete X.y_format),X.y2_format&&(X.y_formats||(X.y_formats=[]),X.y_formats[1]=X.y2_format,delete X.y2_format)),X))),G<3){let X=this.dashboard.getNextPanelId();q.push(de=>(de.id||(de.id=X,X+=1),de))}if(G<4&&q.push(X=>(X.type!=="graph"||((0,t.each)(X.aliasYAxis,(de,Be)=>{X.seriesOverrides=[{alias:Be,yaxis:de}]}),delete X.aliasYAxis),X)),G<6){const X=(0,t.find)(le.pulldowns,{type:"annotations"});for(X&&(this.dashboard.annotations={list:X.annotations||[]}),pe=0;pe<this.dashboard.templating.list.length;pe++){const de=this.dashboard.templating.list[pe];de.datasource===void 0&&(de.datasource=null),de.type==="filter"&&(de.type="query"),de.type===void 0&&(de.type="query"),de.allFormat===void 0&&(de.allFormat="glob")}}if(G<7&&(le.nav&&le.nav.length&&(this.dashboard.timepicker=le.nav[0]),q.push(X=>((0,t.each)(X.targets,de=>{de.refId||(de.refId=X.getNextQueryLetter&&X.getNextQueryLetter())}),X))),G<8&&q.push(X=>((0,t.each)(X.targets,de=>{de.fields&&de.tags&&de.groupBy&&(de.rawQuery?(delete de.fields,delete de.fill):(de.select=(0,t.map)(de.fields,Be=>{const ke=[];return ke.push({type:"field",params:[Be.name]}),ke.push({type:Be.func,params:[]}),Be.mathExpr&&ke.push({type:"math",params:[Be.mathExpr]}),Be.asExpr&&ke.push({type:"alias",params:[Be.asExpr]}),ke}),delete de.fields,(0,t.each)(de.groupBy,Be=>{Be.type==="time"&&Be.interval&&(Be.params=[Be.interval],delete Be.interval),Be.type==="tag"&&Be.key&&(Be.params=[Be.key],delete Be.key)}),de.fill&&(de.groupBy.push({type:"fill",params:[de.fill]}),delete de.fill)))}),X)),G<9&&q.push(X=>{if(X.type!=="singlestat"&&X.thresholds!=="")return X;if(X.thresholds){const de=X.thresholds.split(",");de.length>=3&&(de.shift(),X.thresholds=de.join(","))}return X}),G<10&&q.push(X=>(X.type!=="table"||(0,t.each)(X.styles,de=>{if(de.thresholds&&de.thresholds.length>=3){const Be=de.thresholds;Be.shift(),de.thresholds=Be}}),X)),G<12&&(0,t.each)(this.dashboard.getVariables(),X=>{X.refresh&&(X.refresh=1),X.refresh||(X.refresh=0),X.hideVariable?X.hide=2:X.hideLabel&&(X.hide=1)}),G<12&&q.push(X=>(X.type!=="graph"||!X.grid||X.yaxes||(X.yaxes=[{show:X["y-axis"],min:X.grid.leftMin,max:X.grid.leftMax,logBase:X.grid.leftLogBase,format:X.y_formats[0],label:X.leftYAxisLabel},{show:X["y-axis"],min:X.grid.rightMin,max:X.grid.rightMax,logBase:X.grid.rightLogBase,format:X.y_formats[1],label:X.rightYAxisLabel}],X.xaxis={show:X["x-axis"]},delete X.grid.leftMin,delete X.grid.leftMax,delete X.grid.leftLogBase,delete X.grid.rightMin,delete X.grid.rightMax,delete X.grid.rightLogBase,delete X.y_formats,delete X.leftYAxisLabel,delete X.rightYAxisLabel,delete X["y-axis"],delete X["x-axis"]),X)),G<13&&q.push(X=>{if(X.type!=="graph"||!X.grid)return X;X.thresholds||(X.thresholds=[]);const de={},Be={};return X.grid.threshold1!==null&&(de.value=X.grid.threshold1,X.grid.thresholdLine?(de.line=!0,de.lineColor=X.grid.threshold1Color,de.colorMode="custom"):(de.fill=!0,de.fillColor=X.grid.threshold1Color,de.colorMode="custom")),X.grid.threshold2!==null&&(Be.value=X.grid.threshold2,X.grid.thresholdLine?(Be.line=!0,Be.lineColor=X.grid.threshold2Color,Be.colorMode="custom"):(Be.fill=!0,Be.fillColor=X.grid.threshold2Color,Be.colorMode="custom")),(0,t.isNumber)(de.value)&&((0,t.isNumber)(Be.value)?de.value>Be.value?(de.op=Be.op="lt",X.thresholds.push(de),X.thresholds.push(Be)):(de.op=Be.op="gt",X.thresholds.push(de),X.thresholds.push(Be)):(de.op="gt",X.thresholds.push(de))),delete X.grid.threshold1,delete X.grid.threshold1Color,delete X.grid.threshold2,delete X.grid.threshold2Color,delete X.grid.thresholdLine,X}),G<14&&(this.dashboard.graphTooltip=le.sharedCrosshair?1:0),G<16&&this.upgradeToGridLayout(le),G<17&&q.push(X=>{if(X.minSpan){const de=i.cz/X.minSpan,Be=u(i.cz);X.maxPerRow=Be[(0,t.findIndex)(Be,ke=>ke>de)-1]}return delete X.minSpan,X}),G<18&&q.push(X=>(X["options-gauge"]&&(X.options=X["options-gauge"],X.options.valueOptions={unit:X.options.unit,stat:X.options.stat,decimals:X.options.decimals,prefix:X.options.prefix,suffix:X.options.suffix},X.options.thresholds&&X.options.thresholds.reverse(),delete X.options.options,delete X.options.unit,delete X.options.stat,delete X.options.decimals,delete X.options.prefix,delete X.options.suffix,delete X["options-gauge"]),X)),G<19&&q.push(X=>(X.links&&(0,t.isArray)(X.links)&&(X.links=X.links.map(D)),X)),G<20){const X=de=>({...de,url:Y(de.url)});q.push(de=>(de.options&&de.options.dataLinks&&(0,t.isArray)(de.options.dataLinks)&&(de.options.dataLinks=de.options.dataLinks.map(X)),de.options&&de.options.fieldOptions&&de.options.fieldOptions.defaults&&(de.options.fieldOptions.defaults.links&&(0,t.isArray)(de.options.fieldOptions.defaults.links)&&(de.options.fieldOptions.defaults.links=de.options.fieldOptions.defaults.links.map(X)),de.options.fieldOptions.defaults.title&&(de.options.fieldOptions.defaults.title=Y(de.options.fieldOptions.defaults.title))),de))}if(G<21){const X=de=>({...de,url:de.url.replace(/__series.labels/g,"__field.labels")});q.push(de=>(de.options&&de.options.dataLinks&&(0,t.isArray)(de.options.dataLinks)&&(de.options.dataLinks=de.options.dataLinks.map(X)),de.options&&de.options.fieldOptions&&de.options.fieldOptions.defaults&&de.options.fieldOptions.defaults.links&&(0,t.isArray)(de.options.fieldOptions.defaults.links)&&(de.options.fieldOptions.defaults.links=de.options.fieldOptions.defaults.links.map(X)),de))}if(G<22&&q.push(X=>(X.type!=="table"||(0,t.each)(X.styles,de=>{de.align="auto"}),X)),G<23)for(const X of this.dashboard.templating.list){if(!(0,C.U4)(X))continue;const{multi:de,current:Be}=X;X.current=(0,b.x)(Be,de)}if(G<24&&q.push(X=>{const de=X.type==="table";if(de&&!X.styles)return X;const Be=X.table==="table2";return!de||Be||(X.type=de?"table-old":"table"),X}),G<25,G<26&&q.push(X=>(X.type==="text2"&&(X.type="text",delete X.options.angular),X)),G<27&&(this.dashboard.templating.list=this.dashboard.templating.list.map(X=>{if(!(0,C.VC)(X))return X;const de={...X};return de.current={selected:!0,text:de.query??"",value:de.query??""},de.options=[de.current],de.hide===A.bU.dontHide||de.hide===A.bU.hideLabel?{...de,type:"textbox"}:de})),G<28){q.push(X=>X.type==="singlestat"?j(X):X);for(const X of this.dashboard.templating.list)X.tags&&delete X.tags,X.tagsQuery&&delete X.tagsQuery,X.tagValuesQuery&&delete X.tagValuesQuery,X.useTags&&delete X.useTags}if(G<29)for(const X of this.dashboard.templating.list)X.type==="query"&&(X.refresh!==1&&X.refresh!==2&&(X.refresh=1),X.options?.length&&(X.options=[]));if(G<30&&(q.push(Z),q.push(Ee)),G<31&&q.push(X=>{if(X.transformations){for(const de of X.transformations)if(de.id===a.r.id)return z(X,a.r.id,{id:m.R.id,options:{}})}return X}),G<32,G<33&&q.push(X=>{if(X.datasource=K(X.datasource,{returnDefaultAsNull:!0}),!X.targets)return X;for(const de of X.targets){const Be=K(de.datasource,{returnDefaultAsNull:!0});Be!=null&&(de.datasource=Be)}return X}),G<34&&(q.push(X=>(this.migrateCloudWatchQueries(X),X)),this.migrateCloudWatchAnnotationQuery()),G<35&&q.push(me),G<36){for(const de of this.dashboard.annotations.list)de.datasource=K(de.datasource,{returnDefaultAsNull:!1});const X=(0,d.F)().getInstanceSettings(null);if(X){for(const de of this.dashboard.templating.list)de.type==="query"&&de.datasource===null&&(de.datasource=(0,c.iU)(X));q.push(de=>{if(de.targets){let Be=!1;de.datasource==null&&de.targets.length>0&&(de.datasource=(0,c.iU)(X),Be=!0);for(const ke of de.targets)(ke.datasource==null||ke.datasource.uid==null)&&(de.datasource?.uid!==S.D?ke.datasource={...de.datasource}:ke.datasource=K(ke.datasource,{returnDefaultAsNull:!1})),Be&&ke.datasource?.uid!=="__expr__"&&(de.datasource=ke.datasource)}return de})}}if(G<37&&q.push(X=>(X.options?.legend&&(X.options.legend.displayMode==="hidden"||X.options.legend.showLegend===!1)?(X.options.legend.displayMode="list",X.options.legend.showLegend=!1):X.options?.legend&&(X.options.legend={...X.options?.legend,showLegend:!0}),X)),G<38&&q.push(X=>{if(X.type==="table"&&X.fieldConfig!==void 0){const de=X.fieldConfig.defaults?.custom?.displayMode;de!==void 0&&(X.fieldConfig.defaults.custom.cellOptions=(0,h.q7)(de),delete X.fieldConfig.defaults.custom.displayMode);for(let Be=0;Be<X.fieldConfig.overrides.length;Be++)for(let ke=0;ke<X.fieldConfig.overrides[Be].properties.length;ke++){let He=X.fieldConfig.overrides[Be].properties[ke].value;X.fieldConfig.overrides[Be].properties[ke].id==="custom.displayMode"&&(X.fieldConfig.overrides[Be].properties[ke].id="custom.cellOptions",X.fieldConfig.overrides[Be].properties[ke].value=(0,h.q7)(He))}}return X}),q.length!==0)for(ee=0;ee<this.dashboard.panels.length;ee++)for(se=0;se<q.length;se++){this.dashboard.panels[ee]=q[se].call(this,this.dashboard.panels[ee]);const X=this.dashboard.panels[ee].panels;if(X)for(Q=0;Q<X.length;Q++)X[Q]=q[se].call(this,X[Q])}}}migrateCloudWatchQueries(le){for(const pe of le.targets||[])if(ae(pe)&&(R(pe),pe.hasOwnProperty("statistics"))){const ee=B(pe,[...le.targets]);for(const se of ee)le.targets.push(se)}}migrateCloudWatchAnnotationQuery(){for(const le of this.dashboard.annotations.list)if(J(le)){const pe=w(le);for(const ee of pe)this.dashboard.annotations.list.push(ee)}}upgradeToGridLayout(le){let pe=0;const ee=i.cz/12;let Q=(0,t.max)((0,t.flattenDeep)((0,t.map)(le.rows,q=>(0,t.map)(q.panels,"id"))))+1;if(!le.rows)return;const G=(0,t.some)(le.rows,q=>q.collapse||q.showTitle||q.repeat);for(const q of le.rows){if(q.repeatIteration)continue;const X=q.height||i.b0,de=N(X),Be={};let ke;G&&(Be.id=Q,Be.type="row",Be.title=q.title,Be.collapsed=q.collapse,Be.repeat=q.repeat,Be.panels=[],Be.gridPos={x:0,y:pe,w:i.cz,h:de},ke=new U.r(Be),Q++,pe++);const He=new F(de,i.cz,pe);for(const ue of q.panels){ue.span=ue.span||i.kh,ue.minSpan&&(ue.minSpan=Math.min(i.cz,i.cz/12*ue.minSpan));const Oe=Math.floor(ue.span)*ee,Fe=ue.height?N(ue.height):de,Ie=He.getPanelPosition(Fe,Oe);pe=He.yPos,ue.gridPos={x:Ie.x,y:pe+Ie.y,w:Oe,h:Fe},He.addPanel(ue.gridPos),delete ue.span,ke&&Be.collapsed?ke.panels?.push(ue):this.dashboard.panels.push(new U.r(ue))}ke&&this.dashboard.panels.push(ke),ke&&Be.collapsed||(pe+=de)}}}function N(re){return(0,t.isString)(re)&&(re=parseInt(re.replace("px",""),10)),re<i.AV&&(re=i.AV),Math.ceil(re/(i.K3+i.hD))}class F{constructor(le,pe=i.cz,ee=0){this.area=new Array(pe).fill(0),this.yPos=ee,this.height=le}reset(){this.area.fill(0)}addPanel(le){for(let pe=le.x;pe<le.x+le.w;pe++)(!this.area[pe]||le.y+le.h-this.yPos>this.area[pe])&&(this.area[pe]=le.y+le.h-this.yPos);return this.area}getPanelPosition(le,pe,ee=!1){let se,Q,G;for(let q=this.area.length-1;q>=0&&this.height-this.area[q]>0;q--)if(Q===void 0)Q=q;else if(q<this.area.length-1&&this.area[q]<=this.area[q+1])se=q;else break;if(se!==void 0&&Q!==void 0&&Q-se>=pe-1){const q=(0,t.max)(this.area.slice(se));G={x:se,y:q}}else return ee?null:(this.yPos+=this.height,this.reset(),this.getPanelPosition(le,pe,!0));return G}}function D(re){let le=re.url;return!le&&re.dashboard&&(le=`dashboard/db/${P.Z.slugifyForUrl(re.dashboard)}`),!le&&re.dashUri&&(le=`dashboard/${re.dashUri}`),le||(le="/"),re.keepTime&&(le=s.Cj.appendQueryToUrl(le,`$${r.W.keepTime}`)),re.includeVars&&(le=s.Cj.appendQueryToUrl(le,`$${r.W.includeVars}`)),re.params&&(le=s.Cj.appendQueryToUrl(le,re.params)),{url:le,title:re.title,targetBlank:re.targetBlank}}function Y(re){const le=/(__series_name)|(\$__series_name)|(__value_time)|(__field_name)|(\$__field_name)/g;return re.replace(le,(pe,ee,se,Q,G,q)=>ee?"__series.name":se?"${__series.name}":Q?"__value.time":G?"__field.name":q?"${__field.name}":pe)}function j(re){if(v.vc.panels["grafana-singlestat-panel"])return re.type="grafana-singlestat-panel",re;let le=!1;return re.changePlugin||(le=!0,re=new U.r(re)),re.plugin={angularPanelCtrl:{}},re.gauge?.show?(M.plugin.meta=v.vc.panels.gauge,re.changePlugin(M.plugin)):(x.plugin.meta=v.vc.panels.stat,re.changePlugin(x.plugin)),le?re.getSaveModel():re}function K(re,le){if(le.returnDefaultAsNull&&(re==null||re==="default"))return null;if((0,c.cv)(re))return re;const pe=(0,d.F)().getInstanceSettings(re);return pe?(0,c.iU)(pe):{uid:re}}function z(re,le,pe){if(re.transformations){const ee=[];for(const se of re.transformations)ee.push(se),se.id===le&&ee.push({...pe});re.transformations=ee}return re}function Z(re){const le=re.fieldConfig;if(!le)return re;if(le.defaults&&le.defaults.mappings&&(le.defaults.mappings=oe(le.defaults.mappings,le.defaults.thresholds)),Array.isArray(le.overrides))for(const pe of le.overrides)for(const ee of pe.properties)ee.id==="mappings"&&(ee.value=oe(ee.value));return re}function ae(re){return re.hasOwnProperty("dimensions")&&re.hasOwnProperty("namespace")&&re.hasOwnProperty("region")&&re.hasOwnProperty("metricName")}function J(re){return re.hasOwnProperty("dimensions")&&re.hasOwnProperty("namespace")&&re.hasOwnProperty("region")&&re.hasOwnProperty("prefixMatching")&&re.hasOwnProperty("statistics")}function oe(re,le){if(!re)return;const pe={type:g.H.ValueToText,options:{}},ee=[];for(const se of re){if(se.type&&se.options){se.type===g.H.ValueToText?pe.options={...pe.options,...se.options}:ee.push(se);continue}let Q;const G=parseFloat(se.text);if(le&&!isNaN(G)){const q=(0,f.m1)(G,le.steps);q&&q.color&&(Q=q.color)}switch(se.type){case 1:se.value!=null&&(se.value==="null"?ee.push({type:g.H.SpecialValue,options:{match:g.e.Null,result:{text:se.text,color:Q}}}):pe.options[String(se.value)]={text:se.text,color:Q});break;case 2:ee.push({type:g.H.RangeToText,options:{from:+se.from,to:+se.to,result:{text:se.text,color:Q}}});break}}return Object.keys(pe.options).length>0&&ee.unshift(pe),ee}function Ee(re){return(re.type==="timeseries"||re.type==="xychart")&&re.options.tooltipOptions&&(re.options={...re.options,tooltip:re.options.tooltipOptions},delete re.options.tooltipOptions),re}function me(re){return re.type==="timeseries"&&re.fieldConfig?.defaults.custom?.axisPlacement===p.LB.Hidden&&(re.fieldConfig={...re.fieldConfig,overrides:[...re.fieldConfig.overrides,{matcher:{id:o.mi.byType,options:l.fS.time},properties:[{id:"custom.axisPlacement",value:p.LB.Auto}]}]}),re}},82302:(H,T,e)=>{"use strict";e.d(T,{f:()=>A});var t=e(82897),n=e(95484),c=e(85081),s=e(38849),r=e(46519),g=e(82378),f=e(16514),o=e(84952),l=e(82002);function a(I){return(0,t.isArray)(I)?I.map(a):(0,t.isPlainObject)(I)?Object.keys(I).sort().reduce((N,F)=>{const D=I[F];return D!=null&&(N[F]=a(D)),N},{}):I}var m=e(22323),d=e(85803),p=e(87095),h=e(81168),y=e(45984),v=e(77582),i=e(3153),u=e(10672),P=e(92624),E=e(19349),C=e(86899);const b=new Set(["gridPos","title","description","transparent"]);function S(I,N){const F=[],D={changed:!1,actions:{add:[],remove:[],replace:[],update:[],noop:[]},panels:F};let Y=0;const j=new Map;for(let K of N){let{id:z}=K;z||(Y||(Y=x([I,N])),z=Y++,K={...K,id:z}),j.set(z,K)}for(const K of I){const z=j.get(K.id);if(!z){D.changed=!0,D.actions.remove.push(K.id),K.destroy();continue}if(j.delete(K.id),z===K){F.push(K),D.actions.noop.push(K.id);continue}if(K.type===z.type){const ae=K.getSaveModel();let J=!0,oe=!1;for(const[Ee,me]of Object.entries(z))if(!(0,t.isEqualWith)(me,ae[Ee],M))if(D.changed=!0,J=!1,b.has(Ee))K[Ee]=me,oe=!0;else{oe=!1;break}if(J){F.push(K),D.actions.noop.push(K.id);continue}if(oe){F.push(K),D.actions.update.push(K.id);continue}}K.destroy();const Z=new C.r(z);Z.key=`${Z.id}-update-${Date.now()}`,F.push(Z),D.changed=!0,D.actions.replace.push(K.id)}for(const K of j.values())F.push(new C.r(K)),D.changed=!0,D.actions.add.push(K.id);return D}function M(I,N){if(I==null&&(N===1/0||N===-1/0||N==null)||N==null&&(I===1/0||I===-1/0||I==null))return!0}function x(I){let N=0;for(const F of I)for(const D of F)D.id>N&&(N=D.id);return N+1}var O=e(7592),L=e(96161);function B(I,N){return I.repeatDirection===o.yM?!1:N.gridPos.x>=I.gridPos.x+I.gridPos.w&&N.gridPos.y===I.gridPos.y}function w(I){for(const N of I)if(delete N.scopedVars,N.panels?.length)for(const F of N.panels)delete F.scopedVars}const R=class{constructor(I,N,F=p.gt){this.getVariablesFromState=F,this.events=new c.F,this.id=I.id||null,this.uid=I.uid||null,this.revision=I.revision||1,this.title=I.title??"No Title",this.description=I.description,this.tags=I.tags??[],this.style=I.style??"dark",this.timezone=I.timezone??"",this.weekStart=I.weekStart??"",this.editable=I.editable!==!1,this.graphTooltip=I.graphTooltip||0,this.time=I.time??{from:"now-6h",to:"now"},this.timepicker=I.timepicker??{},this.liveNow=Boolean(I.liveNow),this.templating=this.ensureListExist(I.templating),this.annotations=this.ensureListExist(I.annotations),this.refresh=I.refresh||"",this.snapshot=I.snapshot,this.schemaVersion=I.schemaVersion??0,this.fiscalYearStartMonth=I.fiscalYearStartMonth??0,this.version=I.version??0,this.links=I.links??[],this.gnetId=I.gnetId||null,this.panels=(0,t.map)(I.panels??[],D=>new L.r(D)),this.ensurePanelsHaveIds(),this.formatDate=this.formatDate.bind(this),this.resetOriginalVariables(!0),this.resetOriginalTime(),this.initMeta(N),this.updateSchema(I),this.addBuiltInAnnotationQuery(),this.sortPanelsByGridPos(),this.panelsAffectedByVariableChange=null,this.appEventsSubscription=new n.w0,this.lastRefresh=Date.now(),this.appEventsSubscription.add(v.h$.subscribe(u.x9,this.variablesChangedHandler.bind(this))),this.appEventsSubscription.add(v.h$.subscribe(u.eq,this.variablesTimeRangeProcessDoneHandler.bind(this))),this.appEventsSubscription.add(v.h$.subscribe(u.Wy,this.variablesChangedInUrlHandler.bind(this)))}addBuiltInAnnotationQuery(){this.annotations.list.some(N=>N.builtIn===1)||this.annotations.list.unshift({datasource:{uid:"-- Grafana --",type:"grafana"},name:"Annotations & Alerts",type:"dashboard",iconColor:f.Jx,enable:!0,hide:!0,builtIn:1})}initMeta(I){I=I||{},I.canShare=I.canShare!==!1,I.canSave=I.canSave!==!1,I.canStar=I.canStar!==!1,I.canEdit=I.canEdit!==!1,I.canDelete=I.canDelete!==!1,I.showSettings=I.canEdit,I.canMakeEditable=I.canSave&&!this.editable,I.hasUnsavedFolderChange=!1,this.editable||(I.canEdit=!1,I.canDelete=!1,I.canSave=!1),this.meta=I}getSaveModelClone(I){const N=(0,t.defaults)(I||{},{saveVariables:!0,saveTimerange:!0});let F={};for(const D in this)R.nonPersistedProperties[D]||!this.hasOwnProperty(D)||(F[D]=(0,t.cloneDeep)(this[D]));return this.updateTemplatingSaveModelClone(F,N),N.saveTimerange||(F.time=this.originalTime),F.panels=this.getPanelSaveModels(),F=a(F),F.getVariables=()=>F.templating.list,F}updatePanels(I){const N=S(this.panels,I??[]);return N.changed&&(this.panels=N.panels??[],this.sortPanelsByGridPos(),this.events.publish(new y._B)),N}getPanelSaveModels(){return this.panels.filter(I=>this.isSnapshotTruthy()||!(I.type==="add-panel"||I.repeatPanelId||I.repeatedByRow)).map(I=>{if(I.libraryPanel){const{id:N,title:F,libraryPanel:D,gridPos:Y}=I;return{id:N,title:F,gridPos:Y,libraryPanel:{uid:D.uid,name:D.name}}}return this.panelInEdit&&this.panelInEdit.id===I.id?this.panelInEdit.getSaveModel():I.getSaveModel()}).map(I=>(this.isSnapshotTruthy()||(delete I.scopedVars,I.type==="row"&&I.panels&&I.panels.length>0&&(I.panels=I.panels.filter(N=>!N.repeatPanelId).map(N=>(delete N.scopedVars,N)))),I))}updateTemplatingSaveModelClone(I,N){const F=this.originalTemplating,D=this.getVariablesFromState(this.uid);if(I.templating={list:D.map(Y=>m.z.get(Y.type).getSaveModel(Y,N.saveVariables))},!N.saveVariables)for(const Y of I.templating.list){const j=F.find(({name:K,type:z})=>K===Y.name&&z===Y.type);j&&(Y.type==="adhoc"?Y.filters=j.filters:Y.current=j.current)}}timeRangeUpdated(I){this.events.publish(new g.md(I)),(0,i.WI)((0,d.DU)(this.uid,I))}startRefresh(I={refreshAll:!0,panelIds:[]}){if(this.events.publish(new g.U5),this.lastRefresh=Date.now(),this.panelInEdit&&(I.refreshAll||I.panelIds.includes(this.panelInEdit.id))){this.panelInEdit.refresh();return}for(const N of this.panels)!this.otherPanelInFullscreen(N)&&(I.refreshAll||I.panelIds.includes(N.id))&&N.refresh()}render(){this.events.publish(new y._z);for(const I of this.panels)I.render()}panelInitialized(I){const N=I.getQueryRunner().getLastResult();!this.otherPanelInFullscreen(I)&&!N&&I.refresh()}otherPanelInFullscreen(I){return(this.panelInEdit||this.panelInView)&&!(I.isViewing||I.isEditing)}initEditPanel(I){return(0,E.$t)().pauseAutoRefresh(),this.panelInEdit=I.getEditClone(),this.panelInEdit}initViewPanel(I){this.panelInView=I,I.setIsViewing(!0)}exitViewPanel(I){this.panelInView=void 0,I.setIsViewing(!1),this.refreshIfPanelsAffectedByVariableChange()}exitPanelEditor(){this.panelInEdit.destroy(),this.panelInEdit=void 0,(0,E.$t)().resumeAutoRefresh(),this.refreshIfPanelsAffectedByVariableChange()}refreshIfPanelsAffectedByVariableChange(){this.panelsAffectedByVariableChange&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange,refreshAll:!1}),this.panelsAffectedByVariableChange=null)}ensurePanelsHaveIds(){let I=this.getNextPanelId();for(const N of this.panelIterator())N.id??=I++}ensureListExist(I={}){return I.list??=[],I}getNextPanelId(){let I=0;for(const N of this.panelIterator())N.id>I&&(I=N.id);return I+1}*panelIterator(){for(const I of this.panels){yield I;const N=I.panels??[];for(const F of N)yield F}}forEachPanel(I){for(let N=0;N<this.panels.length;N++)I(this.panels[N],N)}getPanelById(I){return this.panelInEdit&&this.panelInEdit.id===I?this.panelInEdit:this.panels.find(N=>N.id===I)??null}canEditPanel(I){return Boolean(this.meta.canEdit&&I&&!I.repeatPanelId&&I.type!=="row")}canEditPanelById(I){return this.canEditPanel(this.getPanelById(I))}addPanel(I){I.id=this.getNextPanelId(),this.panels.unshift(new L.r(I)),this.sortPanelsByGridPos(),this.events.publish(new y._B)}updateMeta(I){this.meta={...this.meta,...I},this.events.publish(new y.hS)}makeEditable(){this.editable=!0,this.updateMeta({canMakeEditable:!1,canEdit:!0,canSave:!0})}sortPanelsByGridPos(){this.panels.sort((I,N)=>I.gridPos.y===N.gridPos.y?I.gridPos.x-N.gridPos.x:I.gridPos.y-N.gridPos.y)}clearUnsavedChanges(){for(const I of this.panels)I.configRev=0;this.panelInEdit&&(this.panelInEdit.hasSavedPanelEditChange=this.panelInEdit.configRev>0,this.panelInEdit.configRev=0)}hasUnsavedChanges(){const I=this.panels.find(N=>N.hasChanged);return Boolean(I)}cleanUpRepeats(){if(this.isSnapshotTruthy()||!this.hasVariables())return;w(this.panels);const I=this.panels.filter(N=>(!N.repeat||N.repeatedByRow)&&N.repeatPanelId);(0,t.pull)(this.panels,...I),I.map(N=>N.destroy()),this.sortPanelsByGridPos()}processRepeats(){if(!(this.isSnapshotTruthy()||!this.hasVariables())){this.cleanUpRepeats();for(let I=0;I<this.panels.length;I++){const N=this.panels[I];N.repeat&&this.repeatPanel(N,I)}this.sortPanelsByGridPos(),this.events.publish(new y._B)}}cleanUpRowRepeats(I){const N=I.map(D=>D.id),F=I.filter(D=>!D.repeat&&D.repeatPanelId&&N.includes(D.repeatPanelId));(0,t.pull)(I,...F),(0,t.pull)(this.panels,...F)}processRowRepeats(I){if(this.isSnapshotTruthy()||!this.hasVariables())return;let N=I.panels??[];if(!I.collapsed){const F=this.panels.findIndex(D=>D.id===I.id);N=this.getRowPanels(F)}this.cleanUpRowRepeats(N);for(const F of N)if(F.repeat){const D=this.panels.findIndex(Y=>Y.id===F.id);this.repeatPanel(F,D)}}getPanelRepeatClone(I,N,F){if(N===0)return I;const D=I.getSaveModel();D.id=this.getNextPanelId();const Y=new L.r(D);return this.panels.splice(F+N,0,Y),Y.repeatPanelId=I.id,Y.repeat=void 0,this.panelInView?.id===Y.id&&(Y.setIsViewing(!0),this.panelInView=Y),Y}getRowRepeatClone(I,N,F){if(N===0){if(!I.collapsed){const K=this.getRowPanels(F);I.panels=K}return I}const D=new L.r(I.getSaveModel());let Y,j;return I.collapsed?(Y=(0,t.cloneDeep)(I.panels)??[],D.panels=Y,j=F+N):(Y=this.getRowPanels(F),D.panels=Y.map(K=>K.getSaveModel()),j=F+(Y.length+1)*N),this.panels.splice(j,0,D),this.updateRepeatedPanelIds(D),D}repeatPanel(I,N){const F=this.getPanelRepeatVariable(I);if(!F)return;if(I.type==="row"){this.repeatRow(I,N,F);return}const D=this.getSelectedVariableOptions(F),Y=I.maxPerRow||4;let j=0,K=I.gridPos.y;for(let Z=0;Z<D.length;Z++){const ae=D[Z];let J;J=this.getPanelRepeatClone(I,Z,N),J.scopedVars??={},J.scopedVars[F.name]=ae,I.repeatDirection===o.OA?(Z>0&&(K+=J.gridPos.h),J.gridPos.y=K):(J.gridPos.w=Math.max(o.cz/D.length,o.cz/Y),J.gridPos.x=j,J.gridPos.y=K,j+=J.gridPos.w,j+J.gridPos.w>o.cz&&(j=0,K+=J.gridPos.h))}const z=K-I.gridPos.y;if(z>0){const Z=N+D.length;for(const ae of this.panels.slice(Z))B(I,ae)||(ae.gridPos.y+=z)}}repeatRow(I,N,F){const D=this.getSelectedVariableOptions(F);let Y=I.gridPos.y;function j(K,z){K.scopedVars??={},K.scopedVars[F.name]=z}for(let K=0;K<D.length;K++){const z=D[K],Z=this.getRowRepeatClone(I,K,N);j(Z,z);const ae=this.getRowHeight(Z),J=Z.panels||[];let oe;if(I.collapsed){for(const Ee of J)j(Ee,z),K>0&&this.updateRepeatedPanelIds(Ee,!0);Z.gridPos.y+=K,Y+=K,oe=N+K+1}else{const Ee=N+(J.length+1)*K+1;J.forEach((me,re)=>{if(j(me,z),K>0){const le=new L.r(me);this.updateRepeatedPanelIds(le,!0),le.gridPos.y+=ae*K,this.panels.splice(Ee+re,0,le)}}),Z.panels=[],Z.gridPos.y+=ae*K,Y+=ae,oe=Ee+J.length}if(D.length>1)for(const Ee of this.panels.slice(oe))Ee.gridPos.y+=Y}}updateRepeatedPanelIds(I,N){return I.repeatPanelId=I.id,I.id=this.getNextPanelId(),N?I.repeatedByRow=!0:I.repeat=void 0,I}getSelectedVariableOptions(I){let N;return(0,P.HY)(I)?N=I.options.slice(1,I.options.length):N=(0,t.filter)(I.options,{selected:!0}),N}getRowHeight(I){if(!I.panels||I.panels.length===0)return 0;const N=I.gridPos.y,F=(0,t.map)(I.panels,"gridPos"),D=(0,t.maxBy)(F,Y=>Y.y+Y.h);return D.y+D.h-N}removePanel(I){this.panels=this.panels.filter(N=>N!==I),this.events.publish(new y._B)}removeRow(I,N){(!N&&I.collapsed||N&&!I.collapsed)&&this.toggleRow(I),this.removePanel(I)}expandRows(){const I=this.panels.filter(N=>N.type==="row"&&N.collapsed);for(const N of I)this.toggleRow(N)}collapseRows(){const I=this.panels.filter(N=>N.type==="row"&&!N.collapsed);for(const N of I)this.toggleRow(N)}isSubMenuVisible(){return this.links.length>0||this.getVariables().some(I=>I.hide!==2)||this.annotations.list.some(I=>!I.hide)}getPanelInfoById(I){const N=this.panels.findIndex(F=>F.id===I);return N>=0?{panel:this.panels[N],index:N}:null}duplicatePanel(I){const N=I.getSaveModel();return N.id=this.getNextPanelId(),delete N.repeat,delete N.repeatIteration,delete N.repeatPanelId,delete N.scopedVars,N.alert&&delete N.thresholds,delete N.alert,I.gridPos.x+I.gridPos.w*2<=o.cz?N.gridPos.x+=I.gridPos.w:N.gridPos.y+=I.gridPos.h,this.addPanel(N),N}formatDate(I,N){return(0,s.dq)(I,{format:N,timeZone:this.getTimezone()})}destroy(){this.appEventsSubscription.unsubscribe(),this.events.removeAllListeners();for(const I of this.panels)I.destroy()}toggleRow(I){const N=(0,t.indexOf)(this.panels,I);if(!I.collapsed){const Y=this.getRowPanels(N);(0,t.pull)(this.panels,...Y),I.panels=Y.map(j=>j.getSaveModel()),I.collapsed=!0,Y.some(j=>j.hasChanged)&&I.configRev++,this.events.publish(new y._B);return}I.collapsed=!1;const F=I.panels??[],D=F.some(Y=>Y.repeat);if(F.length>0){const j=(F[0].gridPos.y??I.gridPos.y)-(I.gridPos.y+I.gridPos.h);let K=N+1,z=I.gridPos.y;for(const ae of F)ae.gridPos.y??(ae.gridPos.y=I.gridPos.y),ae.gridPos.y-=j,this.panels.splice(K,0,new L.r(ae)),K+=1,z=Math.max(z,ae.gridPos.y+ae.gridPos.h);const Z=z-I.gridPos.y-1;for(const ae of this.panels.slice(K))ae.gridPos.y+=Z;I.panels=[],D&&this.processRowRepeats(I)}this.sortPanelsByGridPos(),this.events.publish(new y._B)}getRowPanels(I){const N=this.panels.slice(I+1),F=N.findIndex(Y=>Y.type==="row");return N.slice(0,F>=0?F:this.panels.length)}on(I,N){console.log("DashboardModel.on is deprecated use events.subscribe"),this.events.on(I,N)}off(I,N){console.log("DashboardModel.off is deprecated"),this.events.off(I,N)}cycleGraphTooltip(){this.graphTooltip=(this.graphTooltip+1)%3}sharedTooltipModeEnabled(){return this.graphTooltip>0}sharedCrosshairModeOnly(){return this.graphTooltip===1}getRelativeTime(I){return(0,s.E8)(I,{timeZone:this.getTimezone()})}isSnapshot(){return this.snapshot!==void 0}getTimezone(){return this.timezone?this.timezone:l.Vt?.user?.timezone}updateSchema(I){new O.o(this).updateSchema(I)}resetOriginalTime(){this.originalTime=(0,t.cloneDeep)(this.time)}hasTimeChanged(){const{time:I,originalTime:N}=this;return!((0,t.isEqual)(I,N)||(0,t.isEqual)((0,r.CQ)(I?.from),(0,r.CQ)(N?.from))&&(0,t.isEqual)((0,r.CQ)(I?.to),(0,r.CQ)(N?.to)))}resetOriginalVariables(I=!1){if(I){this.originalTemplating=this.cloneVariablesFrom(this.templating.list);return}this.originalTemplating=this.cloneVariablesFrom(this.getVariablesFromState(this.uid))}hasVariableValuesChanged(){return this.hasVariablesChanged(this.originalTemplating,this.getVariablesFromState(this.uid))}autoFitPanels(I,N){const F=Math.max(...this.panels.map(ae=>ae.gridPos.h+ae.gridPos.y)),D=55,Y=20,j=50;let K=I-D-Y;this.meta.submenuEnabled&&!N&&(K-=j),N&&N!==h.KioskMode.TV&&(K+=D);const z=Math.floor(K/(o.K3+o.hD)),Z=F/z;for(const ae of this.panels)ae.gridPos.y=Math.round(ae.gridPos.y/Z)||1,ae.gridPos.h=Math.round(ae.gridPos.h/Z)||1}templateVariableValueUpdated(){this.processRepeats(),this.events.emit(h.CoreEvents.nq)}getPanelByUrlId(I){const N=parseInt(I??"0",10),F=this.panels.filter(D=>D.collapsed);for(const D of F)D.panels?.some(j=>j.id===N)&&this.toggleRow(D);return this.getPanelById(N)}toggleLegendsForAll(){const I=this.panels.filter(U),N=I.filter(Y=>Y.legend.show).length,F=I.length-N,D=N>=F;for(const Y of I)Y.legend.show=!D,Y.render()}getVariables(){return this.getVariablesFromState(this.uid)}canEditAnnotations(I){let N=!0;return l.Vt.accessControlEnabled()&&(I?N=!!this.meta.annotationsPermissions?.dashboard.canEdit:N=!!this.meta.annotationsPermissions?.organization.canEdit),this.canEditDashboard()&&N}canDeleteAnnotations(I){let N=!0;return l.Vt.accessControlEnabled()&&(I?N=!!this.meta.annotationsPermissions?.dashboard.canDelete:N=!!this.meta.annotationsPermissions?.organization.canDelete),N&&this.canEditDashboard()}canAddAnnotations(){return this.annotations.list.find(N=>N.builtIn===1)?.enable===!1||!this.canEditDashboard()?!1:!l.Vt.accessControlEnabled()||Boolean(this.meta.annotationsPermissions?.dashboard.canAdd)}canEditDashboard(){return Boolean(this.meta.canEdit||this.meta.canMakeEditable)}shouldUpdateDashboardPanelFromJSON(I,N){!(0,t.isEqual)(I?.gridPos,N?.gridPos)&&this.events.publish(new y._B)}getDefaultTime(){return this.originalTime}getPanelRepeatVariable(I){return this.getVariablesFromState(this.uid).find(N=>N.name===I.repeat)}isSnapshotTruthy(){return this.snapshot}hasVariables(){return this.getVariablesFromState(this.uid).length>0}hasVariablesChanged(I,N){if(I.length!==N.length)return!1;const F=N.map(D=>({name:D.name,type:D.type,current:(0,t.cloneDeep)(D.current),filters:(0,t.cloneDeep)(D.filters)}));return!(0,t.isEqual)(F,I)}cloneVariablesFrom(I){return I.map(N=>({name:N.name,type:N.type,current:(0,t.cloneDeep)(N.current),filters:(0,t.cloneDeep)(N.filters)}))}variablesTimeRangeProcessDoneHandler(I){const N=I.payload.variableIds.length>0;this.variablesChangedHandler(new u.x9({panelIds:[],refreshAll:!0}),N)}variablesChangedHandler(I,N=!0){if(N&&this.processRepeats(),I.payload.refreshAll||(0,E.$t)().isRefreshOutsideThreshold(this.lastRefresh)){this.startRefresh({refreshAll:!0,panelIds:[]});return}(this.panelInEdit||this.panelInView)&&(this.panelsAffectedByVariableChange=I.payload.panelIds.filter(F=>F!==(this.panelInEdit?.id??this.panelInView?.id))),this.startRefresh(I.payload)}variablesChangedInUrlHandler(I){this.templateVariableValueUpdated(),this.startRefresh(I.payload)}};let A=R;A.nonPersistedProperties={events:!0,meta:!0,panels:!0,templating:!0,originalTime:!0,originalTemplating:!0,originalLibraryPanels:!0,panelInEdit:!0,panelInView:!0,getVariablesFromState:!0,formatDate:!0,appEventsSubscription:!0,panelsAffectedByVariableChange:!0,lastRefresh:!0};function U(I){return Boolean(I.legend)}},96161:(H,T,e)=>{"use strict";e.d(T,{J:()=>S,r:()=>C});var t=e(82897),n=e.n(t),c=e(44288),s=e(85081),r=e(40400),g=e(2118),f=e(27677),o=e(89029),l=e(82378),a=e(40885),m=e(47694),d=e(55935),p=e(99822),h=e(45984),y=e(78800),v=e(69155),i=e(19349);const u={events:!0,isViewing:!0,isEditing:!0,isInView:!0,hasRefreshed:!0,cachedPluginOptions:!0,plugin:!0,queryRunner:!0,replaceVariables:!0,configRev:!0,hasSavedPanelEditChange:!0,getDisplayTitle:!0,dataSupport:!0,key:!0},P={id:!0,gridPos:!0,type:!0,title:!0,scopedVars:!0,repeat:!0,repeatPanelId:!0,repeatDirection:!0,repeatedByRow:!0,minSpan:!0,collapsed:!0,panels:!0,targets:!0,datasource:!0,timeFrom:!0,timeShift:!0,hideTimeOverride:!0,description:!0,links:!0,fullscreen:!0,isEditing:!0,hasRefreshed:!0,events:!0,cacheTimeout:!0,cachedPluginOptions:!0,transparent:!0,pluginVersion:!0,queryRunner:!0,transformations:!0,fieldConfig:!0,maxDataPoints:!0,interval:!0,replaceVariables:!0,libraryPanel:!0,getDisplayTitle:!0,configRev:!0,key:!0},E={gridPos:{x:0,y:0,h:3,w:6},targets:[{refId:"A"}],cachedPluginOptions:{},transparent:!1,options:{},fieldConfig:{defaults:{},overrides:[]},title:"",savedQueryLink:null};class C{constructor(x){this.datasource=null,this.savedQueryLink=null,this.isViewing=!1,this.isEditing=!1,this.isInView=!1,this.configRev=0,this.cachedPluginOptions={},this.events=new s.F,this.restoreModel(x),this.replaceVariables=this.replaceVariables.bind(this),this.key=(0,c.Z)()}restoreModel(x){for(const O in this)u[O]||!this.hasOwnProperty(O)||x[O]||typeof this[O]!="function"&&typeof this[O]!="symbol"&&delete this[O];for(const O in x)this[O]=x[O];switch(this.type){case"graph":(m.ZP.featureToggles?.autoMigrateGraphPanels||!m.ZP.angularSupportEnabled)&&(this.autoMigrateFrom=this.type,this.type="timeseries");break;case"table-old":m.ZP.angularSupportEnabled||(this.autoMigrateFrom=this.type,this.type="table");break;case"heatmap-new":this.autoMigrateFrom=this.type,this.type="heatmap";break}(0,t.defaultsDeep)(this,(0,t.cloneDeep)(E)),this.ensureQueryIds()}generateNewKey(){this.key=(0,c.Z)()}ensureQueryIds(){if(this.targets&&(0,t.isArray)(this.targets))for(const x of this.targets)x.refId||(x.refId=(0,p.Hs)(this.targets))}getOptions(){return this.options}get hasChanged(){return this.configRev>0}updateOptions(x){this.options=x,this.configRev++,this.events.publish(new h.Wj),this.render()}updateFieldConfig(x){this.fieldConfig=x,this.configRev++,this.events.publish(new h.Wj),this.resendLastResult(),this.render()}getSaveModel(){const x={};for(const O in this)u[O]||!this.hasOwnProperty(O)||(0,t.isEqual)(this[O],E[O])||(x[O]=(0,t.cloneDeep)(this[O]));return x}setIsViewing(x){this.isViewing=x}updateGridPos(x,O=!0){x.x===this.gridPos.x&&x.y===this.gridPos.y&&x.h===this.gridPos.h&&x.w===this.gridPos.w||(this.gridPos.x=x.x,this.gridPos.y=x.y,this.gridPos.w=x.w,this.gridPos.h=x.h,O&&this.configRev++,this.render())}runAllPanelQueries({dashboardId:x,dashboardUID:O,dashboardTimezone:L,timeData:B,width:w,publicDashboardAccessToken:R}){this.getQueryRunner().run({datasource:this.datasource,queries:this.targets,panelId:this.id,dashboardId:x,dashboardUID:O,publicDashboardAccessToken:R,timezone:L,timeRange:B.timeRange,timeInfo:B.timeInfo,maxDataPoints:this.maxDataPoints||Math.floor(w),minInterval:this.interval,scopedVars:this.scopedVars,cacheTimeout:this.cacheTimeout,transformations:this.transformations,app:this.isEditing?r.zj.PanelEditor:this.isViewing?r.zj.PanelViewer:r.zj.Dashboard})}refresh(){this.hasRefreshed=!0,this.events.publish(new l.U5)}render(){this.hasRefreshed?this.events.publish(new h._z):this.refresh()}getOptionsToRemember(){return Object.keys(this).reduce((x,O)=>u[O]||P[O]?x:{...x,[O]:this[O]},{})}restorePanelOptions(x){const O=this.cachedPluginOptions[x];O&&(Object.keys(O.properties).map(L=>{this[L]=O.properties[L]}),this.fieldConfig=(0,g.__)(this.fieldConfig,O.fieldConfig))}applyPluginOptionDefaults(x,O){const L=(0,g.d4)({plugin:x,currentOptions:this.options,currentFieldConfig:this.fieldConfig,isAfterPluginChange:O});this.fieldConfig=L.fieldConfig,this.options=L.options}pluginLoaded(x){this.plugin=x;const O=b(x);if(this.autoMigrateFrom){const L=this.autoMigrateFrom==="graph"||this.autoMigrateFrom==="table-old";this.callPanelTypeChangeHandler(x,this.autoMigrateFrom,this.getOptionsToRemember(),L),delete this.autoMigrateFrom}x.onPanelMigration&&O!==this.pluginVersion&&(this.options=x.onPanelMigration(this),this.pluginVersion=O),this.applyPluginOptionDefaults(x,!1),this.resendLastResult()}clearPropertiesBeforePluginChange(){for(const x of(0,t.keys)(this))P[x]||delete this[x];this.options={},this.fieldConfig={defaults:{...this.fieldConfig.defaults,custom:{}},overrides:(0,g.aS)(this.fieldConfig.overrides,g._k)}}callPanelTypeChangeHandler(x,O,L,B){if(x.onPanelTypeChanged){const w=B?{angular:L}:L.options;Object.assign(this.options,x.onPanelTypeChanged(this,O,w,this.fieldConfig))}}changePlugin(x){const O=x.meta.id,L=this.getOptionsToRemember(),B=this.fieldConfig,w=this.type,R=this.isAngularPlugin();this.cachedPluginOptions[w]={properties:L,fieldConfig:B},this.clearPropertiesBeforePluginChange(),this.restorePanelOptions(O),this.callPanelTypeChangeHandler(x,w,L,R),this.type=O,this.plugin=x,this.configRev++,this.applyPluginOptionDefaults(x,!0),x.onPanelMigration&&(this.pluginVersion=b(x))}updateQueries(x){const{dataSource:O}=x;this.datasource={uid:O.uid,type:O.type},x.savedQueryUid?this.savedQueryLink={ref:{uid:x.savedQueryUid},variables:[]}:this.savedQueryLink=null,this.cacheTimeout=x.cacheTimeout,this.timeFrom=x.timeRange?.from,this.timeShift=x.timeRange?.shift,this.hideTimeOverride=x.timeRange?.hide,this.interval=x.minInterval,this.maxDataPoints=x.maxDataPoints,this.targets=x.queries,this.configRev++,this.events.publish(new h.pO)}addQuery(x){x=x||{refId:"A"},x.refId=(0,p.Hs)(this.targets),this.targets.push(x),this.configRev++}changeQuery(x,O){x.refId=this.targets[O].refId,this.configRev++,this.targets=this.targets.map((L,B)=>B===O?x:L)}getEditClone(){const x=this.getSaveModel(),O=new C(x);O.isEditing=!0,O.plugin=this.plugin;const L=this.getQueryRunner();return O.getQueryRunner().useLastResultFrom(L),O}getTransformations(){return this.transformations}getFieldOverrideOptions(){if(this.plugin)return{fieldConfig:this.fieldConfig,replaceVariables:this.replaceVariables,fieldConfigRegistry:this.plugin.fieldConfigRegistry,theme:m.ZP.theme2}}getDataSupport(){return this.plugin?.dataSupport??{annotations:!1,alertStates:!1}}getQueryRunner(){return this.queryRunner||(this.queryRunner=new y.o(this)),this.queryRunner}hasTitle(){return this.title&&this.title.length>0}isAngularPlugin(){return(this.plugin&&this.plugin.angularPanelCtrl)!==void 0}destroy(){this.events.removeAllListeners(),this.queryRunner&&this.queryRunner.destroy()}setTransformations(x){this.transformations=x,this.resendLastResult(),this.configRev++,this.events.publish(new h.Xw)}setProperty(x,O){this[x]=O,this.configRev++,x==="repeat"&&(this.repeat&&!this.repeatDirection?this.repeatDirection="h":this.repeat||(delete this.repeatDirection,delete this.maxPerRow))}replaceVariables(x,O,L){const B=this.getQueryRunner().getLastRequest(),w=Object.assign({},this.scopedVars,B?.scopedVars,O),R=(0,v.c)(w),A=f.Cj.toUrlParams(R),U=f.Cj.toUrlParams((0,i.$t)().timeRangeForUrl());return w[o.W.keepTime]={text:U,value:U},w[o.W.includeVars]={text:A,value:A},(0,a.J)().replace(x,w,L)}resendLastResult(){this.plugin&&this.getQueryRunner().resendLastResult()}getDisplayTitle(){return this.replaceVariables(this.title,void 0,"text")}initLibraryPanel(x){for(const[O,L]of Object.entries(x.model)){switch(O){case"id":case"gridPos":case"libraryPanel":continue}this[O]=L}this.libraryPanel=x}unlinkLibraryPanel(){delete this.libraryPanel,this.configRev++,this.render()}}function b(M){return M&&M.meta.info.version?M.meta.info.version:m.ZP.buildInfo.version}function S(M){const x={};return Object.entries(M).filter(([O,L])=>!u[O]&&M.hasOwnProperty(O)&&!(0,t.isEqual)(L,E[O])).forEach(([O,L])=>{x[O]=L}),(0,d.Xh)(x)}},86977:(H,T,e)=>{"use strict";e.d(T,{$j:()=>v,Qk:()=>h,RF:()=>p,Yq:()=>y,f4:()=>E,fG:()=>i,lw:()=>u,qm:()=>m,tM:()=>P});var t=e(54899),n=e(659),c=e(60499),s=e(30992),r=e(46732),g=e(54294),f=e(85805),o=e(85803),l=e(19349),a=e(58790);function m(C){return async b=>{const S=await(0,t.i)().get(`/api/dashboards/id/${C}/permissions`);b((0,a.O0)(S))}}function d(C){return{userId:C.userId,teamId:C.teamId,role:C.role,permission:C.permission}}function p(C,b,S){return async(M,x)=>{const{dashboard:O}=x(),L=[];for(const B of O.permissions){if(B.inherited)continue;const w=d(B);b===B&&(w.permission=S),L.push(w)}await(0,t.i)().post(`/api/dashboards/id/${C}/permissions`,{items:L}),await M(m(C))}}function h(C,b){return async(S,M)=>{const x=M().dashboard,O=[];for(const L of x.permissions)L.inherited||L===b||O.push(d(L));await(0,t.i)().post(`/api/dashboards/id/${C}/permissions`,{items:O}),await S(m(C))}}function y(C,b){return async(S,M)=>{const{dashboard:x}=M(),O=[];for(const L of x.permissions)L.inherited||O.push(d(L));O.push({userId:b.userId,teamId:b.teamId,role:b.role,permission:b.permission}),await(0,t.i)().post(`/api/dashboards/id/${C}/permissions`,{items:O}),await S(m(C))}}function v(C,b){return async S=>{await(0,t.i)().post("/api/dashboards/import",C),S((0,n.$l)((0,c.AT)("Dashboard Imported",b))),S((0,f.m3)())}}function i(C){return async b=>{await(0,t.i)().delete(`/api/dashboards/uid/${C}`),b((0,f.m3)())}}const u=()=>(C,b)=>{const M=b().dashboard.getModel();M&&(M.destroy(),C((0,o.wX)(M.uid))),(0,l.$t)().stopAutoRefresh(),C((0,a.sG)()),C((0,r.Vl)()),s.H.leave()},P=C=>b=>{b((0,g.YT)(C)),(0,l.$t)().refreshTimeModel()},E=C=>b=>{b((0,g.zW)(C)),(0,l.$t)().refreshTimeModel()}},86899:(H,T,e)=>{"use strict";e.d(T,{f:()=>t.f,r:()=>n.r});var t=e(82302),n=e(96161)},87464:(H,T,e)=>{"use strict";e.d(T,{ZQ:()=>R,mV:()=>w,f1:()=>I,$M:()=>U});var t=e(83383),n=e(46519),c=e(55294),s=e(37932),r=e(54899),g=e(35645),f=e(659),o=e(97063),l=e(60499),a=e(29930),m=e(58379),d=e(87449),p=e(9398),h=e(19349),y=e(30992),v=e(10079),i=e(92624),u=e(81168),P=e(87865),E=e(85803),C=e(87095),b=e(82302),S=e(75552),M=e(41818);function x(N){const F={dashboardId:N.id,dashboardName:N.title,dashboardUid:N.uid,folderName:N.meta.folderTitle,eventName:S.ct.DashboardView};(0,M.r_)(F)}var O=e(58790);async function L(N,F,D){const Y=m.Z.getObject(A);if(Y)return I(),Y;try{switch(N.routeName){case u.DashboardRoutes.Home:{const j=await a.ae.get("/api/dashboards/home");if(j.redirectUri){const K=t.u.stripBaseFromUrl(j.redirectUri);return s.E1.replace(K),null}return j.meta.canSave=!1,j.meta.canShare=!1,j.meta.canStar=!1,j}case u.DashboardRoutes.Public:return await d.pD.loadDashboard("public",N.urlSlug,N.accessToken);case u.DashboardRoutes.Normal:{const j=await d.pD.loadDashboard(N.urlType,N.urlSlug,N.urlUid);if(N.fixUrl&&j.meta.url&&!v.r0.isPlaying){const K=t.u.stripBaseFromUrl(j.meta.url),z=s.E1.getLocation().pathname;K!==z&&(s.E1.replace({...s.E1.getLocation(),pathname:K}),console.log("not correct url correcting",K,z))}return j}case u.DashboardRoutes.New:return R(N.urlFolderUid,N.panelType);case u.DashboardRoutes.Path:{const j=N.urlSlug??"";return await d.pD.loadDashboard(u.DashboardRoutes.Path,j,j)}default:throw{message:"Unknown route "+N.routeName}}}catch(j){return(0,r.kW)(j)&&j.cancelled||(F((0,O.jA)({message:"Failed to fetch dashboard",error:j})),console.error(j)),null}}const B=(N,F={})=>(N.forEach(D=>{D.panels?B(D.panels,F):D.targets&&D.targets.forEach(Y=>{Y.datasource?.type&&(F[Y.datasource.type]?F[Y.datasource.type].push(Y):F[Y.datasource.type]=[Y])})}),F);function w(N){return async(F,D)=>{F((0,O.sf)());const Y=await L(N,F,D);if(!Y)return;F((0,O.Nv)());let j;try{j=new b.f(Y.dashboard,Y.meta)}catch(Ee){F((0,O.jA)({message:"Failed create dashboard model",error:Ee})),console.error(Ee);return}const K=D(),z=s.E1.getSearchObject();z.orgId||s.E1.partial({orgId:K.user.orgId},!0);const Z=(0,h.$t)();(0,p.h4)().setCurrent(j),Z.init(j);const J=(0,i.mn)(N.urlUid??j.uid);if(await F((0,E.LX)(J,j)),(0,P.Tl)({dashboard:j,timeSrv:Z}).run({dashboard:j,range:Z.timeRange()}),(0,C.cp)(D())===J&&D().dashboard.initPhase===u.DashboardInitPhase.Services){try{j.processRepeats(),z.autofitpanels&&j.autoFitPanels(window.innerHeight,z.kiosk),N.keybindingSrv.setupDashboardBindings(j)}catch(Ee){Ee instanceof Error&&F((0,f.$l)((0,l.t_)("Dashboard init failed",Ee))),console.error(Ee)}N.routeName!==u.DashboardRoutes.New?(x(j),y.H.watch(j.uid)):y.H.leave(),j.weekStart!==""?(0,n.Ls)(j.weekStart):(0,n.Ls)(g.v.bootData.user.weekStart),o.Z.publish(new c.Pl({dashboardId:j.uid,orgId:K.user.orgId,userId:K.user.user?.id,grafanaVersion:g.v.buildInfo.version,queries:B(j.panels)})),F((0,O.dS)(j))}}}function R(N,F){const D={meta:{canStar:!1,canShare:!1,canDelete:!1,isNew:!0,folderUid:""},dashboard:{title:"New dashboard",panels:[{type:F??"add-panel",gridPos:{x:0,y:0,w:12,h:9},title:"Panel Title"}]}};return N&&(D.meta.folderUid=N),D}const A="DASHBOARD_FROM_LS_KEY";function U(N){m.Z.setObject(A,N)}function I(){m.Z.delete(A)}},58790:(H,T,e)=>{"use strict";e.d(T,{Nv:()=>d,O0:()=>o,ZP:()=>v,dS:()=>m,jA:()=>a,sG:()=>p,sf:()=>l,tq:()=>h});var t=e(32557),n=e(30670),c=e(2024),s=e(81168),r=e(82302);const g={initPhase:s.DashboardInitPhase.NotStarted,getModel:()=>null,permissions:[],initError:null},f=(0,t.oM)({name:"dashboard",initialState:g,reducers:{loadDashboardPermissions:(i,u)=>{i.permissions=(0,c.A)(u.payload)},dashboardInitFetching:i=>{i.initPhase=s.DashboardInitPhase.Fetching},dashboardInitServices:i=>{i.initPhase=s.DashboardInitPhase.Services},dashboardInitCompleted:(i,u)=>{i.getModel=()=>u.payload,i.initPhase=s.DashboardInitPhase.Completed},dashboardInitFailed:(i,u)=>{i.initPhase=s.DashboardInitPhase.Failed,i.initError=u.payload,i.getModel=()=>new r.f({...n.Ql,title:"Dashboard init failed"},{canSave:!1,canEdit:!1})},cleanUpDashboard:i=>{i.initPhase=s.DashboardInitPhase.NotStarted,i.initError=null,i.getModel=()=>null},addPanel:(i,u)=>{}}}),{loadDashboardPermissions:o,dashboardInitFetching:l,dashboardInitFailed:a,dashboardInitCompleted:m,dashboardInitServices:d,cleanUpDashboard:p,addPanel:h}=f.actions,v={dashboard:f.reducer}},57277:(H,T,e)=>{"use strict";e.d(T,{y:()=>a});var t=e(16911),n=e(69311),c=e(71398),s=e(49922),r=e(36998),g=e(47694),f=e(56422),o=e(19349),l=e(2476);function a(m,d){const p=(0,t.F9)(m.snapshotData),h=new f.g,y={dashboard:d,range:(0,n.JK)()},v=h.canWork(y)?h.getAnnotationsInSnapshot(d,m.id):[],i=[new c.i(v)];return{timeRange:(0,l.W1)(m,(0,o.$t)().timeRange()).timeRange,state:s.Gu.Done,series:(0,r.SM)({data:p,fieldConfig:{defaults:{},overrides:[]},replaceVariables:m.replaceVariables,fieldConfigRegistry:m.plugin.fieldConfigRegistry,theme:g.vc.theme2,timeZone:d.getTimezone()}),annotations:i}}},2476:(H,T,e)=>{"use strict";e.d(T,{Kq:()=>b,Po:()=>C,W1:()=>O,WJ:()=>u,bY:()=>E,jN:()=>P,oe:()=>S,qw:()=>x});var t=e(82897),n=e.n(t),c=e(25318),s=e(33180),r=e(21053),g=e(40885),f=e(97063),o=e(47694),l=e(84952),a=e(58379),m=e(18262),d=e(96161),p=e(76647),h=e(81283),y=e(32294),v=e(3153),i=e(45984);const u=(w,R,A)=>{if(A!==!1){const U=R.alert&&!o.ZP.unifiedAlertingEnabled?"Panel includes an alert rule. removing the panel will also remove the alert rule":void 0,I=R.alert?"YES":void 0;f.Z.publish(new i.VJ({title:"Remove panel",text:"Are you sure you want to remove this panel?",text2:U,icon:"trash-alt",confirmText:I,yesText:"Remove",onConfirm:()=>u(w,R,!1)}));return}w.removePanel(R),(0,v.WI)((0,y.qj)(R.key))},P=(w,R)=>{w.duplicatePanel(R)},E=w=>{let R=w;w instanceof d.r&&(R=w.getSaveModel()),a.Z.set(l.zF,JSON.stringify(R)),f.Z.emit(c.SI.alertSuccess,["Panel copied. Click **Add panel** icon to paste."])},C=(w,R)=>{f.Z.publish(new i.Dn({component:m.ShareModal,props:{dashboard:w,panel:R}}))},b=(w,R)=>{f.Z.publish(new i.Dn({component:p.c,props:{panel:R,initialFolderUid:w.meta.folderUid,isOpen:!0}}))},S=w=>{f.Z.publish(new i.Dn({component:h.i,props:{onConfirm:()=>w.unlinkLibraryPanel(),isOpen:!0}}))},M=w=>{w.refresh()},x=w=>{const R={...w.options};R.legend.showLegend===!0?R.legend.showLegend=!1:R.legend.showLegend=!0,w.updateOptions(R)};function O(w,R){const A={timeInfo:"",timeRange:R};if(w.timeFrom){const U=(0,g.J)().replace(w.timeFrom,w.scopedVars),I=s.describeTextRange(U);if(I.invalid)return A.timeInfo="invalid time override",A;if((0,t.isString)(R.raw.from)){const N=r.parse(I.from);A.timeInfo=I.display,A.timeRange={from:N,to:r.parse(I.to),raw:{from:I.from,to:I.to}}}}if(w.timeShift){const U=(0,g.J)().replace(w.timeShift,w.scopedVars);if(s.describeTextRange(U).invalid)return A.timeInfo="invalid timeshift",A;const N="-"+U;A.timeInfo+=" timeshift "+N;const F=r.parseDateMath(N,A.timeRange.from,!1),D=r.parseDateMath(N,A.timeRange.to,!0);A.timeRange={from:F,to:D,raw:{from:F,to:D}}}return w.hideTimeOverride&&(A.timeInfo=""),A}function L(w){const A=document.getElementsByTagName("html")[0].getBoundingClientRect().width;return w.maxDataPoints?w.maxDataPoints:Math.ceil(A*(w.gridPos.w/24))}function B(w,R){const A=w.plugin&&w.plugin.noPadding?0:config.theme.panelPadding*2,U=w.hasTitle()?config.theme.panelHeaderHeight:0;return R-U-A-PANEL_BORDER}},74124:(H,T,e)=>{"use strict";e.d(T,{O:()=>c});var t=e(46519),n=e(21053);const c=(s,r)=>{const g={from:(0,t.v9)(s.from)?(0,t.CQ)(s.from):s.from,to:(0,t.v9)(s.to)?(0,t.CQ)(s.to):s.to},f=r?r.getTimezone():void 0;return{from:n.parse(g.from,!1,f,r?.fiscalYearStartMonth),to:n.parse(g.to,!0,f,r?.fiscalYearStartMonth),raw:g}}},3597:(H,T,e)=>{"use strict";e.d(T,{n:()=>t});const t={List:"/datasources",Edit:"/datasources/edit/:uid",Dashboards:"/datasources/edit/:uid/dashboards",New:"/datasources/new"}},40897:(H,T,e)=>{"use strict";e.d(T,{J_:()=>ae,F5:()=>Ee,M9:()=>Y,gv:()=>z,b2:()=>Z,Kj:()=>J,bZ:()=>K,kY:()=>j,oe:()=>oe});var t=e(83383),n=e(35645),c=e(22069),s=e(54899),r=e(37932),g=e(659),f=e(77582),o=e(29930),l=e(91162),a=e(13011),m=e(82221),d=e(3363),p=e(95156);const h=async()=>await(0,o.i)().get("/api/datasources"),y=async me=>{const re=await(0,d.n)((0,o.i)().fetch({method:"GET",url:`/api/datasources/${me}`,params:(0,p.y)(),showErrorAlert:!1}));if(re.ok)return re.data;throw Error(`Could not find data source by ID: "${me}"`)},v=async me=>{const re=await(0,d.n)((0,o.i)().fetch({method:"GET",url:`/api/datasources/uid/${me}`,params:(0,p.y)(),showErrorAlert:!1}));if(re.ok)return re.data;throw Error(`Could not find data source by UID: "${me}"`)},i=async me=>{try{return await v(me)}catch{console.log(`Failed to lookup data source using UID "${me}"`)}try{return await y(me)}catch{console.log(`Failed to lookup data source using ID "${me}"`)}throw Error("Could not find data source")},u=me=>(0,o.i)().post("/api/datasources",me),P=()=>(0,o.i)().get("/api/plugins",{enabled:1,type:"datasource"}),E=me=>(0,o.i)().put(`/api/datasources/uid/${me.uid}`,me),C=me=>(0,o.i)().delete(`/api/datasources/uid/${me}`);var b=e(3597),S=e(41818);const M=me=>{(0,S.ff)("grafana_ds_add_datasource_clicked",me)},x=me=>{(0,S.ff)("grafana_ds_test_datasource_clicked",me)};var O=e(85597),L=e(24699),B=e(66121);function w(me){const re=[{id:"tsdb",title:"Time series databases",plugins:[]},{id:"logging",title:"Logging & document databases",plugins:[]},{id:"tracing",title:"Distributed tracing",plugins:[]},{id:"profiling",title:"Profiling",plugins:[]},{id:"sql",title:"SQL",plugins:[]},{id:"cloud",title:"Cloud",plugins:[]},{id:"enterprise",title:"Enterprise plugins",plugins:[]},{id:"iot",title:"Industrial & IoT",plugins:[]},{id:"other",title:"Others",plugins:[]}].filter(se=>se),le={},pe={},ee=A();for(const se of re)le[se.id]=se;for(const se of me){const Q=ee.find(q=>q.id===se.id);if((se.enterprise||Q)&&(se.category="enterprise",se.unlicensed=!(0,B.v)("enterprise.plugins"),se.info.links=Q?.info?.links||se.info.links),se.info.links)for(const q of se.info.links)q.name="Learn more";(re.find(q=>q.id===se.category)||le.other).plugins.push(se),pe[se.id]=se}for(const se of re){if(se.id==="cloud"&&se.plugins.push(U()),se.id==="enterprise")for(const Q of ee)pe[Q.id]||se.plugins.push(Q);R(se.plugins)}return re.filter(se=>se.plugins.length>0)}function R(me){const re={prometheus:100,graphite:95,loki:90,mysql:80,jaeger:100,postgres:79,gcloud:-1};me.sort((le,pe)=>{const ee=re[le.id]||0,se=re[pe.id]||0;return ee>se?-1:ee<se||le.name>pe.name?1:-1})}function A(){return[I({id:"grafana-splunk-datasource",name:"Splunk",description:"Visualize and explore Splunk logs",imgUrl:"public/img/plugins/splunk_logo_128.png"}),I({id:"grafana-oracle-datasource",name:"Oracle",description:"Visualize and explore Oracle SQL",imgUrl:"public/img/plugins/oracle.png"}),I({id:"grafana-dynatrace-datasource",name:"Dynatrace",description:"Visualize and explore Dynatrace data",imgUrl:"public/img/plugins/dynatrace.png"}),I({id:"grafana-servicenow-datasource",description:"ServiceNow integration and data source",name:"ServiceNow",imgUrl:"public/img/plugins/servicenow.svg"}),I({id:"grafana-datadog-datasource",description:"DataDog integration and data source",name:"DataDog",imgUrl:"public/img/plugins/datadog.png"}),I({id:"grafana-newrelic-datasource",description:"New Relic integration and data source",name:"New Relic",imgUrl:"public/img/plugins/newrelic.svg"}),I({id:"grafana-mongodb-datasource",description:"MongoDB integration and data source",name:"MongoDB",imgUrl:"public/img/plugins/mongodb.svg"}),I({id:"grafana-snowflake-datasource",description:"Snowflake integration and data source",name:"Snowflake",imgUrl:"public/img/plugins/snowflake.svg"}),I({id:"grafana-wavefront-datasource",description:"Wavefront integration and data source",name:"Wavefront",imgUrl:"public/img/plugins/wavefront.svg"}),I({id:"dlopes7-appdynamics-datasource",description:"AppDynamics integration and data source",name:"AppDynamics",imgUrl:"public/img/plugins/appdynamics.svg"}),I({id:"grafana-saphana-datasource",description:"SAP HANA\xAE integration and data source",name:"SAP HANA\xAE",imgUrl:"public/img/plugins/sap_hana.png"}),I({id:"grafana-honeycomb-datasource",description:"Honeycomb integration and datasource",name:"Honeycomb",imgUrl:"public/img/plugins/honeycomb.png"}),I({id:"grafana-salesforce-datasource",description:"Salesforce integration and datasource",name:"Salesforce",imgUrl:"public/img/plugins/salesforce.svg"}),I({id:"grafana-jira-datasource",description:"Jira integration and datasource",name:"Jira",imgUrl:"public/img/plugins/jira_logo.png"}),I({id:"grafana-gitlab-datasource",description:"GitLab integration and datasource",name:"GitLab",imgUrl:"public/img/plugins/gitlab.svg"}),I({id:"grafana-splunk-monitoring-datasource",description:"SignalFx integration and datasource",name:"Splunk Infrastructure Monitoring",imgUrl:"public/img/plugins/signalfx-logo.svg"}),I({id:"grafana-azuredevops-datasource",description:"Azure Devops datasource",name:"Azure Devops",imgUrl:"public/img/plugins/azure-devops.png"})]}function U(){return{id:"gcloud",name:"Grafana Cloud",type:L.zV.datasource,module:"phantom",baseUrl:"",info:{description:"Hosted Graphite, Prometheus, and Loki",logos:{small:"public/img/grafana_icon.svg",large:"asd"},author:{name:"Grafana Labs"},links:[{url:"https://grafana.com/products/cloud/",name:"Learn more"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}function I(me){return{id:me.id,name:me.name,type:L.zV.datasource,module:"phantom",baseUrl:"",info:{description:me.description,logos:{small:me.imgUrl,large:me.imgUrl},author:{name:"Grafana Labs"},links:[{url:n.v.pluginCatalogURL+me.id,name:"Install now"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}var N=e(79508),F=e(71128),D=e(93769);const Y=(me,re={loadDataSource:z,loadDataSourceMeta:Z,getDataSource:D.f6,getDataSourceMeta:D.G4,importDataSourcePlugin:m.nL})=>async(le,pe)=>{if(!me){le((0,F.CT)(new Error("Invalid UID")));return}try{const ee=await le(re.loadDataSource(me));await le(re.loadDataSourceMeta(ee));const se=re.getDataSource(pe().dataSources,me),Q=re.getDataSourceMeta(pe().dataSources,se.type),G=await re.importDataSourcePlugin(Q);le((0,F.iZ)(G))}catch(ee){ee instanceof Error&&le((0,F.CT)(ee))}},j=(me,re=b.n.Edit,le={getDatasourceSrv:l.ak,getBackendSrv:o.i})=>async(pe,ee)=>{const se=await le.getDatasourceSrv().get(me),Q=re.replace(/:uid/gi,me);se.testDatasource&&(pe((0,F.j_)()),le.getBackendSrv().withNoBackendCache(async()=>{try{const G=await se.testDatasource();pe((0,F.ng)(G)),x({grafana_version:n.v.buildInfo.version,plugin_id:se.type,datasource_uid:se.uid,success:!0,editLink:Q})}catch(G){let q,X;G instanceof c.ZA?(q=G.message,X=G.details):(0,s.kW)(G)?q=G.data.message??`HTTP error ${G.statusText}`:G instanceof Error&&(q=G.message),pe((0,F.Aq)({message:q,details:X})),x({grafana_version:n.v.buildInfo.version,plugin_id:se.type,datasource_uid:se.uid,success:!1,editLink:Q})}}))};function K(){return async me=>{me((0,F.MP)());const re=await h();me((0,F.be)(re))}}function z(me){return async re=>{let le=await i(me);return me!==le.uid&&(window.location.href=t.u.assureBaseUrl(`/datasources/edit/${le.uid}`),le={}),re((0,F.rl)(le)),le}}function Z(me){return async re=>{const le=await(0,a.a)(me.type),pe=await(0,m.nL)(le),ee=pe.DataSourceClass.prototype instanceof c.CK,se={...le,isBackend:le.backend||ee};re((0,F.jS)(se)),pe.meta=se,re((0,g.RL)((0,N.B1)(me,pe)))}}function ae(me,re=b.n.Edit){return async(le,pe)=>{const ee=await h();le((0,F.be)(ee));const se=pe().dataSources.dataSources,Q=se.length===0,G={name:me.name,type:me.id,access:"proxy",isDefault:Q};(0,O.NV)(se,G.name)&&(G.name=(0,O.eM)(se,G.name));const q=await u(G),X=re.replace(/:uid/gi,q.datasource.uid);await(0,l.ak)().reload(),await f.Vt.fetchUserPermissions(),M({grafana_version:n.v.buildInfo.version,plugin_id:me.id,datasource_uid:q.datasource.uid,plugin_version:q.meta?.info?.version,editLink:X}),r.E1.push(X)}}function J(){return async me=>{me((0,F.Ww)());const re=await P(),le=w(re);me((0,F.wZ)({plugins:re,categories:le}))}}function oe(me){return async re=>(await E(me),await(0,l.ak)().reload(),re(z(me.uid)))}function Ee(){return async(me,re)=>{const{uid:le}=re().dataSources.dataSource;await C(le),await(0,l.ak)().reload(),r.E1.push("/datasources")}}},59332:(H,T,e)=>{"use strict";e.d(T,{V:()=>c});var t=e(68404),n=e(3597);const c=(0,t.createContext)(n.n)},24231:(H,T,e)=>{"use strict";e.d(T,{E:()=>h,IA:()=>S,MF:()=>O,OU:()=>u,Qs:()=>M,YY:()=>L,_l:()=>x,d7:()=>B,hw:()=>y,nH:()=>P,q6:()=>C,qj:()=>E,wi:()=>i,wl:()=>b,zJ:()=>v});var t=e(68404),n=e(70431),c=e(97063),s=e(77582),r=e(86245),g=e(81168),f=e(45984),o=e(85597),l=e(40897),a=e(59332),m=e(79508),d=e(71128),p=e(93769);const h=w=>{const R=(0,g.useDispatch)();(0,t.useEffect)(()=>(R((0,l.M9)(w)),function(){R((0,n.e)({cleanupAction:U=>U.dataSourceSettings=d.fk}))}),[w,R])},y=w=>{const R=(0,g.useDispatch)(),A=B();return()=>R((0,l.kY)(w,A.Edit))},v=()=>{const w=(0,g.useDispatch)(),R=(0,g.useSelector)(U=>U.dataSources.isLoadingDataSources),A=(0,g.useSelector)(U=>U.dataSources.dataSources);return(0,t.useEffect)(()=>{w((0,l.bZ)())},[w]),{isLoading:R,dataSources:A}},i=w=>{const R=(0,g.useDispatch)();(0,t.useEffect)(()=>{R((0,l.gv)(w))},[R,w])},u=()=>{const w=(0,g.useDispatch)();(0,t.useEffect)(()=>{w((0,l.Kj)())},[w])},P=()=>{const w=(0,g.useDispatch)(),R=B();return A=>{w((0,l.J_)(A,R.Edit))}},E=()=>{const w=(0,g.useDispatch)();return async R=>w((0,l.oe)(R))},C=()=>{const w=(0,g.useDispatch)(),{name:R}=(0,g.useSelector)(A=>A.dataSources.dataSource);return()=>{c.Z.publish(new f.VJ({title:"Delete",text:`Are you sure you want to delete the "${R}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>w((0,l.F5)())}))}},b=w=>(0,g.useSelector)(R=>(0,p.f6)(R.dataSources,w)),S=w=>{const R=b(w);return(0,o.iU)(R)},M=w=>(0,g.useSelector)(R=>(0,p.G4)(R.dataSources,w)),x=()=>(0,g.useSelector)(w=>w.dataSourceSettings),O=(w,R)=>{const A=b(w),{plugin:U,loadError:I,loading:N}=x(),F=(0,g.useSelector)(Y=>Y.navIndex),D=R?`datasource-${R}-${w}`:`datasource-settings-${w}`;if(I){const Y={text:I,subTitle:"Data Source Error",icon:"exclamation-triangle"};return{node:Y,main:Y}}return N||!U?(0,r.ht)(F,D,(0,m.xG)("settings")):(0,r.ht)(F,D,(0,m.nI)((0,m.B1)(A,U),R||"settings"))},L=w=>{const R=b(w),A=R.readOnly===!0,U=s.Vt.hasPermissionInMetadata(g.AccessControlAction.DataSourcesWrite,R),I=s.Vt.hasPermissionInMetadata(g.AccessControlAction.DataSourcesDelete,R);return{readOnly:A,hasWriteRights:U,hasDeleteRights:I}},B=()=>(0,t.useContext)(a.V)},25e3:(H,T,e)=>{"use strict";e.d(T,{BX:()=>r.BX,E:()=>c.E,Ht:()=>r.Ht,I5:()=>g.I5,IA:()=>g.IA,IO:()=>g.IO,MF:()=>c.MF,Nu:()=>r.Nu,OU:()=>c.OU,Qs:()=>c.Qs,Rz:()=>c.IA,Vj:()=>n.V,YY:()=>c.YY,_l:()=>c._l,d7:()=>c.d7,hw:()=>c.hw,mt:()=>g.mt,nH:()=>c.nH,q6:()=>c.q6,qj:()=>c.qj,r7:()=>g.r7,rl:()=>r.rl,wi:()=>c.wi,wl:()=>c.wl,xG:()=>s.xG,yr:()=>r.yr,zJ:()=>c.zJ,zT:()=>r.zT});var t=e(40897),n=e(59332),c=e(24231),s=e(79508),r=e(71128),g=e(93769)},79508:(H,T,e)=>{"use strict";e.d(T,{B1:()=>l,nI:()=>a,xG:()=>m});var t=e(24699),n=e(66121),c=e(73194),s=e(47694),r=e(77582),g=e(77293),f=e(81168);const o="Loading";function l(p,h){const y=h.meta,v=s.ZP.featureToggles.featureHighlights,i={img:y.info.logos.large,id:"datasource-"+p.uid,subTitle:`Type: ${y.name}`,url:"",text:p.name,breadcrumbs:[{title:"Data Sources",url:"datasources"}],children:[{active:!1,icon:"sliders-v-alt",id:`datasource-settings-${p.uid}`,text:"Settings",url:`datasources/edit/${p.uid}/`}]};if(h.configPages)for(const x of h.configPages)i.children.push({active:!1,text:x.title,icon:x.icon,url:`datasources/edit/${p.uid}/?page=${x.id}`,id:`datasource-page-${x.id}`});y.includes&&d(y.includes)&&r.Vt.hasRole("Admin")&&i.children.push({active:!1,icon:"apps",id:`datasource-dashboards-${p.uid}`,text:"Dashboards",url:`datasources/edit/${p.uid}/dashboards`});const u=p.type===o,P="feature-highlights-data-source-permissions-badge",E={active:!1,icon:"lock",id:`datasource-permissions-${p.uid}`,text:"Permissions",url:`datasources/edit/${p.uid}/permissions`};(0,g.d5)()&&!u&&(E.tabSuffix=()=>(0,c.Z)({experimentId:P,eventVariant:"trial"})),(0,n.v)("dspermissions.enforcement")?r.Vt.hasPermission(f.AccessControlAction.DataSourcesPermissionsRead)&&i.children.push(E):v&&!u&&i.children.push({...E,url:E.url+"/upgrade",tabSuffix:()=>(0,c.Z)({experimentId:P})});const C="feature-highlights-data-source-insights-badge",b={active:!1,icon:"info-circle",id:`datasource-insights-${p.uid}`,text:"Insights",url:`datasources/edit/${p.uid}/insights`};(0,g.d5)()&&!u&&(b.tabSuffix=()=>(0,c.Z)({experimentId:C,eventVariant:"trial"})),(0,n.v)("analytics")?r.Vt.hasPermission(f.AccessControlAction.DataSourcesInsightsRead)&&i.children.push(b):v&&!u&&i.children.push({...b,url:b.url+"/upgrade",tabSuffix:()=>(0,c.Z)({experimentId:C})});const S="feature-highlights-query-caching-badge",M={active:!1,icon:"database",id:`datasource-cache-${p.uid}`,text:"Cache",url:`datasources/edit/${p.uid}/cache`,hideFromTabs:!y.isBackend||!s.ZP.caching.enabled};return(0,g.d5)()&&!u&&(M.tabSuffix=()=>(0,c.Z)({experimentId:S,eventVariant:"trial"})),(0,n.v)("caching")?r.Vt.hasPermissionInMetadata(f.AccessControlAction.DataSourcesCachingRead,p)&&i.children.push(M):v&&!u&&i.children.push({...M,url:M.url+"/upgrade",tabSuffix:()=>(0,c.Z)({experimentId:S})}),i}function a(p,h){let y={text:""};for(const v of p.children)if(v.id.indexOf(h)>0){v.active=!0,y=v;break}return{main:p,node:y}}function m(p){const h=l({access:"",basicAuth:!1,basicAuthUser:"",withCredentials:!1,database:"",id:1,uid:"x",isDefault:!1,jsonData:{authType:"credentials",defaultRegion:"eu-west-2"},name:"Loading",orgId:1,readOnly:!1,type:o,typeName:o,typeLogoUrl:"public/img/icn-datasource.svg",url:"",user:"",secureJsonFields:{}},{meta:{id:"1",type:t.zV.datasource,name:"",info:{author:{name:"",url:""},description:"",links:[{name:"",url:""}],logos:{large:"",small:""},screenshots:[],updated:"",version:""},includes:[],module:"",baseUrl:""}});return a(h,p)}function d(p){return p.find(h=>h.type==="dashboard")!==void 0}},71128:(H,T,e)=>{"use strict";e.d(T,{Aq:()=>b,BX:()=>p,CT:()=>P,Ht:()=>d,MP:()=>r,Nu:()=>y,Ww:()=>o,ZP:()=>M,be:()=>g,fk:()=>i,iZ:()=>u,jS:()=>f,j_:()=>E,ng:()=>C,rl:()=>s,wZ:()=>l,yr:()=>h,zT:()=>a});var t=e(32557),n=e(1762);const c={dataSources:[],plugins:[],categories:[],dataSource:{},layoutMode:n.l.List,searchQuery:"",dataSourcesCount:0,dataSourceTypeSearchQuery:"",isLoadingDataSources:!1,isLoadingDataSourcePlugins:!1,dataSourceMeta:{},isSortAscending:!0},s=(0,t.PH)("dataSources/dataSourceLoaded"),r=(0,t.PH)("dataSources/dataSourcesLoad"),g=(0,t.PH)("dataSources/dataSourcesLoaded"),f=(0,t.PH)("dataSources/dataSourceMetaLoaded"),o=(0,t.PH)("dataSources/dataSourcePluginsLoad"),l=(0,t.PH)("dataSources/dataSourcePluginsLoaded"),a=(0,t.PH)("dataSources/setDataSourcesSearchQuery"),m=(0,t.PH)("dataSources/setDataSourcesLayoutMode"),d=(0,t.PH)("dataSources/setDataSourceTypeSearchQuery"),p=(0,t.PH)("dataSources/setDataSourceName"),h=(0,t.PH)("dataSources/setIsDefault"),y=(0,t.PH)("dataSources/setIsSortAscending"),v=(x=c,O)=>r.match(O)?{...x,isLoadingDataSources:!0}:g.match(O)?{...x,isLoadingDataSources:!1,dataSources:O.payload,dataSourcesCount:O.payload.length}:s.match(O)?{...x,dataSource:O.payload}:a.match(O)?{...x,searchQuery:O.payload}:m.match(O)?{...x,layoutMode:O.payload}:o.match(O)?{...x,plugins:[],isLoadingDataSourcePlugins:!0}:l.match(O)?{...x,plugins:O.payload.plugins,categories:O.payload.categories,isLoadingDataSourcePlugins:!1}:d.match(O)?{...x,dataSourceTypeSearchQuery:O.payload}:f.match(O)?{...x,dataSourceMeta:O.payload}:p.match(O)?{...x,dataSource:{...x.dataSource,name:O.payload}}:h.match(O)?{...x,dataSource:{...x.dataSource,isDefault:O.payload}}:y.match(O)?{...x,isSortAscending:O.payload}:x,i={testingStatus:{},loadError:null,loading:!0,plugin:null},u=(0,t.PH)("dataSourceSettings/initDataSourceSettingsSucceeded"),P=(0,t.PH)("dataSourceSettings/initDataSourceSettingsFailed"),E=(0,t.PH)("dataSourceSettings/testDataSourceStarting"),C=(0,t.PH)("dataSourceSettings/testDataSourceSucceeded"),b=(0,t.PH)("dataSourceSettings/testDataSourceFailed"),M={dataSources:v,dataSourceSettings:(x=i,O)=>u.match(O)?{...x,plugin:O.payload,loadError:null,loading:!1}:P.match(O)?{...x,plugin:null,loadError:O.payload.message,loading:!1}:E.match(O)?{...x,testingStatus:{message:"Testing...",status:"info"}}:C.match(O)?{...x,testingStatus:{status:O.payload?.status,message:O.payload?.message,details:O.payload?.details}}:b.match(O)?{...x,testingStatus:{status:"error",message:O.payload?.message,details:O.payload?.details}}:x}},93769:(H,T,e)=>{"use strict";e.d(T,{G4:()=>s,I5:()=>n,IA:()=>o,IO:()=>r,f6:()=>c,mt:()=>t,r7:()=>f});const t=l=>{const a=new RegExp(l.searchQuery,"i");return l.dataSources.filter(d=>a.test(d.name)||a.test(d.database)||a.test(d.type)).sort((d,p)=>l.isSortAscending?d.name.localeCompare(p.name):p.name.localeCompare(d.name))},n=l=>{const a=new RegExp(l.dataSourceTypeSearchQuery,"i");return l.plugins.filter(m=>a.test(m.name))},c=(l,a)=>l.dataSource.uid===a?l.dataSource:{},s=(l,a)=>l.dataSourceMeta.id===a?l.dataSourceMeta:{},r=l=>l.searchQuery,g=l=>l.layoutMode,f=l=>l.dataSourcesCount,o=l=>l.isSortAscending},85597:(H,T,e)=>{"use strict";e.d(T,{NV:()=>c,eM:()=>s,iU:()=>l});var t=e(27677),n=e(83383);function c(a,m){return a.filter(d=>d.name.toLowerCase()===m.toLowerCase()).length>0}function s(a,m){for(;c(a,m);)r(m)?m=`${o(m)}${f(g(m))}`:m=`${m}-1`;return m}function r(a){return a.endsWith("-",a.length-1)}function g(a){return parseInt(a.slice(-1),10)}function f(a){return isNaN(a)?1:a+1}function o(a){return a.slice(0,a.length-1)}const l=a=>{const m=JSON.stringify({datasource:a.name,context:"explore"});return t.Cj.renderUrl(n.u.assureBaseUrl("/explore"),{left:m})}},97934:()=>{"use strict"},30785:(H,T,e)=>{"use strict";e.d(T,{L:()=>o});var t=e(52423),n=e(68404),c=e(72648),s=e(53217),r=e(90208),g=e(80760);const f={label:"Fixed color",value:"_____fixed_____"},o=a=>{const{value:m,context:d,onChange:p}=a,h="dark-green",y=(0,c.wW)(l),v=m?.field,i=Boolean(!v),u=(0,g.IX)(d.data),P=(0,g.nw)(u,v,f),E=(0,n.useCallback)(S=>{const M=S.value;if(M&&M!==f.value)p({...m,field:M});else{const x=m?.fixed??h;p({...m,field:void 0,fixed:x})}},[p,m]),C=(0,n.useCallback)(S=>{p({field:void 0,fixed:S??h})},[p]),b=i?f:P.find(S=>S.value===v);return n.createElement(n.Fragment,null,n.createElement("div",{className:y.container},n.createElement(s.Ph,{value:b,options:P,onChange:E,noOptionsMessage:"No fields found"}),i&&n.createElement("div",{className:y.picker},n.createElement(r.zH,{color:m?.fixed??h,onChange:C,enableNamedColors:!0}))))},l=a=>({container:t.css`
    display: flex;
    flex-wrap: nowrap;
    justify-content: flex-end;
    align-items: center;
  `,picker:t.css`
    padding-left: 8px;
  `})},26786:(H,T,e)=>{"use strict";e.d(T,{E:()=>y});var t=e(52423),n=e(68404),c=e(72648),s=e(31403),r=e(11543),g=e(81764),f=e(46967),o=e(39604),l=e(56921),a=e(66120),m=e(16964),d=e(59961),p=e(92484),h=e(26260);const y=i=>{const{value:u,src:P,name:E,placeholder:C,onChange:b,onClear:S,mediaType:M,folderName:x,size:O,color:L}=i,B=(0,c.wW)(v),w=(0,c.l4)(),R=(0,n.createRef)(),A=n.createElement(h.Y,{onChange:b,value:u,mediaType:M,folderName:x});let U=P;!U&&u&&(U=(0,d.t)(u));const I=L&&{fill:w.visualization.getColorByName(L)},N=()=>u&&U?n.createElement(m.V,{src:U,className:B.icon,style:{...I}}):n.createElement(s.Qj,{variant:"primary",fill:"text",size:"sm"},"Set icon"),F=()=>n.createElement(r.Z,null,n.createElement(g._,{label:null,grow:!0},n.createElement(f.I,{value:E,placeholder:C,readOnly:!0,prefix:U&&n.createElement(m.V,{src:U,className:B.icon,style:{...I}}),suffix:n.createElement(s.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:S})})));return n.createElement(o.D,{content:A},(D,Y,j)=>n.createElement(n.Fragment,null,R.current&&n.createElement(l.J,{...j,referenceElement:R.current,onMouseEnter:D,onKeyDown:K=>{(0,a.i)(K,Y)}}),n.createElement("div",{ref:R,onClick:D,className:B.pointer},O===p.zc.SMALL&&N(),O===p.zc.NORMAL&&F())))},v=i=>({pointer:t.css`
    cursor: pointer;
    input[readonly] {
      cursor: pointer;
    }
  `,icon:t.css`
    vertical-align: middle;
    display: inline-block;
    fill: currentColor;
    width: 25px;
  `})},26260:(H,T,e)=>{"use strict";e.d(T,{Y:()=>D});var t=e(52423),n=e(99510),c=e(81699),s=e(6665),r=e(68404),g=e(54899),f=e(72648),o=e(26202),l=e(31403),a=e(47694),m=e(92484),d=e(24799),p=e(30784),h=e(16964);function y({secondaryText:j="Drag and drop here or browse"}){const K=(0,f.wW)(i);return r.createElement("div",{className:K.iconWrapper},r.createElement("small",{className:K.small},j),r.createElement(l.zx,{type:"button",icon:"upload"},"Upload"))}const v=({mediaType:j,setFormData:K,setUpload:z,error:Z})=>{const ae=(0,f.wW)(i),[J,oe]=(0,r.useState)(!1),[Ee,me]=(0,r.useState)(""),re=()=>r.createElement(d.g,{label:"Preview"},r.createElement("div",{className:ae.iconPreview},j===m.DD.Icon&&r.createElement(h.V,{src:Ee,className:ae.img}),j===m.DD.Image&&r.createElement("img",{src:Ee,alt:"Preview of the uploaded file",className:ae.img}))),le=ee=>{fetch(`/api/storage/delete/upload/${ee.file.name}`,{method:"DELETE"}).catch(se=>console.error("cannot delete file",se))},pe=j==="icon"?{"image/*":[".svg",".xml"]}:{"image/*":[".jpeg",".png",".gif",".webp"]};return r.createElement(p.Yo,{readAs:"readAsBinaryString",onFileRemove:le,options:{accept:pe,multiple:!1,onDrop:ee=>{let se=new FormData;se.append("file",ee[0]),me(URL.createObjectURL(ee[0])),oe(!0),K(se),z(!0)}}},Z.message!==""&&J?r.createElement("p",null,Z.message):J?r.createElement(re,null):r.createElement(y,null))};function i(j,K){return{container:t.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:t.css`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${j.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${j.colors.border.medium};
      background-color: ${K?j.colors.background.secondary:j.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:t.css`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:t.css`
      margin: ${j.spacing(2,0,1)};
    `,small:t.css`
      color: ${j.colors.text.secondary};
      margin-bottom: ${j.spacing(2)};
    `,iconContainer:t.css`
      display: flex;
      flex-direction: column;
      width: 80%;
      align-items: center;
      align-self: center;
    `,iconPreview:t.css`
      width: 238px;
      height: 198px;
      border: 1px solid ${j.colors.border.medium};
      display: flex;
      align-items: center;
      justify-content: center;
    `,img:t.css`
      width: 147px;
      height: 147px;
      fill: ${j.colors.text.primary};
    `}}var u=e(53217),P=e(14747),E=e(91162),C=e(89050),b=e(75478),S=e(7804);function M(j){const{columnIndex:K,rowIndex:z,style:Z,data:ae}=j,{cards:J,columnCount:oe,onChange:Ee,selected:me}=ae,re=K+z*oe,le=J[re],pe=(0,f.l4)(),ee=x(pe);return r.createElement("div",{style:Z},le&&r.createElement("div",{key:le.value,className:me===le.value?(0,t.cx)(ee.card,ee.selected):ee.card,onClick:()=>Ee(le.value)},le.imgUrl.endsWith(".svg")?r.createElement(h.V,{src:le.imgUrl,className:ee.img}):r.createElement("img",{src:le.imgUrl,alt:"",className:ee.img}),r.createElement("h6",{className:ee.text},le.label.slice(0,-4))))}const x=(0,S.B)(j=>({card:t.css`
      display: inline-block;
      width: 90px;
      height: 90px;
      margin: 0.75rem;
      margin-left: 15px;
      text-align: center;
      cursor: pointer;
      position: relative;
      background-color: transparent;
      border: 1px solid transparent;
      border-radius: 8px;
      padding-top: 6px;
      :hover {
        border-color: ${j.colors.action.hover};
        box-shadow: ${j.shadows.z2};
      }
    `,selected:t.css`
      border: 2px solid ${j.colors.primary.main};
      :hover {
        border-color: ${j.colors.primary.main};
      }
    `,img:t.css`
      width: 40px;
      height: 40px;
      object-fit: cover;
      vertical-align: middle;
      fill: ${j.colors.text.primary};
    `,text:t.css`
      color: ${j.colors.text.primary};
      white-space: nowrap;
      font-size: 12px;
      text-overflow: ellipsis;
      display: block;
      overflow: hidden;
    `,grid:t.css`
      border: 1px solid ${j.colors.border.medium};
    `})),O=j=>{const{onChange:K,cards:z,value:Z}=j,ae=(0,f.l4)(),J=x(ae);return r.createElement(C.Z,{defaultWidth:680},({width:oe,height:Ee})=>{const le=Math.floor(oe/90),pe=Math.ceil(z.length/le);return r.createElement(b.Ym,{width:oe,height:Ee,columnCount:le,columnWidth:90,rowCount:pe,rowHeight:90,itemData:{cards:z,columnCount:le,onChange:K,selected:Z},className:J.grid},(0,r.memo)(M,b.wy))})},L=j=>j===m.DD.Icon?[m.QS.Icon,m.QS.IOT,m.QS.Marker]:[m.QS.BG],B=(j,K)=>j.find(z=>K.startsWith(z.value))??j[0],w=j=>{const{value:K,mediaType:z,folderName:Z,newValue:ae,setNewValue:J}=j,oe=(0,f.wW)(R),Ee=L(z).map(X=>({label:X,value:X})),[me,re]=(0,r.useState)(),[le,pe]=(0,r.useState)(B(Ee,K?.length?K:Z)),[ee,se]=(0,r.useState)([]),[Q,G]=(0,r.useState)([]),q=X=>{X?(X=X.toLowerCase(),G(ee.filter(de=>de.search.includes(X)))):G(ee)};return(0,r.useEffect)(()=>{const X=le?.value;if(X){const de=z===m.DD.Icon?Be=>Be.name.endsWith(".svg"):Be=>Be.name.endsWith(".png")||Be.name.endsWith(".gif");(0,E.ak)().get("-- Grafana --").then(Be=>{Be.listFiles(X).subscribe({next:ke=>{const He=[];ke.forEach(ue=>{if(de(ue)){const Oe=ue.name.lastIndexOf(".");He.push({value:`${X}/${ue.name}`,label:ue.name,search:(Oe?ue.name.substring(0,Oe):ue.name).toLowerCase(),imgUrl:`public/${X}/${ue.name}`})}}),se(He),G(He)}})})}},[z,le]),r.createElement(r.Fragment,null,r.createElement(d.g,null,r.createElement(u.Ph,{options:Ee,onChange:pe,value:le,menuShouldPortal:!1})),r.createElement(d.g,null,r.createElement(P.H,{value:me??"",placeholder:"Search",onChange:X=>{q(X),re(X)}})),Q&&r.createElement("div",{className:oe.cardsWrapper},r.createElement(O,{cards:Q,onChange:X=>J(X),value:ae})))},R=j=>({cardsWrapper:t.css`
    height: 30vh;
    min-height: 50px;
    margin-top: 5px;
    max-width: 680px;
  `});var A=e(46967),U=e(64353),I=e(59961);const N=j=>{const{newValue:K,setNewValue:z,mediaType:Z}=j,ae=(0,f.wW)(F),J=(0,I.t)(K);let oe=K?.substring(K.lastIndexOf("/")+1,K.lastIndexOf("."));return oe.length>20&&(oe=oe.substring(0,20)+"..."),r.createElement(r.Fragment,null,r.createElement(d.g,null,r.createElement(A.I,{onChange:Ee=>z(Ee.currentTarget.value),value:K})),r.createElement("div",{className:ae.iconContainer},r.createElement(d.g,{label:"Preview"},r.createElement("div",{className:ae.iconPreview},Z===m.DD.Icon&&r.createElement(h.V,{src:J,className:ae.img}),Z===m.DD.Image&&K&&r.createElement("img",{src:J,alt:"Preview of the selected URL",className:ae.img}))),r.createElement(U._,null,oe)))},F=j=>({iconContainer:t.css`
    display: flex;
    flex-direction: column;
    width: 80%;
    align-items: center;
    align-self: center;
  `,iconPreview:t.css`
    width: 238px;
    height: 198px;
    border: 1px solid ${j.colors.border.medium};
    display: flex;
    align-items: center;
    justify-content: center;
  `,img:t.css`
    width: 147px;
    height: 147px;
    fill: ${j.colors.text.primary};
  `}),D=j=>{const{value:K,onChange:z,mediaType:Z,folderName:ae}=j,J=(0,f.wW)(Y),oe=()=>{z(K)},Ee=(0,r.createRef)(),{dialogProps:me}=(0,n.R)({},Ee),{overlayProps:re}=(0,s.Ir)({onClose:oe,isDismissable:!0,isOpen:!0},Ee),le=K&&K.includes("://"),[pe,ee]=(0,r.useState)(K??""),[se,Q]=(0,r.useState)(le?m.hQ.URL:m.hQ.Folder),[G,q]=(0,r.useState)(new FormData),[X,de]=(0,r.useState)(!1),[Be,ke]=(0,r.useState)({message:""}),He=we=>`${J.resourcePickerPopoverTab} ${se===we&&J.resourcePickerPopoverActiveTab}`,ue=()=>r.createElement(w,{value:K,mediaType:Z,folderName:ae,newValue:pe,setNewValue:ee}),Oe=()=>r.createElement(N,{newValue:pe,setNewValue:ee,mediaType:Z}),Fe=()=>r.createElement(v,{mediaType:Z,setFormData:q,setUpload:de,newValue:pe,error:Be}),Ie=()=>{switch(se){case m.hQ.Folder:return ue();case m.hQ.URL:return Oe();case m.hQ.Upload:return Fe();default:return ue()}};return r.createElement(c.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},r.createElement("section",{ref:Ee,...re,...me},r.createElement("div",{className:J.resourcePickerPopover},r.createElement("div",{className:J.resourcePickerPopoverTabs},r.createElement("button",{className:He(m.hQ.Folder),onClick:()=>Q(m.hQ.Folder)},"Folder"),r.createElement("button",{className:He(m.hQ.URL),onClick:()=>Q(m.hQ.URL)},"URL")),r.createElement("div",{className:J.resourcePickerPopoverContent},Ie(),r.createElement(o.h,{className:J.buttonGroup},r.createElement(l.zx,{className:J.button,variant:"secondary",onClick:()=>oe()},"Cancel"),r.createElement(l.zx,{className:J.button,variant:pe&&pe!==K?"primary":"secondary",onClick:()=>{X?fetch("/api/storage/upload",{method:"POST",body:G}).then(we=>{if(we.status>=400){we.json().then(Re=>ke(Re));return}else return we.json()}).then(we=>{(0,g.i)().get(`api/storage/read/${we.path}`).then(()=>ee(`${a.vc.appUrl}api/storage/read/${we.path}`)).then(()=>z(`${a.vc.appUrl}api/storage/read/${we.path}`))}).catch(we=>console.error(we)):z(pe)}},"Select"))))))},Y=j=>({resourcePickerPopover:t.css`
    border-radius: ${j.shape.borderRadius()};
    box-shadow: ${j.shadows.z3};
    background: ${j.colors.background.primary};
    border: 1px solid ${j.colors.border.medium};
  `,resourcePickerPopoverTab:t.css`
    width: 50%;
    text-align: center;
    padding: ${j.spacing(1,0)};
    background: ${j.colors.background.secondary};
    color: ${j.colors.text.secondary};
    font-size: ${j.typography.bodySmall.fontSize};
    cursor: pointer;
    border: none;

    &:focus:not(:focus-visible) {
      outline: none;
      box-shadow: none;
    }

    :focus-visible {
      position: relative;
    }
  `,resourcePickerPopoverActiveTab:t.css`
    color: ${j.colors.text.primary};
    font-weight: ${j.typography.fontWeightMedium};
    background: ${j.colors.background.primary};
  `,resourcePickerPopoverContent:t.css`
    width: 315px;
    font-size: ${j.typography.bodySmall.fontSize};
    min-height: 184px;
    padding: ${j.spacing(1)};
    display: flex;
    flex-direction: column;
  `,resourcePickerPopoverTabs:t.css`
    display: flex;
    width: 100%;
    border-radius: ${j.shape.borderRadius()} ${j.shape.borderRadius()} 0 0;
  `,buttonGroup:t.css`
    align-self: center;
    flex-direction: row;
  `,button:t.css`
    margin: 12px 20px 5px;
  `})},38647:(H,T,e)=>{"use strict";e.d(T,{$:()=>d});var t=e(68404),n=e(11543),c=e(81764),s=e(2594),r=e(31403),g=e(15448),f=e(37565),o=e(92484);const l=[{label:"Fixed",value:o.xy.Fixed,description:"Fixed value"},{label:"Field",value:o.xy.Field,description:"Display field value"}],a={settings:{}},m={settings:{}},d=({value:p,context:h,onChange:y})=>{const i=(0,t.useCallback)(b=>{y({...p,mode:b})},[y,p]),u=(0,t.useCallback)(b=>{y({...p,field:b})},[y,p]),P=(0,t.useCallback)((b="")=>{y({...p,fixed:b})},[y,p]),E=()=>{P("")},C=p?.mode??o.xy.Fixed;return t.createElement(t.Fragment,null,t.createElement(n.Z,null,t.createElement(c._,{label:"Source",labelWidth:9,grow:!0},t.createElement(s.S,{value:C,options:l,onChange:i,fullWidth:!0}))),C!==o.xy.Fixed&&t.createElement(n.Z,null,t.createElement(c._,{label:"Field",labelWidth:9,grow:!0},t.createElement(g.b,{context:h,value:p.field??"",onChange:u,item:a}))),C===o.xy.Fixed&&t.createElement(n.Z,{key:p?.fixed},t.createElement(c._,{label:"Value",labelWidth:9,grow:!0},t.createElement(f.A,{context:h,value:p?.fixed,onChange:P,item:m,suffix:p?.fixed&&t.createElement(r.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:E})}))),C===o.xy.Template&&t.createElement(n.Z,null,t.createElement(c._,{label:"Template",labelWidth:9,grow:!0},t.createElement(f.A,{context:h,value:p?.fixed,onChange:P,item:m}))))}},54643:(H,T,e)=>{"use strict";e.d(T,{Lm:()=>t.L,Lv:()=>h,k9:()=>B,cL:()=>S,$2:()=>R.$});var t=e(30785),n=e(68404);const c=({value:A,onChange:U})=>{const[I,N]=useState(A?[{value:A,label:A}]:[]),[F,D]=useState(),Y=window.__grafana_public_path__+"img/icons/unicons/",j=K=>{U(K),D(K)};return useEffect(()=>{getBackendSrv().get(`${Y}/index.json`).then(K=>{N(K.files.map(z=>({value:z,label:z})))})},[Y]),React.createElement(Select,{options:I,value:F,onChange:K=>{j(K.value)}})},s=null;var r=e(11543),g=e(81764),f=e(2594),o=e(15448),l=e(25532),a=e(92484),m=e(26786);const d=[{label:"Fixed",value:a.Q8.Fixed,description:"Fixed value"},{label:"Field",value:a.Q8.Field,description:"Use a string field result"}],p={settings:{}},h=A=>{const{value:U,context:I,onChange:N,item:F}=A,D=9,Y=(0,n.useCallback)(me=>{N({...U,mode:me})},[N,U]),j=(0,n.useCallback)((me="")=>{N({...U,field:me})},[N,U]),K=(0,n.useCallback)(me=>{N({...U,fixed:me??""})},[N,U]),z=me=>{me.stopPropagation(),N({mode:a.Q8.Fixed,fixed:"",field:""})},Z=U?.mode??a.Q8.Fixed,ae=F.settings?.showSourceRadio??!0,J=F.settings?.resourceType??a.DD.Icon,oe=F.settings?.folderName??l.ResourceFolderName.Icon;let Ee="";return J===a.DD.Icon&&(U?.fixed?Ee=(0,l.getPublicOrAbsoluteUrl)(U.fixed):F.settings?.placeholderValue&&(Ee=(0,l.getPublicOrAbsoluteUrl)(F.settings.placeholderValue))),n.createElement(n.Fragment,null,ae&&n.createElement(r.Z,null,n.createElement(g._,{label:"Source",labelWidth:D,grow:!0},n.createElement(f.S,{value:Z,options:d,onChange:Y,fullWidth:!0}))),Z!==a.Q8.Fixed&&n.createElement(r.Z,null,n.createElement(g._,{label:"Field",labelWidth:D,grow:!0},n.createElement(o.b,{context:I,value:U.field??"",onChange:j,item:p}))),Z===a.Q8.Fixed&&n.createElement(m.E,{onChange:K,onClear:z,value:U?.fixed,src:Ee,placeholder:F.settings?.placeholderText??"Select a value",name:y(U?.fixed)??"",mediaType:J,folderName:oe,size:a.zc.NORMAL}),Z===a.Q8.Mapping&&n.createElement(r.Z,null,n.createElement(g._,{label:"Mappings",labelWidth:D,grow:!0},n.createElement("div",null,"TODO mappings editor!"))))};function y(A){if(!A)return;const U=A.lastIndexOf("/");return U>0?A.substring(U+1):A}var v=e(52423),i=e(72648),u=e(53217),P=e(80760),E=e(45458),C=e(33048);const b={label:"Fixed value",value:"_____fixed_____"},S=A=>{const{value:U,context:I,onChange:N,item:F}=A,{settings:D}=F,Y=(0,i.wW)(M),j=U?.field,K=Boolean(!j),z=(0,P.IX)(I.data),Z=(0,P.nw)(z,j,b),ae=(0,n.useMemo)(()=>(0,C.x5)(D),[D]),J=(0,n.useCallback)(ee=>{N((0,C.C)(ee,ae))},[N,ae]),oe=(0,n.useCallback)(ee=>{const se=ee.value;se&&se!==b.value?J({...U,field:se}):J({...U,field:void 0})},[J,U]),Ee=(0,n.useCallback)(ee=>{ee!==void 0&&J({...U,min:ee})},[J,U]),me=(0,n.useCallback)(ee=>{ee!==void 0&&J({...U,max:ee})},[J,U]),re=(0,n.useCallback)(ee=>{ee!==void 0&&J({...U,fixed:ee})},[J,U]),le=U??{},pe=K?b:Z.find(ee=>ee.value===j);return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(u.Ph,{value:pe,options:Z,onChange:oe,noOptionsMessage:"No fields found"})),n.createElement("div",{className:Y.range},K&&n.createElement(r.Z,null,n.createElement(g._,{label:"Value",labelWidth:8,grow:!0},n.createElement(E.Y,{value:le.fixed,...ae,onChange:re}))),!K&&!ae.hideRange&&n.createElement(n.Fragment,null,n.createElement(r.Z,null,n.createElement(g._,{label:"Min",labelWidth:8,grow:!0},n.createElement(E.Y,{value:le.min,...ae,onChange:Ee}))),n.createElement(r.Z,null,n.createElement(g._,{label:"Max",labelWidth:8,grow:!0},n.createElement(E.Y,{value:le.max,...ae,onChange:me}))))))},M=A=>({range:v.css`
    padding-top: 8px;
  `});var x=e(14582);const O={label:"Fixed value",value:"_____fixed_____"},L=[{label:"Mod",value:a.eK.Mod,description:"Use field values, mod from max"},{label:"Clamped",value:a.eK.Clamped,description:"Use field values, clamped to max and min"}],B=({value:A,context:U,onChange:I,item:N})=>{const{settings:F}=N,D=0,Y=A?.field,j=Boolean(!Y),K=(0,P.IX)(U.data),z=(0,P.nw)(K,Y,O,x.fS.number),Z=(0,i.wW)(w),ae=(0,n.useCallback)(le=>{const pe=le.value;if(pe&&pe!==O.value)I({...A,field:pe});else{const ee=A.fixed??D;I({...A,field:void 0,fixed:ee})}},[I,A]),J=(0,n.useCallback)(le=>{I({...A,mode:le})},[I,A]),oe=(0,n.useCallback)(le=>{I({...A,field:void 0,fixed:le??D})},[I,A]),Ee=A??{},me=A?.mode??a.eK.Mod,re=j?O:z.find(le=>le.value===Y);return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(r.Z,null,n.createElement(g._,{label:"Limit",labelWidth:8,grow:!0},n.createElement(f.S,{value:me,options:L,onChange:J,fullWidth:!0}))),n.createElement(u.Ph,{value:re,options:z,onChange:ae,noOptionsMessage:"No fields found"})),n.createElement("div",{className:Z.range},j&&n.createElement(r.Z,null,n.createElement(g._,{label:"Value",labelWidth:8,grow:!0},n.createElement(E.Y,{value:Ee?.fixed??D,onChange:oe,max:F?.max,min:F?.min})))))},w=A=>({range:v.css`
    padding-top: 8px;
  `});var R=e(38647)},25532:(H,T,e)=>{"use strict";e.d(T,{MediaType:()=>t.DD,ResourceDimensionMode:()=>t.Q8,ResourceFolderName:()=>t.QS,ScalarDimensionMode:()=>t.eK,ScaleDimensionMode:()=>t.B5,TextDimensionMode:()=>t.xy,findField:()=>r.PI,findFieldIndex:()=>r.rj,getColorDimension:()=>g,getColorDimensionFromData:()=>r.FP,getPublicOrAbsoluteUrl:()=>p.t,getResourceDimension:()=>p.I,getResourceDimensionFromData:()=>r.Qz,getScalarDimension:()=>y.y,getScalarDimensionFromData:()=>r.z2,getScaleDimensionFromData:()=>r.pb,getScaledDimension:()=>o.W8,getScaledDimensionForField:()=>o.A,getTextDimension:()=>m,getTextDimensionFromData:()=>r.WO});var t=e(92484),n=e(425),c=e(59309),s=e(36512),r=e(20927);function g(v,i,u){return f((0,r.PI)(v,i.field),i,u)}function f(v,i,u){if(!v){const C=u.visualization.getColorByName(i.fixed??"grey");return{isAssumed:Boolean(i.field?.length)||!i.fixed,fixed:C,value:()=>C,get:b=>C}}const P=(0,n.fD)(v);if(P.isByValue||v.config.mappings?.length){const C=(0,c.xD)(v,!0);C!==v.config&&(v={...v,config:C},v.state=void 0);const b=(0,s.U)({field:v,theme:u}),S=M=>b(M).color??"#ccc";return{field:v,get:M=>S(v.values.get(M)),value:()=>S((0,r.cR)(v))}}const E=P.getCalculator(v,u)(0,0);return{fixed:E,value:()=>E,get:C=>E,field:v}}var o=e(33048),l=e(14582),a=e(20112);function m(v,i){const u=i.field?(0,r.PI)(v,i.field):v?.fields.find(P=>P.type===l.fS.string);return d(u,i)}function d(v,i){let u=i.fixed;const P=i.mode??t.xy.Fixed;if(P===t.xy.Fixed)return{isAssumed:!Boolean(u),fixed:u,value:()=>u,get:C=>u};if(P===t.xy.Template){const C=b=>`TEMPLATE[${i.fixed} // ${b}]`;return v?{field:v,get:b=>C(v.values.get(b)),value:()=>C((0,r.cR)(v))}:(u=C(""),{isAssumed:!0,fixed:u,value:()=>u,get:b=>u})}if(!v)return{isAssumed:!0,fixed:u,value:()=>u,get:C=>u};let E=C=>(0,a.zc)(v.display(C));return{field:v,get:C=>E(v.values.get(C)),value:()=>E((0,r.cR)(v))}}var p=e(59961),h=e(97934),y=e(86682)},59961:(H,T,e)=>{"use strict";e.d(T,{I:()=>s,t:()=>c});var t=e(92484),n=e(20927);function c(r){return r?r.indexOf(":/")>0?r:window.__grafana_public_path__+r:""}function s(r,g){const f=g.mode??t.Q8.Fixed;if(f===t.Q8.Fixed){const a=c(g.fixed);return{isAssumed:!Boolean(a),fixed:a,value:()=>a,get:m=>a}}const o=(0,n.PI)(r,g.field);if(!o){const a="";return{isAssumed:!0,fixed:a,value:()=>a,get:m=>a}}if(f===t.Q8.Mapping){const a=m=>c(`${m}`);return{field:o,get:m=>a(o.values.get(m)),value:()=>a((0,n.cR)(o))}}const l=a=>{if(o&&o.display){const m=o.display(a).icon;return c(m??"")}return""};return{field:o,get:a=>l(o.values.get(a)),value:()=>l((0,n.cR)(o))}}},86682:(H,T,e)=>{"use strict";e.d(T,{y:()=>c});var t=e(92484),n=e(20927);function c(r,g){return s((0,n.PI)(r,g?.field),g)}function s(r,g){if(!r){const l=g.fixed??0;return{isAssumed:Boolean(g.field?.length)||!g.fixed,fixed:l,value:()=>l,get:()=>l}}let f=l=>l%g.max;return g.mode===t.eK.Clamped&&(f=l=>l<g.min?g.min:l>g.max?g.max:l),{field:r,get:l=>{const a=r.values.get(l);return a===null||typeof a!="number"?0:f(a)},value:()=>(0,n.cR)(r)}}},33048:(H,T,e)=>{"use strict";e.d(T,{A:()=>r,C:()=>f,W8:()=>s,x5:()=>g});var t=e(59309),n=e(20927),c=e(25532);function s(o,l){return r((0,n.PI)(o,l?.field),l)}function r(o,l,a){if(!o){const v=l.fixed??0;return{isAssumed:Boolean(l.field?.length)||!l.fixed,fixed:v,value:()=>v,get:()=>v}}const m=(0,t.dz)(o),d=l.max-l.min;if(o.values.length<1||d<=0||m.delta<=0)return{fixed:l.min,value:()=>l.min,get:()=>l.min};let h=v=>l.min+v*d;if(a===c.ScaleDimensionMode.Quadratic){const v=Math.PI*(l.max/2)**2,i=Math.PI*(l.min/2)**2,u=v-i;h=P=>{let E=i+u*P;return Math.sqrt(E/Math.PI)*2}}const y=v=>{const i=o.values.get(v);let u=0;return i!==-1/0&&(u=(i-m.min)/m.delta),u>1?u=1:u<0&&(u=0),h(u)};return{get:y,value:()=>y((0,n.cR)(o)),field:o}}function g(o){return o||(o={min:0,max:1}),o.min==null&&(o.min=0),o.max==null&&(o.max=1),o}function f(o,l){let{min:a,max:m}=g(l);if(o||(o={}),o.max==null&&(o.max=m),o.min==null&&(o.min=a),o.min>o.max){const d=o.max;o.max=o.min,o.min=d}return o.min<a&&(o.min=a),o.max>m&&(o.max=m),o.fixed==null&&(o.fixed=o.min+(o.max-o.min)/2),o.field||(o.fixed>m?o.fixed=m:o.fixed<a&&(o.fixed=a)),o}},92484:(H,T,e)=>{"use strict";e.d(T,{B5:()=>t,DD:()=>f,Q8:()=>r,QS:()=>g,eK:()=>n,hQ:()=>o,qj:()=>s,xy:()=>c,zc:()=>l});var t=(a=>(a.Linear="linear",a.Quadratic="quad",a))(t||{}),n=(a=>(a.Mod="mod",a.Clamped="clamped",a))(n||{}),c=(a=>(a.Fixed="fixed",a.Field="field",a.Template="template",a))(c||{});const s=Object.freeze({fixed:"",mode:"field",field:""});var r=(a=>(a.Fixed="fixed",a.Field="field",a.Mapping="mapping",a))(r||{}),g=(a=>(a.Icon="img/icons/unicons",a.IOT="img/icons/iot",a.Marker="img/icons/marker",a.BG="img/bg",a))(g||{}),f=(a=>(a.Icon="icon",a.Image="image",a))(f||{}),o=(a=>(a.Folder="folder",a.URL="url",a.Upload="upload",a))(o||{}),l=(a=>(a.SMALL="small",a.NORMAL="normal",a))(l||{})},20927:(H,T,e)=>{"use strict";e.d(T,{FP:()=>g,PI:()=>m,Qz:()=>l,WO:()=>a,cR:()=>p,pb:()=>f,rj:()=>d,z2:()=>o});var t=e(89890),n=e(21760),c=e(35645),s=e(25532),r=e(86682);function g(h,y){if(h?.series&&y.field)for(const v of h.series){const i=(0,s.getColorDimension)(v,y,c.v.theme2);if(!i.isAssumed||h.series.length===1)return i}return(0,s.getColorDimension)(void 0,y,c.v.theme2)}function f(h,y){if(h?.series&&y.field)for(const v of h.series){const i=(0,s.getScaledDimension)(v,y);if(!i.isAssumed||h.series.length===1)return i}return(0,s.getScaledDimension)(void 0,y)}function o(h,y){if(h?.series&&y.field)for(const v of h.series){const i=(0,r.y)(v,y);if(!i.isAssumed||h.series.length===1)return i}return(0,r.y)(void 0,y)}function l(h,y){if(h?.series&&y.field)for(const v of h.series){const i=(0,s.getResourceDimension)(v,y);if(!i.isAssumed||h.series.length===1)return i}return(0,s.getResourceDimension)(void 0,y)}function a(h,y){if(h?.series&&y.field)for(const v of h.series){const i=(0,s.getTextDimension)(v,y);if(!i.isAssumed||h.series.length===1)return i}return(0,s.getTextDimension)(void 0,y)}function m(h,y){if(!(!h||!y?.length))for(const v of h.fields){if(y===v.name)return v;const i=(0,t.C)(v,h);if(y===i)return v}}function d(h,y){if(!(!h||!y?.length))for(let v=0;v<h.fields.length;v++){const i=h.fields[v];if(y===i.name)return v;const u=(0,t.C)(i,h);if(y===u)return v}}function p(h){const y=h.state?.calcs;if(y){const u=y[n.gz.lastNotNull];if(u!=null)return u}const v=h.values;let i=v.length-1;for(;i>=0;){const u=v.get(i--);if(u!=null)return u}}},94619:(H,T,e)=>{"use strict";e.d(T,{m:()=>Z});var t=e(52423),n=e(68404),c=e(89029),s=e(40885),r=e(72648),g=e(83437),f=e(91162),o=e(25405),l=e(81168),a=e(93713),m=e(67089),d=e(82897),p=e(33180),h=e(46519),y=e(39904),v=e(92624),i=e(71570);function u({splitOpenFn:J,traceToLogsOptions:oe,traceToMetricsOptions:Ee,dataFrame:me,createFocusSpanLink:re,trace:le}){if(!me)return;let pe=L(le);const ee=me.fields.some(Q=>Boolean(Q.config.links?.length));if(me.fields.length===1||!ee)return E(J,me.fields[0],oe,Ee,re,pe);if(ee)return function(G){pe={...pe,...B(G)};const q=me.fields.find(X=>Boolean(X.config.links?.length));try{const X=(0,i.a)({field:q,rowIndex:G.dataFrameRowIndex,splitOpenFn:J,range:x(G),dataFrame:me,vars:pe});return{logLinks:[{href:X[0].href,onClick:X[0].onClick,content:n.createElement(y.J,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:X[0].origin}]}}catch(X){console.error(X);return}}}const P=["cluster","hostname","namespace","pod"].map(J=>({key:J}));function E(J,oe,Ee,me,re,le){let pe;Ee?.datasourceUid&&(pe=(0,f.ak)().getInstanceSettings(Ee.datasourceUid));const ee=pe?.type==="grafana-splunk-datasource";let se;return me?.datasourceUid&&(se=(0,f.ak)().getInstanceSettings(me.datasourceUid)),function(G){le={...le,...B(G)};const q={traceLinks:[]};let X,de="";if(pe&&Ee){const Be=Ee.customQuery?Ee.query:void 0,ke=Ee.tags||P;switch(pe?.type){case"loki":de=M(G,ke),X=C(G,Ee,de,Be);break;case"grafana-splunk-datasource":de=M(G,ke,{joinBy:" "}),X=S(G,Ee,de,Be);break;case"elasticsearch":case"grafana-opensearch-datasource":de=M(G,ke,{labelValueSign:":",joinBy:" AND "}),X=b(G,Ee,de,Be);break}if(X){const He={title:pe.name,url:"",internal:{datasourceUid:pe.uid,datasourceName:pe.name,query:X}};if(le={...le,__tags:{text:"Tags",value:de}},w(He.internal.query,le)){const ue=(0,c._)({link:He,internalLink:He.internal,scopedVars:le,range:x(G,{startMs:Ee.spanStartTimeShift?p.intervalToMs(Ee.spanStartTimeShift):0,endMs:Ee.spanEndTimeShift?p.intervalToMs(Ee.spanEndTimeShift):0},ee),field:{},onClickFn:J,replaceVariables:(0,s.J)().replace.bind((0,s.J)())});q.logLinks=[{href:ue.href,onClick:ue.onClick,content:n.createElement(y.J,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:oe}]}}}if(se&&me?.queries){q.metricLinks=[];for(const Be of me.queries){const ke=O(Be,me?.tags||[],G),He={title:se.name,url:"",internal:{datasourceUid:se.uid,datasourceName:se.name,query:{expr:ke,refId:"A"}}},ue=(0,c._)({link:He,internalLink:He.internal,scopedVars:{},range:x(G,{startMs:me.spanStartTimeShift?p.intervalToMs(me.spanStartTimeShift):0,endMs:me.spanEndTimeShift?p.intervalToMs(me.spanEndTimeShift):0}),field:{},onClickFn:J,replaceVariables:(0,s.J)().replace.bind((0,s.J)())});q.metricLinks.push({title:Be?.name,href:ue.href,onClick:ue.onClick,content:n.createElement(y.J,{name:"chart-line",title:"Explore metrics for this span"}),field:oe})}}if(G.references&&re)for(const Be of G.references){if(Be.refType==="CHILD_OF")continue;const ke=re(Be.traceID,Be.spanID);q.traceLinks.push({href:ke.href,title:Be.span?Be.span.operationName:"View linked span",content:n.createElement(y.J,{name:"link",title:"View linked span"}),onClick:ke.onClick,field:ke.origin})}if(G.subsidiarilyReferencedBy&&re)for(const Be of G.subsidiarilyReferencedBy){const ke=re(Be.traceID,Be.spanID);q.traceLinks.push({href:ke.href,title:Be.span?Be.span.operationName:"View linked span",content:n.createElement(y.J,{name:"link",title:"View linked span"}),onClick:ke.onClick,field:ke.origin})}return q}}function C(J,oe,Ee,me){const{filterByTraceID:re,filterBySpanID:le}=oe;if(me)return{expr:me,refId:""};if(!Ee)return;let pe="{${__tags}}";return re&&J.traceID&&(pe+=' |="${__span.traceId}"'),le&&J.spanID&&(pe+=' |="${__span.spanId}"'),{expr:pe,refId:""}}function b(J,oe,Ee,me){const{filterByTraceID:re,filterBySpanID:le}=oe;if(me)return{query:me,refId:"",metrics:[{id:"1",type:"logs"}]};let pe=[];return le&&J.spanID&&pe.push('"${__span.spanId}"'),re&&J.traceID&&pe.push('"${__span.traceId}"'),Ee&&pe.push("${__tags}"),{query:pe.join(" AND "),refId:"",metrics:[{id:"1",type:"logs"}]}}function S(J,oe,Ee,me){const{filterByTraceID:re,filterBySpanID:le}=oe;if(me)return{query:me,refId:""};let pe="";return Ee&&(pe+="${__tags}"),re&&J.traceID&&(pe+=' "${__span.traceId}"'),le&&J.spanID&&(pe+=' "${__span.spanId}"'),{query:pe,refId:""}}function M(J,oe,{labelValueSign:Ee="=",joinBy:me=", "}={}){return[...J.process.tags,...J.tags,{key:"spanId",value:J.spanID},{key:"traceId",value:J.traceID},{key:"name",value:J.operationName},{key:"duration",value:J.duration}].map(re=>{const le=oe.find(pe=>pe.key===re.key);if(le)return`${le.value?le.value:le.key}${Ee}"${re.value}"`}).filter(re=>Boolean(re)).join(me)}function x(J,oe={startMs:0,endMs:0},Ee=!1){const me=Math.floor(J.startTime/1e3+oe.startMs),re=(0,h.CQ)(me),le=(J.startTime+J.duration)/1e3;let pe=Math.floor(le+oe.endMs);Ee&&pe-me<1e3?pe=me+1e3:me===pe&&pe++;const ee=(0,h.CQ)(pe);return{from:re,to:ee,raw:{from:re,to:ee}}}function O(J,oe=[],Ee){if(!J.query)return`histogram_quantile(0.5, sum(rate(traces_spanmetrics_latency_bucket{service="${Ee.process.serviceName}"}[5m])) by (le))`;let me=J.query;if(oe.length&&me.indexOf("$__tags")!==-1){const re=[...Ee.process.tags,...Ee.tags],pe=oe.reduce((ee,se)=>{const Q=re.find(G=>G.key===se.key)?.value;return Q&&ee.push(`${se.value?se.value:se.key}="${Q}"`),ee},[])?.join(", ");me=me.replace(/\$__tags/g,pe)}return me}function L(J){return{__trace:{text:"Trace",value:{duration:J.duration,name:J.traceName,traceId:J.traceID}}}}function B(J){const oe={};for(const Ee of J.process.tags)oe[Ee.key]=Ee.value;for(const Ee of J.tags)oe[Ee.key]=Ee.value;return{__span:{text:"Span",value:{spanId:J.spanID,traceId:J.traceID,duration:J.duration,name:J.operationName,tags:oe}}}}function w(J,oe){const Ee=A(R(J),oe);return Object.values(Ee).every(me=>me!==void 0)}function R(J){let oe="";for(const Ee of Object.keys(J))typeof J[Ee]=="string"?oe+=" "+J[Ee]:typeof J[Ee]=="object"&&J[Ee]!==null&&(oe+=" "+R(J[Ee]));return oe}function A(J,oe){const Ee=new RegExp(v.J7),me={};return J.replace(Ee,(re,le,pe,ee,se,Q)=>{const G=le||pe||se;return me[G]=U(G,Q,oe),""}),me}function U(J,oe,Ee){const me=Ee[J];if(me)return oe?(0,d.property)(oe)(me.value):me.value}function I(){const[J,oe]=(0,n.useState)(new Set),Ee=(0,n.useCallback)(function(se){if(J.size===0)return;let Q=-1,G=!0;const q=se.reduce((X,de)=>(de.depth<=Q&&(G=!0),G&&X.has(de.spanID)&&(X.delete(de.spanID),G=!1,Q=de.depth),X),new Set(J));oe(q)},[J]),me=(0,n.useCallback)(function(se){if(N(se,J))return;let Q;const G=se.reduce((q,X)=>(Q&&X.depth<=Q.depth?(q.add(Q.spanID),X.hasChildren&&(Q=X)):X.hasChildren&&!q.has(X.spanID)&&(Q=X),q),new Set(J));Q&&G.add(Q.spanID),oe(G)},[J]),re=(0,n.useCallback)(function(){oe(new Set)},[]),le=(0,n.useCallback)(function(se){if(N(se,J))return;const Q=se.reduce((G,q)=>(q.hasChildren&&G.add(q.spanID),G),new Set);oe(Q)},[J]),pe=(0,n.useCallback)(function(se){const Q=new Set(J);J.has(se)?Q.delete(se):Q.add(se),oe(Q)},[J]);return{childrenHiddenIDs:J,expandOne:Ee,collapseOne:me,expandAll:re,collapseAll:le,childrenToggle:pe}}function N(J,oe){return J.filter(me=>me.hasChildren).length===oe.size}function F(J){const[oe,Ee]=(0,n.useState)(new Map);(0,n.useEffect)(()=>{Ee(new Map)},[J,Ee]);const me=(0,n.useCallback)(function(ee){const se=new Map(oe);se.has(ee)?se.delete(ee):se.set(ee,new m.DetailState),Ee(se)},[oe]),re=(0,n.useCallback)(function(ee,se){const Q=oe.get(ee);if(!Q)return;const G=Q.toggleLogItem(se),q=new Map(oe);return q.set(ee,G),Ee(q)},[oe]),le=(0,n.useCallback)(function(ee,se){const Q=oe.get(ee);if(!Q)return;const G=Q.toggleReferenceItem(se),q=new Map(oe);return q.set(ee,G),Ee(q)},[oe]);return{detailStates:oe,toggleDetail:me,detailLogItemToggle:re,detailLogsToggle:(0,n.useCallback)(pe=>D("logs",oe,Ee)(pe),[oe]),detailWarningsToggle:(0,n.useCallback)(pe=>D("warnings",oe,Ee)(pe),[oe]),detailStackTracesToggle:(0,n.useCallback)(pe=>D("stackTraces",oe,Ee)(pe),[oe]),detailReferenceItemToggle:le,detailReferencesToggle:(0,n.useCallback)(pe=>D("references",oe,Ee)(pe),[oe]),detailProcessToggle:(0,n.useCallback)(pe=>D("process",oe,Ee)(pe),[oe]),detailTagsToggle:(0,n.useCallback)(pe=>D("tags",oe,Ee)(pe),[oe])}}function D(J,oe,Ee){return me=>{const re=oe.get(me);if(!re)return;let le;J==="tags"?le=re.toggleTags():J==="process"?le=re.toggleProcess():J==="warnings"?le=re.toggleWarnings():J==="references"?le=re.toggleReferences():J==="stackTraces"?le=re.toggleStackTraces():le=re.toggleLogs();const pe=new Map(oe);pe.set(me,le),Ee(pe)}}function Y(){const[J,oe]=(0,n.useState)(new Set),Ee=(0,n.useCallback)(function(le){oe(pe=>{const ee=new Set(pe);return ee.add(le),ee})},[]),me=(0,n.useCallback)(function(le){oe(pe=>{const ee=new Set(pe);return ee.delete(le),ee})},[]);return{hoverIndentGuideIds:J,addHoverIndentGuideId:Ee,removeHoverIndentGuideId:me}}function j(){const[J,oe]=(0,n.useState)({time:{current:[0,1]}}),Ee=(0,n.useCallback)(function(le){oe(pe=>{const ee={...pe.time,...le};return{...pe,time:ee}})},[]),me=(0,n.useCallback)(function(le,pe){const se={current:[le,pe]};oe(Q=>({...Q,time:se}))},[]);return{viewRange:J,updateViewRangeTime:me,updateNextViewRangeTime:Ee}}const K=J=>({noDataMsg:t.css`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${J.typography.h4.fontSize};
    color: ${J.colors.text.secondary};
  `});function z(){return{}}function Z(J){const{spanFindMatches:oe,traceProp:Ee,datasource:me,topOfViewRef:re,topOfViewRefType:le}=J,{detailStates:pe,toggleDetail:ee,detailLogItemToggle:se,detailLogsToggle:Q,detailProcessToggle:G,detailReferencesToggle:q,detailReferenceItemToggle:X,detailTagsToggle:de,detailWarningsToggle:Be,detailStackTracesToggle:ke}=F(J.dataFrames[0]),{removeHoverIndentGuideId:He,addHoverIndentGuideId:ue,hoverIndentGuideIds:Oe}=Y(),{viewRange:Fe,updateViewRangeTime:Ie,updateNextViewRangeTime:we}=j(),{expandOne:Re,collapseOne:_e,childrenToggle:et,collapseAll:qe,childrenHiddenIDs:Je,expandAll:lt}=I(),at=(0,r.wW)(K),[Xe,gt]=(0,n.useState)(.25),[ot,Ye]=(0,n.useState)(!1),[mt,ce]=ae({refId:J.dataFrames[0]?.refId,exploreId:J.exploreId,datasource:me,splitOpenFn:J.splitOpenFn}),be=(0,n.useMemo)(()=>({childrenHiddenIDs:Je,detailStates:pe,hoverIndentGuideIds:Oe,shouldScrollToFirstUiFindMatch:!1,spanNameColumnWidth:Xe,traceID:J.traceProp?.traceID}),[Je,pe,Oe,Xe,J.traceProp?.traceID]),Te=(0,f.ak)().getInstanceSettings(me?.name),Ke=(0,g.p)(Te?.jsonData),ge=Te?.jsonData?.tracesToMetrics,Me=Te?.jsonData,ye=(0,n.useMemo)(()=>u({splitOpenFn:J.splitOpenFn,traceToLogsOptions:Ke,traceToMetricsOptions:ge,dataFrame:J.dataFrames[0],createFocusSpanLink:ce,trace:Ee}),[J.splitOpenFn,Ke,ge,J.dataFrames,ce,Ee]),fe=(0,n.useCallback)(()=>Ye(!ot),[ot]),he=(0,l.useSelector)(Ae=>(0,o.Z)(Ae.user)),De=me?me?.type:"unknown";return n.createElement(n.Fragment,null,J.dataFrames?.length&&J.dataFrames[0]?.meta?.preferredVisualisationType==="trace"&&Ee?n.createElement(n.Fragment,null,n.createElement(m.TracePageHeader,{canCollapse:!1,hideMap:!1,hideSummary:!1,onSlimViewClicked:fe,onTraceGraphViewClicked:z,slimView:ot,trace:Ee,updateNextViewRangeTime:we,updateViewRangeTime:Ie,viewRange:Fe,timeZone:he}),n.createElement(m.TraceTimelineViewer,{registerAccessors:z,scrollToFirstVisibleSpan:z,findMatchesIDs:oe,trace:Ee,datasourceType:De,spanBarOptions:Me?.spanBar,traceTimeline:be,updateNextViewRangeTime:we,updateViewRangeTime:Ie,viewRange:Fe,timeZone:he,setSpanNameColumnWidth:gt,collapseAll:qe,collapseOne:_e,expandAll:lt,expandOne:Re,childrenToggle:et,clearShouldScrollToFirstUiFindMatch:z,detailLogItemToggle:se,detailLogsToggle:Q,detailWarningsToggle:Be,detailStackTracesToggle:ke,detailReferencesToggle:q,detailReferenceItemToggle:X,detailProcessToggle:G,detailTagsToggle:de,detailToggle:ee,setTrace:z,addHoverIndentGuideId:ue,removeHoverIndentGuideId:He,linksGetter:()=>[],uiFind:J.search,createSpanLink:ye,scrollElement:J.scrollElement,focusedSpanId:mt,focusedSpanIdForSearch:J.focusedSpanIdForSearch,createFocusSpanLink:ce,topOfViewRef:re,topOfViewRefType:le})):n.createElement("div",{className:at.noDataMsg},"No data"))}function ae(J){const oe=(0,l.useSelector)(ee=>ee.explore[J.exploreId]?.panelsState.trace),Ee=oe?.spanId,me=(0,l.useDispatch)(),re=ee=>me((0,a.km)(J.exploreId,"trace",{...oe,spanId:ee})),le=(0,l.useSelector)(ee=>ee.explore[J.exploreId]?.queries.find(se=>se.refId===J.refId));return[Ee,(ee,se)=>{const Q={title:"Deep link to this span",url:"",internal:{datasourceUid:J.datasource?.uid,datasourceName:J.datasource?.name,query:{...le,query:ee},panelsState:{trace:{spanId:se}}}},G=le?.queryType==="traceId"&&le.query===ee;return(0,c._)({link:Q,internalLink:Q.internal,scopedVars:{},range:{},field:{},onClickFn:G?()=>re(Ee===se?void 0:se):J.splitOpenFn?()=>J.splitOpenFn({datasourceUid:J.datasource?.uid,query:{...le,query:ee},panelsState:{trace:{spanId:se}}}):void 0,replaceVariables:(0,s.J)().replace.bind((0,s.J)())})}]}},99746:(H,T,e)=>{"use strict";e.d(T,{h:()=>c});var t=e(35008),n=e.n(t);function c(s,r,g){if(s.isLight)return r;{if(g){const l=n()(r);return n().mostReadable(g,[l.clone().lighten(25),l.clone().lighten(10),l,l.clone().darken(10),l.clone().darken(25)],{includeFallbackColors:!1}).toHex8String()}const f=n()(r).toHsl();f.l=1-f.l;const o=n()(f);return o.isLight()?o.darken(5).toHex8String():o.lighten(5).toHex8String()}}},72169:(H,T,e)=>{"use strict";e.d(T,{Z:()=>h});var t=e(52423),n=e(9085),c=e.n(n),s=e(68404),r=e(41818),g=e(35645),f=e(72648),o=e(31403),l=e(8180),a=e(46967);class m extends s.PureComponent{constructor(){super(...arguments),this.clearUiFind=()=>{this.props.onChange("")}}render(){const{allowClear:v,inputProps:i,value:u}=this.props,P=s.createElement(s.Fragment,null,i.suffix,v&&u&&u.length&&s.createElement(l.h,{name:"times",onClick:this.clearUiFind}));return s.createElement(a.I,{placeholder:"Find...",...i,onChange:E=>this.props.onChange(E.currentTarget.value),suffix:P,value:u})}}m.defaultProps={inputProps:{},trackFindFunction:void 0,value:void 0};var d=e(42413);const p=y=>({TracePageSearchBar:t.css`
      label: TracePageSearchBar;
      float: right;
      position: absolute;
      top: 0;
      right: 0;
      z-index: ${y.zIndex.navbarFixed};
      background: ${y.colors.background.primary};
      margin-bottom: -48px;
      padding: 8px;
      margin-right: 2px;
      border-radius: 4px;
      box-shadow: ${y.shadows.z2};
    `,TracePageSearchBarBar:t.css`
      label: TracePageSearchBarBar;
      max-width: 20rem;
      transition: max-width 0.5s;
      &:focus-within {
        max-width: 100%;
      }
    `,TracePageSearchBarSuffix:t.css`
      label: TracePageSearchBarSuffix;
      opacity: 0.6;
    `,TracePageSearchBarBtn:t.css`
      label: TracePageSearchBarBtn;
      transition: 0.2s;
      margin-left: 8px;
    `,TracePageSearchBarBtnDisabled:t.css`
      label: TracePageSearchBarBtnDisabled;
      opacity: 0.5;
    `,TracePageSearchBarLocateBtn:t.css`
      label: TracePageSearchBarLocateBtn;
      padding: 1px 8px 4px;
    `}),h=(0,s.memo)(function(v){const{navigable:i,setSearch:u,searchValue:P,searchBarSuffix:E,spanFindMatches:C,focusedSpanIdForSearch:b,setSearchBarSuffix:S,setFocusedSpanIdForSearch:M,datasourceType:x}=v,O=(0,f.wW)(p),L=P?s.createElement("span",{className:O.TracePageSearchBarSuffix,"aria-label":"Search bar suffix"},E):null,B=c()(O.TracePageSearchBarBtn,{[O.TracePageSearchBarBtnDisabled]:!P}),w={className:c()(O.TracePageSearchBarBar,d.A4),name:"search",suffix:L},R=N=>{M(""),S(""),u(N)},A=()=>{(0,r.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:x,grafana_version:g.v.buildInfo.version,direction:"next"});const N=Array.from(C),F=N.indexOf(b)?N.indexOf(b):0;if(F===-1||F===N.length-1){M(N[0]),S(I(1));return}M(N[F+1]),S(I(F+2))},U=()=>{(0,r.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:x,grafana_version:g.v.buildInfo.version,direction:"prev"});const N=Array.from(C),F=N.indexOf(b)?N.indexOf(b):0;if(F===-1||F===0){M(N[N.length-1]),S(I(N.length));return}M(N[F-1]),S(I(F))},I=N=>C?.size&&C?.size>0?N+" of "+C?.size:"";return s.createElement("div",{className:O.TracePageSearchBar},s.createElement("span",{className:d.NY,style:{display:"flex"}},s.createElement(m,{onChange:R,value:P,inputProps:w,allowClear:!0}),s.createElement(s.Fragment,null,i&&s.createElement(s.Fragment,null,s.createElement(o.zx,{className:B,variant:"secondary",disabled:!P,type:"button",icon:"arrow-down","aria-label":"Next results button",onClick:A}),s.createElement(o.zx,{className:B,variant:"secondary",disabled:!P,type:"button",icon:"arrow-up","aria-label":"Prev results button",onClick:U})))))})},55478:(H,T,e)=>{"use strict";e.d(T,{Z:()=>l});var t=e(52423),n=e(9085),c=e.n(n),s=e(68404),r=e(72648),g=e(99746),f=e(5861);const o=a=>({Ticks:t.css`
      label: Ticks;
      pointer-events: none;
    `,TicksTick:t.css`
      label: TicksTick;
      position: absolute;
      height: 100%;
      width: 1px;
      background: ${(0,g.h)(a,"#d8d8d8")};
      &:last-child {
        width: 0;
      }
    `,TicksTickLabel:t.css`
      label: TicksTickLabel;
      left: 0.25rem;
      position: absolute;
    `,TicksTickLabelEndAnchor:t.css`
      label: TicksTickLabelEndAnchor;
      left: initial;
      right: 0.25rem;
    `});function l(a){const{endTime:m,numTicks:d,showLabels:p,startTime:h}=a;let y;if(p){y=[];const u=(m||0)-(h||0);for(let P=0;P<d;P++){const E=(h||0)+P/(d-1)*u;y.push((0,f.LU)(E))}}const v=(0,r.wW)(o),i=[];for(let u=0;u<d;u++){const P=u/(d-1);i.push(s.createElement("div",{"data-testid":"TicksID",key:P,className:v.TicksTick,style:{left:`${P*100}%`}},y&&s.createElement("span",{className:c()(v.TicksTickLabel,{[v.TicksTickLabelEndAnchor]:P>=1})},y[u])))}return s.createElement("div",{className:v.Ticks},i)}l.defaultProps={endTime:null,showLabels:null,startTime:null}},93804:(H,T,e)=>{"use strict";e.d(T,{Z:()=>o});var t=e(52423),n=e(9085),c=e.n(n),s=e(68404),r=e(72648),g=e(42413);const f=()=>({flexRow:t.css`
      display: flex;
      flex: 0 1 auto;
      flex-direction: row;
    `});function o(a){const{children:m,className:d="",...p}=a,h=(0,r.wW)(f);return s.createElement("div",{className:c()(h.flexRow,d),...p},m)}o.defaultProps={className:""};function l(a){const{children:m,className:d="",width:p,style:h,...y}=a,v=`${p*100}%`,i={...h,flexBasis:v,maxWidth:v};return s.createElement("div",{className:c()(g.WW,d),style:i,"data-testid":"TimelineRowCell",...y},m)}l.defaultProps={className:"",style:{}},o.Cell=l},93183:(H,T,e)=>{"use strict";e.d(T,{l4:()=>pt,ZP:()=>qn});var t=e(52423),n=e(82897),c=e(58635),s=e(68404),r=e(41818),g=e(35645),f=e(7804),o=e(64319),l=e(72648);const a="peer.service";var m=e(9096);class d{constructor(ut){this.ys=[],this.heights=[],this.bufferLen=ut,this.dataLen=-1,this.lastI=-1}profileData(ut){ut!==this.dataLen&&(this.dataLen=ut,this.ys.length=ut,this.heights.length=ut,this.lastI>=ut&&(this.lastI=ut-1))}calcHeights(ut,nt,vt){vt!=null&&(this.lastI=vt);let ht=ut+this.bufferLen;if(ht<=this.lastI)return;ht>=this.heights.length&&(ht=this.heights.length-1);let It=this.lastI;for(this.lastI===-1&&(It=0,this.ys[0]=0);It<=ht;){const Ft=this.heights[It]=nt(It);this.ys[It+1]=this.ys[It]+Ft,It++}this.lastI=ht}calcYs(ut,nt){for(;(this.ys[this.lastI]==null||ut>this.ys[this.lastI])&&this.lastI<this.dataLen-1;)this.calcHeights(this.lastI,nt)}confirmHeight(ut,nt){let vt=ut;if(vt>this.lastI){this.calcHeights(vt,nt);return}const ht=nt(vt);if(ht===this.heights[vt])return;const It=ht-this.heights[vt];for(this.heights[vt]=ht;++vt<=this.lastI;)this.ys[vt]+=It;this.ys[this.lastI+1]!=null&&(this.ys[this.lastI+1]+=It)}findFloorIndex(ut,nt){this.calcYs(ut,nt);let vt=0,ht=this.lastI;if(this.ys.length<2||ut<this.ys[1])return 0;if(ut>this.ys[ht])return ht;let It;for(;vt<ht;)if(It=vt+.5*(ht-vt)|0,ut>this.ys[It]){if(ut<=this.ys[It+1])return It;vt=It}else if(ut<this.ys[It]){if(ut>=this.ys[It-1])return It-1;ht=It}else return It;throw new Error(`unable to find floor index for y=${ut}`)}getRowPosition(ut,nt){return this.confirmHeight(ut,nt),{height:this.heights[ut],y:this.ys[ut]}}getEstimatedHeight(){const ut=this.ys[this.lastI]+this.heights[this.lastI];return this.lastI>=this.dataLen-1?ut|0:ut/(this.lastI+1)*this.heights.length|0}}const p=100;class h extends s.Component{constructor(ut){super(ut),this.getViewHeight=()=>this._viewHeight,this.getBottomVisibleIndex=()=>{const nt=this._scrollTop+this._viewHeight;return this._yPositions.findFloorIndex(nt,this._getHeight)},this.getTopVisibleIndex=()=>this._yPositions.findFloorIndex(this._scrollTop,this._getHeight),this.getRowPosition=nt=>this._yPositions.getRowPosition(nt,this._getHeight),this.scrollToIndex=nt=>{const{scrollElement:vt}=this.props,ht=vt?.getBoundingClientRect().top||0,Ft=(vt?.scrollTop||0)+(this._itemHolderElm?.getBoundingClientRect().top||0)-ht,en=this.getRowPosition(nt).y;this.props.scrollElement?.scrollTo({top:en+Ft-80})},this._onScroll=()=>{this._isScrolledOrResized||(this._isScrolledOrResized=!0,window.requestAnimationFrame(this._positionList))},this._positionList=()=>{if(this._isScrolledOrResized=!1,!this._wrapperElm)return;this._calcViewIndexes();const nt=this.props.viewBufferMin>this._startIndex?0:this._startIndex-this.props.viewBufferMin,vt=this.props.viewBufferMin<this.props.dataLength-this._endIndex?this._endIndex+this.props.viewBufferMin:this.props.dataLength-1;(nt<this._startIndexDrawn||vt>this._endIndexDrawn)&&this.forceUpdate()},this._initWrapper=nt=>{this.props.windowScroller&&(this._wrapperElm=nt,nt&&(this._viewHeight=nt.clientHeight))},this._initItemHolder=nt=>{this._itemHolderElm=nt,this._scanItemHeights()},this._scanItemHeights=()=>{const nt=this.props.getIndexFromKey;if(!this._itemHolderElm)return;let vt=null,ht=null,It=!1;const Ft=this._itemHolderElm.childNodes,en=Ft.length;for(let sn=0;sn<en;sn++){const Mn=Ft[sn],En=Mn.getAttribute("data-item-key");if(!En){console.warn("itemKey not found");continue}const Bn=(Mn.firstElementChild||Mn).clientHeight,ea=this._knownHeights.get(En);Bn!==ea&&(this._knownHeights.set(En,Bn),It?ht=En:(It=!0,vt=ht=En))}if(vt!=null&&ht!=null){const sn=nt(vt),Mn=ht===vt?sn:nt(ht);this._yPositions.calcHeights(Mn,this._getHeight,sn),this.forceUpdate()}},this._getHeight=nt=>{const vt=this.props.getKeyFromIndex(nt),ht=this._knownHeights.get(vt);return ht!=null&&ht===ht?ht:this.props.itemHeightGetter(nt,vt)},this._yPositions=new d(200),this._knownHeights=new Map,this._startIndexDrawn=2**20,this._endIndexDrawn=-(2**20),this._startIndex=0,this._endIndex=0,this._viewHeight=-1,this._scrollTop=-1,this._isScrolledOrResized=!1,this._htmlTopOffset=-1,this._windowScrollListenerAdded=!1,this._htmlElm=document.documentElement,this._wrapperElm=void 0,this._itemHolderElm=void 0}componentDidMount(){if(this.props.windowScroller){if(this._wrapperElm){const{top:ut}=this._wrapperElm.getBoundingClientRect();this._htmlTopOffset=ut+this._htmlElm.scrollTop}window.addEventListener("scroll",this._onScroll),this._windowScrollListenerAdded=!0}else this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll)}componentDidUpdate(ut){this._itemHolderElm&&this._scanItemHeights(),!this.props.windowScroller&&ut.scrollElement!==this.props.scrollElement&&(ut.scrollElement?.removeEventListener("scroll",this._onScroll),this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll))}componentWillUnmount(){this._windowScrollListenerAdded?window.removeEventListener("scroll",this._onScroll):this._wrapperElm?.removeEventListener("scroll",this._onScroll)}_isViewChanged(){if(!this._wrapperElm)return!1;const ut=this.props.windowScroller,nt=ut?this._htmlElm.clientHeight:this._wrapperElm.clientHeight,vt=ut?this._htmlElm.scrollTop:this._wrapperElm.scrollTop;return nt!==this._viewHeight||vt!==this._scrollTop}_calcViewIndexes(){if(this.props.windowScroller)this._viewHeight=window.innerHeight-this._htmlTopOffset,this._scrollTop=window.scrollY;else{if(!this._wrapperElm){this._viewHeight=-1,this._startIndex=0,this._endIndex=0;return}this._viewHeight=this._wrapperElm.clientHeight,this._scrollTop=this._wrapperElm.scrollTop}const nt=this._scrollTop,vt=this._scrollTop+this._viewHeight;this._startIndex=this._yPositions.findFloorIndex(nt,this._getHeight),this._endIndex=this._yPositions.findFloorIndex(vt,this._getHeight)}render(){const{dataLength:ut,getKeyFromIndex:nt,initialDraw:vt=p,itemRenderer:ht,viewBuffer:It,viewBufferMin:Ft}=this.props,en=this._getHeight,sn=[];let Mn,En;if(this._yPositions.profileData(ut),!this._wrapperElm)Mn=0,En=(vt<ut?vt:ut)-1;else{this._isViewChanged()&&this._calcViewIndexes();const ea=Ft>this._startIndex?0:this._startIndex-Ft,Qn=Ft<ut-this._endIndex?this._endIndex+Ft:ut-1;ea<this._startIndexDrawn||Qn>this._endIndexDrawn?(Mn=It>this._startIndex?0:this._startIndex-It,En=this._endIndex+It,En>=ut&&(En=ut-1)):(Mn=this._startIndexDrawn,En=this._endIndexDrawn>ut-1?ut-1:this._endIndexDrawn)}this._yPositions.calcHeights(En,en,Mn||-1),this._startIndexDrawn=Mn,this._endIndexDrawn=En,sn.length=En-Mn+1;for(let ea=Mn;ea<=En;ea++){const{y:Qn,height:Kn}=this._yPositions.getRowPosition(ea,en),Ua={height:Kn,top:Qn,position:"absolute"},pa=nt(ea),va={"data-item-key":pa};sn.push(ht(pa,Ua,ea,va))}const yn={style:{position:"relative"},ref:this._initWrapper};this.props.windowScroller||(yn.onScroll=this._onScroll,yn.style.height="100%",yn.style.overflowY="auto");const Bn={position:"relative",height:this._yPositions.getEstimatedHeight()};return s.createElement("div",{...yn,"data-testid":"ListView"},s.createElement("div",{style:Bn},s.createElement("div",{style:{position:"absolute",top:0,margin:0,padding:0},className:this.props.itemsWrapperClassName,ref:this._initItemHolder},sn)))}}h.defaultProps={initialDraw:p,itemsWrapperClassName:"",windowScroller:!1};var y=e(9085),v=e.n(y),i=e(39904),u=e(99746),P=e(52541),E=e(68183),C=e(39604),b=e(56921);function S({children:Ut,content:ut,overlayClassName:nt}){const vt=(0,s.useRef)(null);return s.createElement(C.D,{content:ut,hideAfter:300},(ht,It,Ft)=>s.createElement(s.Fragment,null,vt.current&&s.createElement(b.J,{...Ft,referenceElement:vt.current,wrapperClassName:nt,onMouseLeave:It,onMouseEnter:ht}),s.cloneElement(Ut,{ref:vt,onMouseEnter:ht,onMouseLeave:It})))}var M=e(42413),x=e(5861);const O="label";var L=e(61860),B=e(31403);const w=()=>({CopyIcon:t.css`
      background-color: transparent;
      border: none;
      color: inherit;
      height: 100%;
      overflow: hidden;
      &:focus {
        background-color: rgba(255, 255, 255, 0.25);
        color: inherit;
      }
    `});function R(Ut){const ut=(0,l.wW)(w),[nt,vt]=(0,s.useState)(!1),ht=()=>{navigator.clipboard.writeText(Ut.copyText),vt(!0)};return s.createElement(L.u,{content:nt?"Copied":Ut.tooltipTitle},s.createElement(B.zx,{className:v()(ut.CopyIcon),type:"button",icon:Ut.icon,onClick:ht}))}R.defaultProps={icon:"copy",className:void 0};var A=e(23932),U=e.n(A);const I="copyIcon",N=Ut=>({KeyValueTable:t.css`
      label: KeyValueTable;
      background: ${(0,u.h)(Ut,"#fff")};
      border: 1px solid ${(0,u.h)(Ut,"#ddd")};
      margin-bottom: 0.5rem;
      max-height: 450px;
      overflow: auto;
    `,body:t.css`
      label: body;
      vertical-align: baseline;
    `,row:t.css`
      label: row;
      & > td {
        padding: 0rem 0.5rem;
        height: 30px;
      }
      &:nth-child(2n) > td {
        background: ${(0,u.h)(Ut,"#f5f5f5")};
      }
      &:not(:hover) .${I} {
        visibility: hidden;
      }
    `,keyColumn:t.css`
      label: keyColumn;
      color: ${(0,u.h)(Ut,"#888")};
      white-space: pre;
      width: 125px;
    `,copyColumn:t.css`
      label: copyColumn;
      text-align: right;
    `,linkIcon:t.css`
      label: linkIcon;
      vertical-align: middle;
      font-weight: bold;
    `}),F=/^(\[|\{)/;function D(Ut){if(typeof Ut=="string"&&F.test(Ut))try{return JSON.parse(Ut)}catch{}return Ut}const Y=Ut=>s.createElement("a",{href:Ut.href,title:Ut.title,target:"_blank",rel:"noopener noreferrer"},Ut.children," ",s.createElement(i.J,{name:"external-link-alt"}));Y.defaultProps={title:""};function j(Ut){const{data:ut,linksGetter:nt}=Ut,vt=(0,l.wW)(N);return s.createElement("div",{className:v()(vt.KeyValueTable),"data-testid":"KeyValueTable"},s.createElement("table",{className:M.K9},s.createElement("tbody",{className:vt.body},ut.map((ht,It)=>{const Ft={__html:U()(D(ht.value))},en=s.createElement("div",{className:M.b$,dangerouslySetInnerHTML:Ft}),sn=nt?nt(ut,It):null;let Mn;return sn&&sn.length?Mn=s.createElement("div",null,s.createElement(Y,{href:sn[0].url,title:sn[0].text},en)):Mn=en,s.createElement("tr",{className:vt.row,key:`${ht.key}-${It}`},s.createElement("td",{className:vt.keyColumn,"data-testid":"KeyValueTable--keyColumn"},ht.key),s.createElement("td",null,Mn),s.createElement("td",{className:vt.copyColumn},s.createElement(R,{className:I,copyText:JSON.stringify(ht,null,2),tooltipTitle:"Copy JSON"})))}))))}const K=Ut=>({header:t.css`
      label: header;
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,u.h)(Ut,"#e8e8e8")};
      }
    `,headerEmpty:t.css`
      label: headerEmpty;
      background: none;
      cursor: initial;
    `,headerHighContrast:t.css`
      label: headerHighContrast;
      &:hover {
        background: ${(0,u.h)(Ut,"#ddd")};
      }
    `,emptyIcon:t.css`
      label: emptyIcon;
      color: ${(0,u.h)(Ut,"#aaa")};
    `,summary:t.css`
      label: summary;
      display: inline;
      list-style: none;
      padding: 0;
    `,summaryItem:t.css`
      label: summaryItem;
      display: inline;
      margin-left: 0.7em;
      padding-right: 0.5rem;
      border-right: 1px solid ${(0,u.h)(Ut,"#ddd")};
      &:last-child {
        padding-right: 0;
        border-right: none;
      }
    `,summaryLabel:t.css`
      label: summaryLabel;
      color: ${(0,u.h)(Ut,"#777")};
    `,summaryDelim:t.css`
      label: summaryDelim;
      color: ${(0,u.h)(Ut,"#bbb")};
      padding: 0 0.2em;
    `});function z(Ut){const{data:ut}=Ut,nt=(0,l.wW)(K);return!Array.isArray(ut)||!ut.length?null:s.createElement("ul",{className:nt.summary},ut.map((vt,ht)=>s.createElement("li",{className:nt.summaryItem,key:`${vt.key}-${ht}`},s.createElement("span",{className:nt.summaryLabel},vt.key),s.createElement("span",{className:nt.summaryDelim},"="),String(vt.value))))}z.defaultProps={data:null};function Z(Ut){const{className:ut,data:nt,highContrast:vt,interactive:ht,isOpen:It,label:Ft,linksGetter:en,onToggle:sn}=Ut,Mn=!Array.isArray(nt)||!nt.length,En=(0,l.wW)(K),yn=v()(M.Im,{[En.emptyIcon]:Mn});let Bn=null,ea=null;return ht&&(Bn=It?s.createElement(i.J,{name:"angle-down",className:yn}):s.createElement(i.J,{name:"angle-right",className:yn}),ea={"aria-checked":It,onClick:Mn?null:sn,role:"switch"}),s.createElement("div",{className:v()(ut,M.ty)},s.createElement("div",{className:v()(En.header,{[En.headerEmpty]:Mn,[En.headerHighContrast]:vt&&!Mn}),...ea,"data-testid":"AccordianKeyValues--header"},Bn,s.createElement("strong",{"data-test":O},Ft,It||":"),!It&&s.createElement(z,{data:nt})),It&&s.createElement(j,{data:nt,linksGetter:en}))}Z.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const ae=Ut=>({AccordianLogs:t.css`
      label: AccordianLogs;
      border: 1px solid ${(0,u.h)(Ut,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianLogsHeader:t.css`
      label: AccordianLogsHeader;
      background: ${(0,u.h)(Ut,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,u.h)(Ut,"#dadada")};
      }
    `,AccordianLogsContent:t.css`
      label: AccordianLogsContent;
      background: ${(0,u.h)(Ut,"#f0f0f0")};
      border-top: 1px solid ${(0,u.h)(Ut,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianLogsFooter:t.css`
      label: AccordianLogsFooter;
      color: ${(0,u.h)(Ut,"#999")};
    `});function J(Ut){const{interactive:ut,isOpen:nt,linksGetter:vt,logs:ht,openedItems:It,onItemToggle:Ft,onToggle:en,timestamp:sn}=Ut;let Mn=null,En="span",yn=null;ut&&(Mn=nt?s.createElement(i.J,{name:"angle-down",className:M.Im}):s.createElement(i.J,{name:"angle-right",className:"u-align-icon"}),En="a",yn={"aria-checked":nt,onClick:en,role:"switch"});const Bn=(0,l.wW)(ae);return s.createElement("div",{className:Bn.AccordianLogs},s.createElement(En,{className:Bn.AccordianLogsHeader,...yn},Mn," ",s.createElement("strong",null,"Events")," (",ht.length,")"),nt&&s.createElement("div",{className:Bn.AccordianLogsContent},(0,n.sortBy)(ht,"timestamp").map((ea,Qn)=>s.createElement(Z,{key:`${ea.timestamp}-${Qn}`,className:Qn<ht.length-1?M.bi:null,data:ea.fields||[],highContrast:!0,interactive:ut,isOpen:It?It.has(ea):!1,label:`${(0,x.LU)(ea.timestamp-sn)}`,linksGetter:vt,onToggle:ut&&Ft?()=>Ft(ea):null})),s.createElement("small",{className:Bn.AccordianLogsFooter},"Log timestamps are relative to the start time of the full trace.")))}J.defaultProps={interactive:!0,linksGetter:void 0,onItemToggle:void 0,onToggle:void 0,openedItems:void 0};const oe=Ut=>({wrapper:t.css`
      label: wrapper;
      bottom: 0;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
      overflow: hidden;
      z-index: 0;
    `,bar:t.css`
      label: bar;
      border-radius: 3px;
      min-width: 2px;
      position: absolute;
      height: 36%;
      top: 32%;
    `,rpc:t.css`
      label: rpc;
      position: absolute;
      top: 35%;
      bottom: 35%;
      z-index: 1;
    `,label:t.css`
      label: label;
      color: #aaa;
      font-size: 12px;
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      line-height: 1em;
      white-space: nowrap;
      padding: 0 0.5em;
      position: absolute;
    `,logMarker:t.css`
      label: logMarker;
      background-color: ${(0,u.h)(Ut,"#2c3235")};
      cursor: pointer;
      height: 60%;
      min-width: 1px;
      position: absolute;
      top: 20%;
      &:hover {
        background-color: ${(0,u.h)(Ut,"#464c54")};
      }
      &::before,
      &::after {
        content: '';
        position: absolute;
        top: 0;
        bottom: 0;
        right: 0;
        border: 1px solid transparent;
      }
      &::after {
        left: 0;
      }
    `});function Ee(Ut){return`${(Ut*100).toFixed(1)}%`}function me({viewEnd:Ut,viewStart:ut,getViewedBounds:nt,color:vt,shortLabel:ht,longLabel:It,onClick:Ft,rpc:en,traceStartTime:sn,span:Mn,className:En,labelClassName:yn}){const[Bn,ea]=(0,s.useState)(ht),Qn=()=>ea(ht),Kn=()=>ea(It),Ua=(0,n.groupBy)(Mn.logs,va=>{const za=nt(va.timestamp,va.timestamp).start;return Ee(Math.round(za*500)/500)}),pa=(0,l.wW)(oe);return s.createElement("div",{className:v()(pa.wrapper,En),onBlur:Qn,onClick:Ft,onFocus:Kn,onMouseOut:Qn,onMouseOver:Kn,"aria-hidden":!0,"data-testid":E.wl.components.TraceViewer.spanBar},s.createElement("div",{"aria-label":Bn,className:pa.bar,style:{background:vt,left:Ee(ut),width:Ee(Ut-ut)}},s.createElement("div",{className:v()(pa.label,yn),"data-testid":"SpanBar--label"},Bn)),s.createElement("div",null,Object.keys(Ua).map(va=>s.createElement(S,{key:va,content:s.createElement(J,{interactive:!1,isOpen:!0,logs:Ua[va],timestamp:sn})},s.createElement("div",{"data-testid":"SpanBar--logMarker",className:pa.logMarker,style:{left:va}})))),en&&s.createElement("div",{className:pa.rpc,style:{background:en.color,left:Ee(en.viewStart),width:Ee(en.viewEnd-en.viewStart)}}))}const re=s.memo(me);var le=e(14391),pe=e(42044),ee=e(30909);const se=(Ut,ut,nt,vt)=>s.createElement(s.Fragment,null,Ut.logLinks?.length?s.createElement(le.k,{label:"Logs"},Ut.logLinks.map((ht,It)=>s.createElement(pe.s,{key:It,label:"Logs for this span",onClick:ht.onClick?Ft=>{(0,r.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:vt,grafana_version:g.v.buildInfo.version,type:"log",location:"menu"}),Ft?.preventDefault(),ht.onClick(Ft),nt()}:void 0,url:ht.href,className:ut.menuItem}))):null,Ut.metricLinks?.length?s.createElement(le.k,{label:"Metrics"},Ut.metricLinks.map((ht,It)=>s.createElement(pe.s,{key:It,label:ht.title??"Metrics for this span",onClick:ht.onClick?Ft=>{(0,r.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:vt,grafana_version:g.v.buildInfo.version,type:"metric",location:"menu"}),Ft?.preventDefault(),ht.onClick(Ft),nt()}:void 0,url:ht.href,className:ut.menuItem}))):null,Ut.traceLinks?.length?s.createElement(le.k,{label:"Traces"},Ut.traceLinks.map((ht,It)=>s.createElement(pe.s,{key:It,label:ht.title??"View linked span",onClick:ht.onClick?Ft=>{(0,r.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:vt,grafana_version:g.v.buildInfo.version,type:"trace",location:"menu"}),Ft?.preventDefault(),ht.onClick(Ft),nt()}:void 0,url:ht.href,className:ut.menuItem}))):null),Q=({links:Ut,datasourceType:ut})=>{const nt=(0,l.wW)(G),[vt,ht]=(0,s.useState)(!1),[It,Ft]=(0,s.useState)({x:0,y:0}),en=()=>ht(!1);return s.createElement("div",{"data-testid":"SpanLinksMenu"},s.createElement("button",{onClick:sn=>{ht(!0),Ft({x:sn.pageX,y:sn.pageY})},className:nt.button},s.createElement(i.J,{name:"link",className:nt.button})),vt?s.createElement(ee.x,{onClose:()=>ht(!1),renderMenuItems:()=>se(Ut,nt,en,ut),focusOnOpen:!0,x:It.x,y:It.y}):null)},G=()=>({button:t.css`
      background: transparent;
      border: none;
      padding: 0;
      margin: 0 3px 0 0;
    `,menuItem:t.css`
      max-width: 60ch;
      overflow: hidden;
    `});function q(Ut){return(0,n.get)((0,n.find)(Ut.references,({span:ut,refType:nt})=>ut&&ut.spanID&&(nt==="CHILD_OF"||nt==="FOLLOWS_FROM")),"span")}function X(Ut){const ut=[];if(!Ut)return ut;let nt=q(Ut);for(;nt;)ut.push(nt.spanID),nt=q(nt);return ut}const de=(0,f.B)(Ut=>({SpanTreeOffset:t.css`
      label: SpanTreeOffset;
      color: ${(0,u.h)(Ut,"#000")};
      position: relative;
    `,SpanTreeOffsetParent:t.css`
      label: SpanTreeOffsetParent;
      &:hover {
        cursor: pointer;
      }
    `,indentGuide:t.css`
      label: indentGuide;
      /* The size of the indentGuide is based off of the iconWrapper */
      padding-right: calc(0.5rem + 12px);
      height: 100%;
      border-left: 3px solid transparent;
      display: inline-flex;
      &::before {
        content: '';
        padding-left: 1px;
        background-color: ${(0,u.h)(Ut,"lightgrey")};
      }
    `,indentGuideActive:t.css`
      label: indentGuideActive;
      border-color: ${(0,u.h)(Ut,"darkgrey")};
      &::before {
        background-color: transparent;
      }
    `,iconWrapper:t.css`
      label: iconWrapper;
      position: absolute;
      right: 0.25rem;
    `}));class Be extends s.PureComponent{constructor(ut){super(ut),this.handleMouseLeave=(nt,vt)=>{(!(nt.relatedTarget instanceof HTMLSpanElement)||(0,n.get)(nt,"relatedTarget.dataset.ancestorId")!==vt)&&this.props.removeHoverIndentGuideId(vt)},this.handleMouseEnter=(nt,vt)=>{(!(nt.relatedTarget instanceof HTMLSpanElement)||(0,n.get)(nt,"relatedTarget.dataset.ancestorId")!==vt)&&this.props.addHoverIndentGuideId(vt)},this.ancestorIds=X(ut.span),this.ancestorIds.push("root"),this.ancestorIds.reverse()}render(){const{childrenVisible:ut,onClick:nt,showChildrenIcon:vt,span:ht,theme:It}=this.props,{hasChildren:Ft,spanID:en}=ht,sn=Ft?{onClick:nt,role:"switch","aria-checked":ut}:null,Mn=vt&&Ft&&(ut?s.createElement(i.J,{name:"angle-down","data-testid":"icon-arrow-down"}):s.createElement(i.J,{name:"angle-right","data-testid":"icon-arrow-right"})),En=de(It);return s.createElement("span",{className:v()(En.SpanTreeOffset,{[En.SpanTreeOffsetParent]:Ft}),...sn},this.ancestorIds.map(yn=>s.createElement("span",{key:yn,className:v()(En.indentGuide,{[En.indentGuideActive]:this.props.hoverIndentGuideIds.has(yn)}),"data-ancestor-id":yn,"data-testid":"SpanTreeOffset--indentGuide",onMouseEnter:Bn=>this.handleMouseEnter(Bn,yn),onMouseLeave:Bn=>this.handleMouseLeave(Bn,yn)})),Mn&&s.createElement("span",{className:En.iconWrapper,onMouseEnter:yn=>this.handleMouseEnter(yn,en),onMouseLeave:yn=>this.handleMouseLeave(yn,en),"data-testid":"icon-wrapper"},Mn))}}Be.displayName="UnthemedSpanTreeOffset",Be.defaultProps={childrenVisible:!1,showChildrenIcon:!0};const ke=(0,l.HE)(Be);var He=e(55478),ue=e(93804);const Oe="spanBar",Fe="spanBarLabel",Ie="nameWrapper",we="nameWrapperMatchingFilter",Re="jaegerView",_e="nameColumn",et=(0,f.B)(Ut=>{const ut={label:"flash",flash:t.keyframes`
    from {
      background-color: ${(0,u.h)(Ut,"#68b9ff")};
    }
    to {
      background-color: 'default';
    }
  `};return{nameWrapper:t.css`
      label: nameWrapper;
      line-height: 27px;
      overflow: hidden;
      display: flex;
    `,nameWrapperMatchingFilter:t.css`
      label: nameWrapperMatchingFilter;
      background-color: ${(0,u.h)(Ut,"#fffce4")};
    `,nameColumn:t.css`
      label: nameColumn;
      position: relative;
      white-space: nowrap;
      z-index: 1;
      &:hover {
        z-index: 1;
      }
    `,endpointName:t.css`
      label: endpointName;
      color: ${(0,u.h)(Ut,"#808080")};
    `,view:t.css`
      label: view;
      position: relative;
    `,viewExpanded:t.css`
      label: viewExpanded;
      background: ${(0,u.h)(Ut,"#f8f8f8")};
      outline: 1px solid ${(0,u.h)(Ut,"#ddd")};
    `,viewExpandedAndMatchingFilter:t.css`
      label: viewExpandedAndMatchingFilter;
      background: ${(0,u.h)(Ut,"#fff3d7")};
      outline: 1px solid ${(0,u.h)(Ut,"#ddd")};
    `,row:t.css`
      label: row;
      &:hover .${Oe} {
        opacity: 1;
      }
      &:hover .${Fe} {
        color: ${(0,u.h)(Ut,"#000")};
      }
      &:hover .${Ie} {
        background: #f8f8f8;
        background: linear-gradient(
          90deg,
          ${(0,u.h)(Ut,"#fafafa")},
          ${(0,u.h)(Ut,"#f8f8f8")} 75%,
          ${(0,u.h)(Ut,"#eee")}
        );
      }
      &:hover .${Re} {
        background-color: ${(0,u.h)(Ut,"#f5f5f5")};
        outline: 1px solid ${(0,u.h)(Ut,"#ddd")};
      }
    `,rowClippingLeft:t.css`
      label: rowClippingLeft;
      & .${_e}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to right,
          ${(0,u.h)(Ut,"rgba(25, 25, 25, 0.25)")},
          ${(0,u.h)(Ut,"rgba(32, 32, 32, 0)")}
        );
        left: 100%;
        z-index: -1;
      }
    `,rowClippingRight:t.css`
      label: rowClippingRight;
      & .${Re}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to left,
          ${(0,u.h)(Ut,"rgba(25, 25, 25, 0.25)")},
          ${(0,u.h)(Ut,"rgba(25, 25, 25, 0.25)")}
        );
        right: 0%;
        z-index: 1;
      }
    `,rowExpanded:t.css`
      label: rowExpanded;
      & .${Oe} {
        opacity: 1;
      }
      & .${Fe} {
        color: ${(0,u.h)(Ut,"#000")};
      }
      & .${Ie}, &:hover .${Ie} {
        background: ${(0,u.h)(Ut,"#f0f0f0")};
        box-shadow: 0 1px 0 ${(0,u.h)(Ut,"#ddd")};
      }
      & .${we} {
        background: ${(0,u.h)(Ut,"#fff3d7")};
      }
      &:hover .${Re} {
        background: ${(0,u.h)(Ut,"#eee")};
      }
    `,rowMatchingFilter:t.css`
      label: rowMatchingFilter;
      background-color: ${(0,u.h)(Ut,"#fffbde")};
      &:hover .${Ie} {
        background: linear-gradient(
          90deg,
          ${(0,u.h)(Ut,"#fffbde")},
          ${(0,u.h)(Ut,"#fffbde")} 75%,
          ${(0,u.h)(Ut,"#f7f1c6")}
        );
      }
      &:hover .${Re} {
        background-color: ${(0,u.h)(Ut,"#f7f1c6")};
        outline: 1px solid ${(0,u.h)(Ut,"#ddd")};
      }
    `,rowFocused:t.css`
      label: rowFocused;
      background-color: ${(0,u.h)(Ut,"#cbe7ff")};
      animation: ${ut.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      & .${Ie}, .${Re}, .${we} {
        background-color: ${(0,u.h)(Ut,"#cbe7ff")};
        animation: ${ut.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      }
      & .${Oe} {
        opacity: 1;
      }
      & .${Fe} {
        color: ${(0,u.h)(Ut,"#000")};
      }
      &:hover .${Ie}, :hover .${Re} {
        background: ${(0,u.h)(Ut,"#d5ebff")};
        box-shadow: 0 1px 0 ${(0,u.h)(Ut,"#ddd")};
      }
    `,rowExpandedAndMatchingFilter:t.css`
      label: rowExpandedAndMatchingFilter;
      &:hover .${Re} {
        background: ${(0,u.h)(Ut,"#ffeccf")};
      }
    `,name:t.css`
      label: name;
      color: ${(0,u.h)(Ut,"#000")};
      cursor: pointer;
      flex: 1 1 auto;
      outline: none;
      overflow-y: hidden;
      overflow-x: auto;
      margin-right: 8px;
      padding-left: 4px;
      padding-right: 0.25em;
      position: relative;
      -ms-overflow-style: none;
      scrollbar-width: none;
      &::-webkit-scrollbar {
        display: none;
      }
      &::before {
        content: ' ';
        position: absolute;
        top: 4px;
        bottom: 4px;
        left: 0;
        border-left: 4px solid;
        border-left-color: inherit;
      }
      &:focus {
        text-decoration: none;
      }
      &:hover > small {
        color: ${(0,u.h)(Ut,"#000")};
      }
      text-align: left;
      background: transparent;
      border: none;
    `,nameDetailExpanded:t.css`
      label: nameDetailExpanded;
      &::before {
        bottom: 0;
      }
    `,svcName:t.css`
      label: svcName;
      padding: 0 0.25rem 0 0.5rem;
      font-size: 1.05em;
    `,svcNameChildrenCollapsed:t.css`
      label: svcNameChildrenCollapsed;
      font-weight: bold;
      font-style: italic;
    `,errorIcon:t.css`
      label: errorIcon;
      border-radius: 6.5px;
      color: ${(0,u.h)(Ut,"#fff")};
      font-size: 0.85em;
      margin-right: 0.25rem;
      padding: 1px;
    `,rpcColorMarker:t.css`
      label: rpcColorMarker;
      border-radius: 6.5px;
      display: inline-block;
      font-size: 0.85em;
      height: 1em;
      margin-right: 0.25rem;
      padding: 1px;
      width: 1em;
      vertical-align: middle;
    `,labelRight:t.css`
      label: labelRight;
      left: 100%;
    `,labelLeft:t.css`
      label: labelLeft;
      right: 100%;
    `}});class qe extends s.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._childrenToggle=()=>{this.props.onChildrenToggled(this.props.span.spanID)},this.getSpanBarLabel=(ut,nt,vt)=>{const ht=nt?.type??"";if(ht===P.Hn)return"";if(ht===""||ht===P.th)return`(${vt})`;if(ht===P.Kg){const It=nt?.tag?.trim()??"";if(It!==""&&ut.tags){const Ft=ut.tags?.find(sn=>sn.key===It),en=ut.process?.tags?.find(sn=>sn.key===It);if(Ft)return`(${Ft.value})`;if(en)return`(${en.value})`}}return""}}render(){const{className:ut,color:nt,spanBarOptions:vt,columnDivision:ht,isChildrenExpanded:It,isDetailExpanded:Ft,isMatchingFilter:en,isFocused:sn,numTicks:Mn,rpc:En,noInstrumentedServer:yn,showErrorIcon:Bn,getViewedBounds:ea,traceStartTime:Qn,span:Kn,hoverIndentGuideIds:Ua,addHoverIndentGuideId:pa,removeHoverIndentGuideId:va,clippingLeft:za,clippingRight:ja,theme:Ea,createSpanLink:ma,datasourceType:Xa}=this.props,{duration:Oa,hasChildren:ss,operationName:Ks,process:{serviceName:Ss}}=Kn,Bs=(0,x.LU)(Oa),ls=ea(Kn.startTime,Kn.startTime+Kn.duration),ws=ls.start,qs=ls.end,Da=et(Ea),Vs=`${Ss}::${Ks}`;let Es,er;ws>1-qs?(Es=`${Vs} | ${Bs}`,er=Da.labelLeft):(Es=`${Bs} | ${Vs}`,er=Da.labelRight);const dr=es=>es?Object.values(es).reduce((tr,Is)=>tr+Is.length,0):0;return s.createElement(ue.Z,{className:v()(Da.row,{[Da.rowExpanded]:Ft,[Da.rowMatchingFilter]:en,[Da.rowExpandedAndMatchingFilter]:en&&Ft,[Da.rowFocused]:sn,[Da.rowClippingLeft]:za,[Da.rowClippingRight]:ja},ut)},s.createElement(ue.Z.Cell,{className:v()(Da.nameColumn,_e),width:ht},s.createElement("div",{className:v()(Da.nameWrapper,Ie,{[Da.nameWrapperMatchingFilter]:en,nameWrapperMatchingFilter:en})},s.createElement(ke,{onClick:ss?this._childrenToggle:void 0,childrenVisible:It,span:Kn,hoverIndentGuideIds:Ua,addHoverIndentGuideId:pa,removeHoverIndentGuideId:va}),s.createElement("button",{type:"button",className:v()(Da.name,{[Da.nameDetailExpanded]:Ft}),"aria-checked":Ft,title:Vs,onClick:this._detailToggle,role:"switch",style:{borderColor:nt},tabIndex:0},s.createElement("span",{className:v()(Da.svcName,{[Da.svcNameChildrenCollapsed]:ss&&!It})},Bn&&s.createElement(i.J,{name:"exclamation-circle",style:{backgroundColor:Kn.errorIconColor?(0,u.h)(Ea,Kn.errorIconColor):(0,u.h)(Ea,"#db2828")},className:Da.errorIcon}),Ss," ",En&&s.createElement("span",null,s.createElement(i.J,{name:"arrow-right"})," ",s.createElement("i",{className:Da.rpcColorMarker,style:{background:En.color}}),En.serviceName),yn&&s.createElement("span",null,s.createElement(i.J,{name:"arrow-right"})," ",s.createElement("i",{className:Da.rpcColorMarker,style:{background:yn.color}}),yn.serviceName)),s.createElement("small",{className:Da.endpointName},En?En.operationName:Ks),s.createElement("small",{className:Da.endpointName}," ",this.getSpanBarLabel(Kn,vt,Bs))),ma&&(()=>{const es=ma(Kn),tr=dr(es);if(es&&tr===1){const Is=es.logLinks?.[0]??es.metricLinks?.[0]??es.traceLinks?.[0]??void 0;return Is?s.createElement("a",{href:Is.href,target:"_blank",style:{marginRight:"5px"},rel:"noopener noreferrer",onClick:Is.onClick?ts=>{!(ts.ctrlKey||ts.metaKey||ts.shiftKey)&&Is.onClick&&(ts.preventDefault(),Is.onClick(ts))}:void 0},Is.content):null}else return es&&tr>1?s.createElement(Q,{links:es,datasourceType:Xa}):null})())),s.createElement(ue.Z.Cell,{className:v()(Da.view,Re,{[Da.viewExpanded]:Ft,[Da.viewExpandedAndMatchingFilter]:en&&Ft}),"data-testid":"span-view",style:{cursor:"pointer"},width:1-ht,onClick:this._detailToggle},s.createElement(He.Z,{numTicks:Mn}),s.createElement(re,{rpc:En,viewStart:ws,viewEnd:qs,getViewedBounds:ea,color:nt,shortLabel:Bs,longLabel:Es,traceStartTime:Qn,span:Kn,labelClassName:`${Fe} ${er}`,className:Oe})))}}qe.displayName="UnthemedSpanBarRow",qe.defaultProps={className:"",rpc:null};const Je=(0,l.HE)(qe);var lt=e(38849),at=e(89719),Xe=e(97379);const gt=Ut=>({Divider:t.css`
      background: ${(0,u.h)(Ut,"#ddd")};
    `,DividerVertical:t.css`
      label: DividerVertical;
      display: inline-block;
      width: 1px;
      height: 0.9em;
      margin: 0 8px;
      vertical-align: middle;
    `,DividerHorizontal:t.css`
      label: DividerHorizontal;
      display: block;
      height: 1px;
      width: 100%;
      margin: 24px 0;
      clear: both;
      vertical-align: middle;
      position: relative;
      top: -0.06em;
    `});function ot({className:Ut,style:ut,type:nt}){const vt=(0,l.wW)(gt);return s.createElement("div",{style:ut,className:(0,t.cx)(vt.Divider,nt==="horizontal"?vt.DividerHorizontal:vt.DividerVertical,Ut)})}var Ye=e(82736);function mt(Ut){const{reference:ut,children:nt,createFocusSpanLink:vt}=Ut,ht=vt(ut.traceID,ut.spanID);return s.createElement("a",{href:ht.href,target:ht.target,rel:"noopener noreferrer",onClick:ht.onClick?It=>{It.preventDefault(),ht.onClick(It)}:void 0},nt)}const ce=Ut=>({AccordianReferenceItem:t.css`
      border-bottom: 1px solid ${(0,u.h)(Ut,"#d8d8d8")};
    `,AccordianKeyValues:t.css`
      margin-left: 10px;
    `,AccordianReferences:t.css`
      label: AccordianReferences;
      border: 1px solid ${(0,u.h)(Ut,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianReferencesHeader:t.css`
      label: AccordianReferencesHeader;
      background: ${(0,u.h)(Ut,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,u.h)(Ut,"#dadada")};
      }
    `,AccordianReferencesContent:t.css`
      label: AccordianReferencesContent;
      background: ${(0,u.h)(Ut,"#f0f0f0")};
      border-top: 1px solid ${(0,u.h)(Ut,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianReferencesFooter:t.css`
      label: AccordianReferencesFooter;
      color: ${(0,u.h)(Ut,"#999")};
    `,ReferencesList:t.css`
      background: #fff;
      border: 1px solid #ddd;
      margin-bottom: 0.7em;
      max-height: 450px;
      overflow: auto;
    `,list:t.css`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
      background: #fff;
    `,itemContent:t.css`
      padding: 0.25rem 0.5rem;
      display: flex;
      width: 100%;
      justify-content: space-between;
    `,item:t.css`
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `,debugInfo:t.css`
      letter-spacing: 0.25px;
      margin: 0.5em 0 0;
      flex-wrap: wrap;
      display: flex;
      justify-content: flex-end;
    `,debugLabel:t.css`
      margin: 0 5px 0 5px;
      &::before {
        color: #bbb;
        content: attr(data-label);
      }
    `,serviceName:t.css`
      margin-right: 8px;
    `,title:t.css`
      display: flex;
      align-items: center;
      gap: 4px;
    `});function be(Ut){const{data:ut,createFocusSpanLink:nt,openedItems:vt,onItemToggle:ht,interactive:It}=Ut,Ft=(0,l.wW)(ce);return s.createElement("div",{className:Ft.AccordianReferencesContent},ut.map((en,sn)=>s.createElement("div",{className:sn<ut.length-1?Ft.AccordianReferenceItem:void 0,key:sn},s.createElement("div",{className:Ft.item,key:`${en.spanID}`},s.createElement(mt,{reference:en,createFocusSpanLink:nt},s.createElement("span",{className:Ft.itemContent},en.span?s.createElement("span",null,s.createElement("span",{className:(0,t.cx)("span-svc-name",Ft.serviceName)},en.span.process.serviceName),s.createElement("small",{className:"endpoint-name"},en.span.operationName)):s.createElement("span",{className:(0,t.cx)("span-svc-name",Ft.title)},"View Linked Span ",s.createElement(i.J,{name:"external-link-alt"})),s.createElement("small",{className:Ft.debugInfo},s.createElement("span",{className:Ft.debugLabel,"data-label":"TraceID:"},en.traceID),s.createElement("span",{className:Ft.debugLabel,"data-label":"SpanID:"},en.spanID))))),!!en.tags?.length&&s.createElement("div",{className:Ft.AccordianKeyValues},s.createElement(Z,{className:sn<ut.length-1?M.bi:null,data:en.tags||[],highContrast:!0,interactive:It,isOpen:vt?vt.has(en):!1,label:"attributes",linksGetter:null,onToggle:It&&ht?()=>ht(en):null})))))}const Te=({data:Ut,interactive:ut=!0,isOpen:nt,onToggle:vt,onItemToggle:ht,openedItems:It,createFocusSpanLink:Ft})=>{const en=!Array.isArray(Ut)||!Ut.length;let sn=null,Mn="span",En=null;ut&&(sn=nt?s.createElement(i.J,{name:"angle-down",className:M.Im}):s.createElement(i.J,{name:"angle-right",className:M.Im}),Mn="a",En={"aria-checked":nt,onClick:en?null:vt,role:"switch"});const yn=(0,l.wW)(ce);return s.createElement("div",{className:yn.AccordianReferences},s.createElement(Mn,{className:yn.AccordianReferencesHeader,...En},sn,s.createElement("strong",null,s.createElement("span",null,"References"))," ","(",Ut.length,")"),nt&&s.createElement(be,{data:Ut,openedItems:It,createFocusSpanLink:Ft,onItemToggle:ht,interactive:ut}))},Ke=s.memo(Te),ge=()=>({TextList:t.css`
      max-height: 450px;
      overflow: auto;
    `,List:t.css`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
    `,item:t.css`
      padding: 0.25rem 0.5rem;
      vertical-align: top;
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `});function Me(Ut){const{data:ut}=Ut,nt=(0,l.wW)(ge);return s.createElement("div",{className:v()(nt.TextList),"data-testid":"TextList"},s.createElement("ul",{className:nt.List},ut.map((vt,ht)=>s.createElement("li",{className:nt.item,key:`${ht}`},vt))))}const ye=Ut=>({header:t.css`
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,u.h)(Ut,"#e8e8e8")};
      }
    `});function fe({data:Ut}){return s.createElement(Me,{data:Ut})}function he(Ut){const{className:ut,data:nt,headerClassName:vt,interactive:ht,isOpen:It,label:Ft,onToggle:en,TextComponent:sn=fe}=Ut,Mn=!Array.isArray(nt)||!nt.length,En=(0,l.wW)(K),yn=v()(M.Im,{[En.emptyIcon]:Mn});let Bn=null,ea=null;ht&&(Bn=It?s.createElement(i.J,{name:"angle-down",className:yn}):s.createElement(i.J,{name:"angle-right",className:yn}),ea={"aria-checked":It,onClick:Mn?null:en,role:"switch"});const Qn=(0,l.wW)(ye);return s.createElement("div",{className:ut||""},s.createElement("div",{className:v()(Qn.header,vt),...ea,"data-testid":"AccordianText--header"},Bn,s.createElement("strong",null,Ft)," (",nt.length,")"),It&&s.createElement(sn,{data:nt}))}he.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const De=Ut=>({header:t.css`
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0 1rem;
      margin-bottom: 0.25rem;
    `,listWrapper:t.css`
      overflow: hidden;
    `,debugInfo:t.css`
      label: debugInfo;
      display: block;
      letter-spacing: 0.25px;
      margin: 0.5em 0 -0.75em;
      text-align: right;
    `,debugLabel:t.css`
      label: debugLabel;
      &::before {
        color: ${(0,u.h)(Ut,"#bbb")};
        content: attr(data-label);
      }
    `,debugValue:t.css`
      label: debugValue;
      background-color: inherit;
      border: none;
      color: ${(0,u.h)(Ut,"#888")};
      cursor: pointer;
      &:hover {
        color: ${(0,u.h)(Ut,"#333")};
      }
    `,AccordianWarnings:t.css`
      label: AccordianWarnings;
      background: ${(0,u.h)(Ut,"#fafafa")};
      border: 1px solid ${(0,u.h)(Ut,"#e4e4e4")};
      margin-bottom: 0.25rem;
    `,AccordianWarningsHeader:t.css`
      label: AccordianWarningsHeader;
      background: ${(0,u.h)(Ut,"#fff7e6")};
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,u.h)(Ut,"#ffe7ba")};
      }
    `,AccordianWarningsHeaderOpen:t.css`
      label: AccordianWarningsHeaderOpen;
      border-bottom: 1px solid ${(0,u.h)(Ut,"#e8e8e8")};
    `,AccordianWarningsLabel:t.css`
      label: AccordianWarningsLabel;
      color: ${(0,u.h)(Ut,"#d36c08")};
    `,Textarea:t.css`
      word-break: break-all;
      white-space: pre;
    `,LinkIcon:t.css`
      font-size: 1.5em;
    `});function Ae(Ut){const{detailState:ut,linksGetter:nt,logItemToggle:vt,logsToggle:ht,processToggle:It,span:Ft,tagsToggle:en,traceStartTime:sn,warningsToggle:Mn,stackTracesToggle:En,referencesToggle:yn,referenceItemToggle:Bn,createSpanLink:ea,createFocusSpanLink:Qn,topOfViewRefType:Kn,datasourceType:Ua}=Ut,{isTagsOpen:pa,isProcessOpen:va,logs:za,isWarningsOpen:ja,references:Ea,isStackTracesOpen:ma}=ut,{operationName:Xa,process:Oa,duration:ss,relativeStartTime:Ks,startTime:Ss,traceID:Bs,spanID:ls,logs:ws,tags:qs,warnings:Da,references:Vs,stackTraces:Es}=Ft,{timeZone:er}=Ut,dr=[{key:"svc",label:"Service:",value:Oa.serviceName},{key:"duration",label:"Duration:",value:(0,x.LU)(ss)},{key:"start",label:"Start Time:",value:(0,x.LU)(Ks)+Ne(Ss,er)},...Ft.childSpanCount>0?[{key:"child_count",label:"Child Count:",value:Ft.childSpanCount}]:[]],es=(0,l.wW)(De);let tr;if(ea){const ts=ea(Ft);ts?.logLinks?tr=s.createElement(at.k,{link:{...ts.logLinks[0],title:"Logs for this span",target:"_blank",origin:ts.logLinks[0].field,onClick:Zs=>{(0,r.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:Ua,grafana_version:g.v.buildInfo.version,type:"log",location:"spanDetails"}),ts?.logLinks?.[0].onClick?.(Zs)}},buttonProps:{icon:"gf-logs"}}):tr=s.createElement(B.zx,{variant:"primary",size:"sm",icon:"gf-logs",disabled:!0,tooltip:"We did not match any variables between the link and this span. Check your configuration or this span attributes."},"Logs for this span")}const Is=Qn(Bs,ls);return s.createElement("div",{"data-testid":"span-detail-component"},s.createElement("div",{className:es.header},s.createElement("h2",{className:v()(M.h2)},Xa),s.createElement("div",{className:es.listWrapper},s.createElement(Ye.Z,{className:M.xb,divider:!0,items:dr}))),tr,s.createElement(ot,{className:M.im,type:"horizontal"}),s.createElement("div",null,s.createElement("div",null,s.createElement(Z,{data:qs,label:"Attributes",linksGetter:nt,isOpen:pa,onToggle:()=>en(ls)}),Oa.tags&&s.createElement(Z,{className:M.bi,data:Oa.tags,label:"Resource",linksGetter:nt,isOpen:va,onToggle:()=>It(ls)})),ws&&ws.length>0&&s.createElement(J,{linksGetter:nt,logs:ws,isOpen:za.isOpen,openedItems:za.openedItems,onToggle:()=>ht(ls),onItemToggle:ts=>vt(ls,ts),timestamp:sn}),Da&&Da.length>0&&s.createElement(he,{className:es.AccordianWarnings,headerClassName:es.AccordianWarningsHeader,label:s.createElement("span",{className:es.AccordianWarningsLabel},"Warnings"),data:Da,isOpen:ja,onToggle:()=>Mn(ls)}),Es&&Es.length&&s.createElement(he,{label:"Stack trace",data:Es,isOpen:ma,TextComponent:ts=>{let Zs;return ts.data?.length>1?Zs=ts.data.map((Xt,kt)=>`StackTrace ${kt+1}:
${Xt}`).join(`
`):Zs=ts.data?.[0],s.createElement(Xe.K,{className:es.Textarea,style:{cursor:"unset"},readOnly:!0,cols:10,rows:10,value:Zs})},onToggle:()=>En(ls)}),Vs&&Vs.length>0&&(Vs.length>1||Vs[0].refType!=="CHILD_OF")&&s.createElement(Ke,{data:Vs,isOpen:Ea.isOpen,openedItems:Ea.openedItems,onToggle:()=>yn(ls),onItemToggle:ts=>Bn(ls,ts),createFocusSpanLink:Qn}),Kn===pt.Explore&&s.createElement("small",{className:es.debugInfo},s.createElement("a",{...Is,onClick:ts=>{Is.onClick&&ts.button===0&&(!ts.currentTarget.target||ts.currentTarget.target==="_self")&&!(ts.metaKey||ts.altKey||ts.ctrlKey||ts.shiftKey)&&(ts.preventDefault(),Is.onClick(ts))}},s.createElement(i.J,{name:"link",className:v()(M.Im,es.LinkIcon)})),s.createElement("span",{className:es.debugLabel,"data-label":"SpanID:"})," ",ls)))}const Ne=(Ut,ut)=>{const nt=(0,lt.dq)(Ut/1e3,{timeZone:ut,defaultWithMS:!0}),vt=nt.split(" ");return` (${vt[1]?vt[1]:nt})`},Ze=(0,f.B)(Ut=>({expandedAccent:t.css`
      cursor: pointer;
      height: 100%;
      overflow: hidden;
      position: absolute;
      width: 100%;
      &::before {
        border-left: 4px solid;
        pointer-events: none;
        width: 1000px;
      }
      &::after {
        border-right: 1000px solid;
        border-color: inherit;
        cursor: pointer;
        opacity: 0.2;
      }

      /* border-color inherit must come AFTER other border declarations for accent */
      &::before,
      &::after {
        border-color: inherit;
        content: ' ';
        position: absolute;
        height: 100%;
      }

      &:hover::after {
        opacity: 0.35;
      }
    `,infoWrapper:t.css`
      label: infoWrapper;
      border: 1px solid ${(0,u.h)(Ut,"#d3d3d3")};
      border-top: 3px solid;
      padding: 0.75rem;
    `}));class Se extends s.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._linksGetter=(ut,nt)=>{const{linksGetter:vt,span:ht}=this.props;return vt(ht,ut,nt)}}render(){const{color:ut,columnDivision:nt,detailState:vt,logItemToggle:ht,logsToggle:It,processToggle:Ft,referenceItemToggle:en,referencesToggle:sn,warningsToggle:Mn,stackTracesToggle:En,span:yn,timeZone:Bn,tagsToggle:ea,traceStartTime:Qn,hoverIndentGuideIds:Kn,addHoverIndentGuideId:Ua,removeHoverIndentGuideId:pa,theme:va,createSpanLink:za,focusedSpanId:ja,createFocusSpanLink:Ea,topOfViewRefType:ma,datasourceType:Xa}=this.props,Oa=Ze(va);return s.createElement(ue.Z,null,s.createElement(ue.Z.Cell,{width:nt,style:{overflow:"hidden"}},s.createElement(ke,{span:yn,showChildrenIcon:!1,hoverIndentGuideIds:Kn,addHoverIndentGuideId:Ua,removeHoverIndentGuideId:pa}),s.createElement(B.zx,{fill:"text",onClick:this._detailToggle,className:v()(Oa.expandedAccent,(0,B.gN)(va)),style:{borderColor:ut},"data-testid":"detail-row-expanded-accent"})),s.createElement(ue.Z.Cell,{width:1-nt},s.createElement("div",{className:Oa.infoWrapper,style:{borderTopColor:ut}},s.createElement(Ae,{detailState:vt,linksGetter:this._linksGetter,logItemToggle:ht,logsToggle:It,processToggle:Ft,referenceItemToggle:en,referencesToggle:sn,warningsToggle:Mn,stackTracesToggle:En,span:yn,timeZone:Bn,tagsToggle:ea,traceStartTime:Qn,createSpanLink:za,focusedSpanId:ja,createFocusSpanLink:Ea,topOfViewRefType:ma,datasourceType:Xa}))))}}const Ue=(0,l.HE)(Se),Qe=(0,f.B)(Ut=>{const{topOfViewRefType:ut}=Ut,nt=ut===pt.Explore?"fixed":"absolute";return{rowsWrapper:t.css`
      width: 100%;
    `,row:t.css`
      width: 100%;
    `,scrollToTopButton:t.css`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 40px;
      height: 40px;
      position: ${nt};
      bottom: 30px;
      right: 30px;
      z-index: 1;
    `}});var pt=(Ut=>(Ut.Explore="Explore",Ut.Panel="Panel",Ut))(pt||{});const bt={bar:28,detail:161,detailWithLogs:197},yt=5;function Mt(Ut,ut,nt){if(!Ut)return[];let vt=null;const ht=[];for(let It=0;It<Ut.length;It++){const Ft=Ut[It],{spanID:en,depth:sn}=Ft;let Mn=!1;vt!=null&&(sn>=vt?Mn=!0:vt=null),!Mn&&(ut.has(en)&&(vt=sn+1),ht.push({span:Ft,isDetail:!1,spanIndex:It}),nt.has(en)&&ht.push({span:Ft,isDetail:!0,spanIndex:It}))}return ht}function At(Ut){const[ut,nt]=Ut;return{left:ut>0,right:nt<1}}function Pt(Ut,ut,nt){return Ut?Mt(Ut.spans,ut,nt):[]}const rn=(0,c.Z)(Pt),Fn=(0,c.Z)(x._h,n.isEqual),kn=(0,c.Z)(At,n.isEqual);class Jn extends s.Component{constructor(ut){super(ut),this.getViewRange=()=>this.props.currentViewRangeTime,this.getSearchedSpanIDs=()=>this.props.findMatchesIDs,this.getCollapsedChildren=()=>this.props.childrenHiddenIDs,this.mapRowIndexToSpanIndex=It=>this.getRowStates()[It].spanIndex,this.mapSpanIndexToRowIndex=It=>{const Ft=this.getRowStates().length;for(let en=0;en<Ft;en++){const{spanIndex:sn}=this.getRowStates()[en];if(sn===It)return en}throw new Error(`unable to find row for span index: ${It}`)},this.setListView=It=>{const Ft=this.listView!==It;this.listView=It,It&&Ft&&this.props.registerAccessors(this.getAccessors())},this.getKeyFromIndex=It=>{const{isDetail:Ft,span:en}=this.getRowStates()[It];return`${en.traceID}--${en.spanID}--${Ft?"detail":"bar"}`},this.getIndexFromKey=It=>{const Ft=It.split("--"),en=Ft[0],sn=Ft[1],Mn=Ft[2]==="detail",En=this.getRowStates().length;for(let yn=0;yn<En;yn++){const{span:Bn,isDetail:ea}=this.getRowStates()[yn];if(Bn.spanID===sn&&Bn.traceID===en&&ea===Mn)return yn}return-1},this.getRowHeight=It=>{const{span:Ft,isDetail:en}=this.getRowStates()[It];return en?Array.isArray(Ft.logs)&&Ft.logs.length?bt.detailWithLogs:bt.detail:bt.bar},this.renderRow=(It,Ft,en,sn)=>{const{isDetail:Mn,span:En,spanIndex:yn}=this.getRowStates()[en];return Mn?this.renderSpanDetailRow(En,It,Ft,sn):this.renderSpanBarRow(En,yn,It,Ft,sn)},this.scrollToSpan=It=>{if(It==null)return;const Ft=this.getRowStates().findIndex(en=>en.span.spanID===It);Ft>=0&&this.listView?.scrollToIndex(Ft)},this.scrollToTop=()=>{const{topOfViewRef:It,datasourceType:Ft,trace:en}=this.props;It?.current?.scrollIntoView({behavior:"smooth"}),(0,r.ff)("grafana_traces_trace_view_scroll_to_top_clicked",{datasourceType:Ft,grafana_version:g.v.buildInfo.version,numServices:en.services.length,numSpans:en.spans.length})};const{setTrace:nt,trace:vt,uiFind:ht}=ut;nt(vt,ht)}componentDidMount(){this.scrollToSpan(this.props.focusedSpanId)}shouldComponentUpdate(ut){let nt;for(nt in ut)if(ut[nt]!==this.props[nt])if(nt==="shouldScrollToFirstUiFindMatch"){if(ut[nt])return!0}else return!0;return!1}componentDidUpdate(ut){const{registerAccessors:nt,trace:vt}=ut,{shouldScrollToFirstUiFindMatch:ht,clearShouldScrollToFirstUiFindMatch:It,scrollToFirstVisibleSpan:Ft,registerAccessors:en,setTrace:sn,trace:Mn,uiFind:En,focusedSpanId:yn,focusedSpanIdForSearch:Bn}=this.props;vt!==Mn&&sn(Mn,En),this.listView&&nt!==en&&en(this.getAccessors()),ht&&(Ft(),It()),yn!==ut.focusedSpanId&&this.scrollToSpan(yn),Bn!==ut.focusedSpanIdForSearch&&this.scrollToSpan(Bn)}getRowStates(){const{childrenHiddenIDs:ut,detailStates:nt,trace:vt}=this.props;return rn(vt,ut,nt)}getClipping(){const{currentViewRangeTime:ut}=this.props;return kn(ut)}getViewedBounds(){const{currentViewRangeTime:ut,trace:nt}=this.props,[vt,ht]=ut;return Fn({min:nt.startTime,max:nt.endTime,viewStart:vt,viewEnd:ht})}getAccessors(){const ut=this.listView;if(!ut)throw new Error("ListView unavailable");return{getViewRange:this.getViewRange,getSearchedSpanIDs:this.getSearchedSpanIDs,getCollapsedChildren:this.getCollapsedChildren,getViewHeight:ut.getViewHeight,getBottomRowIndexVisible:ut.getBottomVisibleIndex,getTopRowIndexVisible:ut.getTopVisibleIndex,getRowPosition:ut.getRowPosition,mapRowIndexToSpanIndex:this.mapRowIndexToSpanIndex,mapSpanIndexToRowIndex:this.mapSpanIndexToRowIndex}}renderSpanBarRow(ut,nt,vt,ht,It){const{spanID:Ft}=ut,{serviceName:en}=ut.process,{childrenHiddenIDs:sn,childrenToggle:Mn,detailStates:En,detailToggle:yn,findMatchesIDs:Bn,spanNameColumnWidth:ea,trace:Qn,spanBarOptions:Kn,hoverIndentGuideIds:Ua,addHoverIndentGuideId:pa,removeHoverIndentGuideId:va,createSpanLink:za,focusedSpanId:ja,focusedSpanIdForSearch:Ea,theme:ma,datasourceType:Xa}=this.props;if(!Qn)return null;const Oa=(0,m._K)(en,ma),ss=sn.has(Ft),Ks=En.has(Ft),Ss=Bn?Bn.has(Ft):!1,Bs=Ft===ja||Ft===Ea,ls=(0,x.yM)(ut)||ss&&(0,x.Qx)(Qn.spans,nt);let ws=null;if(ss){const Es=(0,x.s2)(Qn.spans.slice(nt));if(Es){const er=this.getViewedBounds()(Es.startTime,Es.startTime+Es.duration);ws={color:(0,m._K)(Es.process.serviceName,ma),operationName:Es.operationName,serviceName:Es.process.serviceName,viewEnd:er.end,viewStart:er.start}}}const qs=ut.tags.find(Es=>Es.key===a);let Da=null;!ut.hasChildren&&qs&&(0,x.JE)(ut)&&(Da={serviceName:qs.value,color:(0,m._K)(qs.value,ma)});const Vs=Qe(this.props);return s.createElement("div",{className:Vs.row,key:vt,style:ht,...It},s.createElement(Je,{clippingLeft:this.getClipping().left,clippingRight:this.getClipping().right,color:Oa,spanBarOptions:Kn,columnDivision:ea,isChildrenExpanded:!ss,isDetailExpanded:Ks,isMatchingFilter:Ss,isFocused:Bs,numTicks:yt,onDetailToggled:yn,onChildrenToggled:Mn,rpc:ws,noInstrumentedServer:Da,showErrorIcon:ls,getViewedBounds:this.getViewedBounds(),traceStartTime:Qn.startTime,span:ut,hoverIndentGuideIds:Ua,addHoverIndentGuideId:pa,removeHoverIndentGuideId:va,createSpanLink:za,datasourceType:Xa}))}renderSpanDetailRow(ut,nt,vt,ht){const{spanID:It}=ut,{serviceName:Ft}=ut.process,{detailLogItemToggle:en,detailLogsToggle:sn,detailProcessToggle:Mn,detailReferencesToggle:En,detailReferenceItemToggle:yn,detailWarningsToggle:Bn,detailStackTracesToggle:ea,detailStates:Qn,detailTagsToggle:Kn,detailToggle:Ua,spanNameColumnWidth:pa,trace:va,timeZone:za,hoverIndentGuideIds:ja,addHoverIndentGuideId:Ea,removeHoverIndentGuideId:ma,linksGetter:Xa,createSpanLink:Oa,focusedSpanId:ss,createFocusSpanLink:Ks,topOfViewRefType:Ss,theme:Bs,datasourceType:ls}=this.props,ws=Qn.get(It);if(!va||!ws)return null;const qs=(0,m._K)(Ft,Bs),Da=Qe(this.props);return s.createElement("div",{className:Da.row,key:nt,style:{...vt,zIndex:1},...ht},s.createElement(Ue,{color:qs,columnDivision:pa,onDetailToggled:Ua,detailState:ws,linksGetter:Xa,logItemToggle:en,logsToggle:sn,processToggle:Mn,referenceItemToggle:yn,referencesToggle:En,warningsToggle:Bn,stackTracesToggle:ea,span:ut,timeZone:za,tagsToggle:Kn,traceStartTime:va.startTime,hoverIndentGuideIds:ja,addHoverIndentGuideId:Ea,removeHoverIndentGuideId:ma,createSpanLink:Oa,focusedSpanId:ss,createFocusSpanLink:Ks,topOfViewRefType:Ss,datasourceType:ls}))}render(){const ut=Qe(this.props),{scrollElement:nt}=this.props;return s.createElement(s.Fragment,null,s.createElement(h,{ref:this.setListView,dataLength:this.getRowStates().length,itemHeightGetter:this.getRowHeight,itemRenderer:this.renderRow,viewBuffer:50,viewBufferMin:50,itemsWrapperClassName:ut.rowsWrapper,getKeyFromIndex:this.getKeyFromIndex,getIndexFromKey:this.getIndexFromKey,windowScroller:!1,scrollElement:nt}),s.createElement(o.h,{className:ut.scrollToTopButton,onClick:this.scrollToTop,title:"Scroll to top",icon:"arrow-up"}))}}const qn=(0,l.HE)(Jn)},88989:()=>{"use strict"},5861:(H,T,e)=>{"use strict";e.d(T,{JE:()=>m,LU:()=>t.LU,Qx:()=>l,_h:()=>n,s2:()=>a,yM:()=>o});var t=e(320);function n(d){const{min:p,max:h,viewStart:y,viewEnd:v}=d,i=h-p,u=p+y*i,E=h-(1-v)*i-u;return(C,b)=>({start:(C-u)/E,end:(b-u)/E})}function c(d,p,h){return!Array.isArray(h.tags)||!h.tags.length?!1:h.tags.some(y=>y.key===d&&y.value===p)}const s=c.bind(null,"span.kind","client"),r=c.bind(null,"span.kind","server"),g=c.bind(null,"error",!0),f=c.bind(null,"error","true"),o=d=>g(d)||f(d);function l(d,p){const{depth:h}=d[p];let y=p+1;for(;y<d.length&&d[y].depth>h;y++)if(o(d[y]))return!0;return!1}function a(d){if(d.length<=1||!s(d[0]))return!1;const h=d[0].depth+1;let y=1;for(;y<d.length&&d[y].depth===h;){if(r(d[y]))return d[y];y++}return null}const m=d=>d.tags.some(({key:p,value:h})=>p==="span.kind"&&h==="client")},82736:(H,T,e)=>{"use strict";e.d(T,{Z:()=>o});var t=e(52423),n=e(9085),c=e.n(n),s=e(68404),r=e(72648),g=e(99746);const f=l=>a=>({LabeledList:t.css`
      label: LabeledList;
      list-style: none;
      margin: 0;
      padding: 0;
      ${l&&`
        margin-right: -8px;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-end;
      `}
    `,LabeledListItem:t.css`
      label: LabeledListItem;
      display: inline-block;
      ${l&&`
        border-right: 1px solid ${(0,g.h)(a,"#ddd")};
        padding: 0 8px;
      `}
    `,LabeledListLabel:t.css`
      label: LabeledListLabel;
      color: ${a.isLight?"#999":"#666"};
      margin-right: 0.25rem;
    `,LabeledListValue:t.css`
      label: LabeledListValue;
      margin-right: 0.55rem;
    `});function o(l){const{className:a,divider:m=!1,items:d}=l,p=(0,r.wW)(f(m));return s.createElement("ul",{className:c()(p.LabeledList,a)},d.map(({key:h,label:y,value:v})=>s.createElement("li",{className:p.LabeledListItem,key:`${h}`},s.createElement("span",{className:p.LabeledListLabel},y),s.createElement("strong",{className:p.LabeledListValue},v))))}},67089:(H,T,e)=>{"use strict";e.d(T,{DetailState:()=>Qn,SpanBarSettings:()=>Bn.ZP,TracePageHeader:()=>yn,TraceTimelineViewer:()=>oe,autoColor:()=>f.h,filterSpans:()=>Br,transformTraceData:()=>$r});var t=e(52423),n=e(68404),c=e(41818),s=e(35645),r=e(7804),g=e(72648),f=e(99746),o=e(21710),l=e.n(o);const m={scrollPageDown:{binding:"s",label:"Scroll down"},scrollPageUp:{binding:"w",label:"Scroll up"},scrollToNextVisibleSpan:{binding:"f",label:"Scroll to the next visible span"},scrollToPrevVisibleSpan:{binding:"b",label:"Scroll to the previous visible span"},panLeft:{binding:["a","left"],label:"Pan left"},panLeftFast:{binding:["shift+a","shift+left"],label:"Pan left \u2014 Large"},panRight:{binding:["d","right"],label:"Pan right"},panRightFast:{binding:["shift+d","shift+right"],label:"Pan right \u2014 Large"},zoomIn:{binding:"up",label:"Zoom in"},zoomInFast:{binding:"shift+up",label:"Zoom in \u2014 Large"},zoomOut:{binding:"down",label:"Zoom out"},zoomOutFast:{binding:"shift+down",label:"Zoom out \u2014 Large"},collapseAll:{binding:"]",label:"Collapse All"},expandAll:{binding:"[",label:"Expand All"},collapseOne:{binding:"p",label:"Collapse One Level"},expandOne:{binding:"o",label:"Expand One Level"},searchSpans:{binding:"ctrl+b",label:"Search Spans"},clearSearch:{binding:"escape",label:"Clear Search"}};let d;function p(){if(d)return d;const it=new(l())(document.body);return d=it,it}function h(it){const Dt=p();Object.keys(it).forEach(Lt=>{const Gt=it[Lt];Gt&&Dt.bind(m[Lt].binding,Gt)})}function y(){p().reset()}var v=e(9085),i=e.n(v),u=e(42413),P=e(55478),E=e(93804),C=e(8180);const b=()=>({TimelineCollapser:t.css`
      align-items: center;
      display: flex;
      flex: none;
      justify-content: center;
      margin-right: 0.5rem;
    `});function S(it){const{onExpandAll:Dt,onExpandOne:Lt,onCollapseAll:Gt,onCollapseOne:Zt}=it,cn=(0,g.wW)(b);return n.createElement("div",{className:cn.TimelineCollapser,"data-testid":"TimelineCollapser"},n.createElement(C.h,{tooltip:"Expand +1",size:"xl",tooltipPlacement:"top",name:"angle-down",onClick:Lt}),n.createElement(C.h,{tooltip:"Collapse +1",size:"xl",tooltipPlacement:"top",name:"angle-right",onClick:Zt}),n.createElement(C.h,{tooltip:"Expand All",size:"xl",tooltipPlacement:"top",name:"angle-double-down",onClick:Dt}),n.createElement(C.h,{tooltip:"Collapse All",size:"xl",tooltipPlacement:"top",name:"angle-double-right",onClick:Gt}))}var M=(it=>(it.DragEnd="DragEnd",it.DragMove="DragMove",it.DragStart="DragStart",it.MouseEnter="MouseEnter",it.MouseLeave="MouseLeave",it.MouseMove="MouseMove",it))(M||{});const x=M;var O=e(82897);const L=0;class B{constructor({getBounds:Dt,tag:Lt,resetBoundsOnResize:Gt=!0,...Zt}){this.resetBounds=()=>{this._bounds=void 0},this._handleMinorMouseEvent=cn=>{const{button:hn,clientX:Tn,type:fn}=cn;if(this._isDragging||hn!==L)return;let Rt=null,ya;if(fn==="mouseenter")Rt=x.MouseEnter,ya=this._onMouseEnter;else if(fn==="mouseleave")Rt=x.MouseLeave,ya=this._onMouseLeave;else if(fn==="mousemove")Rt=x.MouseMove,ya=this._onMouseMove;else throw new Error(`invalid event type: ${fn}`);if(!ya)return;const{value:Sa,x:Ca}=this._getPosition(Tn);ya({event:cn,type:Rt,value:Sa,x:Ca,manager:this,tag:this.tag})},this._handleDragEvent=cn=>{const{button:hn,clientX:Tn,type:fn}=cn;let Rt=null,ya;if(fn==="mousedown"){if(this._isDragging||hn!==L)return;window.addEventListener("mousemove",this._handleDragEvent),window.addEventListener("mouseup",this._handleDragEvent);const wa=(0,O.get)(document,"body.style");wa&&(wa.userSelect="none"),this._isDragging=!0,Rt=x.DragStart,ya=this._onDragStart}else if(fn==="mousemove"){if(!this._isDragging)return;Rt=x.DragMove,ya=this._onDragMove}else if(fn==="mouseup"){if(!this._isDragging)return;this._stopDragging(),Rt=x.DragEnd,ya=this._onDragEnd}else throw new Error(`invalid event type: ${fn}`);if(!ya)return;const{value:Sa,x:Ca}=this._getPosition(Tn);ya({event:cn,type:Rt,value:Sa,x:Ca,manager:this,tag:this.tag})},this.handleMouseDown=this._handleDragEvent,this.handleMouseEnter=this._handleMinorMouseEvent,this.handleMouseMove=this._handleMinorMouseEvent,this.handleMouseLeave=this._handleMinorMouseEvent,this.getBounds=Dt,this.tag=Lt,this._isDragging=!1,this._bounds=void 0,this._resetBoundsOnResize=Boolean(Gt),this._resetBoundsOnResize&&window.addEventListener("resize",this.resetBounds),this._onMouseEnter=Zt.onMouseEnter,this._onMouseLeave=Zt.onMouseLeave,this._onMouseMove=Zt.onMouseMove,this._onDragStart=Zt.onDragStart,this._onDragMove=Zt.onDragMove,this._onDragEnd=Zt.onDragEnd}_getBounds(){return this._bounds||(this._bounds=this.getBounds(this.tag)),this._bounds}_getPosition(Dt){const{clientXLeft:Lt,maxValue:Gt,minValue:Zt,width:cn}=this._getBounds();let hn=Dt-Lt,Tn=hn/cn;return Zt!=null&&Tn<Zt?(Tn=Zt,hn=Zt*cn):Gt!=null&&Tn>Gt&&(Tn=Gt,hn=Gt*cn),{value:Tn,x:hn}}_stopDragging(){window.removeEventListener("mousemove",this._handleDragEvent),window.removeEventListener("mouseup",this._handleDragEvent);const Dt=(0,O.get)(document,"body.style");Dt&&(Dt.userSelect="auto"),this._isDragging=!1}isDragging(){return this._isDragging}dispose(){this._isDragging&&this._stopDragging(),this._resetBoundsOnResize&&window.removeEventListener("resize",this.resetBounds),this._bounds=void 0,this._onMouseEnter=void 0,this._onMouseLeave=void 0,this._onMouseMove=void 0,this._onDragStart=void 0,this._onDragMove=void 0,this._onDragEnd=void 0}}const w=(0,r.B)(()=>({TimelineColumnResizer:t.css`
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,wrapper:t.css`
      bottom: 0;
      position: absolute;
      top: 0;
    `,dragger:t.css`
      border-left: 2px solid transparent;
      cursor: col-resize;
      height: 5000px;
      margin-left: -1px;
      position: absolute;
      top: 0;
      width: 1px;
      z-index: 10;
      &:hover {
        border-left: 2px solid rgba(0, 0, 0, 0.3);
      }
      &::before {
        position: absolute;
        top: 0;
        bottom: 0;
        left: -8px;
        right: 0;
        content: ' ';
      }
    `,draggerDragging:t.css`
      background: rgba(136, 0, 136, 0.05);
      width: unset;
      &::before {
        left: -2000px;
        right: -2000px;
      }
    `,draggerDraggingLeft:t.css`
      border-left: 2px solid #808;
      border-right: 1px solid #999;
    `,draggerDraggingRight:t.css`
      border-left: 1px solid #999;
      border-right: 2px solid #808;
    `,gripIcon:t.css`
      position: absolute;
      top: 0;
      bottom: 0;
      &::before,
      &::after {
        border-right: 1px solid #ccc;
        content: ' ';
        height: 9px;
        position: absolute;
        right: 9px;
        top: 25px;
      }
      &::after {
        right: 5px;
      }
    `,gripIconDragging:t.css`
      &::before,
      &::after {
        border-right: 1px solid rgba(136, 0, 136, 0.5);
      }
    `}));class R extends n.PureComponent{constructor(Dt){super(Dt),this._setRootElm=Lt=>{this._rootElm=Lt},this._getDraggingBounds=()=>{if(!this._rootElm)throw new Error("invalid state");const{left:Lt,width:Gt}=this._rootElm.getBoundingClientRect(),{min:Zt,max:cn}=this.props;return{clientXLeft:Lt,width:Gt,maxValue:cn,minValue:Zt}},this._handleDragUpdate=({value:Lt})=>{this.setState({dragPosition:Lt})},this._handleDragEnd=({manager:Lt,value:Gt})=>{Lt.resetBounds(),this.setState({dragPosition:null}),this.props.onChange(Gt)},this._dragManager=new B({getBounds:this._getDraggingBounds,onDragEnd:this._handleDragEnd,onDragMove:this._handleDragUpdate,onDragStart:this._handleDragUpdate}),this._rootElm=void 0,this.state={dragPosition:null}}componentWillUnmount(){this._dragManager.dispose()}render(){let Dt,Lt;const{position:Gt,columnResizeHandleHeight:Zt}=this.props,{dragPosition:cn}=this.state;Dt=`${Gt*100}%`;const hn={left:Dt};let Tn=!1,fn=!1;const Rt=w();if(this._dragManager.isDragging()&&this._rootElm&&cn!=null){Tn=cn<Gt,fn=cn>Gt;const Sa=`${Math.min(Gt,cn)*100}%`,Ca=`calc(${(1-Math.max(Gt,cn))*100}% - 1px)`;Lt={left:Sa,right:Ca}}else Lt=hn;Lt.height=Zt;const ya=Tn||fn;return n.createElement("div",{className:Rt.TimelineColumnResizer,ref:this._setRootElm,"data-testid":"TimelineColumnResizer"},n.createElement("div",{className:i()(Rt.gripIcon,ya&&Rt.gripIconDragging),style:hn,"data-testid":"TimelineColumnResizer--gripIcon"}),n.createElement("div",{"aria-hidden":!0,className:i()(Rt.dragger,ya&&Rt.draggerDragging,fn&&Rt.draggerDraggingRight,Tn&&Rt.draggerDraggingLeft),onMouseDown:this._dragManager.handleMouseDown,style:Lt,"data-testid":"TimelineColumnResizer--dragger"}))}}const A=(0,r.B)(()=>({TimelineViewingLayer:t.css`
      label: TimelineViewingLayer;
      bottom: 0;
      cursor: vertical-text;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,TimelineViewingLayerCursorGuide:t.css`
      label: TimelineViewingLayerCursorGuide;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      width: 1px;
      background-color: red;
    `,TimelineViewingLayerDragged:t.css`
      label: TimelineViewingLayerDragged;
      position: absolute;
      top: 0;
      bottom: 0;
    `,TimelineViewingLayerDraggedDraggingLeft:t.css`
      label: TimelineViewingLayerDraggedDraggingLeft;
      border-left: 1px solid;
    `,TimelineViewingLayerDraggedDraggingRight:t.css`
      label: TimelineViewingLayerDraggedDraggingRight;
      border-right: 1px solid;
    `,TimelineViewingLayerDraggedShiftDrag:t.css`
      label: TimelineViewingLayerDraggedShiftDrag;
      background-color: rgba(68, 68, 255, 0.2);
      border-color: #44f;
    `,TimelineViewingLayerDraggedReframeDrag:t.css`
      label: TimelineViewingLayerDraggedReframeDrag;
      background-color: rgba(255, 68, 68, 0.2);
      border-color: #f44;
    `,TimelineViewingLayerFullOverlay:t.css`
      label: TimelineViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `}));function U(it){return Reflect.has(it,"isOutOfView")}function I(it,Dt,Lt){return it+Lt*(Dt-it)}function N(it,Dt,Lt){return(Lt-it)/(Dt-it)}function F(it,Dt){let[Lt,Gt]=it<Dt?[it,Dt]:[Dt,it];return Lt>=1||Gt<=0?{isOutOfView:!0}:(Lt<0&&(Lt=0),Gt>1&&(Gt=1),{isDraggingLeft:it>Dt,left:`${Lt*100}%`,width:`${(Gt-Lt)*100}%`})}function D(it,Dt,Lt,Gt,Zt){const cn=N(it,Dt,Lt),hn=N(it,Dt,Gt),Tn=F(cn,hn);if(U(Tn))return null;const{isDraggingLeft:fn,left:Rt,width:ya}=Tn,Sa=A(),Ca=(0,t.cx)({[Sa.TimelineViewingLayerDraggedDraggingRight]:!fn,[Sa.TimelineViewingLayerDraggedReframeDrag]:!Zt,[Sa.TimelineViewingLayerDraggedShiftDrag]:Zt});return n.createElement("div",{className:(0,t.cx)(Sa.TimelineViewingLayerDragged,Sa.TimelineViewingLayerDraggedDraggingLeft,Ca),style:{left:Rt,width:ya},"data-testid":"Dragged"})}class Y extends n.PureComponent{constructor(Dt){super(Dt),this._setRoot=Lt=>{this._root=Lt},this._getDraggingBounds=()=>{if(!this._root)throw new Error("invalid state");const{left:Lt,width:Gt}=this._root.getBoundingClientRect();return{clientXLeft:Lt,width:Gt}},this._handleReframeMouseMove=({value:Lt})=>{const[Gt,Zt]=this.props.viewRangeTime.current,cn=I(Gt,Zt,Lt);this.props.updateNextViewRangeTime({cursor:cn})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:void 0})},this._handleReframeDragUpdate=({value:Lt})=>{const{current:Gt,reframe:Zt}=this.props.viewRangeTime,[cn,hn]=Gt,Tn=I(cn,hn,Lt),Rt={reframe:{anchor:Zt?Zt.anchor:Tn,shift:Tn}};this.props.updateNextViewRangeTime(Rt)},this._handleReframeDragEnd=({manager:Lt,value:Gt})=>{const{current:Zt,reframe:cn}=this.props.viewRangeTime,[hn,Tn]=Zt,fn=I(hn,Tn,Gt),Rt=cn?cn.anchor:fn,[ya,Sa]=fn<Rt?[fn,Rt]:[Rt,fn];Lt.resetBounds(),this.props.updateViewRangeTime(ya,Sa,"timeline-header")},this._draggerReframe=new B({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseLeave:this._handleReframeMouseLeave,onMouseMove:this._handleReframeMouseMove}),this._root=void 0}UNSAFE_componentWillReceiveProps(Dt){const{boundsInvalidator:Lt}=this.props;Lt!==Dt.boundsInvalidator&&this._draggerReframe.resetBounds()}componentWillUnmount(){this._draggerReframe.dispose()}render(){const{viewRangeTime:Dt}=this.props,{current:Lt,cursor:Gt,reframe:Zt,shiftEnd:cn,shiftStart:hn}=Dt,[Tn,fn]=Lt,Rt=Zt!=null||cn!=null||hn!=null;let ya;!Rt&&Gt!=null&&Gt>=Tn&&Gt<=fn&&(ya=`${N(Tn,fn,Gt)*100}%`);const Sa=A();return n.createElement("div",{"aria-hidden":!0,className:Sa.TimelineViewingLayer,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove,"data-testid":"TimelineViewingLayer"},ya!=null&&n.createElement("div",{className:Sa.TimelineViewingLayerCursorGuide,style:{left:ya},"data-testid":"TimelineViewingLayer--cursorGuide"}),Zt!=null&&D(Tn,fn,Zt.anchor,Zt.shift,!1),cn!=null&&D(Tn,fn,fn,cn,!0),hn!=null&&D(Tn,fn,Tn,hn,!0))}}const j=it=>({TimelineHeaderRow:t.css`
      label: TimelineHeaderRow;
      background: ${(0,f.h)(it,"#ececec")};
      border-bottom: 1px solid ${(0,f.h)(it,"#ccc")};
      height: 38px;
      line-height: 38px;
      width: 100%;
      z-index: 4;
      position: relative;
    `,TimelineHeaderRowTitle:t.css`
      label: TimelineHeaderRowTitle;
      flex: 1;
      overflow: hidden;
      margin: 0;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,TimelineHeaderWrapper:t.css`
      label: TimelineHeaderWrapper;
      align-items: center;
    `});function K(it){const{duration:Dt,nameColumnWidth:Lt,numTicks:Gt,onCollapseAll:Zt,onCollapseOne:cn,onColummWidthChange:hn,onExpandAll:Tn,onExpandOne:fn,updateViewRangeTime:Rt,updateNextViewRangeTime:ya,viewRangeTime:Sa,columnResizeHandleHeight:Ca}=it,[wa,rs]=Sa.current,Fa=(0,g.wW)(j);return n.createElement(E.Z,{className:Fa.TimelineHeaderRow,"data-testid":"TimelineHeaderRow"},n.createElement(E.Z.Cell,{className:i()(u.oD,u.H3,Fa.TimelineHeaderWrapper),width:Lt},n.createElement("h4",{className:Fa.TimelineHeaderRowTitle},"Service & Operation"),n.createElement(S,{onCollapseAll:Zt,onExpandAll:Tn,onCollapseOne:cn,onExpandOne:fn})),n.createElement(E.Z.Cell,{width:1-Lt},n.createElement(Y,{boundsInvalidator:Lt,updateNextViewRangeTime:ya,updateViewRangeTime:Rt,viewRangeTime:Sa}),n.createElement(P.Z,{numTicks:Gt,startTime:wa*Dt,endTime:rs*Dt,showLabels:!0})),n.createElement(R,{columnResizeHandleHeight:Ca,position:Lt,onChange:hn,min:.2,max:.85}))}var z=e(93183);const Z=(0,r.B)(it=>({TraceTimelineViewer:t.css`
      label: TraceTimelineViewer;
      border-bottom: 1px solid ${(0,f.h)(it,"#bbb")};

      & .json-markup {
        line-height: 17px;
        font-size: 13px;
        font-family: monospace;
        white-space: pre-wrap;
      }

      & .json-markup-key {
        font-weight: bold;
      }

      & .json-markup-bool {
        color: ${(0,f.h)(it,"firebrick")};
      }

      & .json-markup-string {
        color: ${(0,f.h)(it,"teal")};
      }

      & .json-markup-null {
        color: ${(0,f.h)(it,"teal")};
      }

      & .json-markup-number {
        color: ${(0,f.h)(it,"blue","black")};
      }
    `})),ae=5;class J extends n.PureComponent{constructor(Dt){super(Dt),this.collapseAll=()=>{this.props.collapseAll(this.props.trace.spans),(0,c.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"collapseAll"})},this.collapseOne=()=>{this.props.collapseOne(this.props.trace.spans),(0,c.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"collapseOne"})},this.expandAll=()=>{this.props.expandAll(),(0,c.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"expandAll"})},this.expandOne=()=>{this.props.expandOne(this.props.trace.spans),(0,c.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"expandOne"})},this.state={height:0}}componentDidMount(){h({collapseAll:this.collapseAll,expandAll:this.expandAll,collapseOne:this.collapseOne,expandOne:this.expandOne})}render(){const{setSpanNameColumnWidth:Dt,updateNextViewRangeTime:Lt,updateViewRangeTime:Gt,viewRange:Zt,traceTimeline:cn,theme:hn,topOfViewRef:Tn,focusedSpanIdForSearch:fn,...Rt}=this.props,{trace:ya}=Rt,Sa=Z(hn);return n.createElement("div",{className:Sa.TraceTimelineViewer,ref:Ca=>Ca&&this.setState({height:Ca.getBoundingClientRect().height})},n.createElement(K,{duration:ya.duration,nameColumnWidth:cn.spanNameColumnWidth,numTicks:ae,onCollapseAll:this.collapseAll,onCollapseOne:this.collapseOne,onColummWidthChange:Dt,onExpandAll:this.expandAll,onExpandOne:this.expandOne,viewRangeTime:Zt.time,updateNextViewRangeTime:Lt,updateViewRangeTime:Gt,columnResizeHandleHeight:this.state.height}),n.createElement(z.ZP,{...Rt,...cn,setSpanNameColumnWidth:Dt,currentViewRangeTime:Zt.time.current,topOfViewRef:Tn,focusedSpanIdForSearch:fn,datasourceType:this.props.datasourceType}))}}const oe=(0,g.HE)(J);var Ee=e(38849),me=e(39904);const re=()=>({NewWindowIconLarge:t.css`
      label: NewWindowIconLarge;
      font-size: 1.5em;
    `});function le(it){const{isLarge:Dt,className:Lt,...Gt}=it,Zt=(0,g.wW)(re),cn=i()({[Zt.NewWindowIconLarge]:Dt},Lt);return n.createElement(me.J,{className:cn,name:"anchor",...Gt})}le.defaultProps={isLarge:!1};const pe=it=>n.createElement("a",{href:it.href,title:it.title,target:"_blank",rel:"noopener noreferrer",className:it.className},it.children," ",n.createElement(le,null));function ee(it){const{links:Dt}=it;return n.createElement(pe,{href:Dt[0].url,title:Dt[0].text,className:it.className})}var se=e(82736);const Q=100,G="<trace-without-root-span>",q=()=>({BreakableText:t.css`
      label: BreakableText;
      display: inline-block;
      white-space: pre;
    `}),X=/\W*\w+\W*/g;function de(it){const{className:Dt,text:Lt,wordRegexp:Gt=X}=it,Zt=(0,g.wW)(q);if(!Lt)return null;const cn=[];Gt.exec("");let hn=Gt.exec(Lt)||[Lt];for(;hn;)cn.push(n.createElement("span",{key:`${Lt}-${cn.length}`,className:Dt||Zt.BreakableText},hn[0])),hn=Gt.exec(Lt);return cn}de.defaultProps={wordRegexp:X};const Be=it=>({TraceName:t.css`
      label: TraceName;
      font-size: ${it.typography.size.lg};
    `});function ke(it){const{className:Dt,traceName:Lt}=it,Gt=(0,g.wW)(Be),Zt=String(Lt||G),cn=n.createElement(de,{text:Zt});return n.createElement("span",{className:i()(Gt.TraceName,Dt)},cn)}var He=e(87855);const ue=Object.defineProperty({archiveEnabled:!1,dependencies:{dagMaxNumServices:Q,menuEnabled:!0},linkPatterns:[],search:{maxLookback:{label:"2 Days",value:"2d"},maxLimit:1500},tracking:{gaID:null,trackErrors:!0}},"__mergeFields",{value:["dependencies","search","tracking"]});function Oe(){return ue}function Fe(it){return(0,O.get)(Oe(),it)}function Ie(it){const Dt=it.references?it.references.find(Lt=>Lt.refType==="CHILD_OF"):null;return Dt?Dt.span:null}const we=/#\{([^{}]*)\}/g;function Re(it){const Dt=new Set;return it.replace(we,(Lt,Gt)=>(Dt.add(Gt),Lt)),Array.from(Dt)}function _e(it,Dt,Lt){return it.replace(we,(Gt,Zt)=>{const cn=Lt[Zt];return cn==null?"":Dt(cn)})}function et(it,Dt){if(typeof it!="string")throw new Error("Invalid template");return{parameters:Re(it),template:_e.bind(null,it,Dt)}}function qe(it){if(typeof it=="string")return Dt=>Dt===it;if(Array.isArray(it))return Dt=>it.indexOf(Dt)>-1;if(it==null)return()=>!0;throw new Error(`Invalid value: ${it}`)}const Je=it=>it;function lt(it){try{const Dt=et(it.url,encodeURIComponent),Lt=et(it.text,Je);return{object:it,type:qe(it.type),key:qe(it.key),value:qe(it.value),url:Dt,text:Lt,parameters:(0,O.uniq)(Dt.parameters.concat(Lt.parameters))}}catch(Dt){return console.error(`Ignoring invalid link pattern: ${Dt}`,it),null}}function at(it,Dt){if(Dt)return Dt.find(Lt=>Lt.key===it)}function Xe(it,Dt){let Lt=Dt;for(;Lt;){const Gt=at(it,Lt.tags)||at(it,Lt.process.tags);if(Gt)return Gt;Lt=Ie(Lt)}}function gt(it,Dt){return it.template(Dt)}function ot(it,Dt){const Lt=[],Gt=Object.keys(Dt).filter(Zt=>typeof Dt[Zt]=="string"||Dt[Zt]==="number");return it?.filter(Zt=>Zt?.type("traces")).forEach(Zt=>{const cn={};Zt?.parameters.every(Tn=>{const fn=Tn;return Gt.includes(fn)?(cn[Tn]=Dt[fn],!0):!1})&&Lt.push({url:gt(Zt.url,cn),text:gt(Zt.text,cn)})}),Lt}function Ye(it,Dt,Lt,Gt){const Zt=Lt[Gt];let cn="logs";const hn=Dt.process.tags===Lt;hn&&(cn="process"),Dt.tags===Lt&&(cn="tags");const fn=[];return it.forEach(Rt=>{if(Rt.type(cn)&&Rt.key(Zt.key)&&Rt.value(Zt.value)){const ya={};Rt.parameters.every(Ca=>{let wa=at(Ca,Lt);return!wa&&!hn&&(wa=Xe(Ca,Dt)),wa?(ya[Ca]=wa.value,!0):(console.warn(`Skipping link pattern, missing parameter ${Ca} for key ${Zt.key} in ${cn}.`,Rt.object),!1)})&&fn.push({url:gt(Rt.url,ya),text:gt(Rt.text,ya)})}}),fn}function mt(it,Dt){return(Lt,Gt,Zt)=>{if(it.length===0)return[];const cn=Gt[Zt];let hn=Dt.get(cn);return hn||(hn=Ye(it,Lt,Gt,Zt),Dt.set(cn,hn)),hn}}const ce=(Fe("linkPatterns")||[]).map(lt).filter(it=>Boolean(it)),be=(0,He.Z)(10)(it=>{const Dt=[];return it?ot(ce,it):Dt}),Te=mt(ce,new WeakMap);function Ke(it){let Dt;const Lt=new Set(it.map(({spanID:Gt})=>Gt));for(let Gt=0;Gt<it.length;Gt++){if(it[Gt].references&&it[Gt].references.some(({traceID:Tn,spanID:fn})=>Tn===it[Gt].traceID&&Lt.has(fn)))continue;if(!Dt){Dt=it[Gt];continue}const cn=it[Gt].references&&it[Gt].references.length||0,hn=Dt.references&&Dt.references.length||0;(cn<hn||cn===hn&&it[Gt].startTime<Dt.startTime)&&(Dt=it[Gt])}return Dt?`${Dt.process.serviceName}: ${Dt.operationName}`:""}const ge=(0,O.memoize)(Ke,it=>it.length?it[0].traceID:0);var Me=e(320),ye=e(58635),fe=e(9096);const he=.8,De=2,Ae=200,Ne=10,Ze=60,Se=6;function Ue(it,Dt,Lt,Gt,Zt){const cn=new Map,hn=Dt.length<Ze?Ze:Math.min(Dt.length,Ae),Tn=window.innerWidth*2;it.width=Tn,it.height=hn;const fn=Math.min(Se,Math.max(De,hn/Dt.length)),Rt=hn/Dt.length,ya=it.getContext("2d",{alpha:!1});ya.fillStyle=Zt,ya.fillRect(0,0,Tn,hn);for(let Sa=0;Sa<Dt.length;Sa++){const{valueWidth:Ca,valueOffset:wa,serviceName:rs}=Dt[Sa],Fa=wa/Lt*Tn;let zs=Ca/Lt*Tn;zs<Ne&&(zs=Ne);let _a=cn.get(rs);_a||(_a=`rgba(${Gt(rs).concat(he).join()})`,cn.set(rs,_a)),ya.fillStyle=_a,ya.fillRect(Fa,Sa*Rt,zs,fn)}}const Qe=(0,r.B)(it=>({CanvasSpanGraph:t.css`
      label: CanvasSpanGraph;
      background: ${(0,f.h)(it,"#fafafa")};
      height: 60px;
      position: absolute;
      width: 100%;
    `}));class pt extends n.PureComponent{constructor(Dt){super(Dt),this.getColor=Lt=>(0,fe.e6)(Lt,this.props.theme),this._setCanvasRef=Lt=>{this._canvasElm=Lt},this._canvasElm=void 0}componentDidMount(){this._draw()}componentDidUpdate(){this._draw()}_draw(){if(this._canvasElm){const{valueWidth:Dt,items:Lt}=this.props;Ue(this._canvasElm,Lt,Dt,this.getColor,(0,f.h)(this.props.theme,"#fff"))}}render(){return n.createElement("canvas",{className:Qe(this.props.theme).CanvasSpanGraph,ref:this._setCanvasRef,"data-testid":"CanvasSpanGraph"})}}const bt=(0,g.HE)(pt),yt=()=>({TickLabels:t.css`
      label: TickLabels;
      height: 1rem;
      position: relative;
    `,TickLabelsLabel:t.css`
      label: TickLabelsLabel;
      color: #717171;
      font-size: 0.7rem;
      position: absolute;
      user-select: none;
    `});function Mt(it){const{numTicks:Dt,duration:Lt}=it,Gt=(0,g.wW)(yt),Zt=[];for(let cn=0;cn<Dt+1;cn++){const hn=cn/Dt,Tn=hn===1?{right:"0%"}:{left:`${hn*100}%`};Zt.push(n.createElement("div",{key:hn,className:Gt.TickLabelsLabel,style:Tn,"data-testid":"tick"},(0,Me.LU)(Lt*hn)))}return n.createElement("div",{className:Gt.TickLabels,"data-testid":"TickLabels"},Zt)}var At=e(31403);const Pt=()=>({GraphTick:t.css`
      label: GraphTick;
      stroke: #aaa;
      stroke-width: 1px;
    `});function rn(it){const{numTicks:Dt}=it,Lt=(0,g.wW)(Pt),Gt=[];for(let Zt=1;Zt<Dt;Zt++){const cn=`${Zt/Dt*100}%`;Gt.push(n.createElement("line",{className:Lt.GraphTick,x1:cn,y1:"0%",x2:cn,y2:"100%",key:Zt/Dt}))}return n.createElement("g",{"data-testid":"ticks","aria-hidden":"true"},Gt)}const Fn=()=>({ScrubberHandleExpansion:i()(t.css`
        label: ScrubberHandleExpansion;
        cursor: col-resize;
        fill-opacity: 0;
        fill: #44f;
      `,"scrubber-handle-expansion"),ScrubberHandle:i()(t.css`
        label: ScrubberHandle;
        cursor: col-resize;
        fill: #555;
      `,"scrubber-handle"),ScrubberLine:i()(t.css`
        label: ScrubberLine;
        pointer-events: none;
        stroke: #555;
      `,"scrubber-line"),ScrubberDragging:t.css`
      label: ScrubberDragging;
      & .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      & .scrubber-handle {
        fill: #44f;
      }
      & > .scrubber-line {
        stroke: #44f;
      }
    `,ScrubberHandles:t.css`
      label: ScrubberHandles;
      &:hover > .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      &:hover > .scrubber-handle {
        fill: #44f;
      }
      &:hover + .scrubber.line {
        stroke: #44f;
      }
    `});function kn({isDragging:it,onMouseDown:Dt,onMouseEnter:Lt,onMouseLeave:Gt,position:Zt}){const cn=`${Zt*100}%`,hn=(0,g.wW)(Fn),Tn=i()({[hn.ScrubberDragging]:it});return n.createElement("g",{className:Tn,"data-testid":"scrubber-component"},n.createElement("g",{"data-testid":"scrubber-component-g",className:hn.ScrubberHandles,onMouseDown:Dt,onMouseEnter:Lt,onMouseLeave:Gt},n.createElement("rect",{"data-testid":"scrubber-component-rect-1",x:cn,className:hn.ScrubberHandleExpansion,style:{transform:"translate(-4.5px)"},width:"9",height:"20"}),n.createElement("rect",{"data-testid":"scrubber-component-rect-2",x:cn,className:hn.ScrubberHandle,style:{transform:"translate(-1.5px)"},width:"3",height:"20"})),n.createElement("line",{className:hn.ScrubberLine,y2:"100%",x1:cn,x2:cn,"data-testid":"scrubber-component-line"}))}const Jn=(0,r.B)(it=>{const Dt="JaegerUiComponents__ViewingLayerResetZoomHoverClassName",Lt=t.css`
    label: ViewingLayerResetZoom;
    display: none;
    position: absolute;
    right: 1%;
    top: 10%;
    z-index: 1;
  `;return{ViewingLayer:t.css`
      label: ViewingLayer;
      cursor: vertical-text;
      position: relative;
      z-index: 1;
      &:hover > .${Dt} {
        display: unset;
      }
    `,ViewingLayerGraph:t.css`
      label: ViewingLayerGraph;
      border: 1px solid ${(0,f.h)(it,"#999")};
      /* need !important here to overcome something from semantic UI */
      overflow: visible !important;
      position: relative;
      transform-origin: 0 0;
      width: 100%;
    `,ViewingLayerInactive:t.css`
      label: ViewingLayerInactive;
      fill: ${(0,f.h)(it,"rgba(214, 214, 214, 0.5)")};
    `,ViewingLayerCursorGuide:t.css`
      label: ViewingLayerCursorGuide;
      stroke: ${(0,f.h)(it,"#f44")};
      stroke-width: 1;
    `,ViewingLayerDraggedShift:t.css`
      label: ViewingLayerDraggedShift;
      fill-opacity: 0.2;
    `,ViewingLayerDrag:t.css`
      label: ViewingLayerDrag;
      fill: ${(0,f.h)(it,"#44f")};
    `,ViewingLayerFullOverlay:t.css`
      label: ViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `,ViewingLayerResetZoom:Lt,ViewingLayerResetZoomHoverClassName:Dt}}),qn={SHIFT_END:"SHIFT_END",SHIFT_START:"SHIFT_START",REFRAME:"REFRAME"};function Ut(it,Dt){const[Lt,Gt]=it<Dt?[it,Dt]:[Dt,it];return{x:`${Lt*100}%`,width:`${(Gt-Lt)*100}%`,leadingX:`${Dt*100}%`}}class ut extends n.PureComponent{constructor(Dt){super(Dt),this._setRoot=Lt=>{this._root=Lt},this._getDraggingBounds=Lt=>{if(!this._root)throw new Error("invalid state");const{left:Gt,width:Zt}=this._root.getBoundingClientRect(),[cn,hn]=this.props.viewRange.time.current;let Tn=1,fn=0;return Lt===qn.SHIFT_START?Tn=hn:Lt===qn.SHIFT_END&&(fn=cn),{clientXLeft:Gt,maxValue:Tn,minValue:fn,width:Zt}},this._handleReframeMouseMove=({value:Lt})=>{this.props.updateNextViewRangeTime({cursor:Lt})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:null})},this._handleReframeDragUpdate=({value:Lt})=>{const Gt=Lt,{time:Zt}=this.props.viewRange,hn={reframe:{anchor:Zt.reframe?Zt.reframe.anchor:Gt,shift:Gt}};this.props.updateNextViewRangeTime(hn)},this._handleReframeDragEnd=({manager:Lt,value:Gt})=>{const{time:Zt}=this.props.viewRange,cn=Zt.reframe?Zt.reframe.anchor:Gt,[hn,Tn]=Gt<cn?[Gt,cn]:[cn,Gt];Lt.resetBounds(),this.props.updateViewRangeTime(hn,Tn,"minimap")},this._handleScrubberEnterLeave=({type:Lt})=>{const Gt=Lt===x.MouseEnter;this.setState({preventCursorLine:Gt})},this._handleScrubberDragUpdate=({event:Lt,tag:Gt,type:Zt,value:cn})=>{Zt===x.DragStart&&Lt.stopPropagation(),Gt===qn.SHIFT_START?this.props.updateNextViewRangeTime({shiftStart:cn}):Gt===qn.SHIFT_END&&this.props.updateNextViewRangeTime({shiftEnd:cn})},this._handleScrubberDragEnd=({manager:Lt,tag:Gt,value:Zt})=>{const[cn,hn]=this.props.viewRange.time.current;let Tn;if(Gt===qn.SHIFT_START)Tn=[Zt,hn];else if(Gt===qn.SHIFT_END)Tn=[cn,Zt];else throw new Error("bad state");Lt.resetBounds(),this.setState({preventCursorLine:!1}),this.props.updateViewRangeTime(Tn[0],Tn[1],"minimap")},this._resetTimeZoomClickHandler=()=>{this.props.updateViewRangeTime(0,1)},this._draggerReframe=new B({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseMove:this._handleReframeMouseMove,onMouseLeave:this._handleReframeMouseLeave,tag:qn.REFRAME}),this._draggerStart=new B({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:qn.SHIFT_START}),this._draggerEnd=new B({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:qn.SHIFT_END}),this._root=void 0,this.state={preventCursorLine:!1}}componentWillUnmount(){this._draggerReframe.dispose(),this._draggerEnd.dispose(),this._draggerStart.dispose()}_getMarkers(Dt,Lt){const Gt=Jn(this.props.theme),Zt=Ut(Dt,Lt);return[n.createElement("rect",{key:"fill",className:i()(Gt.ViewingLayerDraggedShift,Gt.ViewingLayerDrag),x:Zt.x,y:"0",width:Zt.width,height:this.props.height-2}),n.createElement("rect",{key:"edge",className:i()(Gt.ViewingLayerDrag),x:Zt.leadingX,y:"0",width:"1",height:this.props.height-2})]}render(){const{height:Dt,viewRange:Lt,numTicks:Gt,theme:Zt}=this.props,{preventCursorLine:cn}=this.state,{current:hn,cursor:Tn,shiftStart:fn,shiftEnd:Rt,reframe:ya}=Lt.time,Sa=fn!=null||Rt!=null||ya!=null,[Ca,wa]=hn;let rs=0;Ca&&(rs=Ca*100);let Fa=100;wa&&(Fa=100-wa*100);let zs;!Sa&&Tn!=null&&!cn&&(zs=`${Tn*100}%`);const _a=Jn(Zt);return n.createElement("div",{"aria-hidden":!0,className:_a.ViewingLayer,style:{height:Dt}},(Ca!==0||wa!==1)&&n.createElement(At.zx,{onClick:this._resetTimeZoomClickHandler,className:i()(_a.ViewingLayerResetZoom,_a.ViewingLayerResetZoomHoverClassName),type:"button",variant:"secondary"},"Reset Selection"),n.createElement("svg",{height:Dt,className:_a.ViewingLayerGraph,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove},rs>0&&n.createElement("rect",{x:0,y:0,height:"100%",width:`${rs}%`,className:_a.ViewingLayerInactive,"data-testid":"left-ViewingLayerInactive"}),Fa>0&&n.createElement("rect",{x:`${100-Fa}%`,y:0,height:"100%",width:`${Fa}%`,className:_a.ViewingLayerInactive,"data-testid":"right-ViewingLayerInactive"}),n.createElement(rn,{numTicks:Gt}),zs&&n.createElement("line",{className:_a.ViewingLayerCursorGuide,x1:zs,y1:"0",x2:zs,y2:Dt-2,strokeWidth:"1","data-testid":"ViewingLayerCursorGuide"}),fn!=null&&this._getMarkers(Ca,fn),Rt!=null&&this._getMarkers(wa,Rt),n.createElement(kn,{isDragging:fn!=null,onMouseDown:this._draggerStart.handleMouseDown,onMouseEnter:this._draggerStart.handleMouseEnter,onMouseLeave:this._draggerStart.handleMouseLeave,position:Ca||0}),n.createElement(kn,{isDragging:Rt!=null,position:wa||1,onMouseDown:this._draggerEnd.handleMouseDown,onMouseEnter:this._draggerEnd.handleMouseEnter,onMouseLeave:this._draggerEnd.handleMouseLeave}),ya!=null&&this._getMarkers(ya.anchor,ya.shift)),Sa&&n.createElement("div",{className:_a.ViewingLayerFullOverlay}))}}const nt=(0,g.HE)(ut),vt=60,ht=4;function It(it){return{valueOffset:it.relativeStartTime,valueWidth:it.duration,serviceName:it.process.serviceName}}function Ft(it){return it.spans.map(It)}const en=(0,ye.Z)(Ft);class sn extends n.PureComponent{render(){const{height:Dt,trace:Lt,viewRange:Gt,updateNextViewRangeTime:Zt,updateViewRangeTime:cn}=this.props;if(!Lt)return n.createElement("div",null);const hn=en(Lt);return n.createElement("div",{className:i()(u.GL,u.H3)},n.createElement(Mt,{numTicks:ht,duration:Lt.duration}),n.createElement("div",{className:u.WW},n.createElement(bt,{valueWidth:Lt.duration,items:hn}),n.createElement(nt,{viewRange:Gt,numTicks:ht,height:Dt||vt,updateViewRangeTime:cn,updateNextViewRangeTime:Zt})))}}sn.defaultProps={height:vt};const Mn=it=>({TracePageHeader:t.css`
      label: TracePageHeader;
      & > :first-child {
        border-bottom: 1px solid ${(0,f.h)(it,"#e8e8e8")};
      }
      & > :nth-child(2) {
        background-color: ${(0,f.h)(it,"#eee")};
        border-bottom: 1px solid ${(0,f.h)(it,"#e4e4e4")};
      }
      & > :last-child {
        border-bottom: 1px solid ${(0,f.h)(it,"#ccc")};
      }
    `,TracePageHeaderTitleRow:t.css`
      label: TracePageHeaderTitleRow;
      align-items: center;
      display: flex;
    `,TracePageHeaderBack:t.css`
      label: TracePageHeaderBack;
      align-items: center;
      align-self: stretch;
      background-color: #fafafa;
      border-bottom: 1px solid #ddd;
      border-right: 1px solid #ddd;
      color: inherit;
      display: flex;
      font-size: 1.4rem;
      padding: 0 1rem;
      margin-bottom: -1px;
      &:hover {
        background-color: #f0f0f0;
        border-color: #ccc;
      }
    `,TracePageHeaderTitleLink:t.css`
      label: TracePageHeaderTitleLink;
      align-items: center;
      display: flex;
      flex: 1;

      &:hover * {
        text-decoration: underline;
      }
      &:hover > *,
      &:hover small {
        text-decoration: none;
      }
      /* Adapt styles when changing from a element into button */
      background: transparent;
      text-align: left;
      border: none;
    `,TracePageHeaderDetailToggle:t.css`
      label: TracePageHeaderDetailToggle;
      font-size: 2.5rem;
      transition: transform 0.07s ease-out;
    `,TracePageHeaderDetailToggleExpanded:t.css`
      label: TracePageHeaderDetailToggleExpanded;
      transform: rotate(90deg);
    `,TracePageHeaderTitle:t.css`
      label: TracePageHeaderTitle;
      color: inherit;
      flex: 1;
      font-size: 1.7em;
      line-height: 1em;
      margin: 0 0 0 0.5em;
      padding-bottom: 0.5em;
    `,TracePageHeaderTitleCollapsible:t.css`
      label: TracePageHeaderTitleCollapsible;
      margin-left: 0;
    `,TracePageHeaderOverviewItems:t.css`
      label: TracePageHeaderOverviewItems;
      border-bottom: 1px solid #e4e4e4;
      padding: 0.25rem 0.5rem !important;
    `,TracePageHeaderOverviewItemValueDetail:i()(t.css`
        label: TracePageHeaderOverviewItemValueDetail;
        color: #aaa;
      `,"trace-item-value-detail"),TracePageHeaderOverviewItemValue:t.css`
      label: TracePageHeaderOverviewItemValue;
      &:hover > .trace-item-value-detail {
        color: unset;
      }
    `,TracePageHeaderArchiveIcon:t.css`
      label: TracePageHeaderArchiveIcon;
      font-size: 1.78em;
      margin-right: 0.15em;
    `,TracePageHeaderTraceId:t.css`
      label: TracePageHeaderTraceId;
      white-space: nowrap;
    `}),En=[{key:"timestamp",label:"Trace Start:",renderer(it,Dt,Lt){const Gt=(0,Ee.dq)(it.startTime/1e3,{timeZone:Dt,defaultWithMS:!0}),Zt=Gt.match(/^(.+)(:\d\d\.\d+)$/);return Zt?n.createElement("span",{className:Lt.TracePageHeaderOverviewItemValue},Zt[1],n.createElement("span",{className:Lt.TracePageHeaderOverviewItemValueDetail},Zt[2])):Gt}},{key:"duration",label:"Duration:",renderer:it=>(0,Me.LU)(it.duration)},{key:"service-count",label:"Services:",renderer:it=>new Set((0,O.values)(it.processes).map(Dt=>Dt.serviceName)).size},{key:"depth",label:"Depth:",renderer:it=>(0,O.get)((0,O.maxBy)(it.spans,"depth"),"depth",0)+1},{key:"span-count",label:"Total Spans:",renderer:it=>it.spans.length}];function yn(it){const{canCollapse:Dt,hideMap:Lt,hideSummary:Gt,onSlimViewClicked:Zt,slimView:cn,trace:hn,updateNextViewRangeTime:Tn,updateViewRangeTime:fn,viewRange:Rt,timeZone:ya}=it,Sa=(0,g.wW)(Mn),Ca=n.useMemo(()=>hn?be(hn):[],[hn]);if(!hn)return null;const wa=!Gt&&!cn&&En.map(Fa=>{const{renderer:zs,..._a}=Fa;return{..._a,value:zs(hn,ya,Sa)}}),rs=n.createElement("h1",{className:i()(Sa.TracePageHeaderTitle,Dt&&Sa.TracePageHeaderTitleCollapsible)},n.createElement(ke,{traceName:ge(hn.spans)})," ",n.createElement("small",{className:i()(Sa.TracePageHeaderTraceId,u.pQ)},hn.traceID));return n.createElement("header",{className:Sa.TracePageHeader},n.createElement("div",{className:Sa.TracePageHeaderTitleRow},Ca&&Ca.length>0&&n.createElement(ee,{links:Ca,className:Sa.TracePageHeaderBack}),Dt?n.createElement("button",{type:"button",className:Sa.TracePageHeaderTitleLink,onClick:Zt,role:"switch","aria-checked":!cn},n.createElement(me.J,{name:"angle-right",className:i()(Sa.TracePageHeaderDetailToggle,!cn&&Sa.TracePageHeaderDetailToggleExpanded)}),rs):rs),wa&&n.createElement(se.Z,{className:Sa.TracePageHeaderOverviewItems,items:wa}),!Lt&&!cn&&n.createElement(sn,{trace:hn,viewRange:Rt,updateNextViewRangeTime:Tn,updateViewRangeTime:fn}))}var Bn=e(52541),ea=e(88989);class Qn{constructor(Dt){const{isTagsOpen:Lt,isProcessOpen:Gt,isReferencesOpen:Zt,isWarningsOpen:cn,isStackTracesOpen:hn,logs:Tn,references:fn}=Dt||{};this.isTagsOpen=Boolean(Lt),this.isProcessOpen=Boolean(Gt),this.isReferencesOpen=Boolean(Zt),this.isWarningsOpen=Boolean(cn),this.isStackTracesOpen=Boolean(hn),this.logs={isOpen:Boolean(Tn&&Tn.isOpen),openedItems:Tn&&Tn.openedItems?new Set(Tn.openedItems):new Set},this.references={isOpen:Boolean(fn&&fn.isOpen),openedItems:fn&&fn.openedItems?new Set(fn.openedItems):new Set}}toggleTags(){const Dt=new Qn(this);return Dt.isTagsOpen=!this.isTagsOpen,Dt}toggleProcess(){const Dt=new Qn(this);return Dt.isProcessOpen=!this.isProcessOpen,Dt}toggleReferences(){const Dt=new Qn(this);return Dt.references.isOpen=!this.references.isOpen,Dt}toggleReferenceItem(Dt){const Lt=new Qn(this);return Lt.references.openedItems.has(Dt)?Lt.references.openedItems.delete(Dt):Lt.references.openedItems.add(Dt),Lt}toggleWarnings(){const Dt=new Qn(this);return Dt.isWarningsOpen=!this.isWarningsOpen,Dt}toggleStackTraces(){const Dt=new Qn(this);return Dt.isStackTracesOpen=!this.isStackTracesOpen,Dt}toggleLogs(){const Dt=new Qn(this);return Dt.logs.isOpen=!this.logs.isOpen,Dt}toggleLogItem(Dt){const Lt=new Qn(this);return Lt.logs.openedItems.has(Dt)?Lt.logs.openedItems.delete(Dt):Lt.logs.openedItems.add(Dt),Lt}}var Kn=e(58565);class Ua{static iterFunction(Dt,Lt=0){return Gt=>Dt(Gt.value,Gt,Lt)}static searchFunction(Dt){return typeof Dt=="function"?Dt:(Lt,Gt)=>Dt instanceof Ua?Gt===Dt:Lt===Dt}constructor(Dt,Lt=[]){this.value=Dt,this.children=Lt}get depth(){return this.children?.reduce((Dt,Lt)=>Math.max(Lt.depth+1,Dt),1)}get size(){let Dt=0;return this.walk(()=>Dt++),Dt}addChild(Dt){return this.children?.push(Dt instanceof Ua?Dt:new Ua(Dt)),this}find(Dt){if(Ua.iterFunction(Ua.searchFunction(Dt))(this))return this;for(let Gt=0;Gt<this.children.length;Gt++){const Zt=this.children[Gt].find(Dt);if(Zt)return Zt}return null}getPath(Dt){const Lt=Ua.iterFunction(Ua.searchFunction(Dt)),Gt=(Zt,cn)=>{const hn=cn.concat([Zt]);if(Lt(Zt))return hn;for(let Tn=0;Tn<Zt.children.length;Tn++){const fn=Zt.children[Tn],Rt=Gt(fn,hn);if(Rt)return Rt}return null};return Gt(this,[])}walk(Dt,Lt=0){const Gt=[];let Zt=Lt;for(Gt.push({node:this,depth:Zt});Gt.length;){const cn=Gt.pop();if(cn){const{node:hn,depth:Tn}=cn;Dt(hn.value,hn,Tn),Zt=(Tn||0)+1;let fn=hn.children.length-1;for(;fn>=0;)Gt.push({node:hn.children[fn],depth:Zt}),fn--}}}}function pa(it,Dt){return it.localeCompare(Dt)}function va(it,Dt){return it-Dt}function za(it){return`sorted ${it===1?"ascending":"descending"}`}function ja(it,Dt){const{defaultDir:Lt=1}=Dt;return{key:Dt.name,dir:it.key===Dt.name?-1*it.dir:Lt}}const Ea=it=>it.serviceName,ma=it=>it.tags;var Xa=e(27303);const Oa=it=>it.spanID,ss=it=>it.operationName,Ks=it=>it.duration,Ss=it=>it.startTime,Bs=it=>it.processID,ls=it=>it.references||[],ws=(0,Kn.P1)((0,Kn.P1)(({span:it})=>it,ls),({type:it})=>it,(it,Dt)=>it.find(Lt=>Lt.refType===Dt)),qs=(0,Kn.P1)(it=>ws({span:it,type:"CHILD_OF"}),it=>it?it.spanID:null),Da=it=>{if(!it.process)throw new Error(`
      you must hydrate the spans with the processes, perhaps
      using hydrateSpansWithProcesses(), before accessing a span's process
    `);return it.process},Vs=(0,Kn.P1)(Da,Ea),Es=(0,Kn.P1)(({spans:it})=>it,({leftBound:it})=>it,({rightBound:it})=>it,(it,Dt,Lt)=>it.filter(Gt=>Ss(Gt)>=Dt&&Ss(Gt)<=Lt)),er=(0,Kn.P1)(({spans:it})=>it,({text:it})=>it,(it,Dt)=>it.filter(Lt=>Lt?(0,Xa.C)(`${Vs(Lt)} ${ss(Lt)}`,Dt).found:!1)),dr=it=>it.traceID,es=it=>it.spans,tr=it=>it.processes,Is=(0,Kn.P1)(it=>it.span,it=>it.processes,(it,Dt)=>({...it,process:Dt[Bs(it)]})),ts=(0,Kn.P1)(es,it=>it.reduce((Dt,Lt)=>Dt.set(Oa(Lt),Lt),new Map)),Zs="__root__";function Xt(it){const Dt=new Map(it.spans.map(cn=>[cn.spanID,new Ua(cn.spanID)])),Lt=new Map(it.spans.map(cn=>[cn.spanID,cn])),Gt=new Ua(Zs);it.spans.forEach(cn=>{const hn=Dt.get(cn.spanID);if(Array.isArray(cn.references)&&cn.references.length){const{refType:Tn,spanID:fn}=cn.references[0];if(Tn==="CHILD_OF"||Tn==="FOLLOWS_FROM")(Dt.get(fn)||Gt).children?.push(hn);else throw new Error(`Unrecognized ref type: ${Tn}`)}else Gt.children.push(hn)});const Zt=(cn,hn)=>{const Tn=cn?.value?Lt.get(cn.value.toString()):void 0,fn=hn?.value?Lt.get(hn.value.toString()):void 0;return+(Tn?.startTime>fn?.startTime)||+(Tn?.startTime===fn?.startTime)-1};return it.spans.forEach(cn=>{const hn=Dt.get(cn.spanID);hn.children.length>1&&hn?.children.sort(Zt)}),Gt.children.sort(Zt),Gt}const kt=it=>{const Dt=es(it),Lt=tr(it);return{...it,spans:Dt.map(Gt=>Is({span:Gt,processes:Lt}))}},vn=(0,Kn.P1)(es,it=>it.length),An=(0,Kn.P1)(es,it=>it.reduce((Dt,Lt)=>Dt?Math.min(Dt,Ss(Lt)):Ss(Lt),0)),Wn=(0,Kn.P1)(es,An,(it,Dt)=>it.reduce((Lt,Gt)=>Lt?Math.max(Ss(Gt)-Dt+Ks(Gt),Lt):Ks(Gt),0)),Xn=(0,Kn.P1)(Xt,ts,(it,Dt)=>it.children.map(Lt=>Dt.get(Lt.value)).sort((Lt,Gt)=>va(Ss(Lt),Ss(Gt)))[0]),Ha=(0,Kn.P1)(Xt,it=>it.depth-1),Qa=(0,Kn.P1)((0,Kn.P1)(it=>it.trace,Xt),(0,Kn.P1)(it=>it.span,Oa),(it,Dt)=>it.getPath(Dt).length-1),ka=(0,Kn.P1)(tr,it=>Object.keys(it).reduce((Dt,Lt)=>Dt.add(Ea(it[Lt])),new Set)),ys=(0,Kn.P1)(ka,it=>it.size),xs={ms:Me.Cz,s:Me.Gk},Ga=(0,Kn.P1)(Wn,it=>it>=Me.WT?xs.s:xs.ms),or=(0,Kn.P1)(({duration:it})=>it,({unit:it})=>xs[it],(it,Dt)=>Dt(it)),bs=(0,Kn.P1)(({duration:it})=>it,(0,Kn.P1)(({trace:it})=>it,Ga),(it,Dt)=>Dt(it)),ur=(0,Kn.P1)(({trace:it})=>it,({spans:it})=>it,({sort:it})=>it,(it,Dt,{dir:Lt,comparator:Gt,selector:Zt})=>[...Dt].sort((cn,hn)=>Lt*Gt(Zt(cn,it),Zt(hn,it)))),mr=(0,Kn.P1)((0,Kn.P1)(it=>it.trace,Xt),(0,Kn.P1)(it=>it.span,Oa),(it,Dt)=>{const Lt=it.find(Dt);return Lt?Lt.size-1:-1}),Sr=(0,Kn.P1)((0,Kn.P1)((0,Kn.P1)(kt,Xn),(0,Kn.zB)({name:ss,serviceName:Vs})),({name:it,serviceName:Dt})=>`${Dt}: ${it}`),Wr=(0,Kn.P1)(({spans:it})=>it,(0,Kn.P1)(({trace:it})=>it,Xt),({collapsed:it})=>it,(it,Dt,Lt)=>{const Gt=Lt.reduce((Zt,cn)=>(Dt.find(cn).walk(hn=>hn!==cn&&Zt.add(hn)),Zt),new Set);return Gt.size>0?it.filter(Zt=>!Gt.has(Oa(Zt))):it}),ms=4,Mr=3,ir=(0,Kn.P1)(({trace:it})=>it,({interval:it=ms})=>it,({width:it=Mr})=>it,(it,Dt,Lt)=>[...Array(Dt+1).keys()].map(Gt=>({timestamp:An(it)+Wn(it)*(Gt/Dt),width:Lt})));function tn(it){const Dt=new Map,Lt=it.reduce((Zt,cn)=>(Zt.some(hn=>hn.key===cn.key&&hn.value===cn.value)?Dt.set(`${cn.key}:${cn.value}`,`Duplicate tag "${cn.key}:${cn.value}"`):Zt.push(cn),Zt),[]),Gt=Array.from(Dt.values());return{tags:Lt,warnings:Gt}}function pr(it,Dt){const Lt=it?.slice()??[],Gt=(Dt||[]).map(Zt=>Zt.toLowerCase());return Lt.sort((Zt,cn)=>{const hn=Zt.key.toLowerCase(),Tn=cn.key.toLowerCase();for(let fn=0;fn<Gt.length;fn++){const Rt=Gt[fn];if(hn.startsWith(Rt)&&!Tn.startsWith(Rt))return-1;if(!hn.startsWith(Rt)&&Tn.startsWith(Rt))return 1}return hn>Tn?1:hn<Tn?-1:0}),Lt}function $r(it){if(!it?.traceID)return null;const Dt=it.traceID.toLowerCase();let Lt=0,Gt=Number.MAX_SAFE_INTEGER;const Zt=new Map,cn=new Map;it.spans=it.spans.filter(Ca=>Boolean(Ca.startTime)),it.processes=Object.entries(it.processes).reduce((Ca,[wa,rs])=>(Ca[wa]={...rs,tags:pr(rs.tags)},Ca),{});const hn=it.spans.length;for(let Ca=0;Ca<hn;Ca++){const wa=it.spans[Ca],{startTime:rs,duration:Fa,processID:zs}=wa;let _a=wa.spanID;rs<Gt&&(Gt=rs),rs+Fa>Lt&&(Lt=rs+Fa);const Bt=Zt.get(_a);Bt!=null?(console.warn(`Dupe spanID, ${Bt+1} x ${_a}`,wa,cn.get(_a)),(0,O.isEqual)(wa,cn.get(_a))&&console.warn("	 two spans with same ID have `isEqual(...) === true`"),Zt.set(_a,Bt+1),_a=`${_a}_${Bt}`,wa.spanID=_a):Zt.set(_a,1),wa.process=it.processes[zs],cn.set(_a,wa)}const Tn=Xt(it),fn=[],Rt={};Tn.walk((Ca,wa,rs=0)=>{if(Ca==="__root__"||typeof Ca!="string")return;const Fa=cn.get(Ca);if(!Fa)return;const{serviceName:zs}=Fa.process;Rt[zs]=(Rt[zs]||0)+1,Fa.relativeStartTime=Fa.startTime-Gt,Fa.depth=rs-1,Fa.hasChildren=wa.children.length>0,Fa.childSpanCount=wa.children.length,Fa.warnings=Fa.warnings||[],Fa.tags=Fa.tags||[],Fa.references=Fa.references||[];const _a=tn(Fa.tags);Fa.tags=pr(_a.tags,Fe("topTagPrefixes")),Fa.warnings=Fa.warnings.concat(_a.warnings),Fa.references.forEach((Bt,Ge)=>{const We=cn.get(Bt.spanID);We&&(Bt.span=We,Ge>0&&(We.subsidiarilyReferencedBy=We.subsidiarilyReferencedBy||[],We.subsidiarilyReferencedBy.push({spanID:Ca,traceID:Dt,span:Fa,refType:Bt.refType})))}),fn.push(Fa)});const ya=ge(fn);return{services:Object.keys(Rt).map(Ca=>({name:Ca,numberOfSpans:Rt[Ca]})),spans:fn,traceID:Dt,traceName:ya,processes:it.processes,duration:Lt-Gt,startTime:Gt,endTime:Lt}}function Br(it,Dt){if(!Dt)return;const Lt=[],Gt=[];it.split(/\s+/).filter(Boolean).forEach(fn=>{fn[0]==="-"?Gt.push(fn.slice(1).toLowerCase()):Lt.push(fn.toLowerCase())});const Zt=(fn,Rt)=>fn.some(ya=>Rt.toLowerCase().includes(ya)),cn=fn=>fn?fn.some(Rt=>Zt(Gt,Rt.key)?!1:Zt(Lt,Rt.key)||Zt(Lt,Rt.value.toString())):!1,hn=fn=>Zt(Lt,fn.operationName)||Zt(Lt,fn.process.serviceName)||cn(fn.tags)||fn.logs!==null&&fn.logs.some(Rt=>cn(Rt.fields))||cn(fn.process.tags)||Lt.some(Rt=>Rt===fn.spanID);return new Set(Dt.filter(hn).map(fn=>fn.spanID))}},52541:(H,T,e)=>{"use strict";e.d(T,{Hn:()=>a,Kg:()=>d,ZP:()=>p,th:()=>m});var t=e(52423),n=e(68404),c=e(63134),s=e(5916),r=e(72648),g=e(11543),f=e(81764),o=e(53217),l=e(46967);const a="None",m="Duration",d="Tag";function p({options:y,onOptionsChange:v}){const i=(0,r.wW)(h),u=[a,m,d].map(c.E);return n.createElement("div",{className:(0,t.css)({width:"100%"})},n.createElement("h3",{className:"page-heading"},"Span bar label"),n.createElement("div",{className:i.infoText},"Span bar label lets you add additional info to the span bar row."),n.createElement(g.Z,{className:i.row},n.createElement(f._,{label:"Label",labelWidth:26,grow:!0},n.createElement(o.Ph,{inputId:"label",options:u,value:y.jsonData.spanBar?.type||"",onChange:P=>{(0,s.tp)({onOptionsChange:v,options:y},"spanBar",{...y.jsonData.spanBar,type:P?.value??""})},placeholder:"Duration",isClearable:!0,"aria-label":"select-label-name",width:25}))),y.jsonData.spanBar?.type===d&&n.createElement(g.Z,{className:i.row},n.createElement(f._,{label:"Tag key",labelWidth:26,tooltip:"Tag key which will be used to get the tag value"},n.createElement(l.I,{type:"text",placeholder:"Enter tag key",onChange:P=>(0,s.tp)({onOptionsChange:v,options:y},"spanBar",{...y.jsonData.spanBar,tag:P.currentTarget.value}),value:y.jsonData.spanBar?.tag||"",width:25}))))}const h=y=>({infoText:t.css`
    label: infoText;
    padding-bottom: ${y.spacing(2)};
    color: ${y.colors.text.secondary};
  `,row:t.css`
    label: row;
    align-items: baseline;
  `})},42413:(H,T,e)=>{"use strict";e.d(T,{A4:()=>m,GL:()=>f,H3:()=>g,Im:()=>h,K9:()=>v,NY:()=>u,WW:()=>n,b$:()=>p,bi:()=>c,h2:()=>r,im:()=>s,oD:()=>o,pQ:()=>i,ty:()=>y,xb:()=>d});var t=e(52423);const n=t.css`
  position: relative;
`,c=t.css`
  margin-bottom: 0.25rem;
`,s=t.css`
  margin-top: 0.25rem;
  margin-bottom: 0.25rem;
`,r=t.css`
  margin: 0;
`,g=t.css`
  padding-left: 0.5rem;
  padding-right: 0.5rem;
`,f=t.css`
  padding-bottom: 0.5rem;
`,o=t.css`
  display: flex;
`,l=t.css`
  align-items: center;
`,a=t.css`
  align-items: start;
`,m=t.css`
  flex: 1 1 auto;
  min-width: 0; /* 1 */
  min-height: 0; /* 1 */
`,d=t.css`
  text-align: right;
`,p=t.css`
  display: inline-block;
`,h=t.css`
  margin: -0.2rem 0.25rem 0 0;
`,y=t.css`
  text-overflow: ellipsis;
`,v=t.css`
  width: 100%;
`,i=t.css`
  color: #aaa;
`,u=t.css`
  justify-content: flex-end;
`},9096:(H,T,e)=>{"use strict";e.d(T,{_K:()=>l,e6:()=>a});var t=e(58635),n=e(35008),c=e.n(n),s=e(16514);function r(d){if(d.length!==7)return[0,0,0];const p=d.slice(1,3),h=d.slice(3,5),y=d.slice(5);return[parseInt(p,16),parseInt(h,16),parseInt(y,16)]}class g{constructor(p,h){const y=m(p,h);this.colorsHex=y,this.colorsRgb=y.map(r),this.cache=new Map}_getColorIndex(p){let h=this.cache.get(p);if(h==null){const y=this.hashCode(p.toLowerCase());h=Math.abs(y%this.colorsHex.length);const v=Array.from(this.cache).pop();if(v&&v[1]){v[1]===h&&(h=this.getNextIndex(h));const i=this.colorsHex[v[1]];if(c().readability(i,this.colorsHex[h])<1.5){let u=h;for(let P=0;P<this.colorsHex.length;P++)if(u=this.getNextIndex(u),c().readability(i,this.colorsHex[u])>1.5){h=u;break}}}this.cache.set(p,h)}return h}getNextIndex(p){return p+1<this.colorsHex.length?p+1:0}hashCode(p){let h=0,y,v;for(y=0;y<p.length;y++)v=p.charCodeAt(y),h=(h<<5)-h+v;return h}getColorByKey(p){const h=this._getColorIndex(p);return this.colorsHex[h]}getRgbColorByKey(p){const h=this._getColorIndex(p);return this.colorsRgb[h]}clear(){this.cache.clear()}}const f=(0,t.Z)((d,p)=>new g(d,p));function o(d){f([],d)}function l(d,p){return f(s.O9,p).getColorByKey(d)}function a(d,p){return f(s.O9,p).getRgbColorByKey(d)}function m(d,p){const h=d.indexOf("#E24D42");h>-1&&d.splice(h,1);const y=d.indexOf("#BF1B00");y>-1&&d.splice(y,1);let v=[];for(const i of d)c().readability(p.colors.background.primary,i)>=3&&v.push(i);return v}},320:(H,T,e)=>{"use strict";e.d(T,{WT:()=>o,LU:()=>P,Cz:()=>i,Gk:()=>u});var t=e(82897),n=e(92467),c=e.n(n);function s(E,C){const b=Math.floor(Math.log10(Math.abs(E)))+1,S=C+b;return S<=0?Math.trunc(E):Number(E.toPrecision(S))}const r="YYYY-MM-DD",g="HH:mm",f=1e3,o=1e3*f,l=60*o,a=60*l,m=24*a,d=Math.log10(f),p=[{unit:"d",microseconds:m,ofPrevious:24},{unit:"h",microseconds:a,ofPrevious:60},{unit:"m",microseconds:l,ofPrevious:60},{unit:"s",microseconds:o,ofPrevious:1e3},{unit:"ms",microseconds:f,ofPrevious:1e3},{unit:"\u03BCs",microseconds:1,ofPrevious:1e3}],h=(E,C,b)=>s(E/b,C)*b;function y(E){return moment(E/f).format(r)}function v(E){return moment(E/f).format(g)}function i(E){const C=h(E,d,f);return`${c().duration(C/f).asMilliseconds()}ms`}function u(E){const C=h(E,d,o);return`${c().duration(C/f).asSeconds()}s`}function P(E){const[C,b]=(0,t.dropWhile)(p,({microseconds:L},B)=>B<p.length-1&&L>E);if(C.ofPrevious===1e3)return`${(0,t.round)(E/C.microseconds,2)}${C.unit}`;const M=`${Math.floor(E/C.microseconds)}${C.unit}`,x=Math.round(E/b.microseconds%C.ofPrevious),O=`${x}${b.unit}`;return x===0?M:`${M} ${O}`}},75151:(H,T,e)=>{"use strict";e.d(T,{R:()=>c});var t=e(68404),n=e(67089);function c(s){const[r,g]=(0,t.useState)(""),f=(0,t.useMemo)(()=>r&&s?(0,n.filterSpans)(r,s):void 0,[r,s]);return{search:r,setSearch:g,spanFindMatches:f}}},335:(H,T,e)=>{"use strict";e.d(T,{N:()=>c});var t=e(50235),n=e(67089);function c(r){if(!r)return null;let g=r.fields.length===1?r.fields[0].values.get(0):s(r);return(0,n.transformTraceData)(g)}function s(r){const g=new t.U(r),f={};for(let o=0;o<g.length;o++){const l=g.get(o);f[l.spanID]||(f[l.spanID]={serviceName:l.serviceName,tags:l.serviceTags})}return{traceID:g.get(0).traceID,processes:f,spans:g.toArray().map((o,l)=>{const a=[];return o.parentSpanID&&a.push({refType:"CHILD_OF",spanID:o.parentSpanID,traceID:o.traceID}),o.references&&a.push(...o.references.map(m=>({refType:"FOLLOWS_FROM",...m}))),{...o,duration:o.duration*1e3,startTime:o.startTime*1e3,processID:o.spanID,flags:0,references:a,logs:o.logs?.map(m=>({...m,timestamp:m.timestamp*1e3}))||[],dataFrameRowIndex:l}})}}},46526:(H,T,e)=>{"use strict";e.d(T,{eX:()=>m,zU:()=>a});var t=e(32557),n=e(41818),c=e(5562),s=e(55935),r=e(98589),g=e(73257),f=e(86297),o=e(16983);const l=(0,t.PH)("explore/updateDatasourceInstance");function a(d,p,h){return async(y,v)=>{const i=v().user.orgId,{history:u,instance:P}=await(0,o.r_)(i,{uid:p}),E=v().explore[d].datasourceInstance;if((0,n.ff)("explore_change_ds",{from:(E?.meta?.mixed?"mixed":E?.type)||"unknown",to:P.meta.mixed?"mixed":P.type,exploreId:d}),y(l({exploreId:d,datasourceInstance:P,history:u})),h?.importQueries){const C=v().explore[d].queries;await y((0,g.GJ)(d,C,E,P))}v().explore[d].isLive&&y((0,f.oz)(d,c.dP.offOption.value)),h?.importQueries&&y((0,g.aA)(d))}}const m=(d,p)=>{if(l.match(p)){const{datasourceInstance:h,history:y}=p.payload;return(0,s.RZ)(d.querySubscription),{...d,datasourceInstance:h,graphResult:null,tableResult:null,logsResult:null,supplementaryQueries:(0,r.DK)(),queryResponse:(0,o.lp)(),loading:!1,queryKeys:[],history:y,datasourceMissing:!1}}return d}},93713:(H,T,e)=>{"use strict";e.d(T,{CK:()=>P,Om:()=>E,iz:()=>C,km:()=>y,qN:()=>u});var t=e(32557),n=e(82897),c=e.n(n),s=e(86647),r=e(55935),g=e(25405),f=e(46526),o=e(13582),l=e(48197),a=e(73257),m=e(86297),d=e(16983);const p=(0,t.PH)("explore/changeSize"),h=(0,t.PH)("explore/changePanels");function y(S,M,x){return async(O,L)=>{const B=L().explore[S];if(B===void 0)return;const{panelsState:w}=B;O(h({exploreId:S,panelsState:{...w,[M]:x}})),O((0,l.og)())}}const v=(0,t.PH)("explore/initializeExplore"),i=(0,t.PH)("explore/setUrlReplaced");function u(S,{height:M,width:x}){return p({exploreId:S,height:M,width:x})}function P(S,M,x,O,L,B,w,R){return async(A,U)=>{const I=(0,s.F)().getList();let N,F=[];if(I.length>=1){const D=U().user.orgId,Y=await(0,d.r_)(D,M);N=Y.instance,F=Y.history}A(v({exploreId:S,containerWidth:L,eventBridge:B,queries:x,range:O,datasourceInstance:N,history:F,isFromCompactUrl:R})),w!==void 0&&A(h({exploreId:S,panelsState:w})),A((0,m.b3)({exploreId:S})),N&&A((0,a.aA)(S,{replaceUrl:!0}))}}function E(S,M){return async(x,O)=>{const L=O().explore[S];if(!L?.initialized)return;const B=(0,r.J5)(M),w=b(B,(0,d.D)(L)),{containerWidth:R,eventBridge:A}=L,{datasource:U,queries:I,range:N,panelsState:F}=B,D=[];for(let z=0;z<I.length;z++){const Z=I[z];D.push((0,r.fR)(Z,D,z))}const Y=(0,g.Z)(O().user),j=(0,g.i)(O().user),K=(0,r.vP)(N,Y,j);if(w.datasource){const z=await(0,r.Z8)(I);await x(P(S,U,z,K,R,A,F));return}w.range&&x((0,m.b3)({exploreId:S,rawRange:K.raw})),w.queries&&x((0,a.SE)({exploreId:S,queries:D})),w.panelsState&&F!==void 0&&x(h({exploreId:S,panelsState:F})),(w.queries||w.range)&&x((0,a.aA)(S))}}const C=(S=(0,d.t5)(),M)=>{if(S=(0,a.Y)(S,M),S=(0,f.eX)(S,M),S=(0,m.ok)(S,M),S=(0,o.Oo)(S,M),l.ZU.match(M)){const{richHistory:x,total:O}=M.payload.richHistoryResults;return{...S,richHistory:x,richHistoryTotal:O}}if(l.Zy.match(M)){const x=M.payload.filters;return{...S,richHistorySearchFilters:x}}if(p.match(M)){const x=M.payload.width;return{...S,containerWidth:x}}if(h.match(M)){const{panelsState:x}=M.payload;return{...S,panelsState:x}}if(v.match(M)){const{containerWidth:x,eventBridge:O,queries:L,range:B,datasourceInstance:w,history:R,isFromCompactUrl:A}=M.payload;return{...S,containerWidth:x,eventBridge:O,range:B,queries:L,initialized:!0,queryKeys:(0,r.$$)(L),datasourceInstance:w,history:R,datasourceMissing:!w,queryResponse:(0,d.lp)(),cache:[],isFromCompactUrl:A||!1}}return S},b=(S,M)=>{const x=!(0,n.isEqual)(M?.datasource,S?.datasource),O=!(0,n.isEqual)(M?.queries,S?.queries),L=!(0,n.isEqual)(M?.range||r.UI,S?.range||r.UI),B=!(0,n.isEqual)(M?.panelsState,S?.panelsState);return{datasource:x,queries:O,range:L,panelsState:B}}},13582:(H,T,e)=>{"use strict";e.d(T,{Cs:()=>E,Ff:()=>y,KZ:()=>S,NV:()=>v,Oo:()=>M,TV:()=>u,WY:()=>p,ch:()=>b,ev:()=>h,fM:()=>a,ik:()=>i,io:()=>P,sO:()=>C});var t=e(32557),n=e(35645),c=e(54408),s=e(69597),r=e(58379),g=e(51424),f=e(81168),o=e(40967),l=e(48197);const a=(0,t.PH)("explore/historyUpdated"),m=({updatedQuery:x,deletedId:O})=>async(L,B)=>{d(B().explore,(w,R)=>{const A=w.richHistory.map(I=>I.id===x?.id?x:I).filter(I=>I.id!==O),U=w.richHistory.length-A.length;L((0,l.ZU)({richHistoryResults:{richHistory:A,total:w.richHistoryTotal-U},exploreId:R}))})},d=(x,O)=>{O(x.left,f.ExploreId.left),x.right&&O(x.right,f.ExploreId.right)},p=(x,O,L)=>async(B,w)=>{const{richHistoryStorageFull:R,limitExceeded:A}=await(0,g.au)(x,O,L,!1,"",!w().explore.richHistoryStorageFull,!w().explore.richHistoryLimitExceededWarningShown);R&&B((0,l.fm)()),A&&B((0,l.QN)())},h=(x,O)=>async(L,B)=>{const w=await(0,g.VI)(x,O);L(m({updatedQuery:w}))},y=(x,O)=>async L=>{const B=await(0,g.gt)(x,O);L(m({updatedQuery:B}))},v=x=>async O=>{const L=await(0,g.y9)(x);O(m({deletedId:L}))},i=()=>async x=>{await(0,g.HK)(),x((0,l.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:f.ExploreId.left})),x((0,l.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:f.ExploreId.right}))},u=x=>async(O,L)=>{const B=L().explore[x]?.richHistorySearchFilters;if(B){const w=await(0,g.ub)(B);O((0,l.ZU)({richHistoryResults:w,exploreId:x}))}},P=x=>async(O,L)=>{const B=L().explore[x]?.richHistorySearchFilters,w=L().explore[x]?.richHistory;if(B&&w){const R={...B,page:(B?.page||1)+1},A=await(0,g.ub)(R),U=[...w,...A.richHistory];O((0,l.Zy)({filters:R,exploreId:x})),O((0,l.ZU)({richHistoryResults:{richHistory:U,total:A.total},exploreId:x}))}},E=x=>async O=>{O((0,l.Zy)({filters:void 0,exploreId:x})),O((0,l.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:x}))},C=()=>async(x,O)=>{const L=r.Z.getBool(s.hO.migrated,!1),B=O().explore.richHistoryMigrationFailed;if(n.v.queryHistoryEnabled&&!L&&!B){const R=await(0,g.rq)();R.status===g.rv.Failed?(x((0,l.CR)()),(0,c.H)(R.error,{explore:{event:"QueryHistoryMigrationFailed"}})):r.Z.set(s.hO.migrated,!0)}let w=O().explore.richHistorySettings;w||(w=await(0,g.di)(),x((0,l.e8)(w)))},b=x=>async O=>{O((0,l.e8)(x)),await(0,g.kg)(x)},S=(x,O)=>async(L,B)=>{await L((0,l.Zy)({exploreId:x,filters:{...O}}));const w=B().explore.richHistorySettings;(0,o.X)().lastUsedDataSourcesAvailable&&await L(b({...w,lastUsedDatasourceFilters:O.datasourceFilters}))},M=(x,O)=>a.match(O)?{...x,history:O.payload.history}:x},48197:(H,T,e)=>{"use strict";e.d(T,{AP:()=>u,CL:()=>y,CR:()=>d,IS:()=>b,QN:()=>m,Sx:()=>v,WK:()=>P,YV:()=>M,ZP:()=>w,ZU:()=>l,Zy:()=>h,bW:()=>S,e8:()=>p,fm:()=>a,m$:()=>x,nL:()=>i,og:()=>C,tl:()=>o});var t=e(32557),n=e(27677),c=e(37932),s=e(55935),r=e(3032),g=e(93713),f=e(16983);const o=(0,t.PH)("explore/syncTimes"),l=(0,t.PH)("explore/richHistoryUpdated"),a=(0,t.PH)("explore/richHistoryStorageFullAction"),m=(0,t.PH)("explore/richHistoryLimitExceededAction"),d=(0,t.PH)("explore/richHistoryMigrationFailedAction"),p=(0,t.PH)("explore/richHistorySettingsUpdated"),h=(0,t.PH)("explore/richHistorySearchFiltersUpdatedAction"),y=(0,t.PH)("explore/saveCorrelationsAction"),v=(0,t.PH)("explore/splitSizeUpdateAction"),i=(0,t.PH)("explore/maximizePaneAction"),u=(0,t.PH)("explore/evenPaneResizeAction"),P=(0,t.PH)("explore/resetExplore"),E=(0,t.PH)("explore/splitClose"),C=R=>(A,U)=>{const{left:I,right:N}=U().explore,D={orgId:U().user.orgId.toString()};D.left=(0,n.S)((0,f.D)(I)),N?D.right=(0,n.S)((0,f.D)(N)):D.right=null,b.right=D.right,b.left=D.left,c.E1.partial({...D},R?.replace)},b={},S=R=>async(A,U)=>{const I=U().explore[r.Kd.left];let F=(0,f.D)(I);R&&(F={datasource:R.datasourceUid,queries:[R.query],range:R.range||I.range,panelsState:R.panelsState});const D=(0,n.S)(F);c.E1.partial({right:D},!0)};function M(R){return(A,U)=>{A(E({itemId:R})),A(C())}}const x=(R,A)=>async U=>{const{getDataSourceSrv:I,getTimeSrv:N,getExploreUrl:F,openInNewWindow:D}=A,Y=I(),j=await F({panel:R,datasourceSrv:Y,timeSrv:N()});if(D&&j){D(j);return}c.E1.push(j)},O=(0,f.t5)(),L={syncedTimes:!1,left:O,right:void 0,correlations:void 0,richHistoryStorageFull:!1,richHistoryLimitExceededWarningShown:!1,richHistoryMigrationFailed:!1,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0},w={explore:(R=L,A)=>{if(E.match(A)){const{itemId:U}=A.payload,I={left:U===r.Kd.left?R.right:R.left,right:void 0};return{...R,...I,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0,syncedTimes:!1}}if(v.match(A)){const{largerExploreId:U}=A.payload;return{...R,largerExploreId:U,maxedExploreId:void 0,evenSplitPanes:U===void 0}}if(i.match(A)){const{exploreId:U}=A.payload;return{...R,largerExploreId:U,maxedExploreId:U,evenSplitPanes:!1}}if(u.match(A))return{...R,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0};if(y.match(A))return{...R,correlations:A.payload};if(o.match(A))return{...R,syncedTimes:A.payload.syncedTimes};if(a.match(A))return{...R,richHistoryStorageFull:!0};if(m.match(A))return{...R,richHistoryLimitExceededWarningShown:!0};if(d.match(A))return{...R,richHistoryMigrationFailed:!0};if(P.match(A)){const U=R[r.Kd.left],I=R[r.Kd.right];return(0,s.RZ)(U.querySubscription),I&&(0,s.RZ)(I.querySubscription),{...L,left:{...O,queries:R.left.queries}}}if(p.match(A)){const U=A.payload;return{...R,richHistorySettings:U}}if(A.payload){const{exploreId:U}=A.payload;if(U!==void 0){const I=R[U];return{...R,[U]:(0,g.iz)(I,A)}}}return R}}},73257:(H,T,e)=>{"use strict";e.d(T,{CS:()=>at,K8:()=>ye,ci:()=>Xe,qV:()=>Ye,LK:()=>fe,GJ:()=>mt,W1:()=>he,sK:()=>ce,Y:()=>Ae,aA:()=>Te,EA:()=>Me,P4:()=>qe,sQ:()=>_e,KO:()=>ge,SE:()=>we,z0:()=>De});var t=e(32557),n=e(10322),c=e.n(n),s=e(82897),r=e(86680),g=e(53786),f=e(89973),o=e(46060),l=e(98356),a=e(95027),m=e(49922),d=e(62163),p=e(90595),h=e(16642),y=e(7238),v=e(25318),i=e(16911),u=e(35645),P=e(86647),E=e(41818),C=e(55935),b=e(5242),S=e(25405),M=e(63496),x=e(3153),O=e(81168),L=e(3032),B=e(659),w=e(60499),R=e(75434),A=e(2101),U=e(74940),I=e(36512),N=e(14582),F=e(37959);const D=(Se,Ue,Qe)=>(Se.forEach(pt=>{const bt=pt.refId;if(!bt)return;const yt=Qe[bt],Mt=Ue.filter(At=>At.source.uid===yt);Y(pt,Mt)}),Se),Y=(Se,Ue)=>{Se.fields.forEach(Qe=>{Ue.map(pt=>{pt.config?.field===Qe.name&&(Qe.config.links=Qe.config.links||[],Qe.config.links.push({internal:{query:pt.config?.target,datasourceUid:pt.target.uid,datasourceName:pt.target.name},url:"",title:pt.label||pt.target.name}))})})};var j=e(81042);const K=Se=>{const Ue=[],Qe=[],pt=[],bt=[],yt=[],Mt=[],At=[];for(const Pt of Se.series)switch(Pt.meta?.preferredVisualisationType){case"logs":bt.push(Pt);break;case"graph":Ue.push(Pt);break;case"trace":yt.push(Pt);break;case"table":Qe.push(Pt);break;case"rawPrometheus":pt.push(Pt);break;case"nodeGraph":Mt.push(Pt);break;case"flamegraph":u.v.featureToggles.flameGraph?At.push(Pt):Qe.push(Pt);break;default:me(Pt)&&Ue.push(Pt),Qe.push(Pt)}return{...Se,graphFrames:Ue,tableFrames:Qe,logsFrames:bt,traceFrames:yt,nodeGraphFrames:Mt,flameGraphFrames:At,rawPrometheusFrames:pt,graphResult:null,tableResult:null,logsResult:null,rawPrometheusResult:null}},z=({queries:Se,correlations:Ue})=>Qe=>{if(Se?.length&&Ue?.length){const pt=(0,s.mapValues)((0,s.groupBy)(Se,"refId"),"0.datasource.uid");D(Qe.series,Ue,pt)}return Qe},Z=Se=>Se.graphFrames.length?{...Se,graphResult:Se.graphFrames}:{...Se,graphResult:null},ae=Se=>{if(Se.tableFrames.length===0)return(0,g.of)({...Se,tableResult:null});Se.tableFrames.sort((bt,yt)=>{const Mt=bt.refId,At=yt.refId;return Mt>At?1:Mt<At?-1:0});const Ue=Se.tableFrames.every(bt=>me(bt)),Qe={interpolate:bt=>bt};return(Ue?(0,g.of)(Se.tableFrames).pipe(U.Y.joinByFieldTransformer.operator({},Qe)):(0,g.of)(Se.tableFrames).pipe(U.Y.mergeTransformer.operator({},Qe))).pipe((0,A.U)(bt=>{for(const yt of bt)for(const Mt of yt.fields)Mt.display=Mt.display??(0,I.U)({field:Mt,theme:u.v.theme2,timeZone:Se.request?.timezone??"browser"});return{...Se,tableResult:bt}}))},J=Se=>{const Ue=Se.rawPrometheusFrames;if(!Ue||Ue.length===0)return(0,g.of)({...Se,tableResult:null});Ue.sort((yt,Mt)=>{const At=yt.refId,Pt=Mt.refId;return At>Pt?1:At<Pt?-1:0});const Qe=Ue.every(yt=>me(yt)),pt={interpolate:yt=>yt};return(Qe?(0,g.of)(Ue).pipe(U.Y.joinByFieldTransformer.operator({},pt)):(0,g.of)(Ue).pipe(U.Y.mergeTransformer.operator({},pt))).pipe((0,A.U)(yt=>{const Mt=yt[0];for(const At of Mt.fields)At.display=At.display??(0,I.U)({field:At,theme:u.v.theme2,timeZone:Se.request?.timezone??"browser"});return{...Se,rawPrometheusResult:Mt}}))},oe=(Se={})=>Ue=>{if(Ue.logsFrames.length===0)return{...Ue,logsResult:null};const Qe=Ue.request?.intervalMs,pt=(0,F.aB)(Ue.logsFrames,Qe,Se.absoluteRange,Se.queries),bt=(0,C.Oy)(Se.refreshInterval),yt=(0,j.j0)(pt,bt),Mt=yt.rows,At=Se.fullRangeLogsVolumeAvailable?void 0:yt.series,Pt={...yt,rows:Mt,series:At};return{...Ue,logsResult:Pt}};function Ee(Se,Ue,Qe,pt,bt,yt,Mt){return(0,g.of)(Se).pipe((0,A.U)(At=>(0,R.zR)(At,Ue)),(0,A.U)(z({queries:bt,correlations:yt})),(0,A.U)(K),(0,A.U)(Z),(0,A.U)(Z),(0,A.U)(oe({absoluteRange:Qe,refreshInterval:pt,queries:bt,fullRangeLogsVolumeAvailable:Mt})),(0,l.z)(J),(0,l.z)(ae))}function me(Se){const Ue=(0,s.groupBy)(Se.fields,Qe=>Qe.type);return Boolean(Object.keys(Ue).length===2&&Ue[N.fS.time]?.length===1&&Ue[N.fS.number])}var re=e(98589),le=e(13582),pe=e(48197),ee=e(86297),se=e(16983);const Q=(0,t.PH)("explore/addQueryRow"),G=(0,t.PH)("explore/changeQueries"),q=(0,t.PH)("explore/cancelQueries"),X=(0,t.PH)("explore/queriesImported"),de=(0,t.PH)("explore/queryStoreSubscription"),Be=(0,t.PH)("explore/setSupplementaryQueryEnabledAction"),ke=(0,t.PH)("explore/storeSupplementaryQueryDataProviderAction"),He=(0,t.PH)("explore/cleanSupplementaryQueryDataProviderAction"),ue=(0,t.PH)("explore/cleanSupplementaryQueryAction"),Oe=(0,t.PH)("explore/storeSupplementaryQueryDataSubscriptionAction"),Fe=(0,t.PH)("explore/updateSupplementaryQueryDataAction"),Ie=(0,t.PH)("explore/queryStreamUpdated"),we=(0,t.PH)("explore/setQueries"),Re=(0,t.PH)("changeLoadingState"),_e=(0,t.PH)("explore/setPausedState"),et=(0,t.PH)("explore/scanStart"),qe=(0,t.PH)("explore/scanStop"),Je=(0,t.PH)("explore/addResultsToCache"),lt=(0,t.PH)("explore/clearCache");function at(Se,Ue){return async(Qe,pt)=>{const bt=pt().explore[Se].queries;let yt;if(bt.length===0){const At=pt().explore[Se].datasourceInstance;(!u.v.featureToggles.exploreMixedDatasource||!At?.meta.mixed)&&(yt=At)}const Mt=await(0,C.Xk)(bt,Ue,yt?.getRef());Qe(Q({exploreId:Se,index:Ue,query:Mt}))}}function Xe(Se){return(Ue,Qe)=>{Ue(qe({exploreId:Se})),Ue(q({exploreId:Se}));const pt=Qe().explore[Se].supplementaryQueries;for(const bt of re.SY)Ue(He({exploreId:Se,type:bt})),pt[bt]?.data?.state!==m.Gu.Done&&Ue(ue({exploreId:Se,type:bt}));Ue((0,pe.og)())}}const gt=(Se,Ue)=>{const Qe=Se.getRef();return Ue.map(pt=>({...pt,datasource:Qe}))},ot=async(Se,Ue,Qe)=>{let pt=[];if(Ue.meta?.id===Se.meta?.id)pt=Qe;else if((0,d.p)(Ue)&&(0,d.CZ)(Se)){const bt=await Ue.exportToAbstractQueries(Qe);pt=await Se.importFromAbstractQueries(bt)}else Se.importQueries&&(pt=await Se.importQueries(Qe,Ue));return gt(Se,pt)},Ye=(0,O.createAsyncThunk)("explore/changeQueries",async({queries:Se,exploreId:Ue},{getState:Qe,dispatch:pt})=>{let bt=!1;const yt=Qe().explore[Ue].queries;for(const Mt of Se)for(const At of yt)if(Mt.refId===At.refId&&Mt.datasource?.type!==At.datasource?.type){const Pt=await(0,P.F)().get(At.datasource),rn=await(0,P.F)().get({uid:Mt.datasource?.uid});await pt(mt(Ue,yt,Pt,rn,Mt.refId)),bt=!0}bt||pt(G({queries:Se,exploreId:Ue})),Se.length<Se.length&&pt(Te(Ue))}),mt=(Se,Ue,Qe,pt,bt)=>async yt=>{if(!Qe){yt(X({exploreId:Se,queries:Ue}));return}let Mt=Ue;if(pt.uid===M.D)Mt=Ue.map(Pt=>({...Pt,datasource:Qe.getRef()}));else if(Qe.uid===M.D){const Pt=(0,s.groupBy)(Ue,Fn=>Fn.datasource?.uid),rn=await Promise.all(Object.keys(Pt).map(async Fn=>{const kn=await(0,P.F)().get({uid:Fn});return await ot(pt,kn,Pt[Fn])}));Mt=(0,s.flatten)(rn.filter(Fn=>Fn.length>0))}else{let Pt=Ue;if(bt!==void 0){const rn=Ue.find(Fn=>Fn.refId===bt);rn&&(Pt=[rn])}Mt=await ot(pt,Qe,Pt)}let At=await(0,C.Z8)(Mt,pt.getRef());if(bt!==void 0){Mt.length===0&&(Mt=[await(0,C.Xk)([],void 0,pt.getRef())]);const Pt=Ue.findIndex(Fn=>Fn.refId===bt),rn={...At[0],refId:Ue[Pt].refId};At=[...Ue],At[Pt]=rn}yt(X({exploreId:Se,queries:At}))};function ce(Se,Ue,Qe){return async(pt,bt)=>{const yt=bt().explore[Se],{queries:Mt}=yt,Pt=(await Promise.all(Mt.map(rn=>Qe({...rn},Ue)))).map((rn,Fn)=>(0,C.fR)(rn,Mt,Fn));pt(we({exploreId:Se,queries:Pt})),Ue.preventSubmit||pt(Te(Se))}}async function be(Se,Ue,Qe,pt,bt,yt){const Mt=pt.meta.id,At=(0,C._Q)(Qe,Mt,bt);Se((0,le.fM)({exploreId:yt,history:At})),Se((0,le.WY)(pt.uid,pt.name,bt)),await Se((0,le.TV)(L.Kd.left)),await Se((0,le.TV)(L.Kd.right))}const Te=(Se,Ue)=>(Qe,pt)=>{Qe((0,ee.b3)({exploreId:Se}));const bt=Ne();Ue?.preserveCache===!0||Qe(fe(Se));const Mt=pt().explore[Se],{datasourceInstance:At,containerWidth:Pt,isLive:rn,range:Fn,scanning:kn,queryResponse:Jn,querySubscription:qn,refreshInterval:Ut,absoluteRange:ut,cache:nt,supplementaryQueries:vt}=Mt;let ht;const It=Mt.queries.map(en=>({...en,datasource:en.datasource||At?.getRef()}));At!=null&&be(Qe,pt().explore,Mt.history,At,It,Se),Qe((0,pe.og)({replace:Ue?.replaceUrl}));const Ft=(0,se.M0)(nt,ut);if(Ft)ht=(0,r.a)([(0,g.of)(Ft),bt]).pipe((0,l.z)(([en,sn])=>Ee(en,Jn,ut,Ut,It,sn,At!=null&&((0,p.mN)(At,p.v8.LogsVolume)||(0,h.O)(At))))).subscribe(en=>{en.error||Qe((0,pe.og)()),Qe(Ie({exploreId:Se,response:en}))});else{if(!(0,C.z_)(It)){Qe((0,pe.og)({replace:Ue?.replaceUrl}));return}if(!At)return;const en=At?.interval;(0,C.RZ)(qn);const sn={minInterval:en,maxDataPoints:Pt,liveStreaming:rn},Mn=(0,S.Z)(pt().user),En=(0,C.Zf)(Se,It,sn,Fn,kn,Mn);if(Qe(Re({exploreId:Se,loadingState:m.Gu.Loading})),ht=(0,r.a)([(0,R.v7)(At,En.request).pipe(rn?(0,a.p)(500):f.y),bt]).pipe((0,l.z)(([yn,Bn])=>Ee(yn,Jn,ut,Ut,It,Bn,At!=null&&((0,p.mN)(At,p.v8.LogsVolume)||(0,h.O)(At))))).subscribe({next(yn){if(yn.logsResult!==null&&(0,E.ff)("grafana_explore_logs_result_displayed",{datasourceType:At.type}),Qe(Ie({exploreId:Se,response:yn})),pt().explore[Se].scanning)if(yn.state===m.Gu.Done&&yn.series.length===0){const Bn=(0,b.e)(-1,pt().explore[Se].range);Qe((0,ee.b3)({exploreId:Se,absoluteRange:Bn})),Qe(Te(Se))}else Qe(qe({exploreId:Se}))},error(yn){Qe((0,B.$l)((0,w.t_)("Query processing error",yn))),Qe(Re({exploreId:Se,loadingState:m.Gu.Error})),console.error(yn)},complete(){pt().explore[Se].queryResponse.state===m.Gu.Loading&&Qe(Re({exploreId:Se,loadingState:m.Gu.Done}))}}),rn)for(const yn of re.SY)Qe(He({exploreId:Se,type:yn})),Qe(ue({exploreId:Se,type:yn}));else for(const yn of re.SY)if((0,p.mN)(At,yn)){const Bn=At.getDataProvider(yn,{...En.request,requestId:`${En.request.requestId}_${(0,s.snakeCase)(yn)}`});Qe(ke({exploreId:Se,type:yn,dataProvider:Bn})),Ke(vt[yn].data,It,ut)||(Qe(ue({exploreId:Se,type:yn})),vt[yn].enabled&&Qe(he(Se,yn)))}else if((0,h.O)(At)&&yn===p.v8.LogsVolume){const Bn=At.getLogsVolumeDataProvider({...En.request,requestId:`${En.request.requestId}_${(0,s.snakeCase)(yn)}`});Qe(ke({exploreId:Se,type:yn,dataProvider:Bn})),Ke(vt[yn].data,It,ut)||(Qe(ue({exploreId:Se,type:yn})),vt[yn].enabled&&Qe(he(Se,yn)))}else Qe(He({exploreId:Se,type:yn}))}Qe(de({exploreId:Se,querySubscription:ht}))};function Ke(Se,Ue,Qe){if(Se&&Se.data[0]){if(!c()(Se.data[0].meta?.custom?.targets,Ue))return!1;const pt=Se.data[0].meta?.custom?.absoluteRange;if(pt&&pt.from<=Qe.from&&Qe.to<=pt.to)return!0}return!1}function ge(Se,Ue){return(Qe,pt)=>{const bt=pt().explore[Se].queries,yt=Ue.map((Mt,At)=>(0,C.fR)(Mt,bt,At));Qe(we({exploreId:Se,queries:yt})),Qe(Te(Se))}}function Me(Se){return(Ue,Qe)=>{Ue(et({exploreId:Se}));const pt=(0,b.e)(-1,Qe().explore[Se].range);Ue((0,ee.b3)({exploreId:Se,absoluteRange:pt})),Ue(Te(Se))}}function ye(Se){return(Ue,Qe)=>{const pt=Qe().explore[Se].queryResponse,bt=Qe().explore[Se].absoluteRange,yt=(0,se.M7)(bt);pt.state===m.Gu.Done&&Ue(Je({exploreId:Se,cacheKey:yt,queryResponse:pt}))}}function fe(Se){return(Ue,Qe)=>{Ue(lt({exploreId:Se}))}}function he(Se,Ue){return(Qe,pt)=>{const{supplementaryQueries:bt}=pt().explore[Se],yt=bt[Ue].dataProvider;if(yt){const Mt=yt.subscribe({next:At=>{Qe(Fe({exploreId:Se,type:Ue,data:At}))}});Qe(Oe({exploreId:Se,type:Ue,dataSubscription:Mt}))}}}function De(Se,Ue,Qe){return(pt,bt)=>{pt(Be({exploreId:Se,enabled:Ue,type:Qe})),(0,re.B9)(Ue,Qe),Ue&&pt(he(Se,Qe))}}const Ae=(Se,Ue)=>{if(Q.match(Ue)){const{queries:Qe}=Se,{index:pt,query:bt}=Ue.payload,yt=[...Qe.slice(0,pt+1),{...bt},...Qe.slice(pt+1)];return{...Se,queries:yt,queryKeys:(0,C.$$)(yt)}}if(G.match(Ue)){const{queries:Qe}=Ue.payload;return{...Se,queries:Qe}}if(q.match(Ue))return(0,C.RZ)(Se.querySubscription),{...Se,loading:!1};if(we.match(Ue)){const{queries:Qe}=Ue.payload;return{...Se,queries:Qe.slice(),queryKeys:(0,C.$$)(Qe)}}if(de.match(Ue)){const{querySubscription:Qe}=Ue.payload;return{...Se,querySubscription:Qe}}if(Be.match(Ue)){const{enabled:Qe,type:pt}=Ue.payload,{supplementaryQueries:bt}=Se,yt=bt[pt].dataSubscription;!Qe&&yt&&yt.unsubscribe();const Mt={...bt,[pt]:{...bt[pt],enabled:Qe,data:void 0}};return{...Se,supplementaryQueries:Mt}}if(ke.match(Ue)){const{dataProvider:Qe,type:pt}=Ue.payload,{supplementaryQueries:bt}=Se,yt=bt[pt];yt?.dataSubscription&&yt.dataSubscription.unsubscribe();const Mt={...bt,[pt]:{...yt,dataProvider:Qe,dataSubscription:void 0}};return{...Se,supplementaryQueries:Mt}}if(He.match(Ue)){const{type:Qe}=Ue.payload,{supplementaryQueries:pt}=Se,bt=pt[Qe];bt?.dataSubscription&&bt.dataSubscription.unsubscribe();const yt={...pt,[Qe]:{...bt,dataProvider:void 0,dataSubscription:void 0}};return{...Se,supplementaryQueries:yt}}if(ue.match(Ue)){const{type:Qe}=Ue.payload,{supplementaryQueries:pt}=Se,bt={...pt,[Qe]:{...pt[Qe],data:void 0}};return{...Se,supplementaryQueries:bt}}if(Oe.match(Ue)){const{dataSubscription:Qe,type:pt}=Ue.payload,{supplementaryQueries:bt}=Se,yt={...bt,[pt]:{...bt[pt],dataSubscription:Qe}};return{...Se,supplementaryQueries:yt}}if(Fe.match(Ue)){let{data:Qe,type:pt}=Ue.payload;const{supplementaryQueries:bt}=Se,yt={...bt,[pt]:{...bt[pt],data:Qe}};return{...Se,supplementaryQueries:yt}}if(Ie.match(Ue))return Ze(Se,Ue);if(X.match(Ue)){const{queries:Qe}=Ue.payload;return{...Se,queries:Qe,queryKeys:(0,C.$$)(Qe)}}if(Re.match(Ue)){const{loadingState:Qe}=Ue.payload;return{...Se,queryResponse:{...Se.queryResponse,state:Qe},loading:Qe===m.Gu.Loading||Qe===m.Gu.Streaming}}if(_e.match(Ue)){const{isPaused:Qe}=Ue.payload;return{...Se,isPaused:Qe}}if(et.match(Ue))return{...Se,scanning:!0};if(qe.match(Ue))return{...Se,scanning:!1,scanRange:void 0};if(Je.match(Ue)){const{cache:pt}=Se,{queryResponse:bt,cacheKey:yt}=Ue.payload;let Mt=[...pt];return Mt.some(Pt=>Pt.key===yt)||(Mt=[{key:yt,value:bt},...Mt].slice(0,5)),{...Se,cache:Mt}}return lt.match(Ue)?{...Se,cache:[]}:Se},Ne=()=>new o.y(Se=>{const Ue=x.h.getState().explore.correlations;if(Ue)Se.next(Ue),Se.complete();else{const Qe=x.h.subscribe(()=>{const{correlations:pt}=x.h.getState().explore;pt&&(Qe(),Se.next(pt),Se.complete())})}}),Ze=(Se,Ue)=>{const{response:Qe}=Ue.payload,{request:pt,state:bt,series:yt,error:Mt,graphResult:At,logsResult:Pt,tableResult:rn,rawPrometheusResult:Fn,traceFrames:kn,nodeGraphFrames:Jn,flameGraphFrames:qn,rawPrometheusFrames:Ut}=Qe;if(Mt){if(Mt.type===y.eA.Timeout)return{...Se,queryResponse:Qe,loading:bt===m.Gu.Loading||bt===m.Gu.Streaming};if(Mt.type===y.eA.Cancelled)return Se;u.v.angularSupportEnabled&&Se.datasourceInstance?.components?.QueryCtrl&&Se.eventBridge.emit(v.Kh.dataError,Mt)}if(!pt)return{...Se};if(u.v.angularSupportEnabled&&Se.datasourceInstance?.components?.QueryCtrl){const ut=yt.map(nt=>(0,i.Zr)(nt));Se.eventBridge.emit(v.Kh.dataReceived,ut)}return{...Se,queryResponse:Qe,graphResult:At,tableResult:rn,rawPrometheusResult:Fn,logsResult:Pt,loading:bt===m.Gu.Loading||bt===m.Gu.Streaming,showLogs:!!Pt,showMetrics:!!At,showTable:!!rn?.length,showTrace:!!kn.length,showNodeGraph:!!Jn.length,showRawPrometheus:!!Ut.length,showFlameGraph:!!qn.length}}},86297:(H,T,e)=>{"use strict";e.d(T,{F9:()=>P,b3:()=>i,cD:()=>y,mG:()=>u,ok:()=>E,oz:()=>v});var t=e(32557),n=e(46519),c=e(49922),s=e(40885),r=e(5562),g=e(55935),f=e(81042),o=e(25405),l=e(3032),a=e(19349),m=e(48197),d=e(73257);const p=(0,t.PH)("explore/changeRange"),h=(0,t.PH)("explore/changeRefreshInterval"),y=C=>(b,S)=>{const{syncedTimes:M}=S().explore;M?(b(i({...C,exploreId:l.Kd.left})),b((0,d.aA)(l.Kd.left,{preserveCache:!0})),b(i({...C,exploreId:l.Kd.right})),b((0,d.aA)(l.Kd.right,{preserveCache:!0}))):(b(i({...C})),b((0,d.aA)(C.exploreId,{preserveCache:!0})))};function v(C,b){return h({exploreId:C,refreshInterval:b})}const i=C=>(b,S)=>{const{exploreId:M,absoluteRange:x,rawRange:O}=C,L=S().explore[M],B=(0,o.Z)(S().user),w=(0,o.i)(S().user),{range:R}=L;let A=R.raw;x&&(A={from:(0,n.GY)(B,x.from),to:(0,n.GY)(B,x.to)}),O&&(A=O);const U=(0,g.OQ)(B,A,w),I={from:U.from.valueOf(),to:U.to.valueOf()},N={time:U.raw,refresh:!1,timepicker:{},getTimezone:()=>B,timeRangeUpdated:F=>{b(y({exploreId:M,rawRange:F}))}};(0,a.$t)().init(N),(0,s.J)().updateTimeRange((0,a.$t)().timeRange()),b(p({exploreId:M,range:U,absoluteRange:I}))};function u(C){return(b,S)=>{if(C===l.Kd.left){const x=S().explore.left;b(y({exploreId:l.Kd.right,rawRange:x.range.raw}))}else{const x=S().explore.right;b(y({exploreId:l.Kd.left,rawRange:x.range.raw}))}const M=S().explore.syncedTimes;b((0,m.tl)({syncedTimes:!M})),b((0,m.og)())}}function P(){return(C,b)=>{const S=(0,o.Z)(b().user),M=(0,o.i)(b().user),x=b().explore.left,O=(0,g.OQ)(S,x.range.raw,M),L={from:O.from.valueOf(),to:O.to.valueOf()};C(i({exploreId:l.Kd.left,absoluteRange:L}));const B=b().explore.right;if(B){const w=(0,g.OQ)(S,B.range.raw,M),R={from:w.from.valueOf(),to:w.to.valueOf()};C(i({exploreId:l.Kd.right,absoluteRange:R}))}C((0,m.og)())}}const E=(C,b)=>{if(h.match(b)){const{refreshInterval:S}=b.payload,M=r.dP.isLive(S),x=(0,g.Oy)(S),O=(0,f.j0)(C.logsResult,x);return r.dP.isLive(C.refreshInterval)&&!M&&(0,g.RZ)(C.querySubscription),{...C,refreshInterval:S,queryResponse:{...C.queryResponse,state:M?c.Gu.Streaming:c.Gu.Done},isLive:M,isPaused:M?!1:C.isPaused,loading:M,logsResult:O}}if(p.match(b)){const{range:S,absoluteRange:M}=b.payload;return{...C,range:S,absoluteRange:M}}return C}},16983:(H,T,e)=>{"use strict";e.d(T,{M7:()=>u,lp:()=>h,M0:()=>P,D:()=>i,r_:()=>y,t5:()=>p,FG:()=>d});var t=e(82897),n=e(49922),c=e(69311),s=e(58379),r=e(55935),g=e(91162),f=e(98589),o=e(46519);const l=E=>{let C=E.raw.from;(0,o.v9)(C)&&(C=C.valueOf().toString(10));let b=E.raw.to;return(0,o.v9)(b)&&(b=b.valueOf().toString(10)),{from:C,to:b}},a={from:"now-6h",to:"now"},m="grafana.explore.style.graph",d=E=>{s.Z.set(m,E)},p=()=>({containerWidth:0,datasourceInstance:null,datasourceMissing:!1,history:[],queries:[],initialized:!1,range:{from:null,to:null,raw:a},absoluteRange:{from:null,to:null},scanning:!1,loading:!1,queryKeys:[],isLive:!1,isPaused:!1,queryResponse:h(),tableResult:null,graphResult:null,logsResult:null,rawPrometheusResult:null,eventBridge:null,cache:[],richHistory:[],supplementaryQueries:(0,f.DK)(),panelsState:{}}),h=()=>({state:n.Gu.NotStarted,series:[],timeRange:(0,c.JK)(),graphFrames:[],logsFrames:[],traceFrames:[],nodeGraphFrames:[],flameGraphFrames:[],tableFrames:[],rawPrometheusFrames:[],rawPrometheusResult:null,graphResult:null,logsResult:null,tableResult:null});async function y(E,C){let b;try{b=await(0,g.ak)().get(C)}catch{b=await(0,g.ak)().get()}if(b.init)try{b.init()}catch(x){console.error(x)}const S=`grafana.explore.history.${b.meta?.id}`,M=s.Z.getObject(S,[]);return s.Z.set((0,r.I$)(E),b.uid),{history:M,instance:b}}function v(E){let C=(0,t.mapValues)(E,b=>(0,t.isObject)(b)?v(b):b);if(C=(0,t.omitBy)(C,t.isEmpty),!(0,t.isEmpty)(C))return C}function i(E){return{datasource:E.datasourceInstance?.uid||"",queries:E.queries.map(r.uC),range:l(E.range),panelsState:v(E.panelsState)}}function u(E){const C={from:E.from,to:E.to};return Object.entries(C).map(([S,M])=>`${encodeURIComponent(S)}=${encodeURIComponent(M.toString())}`).join("&")}function P(E,C){const b=u(C),S=E.findIndex(x=>x.key===b);return S>=0?E[S].value:void 0}},71570:(H,T,e)=>{"use strict";e.d(T,{a:()=>a,u:()=>d});var t=e(68404),n=e(94847),c=e(89029),s=e(40885),r=e(82002),g=e(64703);const l=[(p,h)=>{let y=!0;if(p.internal){let v="";try{v=JSON.stringify(p.internal.query||{}),(0,s.J)().replace(v,h,i=>(y=y&&!!i,""))}catch{}}return y},p=>!p.internal||r.Vt.hasAccessToExplore()],a=p=>{const{field:h,vars:y,splitOpenFn:v,range:i,rowIndex:u,dataFrame:P}=p,E={...y||{}};E.__value={value:{raw:h.values.get(u)},text:"Raw value"};let C;return P&&(C=(0,n.z)({frame:P,rowIndex:u}),E.__data={value:{name:P.name,refId:P.refId,fields:C},text:"Data"},P.fields.forEach(b=>{C&&C[b.name]&&(E[b.name]={value:C[b.name]})}),E.__targetField={value:C[h.name]}),h.config.links?h.config.links.filter(S=>l.every(M=>M(S,E))).map(S=>{if(S.internal)return(0,c._)({link:S,internalLink:S.internal,scopedVars:E,range:i,field:h,onClickFn:v,replaceVariables:(0,s.J)().replace.bind((0,s.J)())});{const M=(O,L)=>(0,s.J)().replace(O,{...L,...E}),x=(0,g.Bq)().getDataLinkUIModel(S,M,h);return x.title||(x.title=m(x.href)),x}}):[]};function m(p){p.indexOf("://")<0&&(p=`http://${p}`);let h;try{h=new URL(p).hostname}catch{h=p}return h}function d(p,h){return(0,t.useCallback)((y,v)=>y.fields.flatMap(i=>i.config?.links&&i.config?.links.length?a({field:i,rowIndex:v,range:p,dataFrame:y,splitOpenFn:h}):[]),[p,h])}},98589:(H,T,e)=>{"use strict";e.d(T,{B9:()=>r,DK:()=>g,SY:()=>c});var t=e(90595),n=e(58379);const c=[t.v8.LogsVolume,t.v8.LogsSample],s=f=>`grafana.explore.logs.enable${f}`,r=(f,o)=>{n.Z.set(s(o),f?"true":"false")},g=()=>{let f={[t.v8.LogsVolume]:{enabled:!0},[t.v8.LogsSample]:{enabled:!1}};for(const o of c){if(o===t.v8.LogsVolume){const a="grafana.explore.logs.enableVolumeHistogram",m=n.Z.get(a);if(m){f[o]={enabled:m==="true"},r(m==="true",t.v8.LogsVolume),localStorage.removeItem(a);continue}}if(o===t.v8.LogsSample)continue;n.Z.get(s(o))==="false"&&(f[o]={enabled:!1})}return f}},47471:(H,T,e)=>{"use strict";e.d(T,{mV:()=>b,bE:()=>C});var t=e(85526),n=e(98356),c=e(24699),s=e(22069),r=e(40885),g=e(86647),f=e(68404),o=e(81764),l=e(53217),a=e(5076),m=e(71263),d=e(75897),p=e(436),h=e(70227),y=e(97573),v=e(51935);const i=14;function u(){const S=(0,f.useRef)({}),M=(0,f.useCallback)(O=>{switch(O){case y.Us.math:case y.Us.reduce:case y.Us.resample:case y.Us.threshold:return S.current[O];case y.Us.classic:return}},[]),x=(0,f.useCallback)((O,L)=>{switch(O){case y.Us.math:S.current.math=L;break;case y.Us.reduce:case y.Us.resample:case y.Us.resample:S.current.reduce=L,S.current.resample=L,S.current.threshold=L;break}},[]);return{getCachedExpression:M,setCachedExpression:x}}function P(S){const{query:M,queries:x,onRunQuery:O,onChange:L}=S,{getCachedExpression:B,setCachedExpression:w}=u();(0,f.useEffect)(()=>{w(M.type,M.expression)},[M.expression,M.type,w]);const R=(0,f.useCallback)(I=>{const N=B(I.value),F=(0,v.J)({...M,type:I.value});L({...F,expression:N??F.expression})},[M,L,B]),A=()=>{const I=x.filter(N=>M.refId!==N.refId).map(N=>({value:N.refId,label:N.refId}));switch(M.type){case y.Us.math:return f.createElement(m.Z,{onChange:L,query:M,labelWidth:i,onRunQuery:O});case y.Us.reduce:return f.createElement(d.v,{refIds:I,onChange:L,labelWidth:i,query:M});case y.Us.resample:return f.createElement(p.p,{query:M,labelWidth:i,onChange:L,refIds:I});case y.Us.classic:return f.createElement(a.I,{onChange:L,query:M,refIds:I});case y.Us.threshold:return f.createElement(h.M,{onChange:L,query:M,labelWidth:i,refIds:I})}},U=y._M.find(I=>I.value===M.type);return f.createElement("div",null,f.createElement(o._,{label:"Operation",labelWidth:i},f.createElement(l.Ph,{options:y._M,value:U,onChange:R,width:25})),A())}class E extends s.CK{constructor(M){super(M),this.instanceSettings=M}applyTemplateVariables(M,x){const O=(0,r.J)();return{...M,expression:O.replace(M.expression,x),window:O.replace(M.window,x)}}getCollapsedText(M){return`Expression: ${M.type}`}query(M){let x=M.targets.map(async L=>{const B=await(0,g.F)().get(L.datasource);return B.interpolateVariablesInQueries?B?.interpolateVariablesInQueries([L],M.scopedVars)[0]:L});return(0,t.D)(Promise.all(x)).pipe((0,n.z)(L=>super.query({...M,targets:L})))}newQuery(M){return{refId:"--",datasource:s.hr,type:M?.type??y.Us.math,...M}}}const C={id:-100,uid:y.Yq,name:s.hr.name,type:s.hr.type,access:"proxy",meta:{baseUrl:"",module:"",type:c.zV.datasource,name:s.hr.type,id:s.hr.type,info:{author:{name:"Grafana Labs"},logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"},description:"Adds expression support to Grafana",screenshots:[],links:[],updated:"",version:""}},jsonData:{},readOnly:!0},b=new E(C);b.meta={id:s.hr.type,info:{logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"}}},b.components={QueryEditor:P}},5076:(H,T,e)=>{"use strict";e.d(T,{I:()=>P});var t=e(68404),n=e(11543),c=e(81764),s=e(31403),r=e(39904),g=e(51935),f=e(52423),o=e(26418),l=e(72648),a=e(44342),m=e(53217),d=e(46967),p=e(67162);const h=p.Z.reducerTypes.map(E=>({label:E.text,value:E.value})),y=p.Z.evalOperators.map(E=>({label:E.text,value:E.value})),v=p.Z.evalFunctions.map(E=>({label:E.text,value:E.value})),i=({condition:E,index:C,onChange:b,onRemoveCondition:S,refIds:M})=>{const x=(0,l.wW)(u),O=I=>{b({...E,operator:{type:I.value}})},L=I=>{b({...E,reducer:{type:I.value,params:[]}})},B=I=>{b({...E,query:{params:[I.value]}})},w=I=>{b({...E,evaluator:{params:E.evaluator.params,type:I.value}})},R=(I,N)=>{const F=parseFloat(I.currentTarget.value),D=[...E.evaluator.params];D[N]=F,b({...E,evaluator:{...E.evaluator,params:D}})},A=f.css`
    width: 60px;
  `,U=E.evaluator.type===p.$.IsWithinRange||E.evaluator.type===p.$.IsOutsideRange;return t.createElement(o.Stack,{direction:"row"},t.createElement("div",{style:{flex:1}},t.createElement(n.Z,null,C===0?t.createElement("div",{className:(0,f.cx)(x.button,A)},"WHEN"):t.createElement(a.d,{className:(0,f.cx)(x.buttonSelectText,A),options:y,onChange:O,value:y.find(I=>I.value===E.operator.type)}),t.createElement(m.Ph,{options:h,onChange:L,width:20,value:h.find(I=>I.value===E.reducer.type)}),t.createElement("div",{className:x.button},"OF"),t.createElement(m.Ph,{onChange:B,options:M,width:"auto",value:M.find(I=>I.value===E.query.params[0])})),t.createElement(n.Z,null,t.createElement(a.d,{className:x.buttonSelectText,options:v,onChange:w,value:v.find(I=>I.value===E.evaluator.type)}),U?t.createElement(t.Fragment,null,t.createElement(d.I,{type:"number",width:10,onChange:I=>R(I,0),value:E.evaluator.params[0]}),t.createElement("div",{className:x.button},"TO"),t.createElement(d.I,{type:"number",width:10,onChange:I=>R(I,1),value:E.evaluator.params[1]})):E.evaluator.type!==p.$.HasNoValue?t.createElement(d.I,{type:"number",width:10,onChange:I=>R(I,0),value:E.evaluator.params[0]}):null)),t.createElement(s.zx,{variant:"secondary",type:"button",onClick:()=>S(C)},t.createElement(r.J,{name:"trash-alt"})))},u=E=>{const C=f.css`
    color: ${E.colors.primary.text};
    font-size: ${E.typography.bodySmall.fontSize};
  `;return{buttonSelectText:C,button:(0,f.cx)(f.css`
        display: flex;
        align-items: center;
        border-radius: ${E.shape.borderRadius(1)};
        font-weight: ${E.typography.fontWeightMedium};
        border: 1px solid ${E.colors.border.weak};
        white-space: nowrap;
        padding: 0 ${E.spacing(1)};
        background-color: ${E.colors.background.canvas};
      `,C)}},P=({onChange:E,query:C,refIds:b})=>{const S=(O,L)=>{C.conditions&&E({...C,conditions:[...C.conditions.slice(0,L),O,...C.conditions.slice(L+1)]})},M=()=>{if(C.conditions){const O=C.conditions.at(-1)?.query?.params??[],L={...g.R,query:{params:O}};E({...C,conditions:C.conditions.length>0?[...C.conditions,L]:[L]})}},x=O=>{if(C.conditions){const L=C.conditions[O],B=C.conditions.filter(w=>w!==L).map((w,R)=>R===0?{...w,operator:{type:"when"}}:w);E({...C,conditions:B})}};return t.createElement("div",null,t.createElement(n.Z,null,t.createElement(c._,{label:"Conditions",labelWidth:14},t.createElement("div",null,C.conditions?.map((O,L)=>{if(O)return t.createElement(i,{key:L,index:L,condition:O,onChange:B=>S(B,L),onRemoveCondition:x,refIds:b})})))),t.createElement(s.zx,{variant:"secondary",type:"button",onClick:M},t.createElement(r.J,{name:"plus-circle"})))}},71263:(H,T,e)=>{"use strict";e.d(T,{Z:()=>m});var t=e(52423),n=e(68404),c=e(26418),s=e(72648),r=e(81764),g=e(77117),f=e(39904),o=e(97379),l=e(42042);const a="Math operations on one or more queries. You reference the query by ${refId} ie. $A, $B, $C etc\nThe sum of two scalar values: $A + $B > 10",m=({labelWidth:y,onChange:v,query:i,onRunQuery:u})=>{const P=b=>{v({...i,expression:b.target.value})},E=(0,s.wW)(p),C=()=>{i.expression&&u()};return n.createElement(c.Stack,{direction:"row"},n.createElement(r._,{label:n.createElement(g.W,{width:"auto"},n.createElement(l.z,{content:n.createElement("div",{className:E.documentationContainer},n.createElement("header",{className:E.documentationHeader},n.createElement(f.J,{name:"book-open"})," Math operator"),n.createElement("div",null,"Run math operations on one or more queries. You reference the query by ","${refId}"," ie. $A, $B, $C etc.",n.createElement("br",null),"Example: ",n.createElement("code",null,"$A + $B")),n.createElement("header",{className:E.documentationHeader},"Available Math functions"),n.createElement("div",{className:E.documentationFunctions},n.createElement(d,{name:"abs",description:"returns the absolute value of its argument which can be a number or a series"}),n.createElement(d,{name:"is_inf",description:"returns 1 for Inf values (negative or positive) and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(d,{name:"is_nan",description:"returns 1 for NaN values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(d,{name:"is_null",description:"returns 1 for null values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(d,{name:"is_number",description:"returns 1 for all real number values and 0 for non-number. It's able to operate on series or scalar values."}),n.createElement(d,{name:"log",description:"returns the natural logarithm of its argument, which can be a number or a series"}),n.createElement(d,{name:"inf, infn, nan, and null",description:"The inf for infinity positive, infn for infinity negative, nan, and null functions all return a single scalar value that matches its name."}),n.createElement(d,{name:"round",description:"returns a rounded integer value. It's able to operate on series or escalar values."}),n.createElement(d,{name:"ceil",description:"rounds the number up to the nearest integer value. It's able to operate on series or escalar values."}),n.createElement(d,{name:"floor",description:"rounds the number down to the nearest integer value. It's able to operate on series or escalar values."})),n.createElement("div",null,"See our additional documentation on"," ",n.createElement("a",{className:E.documentationLink,target:"_blank",href:"https://grafana.com/docs/grafana/latest/panels/query-a-data-source/use-expressions-to-manipulate-data/about-expressions/#math",rel:"noreferrer"},n.createElement(f.J,{size:"xs",name:"external-link-alt"})," Math expressions"),"."))},n.createElement("span",null,"Expression ",n.createElement(f.J,{name:"info-circle"})))),labelWidth:y,grow:!0,shrink:!0},n.createElement(o.K,{value:i.expression,onChange:P,rows:1,placeholder:a,onBlur:C,style:{minWidth:250,lineHeight:"26px",minHeight:32}})))},d=({name:y,description:v})=>{const i=(0,s.wW)(h);return n.createElement(n.Fragment,null,n.createElement("span",{className:i.name},y),n.createElement("span",{className:i.description},v))},p=y=>({documentationHeader:t.css`
    font-size: ${y.typography.h5.fontSize};
    font-weight: ${y.typography.h5.fontWeight};
  `,documentationLink:t.css`
    color: ${y.colors.text.link};
  `,documentationContainer:t.css`
    display: flex;
    flex: 1;
    flex-direction: column;
    gap: ${y.spacing(2)};

    padding: ${y.spacing(1)} ${y.spacing(2)};
  `,documentationFunctions:t.css`
    display: grid;
    grid-template-columns: max-content auto;
    column-gap: ${y.spacing(2)};
  `}),h=y=>({name:t.css`
    font-weight: ${y.typography.fontWeightBold};
  `,description:t.css`
    font-size: ${y.typography.bodySmall.fontSize};
    color: ${y.colors.text.disabled};
  `})},75897:(H,T,e)=>{"use strict";e.d(T,{v:()=>f});var t=e(68404),n=e(81764),c=e(46967),s=e(11543),r=e(53217),g=e(97573);const f=({labelWidth:o="auto",onChange:l,refIds:a,query:m})=>{const d=g.SQ.find(E=>E.value===m.reducer),p=E=>{l({...m,expression:E.value})},h=E=>{l({...m,reducer:E.value})},y=E=>{l({...m,settings:E})},v=E=>{let C;switch(E.value){case g.kN.ReplaceNonNumbers:let b=0;m.settings?.mode===g.kN.ReplaceNonNumbers&&(b=m.settings?.replaceWithValue??0),C={mode:g.kN.ReplaceNonNumbers,replaceWithValue:b};break;default:C={mode:E.value}}y(C)},i=E=>{const C=E.currentTarget.valueAsNumber;y({mode:g.kN.ReplaceNonNumbers,replaceWithValue:C??0})},u=m.settings?.mode??g.kN.Strict,P=()=>{if(u===g.kN.ReplaceNonNumbers)return t.createElement(n._,{label:"Replace With",labelWidth:o},t.createElement(c.I,{type:"number",width:10,onChange:i,value:m.settings?.replaceWithValue??0}))};return t.createElement(t.Fragment,null,t.createElement(s.Z,null,t.createElement(n._,{label:"Function",labelWidth:o},t.createElement(r.Ph,{options:g.SQ,value:d,onChange:h,width:20})),t.createElement(n._,{label:"Input",labelWidth:o},t.createElement(r.Ph,{onChange:p,options:a,value:m.expression,width:"auto"}))),t.createElement(s.Z,null,t.createElement(n._,{label:"Mode",labelWidth:o},t.createElement(r.Ph,{onChange:v,options:g.YM,value:u,width:25})),P()))}},436:(H,T,e)=>{"use strict";e.d(T,{p:()=>f});var t=e(68404),n=e(11543),c=e(81764),s=e(53217),r=e(46967),g=e(97573);const f=({labelWidth:o="auto",onChange:l,refIds:a,query:m})=>{const d=g.Fr.find(u=>u.value===m.downsampler),p=g.r8.find(u=>u.value===m.upsampler),h=u=>{l({...m,window:u.target.value})},y=u=>{l({...m,expression:u.value})},v=u=>{l({...m,downsampler:u.value})},i=u=>{l({...m,upsampler:u.value})};return t.createElement(t.Fragment,null,t.createElement(n.Z,null,t.createElement(c._,{label:"Input",labelWidth:o},t.createElement(s.Ph,{onChange:y,options:a,value:m.expression,width:20}))),t.createElement(n.Z,null,t.createElement(c._,{label:"Resample to",labelWidth:o,tooltip:"10s, 1m, 30m, 1h"},t.createElement(r.I,{onChange:h,value:m.window,width:15})),t.createElement(c._,{label:"Downsample"},t.createElement(s.Ph,{options:g.Fr,value:d,onChange:v,width:25})),t.createElement(c._,{label:"Upsample"},t.createElement(s.Ph,{options:g.r8,value:p,onChange:i,width:25}))))}},70227:(H,T,e)=>{"use strict";e.d(T,{M:()=>d});var t=e(52423),n=e(68404),c=e(72648),s=e(11543),r=e(81764),g=e(53217),f=e(44342),o=e(46967),l=e(67162),a=e(97573);const m=l.$.IsAbove,d=({labelWidth:y,onChange:v,refIds:i,query:u})=>{const P=(0,c.wW)(h),E={type:"query",evaluator:{type:m,params:[0,0]},query:{params:[]},reducer:{params:[],type:"last"}},C=u.conditions?.length?u.conditions:[E],b=C[0],S=a.Mi.find(B=>B.value===C[0].evaluator?.type),M=B=>{v({...u,expression:B.value})},x=B=>{const w=B.value??m;v({...u,conditions:p(C,{type:w})})},O=(B,w)=>{const R=parseFloat(B.currentTarget.value),A=[...b.evaluator.params];A[w]=R,v({...u,conditions:p(C,{params:A})})},L=b.evaluator.type===l.$.IsWithinRange||b.evaluator.type===l.$.IsOutsideRange;return n.createElement(s.Z,null,n.createElement(r._,{label:"Input",labelWidth:y},n.createElement(g.Ph,{onChange:M,options:i,value:u.expression,width:20})),n.createElement(f.d,{className:P.buttonSelectText,options:a.Mi,onChange:x,value:S}),L?n.createElement(n.Fragment,null,n.createElement(o.I,{type:"number",width:10,onChange:B=>O(B,0),defaultValue:b.evaluator.params[0]}),n.createElement("div",{className:P.button},"TO"),n.createElement(o.I,{type:"number",width:10,onChange:B=>O(B,1),defaultValue:b.evaluator.params[1]})):n.createElement(o.I,{type:"number",width:10,onChange:B=>O(B,0),defaultValue:C[0].evaluator.params[0]||0}))};function p(y,v){return[{...y[0],evaluator:{...y[0].evaluator,...v}}]}const h=y=>({buttonSelectText:t.css`
    color: ${y.colors.primary.text};
    font-size: ${y.typography.bodySmall.fontSize};
    text-transform: uppercase;
  `,button:t.css`
    height: 32px;

    color: ${y.colors.primary.text};
    font-size: ${y.typography.bodySmall.fontSize};
    text-transform: uppercase;

    display: flex;
    align-items: center;
    border-radius: ${y.shape.borderRadius(1)};
    font-weight: ${y.typography.fontWeightBold};
    border: 1px solid ${y.colors.border.medium};
    white-space: nowrap;
    padding: 0 ${y.spacing(1)};
    background-color: ${y.colors.background.primary};
  `})},75e3:(H,T,e)=>{"use strict";e.d(T,{j:()=>c});var t=e(22069),n=e(97573);const c=s=>{if(!s)return!1;if((0,t.Pr)(s.datasource))return!0;const r=s;return typeof r.type!="string"?!1:Object.values(n.Us).includes(r.type)}},97573:(H,T,e)=>{"use strict";e.d(T,{Fr:()=>l,Mi:()=>m,SQ:()=>g,Us:()=>s,YM:()=>o,Yq:()=>c,_M:()=>r,kN:()=>f,r8:()=>a});var t=e(21760),n=e(67162);const c="__expr__";var s=(d=>(d.math="math",d.reduce="reduce",d.resample="resample",d.classic="classic_conditions",d.threshold="threshold",d))(s||{});const r=[{value:"math",label:"Math",description:"Free-form math formulas on time series or number data."},{value:"reduce",label:"Reduce",description:"Takes one or more time series returned from a query or an expression and turns each series into a single number."},{value:"resample",label:"Resample",description:"Changes the time stamps in each time series to have a consistent time interval."},{value:"classic_conditions",label:"Classic condition",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the condition."},{value:"threshold",label:"Threshold",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the threshold condition."}],g=[{value:t.gz.min,label:"Min",description:"Get the minimum value"},{value:t.gz.max,label:"Max",description:"Get the maximum value"},{value:t.gz.mean,label:"Mean",description:"Get the average value"},{value:t.gz.sum,label:"Sum",description:"Get the sum of all values"},{value:t.gz.count,label:"Count",description:"Get the number of values"},{value:t.gz.last,label:"Last",description:"Get the last value"}];var f=(d=>(d.Strict="",d.ReplaceNonNumbers="replaceNN",d.DropNonNumbers="dropNN",d))(f||{});const o=[{value:"",label:"Strict",description:"Result can be NaN if series contains non-numeric data"},{value:"dropNN",label:"Drop Non-numeric Values",description:"Drop NaN, +/-Inf and null from input series before reducing"},{value:"replaceNN",label:"Replace Non-numeric Values",description:"Replace NaN, +/-Inf and null with a constant value before reducing"}],l=[{value:t.gz.last,label:"Last",description:"Fill with the last value"},{value:t.gz.min,label:"Min",description:"Fill with the minimum value"},{value:t.gz.max,label:"Max",description:"Fill with the maximum value"},{value:t.gz.mean,label:"Mean",description:"Fill with the average value"},{value:t.gz.sum,label:"Sum",description:"Fill with the sum of all values"}],a=[{value:"pad",label:"pad",description:"fill with the last known value"},{value:"backfilling",label:"backfilling",description:"fill with the next known value"},{value:"fillna",label:"fillna",description:"Fill with NaNs"}],m=[{value:n.$.IsAbove,label:"Is above"},{value:n.$.IsBelow,label:"Is below"},{value:n.$.IsWithinRange,label:"Is within range"},{value:n.$.IsOutsideRange,label:"Is outside range"}]},51935:(H,T,e)=>{"use strict";e.d(T,{J:()=>s,R:()=>r});var t=e(21760),n=e(67162),c=e(97573);const s=g=>{switch(g.type){case c.Us.reduce:g.reducer||(g.reducer=t.gz.mean);break;case c.Us.resample:g.downsampler||(g.downsampler=t.gz.mean),g.upsampler||(g.upsampler="fillna"),g.reducer=void 0;break;case c.Us.math:g.expression=void 0;break;case c.Us.classic:g.conditions||(g.conditions=[r]);break;default:g.reducer=void 0}return g},r={type:"query",reducer:{params:[],type:"avg"},operator:{type:"and"},query:{params:[]},evaluator:{params:[0,0],type:n.$.IsAbove}}},61986:(H,T,e)=>{"use strict";e.d(T,{Go:()=>p,J6:()=>y,OD:()=>d,Pb:()=>m,Uk:()=>u,W7:()=>E,a:()=>h,pz:()=>P,v7:()=>i});var t=e(3363),n=e(83383),c=e(37932),s=e(54899),r=e(659),g=e(60499),f=e(77582),o=e(29930),l=e(60492),a=e(15932);function m(C){return async b=>{const S=await o.ae.getFolderByUid(C);b((0,a.G3)(S)),b((0,r.RL)((0,l.B)(S)))}}function d(C){return async b=>{const S=await o.ae.put(`/api/folders/${C.uid}`,{title:C.title,version:C.version});b((0,r.$l)((0,g.AT)("Folder saved"))),b((0,a.G3)(S)),c.E1.push(n.u.stripBaseFromUrl(`${S.url}/settings`))}}function p(C){return async()=>{await o.ae.delete(`/api/folders/${C}?forceDeleteRules=false`),c.E1.push("/dashboards")}}function h(C){return async b=>{const S=await o.ae.get(`/api/folders/${C}/permissions`);b((0,a.R7)(S))}}function y(C){return async b=>{try{await(0,t.n)(o.ae.fetch({method:"GET",showErrorAlert:!1,showSuccessAlert:!1,url:`/api/folders/${C}/permissions`})),b((0,a.$$)(!0))}catch(S){(0,s.kW)(S)&&S.status!==403&&b((0,r.$l)((0,g.ZR)("Error checking folder permissions",S.data?.message))),b((0,a.$$)(!1))}}}function v(C){return{userId:C.userId,teamId:C.teamId,role:C.role,permission:C.permission}}function i(C,b){return async(S,M)=>{const x=M().folder,O=[];for(const L of x.permissions){if(L.inherited)continue;const B=v(L);C===L&&(B.permission=b),O.push(B)}await o.ae.post(`/api/folders/${x.uid}/permissions`,{items:O}),await S(h(x.uid))}}function u(C){return async(b,S)=>{const M=S().folder,x=[];for(const O of M.permissions)O.inherited||O===C||x.push(v(O));await o.ae.post(`/api/folders/${M.uid}/permissions`,{items:x}),await b(h(M.uid))}}function P(C){return async(b,S)=>{const M=S().folder,x=[];for(const O of M.permissions)O.inherited||x.push(v(O));x.push({userId:C.userId,teamId:C.teamId,role:C.role,permission:C.permission}),await o.ae.post(`/api/folders/${M.uid}/permissions`,{items:x}),await b(h(M.uid))}}function E(C,b){return async S=>{const M=await(0,s.i)().post("/api/folders",{title:C,parentUid:b});await f.Vt.fetchUserPermissions(),S((0,r.$l)((0,g.AT)("Folder Created","OK"))),c.E1.push(n.u.stripBaseFromUrl(M.url))}}},60492:(H,T,e)=>{"use strict";e.d(T,{B:()=>s,_:()=>r});var t=e(35645),n=e(82002),c=e(81168);function s(g){const f={icon:"folder",id:"manage-folder",subTitle:"Manage folder dashboards and permissions",url:"",text:g.title,breadcrumbs:[{title:"Dashboards",url:"dashboards"}],children:[{active:!1,icon:"apps",id:`folder-dashboards-${g.uid}`,text:"Dashboards",url:g.url}]};return f.children.push({active:!1,icon:"library-panel",id:`folder-library-panels-${g.uid}`,text:"Panels",url:`${g.url}/library-panels`}),n.Vt.hasPermission(c.AccessControlAction.AlertingRuleRead)&&t.v.unifiedAlertingEnabled&&f.children.push({active:!1,icon:"bell",id:`folder-alerting-${g.uid}`,text:"Alert rules",url:`${g.url}/alerting`}),g.canAdmin&&f.children.push({active:!1,icon:"lock",id:`folder-permissions-${g.uid}`,text:"Permissions",url:`${g.url}/permissions`}),g.canSave&&f.children.push({active:!1,icon:"cog",id:`folder-settings-${g.uid}`,text:"Settings",url:`${g.url}/settings`}),f}function r(g){const f=s({id:1,uid:"loading",title:"Loading",url:"url",canSave:!0,canEdit:!0,canAdmin:!0,canDelete:!0,version:0});return f.children[g].active=!0,{main:f,node:f.children[g]}}},15932:(H,T,e)=>{"use strict";e.d(T,{$$:()=>o,G3:()=>g,R7:()=>r,Ss:()=>f,ZP:()=>a});var t=e(32557),n=e(2024);const c={id:0,uid:"loading",title:"loading",url:"",canSave:!1,canDelete:!1,hasChanged:!1,version:1,permissions:[],canViewFolderPermissions:!1},s=(0,t.oM)({name:"folder",initialState:c,reducers:{loadFolder:(m,d)=>({...m,...d.payload,hasChanged:!1}),setFolderTitle:(m,d)=>({...m,title:d.payload,hasChanged:d.payload.trim().length>0}),loadFolderPermissions:(m,d)=>({...m,permissions:(0,n.A)(d.payload)}),setCanViewFolderPermissions:(m,d)=>(m.canViewFolderPermissions=d.payload,m)}}),{loadFolderPermissions:r,loadFolder:g,setFolderTitle:f,setCanViewFolderPermissions:o}=s.actions,a={folder:s.reducer}},74311:(H,T,e)=>{"use strict";e.d(T,{Q:()=>l});var t=e(52423),n=e(68404),c=e(72648),s=e(53217),r=e(45253),g=e(7804),f=e(73063);const o=[{label:"Countries",description:"Lookup countries by name, two letter code, or three letter code",value:f.LI},{label:"USA States",description:"Lookup states by name or 2 ",value:"public/gazetteer/usa-states.json"},{label:"Airports",description:"Lookup airports by id or code",value:"public/gazetteer/airports.geojson"}],l=({value:m,onChange:d,context:p,item:h})=>{const y=a((0,c.l4)()),[v,i]=(0,n.useState)(),u=h.settings;(0,n.useEffect)(()=>{async function C(){const b=await(0,f.so)(m);i(b)}C()},[m,i]);const{current:P,options:E}=(0,n.useMemo)(()=>{let C=u?.options?[...u.options]:[...o],b=C?.find(S=>S.value===v?.path);return!b&&v&&(b={label:v.path,value:v.path},C.push(b)),{options:C,current:b}},[v,u?.options]);return n.createElement(n.Fragment,null,n.createElement(s.Ph,{value:P,options:E,onChange:C=>d(C.value),allowCustomValue:!0,formatCreateLabel:C=>`Load from URL: ${C}`}),v&&n.createElement(n.Fragment,null,v.error&&n.createElement(r.b,{title:v.error,severity:"warning"}),v.count&&n.createElement("div",{className:y.keys},n.createElement("b",null,"(",v.count,")"),v.examples(10).map(C=>n.createElement("span",{key:C},C,",")),v.count>10&&" ...")))},a=(0,g.B)(m=>({keys:t.css`
      margin-top: 4px;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;

      > span {
        margin-left: 4px;
      }
    `}))},71575:(H,T,e)=>{"use strict";e.d(T,{C:()=>i});var t=e(14582),n=e(40538),c=e(74311),s=e(52423),r=e(68404),g=e(68183),f=e(72648),o=e(45253),l=e(39904),a=e(53217),m=e(52081),d=e(43524);const p=[{value:n.q1.Auto,label:"Auto",ariaLabel:g.wl.components.Transforms.SpatialOperations.location.autoOption,description:"Automatically identify location data based on default field names"},{value:n.q1.Coords,label:"Coords",ariaLabel:g.wl.components.Transforms.SpatialOperations.location.coords.option,description:"Specify latitude and longitude fields"},{value:n.q1.Geohash,label:"Geohash",ariaLabel:g.wl.components.Transforms.SpatialOperations.location.geohash.option,description:"Specify geohash field"},{value:n.q1.Lookup,label:"Lookup",ariaLabel:g.wl.components.Transforms.SpatialOperations.location.lookup.option,description:"Specify Gazetteer and lookup field"}],h="https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/geomap/#location",y=({value:u,onChange:P,context:E,item:C})=>{const[b,S]=(0,r.useState)();(0,r.useEffect)(()=>{C.settings?.source&&C.settings?.data?.length&&C.settings.data[0]&&(0,d.cJ)(C.settings.source).then(O=>{C.settings&&C.settings.data&&S((0,d.g6)(C.settings.data[0],O))})},[C.settings]);const M=(0,f.wW)(v),x=()=>{if(b){if(b.warning)return r.createElement(o.b,{title:b.warning,severity:"warning",buttonContent:r.createElement(l.J,{name:"question-circle",size:"xl"}),className:M.alert,onRemove:()=>{const O=window.open(h,"_blank","noopener,noreferrer");O&&(O.opener=null)}});if(u===n.q1.Auto&&b.description)return r.createElement("span",null,b.description)}return null};return r.createElement(r.Fragment,null,r.createElement(a.Ph,{options:p,value:u,onChange:O=>{P(O.value)}}),r.createElement(m.Lh,{className:M.hGroup},x()))},v=u=>({alert:s.css`
      & div {
        padding: 4px;
      }
      margin-bottom: 0px;
      margin-top: 5px;
      padding: 2px;
    `,hGroup:s.css`
      & div {
        width: 100%;
      }
    `});function i(u,P,E,C,b){switch(E.addCustomEditor({id:"modeEditor",path:`${P}mode`,name:"Location Mode",editor:y,settings:{data:b,source:C}}),C?.mode){case n.q1.Coords:E.addFieldNamePicker({path:`${P}latitude`,name:"Latitude field",settings:{filter:S=>S.type===t.fS.number,noFieldsMessage:"No numeric fields found"}}).addFieldNamePicker({path:`${P}longitude`,name:"Longitude field",settings:{filter:S=>S.type===t.fS.number,noFieldsMessage:"No numeric fields found"}});break;case n.q1.Geohash:E.addFieldNamePicker({path:`${P}geohash`,name:"Geohash field",settings:{filter:S=>S.type===t.fS.string,noFieldsMessage:"No strings fields found"}});break;case n.q1.Lookup:E.addFieldNamePicker({path:`${P}lookup`,name:"Lookup field",settings:{filter:S=>S.type===t.fS.string,noFieldsMessage:"No strings fields found"}}).addCustomEditor({id:"gazetteer",path:`${P}gazetteer`,name:"Gazetteer",editor:c.Q})}}},50466:(H,T,e)=>{"use strict";e.d(T,{EK:()=>p,Fh:()=>h,ie:()=>d,uZ:()=>a,zS:()=>m});var t=e(18788),n=e(36597),c=e(54428),s=e(61331),r=e(14582),g=e(19695),f=e(14573);function o(v){if(!v?.length)return;const i=[16,8,4,2,1],u="0123456789bcdefghjkmnpqrstuvwxyz";let P=!0;const E=[],C=[];E[0]=-90,E[1]=90,C[0]=-180,C[1]=180;let b;v.split("").forEach(x=>{b=u.indexOf(x),i.forEach(O=>{l(P?C:E,b,O),P=!P})});const S=(E[0]+E[1])/2;return[(C[0]+C[1])/2,S]}function l(v,i,u){i&u?v[0]=(v[0]+v[1])/2:v[1]=(v[0]+v[1])/2}function a(v){return{name:v.name??"Point",type:r.fS.geo,values:new g.G(v.values.toArray().map(i=>{const u=o(i);if(u)return new t.Z((0,s.mi)(u))})),config:y}}function m(v,i){const u=new Array(v.values.length);for(let P=0;P<v.values.length;P++){const E=v.values.get(P),C=i.values.get(P);E===null||C===null||(u[P]=new t.Z((0,s.mi)([E,C])))}return{name:"Point",type:r.fS.geo,values:new g.G(u),config:y}}function d(v,i){const u=i.values.length,P=new Array(u);for(let E=0;E<u;E++)P[E]=v.find(i.values.get(E))?.geometry();return{name:"Geometry",type:r.fS.geo,values:new g.G(P),config:y}}function p(v,i){const u=v.values.toArray(),P=i.values.toArray();if(!u||!P)throw"missing src/dest";if(u.length!==P.length)throw"Source and destination field lengths do not match";const E=v.values.length,C=new Array(E);for(let b=0;b<E;b++){const S=u[b],M=P[b];S&&M?C[b]=new n.Z([S,M]):S?C[b]=S:M&&(C[b]=M)}return{name:"Geometry",type:r.fS.geo,values:new g.G(C),config:y}}function h(v,i){const u=v.values.toArray(),P=i.values.toArray();if(!u||!P)throw"missing src/dest";if(u.length!==P.length)throw"Source and destination field lengths do not match";const E=v.values.length,C=new Array(E);for(let b=0;b<E;b++){const S=u[b],M=P[b];S&&M&&(C[b]=new c.Z([(0,f.Lb)(S),(0,f.Lb)(M)]))}return{name:"Geometry",type:r.fS.geo,values:new g.G(C),config:y}}const y=Object.freeze({custom:{hideFrom:{tooltip:!0}}})},73063:(H,T,e)=>{"use strict";e.d(T,{LI:()=>v,so:()=>i});var t=e(68208),n=e(18788),c=e(16911),s=e(14582),r=e(54899),g=e(23908),f=e(19695);function o(u){const P=new g.Z().readFeatures(u,{featureProjection:"EPSG:3857"}),E=P.length,C=new Array(E).fill(null),b=[],S=new Map,M=B=>{let w=S.get(B);return w||(w={types:new Set,values:new Array(E).fill(null),count:0},b.push(B),S.set(B,w)),w},x=(...B)=>{for(const w of B)if(!S.has(w))return w;return"___"+B[0]},O={types:new Set,values:new Array(E).fill(null),count:0};for(let B=0;B<E;B++){const w=P[B];C[B]=w.getGeometry();const R=w.getId();R!=null&&(O.values[B]=R,O.types.add((0,c.DP)(R)),O.count++);for(const A of w.getKeys()){const U=w.get(A);if(U===C[B]||U==null)continue;const I=M(A);I.values[B]=U,I.types.add((0,c.DP)(U)),I.count++}}const L=[];if(O.count>0){const B=l(O);L.push({name:x("id","_id","__id"),type:B,values:new f.G(O.values),config:{}})}L.push({name:x("geo","geometry"),type:s.fS.geo,values:new f.G(C),config:{}});for(const B of b){const w=S.get(B);if(!w)continue;const R=l(w);L.push({name:B,type:R,values:new f.G(w.values),config:{}})}return{fields:L,length:E}}function l(u){return u.count<1?s.fS.other:u.types.size>1?(u.values=u.values.map(P=>P!=null?`${P}`:P),s.fS.string):u.types.values().next().value}var a=e(50466),m=e(61331);function d(u,P){let E=0;const C=new Map;for(const b of P){const S=new n.Z((0,m.mi)([b.longitude,b.latitude])),M={point:()=>S,geometry:()=>S};if(b.name&&(C.set(b.name,M),C.set(b.name.toUpperCase(),M)),b.key&&(C.set(b.key,M),C.set(b.key.toUpperCase(),M)),b.keys)for(const x of b.keys)C.set(x,M),C.set(x.toUpperCase(),M);E++}return{path:u,find:b=>{let S=C.get(b);return!S&&typeof b=="string"&&(S=C.get(b.toUpperCase())),S},count:E,examples:b=>{const S=[];if(C.size<1)S.push("no values found");else for(const M of C.keys())if(S.push(M),S.length>=b)break;return S}}}function p(u,P){let E;if(Array.isArray(P)){const C=P[0];if(C.latitude&&C.longitude&&(C.key||C.keys))return d(u,P)}else Array.isArray(P?.features)&&P?.type==="FeatureCollection"&&(E=o(P));if(!E)try{E=(0,c.g0)(P)}catch(C){return{path:u,error:`${C}`,find:b=>{},examples:b=>[]}}return h(E,{path:u})}function h(u,P){const E=[];let C,b,S,M,x;for(const B of u.fields)if(B.type===s.fS.geo&&(C=B),!x&&B.type===s.fS.string&&(x=B),B.name){P.keys&&P.keys.includes(B.name)&&E.push(B);const w=B.name.toUpperCase();switch(w){case"LAT":case"LATITUTE":b=B;break;case"LON":case"LNG":case"LONG":case"LONGITUE":S=B;break;case"GEOHASH":M=B;break;case"ID":case"UID":case"KEY":case"CODE":P.keys||E.push(B);break;default:P.keys||(w.endsWith("_ID")||w.endsWith("_CODE"))&&E.push(B)}}!E.length&&x&&E.push(x);let O=!1;C?O=C.values.get(0).getType()==="Point":M?(C=(0,a.uZ)(M),O=!0):b&&S&&(C=(0,a.zS)(S,b),O=!0);const L=new Map;return E.forEach(B=>{B.values.toArray().forEach((w,R)=>{const A=`${w}`;L.set(A.toUpperCase(),R),L.set(A,R)})}),{path:P.path,find:B=>{const w=L.get(B);if(w!=null){const R=C?.values.get(w);return{frame:u,index:w,point:()=>!R||O?R:new n.Z((0,t.qg)(R.getExtent())),geometry:()=>R}}},examples:B=>{const w=[];for(let R of L.keys())if(w.push(R),w.length>B)break;return w},frame:()=>u,count:u.length}}const y={},v="public/gazetteer/countries.json";async function i(u){u||(u=v);let P=y[u];if(!P){try{const E=await(0,r.i)().get(u);P=p(u,E)}catch(E){console.warn("Error loading placename lookup",u,E),P={path:u,error:"Error loading URL",find:C=>{},examples:C=>[]}}y[u]=P}return P}},43524:(H,T,e)=>{"use strict";e.d(T,{cJ:()=>m,g6:()=>p});var t=e(89890),n=e(14582),c=e(3249),s=e(85854),r=e(40538),g=e(50466),f=e(73063);function o(h){return y=>{for(const v of y.fields)if(h(v,y,[]))return v}}function l(h){return y=>{for(const v of y.fields){if(h.has(v.name.toLowerCase()))return v;const i=(0,t.C)(v,y);if(h.has(i))return v}}}const a={mode:r.q1.Auto,geohash:l(new Set(["geohash"])),latitude:l(new Set(["latitude","lat"])),longitude:l(new Set(["longitude","lon","lng"])),h3:l(new Set(["h3"])),wkt:l(new Set(["wkt"])),lookup:l(new Set(["lookup"])),geo:h=>h.fields.find(y=>y.type===n.fS.geo)};async function m(h){const y={...a,mode:h?.mode??r.q1.Auto};switch(y.gazetteer=await(0,f.so)(h?.gazetteer),y.mode){case r.q1.Geohash:h?.geohash?y.geohash=o((0,c.sq)({id:s.mi.byName,options:h.geohash})):y.geohash=()=>{};break;case r.q1.Lookup:h?.lookup?y.lookup=o((0,c.sq)({id:s.mi.byName,options:h.lookup})):y.lookup=()=>{};break;case r.q1.Coords:h?.latitude?y.latitude=o((0,c.sq)({id:s.mi.byName,options:h.latitude})):y.latitude=()=>{},h?.longitude?y.longitude=o((0,c.sq)({id:s.mi.byName,options:h.longitude})):y.longitude=()=>{};break}return y}function d(h,y){const v={mode:y.mode??r.q1.Auto};if(v.mode===r.q1.Auto){if(v.geo=y.geo(h),v.geo)return v;if(v.latitude=y.latitude(h),v.longitude=y.longitude(h),v.latitude&&v.longitude)return v.mode=r.q1.Coords,v;if(v.geohash=y.geohash(h),v.geohash)return v.mode=r.q1.Geohash,v;if(v.lookup=y.lookup(h),v.lookup)return v.mode=r.q1.Lookup,v}switch(v.mode){case r.q1.Coords:v.latitude=y.latitude(h),v.longitude=y.longitude(h);break;case r.q1.Geohash:v.geohash=y.geohash(h);break;case r.q1.Lookup:v.lookup=y.lookup(h);break}return v}function p(h,y){const v=d(h,y);switch(v.mode){case r.q1.Auto:return v.geo?{field:v.geo}:{warning:"Unable to find location fields"};case r.q1.Coords:return v.latitude&&v.longitude?{field:(0,g.zS)(v.longitude,v.latitude),derived:!0,description:`${v.mode}: ${v.latitude.name}, ${v.longitude.name}`}:{warning:"Select latitude/longitude fields"};case r.q1.Geohash:return v.geohash?{field:(0,g.uZ)(v.geohash),derived:!0,description:`${v.mode}`}:{warning:"Select geohash field"};case r.q1.Lookup:return v.lookup?y.gazetteer?{field:(0,g.ie)(y.gazetteer,v.lookup),derived:!0,description:`${v.mode}: ${y.gazetteer.path}`}:{warning:"Gazetteer not found"}:{warning:"Select lookup field"}}return{warning:"unable to find geometry"}}},39653:(H,T,e)=>{"use strict";e.d(T,{q:()=>t});var t=(n=>(n.Data="data",n.Meta="meta",n.Error="error",n.Stats="stats",n.JSON="json",n.Query="query",n.Actions="actions",n.Help="help",n))(t||{})},90336:(H,T,e)=>{"use strict";e.d(T,{GY:()=>g,MA:()=>r,nW:()=>s});var t=e(54899),n=e(77582),c=e(81168);const s=(0,c.createAsyncThunk)("users/fetchInvitees",async()=>n.Vt.hasPermission(c.AccessControlAction.OrgUsersAdd)?await(0,t.i)().get("/api/org/invites"):[]),r=(0,c.createAsyncThunk)("users/addInvitee",async(f,{dispatch:o})=>{await(0,t.i)().post("/api/org/invites",f),await o(s())}),g=(0,c.createAsyncThunk)("users/revokeInvite",async f=>(await(0,t.i)().patch(`/api/org/invites/${f}/revoke`,{}),f))},75804:(H,T,e)=>{"use strict";e.d(T,{ZP:()=>o,wl:()=>s});var t=e(32557),n=e(90336);const c=(0,t.HF)({selectId:l=>l.code}),s=c.getSelectors(),r=c.getInitialState({status:"idle"}),o={invites:(0,t.oM)({name:"invites",initialState:r,reducers:{},extraReducers:l=>{l.addCase(n.nW.pending,a=>{a.status="loading"}).addCase(n.nW.fulfilled,(a,{payload:m})=>{c.setAll(a,m),a.status="succeeded"}).addCase(n.nW.rejected,a=>{a.status="failed"}).addCase(n.GY.fulfilled,(a,{payload:m})=>{c.removeOne(a,m),a.status="succeeded"})}}).reducer}},76647:(H,T,e)=>{"use strict";e.d(T,{T:()=>p,c:()=>h});var t=e(68404),n=e(70197),c=e(22350),s=e(54899),r=e(24799),g=e(46967),f=e(35029),o=e(31403),l=e(79658),a=e(35287),m=e(86648),d=e(2313);const p=({panel:y,initialFolderUid:v,onDismiss:i})=>{const[u,P]=(0,t.useState)(v),[E,C]=(0,t.useState)(y.title),[b,S]=(0,t.useState)(y.title),[M,x]=(0,t.useState)(!1);(0,t.useEffect)(()=>x(!0),[E]),(0,n.Z)(()=>S(E),350,[E]);const{saveLibraryPanel:O}=(0,d.E)(),L=(0,t.useCallback)(()=>{y.libraryPanel={uid:"",name:E},O(y,u).then(R=>{R instanceof Error||i()})},[y,E,u,i,O]),B=(0,c.Z)(async()=>{try{return!(await(0,m.jh)(E)).some(R=>R.folderUid===u)}catch(R){return(0,s.kW)(R)&&(R.isHandled=!0),!0}finally{x(!1)}},[b,u]),w=!B?.value&&B.value!==void 0&&E===b&&!M;return t.createElement(t.Fragment,null,t.createElement(r.g,{label:(0,a.t)("library-panel.add-modal.name","Library panel name"),invalid:w,error:w?(0,a.t)("library-panel.add-modal.error","Library panel with this name already exists"):""},t.createElement(g.I,{id:"share-panel-library-panel-name-input",name:"name",value:E,onChange:R=>C(R.currentTarget.value)})),t.createElement(r.g,{label:(0,a.t)("library-panel.add-modal.folder","Save in folder"),description:(0,a.t)("library-panel.add-modal.folder-description","Library panel permissions are derived from the folder permissions")},t.createElement(l.Es,{onChange:({uid:R})=>P(R),initialFolderUid:v,inputId:"share-panel-library-panel-folder-picker"})),t.createElement(f.u.ButtonRow,null,t.createElement(o.zx,{variant:"secondary",onClick:i,fill:"outline"},t.createElement(a.cC,{i18nKey:"library-panel.add-modal.cancel"},"Cancel")),t.createElement(o.zx,{onClick:L,disabled:w},t.createElement(a.cC,{i18nKey:"library-panel.add-modal.create"},"Create library panel"))))},h=({isOpen:y=!1,panel:v,initialFolderUid:i,...u})=>t.createElement(f.u,{title:"Create library panel",isOpen:y,onDismiss:u.onDismiss},t.createElement(p,{panel:v,initialFolderUid:i,onDismiss:u.onDismiss}))},81283:(H,T,e)=>{"use strict";e.d(T,{i:()=>c});var t=e(68404),n=e(98102);const c=({isOpen:s,onConfirm:r,onDismiss:g})=>t.createElement(n.s,{title:"Do you really want to unlink this panel?",icon:"question-circle",body:`If you unlink this panel, you will be able to edit it without affecting any other dashboards.
            However, once you make a change you will not be able to revert to its original reusable panel.`,confirmText:"Yes, unlink",onConfirm:()=>{r(),g()},onDismiss:g,isOpen:s})},6297:(H,T,e)=>{"use strict";e.d(T,{V:()=>t});function t(n){return Boolean(n.libraryPanel?.uid)}},86648:(H,T,e)=>{"use strict";e.d(T,{E8:()=>p,Ef:()=>d,Kq:()=>l,Mh:()=>f,Ob:()=>a,Pq:()=>g,UO:()=>m,jh:()=>o});var t=e(3363),n=e(30670),c=e(86899),s=e(29930),r=e(59096);async function g({searchString:h="",perPage:y=100,page:v=1,excludeUid:i="",sortDirection:u="",typeFilter:P=[],folderFilterUIDs:E=[]}={}){const C=new URLSearchParams;C.append("searchString",h),C.append("sortDirection",u),C.append("typeFilter",P.join(",")),C.append("folderFilterUIDs",E.join(",")),C.append("excludeUid",i),C.append("perPage",y.toString(10)),C.append("page",v.toString(10)),C.append("kind",r.V.Panel.toString(10));const{result:b}=await(0,s.i)().get(`/api/library-elements?${C.toString()}`);return b}async function f(h,y=!1){const v=await(0,t.n)((0,s.i)().fetch({method:"GET",url:`/api/library-elements/${h}`,showSuccessAlert:!y,showErrorAlert:!y})),{result:i}=v.data,u=new c.f({...n.Ql,schemaVersion:35,panels:[i.model]}),P=u.panels[0].getSaveModel();return u.destroy(),{...i,model:P}}async function o(h){const{result:y}=await(0,s.i)().get(`/api/library-elements/name/${h}`);return y}async function l(h,y){const{result:v}=await(0,s.i)().post("/api/library-elements",{folderUid:y,name:h.libraryPanel.name,model:h,kind:r.V.Panel});return v}async function a(h){const{libraryPanel:y,...v}=h,{uid:i,name:u,version:P,folderUid:E}=y,C=r.V.Panel,{result:b}=await(0,s.i)().patch(`/api/library-elements/${i}`,{folderUid:E,name:u,model:v,version:P,kind:C});return b}function m(h){return(0,s.i)().delete(`/api/library-elements/${h}`)}async function d(h){const{result:y}=await(0,s.i)().get(`/api/library-elements/${h}/connections`);return y}async function p(h){const y=await d(h);return y.length===0?[]:await(0,s.i)().search({dashboardUIDs:y.map(i=>i.connectionUid)})}},59096:(H,T,e)=>{"use strict";e.d(T,{V:()=>t});var t=(c=>(c[c.Panel=1]="Panel",c))(t||{}),n=(c=>(c[c.Dashboard=1]="Dashboard",c))(n||{})},2313:(H,T,e)=>{"use strict";e.d(T,{E:()=>y});var t=e(68404),n=e(53787),c=e(54899),s=e(659),r=e(35287),g=e(81168),f=e(60499),o=e(86648);function l(v){return(0,f.t_)(v)}function a(v){return(0,f.AT)(v)}async function m(v,i){const u=d(v),P=await h(u,i);return p(v,P),P}function d(v){let i=v.getSaveModel();return i={libraryPanel:{name:v.title,uid:void 0},...i},i}function p(v,i){v.restoreModel({...i.model,configRev:0,libraryPanel:i,title:v.title}),v.hasSavedPanelEditChange=!0,v.refresh()}function h(v,i){return v.libraryPanel?v.libraryPanel&&v.libraryPanel.uid===""?(0,o.Kq)(v,i):(0,o.Ob)(v):Promise.reject()}const y=()=>{const v=(0,g.useDispatch)(),[i,u]=(0,n.default)(async(P,E)=>{try{return await m(P,E)}catch(C){throw(0,c.kW)(C)?(C.isHandled=!0,new Error(C.data.message)):C}},[]);return(0,t.useEffect)(()=>{if(i.error){const P=i.error.message;v((0,s.$l)(l((0,r.t)("library-panels.save.error",'Error saving library panel: "{{errorMsg}}"',{errorMsg:P}))))}i.value&&v((0,s.$l)(a((0,r.t)("library-panels.save.success","Library panel saved"))))},[v,i]),{state:i,saveLibraryPanel:u}}},30992:(H,T,e)=>{"use strict";e.d(T,{H:()=>u});var t=e(62626),n=e(25318),c=e(75118),s=e(37932),r=e(77582),g=e(57203),f=e(45984),o=e(9398),l=e(52423),a=e(68404),m=e(35645),d=e(35029),p=e(7804),h=(P=>(P.Saved="saved",P.EditingStarted="editing-started",P.EditingCanceled="editing-cancelled",P.Deleted="deleted",P))(h||{});class y extends a.PureComponent{constructor(){super(...arguments),this.state={},this.discardAndReload={label:"Discard local changes",description:"Load the latest saved version for this dashboard",action:()=>{u.reloadPage(),this.onDismiss()}},this.continueEditing={label:"Continue editing",description:"Keep your local changes and continue editing.  Note: when you save, this will overwrite the most recent changes",action:()=>{this.onDismiss()}},this.acceptDelete={label:"Discard Local changes",description:"view grafana homepage",action:()=>{document.location.href=m.v.appUrl}},this.onDismiss=()=>{this.setState({dismiss:!0})}}render(){const{event:E}=this.props,{dismiss:C}=this.state,b=v(m.v.theme2),S=E?.action===h.Deleted,M=S?[this.continueEditing,this.acceptDelete]:[this.continueEditing,this.discardAndReload];return a.createElement(d.u,{isOpen:!C,title:"Dashboard Changed",icon:"copy",onDismiss:this.onDismiss,onClickBackdrop:()=>{},className:b.modal},a.createElement("div",null,S?a.createElement("div",null,"This dashboard has been deleted by another session"):a.createElement("div",null,"This dashboard has been modifed by another session"),a.createElement("br",null),M.map(x=>a.createElement("div",{key:x.label,onClick:x.action,className:b.radioItem},a.createElement("h3",null,x.label),x.description)),a.createElement("br",null)))}}const v=(0,p.B)(P=>({modal:l.css`
      width: 500px;
    `,radioItem:l.css`
      margin: 0;
      font-size: ${P.typography.size.sm};
      color: ${P.colors.text.secondary};
      padding: 10px;
      cursor: pointer;
      width: 100%;

      &:hover {
        background: ${P.colors.primary.main};
        color: ${P.colors.text};
      }
    `}));class i{constructor(){this.editing=!1,this.observer={next:E=>{if((0,t.se)(E)&&this.editing&&E.state===t.yS.Connected&&this.sendEditingState(),(0,t.RL)(E)){if(E.message.sessionId===g.W4)return;const{action:C}=E.message;switch(C){case h.EditingStarted:case h.Saved:{if(this.ignoreSave){this.ignoreSave=!1;return}const b=(0,o.h4)().getCurrent();if(b?.uid!==E.message.uid){console.log("dashboard event for different dashboard?",E,b);return}const S=this.editing||b.hasUnsavedChanges();if(C===h.Saved)S?r.h$.publish(new f.Dn({component:y,props:{event:E}})):(r.h$.emit(n.SI.alertSuccess,["Dashboard updated"]),this.reloadPage());else if(S&&C===h.EditingStarted&&!this.hasSeenNotice){const M=E.message,x=this.getRecentEditingEvent();(!x||x.message!==M.message)&&(this.hasSeenNotice=!0,r.h$.emit(n.SI.alertWarning,["Another session is editing this dashboard",M.message])),this.lastEditing=M}return}}}}}}setEditingState(E){const C=this.editing=E;this.editing=E,this.hasSeenNotice=!1,C&&r.Vt.isEditor&&this.sendEditingState()}sendEditingState(){const{channel:E,uid:C}=this;E&&C&&(0,c.gj)().publish(E,{sessionId:g.W4,uid:C,action:this.editing?h.EditingStarted:h.EditingCanceled,timestamp:Date.now()})}watch(E){const C=(0,c.gj)();C&&E!==this.uid&&(this.channel={scope:t.z.Grafana,namespace:"dashboard",path:`uid/${E}`},this.leave(),E&&(this.subscription=C.getStream(this.channel).subscribe(this.observer)),this.uid=E)}leave(){this.subscription&&this.subscription.unsubscribe(),this.subscription=void 0,this.uid=void 0}ignoreNextSave(){this.ignoreSave=!0}getRecentEditingEvent(){return this.lastEditing&&this.lastEditing.timestamp&&Date.now()-this.lastEditing.timestamp>5e3&&(this.lastEditing=void 0),this.lastEditing}reloadPage(){s.E1.reload()}}const u=new i},28625:(H,T,e)=>{"use strict";e.d(T,{Av:()=>d,MB:()=>i,_A:()=>p});var t=e(16911),n=e(14582),c=e(19695),s=e(70006),r=e(15355),g=e(98234),f=e(75118),o=e(44332);const l="__name__";var a=(b=>(b[b.wide=0]="wide",b[b.labels=1]="labels",b))(a||{});const m=class{constructor(b){this.options=b,this.meta={},this.fields=[],this.length=0,this.schemaFields=[],this.timeFieldIndex=-1,this.pushMode=0,this.labels=new Set,this.packetInfo={schemaChanged:!0,number:0,action:f.T0.Replace,length:0},this.serialize=(S,M,x)=>{const O=M?Object.assign({},{...this.options,...M}):this.options,L=(0,t.Aw)(this,S),B=E(L.fields.map(R=>R.values),typeof x?.maxLength=="number"?Math.min(x.maxLength,O.maxLength):O.maxLength,this.timeFieldIndex,O.maxDelta);L.fields=L.fields.map(R=>({...R,values:R.values.slice(B)}));const w=L.fields[0]?.values?.length??0;return{...L,labels:this.labels,schemaFields:this.schemaFields,name:this.name,refId:this.refId,meta:this.meta,length:w,timeFieldIndex:this.timeFieldIndex,pushMode:this.pushMode,packetInfo:this.packetInfo,options:O}},this.initFromSerialized=S=>{this.name=S.name,this.refId=S.refId,this.meta=S.meta,this.length=S.length,this.labels=S.labels,this.schemaFields=S.schemaFields,this.timeFieldIndex=S.timeFieldIndex,this.pushMode=S.pushMode,this.packetInfo.length=S.packetInfo.length,this.packetInfo.number=S.packetInfo.number,this.packetInfo.action=f.T0.Replace,this.packetInfo.schemaChanged=!0,this.fields=S.fields.map(M=>({...M,type:M.type??n.fS.other,config:M.config??{},values:Array.isArray(M.values)?new c.G(M.values):new c.G})),P(this.fields.map(M=>M.values.buffer),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)},this.needsResizing=({maxLength:S,maxDelta:M})=>{const x=S&&this.options.maxLength<S,O=M&&this.options.maxDelta<M,L=M&&this.options.maxDelta===1/0;return Boolean(x||O||L)},this.resize=({maxLength:S,maxDelta:M})=>{M&&(this.options.maxDelta===1/0?this.options.maxDelta=M:this.options.maxDelta=Math.max(M,this.options.maxDelta)),this.options.maxLength=Math.max(this.options.maxLength,S??0)},this.pushNewValues=S=>{if(!S?.length)return;this.packetInfo.action=this.options.action,this.packetInfo.number++,this.packetInfo.length=S[0].length,this.packetInfo.schemaChanged=!1,this.options.action===f.T0.Append?u(this.fields.map(x=>x.values.buffer),S,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta):(S.forEach((x,O)=>{this.fields[O]?.values&&(this.fields[O].values.buffer=x)}),P(this.fields.map(x=>x.values.buffer),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta));const M=this.fields?.[0]?.values?.buffer?.length;M!==void 0&&(this.length=M)},this.resetStateCalculations=()=>{this.fields.forEach(S=>{S.state={...S.state??{},calcs:void 0,range:void 0}})},this.getMatchingFieldIndexes=S=>this.fields.map((M,x)=>S(M)?x:void 0).filter(M=>M!==void 0),this.getValuesFromLastPacket=()=>this.fields.map(S=>{const M=S.values.buffer;return M.slice(Math.max(M.length-this.packetInfo.length))}),this.hasAtLeastOnePacket=()=>Boolean(this.packetInfo.length),this.getOptions=()=>this.options,Object.defineProperty(this,"length",{enumerable:!0}),Object.defineProperty(this,"fields",{enumerable:!0})}get alwaysReplace(){return this.options.action===f.T0.Replace}push(b){const{schema:S,data:M}=b;if(this.packetInfo.number++,this.packetInfo.length=0,this.packetInfo.schemaChanged=!1,S){this.pushMode=0,this.timeFieldIndex=S.fields.findIndex(B=>B.type===n.fS.time);const x=S.fields[0];this.timeFieldIndex===1&&x.type===n.fS.string&&(x.name==="labels"||x.name==="Labels")&&(this.pushMode=1,this.timeFieldIndex=0);const O=this.pushMode===1?S.fields.slice(1):S.fields;this.refId=S.refId,S.meta&&(this.meta={...S.meta});const{displayNameFormat:L}=this.options;if(C(this.schemaFields,O)){const B=O.length;this.fields.forEach((w,R)=>{const A=O[R%B];w.config=A.config??{},w.labels=A.labels}),L&&this.fields.forEach(w=>{const R={[l]:w.name,...w.labels};w.config.displayNameFromDS=(0,o.W)(L,R)})}else{this.packetInfo.schemaChanged=!0;const B=this.pushMode===0;this.fields=O.map(w=>{const R=w.config??{};if(L){const A={[l]:w.name,...w.labels};R.displayNameFromDS=(0,o.W)(L,A)}return{config:R,name:w.name,labels:w.labels,type:w.type??n.fS.other,values:B?this.fields.find(A=>A.name===w.name&&w.type===A.type)?.values??new c.G(Array(this.length).fill(void 0)):new c.G}})}this.schemaFields=O}if(M&&M.values.length&&M.values[0].length){let{values:x,entities:O}=M;if(O&&O.forEach((B,w)=>{B&&(0,s.Jy)(B,x[w])}),this.pushMode===1){const B=h(x);for(const A of B.keys())this.labels.has(A)||(this.packetInfo.schemaChanged=!0,this.addLabel(A));let w=Array(this.schemaFields.length).fill([]),R=[];this.labels.forEach(A=>{R.push(B.get(A)??w)}),x=(0,g.v_)(R)}if(x.length!==this.fields.length){if(this.fields.length)throw new Error(`push message mismatch.  Expected: ${this.fields.length}, received: ${x.length} (labels=${this.pushMode===1})`);this.fields=x.map((B,w)=>{let R=`Field ${w}`,A=(0,t.LI)(B[0]);return w===0&&A===n.fS.number&&B[0]>1600016688632&&(A=n.fS.time,R="Time"),{name:R,type:A,config:{},values:new c.G([])}})}let L=x;this.packetInfo.length=x[0].length,this.alwaysReplace||!this.length?this.packetInfo.action=f.T0.Replace:(this.packetInfo.action=f.T0.Append,L=this.fields.map(B=>B.values.buffer),u(L,x,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)),L.forEach((B,w)=>{const{state:R,values:A}=this.fields[w];A.buffer=B,R&&(R.calcs=void 0)}),this.length=L[0].length}return{...this.packetInfo}}addLabel(b){const{displayNameFormat:S}=this.options,M=this.labels.size,x=v(b);if(M===0)this.fields.forEach((O,L)=>{if(L>0&&(O.labels=x,S)){const B={[l]:O.name,...x};O.config.displayNameFromDS=(0,o.W)(S,B)}});else for(let O=1;O<this.schemaFields.length;O++){let L=this.schemaFields[O];const B=L.config??{};if(S){const w={[l]:L.name,...x};B.displayNameFromDS=(0,o.W)(S,w)}this.fields.push({...L,config:B,labels:x,values:new c.G(Array(this.length).fill(void 0))})}this.labels.add(b)}};let d=m;d.deserialize=b=>{const S=new m(b.options);return S.initFromSerialized(b),S},d.empty=b=>new m(p(b)),d.fromDataFrameJSON=(b,S)=>{const M=new m(p(S));return M.push(b),M};function p(b){return{maxLength:b?.maxLength??1e3,maxDelta:b?.maxDelta??1/0,action:b?.action??f.T0.Append,displayNameFormat:b?.displayNameFormat}}function h(b){let S=new Set(b[0]),M=new Map;S.forEach(x=>{let O=Array(b.length-1).fill(null).map(()=>[]);M.set(x,O)});for(let x=0;x<b[0].length;x++){let O=M.get(b[0][x]);for(let L=1;L<b.length;L++)O[L-1].push(b[L][x])}return M}function y(b,S,M,x){let O;M=M||0,x=x||S.length-1;let L=x<=2147483647;for(;x-M>1;)O=L?M+x>>1:Math.floor((M+x)/2),S[O]<b?M=O:x=O;return b-S[M]<=S[x]-b?M:x}function v(b){if(!b.length)return{};if(b.charAt(0)==="{")return(0,r.J8)(b);const S={};return b.split(",").forEach(M=>{const[x,O]=M.trim().split("=");S[x]=O}),S}function i(b){const S=b.packetInfo;return S?.action?S:void 0}function u(b,S,M=1/0,x=0,O=1/0){for(let L=0;L<b.length;L++)for(let B=0;B<S[L].length;B++)b[L].push(S[L][B]);return P(b,M,x,O)}function P(b,S=1/0,M=0,x=1/0){const O=E(b,S,M,x);if(O)for(let L=0;L<b.length;L++)b[L].splice(0,O);return O}function E(b,S=1/0,M=0,x=1/0){if(!b[0]?.length)return 0;const O=b[0].length;let L=0;if(O>S&&(L=O-S),x!==1/0&&M>=0){const B=b[M],w=B[L],R=B[O-1];R-w>x&&(L=y(R-x,B,L))}return L}function C(b,S){if(b?.length!==S.length)return!1;for(let M=0;M<b.length;M++){const x=b[M],O=S[M];if(x.name!==O.name||x.type!==O.type)return!1}return!0}},14035:(H,T,e)=>{"use strict";e.d(T,{A1:()=>c,g0:()=>n,iL:()=>g});var t=e(16911),n=(f=>(f.NewValuesSameSchema="NewValuesSameSchema",f.FullFrame="FullFrame",f))(n||{});const c=(f,o)=>"type"in f&&f.type===o,s=Object.values(n),r=f=>"type"in f&&s.includes(f.type),g=f=>(0,t.aY)(f)&&"packetInfo"in f},57203:(H,T,e)=>{"use strict";e.d(T,{Bp:()=>w,W4:()=>B});var t=e(35645),n=e(75118),c=e(54899),s=e(6911),r=e(82002),g=e(53747),f=e(21056),o=e(88214),l=e(79702),a=e(6163),m=e(43752),d=e(77410);const p=()=>new d.q(new URL(e.p+e.u(8186),e.b));var h=e(46060),y=e(85526),v=e(13016);const i=A=>new h.y(U=>{const I=A.subscribe(l.sj(N=>{U.next(N)}),l.sj(N=>{U.error(N)}),l.sj(()=>{U.complete()}));return{unsubscribe:()=>{I.then(N=>N.unsubscribe())}}}),u=A=>(0,y.D)(A).pipe((0,v.w)(U=>i(U)));class P{constructor(U){this.getConnectionState=()=>u(this.centrifugeWorker.getConnectionState()),this.getDataStream=I=>u(this.centrifugeWorker.getDataStream(I)).pipe((0,a.Q)(m.z)),this.getQueryData=async I=>{const N=JSON.parse(JSON.stringify(I));return this.centrifugeWorker.getQueryData(N)},this.getPresence=I=>this.centrifugeWorker.getPresence(I),this.getStream=I=>u(this.centrifugeWorker.getStream(I)),this.centrifugeWorker=l.Ud(p()),this.centrifugeWorker.initialize(U,l.sj(U.dataStreamSubscriberReadiness))}}var E=e(2101),C=e(53786),b=e(62626),S=e(32689),M=e(22069),x=e(28625),O=e(14035);class L{constructor(U){this.deps=U,this.getConnectionState=()=>this.deps.centrifugeSrv.getConnectionState(),this.getDataStream=I=>{let N;const F=D=>{const Y=D.data[0];if(!N&&!(0,O.A1)(Y,O.g0.FullFrame)){console.warn(`expected first packet to contain a full frame, received ${Y?.type}`);return}switch(Y.type){case O.g0.FullFrame:{N=x.Av.deserialize(Y.frame);return}case O.g0.NewValuesSameSchema:{N.pushNewValues(Y.values);return}}};return this.deps.centrifugeSrv.getDataStream(I).pipe((0,E.U)(D=>(F(D),{...D,data:[N??x.Av.empty()]})))},this.getStream=I=>this.deps.centrifugeSrv.getStream(I),this.getQueryData=I=>(0,y.D)(this.deps.centrifugeSrv.getQueryData(I)).pipe((0,v.w)(N=>{const F=(0,S.z1)(N,I.request.targets);return F.data?.length&&F.data.find(Y=>Y.meta?.channel)?(0,M.B9)(F,I.request,M.PI):(0,C.of)(F)})),this.publish=async(I,N)=>this.deps.backendSrv.post("api/live/publish",{channel:(0,b.Aj)(I),data:N}),this.getPresence=I=>this.deps.centrifugeSrv.getPresence(I)}}const B=window?.grafanaBootData?.user?.id+"/"+Date.now().toString(16)+"/"+Math.random().toString(36).substring(2,15);function w(){const A={appUrl:`${window.location.origin}${t.v.appSubUrl}`,orgId:r.Vt.user.orgId,orgRole:r.Vt.user.orgRole,liveEnabled:t.v.liveEnabled,sessionId:B,dataStreamSubscriberReadiness:s.A.ok.asObservable(),grafanaAuthToken:(0,g.v)()},U=t.v.featureToggles["live-service-web-worker"]?new P(A):new f.R(A);(0,n.cA)(new L({centrifugeSrv:U,backendSrv:(0,c.i)()}))}function R(){return getGrafanaLiveSrv()}},54972:(H,T,e)=>{"use strict";e.d(T,{j:()=>r});var t=e(52423),n=e(68404),c=e(72648);const s=["level","lvl","filename"],r=({labels:f})=>{const o=(0,c.wW)(g),l=Object.keys(f).filter(a=>!a.startsWith("_")&&!s.includes(a));return l.length===0?n.createElement("span",{className:(0,t.cx)([o.logsLabels])},n.createElement("span",{className:(0,t.cx)([o.logsLabel])},"(no unique labels)")):n.createElement("span",{className:(0,t.cx)([o.logsLabels])},l.sort().map(a=>{const m=f[a];if(!m)return;const d=`${a}: ${m}`;return n.createElement("span",{key:a,className:(0,t.cx)([o.logsLabel])},n.createElement("span",{className:(0,t.cx)([o.logsLabelValue]),title:d},m))}))},g=f=>({logsLabels:t.css`
      display: flex;
      flex-wrap: wrap;
      font-size: ${f.typography.size.xs};
    `,logsLabel:t.css`
      label: logs-label;
      display: flex;
      padding: ${f.spacing(0,.25)};
      background-color: ${f.colors.background.secondary};
      border-radius: ${f.shape.borderRadius(1)};
      margin: ${f.spacing(.125,.5,0,0)};
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:t.css`
      label: logs-label__value;
      display: inline-block;
      max-width: ${f.spacing(25)};
      text-overflow: ellipsis;
      overflow: hidden;
    `})},25287:(H,T,e)=>{"use strict";e.d(T,{Q:()=>l});var t=e(2525),n=e(68404),c=e(14677),s=e.n(c),r=e(33399),g=e(72648);function f(a,m){return m.split(/;\s*/).reduce((d,p)=>{if(p==="color:rgba(0,0,0,0.5)")return{color:a.colors.text.secondary};const h=p.match(/([^:\s]+)\s*:\s*(.+)/);if(h&&h[1]&&h[2]){const y=h[1].replace(/-([a-z])/g,(v,i)=>i.toUpperCase());d[y]=h[2]}return d},{})}class o extends n.PureComponent{constructor(){super(...arguments),this.state={chunks:[],prevValue:""}}static getDerivedStateFromProps(m,d){return m.value===d.prevValue?null:{chunks:t.ZP.parse(m.value).spans.map(h=>h.css?{style:f(m.theme,h.css),text:h.text}:{text:h.text}),prevValue:m.value}}render(){const{chunks:m}=this.state;return m.map((d,p)=>{const h=this.props.highlight?.searchWords?n.createElement(s(),{key:p,textToHighlight:d.text,searchWords:this.props.highlight.searchWords,findChunks:r.Xt,highlightClassName:this.props.highlight.highlightClassName}):d.text;return d.style?n.createElement("span",{key:p,style:d.style,"data-testid":"ansiLogLine"},h):h})}}const l=(0,g.HE)(o);l.displayName="LogMessageAnsi"},48955:(H,T,e)=>{"use strict";e.d(T,{r:()=>N,n:()=>w});var t=e(52423),n=e(58635),c=e(68404),s=e(14677),r=e.n(s),g=e(35008),f=e.n(g),o=e(33399),l=e(40400),a=e(61860),m=e(8180),d=e(72648),p=e(25287),h=e(64076),y=e(90595),v=e(8928),i=e(35645),u=e(31403),P=e(68226),E=e(56766),C=e(45253),b=e(94437),S=(F=>(F.Bottom="bottom",F.Top="top",F))(S||{});const M=(F,D,Y)=>{(!i.v.featureToggles.logsContextDatasourceUi||!Y)&&(Y=0);const j=40,K=220,z=Y+j+K,Z=j+K,ae=D?"100%":"75%",J=D?t.css`
        top: -${z}px;
      `:t.css`
        margin-top: -${z}px;
      `,oe=D?t.css`
        top: 100%;
      `:t.css`
        margin-top: ${F.spacing(2.5)};
      `;return{width:t.css`
      width: ${ae};
    `,bottomContext:t.css`
      height: ${Z}px;
    `,commonStyles:t.css`
      position: absolute;
      height: ${z}px;
      z-index: ${F.zIndex.dropdown};
      overflow: hidden;
      background: ${F.colors.background.primary};
      box-shadow: 0 0 ${F.spacing(1.25)} ${F.v1.palette.black};
      border: 1px solid ${F.colors.background.secondary};
      border-radius: ${F.shape.borderRadius(2)};
      font-family: ${F.typography.fontFamily};
    `,header:t.css`
      height: ${j}px;
      padding: ${F.spacing(0,1.25)};
      display: flex;
      align-items: center;
      background: ${F.colors.background.canvas};
    `,datasourceUi:t.css`
      height: ${Y}px;
      padding: ${F.spacing(0,1.25)};
      display: flex;
      align-items: center;
      background: ${F.colors.background.canvas};
    `,top:t.css`
      border-radius: 0 0 ${F.shape.borderRadius(2)} ${F.shape.borderRadius(2)};
      box-shadow: 0 0 ${F.spacing(1.25)} ${F.v1.palette.black};
      clip-path: inset(0px -${F.spacing(1.25)} -${F.spacing(1.25)} -${F.spacing(1.25)});
    `,title:t.css`
      position: absolute;
      width: ${ae};
      margin-top: -${z+j}px;
      z-index: ${F.zIndex.modal};
      height: ${j}px;
      background: ${F.colors.background.secondary};
      border: 1px solid ${F.colors.background.secondary};
      border-radius: ${F.shape.borderRadius(2)} ${F.shape.borderRadius(2)} 0 0;
      box-shadow: 0 0 ${F.spacing(1.25)} ${F.v1.palette.black};
      clip-path: inset(-${F.spacing(1.25)} -${F.spacing(1.25)} 0px -${F.spacing(1.25)});
      font-family: ${F.typography.fontFamily};

      display: flex;
      flex-direction: row;
      align-items: center;

      padding: ${F.spacing()};

      > h5 {
        margin: 0;
        flex: 1;
      }
    `,actions:t.css`
      align-items: center;
      display: flex;
    `,headerButton:t.css`
      margin-left: ${F.spacing(1)};
    `,logs:t.css`
      height: ${K}px;
      padding: ${F.spacing(1.25)};
      font-family: ${F.typography.fontFamilyMonospace};

      .scrollbar-view {
        overscroll-behavior: contain;
      }
    `,afterContext:J,beforeContext:oe}},x=({row:F,rows:D,onLoadMoreContext:Y,canLoadMoreRows:j,groupPosition:K,logsSortOrder:z,getLogRowContextUi:Z,runContextQuery:ae})=>{const[J,oe]=(0,c.useState)(0),Ee=c.createRef(),{datasourceUi:me,header:re,headerButton:le}=(0,d.wW)(ee=>M(ee,void 0,J));let pe="after";if(K==="bottom"?z===y.UV.Descending&&(pe="before"):z===y.UV.Ascending&&(pe="before"),i.v.featureToggles.logsContextDatasourceUi){const ee=(0,c.useMemo)(()=>new ResizeObserver(se=>{for(let Q of se)oe(Q.contentRect.height)}),[]);(0,c.useLayoutEffect)(()=>{const se=Ee.current?.children.item(0);return se&&ee.observe(se),()=>{ee.disconnect()}},[Ee,ee])}return c.createElement(c.Fragment,null,i.v.featureToggles.logsContextDatasourceUi&&Z&&c.createElement("div",{ref:Ee,className:me},Z(F,ae)),c.createElement("div",{className:re},c.createElement("span",{className:t.css`
            opacity: 0.6;
          `},"Showing ",D.length," lines ",pe," match."),(D.length>=10||D.length>10&&D.length%10!==0)&&j&&c.createElement(u.zx,{className:le,variant:"secondary",size:"sm",onClick:Y},"Load 10 more lines")))},O=({row:F,rows:D,error:Y,className:j,shouldScrollToBottom:K,canLoadMoreRows:z,onLoadMoreContext:Z,groupPosition:ae,logsSortOrder:J,getLogRowContextUi:oe,runContextQuery:Ee})=>{const{commonStyles:me,logs:re,bottomContext:le}=(0,d.wW)(M),[pe,ee]=(0,c.useState)(0),[se,Q]=(0,c.useState)(0),G=(0,c.useRef)(null),q=(0,h.Z)(D),X=(0,h.Z)(pe),de=(0,h.Z)(se);(0,c.useLayoutEffect)(()=>{if(!K||!G.current)return;const He=q?.length??0,ue=de??0,Oe=X??0,Fe=G.current.parentElement;let Ie=0;Fe&&(Ie=Fe.scrollHeight-Fe.clientHeight,Q(Ie)),D.length>He&&Ie>ue&&ee(Oe+(Ie-ue))},[K,D,q,X,de]);const Be=()=>{G.current?.parentElement&&ee(G.current?.parentElement.scrollTop)},ke={row:F,rows:D,onLoadMoreContext:Z,canLoadMoreRows:z,groupPosition:ae,logsSortOrder:J,getLogRowContextUi:oe,runContextQuery:Ee};return c.createElement("div",{className:(0,t.cx)(me,j,ae==="bottom"?le:"")},K&&!Y&&c.createElement(x,{...ke}),c.createElement("div",{className:re},c.createElement(P.$,{autoHide:!0,onScroll:Be,scrollTop:pe,autoHeightMin:"210px"},c.createElement("div",{ref:G},!Y&&c.createElement(E.a,{items:D,renderItem:He=>c.createElement("div",{className:t.css`
                        padding: 5px 0;
                      `},typeof He=="string"&&v.QX.hasAnsiCodes(He)?c.createElement(p.Q,{value:He}):He)}),Y&&c.createElement(C.b,{title:Y})))),!K&&!Y&&c.createElement(x,{...ke}))},L=({row:F,context:D,errors:Y,onOutsideClick:j,onLoadMoreContext:K,runContextQuery:z,hasMoreContextRows:Z,wrapLogMessage:ae,logsSortOrder:J,getLogRowContextUi:oe})=>{(0,c.useEffect)(()=>{const se=Q=>{(Q.key==="Escape"||Q.key==="Esc")&&j("close_esc")};return document.addEventListener("keydown",se,!1),()=>{document.removeEventListener("keydown",se,!1)}},[j,F]);const{afterContext:Ee,beforeContext:me,title:re,top:le,actions:pe,width:ee}=(0,d.wW)(se=>M(se,ae));return c.createElement(b.L,{onClick:()=>j("close_outside_click")},c.createElement("div",{onClick:se=>se.stopPropagation()},D.after&&c.createElement(O,{rows:D.after,error:Y&&Y.after,row:F,className:(0,t.cx)(Ee,le,ee),shouldScrollToBottom:!0,canLoadMoreRows:Z?Z.after:!1,onLoadMoreContext:K,groupPosition:"top",logsSortOrder:J,getLogRowContextUi:oe,runContextQuery:z}),D.before&&c.createElement(O,{onLoadMoreContext:K,canLoadMoreRows:Z?Z.before:!1,row:F,rows:D.before,error:Y&&Y.before,className:(0,t.cx)(me,ee),groupPosition:"bottom",logsSortOrder:J}),c.createElement("div",{className:(0,t.cx)(re,ee)},c.createElement("h5",null,"Log context"),c.createElement("div",{className:pe},c.createElement(m.h,{size:"lg",name:"times",onClick:()=>j("close_button")})))))};var B=e(34282);const w=1e5,R=(F,D,Y)=>{const j=f()(F.components.dashboard.background).setAlpha(.7).toRgbString();return{positionRelative:t.css`
      label: positionRelative;
      position: relative;
    `,rowWithContext:t.css`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${j};
      display: inherit;
    `,horizontalScroll:t.css`
      label: horizontalScroll;
      white-space: pre;
    `,contextNewline:t.css`
      display: block;
      margin-left: 0px;
    `,rowMenu:t.css`
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-content: flex-end;
      justify-content: space-evenly;
      align-items: center;
      position: absolute;
      top: 0;
      bottom: auto;
      height: ${F.spacing(4.5)};
      background: ${F.colors.background.primary};
      box-shadow: ${F.shadows.z3};
      padding: ${F.spacing(0,0,0,.5)};
      z-index: 100;
      visibility: hidden;
      width: ${D?F.spacing(10):F.spacing(5)};
    `,logRowMenuCell:t.css`
      position: absolute;
      right: ${Y?`calc(75px + ${F.spacing()} + ${D?"80px":"40px"})`:"40px"};
      margin-top: -${F.spacing(.125)};
    `,logLine:t.css`
      background-color: transparent;
      border: none;
      diplay: inline;
      font-family: ${F.typography.fontFamilyMonospace};
      font-size: ${F.typography.bodySmall.fontSize};
      letter-spacing: ${F.typography.bodySmall.letterSpacing};
      text-align: left;
      padding: 0;
      user-select: text;
    `}};function A(F,D,Y,j){const K=Y&&Y.length>0&&Y[0]&&Y[0].length>0&&D.length<w,z=Y??[];if(F){const Z=K?{searchWords:z,highlightClassName:j}:void 0;return c.createElement(p.Q,{value:D,highlight:Z})}else return K?c.createElement(r(),{textToHighlight:D,searchWords:z,findChunks:o.Xt,highlightClassName:j}):D}const U=(0,n.Z)((F,D)=>{if(D)try{return JSON.stringify(JSON.parse(F),void 0,2)}catch{return F}return F});class I extends c.PureComponent{constructor(){super(...arguments),this.logRowRef=c.createRef(),this.onContextToggle=D=>{D.stopPropagation(),this.props.onToggleContext("open")},this.onShowContextClick=D=>{const{scrollElement:Y}=this.props;this.onContextToggle(D),Y&&this.logRowRef.current&&Y.scroll({behavior:"smooth",top:Y.scrollTop+this.logRowRef.current.getBoundingClientRect().top-window.innerHeight/2})}}render(){const{row:D,theme:Y,errors:j,hasMoreContextRows:K,updateLimit:z,runContextQuery:Z,context:ae,contextIsOpen:J,showRowMenu:oe,wrapLogMessage:Ee,prettifyLogMessage:me,onToggleContext:re,app:le,logsSortOrder:pe,showContextToggle:ee,getLogRowContextUi:se}=this.props,Q=(0,B.h)(Y,D.logLevel),{hasAnsi:G,raw:q}=D,X=U(q,me),de=ee?ee(D):!1,Be=R(Y,de,le===l.zj.Explore);return c.createElement(c.Fragment,null,c.createElement("td",{ref:this.logRowRef,style:J?{position:"unset"}:void 0,className:Q.logsRowMessage},c.createElement("div",{className:(0,t.cx)({[Be.positionRelative]:Ee},{[Be.horizontalScroll]:!Ee})},J&&ae&&c.createElement(L,{row:D,getLogRowContextUi:se,runContextQuery:Z,context:ae,errors:j,wrapLogMessage:Ee,hasMoreContextRows:K,onOutsideClick:re,logsSortOrder:pe,onLoadMoreContext:()=>{z&&z()}}),c.createElement("button",{className:(0,t.cx)(Be.logLine,Be.positionRelative,{[Be.rowWithContext]:J})},A(G,X,D.searchWords,Q.logsRowMatchHighLight)))),oe&&c.createElement("td",{className:(0,t.cx)("log-row-menu-cell",Be.logRowMenuCell)},c.createElement("span",{className:(0,t.cx)("log-row-menu",Be.rowMenu),onClick:ke=>ke.stopPropagation()},de&&c.createElement(a.u,{placement:"top",content:"Show context"},c.createElement(m.h,{size:"md",name:"gf-show-context",onClick:this.onShowContextClick})),c.createElement(a.u,{placement:"top",content:"Copy"},c.createElement(m.h,{size:"md",name:"copy",onClick:()=>navigator.clipboard.writeText(X)})))))}}const N=(0,d.HE)(I);N.displayName="LogRowMessage"},28947:(H,T,e)=>{"use strict";e.d(T,{w:()=>me});var t=e(58635),n=e(68404),c=e(90595),s=e(72648),r=e(81042),g=e(52423),f=e(38849),o=e(41818),l=e(85419),a=e(61860),m=e(39904),d=e(82897),p=e(64319),h=e(8125),y=e(94599),v=e(89719),i=e(7804);const u=re=>({logsStatsRow:g.css`
    label: logs-stats-row;
    margin: ${parseInt(re.spacing(2),10)/1.75}px 0;
  `,logsStatsRowActive:g.css`
    label: logs-stats-row--active;
    color: ${re.colors.primary.text};
    position: relative;
  `,logsStatsRowLabel:g.css`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:g.css`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:g.css`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: ${re.spacing(.75)};
  `,logsStatsRowPercent:g.css`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: ${re.spacing(.75)};
    width: ${re.spacing(4.5)};
  `,logsStatsRowBar:g.css`
    label: logs-stats-row__bar;
    height: ${re.spacing(.5)};
    overflow: hidden;
    background: ${re.colors.text.disabled};
  `,logsStatsRowInnerBar:g.css`
    label: logs-stats-row__innerbar;
    height: ${re.spacing(.5)};
    overflow: hidden;
    background: ${re.colors.primary.main};
  `}),P=({active:re,count:le,proportion:pe,value:ee})=>{const se=(0,s.wW)(u),Q=`${Math.round(pe*100)}%`,G={width:Q},q=re?(0,g.cx)([se.logsStatsRow,se.logsStatsRowActive]):(0,g.cx)([se.logsStatsRow]);return n.createElement("div",{className:q},n.createElement("div",{className:(0,g.cx)([se.logsStatsRowLabel])},n.createElement("div",{className:(0,g.cx)([se.logsStatsRowValue]),title:ee},ee),n.createElement("div",{className:(0,g.cx)([se.logsStatsRowCount])},le),n.createElement("div",{className:(0,g.cx)([se.logsStatsRowPercent])},Q)),n.createElement("div",{className:(0,g.cx)([se.logsStatsRowBar])},n.createElement("div",{className:(0,g.cx)([se.logsStatsRowInnerBar]),style:G})))};P.displayName="LogLabelStatsRow";const E=5,C=(0,i.B)(re=>({logsStats:g.css`
      label: logs-stats;
      background: inherit;
      color: ${re.colors.text.primary};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:g.css`
      label: logs-stats__header;
      border-bottom: 1px solid ${re.colors.border.medium};
      display: flex;
    `,logsStatsTitle:g.css`
      label: logs-stats__title;
      font-weight: ${re.typography.fontWeightMedium};
      padding-right: ${re.spacing(2)};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:g.css`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:g.css`
      label: logs-stats__body;
      padding: 5px 0px;
    `}));class b extends n.PureComponent{render(){const{label:le,rowCount:pe,stats:ee,value:se,theme:Q,isLabel:G}=this.props,q=C(Q),X=ee.slice(0,E);let de=X.find(Ie=>Ie.value===se),Be=ee.slice(E);const ke=!de;ke&&(de=Be.find(Ie=>Ie.value===se),Be=Be.filter(Ie=>Ie.value!==se));const He=Be.reduce((Ie,we)=>Ie+we.count,0),Oe=X.reduce((Ie,we)=>Ie+we.count,0)+He,Fe=He/Oe;return n.createElement("div",{className:q.logsStats,"data-testid":"logLabelStats"},n.createElement("div",{className:q.logsStatsHeader},n.createElement("div",{className:q.logsStatsTitle},le,": ",Oe," of ",pe," rows have that ",G?"label":"field")),n.createElement("div",{className:q.logsStatsBody},X.map(Ie=>n.createElement(P,{key:Ie.value,...Ie,active:Ie.value===se})),ke&&de&&n.createElement(P,{key:de.value,...de,active:!0}),He>0&&n.createElement(P,{key:"__OTHERS__",count:He,value:"Other",proportion:Fe})))}}const S=(0,s.HE)(b);S.displayName="LogLabelStats";var M=e(34282);const x=(0,t.Z)((re,le)=>{const pe=g.css`
    color: ${re.colors.text.secondary};
    background-color: ${re.colors.background.primary};

    &:hover {
      color: ${re.colors.text.primary};
      background: ${re.colors.background.secondary};
    }
  `,ee=g.css`
    color: ${re.colors.text.secondary};
    background-color: transparent;
    border-color: transparent;

    &:hover {
      color: ${re.colors.text.primary};
      background: ${re.colors.background.secondary};
    }
  `,se=g.css`
    color: ${re.v1.palette.orangeDark};
    border-color: ${re.v1.palette.orangeDark};
    background-color: transparent;

    &:hover {
      color: ${re.colors.text.primary};
      background: ${re.colors.emphasize(re.colors.background.canvas,.03)};
    }
  `,Q=re.flags.topnav?ee:pe;return{noHoverBackground:g.css`
      label: noHoverBackground;
      :hover {
        background-color: transparent;
      }
    `,hoverCursor:g.css`
      label: hoverCursor;
      cursor: pointer;
    `,wordBreakAll:g.css`
      label: wordBreakAll;
      word-break: break-all;
    `,showingField:g.css`
      color: ${re.colors.primary.text};
    `,copyButton:g.css`
      & > button {
        color: ${re.colors.text.secondary};
        padding: 0;
        justify-content: center;
        border-radius: 50%;
        height: ${re.spacing(re.components.height.sm)};
        width: ${re.spacing(re.components.height.sm)};
        svg {
          margin: 0;
        }

        span > div {
          top: -5px;
          & button {
            color: ${re.colors.success.main};
          }
        }
      }
    `,wrapLine:g.css`
      label: wrapLine;
      white-space: pre-wrap;
    `,toolbarButtonRow:g.css`
      label: toolbarButtonRow;
      gap: ${re.spacing(.5)};

      max-width: calc(3 * ${re.spacing(re.components.height.sm)});
      & > div {
        height: ${re.spacing(re.components.height.sm)};
        width: ${re.spacing(re.components.height.sm)};
        & > button {
          border: 0;
          background-color: transparent;
          height: inherit;

          &:hover {
            box-shadow: none;
            border-radius: 50%;
          }
        }
      }
      & div:last-child > button:not(.stats-button) {
        ${le?se:Q};
      }
    `,logDetailsStats:g.css`
      padding: 0 ${re.spacing(1)};
    `,logDetailsValue:g.css`
      display: table-cell;
      vertical-align: middle;
      line-height: 22px;

      .show-on-hover {
        display: inline;
        visibility: hidden;
      }
      &:hover {
        .show-on-hover {
          visibility: visible;
        }
      }
    `}});class O extends n.PureComponent{constructor(){super(...arguments),this.state={showFieldsStats:!1,fieldCount:0,fieldStats:null},this.showField=()=>{const{onClickShowField:le,parsedKey:pe,row:ee}=this.props;le&&le(pe),(0,o.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:ee.datasourceType,logRowUid:ee.uid,type:"enable"})},this.hideField=()=>{const{onClickHideField:le,parsedKey:pe,row:ee}=this.props;le&&le(pe),(0,o.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:ee.datasourceType,logRowUid:ee.uid,type:"disable"})},this.filterLabel=()=>{const{onClickFilterLabel:le,parsedKey:pe,parsedValue:ee,row:se}=this.props;le&&le(pe,ee),(0,o.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:se.datasourceType,filterType:"include",logRowUid:se.uid})},this.filterOutLabel=()=>{const{onClickFilterOutLabel:le,parsedKey:pe,parsedValue:ee,row:se}=this.props;le&&le(pe,ee),(0,o.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:se.datasourceType,filterType:"exclude",logRowUid:se.uid})},this.updateStats=()=>{const{getStats:le}=this.props,pe=le(),ee=pe?pe.reduce((se,Q)=>se+Q.count,0):0;(!(0,d.isEqual)(this.state.fieldStats,pe)||ee!==this.state.fieldCount)&&this.setState({fieldStats:pe,fieldCount:ee})},this.showStats=()=>{const{isLabel:le,row:pe,app:ee}=this.props,{showFieldsStats:se}=this.state;se||this.updateStats(),this.toggleFieldsStats(),(0,o.ff)("grafana_explore_logs_log_details_stats_clicked",{dataSourceType:pe.datasourceType,fieldType:le?"label":"detectedField",type:se?"close":"open",logRowUid:pe.uid,app:ee})}}componentDidUpdate(){this.state.showFieldsStats&&this.updateStats()}toggleFieldsStats(){this.setState(le=>({showFieldsStats:!le.showFieldsStats}))}render(){const{theme:le,parsedKey:pe,parsedValue:ee,isLabel:se,links:Q,displayedFields:G,wrapLogMessage:q,onClickFilterLabel:X,onClickFilterOutLabel:de}=this.props,{showFieldsStats:Be,fieldStats:ke,fieldCount:He}=this.state,ue=G?.includes(pe)||Be,Oe=x(le,ue),Fe=(0,M.h)(le),Ie=X&&de,we=G&&G.includes(pe)?n.createElement(p.h,{variant:"active",tooltip:"Hide this field",iconOnly:!0,narrow:!0,icon:"eye",onClick:this.hideField}):n.createElement(p.h,{tooltip:"Show this field instead of the message",iconOnly:!0,narrow:!0,icon:"eye",onClick:this.showField});return n.createElement(n.Fragment,null,n.createElement("tr",{className:(0,g.cx)(Fe.logDetailsValue)},n.createElement("td",{className:Fe.logsDetailsIcon},n.createElement(h.R,{alignment:"left",className:Oe.toolbarButtonRow},Ie&&n.createElement(p.h,{iconOnly:!0,narrow:!0,icon:"search-plus",tooltip:"Filter for value",onClick:this.filterLabel}),Ie&&n.createElement(p.h,{iconOnly:!0,narrow:!0,icon:"search-minus",tooltip:"Filter out value",onClick:this.filterOutLabel}),G&&we,n.createElement(p.h,{iconOnly:!0,variant:Be?"active":"default",narrow:!0,icon:"signal",tooltip:"Ad-hoc statistics",className:"stats-button",onClick:this.showStats}))),n.createElement("td",{className:Fe.logDetailsLabel},pe),n.createElement("td",{className:(0,g.cx)(Oe.wordBreakAll,q&&Oe.wrapLine)},n.createElement("div",{className:Oe.logDetailsValue},ee,n.createElement("div",{className:(0,g.cx)("show-on-hover",Oe.copyButton)},n.createElement(y.m,{getText:()=>ee,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"md"})),Q?.map(Re=>n.createElement("span",{key:Re.title},"\xA0",n.createElement(v.k,{link:Re})))))),Be&&n.createElement("tr",null,n.createElement("td",null,n.createElement(h.R,{alignment:"left",className:Oe.toolbarButtonRow},n.createElement(p.h,{iconOnly:!0,variant:Be?"active":"default",narrow:!0,icon:"signal",tooltip:"Hide ad-hoc statistics",onClick:this.showStats}))),n.createElement("td",{colSpan:2},n.createElement("div",{className:Oe.logDetailsStats},n.createElement(S,{stats:ke,label:pe,value:ee,rowCount:He,isLabel:se})))))}}const L=(0,s.HE)(O);L.displayName="LogDetailsRow";var B=e(35160);const w=re=>({logsRowLevelDetails:g.css`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:g.css`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${re.colors.background.primary};
      }
    `});class R extends n.PureComponent{render(){const{app:le,row:pe,theme:ee,hasError:se,onClickFilterOutLabel:Q,onClickFilterLabel:G,getRows:q,showDuplicates:X,className:de,onClickShowField:Be,onClickHideField:ke,displayedFields:He,getFieldLinks:ue,wrapLogMessage:Oe}=this.props,Fe=(0,M.h)(ee,pe.logLevel),Ie=w(ee),we=pe.labels?pe.labels:{},Re=Object.keys(we).length>0,_e=(0,B.Y)(pe,ue),et=_e.filter(Xe=>Xe.links?.length).sort(),qe=_e.filter(Xe=>Xe.links?.length===0).sort(),Je=qe&&qe.length>0,lt=et&&et.length>0,at=(0,g.cx)(!se&&[Fe.logsRowLevel,Ie.logsRowLevelDetails]);return n.createElement("tr",{className:(0,g.cx)(de,Ie.logDetails)},X&&n.createElement("td",null),n.createElement("td",{className:at,"aria-label":"Log level"}),n.createElement("td",{colSpan:4},n.createElement("div",{className:Fe.logDetailsContainer},n.createElement("table",{className:Fe.logDetailsTable},n.createElement("tbody",null,(Re||Je)&&n.createElement("tr",null,n.createElement("td",{colSpan:100,className:Fe.logDetailsHeading,"aria-label":"Fields"},"Fields")),Object.keys(we).sort().map(Xe=>{const gt=we[Xe];return n.createElement(L,{key:`${Xe}=${gt}`,parsedKey:Xe,parsedValue:gt,isLabel:!0,getStats:()=>(0,r.lL)(q(),Xe),onClickFilterOutLabel:Q,onClickFilterLabel:G,onClickShowField:Be,onClickHideField:ke,row:pe,app:le,wrapLogMessage:Oe,displayedFields:He})}),qe.map(Xe=>{const{key:gt,value:ot,fieldIndex:Ye}=Xe;return n.createElement(L,{key:`${gt}=${ot}`,parsedKey:gt,parsedValue:ot,onClickShowField:Be,onClickHideField:ke,onClickFilterOutLabel:Q,onClickFilterLabel:G,getStats:()=>(0,r.i6)(pe.dataFrame.fields[Ye].values.toArray()),displayedFields:He,wrapLogMessage:Oe,row:pe,app:le})}),lt&&n.createElement("tr",null,n.createElement("td",{colSpan:100,className:Fe.logDetailsHeading,"aria-label":"Data Links"},"Links")),et.map(Xe=>{const{key:gt,value:ot,links:Ye,fieldIndex:mt}=Xe;return n.createElement(L,{key:`${gt}=${ot}`,parsedKey:gt,parsedValue:ot,links:Ye,onClickShowField:Be,onClickHideField:ke,getStats:()=>(0,r.i6)(pe.dataFrame.fields[mt].values.toArray()),displayedFields:He,wrapLogMessage:Oe,row:pe,app:le})}),!Je&&!Re&&!lt&&n.createElement("tr",null,n.createElement("td",{colSpan:100,"aria-label":"No details"},"No details available")))))))}}const A=(0,s.HE)(R);A.displayName="LogDetails";var U=e(54972),I=e(50700),N=e(16911),F=e(71895);const D=async(re,le,pe,ee)=>{const se=[re(le,{limit:pe}),re(le,{limit:pe+1,direction:"FORWARD"})],Q=await Promise.all(se.map(X=>X.catch(de=>de))),G=Q.map(X=>{const de=X;if(!de.data)return[];const Be=[];for(let ke=0;ke<de.data.length;ke++){const He=(0,N.g0)(de.data[ke]),ue=new F.N(He),Oe=ue.getFieldByName("ts"),Fe=ue.getFieldByName("id");for(let Ie=0;Ie<Oe.values.length;Ie++){if(Fe){if(Fe.values.get(Ie)===le.uid)continue}else if(parseInt(Oe.values.get(Ie),10)===le.timeEpochMs)continue;const Re=He.fields.filter(_e=>_e.name==="line")[0].values.get(Ie);Be.length<pe&&Be.push(Re)}}return ee===c.UV.Ascending?Be.reverse():Be}),q=Q.map(X=>{const de=X;return de.message?de.message:""});return{data:ee===c.UV.Ascending?G.reverse():G,errors:ee===c.UV.Ascending?q.reverse():q}},Y=({getRowContext:re,row:le,children:pe,logsSortOrder:ee})=>{const[se,Q]=(0,n.useState)(10),[G,q]=(0,n.useState)(null),[X,de]=(0,n.useState)({before:!0,after:!0}),[Be,ke]=(0,n.useState)(),{value:He}=(0,I.Z)(async()=>await D(re,le,se,ee),[se]);return(0,n.useEffect)(()=>{ke(He)},[He]),(0,n.useEffect)(()=>{Be&&q(ue=>{if(!Be.doNotCheckForMore){let Oe=!0,Fe=!0;const Ie=ue?.data[0],we=ue?.data[1],Re=Be.data[0],_e=Be.data[1];ue&&(!Re||Ie.length===Re.length)&&(Oe=!1),ue&&(!_e||we.length===_e.length)&&(Fe=!1),de({before:Oe,after:Fe})}return Be})},[Be]),pe({result:{before:G?G.data[0]:[],after:G?G.data[1]:[]},errors:{before:G?G.errors[0]:void 0,after:G?G.errors[1]:void 0},hasMoreContextRows:X,updateLimit:()=>{Q(se+10);const{datasourceType:ue,uid:Oe}=le;(0,o.ff)("grafana_explore_logs_log_context_load_more_clicked",{datasourceType:ue,logRowUid:Oe,newLimit:se+10})},runContextQuery:async()=>{const ue=await D(re,le,se,ee);ue.doNotCheckForMore=!0,ke(ue)},limit:se,logsSortOrder:ee})};var j=e(48955);class K extends n.PureComponent{render(){const{row:le,showDetectedFields:pe,getFieldLinks:ee,wrapLogMessage:se}=this.props,Q=(0,B.Y)(le,ee),G=se?"":g.css`
          white-space: nowrap;
        `,q=pe.map(X=>{const de=Q.find(Be=>{const{key:ke}=Be;return ke===X});return de!=null?`${X}=${de.value}`:le.labels[X]!==void 0&&le.labels[X]!==null?`${X}=${le.labels[X]}`:null}).filter(X=>X!==null).join(" ");return n.createElement("td",{className:G},q)}}const z=(0,s.HE)(K);z.displayName="LogRowMessageDisplayedFields";const Z=re=>({topVerticalAlign:g.css`
      label: topVerticalAlign;
      margin-top: -${re.spacing(.9)};
      margin-left: -${re.spacing(.25)};
    `,detailsOpen:g.css`
      &:hover {
        background-color: ${l.hoverColor(re.colors.background.primary,re)};
      }
    `,errorLogRow:g.css`
      label: erroredLogRow;
      color: ${re.colors.text.secondary};
    `});class ae extends n.PureComponent{constructor(){super(...arguments),this.state={showContext:!1,showDetails:!1},this.toggleContext=le=>{const{datasourceType:pe,uid:ee}=this.props.row;(0,o.ff)("grafana_explore_logs_log_context_clicked",{datasourceType:pe,logRowUid:ee,type:le}),this.props.toggleContextIsOpen?.(),this.setState(se=>({showContext:!se.showContext}))},this.toggleDetails=()=>{this.props.enableLogDetails&&((0,o.ff)("grafana_explore_logs_log_details_clicked",{datasourceType:this.props.row.datasourceType,type:this.state.showDetails?"close":"open",logRowUid:this.props.row.uid,app:this.props.app}),this.setState(le=>({showDetails:!le.showDetails})))}}renderTimeStamp(le){return(0,f.dq)(le,{timeZone:this.props.timeZone})}renderLogRow(le,pe,ee,se,Q,G,q){const{getRows:X,onClickFilterLabel:de,onClickFilterOutLabel:Be,onClickShowField:ke,onClickHideField:He,enableLogDetails:ue,row:Oe,showDuplicates:Fe,showContextToggle:Ie,showRowMenu:we,showLabels:Re,showTime:_e,displayedFields:et,wrapLogMessage:qe,prettifyLogMessage:Je,theme:lt,getFieldLinks:at,forceEscape:Xe,onLogRowHover:gt,app:ot,scrollElement:Ye}=this.props,{showDetails:mt,showContext:ce}=this.state,be=(0,M.h)(lt,Oe.logLevel),Te=Z(lt),{errorMessage:Ke,hasError:ge}=(0,r.Mi)(Oe),Me=(0,g.cx)(be.logsRow,{[Te.errorLogRow]:ge,[be.contextBackground]:ce}),ye=Oe.hasUnescapedContent&&Xe?{...Oe,entry:(0,r.l3)(Oe.entry),raw:(0,r.l3)(Oe.raw)}:Oe;return n.createElement(n.Fragment,null,n.createElement("tr",{className:Me,onClick:this.toggleDetails,onMouseEnter:()=>{gt&&gt(Oe)},onMouseLeave:()=>{gt&&gt(void 0)}},Fe&&n.createElement("td",{className:be.logsRowDuplicates},ye.duplicates&&ye.duplicates>0?`${ye.duplicates+1}x`:null),n.createElement("td",{className:(0,g.cx)({[be.logsRowLevel]:!ge})},ge&&n.createElement(a.u,{content:`Error: ${Ke}`,placement:"right",theme:"error"},n.createElement(m.J,{className:be.logIconError,name:"exclamation-triangle",size:"xs"}))),ue&&n.createElement("td",{title:mt?"Hide log details":"See log details",className:be.logsRowToggleDetails},n.createElement(m.J,{className:Te.topVerticalAlign,name:mt?"angle-down":"angle-right"})),_e&&n.createElement("td",{className:be.logsRowLocalTime},this.renderTimeStamp(Oe.timeEpochMs)),Re&&ye.uniqueLabels&&n.createElement("td",{className:be.logsRowLabels},n.createElement(U.j,{labels:ye.uniqueLabels})),et&&et.length>0?n.createElement(z,{row:ye,showDetectedFields:et,getFieldLinks:at,wrapLogMessage:qe}):n.createElement(j.r,{row:ye,getRows:X,errors:pe,hasMoreContextRows:ee,getLogRowContextUi:G,runContextQuery:q,updateLimit:se,context:le,contextIsOpen:ce,showContextToggle:Ie,showRowMenu:we,wrapLogMessage:qe,prettifyLogMessage:Je,onToggleContext:this.toggleContext,app:ot,scrollElement:Ye,logsSortOrder:Q})),this.state.showDetails&&n.createElement(A,{className:Me,showDuplicates:Fe,getFieldLinks:at,onClickFilterLabel:de,onClickFilterOutLabel:Be,onClickShowField:ke,onClickHideField:He,getRows:X,row:ye,wrapLogMessage:qe,hasError:ge,displayedFields:et,app:ot}))}render(){const{showContext:le}=this.state,{logsSortOrder:pe,row:ee,getRowContext:se,getLogRowContextUi:Q}=this.props;return le?n.createElement(n.Fragment,null,n.createElement(Y,{row:ee,getRowContext:se,logsSortOrder:pe},({result:G,errors:q,hasMoreContextRows:X,updateLimit:de,runContextQuery:Be,logsSortOrder:ke})=>n.createElement(n.Fragment,null,this.renderLogRow(G,q,X,de,ke,Q,Be)))):this.renderLogRow()}}const J=(0,s.HE)(ae);J.displayName="LogRow";const oe=100;class Ee extends n.PureComponent{constructor(){super(...arguments),this.renderAllTimer=null,this.state={renderAll:!1,contextIsOpen:!1},this.toggleContextIsOpen=()=>{this.setState(le=>({contextIsOpen:!le.contextIsOpen}))},this.makeGetRows=(0,t.Z)(le=>()=>le),this.sortLogs=(0,t.Z)((le,pe)=>(0,r.$u)(le,pe))}componentDidMount(){const{logRows:le,previewLimit:pe}=this.props,se=(le?le.length:0)<=pe*2;se?this.setState({renderAll:se}):this.renderAllTimer=window.setTimeout(()=>this.setState({renderAll:!0}),2e3)}componentWillUnmount(){this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{dedupStrategy:le,showContextToggle:pe,showLabels:ee,showTime:se,wrapLogMessage:Q,prettifyLogMessage:G,logRows:q,deduplicatedRows:X,timeZone:de,onClickFilterLabel:Be,onClickFilterOutLabel:ke,theme:He,enableLogDetails:ue,previewLimit:Oe,getFieldLinks:Fe,logsSortOrder:Ie,displayedFields:we,onClickShowField:Re,onClickHideField:_e,forceEscape:et,onLogRowHover:qe,app:Je,scrollElement:lt,getLogRowContextUi:at}=this.props,{renderAll:Xe,contextIsOpen:gt}=this.state,{logsRowsTable:ot}=(0,M.h)(He),Ye=X||q,mt=q&&q.length>0,ce=Ye?Ye.reduce((he,De)=>De.duplicates?he+De.duplicates:he,0):0,be=le!==c.Y4.none&&ce>0,Te=Ye||[],Ke=Ie?this.sortLogs(Te,Ie):Te,ge=Ke.slice(0,Oe),Me=Ke.slice(Oe,Ke.length),ye=this.makeGetRows(Ke),fe=this.props.getRowContext?this.props.getRowContext:()=>Promise.resolve([]);return n.createElement("table",{className:ot},n.createElement("tbody",null,mt&&ge.map((he,De)=>n.createElement(J,{key:he.uid,getRows:ye,getRowContext:fe,getLogRowContextUi:at,row:he,showContextToggle:pe,showRowMenu:!gt,showDuplicates:be,showLabels:ee,showTime:se,displayedFields:we,wrapLogMessage:Q,prettifyLogMessage:G,timeZone:de,enableLogDetails:ue,onClickFilterLabel:Be,onClickFilterOutLabel:ke,onClickShowField:Re,onClickHideField:_e,getFieldLinks:Fe,logsSortOrder:Ie,forceEscape:et,toggleContextIsOpen:this.toggleContextIsOpen,onLogRowHover:qe,app:Je,scrollElement:lt})),mt&&Xe&&Me.map((he,De)=>n.createElement(J,{key:he.uid,getRows:ye,getRowContext:fe,getLogRowContextUi:at,row:he,showContextToggle:pe,showRowMenu:!gt,showDuplicates:be,showLabels:ee,showTime:se,displayedFields:we,wrapLogMessage:Q,prettifyLogMessage:G,timeZone:de,enableLogDetails:ue,onClickFilterLabel:Be,onClickFilterOutLabel:ke,onClickShowField:Re,onClickHideField:_e,getFieldLinks:Fe,logsSortOrder:Ie,forceEscape:et,toggleContextIsOpen:this.toggleContextIsOpen,onLogRowHover:qe,app:Je,scrollElement:lt})),mt&&!Xe&&n.createElement("tr",null,n.createElement("td",{colSpan:5},"Rendering ",Ke.length-Oe," rows..."))))}}Ee.defaultProps={previewLimit:oe};const me=(0,s.HE)(Ee);me.displayName="LogsRows"},34282:(H,T,e)=>{"use strict";e.d(T,{h:()=>s});var t=e(52423),n=e(90595),c=e(85419);const s=(r,g)=>{let f=r.isLight?r.v1.palette.gray5:r.v1.palette.gray2;const o=c.hoverColor(r.colors.background.secondary,r);switch(g){case n.in.crit:case n.in.critical:f="#705da0";break;case n.in.error:case n.in.err:f="#e24d42";break;case n.in.warning:case n.in.warn:f=r.colors.warning.main;break;case n.in.info:f="#7eb26d";break;case n.in.debug:f="#1f78c1";break;case n.in.trace:f="#6ed0e0";break}return{logsRowMatchHighLight:t.css`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${r.components.textHighlight.text}
      background-color: ${r.components.textHighlight};
    `,logsRowsTable:t.css`
      label: logs-rows;
      font-family: ${r.typography.fontFamilyMonospace};
      font-size: ${r.typography.bodySmall.fontSize};
      width: 100%;
    `,contextBackground:t.css`
      background: ${o};
    `,logsRow:t.css`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-menu {
          visibility: visible;
          z-index: 1;
        }

        background: ${o};
      }

      td:not(.log-row-menu-cell):last-child {
        width: 100%;
      }

      > td:not(.log-row-menu-cell) {
        position: relative;
        padding-right: ${r.spacing(1)};
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        height: 100%;
      }
    `,logsRowDuplicates:t.css`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logsRowLevel:t.css`
      label: logs-row__level;
      max-width: ${r.spacing(1.25)};
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: ${r.spacing(.5)};
        background-color: ${f};
      }
    `,logIconError:t.css`
      color: ${r.colors.warning.main};
    `,logsRowToggleDetails:t.css`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:t.css`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:t.css`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:t.css`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
      overflow-wrap: anywhere;
      width: 100%;
      text-align: left;
    `,logDetailsContainer:t.css`
      label: logs-row-details-table;
      border: 1px solid ${r.colors.border.medium};
      padding: 0 ${r.spacing(1)} ${r.spacing(1)};
      border-radius: ${r.shape.borderRadius(1.5)};
      margin: ${r.spacing(2.5)} ${r.spacing(1)} ${r.spacing(2.5)} ${r.spacing(2)};
      cursor: default;
    `,logDetailsTable:t.css`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:t.css`
      label: logs-row-details__icon;
      position: relative;
      color: ${r.v1.palette.gray3};
      padding-top: 1px;
      padding-bottom: 1px;
      padding-right: ${r.spacing(.75)};
    `,logDetailsLabel:t.css`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${r.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:t.css`
      label: logs-row-details__heading;
      font-weight: ${r.typography.fontWeightBold};
      padding: ${r.spacing(1)} 0 ${r.spacing(.5)};
    `,logDetailsValue:t.css`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${o};
      }
    `}}},35160:(H,T,e)=>{"use strict";e.d(T,{B:()=>s,Y:()=>c});var t=e(58635),n=e(14582);const c=(0,t.Z)((g,f)=>{const o=s(g,f);return Object.values(o)}),s=(0,t.Z)((g,f)=>g.dataFrame.fields.map((o,l)=>({...o,index:l})).filter((o,l)=>!r(o,l,g)).map(o=>{const l=f?f(o,g.rowIndex,g.dataFrame):[];return{key:o.name,value:o.values.get(g.rowIndex).toString(),links:l,fieldIndex:o.index}}));function r(g,f,o){if(g.name==="labels"&&g.type===n.fS.other||g.name==="id"||g.name==="tsNs"||o.entryFieldIndex===f)return!0;const l=o.dataFrame.fields.find(a=>a.type===n.fS.time);return!!(g.name===l?.name&&g.type===n.fS.time&&g.values.get(0)===l.values.get(0)||g.config.custom?.hidden||g.values.get(o.rowIndex)==null)}},81042:(H,T,e)=>{"use strict";e.d(T,{$u:()=>p,DA:()=>a,Di:()=>v,Mi:()=>h,ZO:()=>r,i6:()=>o,j0:()=>d,jx:()=>g,l3:()=>y,lL:()=>f});var t=e(82897),n=e.n(t),c=e(90595),s=e(35160);function r(i){if(!i)return c.in.unknown;let u=c.in.unknown,P;for(const E of Object.keys(c.in)){const b=new RegExp(`\\b${E}\\b`,"i").exec(i);b&&(P===void 0||b.index<P)&&(u=c.in[E],P=b.index)}return u}function g(i){const u=c.in[i.toString().toLowerCase()];return u||c.in.unknown}function f(i,u){const P=i.filter(b=>b.labels[u]!==void 0),E=P.length,C=(0,t.countBy)(P,b=>b.labels[u]);return l(C,E)}function o(i){const u=i.filter(E=>E!=null),P=(0,t.countBy)(u);return l(P,u.length)}const l=(i,u)=>(0,t.chain)(i).map((P,E)=>({count:P,value:E,proportion:P/u})).sortBy("count").reverse().value(),a=(i,u)=>i.timeEpochMs<u.timeEpochMs?-1:i.timeEpochMs>u.timeEpochMs?1:i.timeEpochNs<u.timeEpochNs?-1:i.timeEpochNs>u.timeEpochNs?1:0,m=(i,u)=>i.timeEpochMs>u.timeEpochMs?-1:i.timeEpochMs<u.timeEpochMs?1:i.timeEpochNs>u.timeEpochNs?-1:i.timeEpochNs<u.timeEpochNs?1:0,d=(i,u)=>{const P=i?p(i.rows,u):[];return i?{...i,rows:P}:{hasUniqueLabels:!1,rows:P}},p=(i,u)=>u===c.UV.Ascending?i.sort(a):i.sort(m),h=i=>i.labels.__error__?{hasError:!0,errorMessage:i.labels.__error__}:{hasError:!1},y=i=>i.replace(/\\r\\n|\\n|\\t|\\r/g,u=>u.slice(1)==="t"?"	":`
`);function v(i){return i.map(u=>{const P=(0,s.B)(u).reduce((E,C)=>(E[C.key]=C.value,E),{});return{line:u.entry,timestamp:u.timeEpochNs,fields:{...P,...u.labels}}})}},80600:(H,T,e)=>{"use strict";e.d(T,{H:()=>m});var t=e(68404),n=e(5191),c=e(31403),s=e(10655),r=e(52423),g=e(72648),f=e(98102);const o=({title:d})=>{const p=(0,g.wW)(a);return t.createElement(t.Fragment,null,t.createElement("p",{className:p.title},"Do you want to delete this public dashboard?"),t.createElement("p",{className:p.description},d?`This will delete the public dashboard for "${d}". Your dashboard will not be deleted.`:"Orphaned public dashboard will be deleted"))},l=({dashboardTitle:d,onConfirm:p,onDismiss:h})=>t.createElement(f.s,{isOpen:!0,body:t.createElement(o,{title:d}),onConfirm:p,onDismiss:h,title:"Delete",icon:"trash-alt",confirmText:"Delete"}),a=d=>({title:r.css`
    margin-bottom: ${d.spacing(1)};
  `,description:r.css`
    font-size: ${d.typography.bodySmall.fontSize};
  `}),m=({dashboard:d,publicDashboard:p,loader:h,children:y,onDismiss:v,...i})=>{const[u,{isLoading:P}]=(0,s.bS)(),E=(C,b)=>{u({dashboard:d,uid:C.uid,dashboardUid:C.dashboardUid}),b()};return t.createElement(n.JY,null,({showModal:C,hideModal:b})=>t.createElement(c.zx,{"aria-label":"Delete public dashboard",title:"Delete public dashboard",onClick:()=>C(l,{dashboardTitle:p.title,onConfirm:()=>E(p,b),onDismiss:()=>{v?v():b()}}),...i},P&&h?h:y))}},85385:(H,T,e)=>{"use strict";e.d(T,{t:()=>r});var t=e(29930);const n={FOLDER:"dash-folder",DASHBOARD:"dash-db"};class c extends Error{constructor(f,o){super(o),this.type=f}}class s{constructor(){this.rootName="general"}validateNewDashboardName(f,o){return this.validate(f,o,"A dashboard or a folder with the same name already exists")}validateNewFolderName(f){return this.validate(0,f,"A folder or dashboard in the general folder with the same name already exists")}async validate(f,o,l){o=(o||"").trim();const a=o.toLowerCase();if(o.length===0)throw new c("REQUIRED","Name is required");if(f===0&&a===this.rootName)throw new c("EXISTING","This is a reserved name and cannot be used for a folder.");const m=[];m.push(t.ae.search({type:n.FOLDER,folderIds:[f],query:o})),m.push(t.ae.search({type:n.DASHBOARD,folderIds:[f],query:o}));const d=await Promise.all(m);let p=[];d.length>0&&d[0].length>0&&(p=d[0]),d.length>1&&d[1].length>0&&(p=p.concat(d[1]));for(const h of p)if(a===h.title.toLowerCase())throw new c("EXISTING",l)}}const r=new s},50946:(H,T,e)=>{"use strict";e.d(T,{$j:()=>v,EW:()=>B,Fd:()=>C,L6:()=>M,Pb:()=>L,ZL:()=>O,ct:()=>u,iM:()=>w,nQ:()=>d,q_:()=>m,uC:()=>b,ys:()=>y});var t=e(83383),n=e(54899),c=e(37932),s=e(86647),r=e(659),g=e(60499),f=e(30992),o=e(86648),l=e(59096),a=e(24693);function m(A){return async U=>{try{U((0,a.AK)());const I=await(0,n.i)().get(`/api/gnet/dashboards/${A}`);U((0,a.S9)(I)),U(p(I.json)),U(h(I.json))}catch(I){U((0,a.eh)()),(0,n.kW)(I)&&U((0,r.$l)((0,g.t_)(I.data.message||I)))}}}function d(A){return async U=>{U((0,a.Nw)(A)),U(p(A)),U(h(A))}}function p(A){return U=>{if(A&&A.__inputs){const I=[];A.__inputs.forEach(N=>{const F={name:N.name,label:N.label,info:N.description,value:N.value,type:N.type,pluginId:N.pluginId,options:[]};N.type===a.n$.DataSource?i(N,F):F.info||(F.info="Specify a string constant"),I.push(F)}),U((0,a.Zc)(I))}}}function h(A){return async function(U){if(!A||!A.__elements)return;const I=[];for(const N of Object.values(A.__elements)){if(N.kind!==l.V.Panel)continue;const F=N.model,{type:D,description:Y}=F,{uid:j,name:K}=N,z={model:{model:F,uid:j,name:K,version:0,type:D,kind:l.V.Panel,description:Y},state:a.KQ.New};try{const Z=await(0,o.Mh)(j,!0);z.state=a.KQ.Exists,z.model=Z}catch(Z){if(Z.status!==404)throw Z}I.push(z)}U((0,a.C2)(I))}}function y(){return A=>{A((0,a.MO)())}}function v(A){return async(U,I)=>{const N=I().importDashboard.dashboard,F=I().importDashboard.inputs;let D=[];A.dataSources?.forEach((K,z)=>{const Z=F.dataSources[z];D.push({name:Z.name,type:Z.type,pluginId:Z.pluginId,value:K.uid})}),A.constants?.forEach((K,z)=>{const Z=F.constants[z];D.push({value:K,name:Z.name,type:Z.type})});const Y=await(0,n.i)().post("api/dashboards/import",{dashboard:{...N,title:A.title,uid:A.uid||N.uid},overwrite:!0,inputs:D,folderUid:A.folder.uid}),j=t.u.stripBaseFromUrl(Y.importedUrl);c.E1.push(j)}}const i=(A,U)=>{(0,s.F)().getList({pluginId:A.pluginId}).length===0?U.info="No data sources of type "+A.pluginName+" found":U.info||(U.info="Select a "+A.pluginName+" data source")};function u(A,U){const I=[];for(const N of A)I.push(E(P,!0,N,U));return R(I).then(N=>({totalCount:N.length,successCount:N.filter(F=>F.succeeded).length,alreadyInFolderCount:N.filter(F=>F.alreadyInFolder).length}))}async function P(A,U){const I=await(0,n.i)().get(`/api/dashboards/uid/${A}`);if((I.meta.folderUid===void 0||I.meta.folderUid===null)&&U.uid===""||I.meta.folderUid===U.uid)return{alreadyInFolder:!0};const N={dashboard:I.dashboard,folderUid:U.uid,overwrite:!1};try{return await b(N),{succeeded:!0}}catch(F){if((0,n.kW)(F)){if(F.data?.status!=="plugin-dashboard")return{succeeded:!1};F.isHandled=!0}N.overwrite=!0;try{return await b(N),{succeeded:!0}}catch{return{succeeded:!1}}}}function E(A,U,...I){return async N=>{try{const F=await A(...I);return Array.prototype.concat(N,[F])}catch(F){if(U)return N;throw F}}}function C(A,U){const I=[];for(const N of A)I.push(E(S,!0,N,!0));for(const N of U)I.push(E(w,!0,N,!0));return R(I)}function b(A){return f.H.ignoreNextSave(),(0,n.i)().post("/api/dashboards/db/",{dashboard:A.dashboard,message:A.message??"",overwrite:A.overwrite??!1,folderUid:A.folderUid})}function S(A,U){return(0,n.i)().delete(`/api/folders/${A}?forceDeleteRules=false`,void 0,{showSuccessAlert:U})}function M(A){return(0,n.i)().post("/api/folders",A)}const x=1e3;function O(A,U,I=!1){return(0,n.i)().get("/api/search",{query:A,type:"dash-folder",permission:U,accesscontrol:I,limit:x})}function L(A){return(0,n.i)().get(`/api/folders/${A}`)}function B(A){return(0,n.i)().get(`/api/folders/id/${A}`)}function w(A,U){return(0,n.i)().delete(`/api/dashboards/uid/${A}`,{showSuccessAlert:U})}function R(A){return A.reduce((U,I)=>Promise.resolve(U).then(I),[])}},24693:(H,T,e)=>{"use strict";e.d(T,{AK:()=>h,C2:()=>d,G7:()=>c,KQ:()=>r,MO:()=>o,Nw:()=>m,S9:()=>a,ZP:()=>v,Zc:()=>l,eh:()=>p,n$:()=>s,wg:()=>g});var t=e(32557),n=e(49922),c=(i=>(i[i.Gcom=0]="Gcom",i[i.Json=1]="Json",i))(c||{}),s=(i=>(i.DataSource="datasource",i.Constant="constant",i.LibraryPanel="libraryPanel",i))(s||{}),r=(i=>(i.New="new",i.Exists="exists",i.Different="different",i))(r||{});const g={meta:{updatedAt:"",orgName:""},dashboard:{},source:1,inputs:{},state:n.Gu.NotStarted},f=(0,t.oM)({name:"manageDashboards",initialState:g,reducers:{setGcomDashboard:(i,u)=>{i.dashboard={...u.payload.json,id:null},i.meta={updatedAt:u.payload.updatedAt,orgName:u.payload.orgName},i.source=0,i.state=n.Gu.Done},setJsonDashboard:(i,u)=>{i.dashboard={...u.payload,id:null},i.meta=g.meta,i.source=1,i.state=n.Gu.Done},clearDashboard:i=>{i.dashboard={},i.state=n.Gu.NotStarted},setInputs:(i,u)=>{i.inputs={dataSources:u.payload.filter(P=>P.type==="datasource"),constants:u.payload.filter(P=>P.type==="constant"),libraryPanels:[]}},setLibraryPanelInputs:(i,u)=>{i.inputs.libraryPanels=u.payload},fetchFailed:i=>{i.dashboard={},i.state=n.Gu.Error},fetchDashboard:i=>{i.state=n.Gu.Loading}}}),{clearDashboard:o,setInputs:l,setGcomDashboard:a,setJsonDashboard:m,setLibraryPanelInputs:d,fetchFailed:p,fetchDashboard:h}=f.actions,v={importDashboard:f.reducer}},2183:(H,T,e)=>{"use strict";e.d(T,{FV:()=>r,JE:()=>o,Q$:()=>g,RF:()=>s,Yi:()=>f});var t=e(54899),n=e(659),c=e(17283);function s(l={getBackendSrv:t.i}){return async a=>{const m=await l.getBackendSrv().get("/api/org");return a((0,c.jR)(m)),m}}function r(l={getBackendSrv:t.i}){return async(a,m)=>{const d=m().organization.organization;await l.getBackendSrv().put("/api/org",{name:d.name}),a((0,n.H7)(d.name)),a(s(l))}}function g(l,a={getBackendSrv:t.i}){return async m=>{const d=await a.getBackendSrv().post("/api/user/using/"+l);m((0,n.H7)(d.name))}}function f(l,a={getBackendSrv:t.i}){return async m=>{const d=await a.getBackendSrv().post("/api/orgs/",l);m(g(d.orgId))}}function o(l={getBackendSrv:t.i}){return async a=>{const m=await l.getBackendSrv().get("/api/user/orgs");return a((0,c.IM)(m)),m}}},17283:(H,T,e)=>{"use strict";e.d(T,{IM:()=>g,ZP:()=>o,jR:()=>r,xR:()=>s});var t=e(32557);const n={organization:{},userOrgs:[]},c=(0,t.oM)({name:"organization",initialState:n,reducers:{organizationLoaded:(l,a)=>({...l,organization:a.payload}),setOrganizationName:(l,a)=>({...l,organization:{...l.organization,name:a.payload}}),userOrganizationsLoaded:(l,a)=>({...l,userOrgs:a.payload})}}),{setOrganizationName:s,organizationLoaded:r,userOrganizationsLoaded:g}=c.actions,o={organization:c.reducer}},51927:(H,T,e)=>{"use strict";e.d(T,{Z:()=>y});var t=e(52423),n=e(68404),c=e(20251),s=e(40400),r=e(72648),g=e(60325),f=e(52822),o=e(84952),l=e(58379),a=e(36281),m=e(16200),d=e(9398),p=e(81168),h=e(32294);function y(u){const P=(0,r.wW)(i),E=(0,g.R9)(),C=new c.mi(u.data),{dataSummary:b}=C,S=v(u,b),M=(0,p.useDispatch)(),x=()=>{l.Z.setObject(o.FL,m.Ok.Suggestions),M((0,a.g_)(!0))},O=()=>{const L=(0,d.h4)().getCurrent()?.getPanelById(u.panelId);L&&M((0,h.Kc)({panel:L,pluginId:"table"}))};return n.createElement("div",{className:P.wrapper},n.createElement("div",{className:P.message},S),E.app===s.zj.PanelEditor&&b.hasData&&n.createElement("div",{className:P.actions},n.createElement(f.x,{icon:"table",onClick:O},"Switch to table"),n.createElement(f.x,{icon:"chart-line",onClick:x},"Open visualization suggestions")))}function v({data:u,fieldConfig:P,message:E,needsNumberField:C,needsTimeField:b,needsStringField:S},M){return E||(!u.series||u.series.length===0||u.series.length===1&&u.series[0].length===0?P?.defaults.noValue??"No data":S&&!M.hasStringField?"Data is missing a string field":C&&!M.hasNumberField?"Data is missing a number field":b&&!M.hasTimeField?"Data is missing a time field":"Cannot visualize data")}const i=u=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"}),message:(0,t.css)({textAlign:"center",color:u.colors.text.secondary,fontSize:u.typography.size.lg,width:"100%"}),actions:(0,t.css)({marginTop:u.spacing(2),display:"flex",height:"50%",maxHeight:"150px",columnGap:u.spacing(1),rowGap:u.spacing(1),width:"100%",maxWidth:"600px"})})},35974:(H,T,e)=>{"use strict";e.d(T,{F:()=>f,X:()=>o});var t=e(68404),n=e(48513),c=e(24699),s=e(45253),r=e(81168);class g extends t.PureComponent{constructor(a){super(a)}render(){const a={display:"flex",alignItems:"center",justifyContent:"center",height:"100%"};return t.createElement("div",{style:a},t.createElement(s.b,{severity:r.AppNotificationSeverity.Error,...this.props}))}}function f(l,a){const m=class extends t.PureComponent{render(){const h=t.createElement(t.Fragment,null,"Check the server startup logs for more information. ",t.createElement("br",null),"If this plugin was loaded from Git, then make sure it was compiled.");return t.createElement(g,{title:`Error loading: ${l.id}`,text:h})}},d=new n.c(m);return d.meta=l,d.loadError=!0,d}function o(l,a){const m=class extends t.PureComponent{render(){return t.createElement(g,{title:`Panel plugin not found: ${l}`})}},d=new n.c(a?()=>null:m);return d.meta={id:l,name:l,sort:100,type:c.zV.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},d}},98141:(H,T,e)=>{"use strict";e.d(T,{$:()=>d});var t=e(68404),n=e(99919),c=e(36998),s=e(20231),r=e(2118),g=e(40885),f=e(72648),o=e(53546),l=e(77582),a=e(38490);const m={defaults:{},overrides:[]};function d(h){const{pluginId:y,data:v,timeZone:i=(0,n.Z)(),options:u={},width:P,height:E,title:C,onOptionsChange:b=()=>{},onChangeTimeRange:S=()=>{},onFieldConfigChange:M=()=>{},fieldConfig:x=m}=h,O=(0,f.l4)(),L=(0,g.J)(),B=(0,t.useMemo)(()=>L.replace.bind(L),[L]),[w,R]=(0,t.useState)((0,a.q1)(y)),[A,U]=(0,t.useState)(),I=p(w,u,x),N=(0,c.Cc)(w,I?.fieldConfig,v,i,O,B);if((0,t.useEffect)(()=>{w&&w.hasPluginId(y)||(0,a.Ub)(y).then(D=>R(D)).catch(D=>{U(D.message)})},[y,w]),A)return t.createElement("div",null,"Failed to load plugin: ",A);if(!w||!w.hasPluginId(y))return t.createElement("div",null,"Loading plugin panel...");if(!w.panel)return t.createElement("div",null,"Seems like the plugin you are trying to load does not have a panel component.");if(!N)return t.createElement("div",null,"No panel data");const F=w.panel;return t.createElement(o.z4,{dependencies:[w,v]},t.createElement(s.b,{meta:w.meta},t.createElement(F,{id:1,data:N,title:C,timeRange:N.timeRange,timeZone:i,options:I.options,fieldConfig:x,transparent:!1,width:P,height:E,renderCounter:0,replaceVariables:D=>D,onOptionsChange:b,onFieldConfigChange:M,onChangeTimeRange:S,eventBus:l.h$})))}function p(h,y,v){return(0,t.useMemo)(()=>{if(h)return(0,r.d4)({plugin:h,currentOptions:y,currentFieldConfig:v,isAfterPluginChange:!1})},[h,v,y])}},69600:(H,T,e)=>{"use strict";e.d(T,{H:()=>g,n:()=>r});var t=e(16911),n=e(20112),c=e(94847),s=e(64703);const r=f=>{const o=f.field.links;if(!(!o||o.length===0))return{getLinks:l=>{const a={};if(f.view){const{dataFrame:d}=f.view;a.__series={value:{name:d.name,refId:d.refId},text:"Series"};const p=f.colIndex!==void 0?d.fields[f.colIndex]:void 0;if(p){if(a.__field={value:{name:p.name,labels:p.labels},text:"Field"},f.rowIndex!==void 0&&f.rowIndex>=0){const{timeField:h}=(0,t.sV)(d);a.__value={value:{raw:p.values.get(f.rowIndex),numeric:f.display.numeric,text:(0,n.zc)(f.display),time:h?h.values.get(f.rowIndex):void 0},text:"Value"}}f.view&&(a.__data={value:{name:d.name,refId:d.refId,fields:(0,c.z)({frame:d,rowIndex:f.rowIndex})},text:"Data"})}else a.__value={value:{raw:f.display.numeric,numeric:f.display.numeric,text:(0,n.zc)(f.display),calc:f.name},text:"Value"}}else console.log("VALUE",f);const m=(d,p,h)=>{const y={...a,...p};return l(d,y,h)};return o.map(d=>(0,s.Bq)().getDataLinkUIModel(d,m,f))}}},g=f=>{const o=f.links;if(!(!o||o.length===0))return{getLinks:()=>o.map(l=>(0,s.Bq)().getDataLinkUIModel(l,f.replaceVariables,f))}}},64703:(H,T,e)=>{"use strict";e.d(T,{Bq:()=>L,PR:()=>P,PW:()=>b});var t=e(82897),n=e.n(t),c=e(89029),s=e(28151),r=e(89890),g=e(14582),f=e(83383),o=e(8928),l=e(27677),a=e(99227),m=e(40885),d=e(47694),p=e(19349),h=e(69155);const y=[{value:`${c.W.keepTime}`,label:"Time range",documentation:"Adds current time range",origin:s.L.BuiltIn},{value:`${c.W.timeRangeFrom}`,label:"Time range: from",documentation:"Adds current time range's from value",origin:s.L.BuiltIn},{value:`${c.W.timeRangeTo}`,label:"Time range: to",documentation:"Adds current time range's to value",origin:s.L.BuiltIn}],v=[{value:`${c.W.seriesName}`,label:"Name",documentation:"Name of the series",origin:s.L.Series}],i=[{value:`${c.W.valueNumeric}`,label:"Numeric",documentation:"Numeric representation of selected value",origin:s.L.Value},{value:`${c.W.valueText}`,label:"Text",documentation:"Text representation of selected value",origin:s.L.Value},{value:`${c.W.valueRaw}`,label:"Raw",documentation:"Raw value",origin:s.L.Value}],u=B=>B.includes(".")||B.trim().includes(" ")?`["${B}"]`:`.${B}`,P=()=>[...(0,m.J)().getVariables().map(B=>({value:B.name,label:B.name,origin:s.L.Template})),{value:`${c.W.includeVars}`,label:"All variables",documentation:"Adds current variables",origin:s.L.Template},...y],E=B=>{const w=[];for(const A of B)for(const U of A.fields)if(U.labels)for(const I of Object.keys(U.labels))w.push(I);const R=(0,t.chain)(w).flatten().uniq().value();return[{value:`${c.W.fieldName}`,label:"Name",documentation:"Field name of the clicked datapoint (in ms epoch)",origin:s.L.Field},...R.map(A=>({value:`__field.labels${u(A)}`,label:`labels.${A}`,documentation:`${A} label value`,origin:s.L.Field}))]},C=B=>{let w,R;const A=[],U={};if(B.length!==1)return[];const I=B[0];for(const N of I.fields){const F=(0,r.C)(N,I,B);U[F]||(A.push({value:`__data.fields${u(F)}`,label:`${F}`,documentation:`Formatted value for ${F} on the same row`,origin:s.L.Fields}),U[F]=!0,!w&&N.type===g.fS.number&&(w={...N,name:F}),!R&&N.config.displayName&&N.config.displayName!==N.name&&(R={...N,name:F}))}return A.length&&A.push({value:"__data.fields[0]",label:"Select by index",documentation:"Enter the field order",origin:s.L.Fields}),w&&(A.push({value:`__data.fields${u(w.name)}.numeric`,label:"Show numeric value",documentation:"the numeric field value",origin:s.L.Fields}),A.push({value:`__data.fields${u(w.name)}.text`,label:"Show text value",documentation:"the text value",origin:s.L.Fields})),R&&A.push({value:`__data.fields${u(R.name)}`,label:"Select by title",documentation:"Use the title to pick the field",origin:s.L.Fields}),A},b=(B,w)=>{const R={value:`${c.W.valueTime}`,label:"Time",documentation:"Time value of the clicked datapoint (in ms epoch)",origin:s.L.Value};return w===s.o.Values?[...v,...E(B),...i,R,...C(B),...P()]:[...v,...E(B),...C(B),...P()]},S=B=>{const w=E(B),R={value:`${DataLinkBuiltInVars.valueCalc}`,label:"Calculation name",documentation:"Name of the calculation the value is a result of",origin:VariableOrigin.Value};return[...v,...w,...i,R,...P()]};class M{constructor(){this.getDataLinkUIModel=(w,R,A)=>{let U=w.url;w.onBuildUrl&&(U=w.onBuildUrl({origin:A,replaceVariables:R}));const I={href:f.u.assureBaseUrl(U.replace(/\n/g,"")),title:w.title??"",target:w.targetBlank?"_blank":void 0,origin:A};return R&&(I.href=R(I.href),I.title=R(w.title)),w.onClick&&(I.onClick=N=>{w.onClick({origin:A,replaceVariables:R,e:N})}),I.href=(0,d.iE)().disableSanitizeHtml?I.href:o.QX.sanitizeUrl(I.href),I}}getLinkUrl(w){let R=f.u.assureBaseUrl((0,m.J)().replace(w.url||"")),A={};if(w.keepTime){const U=(0,p.$t)().timeRangeForUrl();A.from=U.from,A.to=U.to}return w.includeVars&&(A={...A,...(0,h.c)()}),R=l.Cj.appendQueryToUrl(R,l.Cj.toUrlParams(A)),(0,d.iE)().disableSanitizeHtml?R:o.QX.sanitizeUrl(R)}getAnchorInfo(w){const R=(0,m.J)(),A={};return A.href=this.getLinkUrl(w),A.title=R.replace(w.title||""),A.tooltip=R.replace(w.tooltip||""),A}getPanelLinkAnchorInfo(w,R){(0,a.d)("link_srv.ts","getPanelLinkAnchorInfo","getDataLinkUIModel");const A=(U,I,N)=>(0,m.J)().replace(U,{...R,...I},N);return this.getDataLinkUIModel(w,A,{})}}let x;function O(B){x=B}function L(){return x||(x=new M),x}},32294:(H,T,e)=>{"use strict";e.d(T,{JI:()=>f,Kc:()=>l,ih:()=>a,qj:()=>o});var t=e(2118),n=e(86648),c=e(35974),s=e(85805),r=e(45984),g=e(46732);function f(d){return async(p,h)=>{if(d.libraryPanel?.uid&&!("model"in d.libraryPanel)){p(m(d));return}let y=d.type,v=h().plugins.panels[y];if(!v)try{v=await p((0,s.Ro)(y))}catch{v=(0,c.X)(y,y==="row")}d.plugin||d.pluginLoaded(v),p((0,g.bc)({key:d.key,plugin:v}))}}function o(d){return p=>{p((0,g.WJ)({key:d}))}}function l({panel:d,pluginId:p,options:h,fieldConfig:y}){return async(v,i)=>{if(d.type===p&&!h&&!y)return;let P=i().plugins.panels[p];if(P||(P=await v((0,s.Ro)(p))),d.type!==p&&d.changePlugin(P),h||y){const E=(0,t.d4)({plugin:P,currentOptions:h||d.options,currentFieldConfig:y||d.fieldConfig,isAfterPluginChange:!1});d.options=E.options,d.fieldConfig=E.fieldConfig,d.configRev++}d.generateNewKey(),v((0,g.bc)({key:d.key,plugin:P}))}}function a(d,p){return async(h,y)=>{const v=p.model.type,i=d.type;if(d.restoreModel({...p.model,gridPos:d.gridPos,id:d.id,libraryPanel:p}),d.getQueryRunner().clearLastResult(),i!==v){let P=y().plugins.panels[v];P||(P=await h((0,s.Ro)(v))),d.pluginLoaded(P),d.generateNewKey(),await h((0,g.bc)({key:d.key,plugin:P}))}else{const u=d.key;d.generateNewKey(),h((0,g.mr)({oldKey:u,newKey:d.key}))}d.configRev=0,d.hasSavedPanelEditChange=!0,d.refresh(),d.events.publish(r.pO),d.events.publish(r.Wj)}}function m(d){return async p=>{const h=d.libraryPanel.uid;try{const y=await(0,n.Mh)(h,!0);d.initLibraryPanel(y),p(f(d))}catch(y){console.log("ERROR: ",y),p((0,g.bc)({key:d.key,plugin:(0,c.X)("Unable to load library panel: "+h,!1)}))}}}},46732:(H,T,e)=>{"use strict";e.d(T,{Vl:()=>l,WJ:()=>o,ZP:()=>m,bc:()=>s,mr:()=>f,o8:()=>r,pC:()=>g});var t=e(32557);const n={},c=(0,t.oM)({name:"panels",initialState:n,reducers:{panelModelAndPluginReady:(d,p)=>{d[p.payload.key]={plugin:p.payload.plugin}},changePanelKey:(d,p)=>{d[p.payload.newKey]=d[p.payload.oldKey],delete d[p.payload.oldKey]},removePanel:(d,p)=>{delete d[p.payload.key]},removeAllPanels:d=>{Object.keys(d).forEach(p=>delete d[p])},setPanelInstanceState:(d,p)=>{d[p.payload.key].instanceState=p.payload.value},setPanelAngularComponent:(d,p)=>{const h=d[p.payload.key];h.angularComponent=p.payload.angularComponent}}}),{panelModelAndPluginReady:s,setPanelAngularComponent:r,setPanelInstanceState:g,changePanelKey:f,removePanel:o,removeAllPanels:l}=c.actions,m={panels:c.reducer}},73952:(H,T,e)=>{"use strict";e.d(T,{i:()=>t});function t(n,c){return n.panels[c.key]}},10079:(H,T,e)=>{"use strict";e.d(T,{r0:()=>a});var t=e(82897),n=e.n(t),c=e(83383),s=e(27677),r=e(33180),g=e(37932),f=e(6129);const o={kiosk:!0,autofitpanels:!0,orgId:!0};class l{constructor(){this.urls=[],this.index=0,this.numberOfLoops=0,this.isPlaying=!1,this.locationUpdated=this.locationUpdated.bind(this)}next(){if(clearTimeout(this.nextTimeoutId),this.index>this.urls.length-1){if(this.numberOfLoops++,this.numberOfLoops>=3){window.location.href=this.startUrl;return}this.index=0}const p=this.urls[this.index],h=g.E1.getSearchObject(),y=(0,t.pickBy)(h,(i,u)=>o[u]),v=c.u.stripBaseFromUrl(p);this.index++,this.validPlaylistUrl=v,this.nextTimeoutId=setTimeout(()=>this.next(),this.interval),g.E1.push(v+"?"+s.Cj.toUrlParams(y))}prev(){this.index=Math.max(this.index-2,0),this.next()}locationUpdated(d){d.pathname!==this.validPlaylistUrl&&this.stop()}async start(d){this.stop(),this.startUrl=window.location.href,this.index=0,this.isPlaying=!0,this.locationListenerUnsub=g.E1.getHistory().listen(this.locationUpdated);const p=[];let h=await(0,f.A5)(d);if(!h.items?.length)return;this.interval=r.intervalToMs(h.interval);const y=await(0,f.jc)(h.items);for(const v of y)if(v.dashboards)for(const i of v.dashboards)p.push(i.url);p.length&&(this.urls=p,this.isPlaying=!0,this.next())}stop(){this.isPlaying&&(this.index=0,this.isPlaying=!1,this.locationListenerUnsub&&this.locationListenerUnsub(),this.nextTimeoutId&&clearTimeout(this.nextTimeoutId),g.E1.getSearchObject().kiosk&&g.E1.partial({kiosk:null}))}}const a=new l},6129:(H,T,e)=>{"use strict";e.d(T,{A5:()=>h,CE:()=>d,Ds:()=>P,Dv:()=>y,cg:()=>m,d5:()=>u,jc:()=>i,l8:()=>p});var t=e(3363),n=e(50235),c=e(54899),s=e(35645),r=e(659),g=e(60499),f=e(83977),o=e(7832),l=e(3153),a=e(64823);async function m(E){await v(()=>(0,c.i)().post("/api/playlists",E))}async function d(E,C){await v(()=>(0,c.i)().put(`/api/playlists/${E}`,C))}async function p(E){await v(()=>(0,c.i)().delete(`/api/playlists/${E}`),"Playlist deleted")}async function h(E){const C=await(0,c.i)().get(`/api/playlists/${E}`);if(C.items){for(const b of C.items)if(b.type==="dashboard_by_id"){b.type="dashboard_by_uid";const S=await(0,c.i)().get(`/api/dashboards/ids/${b.value}`);S.length&&(b.value=S[0])}}return C}async function y(){return(0,c.i)().get("/api/playlists/")}async function v(E,C="Playlist saved"){try{await E(),(0,l.WI)((0,r.$l)((0,g.AT)(C)))}catch(b){b instanceof Error&&(0,l.WI)((0,r.$l)((0,g.t_)("Unable to save playlist",b)))}}async function i(E){let C=0;if(!E?.length)return[];const b=[];for(const x of E){const O={query:"*",kind:["dashboard"],limit:1e3};switch(x.type){case"dashboard_by_id":throw new Error("invalid item (with id)");case"dashboard_by_uid":O.uid=[x.value];break;case"dashboard_by_tag":O.tags=[x.value];break}b.push({refId:`${C++}`,queryType:o.hR.Search,search:O})}if(!s.v.featureToggles.panelTitleSearch){const x=(0,a.getGrafanaSearcher)(),O=[];for(let L=0;L<b.length;L++){const B=(await x.search(b[L].search)).view;O.push({...E[L],dashboards:B.map(w=>({...w}))})}return O}const S=await(0,f.e)(),M=await(0,t.n)(S.query({targets:b}));if(M.data.length!==E.length)throw new Error("unexpected result size");return E.map((x,O)=>{const L=new n.U(M.data[O]);return{...x,dashboards:L.map(B=>({...B}))}})}function u(){return{items:[],interval:"5m",name:"",uid:""}}function P(E,C){return C?.length?(C=C.toLowerCase(),E.filter(b=>b.name.toLowerCase().includes(C))):E}},73354:(H,T,e)=>{"use strict";e.d(T,{$F:()=>f,E1:()=>d,GP:()=>h,GV:()=>g,P6:()=>y,Tk:()=>p,jL:()=>o});var t=e(41959),n=e(54899),c=e(95156),s=e(11212),r=e(59210);async function g(i){const u=await l(i),P=Boolean(u),[E,C,b]=await Promise.all([d(),a(i,P),m(i)]),S=E.find(x=>x.id===i),M=S?.dependencies||u?.json?.dependencies;return{grafanaDependency:M?.grafanaDependency??M?.grafanaVersion??"",pluginDependencies:M?.plugins||[],links:S?.info.links||u?.json?.info.links||[],readme:b||u?.readme,versions:C}}async function f(){const{items:i}=await(0,n.i)().get(`${s.tB}/plugins`);return i.filter(r.wB)}async function o(){try{return await(0,n.i)().get(`${s.O2}/errors`)}catch{return[]}}async function l(i){try{return await(0,n.i)().get(`${s.tB}/plugins/${i}`,{})}catch(u){(0,n.kW)(u)&&(u.isHandled=!0);return}}async function a(i,u){try{return u?((await(0,n.i)().get(`${s.tB}/plugins/${i}/versions`)).items||[]).map(E=>({version:E.version,createdAt:E.createdAt,isCompatible:E.isCompatible,grafanaDependency:E.grafanaDependency})):[]}catch(P){return(0,n.kW)(P)&&(P.isHandled=!0),[]}}async function m(i){try{const u=await(0,n.i)().get(`${s.O2}/${i}/markdown/README`);return u?(0,t.a)(u):""}catch(u){return(0,n.kW)(u)&&(u.isHandled=!0),""}}async function d(){return(await(0,n.i)().get(`${s.O2}`,(0,c.y)({embedded:0}))).filter(r.EP)}async function p(i){return await(0,n.i)().post(`${s.O2}/${i}/install`)}async function h(i){return await(0,n.i)().post(`${s.O2}/${i}/uninstall`)}async function y(i,u){return(await(0,n.i)().datasourceRequest({url:`/api/plugins/${i}/settings`,method:"POST",data:u}))?.data}const v={getRemotePlugins:f,getInstalledPlugins:d,installPlugin:p,uninstallPlugin:h}},39229:(H,T,e)=>{"use strict";e.d(T,{a:()=>c});var t=e(68404),n=e(61744);const c=({text:s="Loading..."})=>t.createElement("div",{className:"page-loader-wrapper"},t.createElement(n.u,{text:s}))},11212:(H,T,e)=>{"use strict";e.d(T,{O2:()=>t,tB:()=>n,uJ:()=>c});const t="/api/plugins",n="/api/gnet",c="plugins"},59210:(H,T,e)=>{"use strict";e.d(T,{AA:()=>v,EP:()=>S,HT:()=>b,Nh:()=>y,RU:()=>E,Uj:()=>h,XB:()=>P,ZG:()=>d,fG:()=>C,uR:()=>l,wB:()=>M});var t=e(24699),n=e(85052),c=e(35645),s=e(66121),r=e(77582),g=e(29930),f=e(81168),o=e(84532);function l(B=[],w=[],R){const A=[],U=i(R);return B.forEach(I=>{const N=w.find(D=>D.slug===I.id),F=U[I.id];N||A.push(a(I,void 0,F))}),w.forEach(I=>{const N=B.find(D=>D.id===I.slug),F=U[I.slug];A.push(a(N,I,F))}),A}function a(B,w,R){return!B&&w?m(w,R):B&&!w?d(B,R):p(B,w,R)}function m(B,w){const{name:R,slug:A,description:U,version:I,orgName:N,popularity:F,downloads:D,typeCode:Y,updatedAt:j,createdAt:K,status:z}=B,Z=!!w||O(Y);return{description:U,downloads:D,id:A,info:{logos:{small:`https://grafana.com/api/plugins/${A}/versions/${I}/logos/small`,large:`https://grafana.com/api/plugins/${A}/versions/${I}/logos/large`}},name:R,orgName:N,popularity:F,publishedAt:K,signature:u({remote:B,error:w}),updatedAt:j,hasUpdate:!1,isPublished:!0,isInstalled:Z,isDisabled:Z,isCore:B.internal,isDev:!1,isEnterprise:z==="enterprise",type:Y,error:w?.errorCode}}function d(B,w){const{name:R,info:{description:A,version:U,logos:I,updated:N,author:F},id:D,dev:Y,type:j,signature:K,signatureOrg:z,signatureType:Z,hasUpdate:ae,accessControl:J}=B,oe=!!w||O(j);return{description:A,downloads:0,id:D,info:{logos:I},name:R,orgName:F.name,popularity:0,publishedAt:"",signature:u({local:B,error:w}),signatureOrg:z,signatureType:Z,updatedAt:N,installedVersion:U,hasUpdate:ae,isInstalled:!0,isDisabled:oe,isCore:K==="internal",isPublished:!1,isDev:Boolean(Y),isEnterprise:!1,type:j,error:w?.errorCode,accessControl:J}}function p(B,w,R){const A=B?.info.version,U=w?.slug||B?.id||"",I=B?.type||w?.typeCode,N=!!R||O(I);let F={small:`/public/img/icn-${I}.svg`,large:`/public/img/icn-${I}.svg`};return w?F={small:`https://grafana.com/api/plugins/${U}/versions/${w.version}/logos/small`,large:`https://grafana.com/api/plugins/${U}/versions/${w.version}/logos/large`}:B&&B.info.logos&&(F=B.info.logos),{description:B?.info.description||w?.description||"",downloads:w?.downloads||0,hasUpdate:B?.hasUpdate||!1,id:U,info:{logos:F},isCore:Boolean(w?.internal||B?.signature===t.Xy.internal),isDev:Boolean(B?.dev),isEnterprise:w?.status==="enterprise",isInstalled:Boolean(B)||N,isDisabled:N,isPublished:!0,name:w?.name||B?.name||"",orgName:w?.orgName||B?.info.author.name||"",popularity:w?.popularity||0,publishedAt:w?.createdAt||"",type:I,signature:u({local:B,remote:w,error:R}),signatureOrg:B?.signatureOrg||w?.versionSignedByOrgName,signatureType:B?.signatureType||w?.versionSignatureType||w?.signatureType||void 0,updatedAt:w?.updatedAt||B?.info.updated||"",installedVersion:A,error:R?.errorCode,accessControl:B?.accessControl}}const h=B=>`${c.v.pluginCatalogURL}${B}`;var y=(B=>(B.nameAsc="nameAsc",B.nameDesc="nameDesc",B.updated="updated",B.published="published",B.downloads="downloads",B))(y||{});const v=(B,w)=>{const R={nameAsc:(A,U)=>A.name.localeCompare(U.name),nameDesc:(A,U)=>U.name.localeCompare(A.name),updated:(A,U)=>(0,n.J)(U.updatedAt).valueOf()-(0,n.J)(A.updatedAt).valueOf(),published:(A,U)=>(0,n.J)(U.publishedAt).valueOf()-(0,n.J)(A.publishedAt).valueOf(),downloads:(A,U)=>U.downloads-A.downloads};return R[w]?B.sort(R[w]):B};function i(B=[]){return B.reduce((w,R)=>(w[R.pluginId]=R,w),{})}function u(B){const{error:w,local:R,remote:A}=B;if(w)switch(w.errorCode){case t.w2.invalidSignature:return t.Xy.invalid;case t.w2.missingSignature:return t.Xy.missing;case t.w2.modifiedSignature:return t.Xy.modified}return R?.signature?R.signature:A?.signatureType||A?.versionSignatureType?t.Xy.valid:t.Xy.missing}const P=()=>(0,g.i)().get("/api/frontend/settings").then(B=>{c.v.panels=B.panels});function E(B){if(!B)return;const[w]=B.filter(R=>Boolean(R.isCompatible));return w}const C=()=>c.v.pluginAdminEnabled,b=(B,w,R)=>{const A=c.v.pluginAdminExternalManageEnabled,U=r.Vt.hasAccess(f.AccessControlAction.PluginsInstall,(0,o.bO)()),I=Boolean(R);return B.type===t.zV.renderer||B.type===t.zV.secretsmanager||B.isEnterprise&&!(0,s.v)("enterprise.plugins")||B.isDev||!U&&!A||!B.isPublished||!I||!w},S=B=>x(B.id),M=B=>x(B.slug);function x(B){const{pluginCatalogHiddenPlugins:w}=c.v;return!w.includes(B)}function O(B){return B===t.zV.secretsmanager&&!c.v.secretsManagerPluginEnabled}function L(B){return Boolean(B?.signature==="internal")}},84532:(H,T,e)=>{"use strict";e.d(T,{Gg:()=>g,RN:()=>r,bO:()=>s});var t=e(47694),n=e(82002),c=e(81168);function s(){return t.vc.bootData.user.isGrafanaAdmin}function r(){return n.Vt.hasRole("Admin")}function g(){return n.Vt.hasPermission(c.AccessControlAction.DataSourcesCreate)&&n.Vt.hasPermission(c.AccessControlAction.DataSourcesWrite)}},85805:(H,T,e)=>{"use strict";e.d(T,{DD:()=>m,LP:()=>y,N9:()=>d,Qd:()=>o,Ro:()=>v,Tz:()=>p,bp:()=>l,m3:()=>h,tQ:()=>a});var t=e(32557),n=e(54899),c=e(38490),s=e(82907),r=e(73354),g=e(11212),f=e(59210);const o=(0,t.hg)(`${g.uJ}/fetchAll`,async(i,u)=>{try{const{dispatch:P}=u,[E,C,{payload:b}]=await Promise.all([(0,r.E1)(),(0,r.jL)(),P(a())]);return(0,f.uR)(E,b,C)}catch{return u.rejectWithValue("Unknown error.")}}),l=(0,t.hg)(`${g.uJ}/fetchAllLocal`,async(i,u)=>{try{return(await(0,r.E1)()).map(E=>(0,f.ZG)(E))}catch{return u.rejectWithValue("Unknown error.")}}),a=(0,t.hg)(`${g.uJ}/fetchRemotePlugins`,async(i,u)=>{try{return await(0,r.$F)()}catch(P){return(0,n.kW)(P)&&(P.isHandled=!0),u.rejectWithValue([])}}),m=(0,t.hg)(`${g.uJ}/fetchDetails`,async(i,u)=>{try{const P=await(0,r.GV)(i);return{id:i,changes:{details:P}}}catch{return u.rejectWithValue("Unknown error.")}}),d=(0,t.hg)(`${g.uJ}/install`,async({id:i,version:u,isUpdating:P=!1},E)=>{const C=P?{isInstalled:!0,installedVersion:u,hasUpdate:!1}:{isInstalled:!0,installedVersion:u};try{return await(0,r.Tk)(i),await(0,f.XB)(),P&&(0,s.Hl)(i),{id:i,changes:C}}catch(b){return console.error(b),E.rejectWithValue("Unknown error.")}}),p=(0,t.hg)(`${g.uJ}/uninstall`,async(i,u)=>{try{return await(0,r.GP)(i),await(0,f.XB)(),(0,s.Hl)(i),{id:i,changes:{isInstalled:!1,installedVersion:void 0}}}catch(P){return console.error(P),u.rejectWithValue("Unknown error.")}}),h=(0,t.hg)(`${g.uJ}/loadPluginDashboards`,async(i,u)=>{const C=`api/plugins/${u.getState().dataSources.dataSource.type}/dashboards`;return(0,n.i)().get(C)}),y=(0,t.PH)(`${g.uJ}/panelPluginLoaded`),v=i=>async(u,P)=>{let E=P().plugins.panels[i];return E||(E=await(0,c.Ub)(i),P().plugins.panels[i]||u(y(E))),E}},74509:(H,T,e)=>{"use strict";e.d(T,{iY:()=>j,bt:()=>U,ZV:()=>A,GE:()=>S,UQ:()=>L,bJ:()=>x,x3:()=>B,IS:()=>I,y9:()=>R,S1:()=>w,wq:()=>N});var t=e(68404),n=e(81168),c=e(59210),s=e(85805),r=e(66552),g=e(90158),f=e(29076),o=e(48996);const l=K=>K.plugins,a=(0,g.P1)(l,({items:K})=>K),m=(0,g.P1)(l,({settings:K})=>K.displayMode),{selectAll:d,selectById:p}=r.CD.getSelectors(a),h=K=>(0,g.P1)(d,z=>z.filter(Z=>K==="installed"?Z.isInstalled:!Z.isCore)),y=(K,z)=>(0,g.P1)(h(K),Z=>Z.filter(ae=>z==="all"||ae.type===z)),v=K=>(0,g.P1)(d,z=>K===""?[]:z.filter(Z=>{const ae=[];return Z.name&&ae.push(Z.name.toLowerCase()),Z.orgName&&ae.push(Z.orgName.toLowerCase()),ae.some(J=>J.includes((0,f.x6)(K).toLowerCase()))})),i=(K,z,Z)=>(0,g.P1)(y(z,Z),v(K),(ae,J)=>K===""?ae:J),u=(0,g.P1)(d,K=>K?K.filter(z=>Boolean(z.error)).map(z=>({pluginId:z.id,errorCode:z.error})):[]),P=K=>(0,g.P1)(l,({requests:z={}})=>z[K]),E=K=>(0,g.P1)(P(K),z=>z?.status===o.eE.Pending),C=K=>(0,g.P1)(P(K),z=>z?.status===o.eE.Rejected?z?.error:null),b=K=>(0,g.P1)(P(K),z=>z===void 0),S=({query:K="",filterBy:z="installed",filterByType:Z="all",sortBy:ae=c.Nh.nameAsc})=>{F();const J=(0,n.useSelector)(i(K,z,Z)),{isLoading:oe,error:Ee}=A(),me=(0,c.AA)(J,ae);return{isLoading:oe,error:Ee,plugins:me}},M=()=>(F(),useSelector(selectAll)),x=K=>(F(),Y(K),(0,n.useSelector)(z=>p(z,K))),O=K=>(D(),useSelector(z=>selectById(z,K))),L=()=>(F(),(0,n.useSelector)(u)),B=()=>{const K=(0,n.useDispatch)();return(z,Z,ae)=>K((0,s.N9)({id:z,version:Z,isUpdating:ae}))},w=()=>{const K=(0,n.useDispatch)();return z=>K((0,s.Tz)(z))},R=()=>(0,n.useSelector)(C(s.tQ.typePrefix))===null,A=()=>{const K=(0,n.useSelector)(E(s.Qd.typePrefix)),z=(0,n.useSelector)(C(s.Qd.typePrefix));return{isLoading:K,error:z}},U=()=>{const K=(0,n.useSelector)(E(s.DD.typePrefix)),z=(0,n.useSelector)(C(s.DD.typePrefix));return{isLoading:K,error:z}},I=()=>{const K=(0,n.useSelector)(E(s.N9.typePrefix)),z=(0,n.useSelector)(C(s.N9.typePrefix));return{isInstalling:K,error:z}},N=()=>{const K=(0,n.useSelector)(E(s.Tz.typePrefix)),z=(0,n.useSelector)(C(s.Tz.typePrefix));return{isUninstalling:K,error:z}},F=()=>{const K=(0,n.useDispatch)(),z=(0,n.useSelector)(b(s.Qd.typePrefix));(0,t.useEffect)(()=>{z&&K((0,s.Qd)())},[])},D=()=>{const K=useDispatch(),z=useSelector(selectIsRequestNotFetched(fetchAllLocal.typePrefix));useEffect(()=>{z&&K(fetchAllLocal())},[])},Y=K=>{const z=(0,n.useDispatch)(),Z=(0,n.useSelector)(oe=>p(oe,K)),J=!(0,n.useSelector)(E(s.DD.typePrefix))&&Z&&!Z.details;(0,t.useEffect)(()=>{J&&z((0,s.DD)(K))},[Z])},j=()=>{const K=(0,n.useDispatch)();return{displayMode:(0,n.useSelector)(m),setDisplayMode:Z=>K((0,r.UC)(Z))}}},66552:(H,T,e)=>{"use strict";e.d(T,{CD:()=>r,I6:()=>p,UC:()=>d});var t=e(32557),n=e(11212),c=e(48996),s=e(85805);const r=(0,t.HF)(),g=h=>new RegExp(`${n.uJ}/(.*)/pending`).test(h.type),f=h=>new RegExp(`${n.uJ}/(.*)/fulfilled`).test(h.type),o=h=>new RegExp(`${n.uJ}/(.*)/rejected`).test(h.type),l=h=>{const y=h.lastIndexOf("/");return h.substring(0,y)},a={items:r.getInitialState(),requests:{},settings:{displayMode:c.lL.Grid},plugins:[],errors:[],searchQuery:"",hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1,panels:{}},m=(0,t.oM)({name:"plugins",initialState:a,reducers:{setDisplayMode(h,y){h.settings.displayMode=y.payload}},extraReducers:h=>h.addCase(s.Qd.fulfilled,(y,v)=>{r.upsertMany(y.items,v.payload)}).addCase(s.bp.fulfilled,(y,v)=>{r.upsertMany(y.items,v.payload)}).addCase(s.DD.fulfilled,(y,v)=>{r.updateOne(y.items,v.payload)}).addCase(s.N9.fulfilled,(y,v)=>{r.updateOne(y.items,v.payload)}).addCase(s.Tz.fulfilled,(y,v)=>{r.updateOne(y.items,v.payload)}).addCase(s.LP,(y,v)=>{y.panels[v.payload.meta.id]=v.payload}).addCase(s.m3.pending,(y,v)=>{y.isLoadingPluginDashboards=!0,y.dashboards=[]}).addCase(s.m3.fulfilled,(y,v)=>{y.isLoadingPluginDashboards=!1,y.dashboards=v.payload}).addMatcher(g,(y,v)=>{y.requests[l(v.type)]={status:c.eE.Pending}}).addMatcher(f,(y,v)=>{y.requests[l(v.type)]={status:c.eE.Fulfilled}}).addMatcher(o,(y,v)=>{y.requests[l(v.type)]={status:c.eE.Rejected,error:v.payload}})}),{setDisplayMode:d}=m.actions,p=m.reducer},48996:(H,T,e)=>{"use strict";e.d(T,{Co:()=>c,cd:()=>n,eE:()=>f,lL:()=>t,tu:()=>g,vF:()=>s,xc:()=>r});var t=(o=>(o.Grid="grid",o.List="list",o))(t||{}),n=(o=>(o.Home="plugins-home",o.Browse="plugins-browse",o.Details="plugins-details",o))(n||{}),c=(o=>(o.app="apps",o.datasource="database",o.panel="credit-card",o.renderer="capture",o.secretsmanager="key-skeleton-alt",o))(c||{}),s=(o=>(o.INSTALL="INSTALL",o.UNINSTALL="UNINSTALL",o.UPDATE="UPDATE",o.REINSTALL="REINSTALL",o))(s||{}),r=(o=>(o.OVERVIEW="Overview",o.VERSIONS="Version history",o.CONFIG="Config",o.DASHBOARDS="Dashboards",o.USAGE="Usage",o))(r||{}),g=(o=>(o.OVERVIEW="overview",o.VERSIONS="version-history",o.CONFIG="config",o.DASHBOARDS="dashboards",o.USAGE="usage",o))(g||{}),f=(o=>(o.Pending="Pending",o.Fulfilled="Fulfilled",o.Rejected="Rejected",o))(f||{})},52889:(H,T,e)=>{"use strict";e.d(T,{a:()=>s,v:()=>n});var t=e(68404);const n=t.createContext(c());n.displayName="PluginPageContext";function c(){return{sectionNav:{main:{text:"Plugin page"},node:{text:"Plugin page"}}}}function s(r){return{sectionNav:r??c().sectionNav}}},91162:(H,T,e)=>{"use strict";e.d(T,{ND:()=>p,ak:()=>y});var t=e(7238),n=e(25318),c=e(40885),s=e(70926),r=e(54899),g=e(86647),f=e(22069),o=e(97063),l=e(47694),a=e(47471),m=e(97573),d=e(82221);class p{constructor(i=(0,c.J)()){this.templateSrv=i,this.datasources={},this.settingsMapByName={},this.settingsMapByUid={},this.settingsMapById={},this.defaultName=""}init(i,u){this.datasources={},this.settingsMapByUid={},this.settingsMapByName=i,this.defaultName=u;for(const P of Object.values(i))P.uid||(P.uid=P.name),this.settingsMapByUid[P.uid]=P,this.settingsMapById[P.id]=P;this.datasources[f.hr.type]=a.mV,this.datasources[m.Yq]=a.mV,this.settingsMapByUid[f.hr.uid]=a.bE,this.settingsMapByUid[m.Yq]=a.bE}getDataSourceSettingsByUid(i){return this.settingsMapByUid[i]}getInstanceSettings(i,u){const P=typeof i=="string";let E=P?i:i?.uid;if(E==="default"||E===null||E===void 0){if(!P&&i){const C=i?.type;if(C===f.hr.type)return a.mV.instanceSettings;C&&console.log("FIND Default instance for datasource type?",i)}return this.settingsMapByUid[this.defaultName]??this.settingsMapByName[this.defaultName]}if(E[0]==="$"){const C=this.templateSrv.replace(E,u,h);let b;return C==="default"?b=this.settingsMapByName[this.defaultName]:b=this.settingsMapByUid[C]??this.settingsMapByName[C],b?{...b,isDefault:!1,name:E,uid:E,rawRef:{type:b.type,uid:b.uid}}:void 0}return this.settingsMapByUid[E]??this.settingsMapByName[E]}get(i,u){let P=typeof i=="string"?i:i?.uid;if(!P)return this.get(this.defaultName);const E=this.settingsMapByName[P];return E&&(P=E.uid),this.datasources[P]?Promise.resolve(this.datasources[P]):(P=this.templateSrv.replace(P,u,h),P==="default"&&this.defaultName!=="default"?this.get(this.defaultName):this.datasources[P]?Promise.resolve(this.datasources[P]):this.loadDatasource(P))}async loadDatasource(i){if(this.datasources[i])return Promise.resolve(this.datasources[i]);const u=this.settingsMapByUid[i]??this.settingsMapByName[i]??this.settingsMapById[i];if(!u)return Promise.reject({message:`Datasource ${i} was not found`});try{const P=await(0,d.nL)(u.meta);if(this.datasources[i])return this.datasources[i];const E=P.DataSourceClass.length!==1;let C;if(E?C=(0,s.V)().instantiate(P.DataSourceClass,{instanceSettings:u}):C=new P.DataSourceClass(u),C.components=P.components,!(C instanceof t.MF)){const b=C;b.name=u.name,b.id=u.id,b.type=u.type,b.meta=u.meta,b.uid=u.uid,C.getRef=t.MF.prototype.getRef}return this.datasources[i]=C,this.datasources[C.uid]=C,C}catch(P){return P instanceof Error&&o.Z.emit(n.SI.alertError,[u.name+" plugin failed",P.toString()]),Promise.reject({message:`Datasource: ${i} was not found`})}}getAll(){return Object.values(this.settingsMapByName)}getList(i={}){const u=Object.values(this.settingsMapByName).filter(E=>!(E.meta.id==="grafana"||E.meta.id==="mixed"||E.meta.id==="dashboard"||i.metrics&&!E.meta.metrics||i.tracing&&!E.meta.tracing||i.logs&&E.meta.category!=="logging"&&!E.meta.logs||i.annotations&&!E.meta.annotations||i.alerting&&!E.meta.alerting||i.pluginId&&E.meta.id!==i.pluginId||i.filter&&!i.filter(E)||i.type&&(Array.isArray(i.type)?!i.type.includes(E.type):i.type!==E.type)||!i.all&&E.meta.metrics!==!0&&E.meta.annotations!==!0&&E.meta.tracing!==!0&&E.meta.logs!==!0&&E.meta.alerting!==!0));if(i.variables)for(const E of this.templateSrv.getVariables()){if(E.type!=="datasource")continue;let C=E.current.value==="default"?this.defaultName:E.current.value;Array.isArray(C)&&C.length===1&&(C=C[0]);const b=!Array.isArray(C)&&this.settingsMapByName[C];if(b){const S=`\${${E.name}}`;u.push({...b,name:S,uid:S})}}const P=u.sort((E,C)=>E.name.toLowerCase()>C.name.toLowerCase()?1:E.name.toLowerCase()<C.name.toLowerCase()?-1:0);if(!i.pluginId&&!i.alerting){if(i.mixed){const E=this.getInstanceSettings("-- Mixed --");E&&u.push(E)}if(i.dashboard){const E=this.getInstanceSettings("-- Dashboard --");E&&u.push(E)}if(!i.tracing){const E=this.getInstanceSettings("-- Grafana --");E&&u.push(E)}}return P}getExternal(){return this.getList()}getAnnotationSources(){return this.getList({annotations:!0,variables:!0}).map(i=>({name:i.name,value:i.name,meta:i.meta}))}getMetricSources(i){return this.getList({metrics:!0,variables:!i?.skipVariables}).map(u=>({name:u.name,value:u.name,meta:u.meta}))}async reload(){const i=await(0,r.i)().get("/api/frontend/settings");l.ZP.datasources=i.datasources,l.ZP.defaultDatasource=i.defaultDatasource,this.init(i.datasources,i.defaultDatasource)}}function h(v){return Array.isArray(v)?v[0]:v}const y=()=>(0,g.F)()},38490:(H,T,e)=>{"use strict";e.d(T,{Ub:()=>f,_2:()=>o,q1:()=>l});var t=e(48513),n=e(47694),c=e(35974),s=e(82221);const r={},g={};function f(m){const d=r[m];if(d)return d;const p=n.ZP.panels[m];if(!p)throw new Error(`Plugin ${m} not found`);return r[m]=a(p),r[m]}function o(m){return a(m)}function l(m){return g[m]}function a(m){return(0,s.N$)(m.module,m.info?.version).then(d=>{if(d.plugin)return d.plugin;if(d.PanelCtrl){const p=new t.c(null);return p.angularPanelCtrl=d.PanelCtrl,p}throw new Error("missing export: plugin or PanelCtrl")}).then(d=>(d.meta=m,g[m.id]=d,d)).catch(d=>(console.warn("Error loading panel plugin: "+m.id,d),(0,c.F)(m,d)))}},13011:(H,T,e)=>{"use strict";e.d(T,{Z:()=>s,a:()=>c});var t=e(54899);const n={};function c(r,g){const f=n[r];return f?Promise.resolve(f):(0,t.i)().get(`/api/plugins/${r}/settings`,void 0,void 0,g).then(o=>(n[r]=o,o)).catch(o=>Promise.reject(new Error("Unknown Plugin")))}const s=r=>r?delete n[r]:Object.keys(n).forEach(g=>delete n[g])},82221:(H,T,e)=>{"use strict";e.d(T,{kY:()=>As,Av:()=>Gm,nL:()=>km,N$:()=>wm});var t={};e.r(t),e.d(t,{plugin:()=>De});var n={};e.r(n),e.d(n,{plugin:()=>Qa});var c={};e.r(c),e.d(c,{plugin:()=>Lt});var s={};e.r(s),e.d(s,{plugin:()=>Ji});var r={};e.r(r),e.d(r,{plugin:()=>nn});var g={};e.r(g),e.d(g,{plugin:()=>Dc});var f={};e.r(f),e.d(f,{plugin:()=>Mc});var o={};e.r(o),e.d(o,{plugin:()=>kd});var l={};e.r(l),e.d(l,{plugin:()=>Ir});var a={};e.r(a),e.d(a,{plugin:()=>Zd});var m={};e.r(m),e.d(m,{plugin:()=>co});var d={};e.r(d),e.d(d,{plugin:()=>Vc});var p={};e.r(p),e.d(p,{plugin:()=>ml});var h={};e.r(h),e.d(h,{plugin:()=>$i});var y={};e.r(y),e.d(y,{plugin:()=>Jl});var v={};e.r(v),e.d(v,{plugin:()=>Jo});var i={};e.r(i),e.d(i,{plugin:()=>Eu});var u={};e.r(u),e.d(u,{plugin:()=>xu});var P={};e.r(P),e.d(P,{plugin:()=>gc});var E={};e.r(E),e.d(E,{plugin:()=>Uu});var C={};e.r(C),e.d(C,{plugin:()=>Ht});var b={};e.r(b),e.d(b,{plugin:()=>Ar});var S={};e.r(S),e.d(S,{plugin:()=>hd});var M={};e.r(M),e.d(M,{plugin:()=>Bm});var x=e(52423),O=e(78966),L=e(47700),B=e(21256),w=e.n(B),R=e(82897),A=e.n(R),U=e(36365),I=e.n(U),N=e(57706),F=e.n(N),D=e(68404),Y=e(97394),j=e(36635),K=e(16144),z=e(31259),Z=e(88232),ae=e(70772),J=e(53594),oe=e(40246),Ee=e(56747),me=e(48513),re=e(7238),le=e(40400),pe=e(24034),ee=e(21053),se=e(19920),Q=e(35670),G=e(40419),q=e(37219),X=e(47694),de=e(77582),Be=e(29930),ke=e(13019),He=e(4050),ue=e(40229),Oe=e(24816),Fe=e(97724),Ie=e(94984),we=e(45849),Re=e(35645),_e=e(68226),et=e(69945),qe=e(72004),Je=e(20194),lt=e(37190),at=e(46818),Xe=e(81168),gt=e(37556),ot=e(72648),Ye=e(31403),mt=e(52694),ce=e(33950),be=e(96308),Te=e(53715),Ke=e(10505),ge=e(39031);const Me=({alertManagerSourceName:W,group:te,expandAll:ie})=>{const[Ce,Le]=(0,D.useState)(ie),Ve=(0,ot.wW)(ye),je=(0,ot.wW)(Te.r);return(0,D.useEffect)(()=>Le(ie),[ie]),D.createElement("div",{className:Ve.group,"data-testid":"alert-group"},Object.keys(te.labels).length>0?D.createElement(mt.s,{labels:te.labels}):D.createElement("div",{className:Ve.noGroupingText},"No grouping"),D.createElement("div",{className:Ve.row},D.createElement(ce.U,{isCollapsed:!Ce,onToggle:()=>Le(!Ce)})," ",D.createElement(be.Z,{group:te})),Ce&&D.createElement("div",{className:Ve.alerts},te.alerts.map((rt,dt)=>{const Ct=rt.status.state.toUpperCase(),Et=(0,gt.vT)({start:new Date(rt.startsAt),end:Date.now()});return D.createElement("div",{"data-testid":"alert-group-alert",className:Ve.alert,key:`${rt.fingerprint}-${dt}`},D.createElement("div",null,D.createElement("span",{className:je[rt.status.state]},Ct," "),"for ",Et),D.createElement("div",null,D.createElement(mt.s,{labels:rt.labels})),D.createElement("div",{className:Ve.actionsRow},rt.status.state===ge.Z9.Suppressed&&D.createElement(Ye.Qj,{href:`${(0,Ke.eQ)("/alerting/silences",W)}&silenceIds=${rt.status.silencedBy.join(",")}`,className:Ve.button,icon:"bell",size:"sm"},"Manage silences"),rt.status.state===ge.Z9.Active&&D.createElement(Ye.Qj,{href:(0,Ke.VN)(W,rt.labels),className:Ve.button,icon:"bell-slash",size:"sm"},"Silence"),rt.generatorURL&&D.createElement(Ye.Qj,{className:Ve.button,href:rt.generatorURL,icon:"chart-line",size:"sm"},"See source")))})))},ye=W=>({noGroupingText:x.css`
    height: ${W.spacing(4)};
  `,group:x.css`
    background-color: ${W.colors.background.secondary};
    margin: ${W.spacing(.5,1,.5,1)};
    padding: ${W.spacing(1)};
  `,row:x.css`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${W.spacing(1)};
  `,alerts:x.css`
    margin: ${W.spacing(0,2,0,4)};
  `,alert:x.css`
    padding: ${W.spacing(1,0)};
    & + & {
      border-top: 1px solid ${W.colors.border.medium};
    }
  `,button:x.css`
    & + & {
      margin-left: ${W.spacing(1)};
    }
  `,actionsRow:x.css`
    padding: ${W.spacing(1,0)};
  `}),fe=(W,te)=>(0,D.useMemo)(()=>W.filter(ie=>(0,Je.eD)(ie.labels,te)||ie.alerts.some(Ce=>(0,Je.eD)(Ce.labels,te))),[W,te]),he=W=>{const te=(0,Xe.useDispatch)(),ie=Re.v.unifiedAlertingEnabled,Ce=W.options.expandAll,Le=W.options.alertmanager,je=((0,et._)(Et=>Et.amAlertGroups)||at.oq)[Le||""]?.result||[],rt=W.options.labels?(0,Je.Zh)(W.options.labels):[],dt=fe(je,rt);(0,D.useEffect)(()=>{function Et(){Le&&te((0,qe.mS)(Le))}Et();const wt=setInterval(Et,lt.iF);return()=>{clearInterval(wt)}},[te,Le]);const Ct=dt.length>0;return D.createElement(_e.$,{autoHeightMax:"100%",autoHeightMin:"100%"},ie&&D.createElement("div",null,Ct&&dt.map(Et=>D.createElement(Me,{alertManagerSourceName:Le,key:JSON.stringify(Et.labels),group:Et,expandAll:Ce})),!Ct&&"No alerts"))},De=new me.c(he).setPanelOptions(W=>W.addCustomEditor({name:"Alertmanager",path:"alertmanager",id:"alertmanager",defaultValue:we.GC,category:["Options"],editor:function(ie){const Ce=(0,D.useMemo)(we.z3,[]);return D.createElement(Ie.P,{current:ie.value,onChange:Le=>ie.onChange(Le),dataSources:Ce})}}).addBooleanSwitch({name:"Expand all by default",path:"expandAll",defaultValue:!1,category:["Options"]}).addTextInput({description:"Filter results by matching labels, ex: env=production,severity=~critical|warning",name:"Labels",path:"labels",category:["Filter"]}));var Ae=e(53117),Ne=e(43339),Ze=e(79658),Se=e(99151),Ue=e.n(Se),Qe=e(68183),pt=e(53217),bt=e(10216),yt=e(50946);async function Mt({query:W,permissionLevel:te}){return(await(0,yt.ZL)(W,te)).map(Le=>({id:Le.id,title:Le.title,url:Le.url}))}async function At({query:W,permissionLevel:te,extraFolders:ie}){const Ce=await Mt({query:W,permissionLevel:te}),Le=ie??[],Ve=W?Le.filter(je=>je.title?.toLowerCase().includes(W.toLowerCase())):Le;return Ce?Ve.concat(Ce):Ve}async function Pt({query:W,permissionLevel:te=Xe.PermissionLevelString.View,extraFolders:ie=[]}){return(await At({query:W,permissionLevel:te,extraFolders:ie})).map(Le=>({value:Le,label:Le.title}))}function rn(W,te){return W?.find(ie=>ie.value?.id===te)}async function Fn(W){if(W!=null)try{const{id:te,title:ie}=await(0,yt.EW)(W);return{value:{id:te,title:ie},label:ie}}catch{console.error(`Could not find folder with id:${W}`)}}const kn={id:void 0,title:"All"},Jn={id:bt.pW,title:bt.fy};function qn({onChange:W,extraFolders:te=[],initialFolderId:ie,permissionLevel:Ce=Xe.PermissionLevelString.View}){const[Le,Ve]=(0,D.useState)(!1),[je,rt]=(0,D.useState)(void 0),[dt,Ct]=(0,D.useState)(void 0),Et=(0,D.useCallback)(async dn=>{let un=rn(dn,ie);un||(un=await Fn(ie)??dn[0],W(un.value)),Ve(!0),Ct(dn),rt(un)},[ie,W]),wt=(0,D.useCallback)(async dn=>{const un=await Pt({query:dn,permissionLevel:Ce,extraFolders:te});return Le||await Et(un),un},[Ce,te,Le,Et]),zt=Ue()(wt,300,{leading:!0}),Vt=(0,D.useCallback)(({value:dn})=>{const un=rn(dt,dn?.id);rt(un),W(dn)},[dt,W]);return D.createElement("div",{"data-testid":Qe.wl.components.ReadonlyFolderPicker.container},D.createElement(pt.qb,{loadingMessage:"Loading folders...",defaultOptions:!0,defaultValue:je,value:je,loadOptions:zt,onChange:Vt}))}var Ut=e(22350),ut=e(46519),nt=e(40885),vt=e(54899),ht=e(72948),It=e(39904),Ft=e(67162),en=e(9398),sn=e(40286);function Mn(W){const[te,ie]=(0,D.useState)(""),Ce=(0,Ut.Z)(async()=>{if(W.options.showOptions!==sn.kx.Current)return;const je={state:yn(W.options.stateFilter)},rt=(0,en.h4)().getCurrent()?.getPanelById(W.id);W.options.alertName&&(je.query=(0,nt.J)().replace(W.options.alertName,rt.scopedVars)),W.options.folderId>=0&&(je.folderId=W.options.folderId),W.options.dashboardTitle&&(je.dashboardQuery=W.options.dashboardTitle),W.options.dashboardAlerts&&(je.dashboardId=(0,en.h4)().getCurrent()?.id),W.options.tags&&(je.dashboardTag=W.options.tags);const dt=await(0,vt.i)().get("/api/alerts",je,`alert-list-get-current-alert-state-${W.id}`);let Ct=En(W.options.sortOrder,dt.map(Et=>({...Et,stateModel:Ft.Z.getStateDisplayModel(Et.state),newStateDateAgo:(0,ut.CQ)(Et.newStateDate).locale("en").fromNow(!0)})));return Ct.length>W.options.maxItems&&(Ct=Ct.slice(0,W.options.maxItems)),ie(Ct.length===0?"No alerts":""),Ct},[W.options.showOptions,W.options.stateFilter.alerting,W.options.stateFilter.execution_error,W.options.stateFilter.no_data,W.options.stateFilter.ok,W.options.stateFilter.paused,W.options.stateFilter.pending,W.options.maxItems,W.options.tags,W.options.dashboardAlerts,W.options.dashboardTitle,W.options.folderId,W.options.alertName,W.options.sortOrder,W.timeRange]),Le=(0,Ut.Z)(async()=>{if(W.options.showOptions!==sn.kx.RecentChanges)return;const je={limit:W.options.maxItems,type:"alert",newState:yn(W.options.stateFilter)},rt=(0,en.h4)().getCurrent();W.options.dashboardAlerts&&(je.dashboardId=rt?.id),je.from=ee.parse(rt?.time.from).unix()*1e3,je.to=ee.parse(rt?.time.to).unix()*1e3;const dt=await(0,vt.i)().get("/api/annotations",je,`alert-list-get-state-changes-${W.id}`),Ct=En(W.options.sortOrder,dt.map(Et=>({...Et,time:rt?.formatDate(Et.time,"MMM D, YYYY HH:mm:ss"),stateModel:Ft.Z.getStateDisplayModel(Et.newState),info:Ft.Z.getAlertAnnotationInfo(Et)})));return ie(Ct.length===0?"No alerts in current time range":""),Ct},[W.options.showOptions,W.options.maxItems,W.options.stateFilter.alerting,W.options.stateFilter.execution_error,W.options.stateFilter.no_data,W.options.stateFilter.ok,W.options.stateFilter.paused,W.options.stateFilter.pending,W.options.dashboardAlerts,W.options.sortOrder]),Ve=(0,ot.wW)(Bn);return D.createElement(_e.$,{autoHeightMin:"100%",autoHeightMax:"100%"},D.createElement("div",{className:Ve.container},te&&D.createElement("div",{className:Ve.noAlertsMessage},te),D.createElement("section",null,D.createElement("ol",{className:Ve.alertRuleList},W.options.showOptions===sn.kx.Current?!Ce.loading&&Ce.value&&Ce.value.map(je=>D.createElement("li",{className:Ve.alertRuleItem,key:`alert-${je.id}`},D.createElement(ht.Z,{href:`${je.url}?viewPanel=${je.panelId}`,className:Ve.cardContainer},D.createElement(ht.Z.Heading,null,je.name),D.createElement(ht.Z.Figure,{className:(0,x.cx)(Ve.alertRuleItemIcon,je.stateModel.stateClass)},D.createElement(It.J,{name:je.stateModel.iconClass,size:"xl",className:Ve.alertIcon})),D.createElement(ht.Z.Meta,null,D.createElement("div",{className:Ve.alertRuleItemText},D.createElement("span",{className:je.stateModel.stateClass},je.stateModel.text),D.createElement("span",{className:Ve.alertRuleItemTime}," for ",je.newStateDateAgo)))))):!Le.loading&&Le.value&&Le.value.map(je=>D.createElement("li",{className:Ve.alertRuleItem,key:`alert-${je.id}`},D.createElement(ht.Z,{className:Ve.cardContainer},D.createElement(ht.Z.Heading,null,je.alertName),D.createElement(ht.Z.Figure,{className:(0,x.cx)(Ve.alertRuleItemIcon,je.stateModel.stateClass)},D.createElement(It.J,{name:je.stateModel.iconClass,size:"xl"})),D.createElement(ht.Z.Meta,null,D.createElement("span",{className:(0,x.cx)(Ve.alertRuleItemText,je.stateModel.stateClass)},je.stateModel.text),D.createElement("span",null,je.time),je.info&&D.createElement("span",{className:Ve.alertRuleItemInfo},je.info)))))))))}function En(W,te){if(W===sn.As.Importance)return(0,R.sortBy)(te,Ce=>Ft.Z.alertStateSortScore[Ce.state||Ce.newState]);if(W===sn.As.TimeAsc)return(0,R.sortBy)(te,Ce=>new Date(Ce.newStateDate||Ce.time));if(W===sn.As.TimeDesc)return(0,R.sortBy)(te,Ce=>new Date(Ce.newStateDate||Ce.time)).reverse();const ie=(0,R.sortBy)(te,Ce=>(Ce.name||Ce.alertName).toLowerCase());return W===sn.As.AlphaDesc&&ie.reverse(),ie}function yn(W){return Object.entries(W).filter(([te,ie])=>ie).map(([te,ie])=>te)}const Bn=W=>({cardContainer:x.css`
    padding: ${W.spacing(.5)} 0 ${W.spacing(.25)} 0;
    line-height: ${W.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:x.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:x.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:x.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${W.colors.background.secondary};
    padding: ${W.spacing(.5)} ${W.spacing(1)};
    border-radius: ${W.shape.borderRadius(2)};
    margin-bottom: ${W.spacing(.5)};
  `,alertRuleItemIcon:x.css`
    display: flex;
    justify-content: center;
    align-items: center;
    width: ${W.spacing(4)};
    padding: 0 ${W.spacing(.5)} 0 ${W.spacing(.25)};
    margin-right: 0px;
  `,alertRuleItemText:x.css`
    font-weight: ${W.typography.fontWeightBold};
    font-size: ${W.typography.size.sm};
    margin: 0;
  `,alertRuleItemTime:x.css`
    color: ${W.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:x.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:x.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:x.css`
    margin-right: ${W.spacing(.5)};
  `}),ea=W=>{const te={showOptions:W.options.showOptions??W.show??sn.kx.Current,maxItems:W.options.maxItems??W.limit??10,sortOrder:W.options.sortOrder??W.sortOrder??sn.As.AlphaAsc,dashboardAlerts:W.options.dashboardAlerts??W.onlyAlertsOnDashboard??!1,alertName:W.options.alertName??W.nameFilter??"",dashboardTitle:W.options.dashboardTitle??W.dashboardFilter??"",folderId:W.options.folderId??W.folderId,tags:W.options.tags??W.dashboardTags??[],stateFilter:W.options.stateFilter??W.stateFilter?.reduce((Ce,Le)=>({...Ce,[Le]:!0}),{})??{}};return parseFloat(W.pluginVersion||"7.4")<7.5&&["show","limit","sortOrder","onlyAlertsOnDashboard","nameFilter","dashboardFilter","folderId","dashboardTags","stateFilter"].forEach(Le=>delete W[Le]),te};var Qn=e(46063);function Kn(W,te){return(0,Qn.ED)(W.state)===te}function Ua(W,te){const{stateFilter:ie}=W;return(0,R.isEmpty)(ie)?te:te.filter(Ce=>ie.firing&&(Kn(Ce,Qn.bj.Alerting)||Kn(Ce,Qn.x_.Firing))||ie.pending&&(Kn(Ce,Qn.bj.Pending)||Kn(Ce,Qn.x_.Pending))||ie.noData&&Kn(Ce,Qn.bj.NoData)||ie.normal&&Kn(Ce,Qn.bj.Normal)||ie.error&&Kn(Ce,Qn.bj.Error)||ie.inactive&&Kn(Ce,Qn.x_.Inactive))}function pa(W){return!(W.startsWith("__")&&W.endsWith("__"))}const va=W=>{const{onChange:te,id:ie,defaultValue:Ce}=W,Le=(0,Xe.useDispatch)();(0,D.useEffect)(()=>{Le((0,qe.lB)())},[Le]);const Ve=(0,et._)(Ct=>Ct.promRules),je=(0,at.PE)(Ve),rt=(0,at.yR)(Ve),dt=(0,D.useMemo)(()=>{if((0,R.isEmpty)(Ve))return[];if(!je)return[];const Ct=Object.keys(Ve).flatMap(Et=>Ve[Et].result??[]).flatMap(Et=>Et.groups).flatMap(Et=>Et.rules.filter(wt=>wt.type===Qn.pz.Alerting)).flatMap(Et=>Et.alerts??[]).map(Et=>Object.keys(Et.labels??{})).flatMap(Et=>Et.filter(pa));return(0,R.uniq)(Ct)},[je,Ve]);return D.createElement(pt.NU,{id:ie,isLoading:rt,defaultValue:Ce,"aria-label":"group by label keys",placeholder:"Group by",prefix:D.createElement(It.J,{name:"tag-alt"}),onChange:Ct=>{te(Ct.map(Et=>Et.value??""))},options:dt.map(Ct=>({label:Ct,value:Ct}))})};var za=e(58252),ja=e(82378),Ea=e(45253),ma=e(61744),Xa=e(57426),Oa=e(82002),ss=e(79662),Ks=e(24782),Ss=e(64681),Bs=e.n(Ss),ls=e(48563),ws=e(84952);const qs=({alerts:W,options:te})=>{const ie=te.groupMode===sn.LM.Custom?!0:te.showInstances,[Ce,Le]=(0,D.useState)(ie),Ve=(0,ot.wW)(Da),je=(0,D.useCallback)(()=>{Le(wt=>!wt)},[]),rt=(0,D.useMemo)(()=>Ua(te,(0,Ke.Zl)(te.sortOrder,W))??[],[W,te]),dt=W.length-rt.length,Ct=rt.length>0,Et=Ct?je:R.noop;return(0,D.useEffect)(()=>{rt.length===0&&Le(!1)},[rt]),D.createElement("div",null,te.groupMode===sn.LM.Default&&D.createElement("div",{className:Ct?Ve.clickable:"",onClick:()=>Et()},Ct&&D.createElement(It.J,{name:Ce?"angle-down":"angle-right",size:"md"}),D.createElement("span",null,`${rt.length} ${Bs()("instance",rt.length)}`),dt>0&&D.createElement("span",null,", ",`${dt} hidden by filters`)),Ce&&D.createElement(ls.o,{instances:rt,pagination:{itemsPerPage:2*ws.gN}}))},Da=W=>({clickable:x.css`
    cursor: pointer;
  `}),Vs=({rules:W,options:te})=>{const ie=(0,ot.wW)(vn),Ce=te.groupBy,Le=(0,D.useMemo)(()=>{const Ve=new Map,je=Ct=>Ce?dr(Ct,Ce):!0;return W.filter(je).forEach(Ct=>{(Ct.rule.alerts??[]).forEach(Et=>{const wt=Es(Ce,Et.labels),zt=Ve.get(wt)??[];Ve.set(wt,[...zt,Et])})}),Array.from(Ve.entries()).reduce((Ct,[Et,wt])=>{const zt=Ua(te,wt);return zt.length>0&&Ct.set(Et,zt),Ct},new Map)},[Ce,W,te]);return D.createElement(D.Fragment,null,Array.from(Le).map(([Ve,je])=>D.createElement("li",{className:ie.alertRuleItem,key:Ve},D.createElement("div",null,D.createElement("div",{className:ie.customGroupDetails},D.createElement("div",{className:ie.alertLabels},Ve&&er(Ve).map(([rt,dt])=>D.createElement(Ks.i,{key:rt,labelKey:rt,value:dt})),!Ve&&"No grouping")),D.createElement(qs,{alerts:je,options:te})))))};function Es(W,te){return new URLSearchParams(W.map(ie=>[ie,te[ie]])).toString()}function er(W){return[...new URLSearchParams(W)]}function dr(W,te){return te.every(ie=>(W.rule.alerts??[]).some(Ce=>Ce.labels[ie]))}const es=Vs,tr=({rules:W,options:te})=>{const ie=(0,ot.wW)(vn),Ce=(0,ot.wW)(Is),Le=W.length<=te.maxItems?W:W.slice(0,te.maxItems);return D.createElement(D.Fragment,null,D.createElement("ol",{className:ie.alertRuleList},Le.map((Ve,je)=>{const{rule:rt,namespaceName:dt,groupName:Ct}=Ve,Et=(0,ss.ub)(rt);return D.createElement("li",{className:ie.alertRuleItem,key:`alert-${dt}-${Ct}-${rt.name}-${je}`},D.createElement("div",{className:Ce.icon},D.createElement(It.J,{name:Ft.Z.getStateDisplayModel(rt.state).iconClass,className:Ce[(0,ss.Aq)(rt.state)],size:"lg"})),D.createElement("div",null,D.createElement("div",{className:ie.instanceDetails},D.createElement("div",{className:ie.alertName,title:rt.name},rt.name),D.createElement("div",{className:ie.alertDuration},D.createElement("span",{className:Ce[(0,ss.Aq)(rt.state)]},(0,ss.SS)(rt.state))," ",Et&&rt.state!==Qn.x_.Inactive&&D.createElement(D.Fragment,null,"for"," ",D.createElement("span",null,(0,gt.vT)({start:Et,end:Date.now()}))))),D.createElement(qs,{alerts:Ve.rule.alerts??[],options:te})))})))},Is=W=>({common:x.css`
    width: 70px;
    text-align: center;
    align-self: stretch;

    display: inline-block;
    color: white;
    border-radius: ${W.shape.borderRadius()};
    font-size: ${W.typography.bodySmall.fontSize};
    text-transform: capitalize;
    line-height: 1.2;
    flex-shrink: 0;

    display: flex;
    flex-direction: column;
    justify-content: center;
  `,icon:x.css`
    margin-top: ${W.spacing(2.5)};
    align-self: flex-start;
  `,good:x.css`
    color: ${W.colors.success.main};
  `,bad:x.css`
    color: ${W.colors.error.main};
  `,warning:x.css`
    color: ${W.colors.warning.main};
  `,neutral:x.css`
    color: ${W.colors.secondary.main};
  `,info:x.css`
    color: ${W.colors.primary.main};
  `}),ts=tr;function Zs(W){const te=(0,Xe.useDispatch)(),ie=(0,D.useMemo)(we.mA,[]);(0,D.useEffect)(()=>{W.options.stateFilter.inactive===!0&&(W.options.stateFilter.normal=!0),W.options.stateFilter.inactive=void 0},[W.options.stateFilter]);let Ce;(0,za.Z)(()=>{Ce=(0,en.h4)().getCurrent()}),(0,D.useEffect)(()=>{te((0,qe.lB)());const wt=Ce?.events.subscribe(ja.md,()=>te((0,qe.lB)()));return()=>{wt?.unsubscribe()}},[te,Ce]);const Le=(0,et._)(wt=>wt.promRules),Ve=ie.some(wt=>Le[wt]?.dispatched),je=ie.some(wt=>Le[wt]?.loading),rt=ie.some(wt=>Le[wt]?.result?.length&&!Le[wt]?.error),dt=(0,ot.wW)(vn),Ct=(0,D.useMemo)(()=>kt(W,Xt(W.options.sortOrder,Object.values(Le).flatMap(({result:wt=[]})=>(0,ss.ZL)(wt)))),[W,Le]),Et=Ct.length===0?"No alerts matching filters":void 0;return!Oa.Vt.hasPermission(Xe.AccessControlAction.AlertingRuleRead)&&!Oa.Vt.hasPermission(Xe.AccessControlAction.AlertingRuleExternalRead)?D.createElement(Ea.b,{title:"Permission required"},"Sorry, you do not have the required permissions to read alert rules"):D.createElement(_e.$,{autoHeightMin:"100%",autoHeightMax:"100%"},D.createElement("div",{className:dt.container},Ve&&je&&!rt&&D.createElement(ma.u,{text:"Loading..."}),Et&&D.createElement("div",{className:dt.noAlertsMessage},Et),D.createElement("section",null,W.options.viewMode===sn.wO.Stat&&rt&&D.createElement(Xa.w6,{width:W.width,height:W.height,graphMode:Xa.IG.None,textMode:Xa.jG.Auto,justifyMode:Xa.ap.Auto,theme:X.vc.theme2,value:{text:`${Ct.length}`,numeric:Ct.length}}),W.options.viewMode===sn.wO.List&&W.options.groupMode===sn.LM.Custom&&rt&&D.createElement(es,{rules:Ct,options:W.options}),W.options.viewMode===sn.wO.List&&W.options.groupMode===sn.LM.Default&&rt&&D.createElement(ts,{rules:Ct,options:W.options}))))}function Xt(W,te){if(W===sn.As.Importance)return(0,R.sortBy)(te,Ce=>Ft.Z.alertStateSortScore[Ce.state]);if(W===sn.As.TimeAsc)return(0,R.sortBy)(te,Ce=>(0,ss.ub)(Ce.rule)||new Date);if(W===sn.As.TimeDesc)return(0,R.sortBy)(te,Ce=>(0,ss.ub)(Ce.rule)||new Date).reverse();const ie=(0,R.sortBy)(te,Ce=>Ce.rule.name.toLowerCase());return W===sn.As.AlphaDesc&&ie.reverse(),ie}function kt(W,te){const{options:ie,replaceVariables:Ce}=W;let Le=[...te];if(ie.dashboardAlerts){const Ve=(0,en.h4)().getCurrent()?.uid;Le=Le.filter(({rule:{annotations:je={}}})=>Object.entries(je).some(([rt,dt])=>rt===lt.q6.dashboardUID&&dt===Ve))}if(ie.alertName){const Ve=Ce(ie.alertName);Le=Le.filter(({rule:{name:je}})=>je.toLocaleLowerCase().includes(Ve.toLocaleLowerCase()))}if(Le=Le.filter(Ve=>ie.stateFilter.firing&&Ve.rule.state===Qn.x_.Firing||ie.stateFilter.pending&&Ve.rule.state===Qn.x_.Pending||ie.stateFilter.normal&&Ve.rule.state===Qn.x_.Inactive),ie.alertInstanceLabelFilter){const Ve=Ce(ie.alertInstanceLabelFilter),je=(0,Je.Zh)(Ve);Le=Le.reduce((rt,dt)=>{const Ct=(dt.rule.alerts??[]).filter(({labels:Et})=>(0,Je.eD)(Et,je));return Ct.length&&rt.push({...dt,rule:{...dt.rule,alerts:Ct}}),rt},[])}if(ie.folder&&(Le=Le.filter(Ve=>Ve.namespaceName===ie.folder.title)),ie.datasource){const Ve=ie.datasource===we.JY;Le=Le.filter(Ve?({dataSourceName:je})=>je===we.GC:({dataSourceName:je})=>je===ie.datasource)}return Le=Le.reduce((Ve,je)=>(Ua(ie,je.rule.alerts??[]).length&&Ve.push(je),Ve),[]),Le}const vn=W=>({cardContainer:x.css`
    padding: ${W.spacing(.5)} 0 ${W.spacing(.25)} 0;
    line-height: ${W.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:x.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:x.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:x.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${W.colors.background.secondary};
    padding: ${W.spacing(.5)} ${W.spacing(1)};
    border-radius: ${W.shape.borderRadius(2)};
    margin-bottom: ${W.spacing(.5)};

    & > * {
      margin-right: ${W.spacing(1)};
    }
  `,alertName:x.css`
    font-size: ${W.typography.h6.fontSize};
    font-weight: ${W.typography.fontWeightBold};
  `,alertLabels:x.css`
    > * {
      margin-right: ${W.spacing(.5)};
    }
  `,alertDuration:x.css`
    font-size: ${W.typography.bodySmall.fontSize};
  `,alertRuleItemText:x.css`
    font-weight: ${W.typography.fontWeightBold};
    font-size: ${W.typography.bodySmall.fontSize};
    margin: 0;
  `,alertRuleItemTime:x.css`
    color: ${W.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:x.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:x.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:x.css`
    margin-right: ${W.spacing(.5)};
  `,instanceDetails:x.css`
    min-width: 1px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,customGroupDetails:x.css`
    margin-bottom: ${W.spacing(.5)};
  `});class An{getSuggestionsForData(te){const{dataSummary:ie}=te;if(ie.hasData)return;te.getListAppender({name:"Dashboard list",pluginId:"dashlist",options:{}}).append({})}}function Wn(W){return W.showOptions===sn.kx.Current}const Xn=new me.c(Mn).setPanelOptions(W=>{W.addSelect({name:"Show",path:"showOptions",settings:{options:[{label:"Current state",value:sn.kx.Current},{label:"Recent state changes",value:sn.kx.RecentChanges}]},defaultValue:sn.kx.Current,category:["Options"]}).addNumberInput({name:"Max items",path:"maxItems",defaultValue:10,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",settings:{options:[{label:"Alphabetical (asc)",value:sn.As.AlphaAsc},{label:"Alphabetical (desc)",value:sn.As.AlphaDesc},{label:"Importance",value:sn.As.Importance},{label:"Time (asc)",value:sn.As.TimeAsc},{label:"Time (desc)",value:sn.As.TimeDesc}]},defaultValue:sn.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",defaultValue:"",category:["Filter"],showIf:Wn}).addTextInput({path:"dashboardTitle",name:"Dashboard title",defaultValue:"",category:["Filter"],showIf:Wn}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:null,editor:function({value:ie,onChange:Ce}){return D.createElement(qn,{initialFolderId:ie,onChange:Le=>Ce(Le?.id),extraFolders:[kn,Jn]})},category:["Filter"],showIf:Wn}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:[],editor(te){return D.createElement(Ne.B,{tags:te.value,onChange:te.onChange})},category:["Filter"],showIf:Wn}).addBooleanSwitch({path:"stateFilter.ok",name:"Ok",defaultValue:!1,category:["State filter"],showIf:Wn}).addBooleanSwitch({path:"stateFilter.paused",name:"Paused",defaultValue:!1,category:["State filter"],showIf:Wn}).addBooleanSwitch({path:"stateFilter.no_data",name:"No data",defaultValue:!1,category:["State filter"],showIf:Wn}).addBooleanSwitch({path:"stateFilter.execution_error",name:"Execution error",defaultValue:!1,category:["State filter"],showIf:Wn}).addBooleanSwitch({path:"stateFilter.alerting",name:"Alerting",defaultValue:!1,category:["State filter"],showIf:Wn}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!1,category:["State filter"],showIf:Wn})}).setMigrationHandler(ea).setSuggestionsSupplier(new An),Ha=new me.c(Zs).setPanelOptions(W=>{W.addRadio({path:"viewMode",name:"View mode",description:"Toggle between list view and stat view",defaultValue:sn.wO.List,settings:{options:[{label:"List",value:sn.wO.List},{label:"Stat",value:sn.wO.Stat}]},category:["Options"]}).addRadio({path:"groupMode",name:"Group mode",description:"How alert instances should be grouped",defaultValue:sn.LM.Default,settings:{options:[{value:sn.LM.Default,label:"Default grouping"},{value:sn.LM.Custom,label:"Custom grouping"}]},category:["Options"]}).addCustomEditor({path:"groupBy",name:"Group by",description:"Filter alerts using label querying",id:"groupBy",defaultValue:[],showIf:te=>te.groupMode===sn.LM.Custom,category:["Options"],editor:te=>D.createElement(va,{id:te.id??"groupBy",defaultValue:te.value.map(ie=>({label:ie,value:ie})),onChange:te.onChange})}).addNumberInput({name:"Max items",path:"maxItems",description:"Maximum alerts to display",defaultValue:20,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",description:"Sort order of alerts and alert instances",settings:{options:[{label:"Alphabetical (asc)",value:sn.As.AlphaAsc},{label:"Alphabetical (desc)",value:sn.As.AlphaDesc},{label:"Importance",value:sn.As.Importance},{label:"Time (asc)",value:sn.As.TimeAsc},{label:"Time (desc)",value:sn.As.TimeDesc}]},defaultValue:sn.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",description:"Show alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",description:"Filter for alerts containing this text",defaultValue:"",category:["Filter"]}).addTextInput({path:"alertInstanceLabelFilter",name:"Alert instance label",description:'Filter alert instances using label querying, ex: {severity="critical", instance=~"cluster-us-.+"}',defaultValue:"",category:["Filter"]}).addCustomEditor({path:"folder",name:"Folder",description:"Filter for alerts in the selected folder (only for Grafana alerts)",id:"folder",defaultValue:null,editor:function(ie){return D.createElement(Ze.Es,{enableReset:!0,showRoot:!1,allowEmpty:!0,initialTitle:ie.value?.title,initialFolderUid:ie.value?.uid,permissionLevel:Xe.PermissionLevelString.View,onClear:()=>ie.onChange(""),...ie})},category:["Filter"]}).addCustomEditor({path:"datasource",name:"Datasource",description:"Filter alerts from selected datasource",id:"datasource",defaultValue:null,editor:function(ie){return D.createElement(Ae.q,{...ie,type:["prometheus","loki","grafana"],noDefault:!0,current:ie.value,onChange:Ce=>ie.onChange(Ce.name),onClear:()=>ie.onChange(null)})},category:["Filter"]}).addBooleanSwitch({path:"stateFilter.firing",name:"Alerting / Firing",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.noData",name:"No Data",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.normal",name:"Normal",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.error",name:"Error",defaultValue:!0,category:["Alert state filter"]})}),Qa=Re.v.unifiedAlertingEnabled?Ha:Xn;var ka=e(95484),ys=e(83383),xs=e(25318),Ga=e(55294),or=e(37932),bs=e(34807),ur=e(7804),mr=e(398),Sr=e(97063),Wr=e(39856),ms=e(61860);const Mr=({options:W,annotation:te,formatDate:ie,onClick:Ce,onAvatarClick:Le,onTagClick:Ve})=>{const je=(0,ot.wW)(pr),{showUser:rt,showTags:dt,showTime:Ct}=W,{text:Et="",login:wt,email:zt,avatarUrl:Vt,tags:dn,time:un,timeEnd:Cn}=te,Qt=()=>{Ce(te)},ln=()=>{Le(te)},_t=wt&&rt,mn=un&&Ct,Hn=Cn&&Cn!==un&&Ct;return D.createElement(ht.Z,{className:je.card,onClick:Qt},D.createElement(ht.Z.Heading,null,D.createElement(Wr.D,{className:je.heading,onClick:In=>{In.stopPropagation()},content:Et})),mn&&D.createElement(ht.Z.Description,{className:je.timestamp},D.createElement(tn,{formatDate:ie,time:un}),Hn&&D.createElement(D.Fragment,null,D.createElement("span",{className:je.time},"-"),D.createElement(tn,{formatDate:ie,time:Cn})," ")),_t&&D.createElement(ht.Z.Meta,{className:je.meta},D.createElement(ir,{email:zt,login:wt,avatarUrl:Vt,onClick:ln})),dt&&dn&&D.createElement(ht.Z.Tags,null,D.createElement(bs.P,{tags:dn,onClick:In=>Ve(In,!1)})))},ir=({onClick:W,avatarUrl:te,login:ie,email:Ce})=>{const Le=(0,ot.wW)(pr),Ve=rt=>{rt.stopPropagation(),W()},je=D.createElement("span",null,"Created by:",D.createElement("br",null)," ",Ce);return D.createElement(ms.u,{content:je,theme:"info",placement:"top"},D.createElement("button",{onClick:Ve,className:Le.avatar,"aria-label":`Created by ${Ce}`},D.createElement("img",{src:te,alt:"avatar icon"})))},tn=({time:W,formatDate:te})=>{const ie=(0,ot.wW)(pr);return D.createElement("span",{className:ie.time},D.createElement("span",null,te(W)))};function pr(W){return{card:(0,x.css)({gridTemplateAreas:'"Heading Description Meta Tags"',gridTemplateColumns:"auto 1fr auto auto",padding:W.spacing(1),margin:W.spacing(.5),width:"inherit"}),heading:(0,x.css)({a:{zIndex:1,position:"relative",color:W.colors.text.link,"&:hover":{textDecoration:"underline"}}}),meta:(0,x.css)({margin:0,position:"relative",justifyContent:"end"}),timestamp:(0,x.css)({margin:0,alignSelf:"center"}),time:(0,x.css)({marginLeft:W.spacing(1),marginRight:W.spacing(1),fontSize:W.typography.bodySmall.fontSize,color:W.colors.text.secondary}),avatar:(0,x.css)({border:"none",background:"inherit",margin:0,padding:W.spacing(.5),img:{borderRadius:"50%",width:W.spacing(2),height:W.spacing(2)}})}}class $r extends D.PureComponent{constructor(te){super(te),this.style=Br(Re.v.theme2),this.subs=new ka.w0,this.tagListRef=D.createRef(),this.onAnnoClick=async ie=>{if(!ie.time)return;const{options:Ce}=this.props,Ve=(0,en.h4)().getCurrent(),je={from:this._timeOffset(ie.time,Ce.navigateBefore,!0),to:this._timeOffset(ie.timeEnd??ie.time,Ce.navigateAfter,!1)};if(Ce.navigateToPanel&&(je.viewPanel=ie.panelId),Ve?.uid===ie.dashboardUID){or.E1.partial(je);return}const rt=await(0,vt.i)().get("/api/search",{dashboardUIDs:ie.dashboardUID});if(rt&&rt.length&&rt[0].uid===ie.dashboardUID){const dt=rt[0],Ct=new URL(dt.url,window.location.origin);Ct.searchParams.set("from",je.from),Ct.searchParams.set("to",je.to),or.E1.push(ys.u.stripBaseFromUrl(Ct.toString()));return}Sr.Z.emit(xs.SI.alertWarning,["Unknown Dashboard: "+ie.dashboardUID])},this.onTagClick=(ie,Ce)=>{if(!Ce&&this.state.queryTags.includes(ie))return;const Le=Ce?this.state.queryTags.filter(je=>je!==ie):[...this.state.queryTags,ie];let Ve;if(Ce){const je=document.activeElement,rt=je?.getAttribute("data-tag-id");if(this.tagListRef.current?.contains(je)&&rt){const dt=Number.parseInt(rt,10),Ct=this.tagListRef.current.querySelector(`[data-tag-id="${dt+1}"]`)??this.tagListRef.current.querySelector(`[data-tag-id="${dt-1}"]`);Ct instanceof HTMLElement&&(Ve=Ct)}}this.setState({queryTags:Le},()=>Ve?.focus())},this.onUserClick=ie=>{this.setState({queryUser:{id:ie.userId,login:ie.login,email:ie.email}})},this.onClearUser=()=>{this.setState({queryUser:void 0})},this.renderItem=(ie,Ce)=>{const{options:Le}=this.props,Ve=(0,en.h4)().getCurrent();return Ve?D.createElement(Mr,{annotation:ie,formatDate:Ve.formatDate,onClick:this.onAnnoClick,onAvatarClick:this.onUserClick,onTagClick:this.onTagClick,options:Le}):D.createElement(D.Fragment,null)},this.state={annotations:[],timeInfo:"",loaded:!1,queryTags:[]}}componentDidMount(){this.doSearch(),this.subs.add(this.props.eventBus.getStream(Ga.n1).subscribe({next:()=>{this.doSearch()}}))}componentWillUnmount(){this.subs.unsubscribe()}componentDidUpdate(te,ie){const{options:Ce,timeRange:Le}=this.props;(Ce!==te.options||this.state.queryTags!==ie.queryTags||this.state.queryUser!==ie.queryUser||Ce.onlyInTimeRange&&Le!==te.timeRange)&&this.doSearch()}async doSearch(){const{options:te}=this.props,{queryUser:ie,queryTags:Ce}=this.state,Le={tags:te.tags,limit:te.limit,type:"annotation"};te.onlyFromThisDashboard&&(Le.dashboardUID=(0,en.h4)().getCurrent()?.uid);let Ve="";if(te.onlyInTimeRange){const{timeRange:rt}=this.props;Le.from=rt.from.valueOf(),Le.to=rt.to.valueOf()}else Ve="All Time";ie&&(Le.userId=ie.id),te.tags&&te.tags.length&&(Le.tags=te.tags.map(rt=>this.props.replaceVariables(rt))),Ce.length&&(Le.tags=Le.tags?[...Le.tags,...Ce]:Ce);const je=await(0,vt.i)().get("/api/annotations",Le,`anno-list-panel-${this.props.id}`);this.setState({annotations:je,timeInfo:Ve,loaded:!0})}_timeOffset(te,ie,Ce=!1){let Le=5,Ve="m";const je=/^(\d+)(\w)/.exec(ie);je&&je.length===3&&(Le=parseInt(je[1],10),Ve=je[2]);const rt=(0,ut.CQ)(te);return Ce&&(Le*=-1),rt.add(Le,Ve).valueOf()}render(){const{loaded:te,annotations:ie,queryUser:Ce,queryTags:Le}=this.state;if(!te)return D.createElement("div",null,"loading...");const Ve=Ce||Le.length>0;return D.createElement(_e.$,{autoHeightMin:"100%"},Ve&&D.createElement("div",{className:this.style.filter},D.createElement("b",null,"Filter:"),Ce&&D.createElement(Ye.zx,{size:"sm",variant:"secondary",fill:"text",onClick:this.onClearUser,"aria-label":`Remove filter: ${Ce.email}`},Ce.email),Le.length>0&&D.createElement(bs.P,{icon:"times",tags:Le,onClick:je=>this.onTagClick(je,!0),getAriaLabel:je=>`Remove ${je} tag`,className:this.style.tagList,ref:this.tagListRef})),ie.length<1&&D.createElement("div",{className:this.style.noneFound},"No Annotations Found"),D.createElement(mr.L,{items:ie,renderItem:this.renderItem,getItemKey:je=>`${je.id}`}))}}const Br=(0,ur.B)(W=>({noneFound:x.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: calc(100% - 30px);
  `,filter:(0,x.css)({alignItems:"center",display:"flex",flexWrap:"wrap",gap:W.spacing(.5),padding:W.spacing(.5)}),tagList:(0,x.css)({justifyContent:"flex-start","li > button":{paddingLeft:"3px"}})})),it=Object.freeze([0,0]),Dt={limit:10,navigateAfter:"10m",navigateBefore:"10m",navigateToPanel:!0,onlyFromThisDashboard:!1,onlyInTimeRange:!1,showTags:!0,showTime:!0,showUser:!0,tags:[]},Lt=new me.c($r).setPanelOptions(W=>{W.addRadio({category:["Annotation query"],path:"onlyFromThisDashboard",name:"Query filter",defaultValue:Dt.onlyFromThisDashboard,settings:{options:[{value:!1,label:"All dashboards"},{value:!0,label:"This dashboard"}]}}).addRadio({category:["Annotation query"],path:"onlyInTimeRange",name:"Time range",defaultValue:Dt.onlyInTimeRange,settings:{options:[{value:!1,label:"None"},{value:!0,label:"This dashboard"}]}}).addCustomEditor({category:["Annotation query"],id:"tags",path:"tags",name:"Tags",description:"Match annotation tags",editor(te){return D.createElement(Ne.B,{tags:te.value,onChange:te.onChange})}}).addNumberInput({category:["Annotation query"],path:"limit",name:"Limit",defaultValue:Dt.limit}).addBooleanSwitch({category:["Display"],path:"showUser",name:"Show user",defaultValue:Dt.showUser}).addBooleanSwitch({category:["Display"],path:"showTime",name:"Show time",defaultValue:Dt.showTime}).addBooleanSwitch({category:["Display"],path:"showTags",name:"Show tags",defaultValue:Dt.showTags}).addRadio({category:["Link behavior"],path:"navigateToPanel",name:"Link target",defaultValue:Dt.navigateToPanel,settings:{options:[{value:!0,label:"Panel"},{value:!1,label:"Dashboard"}]}}).addTextInput({category:["Link behavior"],path:"navigateBefore",name:"Time before",defaultValue:Dt.navigateBefore,description:""}).addTextInput({category:["Link behavior"],path:"navigateAfter",name:"Time after",defaultValue:Dt.navigateAfter,description:""})}).setPanelChangeHandler((W,te,ie)=>te==="ryantxu-annolist-panel"?ie:W.options);var Gt=e(68061),Zt=e(66926),cn=e(78798),hn=e(89890),Tn=e(20251),fn=e(14582),Rt=e(40538),ya=e(26372),Sa=e(34315),Ca=e(91511),wa=e(77587),rs=e(31911),Fa=e(25272),zs=e(74855),_a=e(38067),Bt=e(87670),Ge=e(60325),We=e(4176),ct=e(23888),St=e(729),$t=e(78056),qt=e(68416),Yt=e(72269),Dn=e(85511),Nn=e(20888),wn=e(29431),Un=e(1105);const _n=({config:W,onUPlotClick:te,setFocusedSeriesIdx:ie,setFocusedPointIdx:Ce,setCoords:Le,setHover:Ve,isToolTipOpen:je,isActive:rt,setIsActive:dt,sync:Ct})=>{je.current=!1;const Et=()=>{dt&&dt(!0)},wt=()=>{je.current||(Le(null),dt&&dt(!1))};let zt=null,Vt=null;W.addHook("init",Qt=>{zt=Qt.root.parentElement,Vt=Qt.over,zt?.addEventListener("click",te),Vt.addEventListener("mouseleave",wt),Vt.addEventListener("mouseenter",Et),Ct&&Ct()===wn.m.Crosshair&&Qt.root.classList.add("shared-crosshair")});const dn=()=>{je.current&&(Le(null),te())};W.addHook("drawClear",dn),W.addHook("destroy",()=>{zt?.removeEventListener("click",te),Vt?.removeEventListener("mouseleave",wt),Vt?.removeEventListener("mouseenter",Et),dn()});let un;W.addHook("syncRect",(Qt,ln)=>{un=ln});const Cn=W.getTooltipInterpolator();return Cn&&W.addHook("setCursor",Qt=>{je.current||Cn(ie,Ce,ln=>{if(ln){Le(null);return}if(!un)return;const{x:_t,y:mn}=(0,Un._)(Qt,un);_t!==void 0&&mn!==void 0&&Le({canvas:{x:Qt.cursor.left,y:Qt.cursor.top},viewport:{x:_t,y:mn}})},Qt)}),W.addHook("setLegend",Qt=>{if(!je.current&&!Cn&&Ce(Qt.legend.idx),Qt.cursor.idxs!=null)for(let ln=0;ln<Qt.cursor.idxs.length;ln++){const _t=Qt.cursor.idxs[ln];if(_t!=null){const mn={xIndex:_t,yIndex:0,pageX:un.left+Qt.cursor.left,pageY:un.top+Qt.cursor.top};(!je.current||!mn)&&Ve(mn);return}}}),W.addHook("setSeries",(Qt,ln)=>{je.current||ie(ln)}),W};var ns=e(50796),os=e(97551),ks=e(19942),Aa=e(75974),Za=e(20112),cs=e(425),as=e(98234),Rs=e(19695),Ys=e(36512),hr=e(21760),kr=e(13347),Ns=e(2445),vr=e(25532),wr=e(64724),Nr=e(28586),Yr=e(60892);const Ts=Nr.Gj,To=Nr.Gj,ds=8,nr=30,Bo=.65,Oo=.1,gi=.15,Ol=5,pi=10,qo=.1;function Il(W,te,ie,Ce,Le){const Ve=(0,We.X1)(W,14),je=te/(Ve.width+2)*14,rt=ie/Ce,dt=Math.min(rt,je);return{fontSize:Math.min(dt,Le??dt),textMetrics:Ve}}function ji(W,te){const{xOri:ie,xDir:Ce,rawValue:Le,getColor:Ve,formatValue:je,formatShortValue:rt,fillOpacity:dt=1,showValue:Ct,xSpacing:Et=0}=W,wt=ie===Rt.wN.Horizontal,zt=!Boolean(W.text?.valueSize),Vt=W.stacking!==Rt.o0.None,dn=W.stacking===Rt.o0.Percent;let{groupWidth:un,barWidth:Cn,barRadius:Qt=0}=W;Vt&&([un,Cn]=[Cn,un]);let ln,_t;const mn=Yn=>Array.from(Yn.data[0].map((oa,ca)=>ca)),Hn=Et===0?void 0:(Yn,oa)=>{const ca=Yn.bbox.width,Na=Ce*(wt?1:-1);let Va=oa.length,Os=Va-1,vs=0,_r=ca/Aa.Z.pxRatio,Hr=Math.abs(Math.floor(_r/Et));vs=Va<Hr?0:Math.ceil(Va/Hr);let mi=oa.map((no,io)=>vs!==0&&(Et>0?io:Os-io)%vs>0?null:no);return Na===1?mi:mi.reverse()},In=(Yn,oa,ca,Na,Va)=>{if(W.xTimeAuto){let Os=Yn.scales.x,vs=Os.min,_r=Os.max;Os.min=Yn.data[0][0],Os.max=Yn.data[0][Yn.data[0].length-1];let Hr=(0,ct.mr)(Yn,oa,ca,Na,Va);return Os.min=vs,Os.max=_r,Hr}return oa.map(Os=>wt?rt(0,Os):je(0,Os))},ra=(Yn,oa,ca)=>{oa=0,ca=Math.max(1,Yn.data[0].length-1);let Na=0;(0,Nr.Qm)(Yn.data[0].length,un,Ts,0,(Os,vs,_r)=>{Na=vs+_r/2});let Va=ca-oa;if(Na===.5)oa-=Va;else{let vs=(1/(1-Na*2)*Va-Va)/2;oa-=vs,ca+=vs}return[oa,ca]};let jn=(Yn,oa)=>{let ca=Array.from({length:oa},()=>({offs:Array(Yn).fill(0),size:Array(Yn).fill(0)}));return(0,Nr.Qm)(Yn,un,Ts,null,(Na,Va,Os)=>{(0,Nr.Qm)(oa,Cn,To,null,(vs,_r,Hr)=>{ca[vs].offs[Na]=Va+Os*_r,ca[vs].size[Na]=Os*Hr})}),ca},ga=(Yn,oa)=>{let ca=Array.from({length:oa},()=>({offs:Array(Yn).fill(0),size:Array(Yn).fill(0)}));return(0,Nr.Qm)(Yn,un,Ts,null,(Na,Va,Os)=>{(0,Nr.Qm)(oa,Cn,To,null,(vs,_r,Hr)=>{ca[vs].offs[Na]=Va,ca[vs].size[Na]=Os})}),ca};const Ra=wt?Oo:gi,Ta=wt?Ol:pi;let Ja=[],rr=[],Cs=1,ua,qa=W.text?.valueSize??nr,fs=Ta,fr=1/0,Cr=1/0,gr=Ve!=null,Dr=gr?{fill:{unit:3,values:(Yn,oa)=>rr[oa].fill},stroke:{unit:3,values:(Yn,oa)=>rr[oa].stroke}}:{},Qs=Aa.Z.paths.bars({radius:dn?0:Vt?(Yn,oa)=>oa===Yn.data.length-1?[Qt,0]:[0,0]:Qt,disp:{x0:{unit:2,values:(Yn,oa)=>Ja[oa].offs},size:{unit:2,values:(Yn,oa)=>Ja[oa].size},...Dr},each:(Yn,oa,ca,Na,Va,Os,vs)=>{Na-=Yn.bbox.left,Va-=Yn.bbox.top;let _r=Yn.data[oa][ca];wt?(fr=Math.min(fr,_r<0?Yn.bbox.height-(Va+vs):Va),Cr=Os):(fr=vs,Cr=Math.min(Cr,_r<0?Na:Yn.bbox.width-(Na+Os)));let Hr={x:Na,y:Va,w:Os,h:vs,sidx:oa,didx:ca};if(W.fullHighlight&&(W.xOri===Rt.wN.Horizontal?(Hr.y=0,Hr.h=Yn.bbox.height):(Hr.x=0,Hr.w=Yn.bbox.width)),ln.add(Hr),Ct!==Rt.Jp.Never){const mi=Le(oa,ca);let no=1;dn&&xr[oa][ca]&&(no=xr[oa][ca]);const io=no===0?0:mi/no,Mo=je(oa,io);if(fs=Math.min(fs,Math.round(Ra*(wt?Os:vs))),ua[ca]===void 0&&(ua[ca]={}),ua[ca][oa]={text:Mo,value:Le(oa,ca),hidden:!1},zt){const{fontSize:_o,textMetrics:fi}=Il(ua[ca][oa].text,Cr*(wt?Bo:1)-(wt?0:fs),fr*(wt?1:Bo)-(wt?fs:0),1);ua[ca][oa].textMetrics=fi;let go=Math.round(Math.min(qa,nr,_o));Cs=go/qa*(go/14),qa=go}else ua[ca][oa].textMetrics=(0,We.X1)(ua[ca][oa].text,qa);let Tl=wt?0:-Math.round(qo*qa),lo=Le(oa,ca);if(W.negY?.[oa]&&lo!=null&&(lo*=-1),lo!=null){const _o=Yn.bbox.left+(wt?Na+Os/2:lo<0?Na-fs:Na+Os+fs),fi=Yn.bbox.top+(wt?lo<0?Va+vs+fs:Va-fs:Va+vs/2-Tl),{textMetrics:go={width:1,actualBoundingBoxAscent:1,actualBoundingBoxDescent:1}}=ua[ca][oa];let Hu=0,Nm=0;wt?(Hu=go.width*Cs/2,Nm=lo>0?(go.actualBoundingBoxAscent+go.actualBoundingBoxDescent)*Cs:0):(Nm=(go.actualBoundingBoxAscent+go.actualBoundingBoxDescent)*Cs/2,Hu=lo<0?go.width*Cs:0),ua[ca][oa].x=_o,ua[ca][oa].y=fi,ua[ca][oa].bbox={x:_o-Hu,y:fi-Nm,w:go.width*Cs,h:(go.actualBoundingBoxAscent+go.actualBoundingBoxDescent)*Cs}}}}});const Ka=Yn=>{let oa=Yn.over;oa.style.overflow="hidden",Yn.root.querySelectorAll(".u-cursor-pt").forEach(ca=>{ca instanceof HTMLElement&&(ca.style.borderRadius="0",W.fullHighlight&&(ca.style.zIndex="-1"))})},gs={x:!1,y:!1,drag:{x:!1,y:!1},dataIdx:(Yn,oa)=>{if(oa===1){_t=null;let ca=Yn.cursor.left*Aa.Z.pxRatio,Na=Yn.cursor.top*Aa.Z.pxRatio;ln.get(ca,Na,1,1,Va=>{(0,Yr.Pn)(ca,Na,Va.x,Va.y,Va.x+Va.w,Va.y+Va.h)&&(Vt?(_t==null||Va.h*Va.w<_t.h*_t.w)&&(_t=Va):_t=Va)})}return _t&&oa===_t.sidx?_t.didx:null},points:{fill:"rgba(255,255,255,0.4)",bbox:(Yn,oa)=>{let ca=_t&&oa===_t.sidx,Na=0,Va=0;return Vt&&ca&&_t.sidx>1&&(wt?Na=(0,Yr.zZ)(ln,_t.sidx-1,_t.didx).h:Va=(0,Yr.zZ)(ln,_t.sidx-1,_t.didx).w),{left:ca?(_t.x+Va)/Aa.Z.pxRatio:-10,top:ca?_t.y/Aa.Z.pxRatio:-10,width:ca?(_t.w-Va)/Aa.Z.pxRatio:0,height:ca?(_t.h-Na)/Aa.Z.pxRatio:0}}}},Ls=Yn=>{if(ln=ln||new Yr.lW(0,0,Yn.bbox.width,Yn.bbox.height),ln.clear(),Yn.series.forEach(oa=>{oa._paths=null}),Vt?Ja=[null].concat(ga(Yn.data[0].length,Yn.data.length-1)):Ja=[null].concat(jn(Yn.data[0].length,Yn.data.length-1)),gr){rr=[null];for(let oa=1;oa<Yn.data.length;oa++){let ca=Yn.data[oa].map((Na,Va)=>Na!=null?Ve(oa,Va,Na):null);rr.push({fill:dt<1?ca.map(Na=>Na!=null?(0,wr.alpha)(Na,dt):null):ca,stroke:ca})}}ua={},qa=W.text?.valueSize??nr,fs=Ta,fr=Cr=1/0},cr=Yn=>{if(Ct===Rt.Jp.Never||qa<ds)return;Yn.ctx.save(),Yn.ctx.fillStyle=te.colors.text.primary,Yn.ctx.font=`${qa}px ${te.typography.fontFamily}`;let oa,ca;for(const Na in ua){let Va=!0;for(const Os in ua[Na]){const vs=ua[Na][Os],{text:_r,x:Hr=0,y:mi=0}=vs;let{value:no}=vs;W.negY?.[Os]&&no!=null&&(no*=-1);let io=wt?"center":no!==null&&no<0?"right":"left",Mo=wt?no!==null&&no<0?"top":"alphabetic":"middle";if(io!==oa&&(Yn.ctx.textAlign=oa=io),Mo!==ca&&(Yn.ctx.textBaseline=ca=Mo),Ct===Rt.Jp.Always)Yn.ctx.fillText(_r,Hr,mi);else if(Ct===Rt.Jp.Auto){let{bbox:Tl}=vs,lo=!1;if(Tl==null)lo=!0,vs.hidden=!0;else if(!Va)for(const _o in ua[Na]){if(_o===Os)continue;const fi=ua[Na][_o],{bbox:go,hidden:Hu}=fi;if(!Hu&&go&&(0,Yr.kK)(Tl,go)){lo=!0,vs.hidden=!0;break}}Va=!1,!lo&&Yn.ctx.fillText(_r,Hr,mi)}}}Yn.ctx.restore()},js=(Yn,oa,ca,Na)=>{_t?(Yn(_t.sidx),oa(_t.didx),ca()):ca(!0)};let xr=null;function Ms(Yn,oa){return xr=null,(0,Ns.Bj)(Yn[0],oa,({totals:ca})=>{xr=ca})}return{cursor:gs,xRange:ra,xValues:In,xSplits:mn,hFilter:Hn,barsBuilder:Qs,init:Ka,drawClear:Ls,draw:cr,interpolateTooltip:js,prepData:Ms}}const Ec=Object.freeze([0,0]),Qr={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:Rt.wm.Auto,showValue:Rt.Jp.Auto,stacking:Rt.o0.None,xTickLabelRotation:0,xTickLabelSpacing:0},ei={fillOpacity:80,gradientMode:Rt.FI.None,lineWidth:1};function Yi(W){return W===Tn.wm.Vertical?{xOri:Rt.wN.Horizontal,xDir:Rt.bQ.Right,yOri:Rt.wN.Vertical,yDir:Rt.bQ.Up}:{xOri:Rt.wN.Vertical,xDir:Rt.bQ.Down,yOri:Rt.wN.Horizontal,yDir:Rt.bQ.Right}}const Oi=({frame:W,theme:te,orientation:ie,showValue:Ce,groupWidth:Le,barWidth:Ve,barRadius:je=0,stacking:rt,text:dt,rawValue:Ct,getColor:Et,fillOpacity:wt,allFrames:zt,xTickLabelRotation:Vt,xTickLabelMaxLength:dn,xTickLabelSpacing:un=0,legend:Cn,timeZone:Qt,fullHighlight:ln})=>{const _t=new kr.U,mn=(Cs,ua)=>(0,Za.zc)(W.fields[Cs].display(ua)),Hn=(Cs,ua)=>wo(mn(Cs,ua),dn),In=Yi(ie);W.fields.length===2&&(Le=Ve,Ve=1);const ra={xOri:In.xOri,xDir:In.xDir,groupWidth:Le,barWidth:Ve,barRadius:je,stacking:rt,rawValue:Ct,getColor:Et,fillOpacity:wt,formatValue:mn,formatShortValue:Hn,timeZone:Qt,text:dt,showValue:Ce,legend:Cn,xSpacing:un,xTimeAuto:W.fields[0]?.type===fn.fS.time&&!W.fields[0].config.unit?.startsWith("time:"),negY:W.fields.map(Cs=>Cs.config.custom?.transform===Rt.pR.NegativeY),fullHighlight:ln},jn=ji(ra,te);if(_t.setCursor(jn.cursor),_t.addHook("init",jn.init),_t.addHook("drawClear",jn.drawClear),_t.addHook("draw",jn.draw),_t.setTooltipInterpolator(jn.interpolateTooltip),Vt!==0){let Cs=50,ua=In.xOri===Rt.wN.Horizontal?14:5;_t.setPadding(Qi(W,Vt,dn,Cs,ua))}_t.setPrepData(jn.prepData),_t.addScale({scaleKey:"x",isTime:!1,range:jn.xRange,distribution:Rt.wf.Ordinal,orientation:In.xOri,direction:In.xDir});const ga=W.fields[0].config.custom?.axisPlacement!==Rt.LB.Hidden?In.xOri===Rt.wN.Horizontal?Rt.LB.Bottom:Rt.LB.Left:Rt.LB.Hidden,Ra=W.fields[0].config.custom?.axisPlacement!==Rt.LB.Hidden;_t.addAxis({scaleKey:"x",isTime:!1,placement:ga,label:W.fields[0].config.custom?.axisLabel,splits:jn.xSplits,filter:In.xOri===0?jn.hFilter:void 0,values:jn.xValues,timeZone:Qt,grid:{show:!1},ticks:{show:!1},gap:15,tickLabelRotation:In.xOri===0?Vt*-1:0,theme:te,show:Ra});let Ta=0;const Ja=Ii(Cn);for(let Cs=1;Cs<W.fields.length;Cs++){const ua=W.fields[Cs];Ta++;const qa={...ei,...ua.config.custom},fs=ua.config.unit||Yt.j,fr=(0,cs.fD)(ua),gr=(0,cs.YO)(ua,te).color;let Dr=qa.axisSoftMin,Qs=qa.axisSoftMax;if(Dr==null&&ua.config.min==null&&(Dr=0),Qs==null&&ua.config.max==null&&(Qs=0),qa.thresholdsStyle&&ua.config.thresholds&&(qa.thresholdsStyle.mode??Rt.i3.Off)!==Rt.i3.Off&&_t.addThresholds({config:qa.thresholdsStyle,thresholds:ua.config.thresholds,scaleKey:fs,theme:te,hardMin:ua.config.min,hardMax:ua.config.max,softMin:qa.axisSoftMin,softMax:qa.axisSoftMax}),_t.addSeries({scaleKey:fs,pxAlign:!0,lineWidth:qa.lineWidth,lineColor:gr,fillOpacity:qa.fillOpacity,theme:te,colorMode:fr,pathBuilder:jn.barsBuilder,show:!qa.hideFrom?.viz,gradientMode:qa.gradientMode,thresholds:ua.config.thresholds,hardMin:ua.config.min,hardMax:ua.config.max,softMin:Dr,softMax:Qs,dataFrameFieldIndex:{fieldIndex:Ja?Cs:zt[0].fields.findIndex(Ka=>Ka.type===fn.fS.number&&Ka.state?.seriesIndex===Ta-1),frameIndex:0}}),_t.addScale({scaleKey:fs,min:ua.config.min,max:ua.config.max,softMin:Dr,softMax:Qs,orientation:In.yOri,direction:In.yDir,distribution:qa.scaleDistribution?.type,log:qa.scaleDistribution?.log}),qa.axisPlacement!==Rt.LB.Hidden){let Ka=qa.axisPlacement;(!Ka||Ka===Rt.LB.Auto)&&(Ka=Rt.LB.Left),In.xOri===1&&(Ka===Rt.LB.Left&&(Ka=Rt.LB.Bottom),Ka===Rt.LB.Right&&(Ka=Rt.LB.Top)),_t.addAxis({scaleKey:fs,label:qa.axisLabel,size:qa.axisWidth,placement:Ka,formatValue:(gs,Ls)=>(0,Za.zc)(ua.display(gs,Ls)),filter:In.yOri===0?jn.hFilter:void 0,tickLabelRotation:In.xOri===1?Vt*-1:0,theme:te,grid:{show:qa.axisGridShow}})}}let rr=(0,Ns.i7)(W);return _t.setStackingGroups(rr),_t};function wo(W,te){return W.length>te?W.substring(0,te).concat("..."):W}function Qi(W,te,ie,Ce=0,Le=0){const Ve=W.fields[0].values,je=ct.gD,rt=W.fields[0].display??(zt=>zt);let dt=0;for(let zt=0;zt<Ve.length;zt++){let Vt=(0,We.X1)(wo((0,Za.zc)(rt(Ve.get(zt))),ie),je);dt=Vt.width>dt?Vt.width:dt}const Ct=te>0?Math.cos(te*Math.PI/180)*(0,We.X1)(wo((0,Za.zc)(rt(Ve.get(Ve.length-1))),ie),je).width:0,Et=te<0?Math.cos(te*-1*Math.PI/180)*(0,We.X1)(wo((0,Za.zc)(rt(Ve.get(0))),ie),je).width:0,wt=Math.sin((te>=0?te:te*-1)*Math.PI/180)*dt-Le;return[Math.round(ct.gD*Aa.Z.pxRatio),Ct,wt,Math.max(0,Et-Ce)]}function Po(W,te,ie){if(!W?.length)return{warn:"No data in response"};const Ce=W.length===1?(0,as.Y3)(W[0],W[0].fields.findIndex(wt=>wt.type===fn.fS.time)):(0,as._9)({frames:W});if(!Ce)return{warn:"Unable to join data"};let Le;if(ie.colorByField&&(Le=(0,vr.findField)(Ce,ie.colorByField),!Le))return{warn:"Color field not found"};let Ve;if(ie.xField&&(Ve=(0,vr.findField)(Ce,ie.xField),!Ve))return{warn:"Configured x field not found"};let je,rt,dt=[];for(const wt of Ce.fields)if(wt!==Ve)switch(wt.type){case fn.fS.string:je||(je=wt);break;case fn.fS.time:rt||(rt=wt);break;case fn.fS.number:{const zt={...wt,state:{...wt.state,seriesIndex:dt.length},config:{...wt.config,custom:{...wt.config.custom,stacking:{group:"_",mode:ie.stacking}}},values:new Rs.G(wt.values.toArray().map(Vt=>Number.isFinite(Vt)||Vt==null?Vt:null))};ie.stacking===Rt.o0.Percent&&(zt.config.unit="percentunit",zt.display=(0,Ys.U)({field:zt,theme:te})),dt.push(zt)}}let Ct=Ve;if(Ct||(Ct=je||rt),!Ct)return{warn:"Bar charts requires a string or time field"};if(!dt.length)return{warn:"No numeric fields found"};if(Le&&dt.length>1){const wt=dt.find(zt=>zt!==Le);wt&&(dt=[wt])}if(Ii(ie.legend)){const wt=ie.legend.sortBy.toLowerCase(),zt=ie.legend.calcs??[wt];dt=(0,R.orderBy)(dt,Vt=>(0,hr.Kx)({field:Vt,reducers:zt})[wt],ie.legend.sortDesc?"desc":"asc")}let Et=dt;return ie.stacking===Rt.o0.Percent&&(Et=dt.map(wt=>{const zt=Ce.fields.find(dn=>dn.name===wt.name),Vt={...wt,config:{...zt.config},values:wt.values};return Vt.display=(0,Ys.U)({field:Vt,theme:te}),Vt}),Et.unshift(Ct)),dt.unshift(Ct),{aligned:Ce,colorByField:Le,viz:[{length:Ct.values.length,fields:dt}],legend:{fields:Et,length:Ct.values.length}}}const Ii=W=>Boolean(W?.sortBy&&W.sortDesc!==null),Rl=10,ti=["orientation","barWidth","barRadius","xTickLabelRotation","xTickLabelMaxLength","xTickLabelSpacing","groupWidth","stacking","showValue","xField","colorField","legend",(W,te)=>te.text?.valueSize===W.text?.valueSize],Zi=({data:W,options:te,fieldConfig:ie,width:Ce,height:Le,timeZone:Ve,id:je})=>{const rt=(0,ot.l4)(),{eventBus:dt}=(0,Ge.R9)(),Ct=(0,D.useRef)(void 0),Et=(0,D.useRef)(!1),[wt,zt]=(0,D.useState)(void 0),[Vt,dn]=(0,D.useState)(null),[un,Cn]=(0,D.useState)(null),[Qt,ln]=(0,D.useState)(null),[_t,mn]=(0,D.useState)(!1),[Hn,In]=(0,D.useState)(!1),ra=()=>{Et.current=!1,dn(null),In(!1)},jn=()=>{Et.current=!Et.current,In(Et.current)},ga=(0,D.useRef)(),Ra=(0,D.useRef)(),Ta=(0,D.useMemo)(()=>Po(W?.series,rt,te),[W,rt,te]),Ja="viz"in Ta?Ta:null;Ra.current=Ja?.colorByField;const rr=(0,D.useRef)(1e4);(0,D.useMemo)(()=>{rr.current++},[te]);const Cs=(0,D.useMemo)(()=>{const Ka=Ja?.viz[0],gs=ga.current;return Ka&&gs&&(0,_a.Ch)(Ka,gs,!0)||rr.current++,ga.current=Ka,(W.structureRev??0)+rr.current},[Ja,W.structureRev]),ua=(0,D.useMemo)(()=>!te.orientation||te.orientation===Tn.wm.Auto?Ce<Le?Tn.wm.Horizontal:Tn.wm.Vertical:te.orientation,[Ce,Le,te.orientation]),qa=(0,D.useMemo)(()=>{if(te.xTickLabelMaxLength)return te.xTickLabelMaxLength;{const Ka=te.xTickLabelRotation,gs=(0,We.X1)("M",ct.gD).width;return Le/2/(Math.sin((Ka>=0?Ka:Ka*-1)*Math.PI/180)*gs)-3}},[Le,te.xTickLabelRotation,te.xTickLabelMaxLength]);if("warn"in Ta)return D.createElement(Bt.Z,{panelId:je,fieldConfig:ie,data:W,message:Ta.warn,needsNumberField:!0});const fs=(Ka,gs,Ls)=>{const cr=gs==null?null:Ka.fields[gs];if(cr){const Ms=(0,hn.C)(cr,Ka);gs=Ta.aligned.fields.findIndex(Yn=>Ms===(0,hn.C)(Yn,Ta.aligned))}const js=te.fullHighlight&&te.stacking!==Rt.o0.None?Rt.f3.Multi:te.tooltip.mode,xr=te.tooltip.mode===Rt.f3.Multi?te.tooltip.sort:Rt.As.None;return D.createElement(D.Fragment,null,Hn&&D.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},D.createElement(ns.P,{onClick:ra,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),D.createElement(ks.H,{data:Ta.aligned,rowIndex:Ls,columnIndex:gs,sortOrder:xr,mode:js}))},fr=Ka=>{const{legend:gs}=te;if(!Ka||gs.showLegend===!1)return null;if(Ta.colorByField){const Ls=(0,os.$m)([Ta.colorByField],rt);if(Ls?.length)return D.createElement(St.AY.Legend,{placement:gs.placement},D.createElement($t.l,{placement:gs.placement,items:Ls,displayMode:gs.displayMode}))}return D.createElement(qt.l,{data:[Ta.legend],config:Ka,maxHeight:"35%",maxWidth:"60%",...te.legend})},Cr=(Ka,gs)=>ga.current.fields[Ka].values.get(gs);let gr,Dr=1;if(Ta.colorByField){const Ka=Ta.colorByField,gs=Ka.display;Dr=(Ka.config.custom.fillOpacity??100)/100,gr=(Ls,cr)=>gs(Ra.current?.values.get(cr)).color}else ga.current.fields.some(gs=>gs.config.custom?.gradientMode===Rt.FI.Scheme&&gs.config.color?.mode===Zt.S.Thresholds||gs.config.mappings?.some(cr=>cr.type==="value"?Object.values(cr.options).some(js=>js.color!=null):cr.options.result.color!=null))&&(Dr=(ga.current.fields.find(Ls=>Ls.type===fn.fS.number).config.custom.fillOpacity??100)/100,gr=(Ls,cr)=>{let js=ga.current.fields[Ls];return js.display(js.values.get(cr)).color});const Qs=(Ka,gs,Ls)=>{const{barWidth:cr,barRadius:js=0,showValue:xr,groupWidth:Ms,stacking:Yn,legend:oa,tooltip:ca,text:Na,xTickLabelRotation:Va,xTickLabelSpacing:Os,fullHighlight:vs}=te;return Oi({frame:Ka,getTimeRange:Ls,timeZone:Ve,theme:rt,timeZones:[Ve],eventBus:dt,orientation:ua,barWidth:cr,barRadius:js,showValue:xr,groupWidth:Ms,xTickLabelRotation:Va,xTickLabelMaxLength:qa,xTickLabelSpacing:Os,stacking:Yn,legend:oa,tooltip:ca,text:Na,rawValue:Cr,getColor:gr,fillOpacity:Dr,allFrames:Ta.viz,fullHighlight:vs})};return D.createElement(Yt.d,{theme:rt,frames:Ta.viz,prepConfig:Qs,propsToDiff:ti,preparePlotFrame:Ka=>Ka[0],renderLegend:fr,legend:te.legend,timeZone:Ve,timeRange:{from:1,to:1},structureRev:Cs,width:Ce,height:Le},Ka=>(Ct.current!==Ka&&(Ct.current=_n({config:Ka,onUPlotClick:jn,setFocusedSeriesIdx:Cn,setFocusedPointIdx:ln,setCoords:dn,setHover:zt,isToolTipOpen:Et,isActive:_t,setIsActive:mn})),te.tooltip.mode===Rt.f3.None?null:D.createElement(Dn.h_,null,wt&&Vt&&un&&D.createElement(Nn.S,{position:{x:Vt.viewport.x,y:Vt.viewport.y},offset:{x:Rl,y:Rl},allowPointerEvents:Et.current},fs(Ta.viz[0],un,Qt)))))};var Zr=e(52081),Al=e(2594),No=e(58255);const Uo=[{label:"None",value:0,description:"Show all tick marks"},{label:"Small",value:100,description:"Require 100px spacing"},{label:"Medium",value:200,description:"Require 200px spacing"},{label:"Large",value:300,description:"Require 300px spacing"}],ni=W=>{let te=W.value??0;const ie=te<0;ie&&(te*=-1);let Ce=Uo[0];for(const je of Uo)if(Ce=je,te<=Ce.value)break;const Le=je=>{W.onChange(je*(ie?-1:1))},Ve=()=>{W.onChange(W.value*-1)};return D.createElement(Zr.Lh,null,D.createElement(Al.S,{value:Ce.value,options:Uo,onChange:Le}),te!==0&&D.createElement(ms.u,{content:"Require space from the right side",placement:"top"},D.createElement("div",null,D.createElement(No.X,{value:ie,onChange:Ve,label:"RTL"}))))};var ps=e(26410);class Fo{getListWithDefaults(te){return te.getListAppender({name:ps.y.BarChart,pluginId:"barchart",options:{showValue:Rt.Jp.Never,legend:{calcs:[],displayMode:Rt.jK.List,showLegend:!0,placement:"right"}},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:ie=>{ie.options.barWidth=.8}}})}getSuggestionsForData(te){const ie=this.getListWithDefaults(te),{dataSummary:Ce}=te;Ce.frameCount===1&&(!Ce.hasNumberField||!Ce.hasStringField||Ce.rowCountTotal>50||(ie.append({name:ps.y.BarChart}),Ce.numberFieldCount>1&&(ie.append({name:ps.y.BarChartStacked,options:{stacking:Rt.o0.Normal}}),ie.append({name:ps.y.BarChartStackedPercent,options:{stacking:Rt.o0.Percent}})),ie.append({name:ps.y.BarChartHorizontal,options:{orientation:Tn.wm.Horizontal}}),Ce.numberFieldCount>1&&(ie.append({name:ps.y.BarChartHorizontalStacked,options:{stacking:Rt.o0.Normal,orientation:Tn.wm.Horizontal}}),ie.append({name:ps.y.BarChartHorizontalStackedPercent,options:{orientation:Tn.wm.Horizontal,stacking:Rt.o0.Percent}}))))}}const Ji=new me.c(Zi).useFieldConfig({standardOptions:{[Gt.qb.Color]:{settings:{byValueSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Zt.S.PaletteClassic}}},useCustomConfig:W=>{const te=ei;W.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:te.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:te.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:ya.q.fillGradient[0].value,settings:{options:ya.q.fillGradient}}),W.addSelect({category:["Graph styles"],name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:Rt.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:Rt.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),W.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:Rt.i3.Off},settings:{options:ya.q.thresholdsDisplayModes},editor:zs.F,override:zs.F,process:cn.kG,shouldApply:()=>!0}),Sa.r(W,te,!1),Ca.B(W)}}).setPanelOptions((W,te)=>{const ie=Po(te.data,Re.v.theme2,te.options??{});let Ce="First string or time field";const Le="viz"in ie?ie.viz[0]:void 0;if(Le?.fields?.length){const Ve=Le.fields[0];Ce+=` (${(0,hn.C)(Ve,Le)})`}W.addFieldNamePicker({path:"xField",name:"X Axis",settings:{placeholderText:Ce}}).addRadio({path:"orientation",name:"Orientation",settings:{options:[{value:Tn.wm.Auto,label:"Auto"},{value:Tn.wm.Horizontal,label:"Horizontal"},{value:Tn.wm.Vertical,label:"Vertical"}]},defaultValue:Qr.orientation}).addSliderInput({path:"xTickLabelRotation",name:"Rotate x-axis tick labels",defaultValue:Qr.xTickLabelRotation,settings:{min:-90,max:90,step:15,marks:{"-90":"-90\xB0","-45":"-45\xB0",0:"0\xB0",45:"45\xB0",90:"90\xB0"},included:!1}}).addNumberInput({path:"xTickLabelMaxLength",name:"X-axis tick label max length",description:"X-axis labels will be truncated to the length provided",settings:{placeholder:"None",min:0},showIf:Ve=>Ve.xTickLabelRotation!==0}).addCustomEditor({id:"xTickLabelSpacing",path:"xTickLabelSpacing",name:"X-axis labels minimum spacing",defaultValue:Qr.xTickLabelSpacing,editor:ni}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Rt.Jp.Auto,label:"Auto"},{value:Rt.Jp.Always,label:"Always"},{value:Rt.Jp.Never,label:"Never"}]},defaultValue:Qr.showValue}).addRadio({path:"stacking",name:"Stacking",settings:{options:ya.q.stacking},defaultValue:Qr.stacking}).addSliderInput({path:"groupWidth",name:"Group width",defaultValue:Qr.groupWidth,settings:{min:0,max:1,step:.01},showIf:(Ve,je)=>Ve.stacking&&Ve.stacking!==Rt.o0.None?!1:Ri(je)!==1}).addSliderInput({path:"barWidth",name:"Bar width",defaultValue:Qr.barWidth,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"barRadius",name:"Bar radius",defaultValue:Qr.barRadius,settings:{min:0,max:.5,step:.05}}).addBooleanSwitch({path:"fullHighlight",name:"Highlight full area on hover",defaultValue:Qr.fullHighlight}),W.addFieldNamePicker({path:"colorByField",name:"Color by field",description:"Use the color value for a sibling field to color each bar value."}),(!te.options?.fullHighlight||te.options?.stacking===Rt.o0.None)&&wa.L(W),rs.J(W),Fa.Z(W,!1)}).setSuggestionsSupplier(new Fo);function Ri(W){let te=0;if(W)for(const ie of W)for(const Ce of ie.fields)Ce.type===fn.fS.number&&te++;return te}var Wo=e(76327),hi=e(30383);const Ll=W=>(0,Wo.rD)(W);var xe=e(63992);const xt=Object.freeze([0,0]),Nt={displayMode:Rt.QH.Gradient,minVizHeight:10,minVizWidth:0,showUnfilled:!0};class Jt{getSuggestionsForData(te){const{dataSummary:ie}=te;if(!ie.hasData||!ie.hasNumberField)return;const Ce=te.getListAppender({name:"",pluginId:"bargauge",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}});ie.numberFieldCount>50||(ie.hasStringField&&ie.frameCount===1&&ie.rowCountTotal<30?(Ce.append({name:ps.y.BarGaugeBasic,options:{reduceOptions:{values:!0,calcs:[]},displayMode:Rt.QH.Basic,orientation:Tn.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),Ce.append({name:ps.y.BarGaugeLCD,options:{reduceOptions:{values:!0,calcs:[]},displayMode:Rt.QH.Lcd,orientation:Tn.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})):(Ce.append({name:ps.y.BarGaugeBasic,options:{displayMode:Rt.QH.Basic,orientation:Tn.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),Ce.append({name:ps.y.BarGaugeLCD,options:{displayMode:Rt.QH.Lcd,orientation:Tn.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})))}}const nn=new me.c(xe.M).useFieldConfig().setPanelOptions(W=>{(0,hi.j)(W),(0,hi.h)(W),Fa.Z(W),W.addRadio({path:"displayMode",name:"Display mode",settings:{options:[{value:Rt.QH.Gradient,label:"Gradient"},{value:Rt.QH.Lcd,label:"Retro LCD"},{value:Rt.QH.Basic,label:"Basic"}]},defaultValue:Nt.displayMode}).addBooleanSwitch({path:"showUnfilled",name:"Show unfilled area",description:"When enabled renders the unfilled region as gray",defaultValue:Nt.showUnfilled,showIf:te=>te.displayMode!=="lcd"}).addNumberInput({path:"minVizWidth",name:"Min width",description:"Minimum column width",defaultValue:Nt.minVizWidth,showIf:te=>te.orientation===Tn.wm.Vertical}).addNumberInput({path:"minVizHeight",name:"Min height",description:"Minimum row height",defaultValue:Nt.minVizHeight,showIf:te=>te.orientation===Tn.wm.Horizontal})}).setPanelChangeHandler(Wo.ZH).setMigrationHandler(Ll).setSuggestionsSupplier(new Jt);var an=e(56703),xn=e(36998),Gn=e(68948),Ln=e(99375),ia=e(71570),ta=e(24015),fa=e(11979),ha=e(16514);const zn=W=>te=>{const ie=W.visualization.getColorByName(te?.color||ha.Jx);return{markerTriangle:x.css`
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-bottom: 4px solid ${ie};
      `,markerBar:x.css`
        display: block;
        width: calc(100%);
        height: 5px;
        background: ${ie};
      `}};var Zn=e(53787),xa=e(92787),Wa=e(94270),Ba=e(24799),La=e(97379),Tr=e(63619),Co=e(24357),Io=e(70659);const xo=D.forwardRef(({annotation:W,onSave:te,onDismiss:ie,timeFormatter:Ce,className:Le,...Ve},je)=>{const rt=(0,ot.wW)(Ro),dt=(0,Ge.R9)(),Ct=(0,D.useRef)(null);(0,xa.Z)(Ct,()=>{ie()});const[Et,wt]=(0,Zn.default)(async Hn=>{const In=await dt.onAnnotationCreate(Hn);return te&&te(),In}),[zt,Vt]=(0,Zn.default)(async Hn=>{const In=await dt.onAnnotationUpdate(Hn);return te&&te(),In}),dn=W.id!==void 0,un=W.time!==W.timeEnd,Cn=dn?Vt:wt,Qt=dn?zt:Et,ln=un?`${Ce(W.time)} - ${Ce(W.timeEnd)}`:Ce(W.time),_t=({tags:Hn,description:In})=>{Cn({id:W.id,tags:Hn,description:In,from:Math.round(W.time),to:Math.round(W.timeEnd)})},mn=D.createElement("div",{ref:je,className:(0,x.cx)(rt.editor,Le),...Ve},D.createElement("div",{className:rt.header},D.createElement(Zr.Lh,{justify:"space-between",align:"center"},D.createElement("div",{className:rt.title},"Add annotation"),D.createElement("div",{className:rt.ts},ln))),D.createElement("div",{className:rt.editorForm},D.createElement(Wa.l,{onSubmit:_t,defaultValues:{description:W?.text,tags:W?.tags||[]}},({register:Hn,errors:In,control:ra})=>D.createElement(D.Fragment,null,D.createElement(Ba.g,{label:"Description",invalid:!!In.description,error:In?.description?.message},D.createElement(La.K,{...Hn("description",{required:"Annotation description is required"})})),D.createElement(Ba.g,{label:"Tags"},D.createElement(Tr.g,{control:ra,name:"tags",render:({field:{ref:jn,onChange:ga,...Ra}})=>D.createElement(Co.D,{allowCustomValue:!0,placeholder:"Add tags",onChange:ga,tagOptions:Io.lK,tags:Ra.value})})),D.createElement(Zr.Lh,{justify:"flex-end"},D.createElement(Ye.zx,{size:"sm",variant:"secondary",onClick:ie,fill:"outline"},"Cancel"),D.createElement(Ye.zx,{size:"sm",type:"submit",disabled:Qt?.loading},Qt?.loading?"Saving":"Save"))))));return D.createElement(D.Fragment,null,D.createElement("div",{className:rt.backdrop}),D.createElement("div",{ref:Ct},mn))});xo.displayName="AnnotationEditorForm";const Ro=W=>({backdrop:x.css`
      label: backdrop;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: ${W.zIndex.navbarFixed};
    `,editorContainer:x.css`
      position: absolute;
      top: calc(100% + 10px);
      transform: translate3d(-50%, 0, 0);
    `,editor:x.css`
      background: ${W.colors.background.primary};
      box-shadow: ${W.shadows.z3};
      z-index: ${W.zIndex.dropdown};
      border: 1px solid ${W.colors.border.weak};
      border-radius: ${W.shape.borderRadius()};
      width: 460px;
    `,editorForm:x.css`
      padding: ${W.spacing(1)};
    `,header:x.css`
      border-bottom: 1px solid ${W.colors.border.weak};
      padding: ${W.spacing(1.5,1)};
    `,title:x.css`
      font-weight: ${W.typography.fontWeightMedium};
    `,ts:x.css`
      font-size: ${W.typography.bodySmall.fontSize};
      color: ${W.colors.text.secondary};
    `}),Kr=({onDismiss:W,onSave:te,timeZone:ie,data:Ce,selection:Le,annotation:Ve,style:je})=>{const rt=(0,ot.l4)(),dt=(0,ot.wW)(Ur),Ct=(0,ot.wW)(zn),[Et,wt]=(0,D.useState)(null),[zt,Vt]=(0,D.useState)(null),dn=(0,fa.D)(Et,zt,{modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]});let un=Ce.fields[0];if(!un)return null;const Cn=un.display||(0,Ys.U)({field:un,timeZone:ie,theme:rt}),Qt=Le.min!==Le.max;return D.createElement(Dn.h_,null,D.createElement(D.Fragment,null,D.createElement("div",{style:je},D.createElement("div",{className:(0,x.cx)(x.css`
                position: absolute;
                top: ${Le.bbox.top}px;
                left: ${Le.bbox.left}px;
                width: ${Le.bbox.width}px;
                height: ${Le.bbox.height}px;
              `,Qt?dt.overlayRange(Ve):dt.overlay(Ve))},D.createElement("div",{ref:wt,className:Qt?(0,x.cx)(Ct(Ve).markerBar,dt.markerBar):(0,x.cx)(Ct(Ve).markerTriangle,dt.markerTriangle)}))),D.createElement(xo,{annotation:Ve||{time:Le.min,timeEnd:Le.max},timeFormatter:ln=>Cn(ln).text,onSave:te,onDismiss:W,ref:Vt,style:dn.styles.popper,...dn.attributes.popper})))},Ur=W=>({overlay:te=>{const ie=W.visualization.getColorByName(te?.color||ha.Jx);return x.css`
        border-left: 1px dashed ${ie};
      `},overlayRange:te=>{const ie=W.visualization.getColorByName(te?.color||ha.Jx);return x.css`
        background: ${wr.alpha(ie,.1)};
        border-left: 1px dashed ${ie};
        border-right: 1px dashed ${ie};
      `},markerTriangle:x.css`
      top: calc(100% + 2px);
      left: -4px;
      position: absolute;
    `,markerBar:x.css`
      top: 100%;
      left: 0;
      position: absolute;
    `}),vi=({data:W,timeZone:te,config:ie,children:Ce})=>{const Le=(0,D.useRef)(),[Ve,je]=(0,D.useState)(),[rt,dt]=(0,D.useState)(!1),[Ct,Et]=(0,D.useState)(null),wt=(0,ta.Z)(),zt=(0,D.useCallback)(()=>{Et(null),Le.current&&Le.current.setSelect({top:0,left:0,width:0,height:0}),dt(!1)},[dt,Et]);(0,D.useLayoutEffect)(()=>{let dn=!1;ie.addHook("init",Cn=>{Le.current=Cn;const Qt=Cn.hooks.setSelect;if(Qt)for(let ln=0;ln<Qt.length;ln++){const _t=Qt[ln];_t!==un&&(Qt[ln]=(...mn)=>{!dn&&_t(...mn)})}}),ie.addHook("syncRect",(Cn,Qt)=>{wt()&&je(Qt)});const un=Cn=>{dn&&(dt(!0),Et({min:Cn.posToVal(Cn.select.left,"x"),max:Cn.posToVal(Cn.select.left+Cn.select.width,"x"),bbox:{left:Cn.select.left,top:0,height:Cn.select.height,width:Cn.select.width}}),dn=!1)};ie.addHook("setSelect",un),ie.setCursor({bind:{mousedown:(Cn,Qt,ln)=>_t=>(dn=_t.button===0&&(_t.metaKey||_t.ctrlKey),ln(_t),null),mouseup:(Cn,Qt,ln)=>_t=>(dn&&Cn.select.width===0&&(Cn.select.left=Cn.cursor.left,Cn.select.height=Cn.bbox.height/window.devicePixelRatio),ln(_t),null)}})},[ie,je,wt]);const Vt=(0,D.useCallback)(({coords:dn})=>{if(!Le.current||!Ve||!dn)return;const un=Le.current.posToVal(dn.plotCanvas.x,"x");un&&(Et({min:un,max:un,bbox:{left:dn.plotCanvas.x,top:0,height:Ve.height,width:0}}),dt(!0))},[Ve]);return D.createElement(D.Fragment,null,rt&&Ct&&Ve&&D.createElement(Kr,{selection:Ct,onDismiss:zt,onSave:zt,data:W,timeZone:te,style:{position:"absolute",top:`${Ve.top}px`,left:`${Ve.left}px`,width:`${Ve.width}px`,height:`${Ve.height}px`}}),Ce?Ce({startAnnotating:Vt}):null)};var Ai=e(50235),Or=e(66243),yc=e(38849),Xi=e(47513),Bl=e(85419),wl=e(8928),mo=e(8180),vd=e(34719),Ed=e(65580);const Pc=({annotation:W,timeFormatter:te,canEdit:ie,canDelete:Ce,onEdit:Le,onDelete:Ve})=>{const je=(0,ot.wW)(yd),rt=te(W.time),dt=te(W.timeEnd);let Ct=W.text;const Et=W.tags;let wt="",zt,Vt,dn=null;const un=D.createElement("span",{className:je.time},Boolean(W.isRegion)?`${rt} - ${dt}`:rt);if(W.login&&W.avatarUrl&&(zt=D.createElement("img",{className:je.avatar,alt:"Annotation avatar",src:W.avatarUrl})),W.alertId!==void 0&&W.newState){const Qt=Ft.Z.getStateDisplayModel(W.newState);dn=D.createElement("div",{className:je.alertState},D.createElement("i",{className:Qt.stateClass},Qt.text)),wt=Ft.Z.getAlertAnnotationInfo(W)}else W.title&&(Ct=W.title+"<br />"+(typeof Ct=="string"?Ct:""));(ie||Ce)&&(Vt=D.createElement("div",{className:je.editControls},ie&&D.createElement(mo.h,{name:"pen",size:"sm",onClick:Le}),Ce&&D.createElement(mo.h,{name:"trash-alt",size:"sm",onClick:Ve})));const Cn=X.ZP.featureToggles.annotationComments;return D.createElement("div",{className:je.wrapper,style:Cn?{minWidth:"300px"}:{}},D.createElement("div",{className:je.header},D.createElement(Zr.Lh,{justify:"space-between",align:"center",spacing:"md"},D.createElement("div",{className:je.meta},D.createElement("span",null,zt,dn),un),Vt)),D.createElement("div",{className:je.body},Ct&&D.createElement("div",{dangerouslySetInnerHTML:{__html:wl.QX.sanitize(Ct)}}),wt,D.createElement(D.Fragment,null,D.createElement(Zr.Lh,{spacing:"xs",wrap:!0},Et?.map((Qt,ln)=>D.createElement(vd.V,{name:Qt,key:`${Qt}-${ln}`})))),Cn&&D.createElement("div",{className:je.commentWrapper},D.createElement(Ed.t,{objectType:"annotation",objectId:W.id.toString()}))))};Pc.displayName="AnnotationTooltip";const yd=W=>({wrapper:x.css`
      max-width: 400px;
    `,commentWrapper:x.css`
      margin-top: 10px;
      border-top: 2px solid #2d2b34;
      height: 30vh;
      overflow-y: scroll;
      padding: 0 3px;
    `,header:x.css`
      padding: ${W.spacing(.5,1)};
      border-bottom: 1px solid ${W.colors.border.weak};
      font-size: ${W.typography.bodySmall.fontSize};
      display: flex;
    `,meta:x.css`
      display: flex;
      justify-content: space-between;
    `,editControls:x.css`
      display: flex;
      align-items: center;
      > :last-child {
        margin-right: 0;
      }
    `,avatar:x.css`
      border-radius: 50%;
      width: 16px;
      height: 16px;
      margin-right: ${W.spacing(1)};
    `,alertState:x.css`
      padding-right: ${W.spacing(1)};
      font-weight: ${W.typography.fontWeightMedium};
    `,time:x.css`
      color: ${W.colors.text.secondary};
      font-weight: normal;
      display: inline-block;
      position: relative;
      top: 1px;
    `,body:x.css`
      padding: ${W.spacing(1)};

      a {
        color: ${W.colors.text.link};
        &:hover {
          text-decoration: underline;
        }
      }
    `}),Li=6,ai={modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]};function Cc({annotation:W,timeZone:te,width:ie}){const{canAddAnnotations:Ce,canEditAnnotations:Le,canDeleteAnnotations:Ve,...je}=(0,Ge.R9)(),rt=(0,ot.wW)(zn),dt=(0,ot.wW)(Pd),[Ct,Et]=(0,D.useState)(!1),[wt,zt]=(0,D.useState)(!1),[Vt,dn]=(0,D.useState)(null),[un,Cn]=(0,D.useState)(null),[Qt,ln]=(0,D.useState)(null),_t=(0,D.useRef)(),mn=(0,fa.D)(Vt,un,ai),Hn=(0,fa.D)(Vt,Qt,ai),In=(0,D.useCallback)(()=>{zt(!0),Et(!1)},[zt,Et]),ra=(0,D.useCallback)(()=>{je.onAnnotationDelete&&je.onAnnotationDelete(W.id)},[W,je]),jn=(0,D.useCallback)(()=>{_t.current&&clearTimeout(_t.current),Et(!0)},[Et]),ga=(0,D.useCallback)(()=>{_t.current&&clearTimeout(_t.current)},[]),Ra=(0,D.useCallback)(()=>{_t.current=setTimeout(()=>{Et(!1)},100)},[Et]),Ta=(0,D.useCallback)(qa=>(0,yc.dq)(qa,{format:Xi.U6.fullDate,timeZone:te}),[te]),Ja=(0,D.useCallback)(()=>D.createElement(Pc,{annotation:W,timeFormatter:Ta,onEdit:In,onDelete:ra,canEdit:Le(W.dashboardUID),canDelete:Ve(W.dashboardUID)}),[Le,Ve,ra,In,Ta,W]),rr=Boolean(W.isRegion)&&ie>Li;let Cs=`${ie/2}px`,ua=D.createElement("div",{className:rt(W).markerTriangle,style:{left:Cs,position:"relative",transform:"translate3d(-100%,-50%, 0)"}});return rr&&(ua=D.createElement("div",{className:rt(W).markerBar,style:{width:`${ie}px`,transform:"translate3d(0,-50%, 0)"}})),D.createElement(D.Fragment,null,D.createElement("div",{ref:dn,onMouseEnter:jn,onMouseLeave:Ra,className:rr?void 0:dt.markerWrapper},ua),Ct&&D.createElement(Dn.h_,null,D.createElement("div",{ref:Cn,style:mn.styles.popper,...mn.attributes.popper,className:dt.tooltip,onMouseEnter:ga,onMouseLeave:Ra},Ja())),wt&&D.createElement(Dn.h_,null,D.createElement(xo,{onDismiss:()=>zt(!1),onSave:()=>zt(!1),timeFormatter:Ta,annotation:W,ref:ln,style:Hn.styles.popper,...Hn.attributes.popper})))}const Pd=W=>({markerWrapper:x.css`
      label: markerWrapper;
      padding: 0 4px 4px 4px;
    `,wrapper:x.css`
      max-width: 400px;
    `,tooltip:x.css`
      ${(0,Bl.getTooltipContainerStyles)(W)};
      padding: 0;
    `}),qr=({annotations:W,timeZone:te,config:ie})=>{const Ce=(0,ot.l4)(),Le=(0,D.useRef)(),Ve=(0,D.useRef)();(0,D.useEffect)(()=>{const dt=[];for(const Ct of W)dt.push(new Ai.U(Ct));Ve.current=dt},[W]),(0,D.useLayoutEffect)(()=>{ie.addHook("init",dt=>{Le.current=dt}),ie.addHook("draw",dt=>{if(!Ve.current)return null;const Ct=dt.ctx;if(!Ct)return;Ct.save(),Ct.beginPath(),Ct.rect(dt.bbox.left,dt.bbox.top,dt.bbox.width,dt.bbox.height),Ct.clip();const Et=(wt,zt)=>{Ct.beginPath(),Ct.lineWidth=2,Ct.strokeStyle=zt,Ct.setLineDash([5,5]),Ct.moveTo(wt,dt.bbox.top),Ct.lineTo(wt,dt.bbox.top+dt.bbox.height),Ct.stroke(),Ct.closePath()};for(let wt=0;wt<Ve.current.length;wt++){const zt=Ve.current[wt];for(let Vt=0;Vt<zt.length;Vt++){const dn=zt.get(Vt);if(!dn.time)continue;let un=dt.valToPos(dn.time,"x",!0);const Cn=Ce.visualization.getColorByName(dn.color);if(Et(un,Cn),dn.isRegion&&dn.timeEnd){let Qt=dt.valToPos(dn.timeEnd,"x",!0);Et(Qt,Cn),Ct.fillStyle=wr.alpha(Cn,.1),Ct.rect(un,dt.bbox.top,Qt-un,dt.bbox.height),Ct.fill()}}}Ct.restore()})},[ie,Ce]);const je=(0,D.useCallback)((dt,Ct)=>{const wt=new Ai.U(dt).get(Ct.fieldIndex);if(!wt.time||!Le.current)return;let zt=Le.current.valToPos(wt.time,"x");return zt<0&&(zt=0),{x:zt,y:Le.current.bbox.height/window.devicePixelRatio+4}},[]),rt=(0,D.useCallback)((dt,Ct)=>{let Et=0;const zt=new Ai.U(dt).get(Ct.fieldIndex);if(Boolean(zt.isRegion)&&Le.current){let dn=Le.current.valToPos(zt.time,"x"),un=Le.current.valToPos(zt.timeEnd,"x");dn<0&&(dn=0),un>Le.current.bbox.width/window.devicePixelRatio&&(un=Le.current.bbox.width/window.devicePixelRatio),Et=un-dn}return D.createElement(Cc,{annotation:zt,timeZone:te,width:Et})},[te]);return D.createElement(Or.T,{id:"annotations",config:ie,events:W,renderEventMarker:rt,mapEventToXYCoords:je})};var xc=e(86889),$o=e(65987),ar=e(14391),_i=e(42044),Cd=e(30909);const Bi=({data:W,config:te,onClose:ie,timeZone:Ce,replaceVariables:Le,...Ve})=>{const je=(0,D.useRef)(),[rt,dt]=(0,D.useState)(null),[Ct,Et]=(0,D.useState)(null),[wt,zt]=(0,D.useState)(!1),Vt=(0,D.useCallback)(()=>{zt(!0)},[zt]),dn=(0,D.useCallback)(()=>{zt(!1)},[zt]),un=(0,D.useCallback)(()=>{(0,Ns.Zp)("ContextMenuPlugin",!1,"clearing click selection"),Et(null)},[Et]);(0,D.useLayoutEffect)(()=>{let Qt;const ln=_t=>{let mn={viewport:{x:_t.clientX,y:_t.clientY},plotCanvas:{x:0,y:0}};Qt&&(mn={...mn,plotCanvas:{x:_t.clientX-Qt.left,y:_t.clientY-Qt.top}}),dt(mn)};te.addHook("syncRect",(_t,mn)=>{Qt=mn}),te.addHook("init",_t=>{const mn=_t.over;je.current=mn||void 0,je.current?.addEventListener("mousedown",ln),(0,Ns.Zp)("ContextMenuPlugin",!1,"init");let Hn=!1,In=Array.from(_t.root.querySelectorAll(".u-cursor-pt"));je.current?.addEventListener("mousedown",()=>{Hn=!0}),je.current?.addEventListener("mousemove",()=>{Hn=!1}),je.current?.addEventListener("mouseup",ra=>{if(!Hn||ra.metaKey||ra.ctrlKey){Et(null);return}Hn=!0,ra.target instanceof HTMLElement&&(ra.target.classList.contains("u-cursor-pt")||((0,Ns.Zp)("ContextMenuPlugin",!1,"canvas click"),Et({seriesIdx:null,dataIdx:null}))),Vt()}),In.length>0&&In.forEach((ra,jn)=>{ra.addEventListener("click",()=>{const ga=jn+1,Ra=_t.cursor.idx;(0,Ns.Zp)("ContextMenuPlugin",!1,ga,Ra),Et({seriesIdx:ga,dataIdx:Ra??null})})})})},[te,Vt,dt,Et]);const Cn=(0,D.useMemo)(()=>Ve.defaultItems?Ve.defaultItems.map(Qt=>({...Qt,items:Qt.items.map(ln=>({...ln,onClick:_t=>{rt&&ln.onClick&&ln.onClick(_t,{coords:rt})}}))})):[],[rt,Ve.defaultItems]);return D.createElement(D.Fragment,null,D.createElement(O.Global,{styles:O.css`
        .uplot .u-cursor-pt {
          pointer-events: auto !important;
        }
      `}),wt&&rt&&D.createElement(bc,{data:W,frames:Ve.frames,defaultItems:Cn,timeZone:Ce,selection:{point:Ct,coords:rt},replaceVariables:Le,onClose:()=>{un(),dn(),ie&&ie()}}))},bc=({selection:W,timeZone:te,defaultItems:ie,replaceVariables:Ce,data:Le,...Ve})=>{const je=(0,D.useRef)(null),rt=()=>{Ve.onClose&&Ve.onClose()};(0,xc.Z)(je,()=>{rt()});const dt=Le.fields[0];if(!dt)return null;const Ct=ie?[...ie]:[];let Et=()=>null;if(W.point){const{seriesIdx:zt,dataIdx:Vt}=W.point,dn=dt.display;if(zt&&Vt!==null){const un=Le.fields[zt],Cn=un.display(un.values.get(Vt));un.config.links&&un.config.links.length>0&&un.getLinks&&Ct.push({items:un.getLinks({valueRowIndex:Vt}).map(ln=>({label:ln.title,ariaLabel:ln.title,url:ln.href,target:ln.target,icon:ln.target==="_self"?"link":"external-link-alt",onClick:ln.onClick}))}),Et=()=>D.createElement($o.b,{timestamp:dn(dt.values.get(Vt)).text,displayValue:Cn,seriesColor:Cn.color,displayName:(0,hn.C)(un,Le,Ve.frames)})}}const wt=()=>Ct?.map((zt,Vt)=>D.createElement(ar.k,{key:`${zt.label}${Vt}`,label:zt.label},(zt.items||[]).map(dn=>D.createElement(_i.s,{key:dn.label,url:dn.url,label:dn.label,target:dn.target,icon:dn.icon,active:dn.active,onClick:dn.onClick}))));return D.createElement(Cd.x,{renderMenuItems:wt,renderHeader:Et,x:W.coords.viewport.x,y:W.coords.viewport.y,onClose:rt})};var ku=e(45576);const Nl=({timeZone:W,dataFrame:te,dataFrameFieldIndex:ie,config:Ce,getFieldLinks:Le,exemplarColor:Ve})=>{const je=(0,ot.wW)(qi),[rt,dt]=(0,D.useState)(!1),[Ct,Et]=D.useState(null),[wt,zt]=D.useState(null),{styles:Vt,attributes:dn}=(0,fa.D)(Ct,wt,{modifiers:[{name:"preventOverflow",options:{altAxis:!0}},{name:"flip",options:{fallbackPlacements:["top","left-start"]}}]}),un=(0,D.useRef)(),Cn=()=>{const Hn=[D.createElement("rect",{fill:Ve,key:"diamond",x:"3.38672",width:"4.78985",height:"4.78985",transform:"rotate(45 3.38672 0)"}),D.createElement("path",{fill:Ve,key:"x",d:"M1.94444 3.49988L0 5.44432L1.55552 6.99984L3.49996 5.05539L5.4444 6.99983L6.99992 5.44431L5.05548 3.49988L6.99983 1.55552L5.44431 0L3.49996 1.94436L1.5556 0L8.42584e-05 1.55552L1.94444 3.49988Z"}),D.createElement("path",{fill:Ve,key:"triangle",d:"M4 0L7.4641 6H0.535898L4 0Z"}),D.createElement("rect",{fill:Ve,key:"rectangle",width:"5",height:"5"}),D.createElement("path",{fill:Ve,key:"pentagon",d:"M3 0.5L5.85317 2.57295L4.76336 5.92705H1.23664L0.146831 2.57295L3 0.5Z"}),D.createElement("path",{fill:Ve,key:"plus",d:"m2.35672,4.2425l0,2.357l1.88558,0l0,-2.357l2.3572,0l0,-1.88558l-2.3572,0l0,-2.35692l-1.88558,0l0,2.35692l-2.35672,0l0,1.88558l2.35672,0z"})];return Hn[ie.frameIndex%Hn.length]},Qt=(0,D.useCallback)(()=>{un.current&&clearTimeout(un.current),dt(!0)},[dt]),ln=(0,D.useCallback)(()=>{un.current=setTimeout(()=>{dt(!1)},100)},[dt]),_t=(0,D.useCallback)(()=>{const Hn=te.fields.find(jn=>jn.name==="traceID")||te.fields[0],In=[Hn,...te.fields.filter(jn=>Hn!==jn)],ra=jn=>(0,yc.dq)(jn,{format:Xi.U6.fullDate,timeZone:W});return D.createElement("div",{onMouseEnter:Qt,onMouseLeave:ln,className:je.tooltip,ref:zt,style:Vt.popper,...dn.popper},D.createElement("div",{className:je.wrapper},D.createElement("div",{className:je.header},D.createElement("span",{className:je.title},"Exemplar")),D.createElement("div",{className:je.body},D.createElement("div",null,D.createElement("table",{className:je.exemplarsTable},D.createElement("tbody",null,In.map((jn,ga)=>{const Ra=jn.values.get(ie.fieldIndex),Ta=jn.config.links?.length?Le(jn,ie.fieldIndex):void 0;return D.createElement("tr",{key:ga},D.createElement("td",{valign:"top"},jn.name),D.createElement("td",null,D.createElement("div",{className:je.valueWrapper},D.createElement("span",null,jn.type===fn.fS.time?ra(Ra):Ra),Ta&&D.createElement(ku.Z,{links:Ta}))))})))))))},[dn.popper,te.fields,Le,ie,Qt,ln,Vt.popper,je,W]),mn=Ce.getSeries().find(Hn=>Hn.props.dataFrameFieldIndex?.frameIndex===ie.frameIndex)?.props.lineColor;return D.createElement(D.Fragment,null,D.createElement("div",{ref:Et,onMouseEnter:Qt,onMouseLeave:ln,className:je.markerWrapper,"aria-label":Qe.wl.components.DataSource.Prometheus.exemplarMarker},D.createElement("svg",{viewBox:"0 0 7 7",width:"7",height:"7",style:{fill:mn},className:(0,x.cx)(je.marble,rt&&je.activeMarble)},Cn())),rt&&D.createElement(Dn.h_,null,_t()))},qi=W=>{const te=W.isDark?W.v1.palette.dark2:W.v1.palette.white,ie=W.isDark?W.v1.palette.dark9:W.v1.palette.gray5,Ce=W.isDark?W.v1.palette.black:W.v1.palette.white,Le=W.isDark?W.v1.palette.dark3:W.v1.palette.gray6;return{markerWrapper:x.css`
      padding: 0 4px 4px 4px;
      width: 8px;
      height: 8px;
      box-sizing: content-box;
      transform: translate3d(-50%, 0, 0);

      &:hover {
        > svg {
          transform: scale(1.3);
          opacity: 1;
          filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
        }
      }
    `,marker:x.css`
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-bottom: 4px solid ${W.v1.palette.red};
      pointer-events: none;
    `,wrapper:x.css`
      background: ${te};
      border: 1px solid ${ie};
      border-radius: ${W.shape.borderRadius(2)};
      box-shadow: 0 0 20px ${Ce};
    `,exemplarsTable:x.css`
      width: 100%;

      tr td {
        padding: 5px 10px;
        white-space: nowrap;
        border-bottom: 4px solid ${W.components.panel.background};
      }

      tr {
        background-color: ${W.colors.background.primary};
        &:nth-child(even) {
          background-color: ${Le};
        }
      }
    `,valueWrapper:x.css`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      column-gap: ${W.spacing(1)};

      > span {
        flex-grow: 0;
      }

      > * {
        flex: 1 1;
        align-self: center;
      }
    `,tooltip:x.css`
      background: none;
      padding: 0;
      overflow-y: auto;
      max-height: 95vh;
    `,header:x.css`
      background: ${ie};
      padding: 6px 10px;
      display: flex;
    `,title:x.css`
      font-weight: ${W.typography.fontWeightMedium};
      padding-right: ${W.spacing(2)};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,body:x.css`
      padding: ${W.spacing(1)};
      font-weight: ${W.typography.fontWeightMedium};
    `,marble:x.css`
      display: block;
      opacity: 0.5;
      transition: transform 0.15s ease-out;
    `,activeMarble:x.css`
      transform: scale(1.3);
      opacity: 1;
      filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
    `}},xd=({exemplars:W,timeZone:te,getFieldLinks:ie,config:Ce,visibleSeries:Le})=>{const Ve=(0,D.useRef)();(0,D.useLayoutEffect)(()=>{Ce.addHook("init",dt=>{Ve.current=dt})},[Ce]);const je=(0,D.useCallback)((dt,Ct)=>{const Et=dt.fields.find(Cn=>Cn.name===fn.Ls),wt=dt.fields.find(Cn=>Cn.name===fn.M5);if(!Et||!wt||!Ve.current)return;const zt=Object.keys(Ve.current.scales).find(Cn=>!["x","y"].some(Qt=>Qt===Cn))??Yt.j,Vt=Ve.current.scales[zt].min,dn=Ve.current.scales[zt].max;let un=wt.values.get(Ct.fieldIndex);return Vt!=null&&un<Vt&&(un=Vt),dn!=null&&un>dn&&(un=dn),{x:Ve.current.valToPos(Et.values.get(Ct.fieldIndex),"x"),y:Ve.current.valToPos(un,zt)}},[]),rt=(0,D.useCallback)((dt,Ct)=>{const Et=Le!==void 0?Ul(Le,dt,Ct):!0,wt=Le!==void 0?wi(dt,Ct,Le):void 0;return Et?D.createElement(Nl,{timeZone:te,getFieldLinks:ie,dataFrame:dt,dataFrameFieldIndex:Ct,config:Ce,exemplarColor:wt}):D.createElement(D.Fragment,null)},[Ce,te,ie,Le]);return D.createElement(Or.T,{config:Ce,id:"exemplars",events:W,renderEventMarker:rt,mapEventToXYCoords:je})},bd=(W,te)=>{const ie=W.series.filter(Le=>Le.props.show),Ce=[];return te?.length&&ie.forEach(Le=>{const Ve=Le.props?.dataFrameFieldIndex?.frameIndex,je=Le.props?.dataFrameFieldIndex?.fieldIndex;if(Ve!==void 0&&je!==void 0){const rt=te[Ve]?.fields[je];rt?.labels&&Ce.push({labels:rt.labels,color:Le.props?.lineColor??""})}}),{labels:Ce,totalSeriesCount:W.series.length}},wi=(W,te,ie)=>{let Ce;return ie.labels.some(Le=>{const Ve=Object.keys(Le.labels),je=W.fields.filter(rt=>Ve.find(dt=>dt===rt.name));return je.length&&je.every((dt,Ct,Et)=>{const wt=dt.values.get(te.fieldIndex);return Le.labels[dt.name]===wt})?(Ce=Le.color,!0):!1}),Ce},Ul=(W,te,ie)=>{let Ce=!1;return W.labels.length===W.totalSeriesCount?Ce=!0:W.labels.some(Le=>{const Ve=Object.keys(Le.labels);if(Object.keys(Le.labels).length===0)Ce=!0;else{const je=te.fields.filter(rt=>Ve.find(dt=>dt===rt.name));je.length&&(Ce=W.labels.some(rt=>Object.keys(rt.labels).every(dt=>{const Ct=rt.labels[dt];return je.find(Et=>Et.values.get(ie.fieldIndex)===Ct)})))}return Ce}),Ce},Ei=({config:W,onChangeTimeRange:te})=>{const ie=(0,D.useRef)(),[Ce,Le]=(0,D.useState)([]),[Ve,je]=(0,D.useState)();if((0,D.useLayoutEffect)(()=>{W.addHook("init",Vt=>{ie.current=Vt}),W.addHook("setScale",Vt=>{Le(Vt.data?.[0]??[]),je(Vt.scales.x??void 0)})},[W]),Ce.length<2||!te||!Ve||!Ve.time||!Ve.min||!Ve.max)return null;let rt=0,dt=Ce.length-1;for(;rt<=dt&&Ce[rt]==null;)rt++;for(;dt>=0&&Ce[dt]==null;)dt--;const Ct=Ce[rt],Et=Ce[dt],wt=Ve.min,zt=Ve.max;return Ct==null||Et==null||Ct<=zt&&Et>=wt?null:D.createElement("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%",textAlign:"center"}},D.createElement("div",null,D.createElement("div",null,"Data outside time range"),D.createElement(Ye.zx,{onClick:Vt=>te({from:Ct,to:Et}),variant:"secondary"},"Zoom to data")))};Ei.displayName="OutsideRangePlugin";var Gu=e(86979),Dd=e(53004),ju=e.n(Dd);const Fl=({step:W,y:te,dragBounds:ie,mapPositionToValue:Ce,formatValue:Le,onChange:Ve})=>{const je=(0,ot.l4)();let rt=te,dt="none";te<(ie.top??0)&&(dt="top"),te>(ie.bottom??0)+22&&(dt="bottom"),dt==="bottom"&&(rt=ie.bottom??te),dt==="top"&&(rt=ie.top??te);const Ct=typeof Ve!="function",Et=(0,ot.wW)(dn=>yi(dn,W,dt,Ct)),[wt,zt]=(0,D.useState)(W.value),Vt=(0,D.useMemo)(()=>je.colors.getContrastText(je.visualization.getColorByName(W.color)),[W.color,je]);return D.createElement(ju(),{axis:"y",grid:[1,1],disabled:Ct,onStop:Ct?R.noop:(dn,un)=>(Ve(Ce(un.lastY)),!1),onDrag:(dn,un)=>zt(Ce(un.lastY)),position:{x:0,y:rt},bounds:ie},D.createElement("div",{className:Et.handle,style:{color:Vt}},D.createElement("span",{className:Et.handleText},Le(wt))))};Fl.displayName="ThresholdDragHandle";const yi=(W,te,ie,Ce)=>{const Le=W.visualization.getColorByName(te.color),Ve=Pi(ie),je=ie!=="none";return{handle:x.css`
      display: flex;
      align-items: center;
      position: absolute;
      left: 0;
      width: calc(100% - 9px);
      height: 18px;
      margin-top: -9px;
      border-color: ${Le};
      cursor: ${Ce?"initial":"grab"};
      border-top-right-radius: ${W.shape.borderRadius(1)};
      border-bottom-right-radius: ${W.shape.borderRadius(1)};
      ${je&&x.css`
        margin-top: 0;
        border-radius: ${W.shape.borderRadius(1)};
      `}
      background: ${Le};
      font-size: ${W.typography.bodySmall.fontSize};
      &:before {
        ${Ve};
      }
    `,handleText:x.css`
      text-align: center;
      width: 100%;
      display: block;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `}};function Pi(W){const te=W==="none",ie=Ce=>x.css`
    content: '';
    position: absolute;

    bottom: 0;
    top: 0;
    width: 0;
    height: 0;
    left: 0;

    border-right-style: solid;
    border-right-width: ${Ce}px;
    border-right-color: inherit;
    border-top: ${Ce}px solid transparent;
    border-bottom: ${Ce}px solid transparent;
  `;return te?x.css`
      ${ie(9)};
      left: -9px;
    `:W==="top"?x.css`
      ${ie(5)};
      left: calc(50% - 2.5px);
      top: -7px;
      transform: rotate(90deg);
    `:W==="bottom"?x.css`
      ${ie(5)};
      left: calc(50% - 2.5px);
      top: calc(100% - 2.5px);
      transform: rotate(-90deg);
    `:""}const si=60,bo=({config:W,fieldConfig:te,onThresholdsChange:ie})=>{const Ce=(0,D.useRef)(),[Le,Ve]=(0,D.useState)(0);(0,D.useLayoutEffect)(()=>{W.setPadding([0,si,0,0]),W.addHook("init",rt=>{Ce.current=rt}),W.addHook("draw",()=>{Ve(rt=>rt+1)})},[W]);const je=(0,D.useMemo)(()=>{const rt=Ce.current;if(!rt)return null;const dt=te.defaults.thresholds;if(!dt)return null;const Ct=(0,Gu.z)(te.defaults),Et=te.defaults.decimals,wt=[];for(let zt=0;zt<dt.steps.length;zt++){const Vt=dt.steps[zt],dn=rt.valToPos(Vt.value,Ct);if(Number.isNaN(dn)||!Number.isFinite(dn))continue;const un=rt.bbox.height/window.devicePixelRatio,Qt=typeof ie=="function"?_t=>{const mn=[...dt.steps.slice(0,zt),...dt.steps.slice(zt+1),{...dt.steps[zt],value:_t}].sort((Hn,In)=>Hn.value-In.value);ie({...dt,steps:mn})}:void 0,ln=D.createElement(Fl,{key:`${Vt.value}-${zt}`,step:Vt,y:dn,dragBounds:{top:0,bottom:un},mapPositionToValue:_t=>rt.posToVal(_t,Ct),formatValue:_t=>(0,Za.Cf)(Ct)(_t,Et).text,onChange:Qt});wt.push(ln)}return wt},[Le,te,ie]);return Ce.current?D.createElement("div",{style:{position:"absolute",overflow:"visible",left:`${(Ce.current.bbox.left+Ce.current.bbox.width)/window.devicePixelRatio}px`,top:`${Ce.current.bbox.top/window.devicePixelRatio}px`,width:`${si}px`,height:`${Ce.current.bbox.height/window.devicePixelRatio}px`}},je):null};bo.displayName="ThresholdControlsPlugin";var ri=e(12022),Wl=e(45778),Sd=e(45389);function $l(W,te,ie){if(!W?.length)return null;let Ce;const Le=[];for(let Ve of W){const je=[];let rt=!1,dt=!1,Ct=(0,Wl.w)({frame:Ve,refFieldPseudoMin:ie?.from.valueOf(),refFieldPseudoMax:ie?.to.valueOf()});for(const Et of(0,Sd.I)(Ct).fields)switch(Et.type){case fn.fS.time:rt=!0,je.push(Et);break;case fn.fS.number:dt=!0,Ce={...Et,values:new Rs.G(Et.values.toArray().map(Vt=>Number.isFinite(Vt)||Vt==null?Vt:null))},je.push(Ce);break;case fn.fS.string:Ce={...Et,values:new Rs.G(Et.values.toArray())},je.push(Ce);break;case fn.fS.boolean:dt=!0;const wt=Et.config?.custom??{},zt={...Et.config,max:1,min:0,custom:wt};wt.lineInterpolation!==Rt.KC.StepBefore&&(wt.lineInterpolation=Rt.KC.StepAfter),Ce={...Et,config:zt,type:fn.fS.number,values:new Rs.G(Et.values.toArray().map(Vt=>Vt==null?Vt:Boolean(Vt)?1:0))},(0,Za.br)(zt.unit)||(zt.unit="bool",Ce.display=(0,Ys.U)({field:Ce,theme:te})),je.push(Ce);break}rt&&dt&&Le.push({...Ve,length:Ct.length,fields:je})}return Le.length?(Md(Le,te),Le):null}const Md=(W,te)=>{let ie=0;W.forEach(Ce=>{Ce.fields.forEach(Le=>{(Le.type===fn.fS.number||Le.type===fn.fS.boolean)&&(Le.state={...Le.state,seriesIndex:ie++},Le.display=(0,Ys.U)({field:Le,theme:te}))})})};function Kl(W,te){return!W||!W.length?[te]:W.map(ie=>ie?.length?ie:te)}function el(W,te,ie,Ce){return W.fields.forEach(Le=>{if(Le.state?.origin?.frameIndex===void 0||te[Le.state?.origin?.frameIndex]===void 0)return;const Ve=[];for(const rt of te[Le.state?.origin?.frameIndex].fields)if(rt.type===fn.fS.string)if(Le.values instanceof ri.o){const dt={...rt};dt.values=new ri.o(rt.values,Le.values.getOrderArray()),Ve.push(dt)}else Ve.push(rt);const je={fields:[...W.fields,...Ve],length:W.fields.length+Ve.length};Le.getLinks=(0,xn.oB)(je,Le,Le.state.scopedVars,ie,Ce)}),W}const Yu=Object.freeze([1,0]);var ao=(W=>(W.CandlesVolume="candles+volume",W.Candles="candles",W.Volume="volume",W))(ao||{}),oi=(W=>(W.Candles="candles",W.OHLCBars="ohlcbars",W))(oi||{}),Ao=(W=>(W.OpenClose="open-close",W.CloseClose="close-close",W))(Ao||{});const tl={up:"green",down:"red",flat:"gray"},Ko={mode:"candles+volume",candleStyle:"candles",colorStrategy:"open-close",colors:tl,fields:{},legend:{displayMode:Rt.jK.List,showLegend:!0,placement:"bottom",calcs:[]},includeAllFields:!1},po={open:{key:"open",name:"Open",defaults:["open","o"],description:"Value at the start of the period"},high:{key:"high",name:"High",defaults:["high","h","max"],description:"Maximum value within the period"},low:{key:"low",name:"Low",defaults:["low","l","min"],description:"Minimum value within the period"},close:{key:"close",name:"Close",defaults:["close","c"],description:"Value at the end of the period"},volume:{key:"volume",name:"Volume",defaults:["volume","v"],description:"Sample count within the period"}};function Td(W,te,ie){const Ce=(0,vr.findField)(W,ie[te.key]);if(!Ce)for(const Le of W.fields){const Ve=(0,hn.C)(Le,W).toLowerCase();if(te.defaults.includes(Ve)||te.defaults.includes(Le.name))return Le}return Ce}function nl(W,te,ie,Ce){if(!W?.length)return null;const Le=te.fields??{},Ve=W.length===1?(0,as.Y3)(W[0],W[0].fields.findIndex(Vt=>Vt.type===fn.fS.time)):(0,as._9)({frames:W});if(!Ve?.length)return null;const je={aligned:Ve,frame:Ve,names:{}},rt=$l([Ve],ie,Ce);if(!rt)return null;const dt=je.frame=rt[0],Ct=dt.fields.findIndex(Vt=>Vt.type===fn.fS.time);if(Ct<0)return null;const Et=new Set;for(const Vt of Object.values(po)){const dn=Td(dt,Vt,Le);dn&&(je[Vt.key]=dn,Et.add(dn))}if(!je.open&&!je.close&&(je.open=dt.fields.find(Vt=>Vt.type===fn.fS.number),je.open&&Et.add(je.open)),je.open&&!je.close&&!Le.close){const Vt=je.open.values.toArray().slice(1);Vt.push(Vt[Vt.length-1]),je.close={...je.open,values:new Rs.G(Vt),name:"Next open",state:void 0},Et.add(je.close),dt.fields.push(je.close),je.autoOpenClose=!0}if(je.close&&!je.open&&!Le.open){const Vt=je.close.values.toArray().slice();Vt.unshift(Vt[0]),Vt.length=dt.length,je.open={...je.close,values:new Rs.G(Vt),name:"Previous close",state:void 0},Et.add(je.open),dt.fields.push(je.open),je.autoOpenClose=!0}!je.high&&!Le.high&&(je.high=je.open),!je.low&&!Le.low&&(je.low=je.open),te.mode===ao.Volume?(je.high&&(je.high!==je.open&&Et.delete(je.high),je.high=void 0),je.low&&(je.low!==je.open&&Et.delete(je.low),je.low=void 0)):te.mode===ao.Candles&&je.volume&&(Et.delete(je.volume),je.volume=void 0);for(const Vt of Object.values(po)){const dn=je[Vt.key];dn&&(je.names[Vt.key]=(0,hn.C)(dn,je.frame))}const wt=dt.fields[Ct],zt=[wt];te.includeAllFields?zt.push(...dt.fields.filter(Vt=>Vt!==wt)):zt.push(...Et),je.frame={...je.frame,fields:zt};for(let Vt=0;Vt<je.frame.fields.length;Vt++){const dn=je.frame.fields[Vt];dn.state={...dn.state,seriesIndex:Vt-1,origin:{fieldIndex:Vt,frameIndex:0}}}return je}const{alpha:Vl}=wr;function Od(W){let{mode:te,candleStyle:ie,fields:Ce,colorStrategy:Le,upColor:Ve,downColor:je,flatColor:rt,volumeAlpha:dt,flatAsUp:Ct=!0}=W;const Et=te!==ao.Volume&&Ce.high!=null&&Ce.low!=null,wt=Et&&ie===oi.Candles,zt=te!==ao.Candles&&Ce.volume!=null;function Vt(mn,Hn,In,ra,jn){return mn>0?In:mn<0?ra:jn?In:Hn}let dn=0,un=Ce.open,Cn=Ce.high,Qt=Ce.low,ln=Ce.close,_t=Ce.volume;return mn=>{let Hn,In,ra,jn,ga,Ra;Et&&(ra=new Path2D,In=new Path2D,Hn=new Path2D),zt&&(jn=new Path2D,ga=new Path2D,Ra=new Path2D);let Ta=new Path2D,Ja=mn.ctx,rr=mn.data[dn],Cs=mn.data[un],ua=mn.data[ln],qa=Et?mn.data[Cn]:null,fs=Et?mn.data[Qt]:null,fr=zt?mn.data[_t]:null,Cr=_t!=null?Math.round(mn.valToPos(0,mn.series[_t].scale,!0)):null,[gr,Dr]=mn.series[0].idxs,Qs=mn.data[0],Ka=Cs,gs=mn.bbox.width;if(Qs.length>1){let Ms=null;for(let Yn=0,oa=1/0;Yn<Qs.length;Yn++)if(Ka[Yn]!==void 0){if(Ms!=null){let ca=Math.abs(Qs[Yn]-Qs[Ms]);ca<oa&&(oa=ca,gs=Math.abs(mn.valToPos(Qs[Yn],"x",!0)-mn.valToPos(Qs[Ms],"x",!0)))}Ms=Yn}}let Ls=Math.round(.6*gs),cr=2,js=2;Ls<=12&&(cr=js=1);let xr=Math.floor(Ls/2);for(let Ms=gr;Ms<=Dr;Ms++){let Yn=Math.round(mn.valToPos(rr[Ms],"x",!0)),oa=Ms===gr?0:Math.sign(ua[Ms]-ua[Ms-1]),ca=Math.sign(ua[Ms]-Cs[Ms]);if(zt){let Na=Vt(Le===Ao.CloseClose?oa:ca,Ra,ga,jn,Ms===gr&&Ao.CloseClose?!1:Ct),Va=Math.round(mn.valToPos(fr[Ms],mn.series[_t].scale,!0));Na.rect(Yn-xr,Va,Ls,Cr-Va)}if(Et){let Na=Vt(Le===Ao.CloseClose?oa:ca,ra,In,Hn,Ms===gr&&Ao.CloseClose?!1:Ct),Va=Math.round(mn.valToPos(qa[Ms],mn.series[Cn].scale,!0)),Os=Math.round(mn.valToPos(fs[Ms],mn.series[Qt].scale,!0));Na.rect(Yn-Math.floor(cr/2),Va,cr,Os-Va);let vs=Math.round(mn.valToPos(Cs[Ms],mn.series[un].scale,!0)),_r=Math.round(mn.valToPos(ua[Ms],mn.series[ln].scale,!0));if(wt){let Hr=Math.min(vs,_r),mi=Math.max(vs,_r),no=Math.max(1,mi-Hr);Na.rect(Yn-xr,Hr,Ls,no),Le===Ao.CloseClose&&ca>=0&&no>js*2&&Ta.rect(Yn-xr+js,Hr+js,Ls-js*2,no-js*2)}else Na.rect(Yn-xr,vs,xr,cr),Na.rect(Yn,_r,xr,cr)}}Ja.save(),Ja.rect(mn.bbox.left,mn.bbox.top,mn.bbox.width,mn.bbox.height),Ja.clip(),zt&&(Ja.fillStyle=Vl(Ve,dt),Ja.fill(ga),Ja.fillStyle=Vl(je,dt),Ja.fill(jn),Ja.fillStyle=Vl(rt,dt),Ja.fill(Ra)),Et&&(Ja.fillStyle=Ve,Ja.fill(In),Ja.fillStyle=je,Ja.fill(Hn),Ja.fillStyle=rt,Ja.fill(ra),Ja.globalCompositeOperation="destination-out",Ja.fill(Ta)),Ja.restore()}}const Id=({data:W,id:te,timeRange:ie,timeZone:Ce,width:Le,height:Ve,options:je,fieldConfig:rt,onChangeTimeRange:dt,replaceVariables:Ct})=>{const{sync:Et,canAddAnnotations:wt,onThresholdsChange:zt,canEditThresholds:Vt,showThresholds:dn,onSplitOpen:un}=(0,Ge.R9)(),Cn=(jn,ga)=>(0,ia.a)({field:jn,rowIndex:ga,splitOpenFn:un,range:ie}),Qt=(0,ot.l4)(),ln=(0,D.useMemo)(()=>nl(W.series,je,Qt,ie),[W,je,Qt,ie]),{renderers:_t,tweakScale:mn,tweakAxis:Hn,shouldRenderPrice:In}=(0,D.useMemo)(()=>{let jn=(js,xr)=>js,ga=(js,xr)=>js,Ra={renderers:[],tweakScale:jn,tweakAxis:ga,shouldRenderPrice:!1};if(!ln)return Ra;const Ta=ln.names;if(!Object.keys(Ta).length)return Ra;const{mode:Ja,candleStyle:rr,colorStrategy:Cs}=je,ua={...tl,...je.colors};let{open:qa,high:fs,low:fr,close:Cr,volume:gr}=Ta;if(qa==null||Cr==null)return Ra;let Dr=.5,Qs=-1,Ka=!1;if(gr!=null&&Ja!==ao.Candles){let js=ln.volume;if(js!=null){Ka=!0;let{fillOpacity:xr}=js.config.custom;xr&&(Dr=xr/100),Ja!==ao.Volume&&(js.config={...js.config},js.config.unit="short",js.display=(0,Ys.U)({field:js,theme:X.vc.theme2}),ga=(Ms,Yn)=>{if(Yn.name===ln.volume?.name){let oa=(ca,Na)=>{let Va=[],Os=ca.series[Qs].max;for(let vs=0;vs<Na.length&&(Va.push(Na[vs]),!(Na[vs]>Os));vs++);return Va};Ms.space=20,Ms.filter=oa,Ms.ticks={...Ms.ticks,filter:oa}}return Ms},jn=(Ms,Yn)=>(Yn.name===ln.volume?.name&&(Ms.range=(oa,ca,Na)=>[0,Na*7]),Ms))}}let gs=Ja!==ao.Volume&&fs!=null&&fr!=null;if(!gs&&!Ka)return Ra;let Ls={},cr=[];return gs?Ls={open:qa,high:fs,low:fr,close:Cr}:cr.push(qa,Cr),Ka&&(Ls.volume=gr,Ls.open=qa,Ls.close=Cr),{shouldRenderPrice:gs,renderers:[{fieldMap:Ls,indicesOnly:cr,init:(js,xr)=>{Qs=xr.volume,js.addHook("drawAxes",Od({mode:Ja,fields:xr,upColor:X.vc.theme2.visualization.getColorByName(ua.up),downColor:X.vc.theme2.visualization.getColorByName(ua.down),flatColor:X.vc.theme2.visualization.getColorByName(ua.flat),volumeAlpha:Dr,colorStrategy:Cs,candleStyle:rr,flatAsUp:!0}))}}],tweakScale:jn,tweakAxis:ga}},[je,W.structureRev,W.series.length]);if(!ln)return D.createElement(Bt.Z,{panelId:te,fieldConfig:rt,data:W,needsTimeField:!0,needsNumberField:!0});if(In)for(let jn in _t[0].fieldMap){let ga=ln[jn];ga.config={...ga.config,custom:{...ga.config.custom,hideFrom:{legend:!0,tooltip:!1,viz:!1}}}}const ra=Boolean(wt&&wt());return D.createElement(Gn.p,{frames:[ln.frame],structureRev:W.structureRev,timeRange:ie,timeZone:Ce,width:Le,height:Ve,legend:je.legend,renderers:_t,tweakAxis:Hn,tweakScale:mn,options:je},(jn,ga)=>(ga.fields.forEach(Ra=>{Ra.getLinks=(0,xn.oB)(ga,Ra,Ra.state.scopedVars,Ct,Ce)}),D.createElement(D.Fragment,null,D.createElement(Ln.R,{config:jn,onZoom:dt}),D.createElement(Un.i,{data:ga,config:jn,mode:Rt.f3.Multi,sync:Et,timeZone:Ce}),W.annotations&&D.createElement(qr,{annotations:W.annotations,config:jn,timeZone:Ce}),ra?D.createElement(vi,{data:ga,timeZone:Ce,config:jn},({startAnnotating:Ra})=>D.createElement(Bi,{data:ga,config:jn,timeZone:Ce,replaceVariables:Ct,defaultItems:ra?[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(Ta,Ja)=>{Ja&&Ra({coords:Ja.coords})}}]}]:[]})):D.createElement(Bi,{data:ga,config:jn,timeZone:Ce,replaceVariables:Ct,defaultItems:[]}),W.annotations&&D.createElement(xd,{config:jn,exemplars:W.annotations,timeZone:Ce,getFieldLinks:Cn}),(Vt&&zt||dn)&&D.createElement(bo,{config:jn,fieldConfig:rt,onThresholdsChange:Vt?zt:void 0}),D.createElement(Ei,{config:jn,onChangeTimeRange:dt}))))};class Rd{getSuggestionsForData(te){const{dataSummary:ie}=te;if(!te.data?.series||!ie.hasData||ie.timeFieldCount<1||ie.numberFieldCount<2||ie.numberFieldCount>10)return;const Ce=nl(te.data.series,Ko,Re.v.theme2);if(!Ce||Ce.open===Ce.high&&Ce.open===Ce.low)return;te.getListAppender({name:"",pluginId:"candlestick",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:ps.y.Candlestick,options:Ko,fieldConfig:{defaults:{},overrides:[]},score:Ce.autoOpenClose?Tn._.Good:Tn._.Best})}}const Ad=[{label:"Candles",value:ao.Candles},{label:"Volume",value:ao.Volume},{label:"Both",value:ao.CandlesVolume}],Ld=[{label:"Candles",value:oi.Candles},{label:"OHLC Bars",value:oi.OHLCBars}],Bd=[{label:"Since Open",value:Ao.OpenClose},{label:"Since Prior Close",value:Ao.CloseClose}],wd=W=>W.type===fn.fS.number;function ho(W,te,ie){let Ce="Auto ";if(ie){const Le=ie[te.key];Le?.config?(Ce+="= "+(0,hn.C)(Le),Le===ie?.open&&te.key!=="open"&&(Ce+=` (${te.defaults.join(",")})`)):Ce+=`(${te.defaults.join(",")})`}W.addFieldNamePicker({path:`fields.${te.key}`,name:te.name,description:te.description,settings:{filter:wd,placeholderText:Ce}})}const Dc=new me.c(Id).useFieldConfig((0,an.F)(an.r)).setPanelOptions((W,te)=>{const ie=te.options??Ko,Ce=nl(te.data,ie,Re.v.theme2);W.addRadio({path:"mode",name:"Mode",description:"",defaultValue:Ko.mode,settings:{options:Ad}}).addRadio({path:"candleStyle",name:"Candle style",description:"",defaultValue:Ko.candleStyle,settings:{options:Ld},showIf:Le=>Le.mode!==ao.Volume}).addRadio({path:"colorStrategy",name:"Color strategy",description:"",defaultValue:Ko.colorStrategy,settings:{options:Bd}}).addColorPicker({path:"colors.up",name:"Up color",defaultValue:tl.up}).addColorPicker({path:"colors.down",name:"Down color",defaultValue:tl.down}),ho(W,po.open,Ce),ie.mode!==ao.Volume&&(ho(W,po.high,Ce),ho(W,po.low,Ce)),ho(W,po.close,Ce),ie.mode!==ao.Candles&&ho(W,po.volume,Ce),W.addRadio({path:"includeAllFields",name:"Additional fields",description:"Use standard timeseries options to configure any fields not mapped above",defaultValue:Ko.includeAllFields,settings:{options:[{label:"Ignore",value:!1},{label:"Include",value:!0}]}}),rs.J(W)}).setDataSupport({annotations:!0,alertStates:!0}).setSuggestionsSupplier(new Rd);var Nd=e(61962),al=e(43993);const Em=Object.freeze([0,0]);var sl=(W=>(W.List="list",W.Previews="previews",W))(sl||{});const Vo={layout:"list",maxItems:10,query:"",showHeadings:!0,showRecentlyViewed:!1,showSearch:!1,showStarred:!0,tags:[]},Ud=W=>({dashlistSectionHeader:x.css`
    padding: ${W.spacing(.25,1)};
    margin-right: ${W.spacing(1)};
  `,dashlistSection:x.css`
    margin-bottom: ${W.spacing(2)};
    padding-top: 3px;
  `,dashlistLink:x.css`
    display: flex;
    cursor: pointer;
    border-bottom: 1px solid ${W.colors.border.weak};
    margin-right: ${W.spacing(1)};
    padding: ${W.spacing(1)};

    &:hover {
      a {
        color: ${W.colors.text.link};
        text-decoration: underline;
      }
    }
  `,dashlistStar:x.css`
    align-self: center;
    margin-right: 0px;
    color: ${W.colors.secondary.text};
    z-index: 1;
  `,dashlistFolder:x.css`
    color: ${W.colors.text.secondary};
    font-size: ${W.typography.bodySmall.fontSize};
    line-height: ${W.typography.body.lineHeight};
  `,dashlistTitle:x.css`
    &::after {
      position: absolute;
      content: '';
      left: 0;
      top: 0;
      bottom: 0;
      right: 0;
    }
  `,dashlistLinkBody:x.css`
    flex-grow: 1;
    overflow: hidden;
    text-overflow: ellipsis;
  `,dashlistItem:x.css`
    position: relative;
    list-style: none;
  `,gridContainer:x.css`
    display: grid;
    gap: ${W.spacing(1)};
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    list-style: none;
    margin-bottom: ${W.spacing(1)};
  `});async function Sc(W,te){let ie=Promise.resolve([]);if(W.showStarred){const Et={limit:W.maxItems,starred:"true"};ie=(0,Be.i)().search(Et)}let Ce=Promise.resolve([]),Le=[];if(W.showRecentlyViewed){let Et=await ke.Z.getDashboardOpened();Le=(0,R.take)(Et,W.maxItems),Ce=(0,Be.i)().search({dashboardUIDs:Le,limit:W.maxItems})}let Ve=Promise.resolve([]);if(W.showSearch){const Et={limit:W.maxItems,query:te(W.query,{},"text"),folderIds:W.folderId,tag:W.tags.map(wt=>te(wt,{},"text")),type:"dash-db"};Ve=(0,Be.i)().search(Et)}const[je,rt,dt]=await Promise.all([ie,Ve,Ce]);let Ct=new Map;for(const Et of Le){const wt=dt.find(zt=>zt.uid===Et);wt&&Ct.set(Et,{...wt,isRecent:!0})}return rt.forEach(Et=>{Et.uid&&(Ct.has(Et.uid)?Ct.get(Et.uid).isSearchResult=!0:Ct.set(Et.uid,{...Et,isSearchResult:!0}))}),je.forEach(Et=>{Et.uid&&(Ct.has(Et.uid)?Ct.get(Et.uid).isStarred=!0:Ct.set(Et.uid,{...Et,isStarred:!0}))}),Ct}function Ci(W){const[te,ie]=(0,D.useState)(new Map),Ce=(0,Xe.useDispatch)();(0,D.useEffect)(()=>{Sc(W.options,W.replaceVariables).then(Qt=>{ie(Qt)})},[W.options,W.replaceVariables,W.renderCounter]);const Le=async(Qt,ln)=>{const{uid:_t,title:mn,url:Hn}=ln;Qt.preventDefault(),Qt.stopPropagation();const In=await(0,en.h4)().starDashboard(ln.id.toString(),ln.isStarred),ra=new Map(te);ra.set(ln?.uid??"",{...ln,isStarred:In}),ie(ra),Ce((0,Nd.OQ)({id:_t??"",title:mn,url:Hn,isStarred:In}))},[Ve,je,rt]=(0,D.useMemo)(()=>{const Qt=[...te.values()];return[Qt.filter(ln=>ln.isStarred).sort((ln,_t)=>ln.title.localeCompare(_t.title)),Qt.filter(ln=>ln.isRecent),Qt.filter(ln=>ln.isSearchResult).sort((ln,_t)=>ln.title.localeCompare(_t.title))]},[te]),{showStarred:dt,showRecentlyViewed:Ct,showHeadings:Et,showSearch:wt,layout:zt}=W.options,Vt=[{header:"Starred dashboards",dashboards:Ve,show:dt},{header:"Recently viewed dashboards",dashboards:je,show:Ct},{header:"Search",dashboards:rt,show:wt}],dn=(0,ot.wW)(Ud),un=Qt=>D.createElement("ul",null,Qt.map(ln=>D.createElement("li",{className:dn.dashlistItem,key:`dash-${ln.uid}`},D.createElement("div",{className:dn.dashlistLink},D.createElement("div",{className:dn.dashlistLinkBody},D.createElement("a",{className:dn.dashlistTitle,href:ln.url},ln.title),ln.folderTitle&&D.createElement("div",{className:dn.dashlistFolder},ln.folderTitle)),D.createElement(Fd,{"aria-label":`Star dashboard "${ln.title}".`,className:dn.dashlistStar,enabled:{name:"favorite",type:"mono"},disabled:{name:"star",type:"default"},checked:ln.isStarred,onClick:_t=>Le(_t,ln)}))))),Cn=Qt=>D.createElement("ul",{className:dn.gridContainer},Qt.map(ln=>D.createElement("li",{key:ln.uid},D.createElement(al.K,{item:ln}))));return D.createElement(_e.$,{autoHeightMin:"100%",autoHeightMax:"100%"},Vt.map(({show:Qt,header:ln,dashboards:_t},mn)=>Qt&&D.createElement("div",{className:dn.dashlistSection,key:`dash-group-${mn}`},Et&&D.createElement("h6",{className:dn.dashlistSectionHeader},ln),zt===sl.Previews?Cn(_t):un(_t))))}function Fd({enabled:W,disabled:te,checked:ie,onClick:Ce,className:Le,"aria-label":Ve,...je}){const rt=(0,D.useCallback)(wt=>{wt.preventDefault(),wt.stopPropagation(),Ce?.(wt)},[Ce]),Ct={...je,...ie?W:te},Et=(0,ot.wW)(Wd);return D.createElement("label",{className:Et.wrapper},D.createElement("input",{type:"checkbox",defaultChecked:ie,onClick:rt,className:Et.checkBox,"aria-label":Ve}),D.createElement(It.J,{className:(0,x.cx)(Et.icon,Le),...Ct}))}const Wd=(0,ur.B)(W=>({wrapper:(0,x.css)({display:"flex",alignSelf:"center",cursor:"pointer",zIndex:1}),checkBox:(0,x.css)({appearance:"none","&:focus-visible + *":{...(0,Bl.getFocusStyles)(W),borderRadius:W.shape.borderRadius(1)}}),icon:(0,x.css)({marginBottom:0,verticalAlign:"baseline",display:"flex"})})),Mc=new me.c(Ci).setPanelOptions(W=>{Re.v.featureToggles.dashboardPreviews&&W.addRadio({path:"layout",name:"Layout",defaultValue:sl.List,settings:{options:[{value:sl.List,label:"List"},{value:sl.Previews,label:"Preview"}]}}),W.addBooleanSwitch({path:"showStarred",name:"Starred",defaultValue:Vo.showStarred}).addBooleanSwitch({path:"showRecentlyViewed",name:"Recently viewed",defaultValue:Vo.showRecentlyViewed}).addBooleanSwitch({path:"showSearch",name:"Search",defaultValue:Vo.showSearch}).addBooleanSwitch({path:"showHeadings",name:"Show headings",defaultValue:Vo.showHeadings}).addNumberInput({path:"maxItems",name:"Max items",defaultValue:Vo.maxItems}).addTextInput({path:"query",name:"Query",defaultValue:Vo.query}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:void 0,editor:function({value:ie,onChange:Ce}){return D.createElement(qn,{initialFolderId:ie,onChange:Le=>Ce(Le?.id),extraFolders:[kn,Jn]})}}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:Vo.tags,editor(te){return D.createElement(Ne.B,{tags:te.value,onChange:te.onChange})}})}).setMigrationHandler(W=>{const te={showStarred:W.options.showStarred??W.starred,showRecentlyViewed:W.options.showRecentlyViewed??W.recent,showSearch:W.options.showSearch??W.search,showHeadings:W.options.showHeadings??W.headings,maxItems:W.options.maxItems??W.limit,query:W.options.query??W.query,folderId:W.options.folderId??W.folderId,tags:W.options.tags??W.tags};return parseFloat(W.pluginVersion||"6.1")<6.3&&["starred","recent","search","headings","limit","query","folderId"].forEach(Le=>delete W[Le]),te});class $d extends D.Component{constructor(){super(...arguments),this.subscription=new ka.w0,this.state={}}componentDidMount(){const{eventBus:te}=this.props;this.subscription.add(te.subscribe(Ga.es,ie=>{this.setState({event:ie})})),this.subscription.add(te.subscribe(Ga.xH,ie=>{this.setState({event:ie})})),this.subscription.add(te.subscribe(xs.IA,ie=>{this.setState({event:ie})})),this.subscription.add(te.subscribe(xs.oi,ie=>{this.setState({event:ie})}))}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{event:te}=this.state;if(!te)return D.createElement("div",null,"no events yet");const{type:ie,payload:Ce,origin:Le}=te;return D.createElement(_e.$,{autoHeightMin:"100%",autoHeightMax:"100%"},D.createElement("h3",null,"Origin: ",Le?.path),D.createElement("span",null,"Type: ",ie),Boolean(Ce)&&D.createElement(D.Fragment,null,D.createElement("pre",null,JSON.stringify(Ce.point,null,"  ")),Ce.data&&D.createElement(ks.H,{data:Ce.data,rowIndex:Ce.rowIndex,columnIndex:Ce.columnIndex})))}}var Kd=e(98212);let Tc=100;class Vd extends D.PureComponent{constructor(te){super(te),this.history=new Kd.d({capacity:40,append:"head"}),this.eventObserver={next:Ce=>{const Le=Ce.origin;this.history.add({key:Tc++,type:Ce.type,path:Le?.path,payload:Ce.payload}),this.setState({counter:Tc})}},this.state={counter:Tc};const ie=[];ie.push(te.eventBus.getStream(Ga.es).subscribe(this.eventObserver)),ie.push(te.eventBus.getStream(Ga.xH).subscribe(this.eventObserver)),ie.push(te.eventBus.getStream(Ga.v9).subscribe(this.eventObserver)),this.subs=ie}componentWillUnmount(){for(const te of this.subs)te.unsubscribe()}render(){return D.createElement(_e.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.history.map((te,ie)=>D.createElement("div",{key:te.key},JSON.stringify(te.path)," ",te.type," / X:",JSON.stringify(te.payload.x)," / Y:",JSON.stringify(te.payload.y))))}}class zd extends D.Component{constructor(){super(...arguments),this.lastRender=Date.now(),this.counters={render:0,dataChanged:0,schemaChanged:0},this.resetCounters=()=>{this.counters={render:0,dataChanged:0,schemaChanged:0},this.forceUpdate()}}shouldComponentUpdate(te){const{data:ie,options:Ce}=this.props;if(te.data!==ie&&(this.counters.dataChanged++,Ce.counters?.schemaChanged)){const Le=te.data?.series,Ve=ie.series;Ve&&Le&&((0,_a.nl)(Ve,Le,_a.Ch)||this.counters.schemaChanged++)}return!0}render(){const{data:te,options:ie}=this.props,Ce=ie.counters??{};this.counters.render++;const Le=Date.now(),Ve=Le-this.lastRender;this.lastRender=Le;const je=hr.TB.get(hr.gz.lastNotNull);return D.createElement("div",null,D.createElement("div",null,D.createElement(mo.h,{name:"step-backward",title:"reset counters",onClick:this.resetCounters}),D.createElement("span",null,Ce.render&&D.createElement("span",null,"Render: ",this.counters.render,"\xA0"),Ce.dataChanged&&D.createElement("span",null,"Data: ",this.counters.dataChanged,"\xA0"),Ce.schemaChanged&&D.createElement("span",null,"Schema: ",this.counters.schemaChanged,"\xA0"),D.createElement("span",null,"TIME: ",Ve,"ms"))),te.series&&te.series.map((rt,dt)=>D.createElement("div",{key:`${dt}/${rt.refId}`},D.createElement("h4",null,(0,hn.n)(rt,dt)," (",rt.length,")"),D.createElement("table",{className:"filter-table"},D.createElement("thead",null,D.createElement("tr",null,D.createElement("td",null,"Field"),D.createElement("td",null,"Type"),D.createElement("td",null,"Last"))),D.createElement("tbody",null,rt.fields.map((Ct,Et)=>{const wt=je.reduce(Ct,!1,!1)[je.id];return D.createElement("tr",{key:`${Et}/${Ct.name}`},D.createElement("td",null,(0,hn.C)(Ct,rt,te.series)),D.createElement("td",null,Ct.type),D.createElement("td",null,`${wt}`))}))))))}}var Oc=e(46967);function Ic(W){const te=(0,Ge.R9)(),ie=Ce=>{te.onInstanceStateChange({name:Ce.currentTarget.value})};return D.createElement(D.Fragment,null,D.createElement(Ba.g,{label:"State name"},D.createElement(Oc.I,{value:te.instanceState?.name??"",onChange:ie})))}function Vr({value:W,context:te,onChange:ie,item:Ce}){return D.createElement("div",null,"Current value: ",te.instanceState?.name," ")}var Jr=(W=>(W.Render="render",W.Events="events",W.Cursor="cursor",W.State="State",W.ThrowError="ThrowError",W))(Jr||{});class Hd extends D.Component{render(){const{options:te}=this.props;switch(te.mode){case Jr.Events:return D.createElement(Vd,{eventBus:this.props.eventBus});case Jr.Cursor:return D.createElement($d,{eventBus:this.props.eventBus});case Jr.State:return D.createElement(Ic,{...this.props});case Jr.ThrowError:throw new Error("I failed you and for that i am deeply sorry");default:return D.createElement(zd,{...this.props})}}}const kd=new me.c(Hd).useFieldConfig().setPanelOptions(W=>{W.addSelect({path:"mode",name:"Mode",defaultValue:Jr.Render,settings:{options:[{label:"Render",value:Jr.Render},{label:"Events",value:Jr.Events},{label:"Cursor",value:Jr.Cursor},{label:"Cursor",value:Jr.Cursor},{label:"Share state",value:Jr.State},{label:"Throw error",value:Jr.ThrowError}]}}).addCustomEditor({id:"stateView",path:"stateView",name:"State view",defaultValue:"",showIf:({mode:te})=>te===Jr.State,editor:Vr}).addBooleanSwitch({path:"counters.render",name:"Render Count",defaultValue:!0,showIf:({mode:te})=>te===Jr.Render}).addBooleanSwitch({path:"counters.dataChanged",name:"Data Changed Count",defaultValue:!0,showIf:({mode:te})=>te===Jr.Render}).addBooleanSwitch({path:"counters.schemaChanged",name:"Schema Changed Count",defaultValue:!0,showIf:({mode:te})=>te===Jr.Render}).addDashboardPicker({path:"dashboardUID",name:"Dashboard",settings:{placeholder:"Select dashboard",isClearable:!0}})});var rl=e(35450);const Ni=W=>D.createElement(rl.Z,{data:W.data.series[0],app:le.zj.Unknown,flameGraphHeight:W.height}),Ir=new me.c(Ni);var ii=e(7149),Rc=e(67487);const Ac=(W,te)=>{const ie="linear-gradient(to right, #5182CC 0%, #245BAF 100%)",Ce=te?ie:"linear-gradient(to right, #f05a28 0%, #fbca0a 100%)",Le=te?ie:"linear-gradient(to right, #FBCA0A 0%, #F05A28 100%)",Ve=W.isDark?Ce:Le;return`
      background-color: ${W.colors.background.secondary};
      margin-right: ${W.spacing(4)};
      border: 1px solid ${W.colors.border.weak};
      border-bottom-left-radius: ${W.shape.borderRadius(2)};
      border-bottom-right-radius: ${W.shape.borderRadius(2)};
      position: relative;
      max-height: 230px;

      ${W.breakpoints.down("xxl")} {
        margin-right: ${W.spacing(2)};
      }
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 2px;
        top: 0;
        background-image: ${Ve};
      }
`},Ui=(W,te)=>x.css`
  color: ${te?W.v1.palette.blue95:W.colors.text.secondary};

  ${W.breakpoints.down("sm")} {
    display: none;
  }
`,Lc=x.css`
  padding: 16px;
`,zl=({card:W})=>{const te=(0,ot.wW)((0,D.useCallback)(Ce=>Gd(Ce,W.done),[W.done])),ie=(0,ot.wW)((0,D.useCallback)(Ce=>Ui(Ce,W.done),[W.done]));return D.createElement("div",{className:te.card},D.createElement("div",{className:Lc},D.createElement("a",{href:`${W.href}?utm_source=grafana_gettingstarted`,className:te.url},D.createElement("div",{className:te.heading},W.done?"complete":W.heading),D.createElement("h4",{className:te.title},W.title),D.createElement("div",null,D.createElement(It.J,{className:ie,name:W.icon,size:"xxl"})))),D.createElement("a",{href:`${W.learnHref}?utm_source=grafana_gettingstarted`,className:te.learnUrl,target:"_blank",rel:"noreferrer"},"Learn how in the docs ",D.createElement(It.J,{name:"external-link-alt"})))},Gd=(W,te)=>({card:x.css`
      ${Ac(W,te)}

      min-width: 230px;

      ${W.breakpoints.down("md")} {
        min-width: 192px;
      }
    `,heading:x.css`
      text-transform: uppercase;
      color: ${te?W.v1.palette.blue95:"#FFB357"};
      margin-bottom: ${W.spacing(2)};
    `,title:x.css`
      margin-bottom: ${W.spacing(2)};
    `,url:x.css`
      display: inline-block;
    `,learnUrl:x.css`
      border-top: 1px solid ${W.colors.border.weak};
      position: absolute;
      bottom: 0;
      padding: 8px 16px;
      width: 100%;
    `});var zo=e(58379);const Pa=({card:W})=>{const te=(0,ot.wW)((0,D.useCallback)(Ce=>Hl(Ce,W.done),[W.done])),ie=(0,ot.wW)((0,D.useCallback)(Ce=>Ui(Ce,W.done),[W.done]));return D.createElement("a",{className:te.card,target:"_blank",rel:"noreferrer",href:`${W.href}?utm_source=grafana_gettingstarted`,onClick:Ce=>Bc(Ce,W)},D.createElement("div",{className:Lc},D.createElement("div",{className:te.type},W.type),D.createElement("div",{className:te.heading},W.done?"complete":W.heading),D.createElement("h4",{className:te.cardTitle},W.title),D.createElement("div",{className:te.info},W.info),D.createElement(It.J,{className:ie,name:W.icon,size:"xxl"})))},Bc=(W,te)=>{W.preventDefault(),zo.Z.get(te.key)||zo.Z.set(te.key,!0)},Hl=(W,te)=>({card:x.css`
      ${Ac(W,te)}
      width: 460px;
      min-width: 460px;

      ${W.breakpoints.down("xl")} {
        min-width: 368px;
      }

      ${W.breakpoints.down("lg")} {
        min-width: 272px;
      }
    `,type:x.css`
      color: ${W.colors.primary.text};
      text-transform: uppercase;
    `,heading:x.css`
      text-transform: uppercase;
      color: ${W.colors.primary.text};
      margin-bottom: ${W.spacing(1)};
    `,cardTitle:x.css`
      margin-bottom: ${W.spacing(2)};
    `,info:x.css`
      margin-bottom: ${W.spacing(2)};
    `,status:x.css`
      display: flex;
      justify-content: flex-end;
    `}),Do=({step:W})=>{const te=(0,ot.wW)(So);return D.createElement("div",{className:te.setup},D.createElement("div",{className:te.info},D.createElement("h2",{className:te.title},W.title),D.createElement("p",null,W.info)),D.createElement("div",{className:te.cards},W.cards.map((ie,Ce)=>{const Le=`${ie.title}-${Ce}`;return ie.type==="tutorial"?D.createElement(Pa,{key:Le,card:ie}):D.createElement(zl,{key:Le,card:ie})})))},So=W=>({setup:x.css`
      display: flex;
      width: 95%;
    `,info:x.css`
      width: 172px;
      margin-right: 5%;

      ${W.breakpoints.down("xxl")} {
        margin-right: ${W.spacing(4)};
      }
      ${W.breakpoints.down("sm")} {
        display: none;
      }
    `,title:x.css`
      color: ${W.v1.palette.blue95};
    `,cards:x.css`
      overflow-x: scroll;
      overflow-y: hidden;
      width: 100%;
      display: flex;
      justify-content: center;

      ${W.breakpoints.down("xxl")} {
        justify-content: flex-start;
      }
    `});var wc=e(91162);const kl="Grafana fundamentals",Gl="Create users and teams",Ps="getting.started.",xi=`${Ps}${kl.replace(" ","-").trim().toLowerCase()}`,Nc=`${Ps}${Gl.replace(" ","-").trim().toLowerCase()}`,jd=()=>[{heading:"Welcome to Grafana",subheading:"The steps below will guide you to quickly finish setting up your Grafana installation.",title:"Basic",info:"The steps below will guide you to quickly finish setting up your Grafana installation.",done:!1,cards:[{type:"tutorial",heading:"Data source and dashboards",title:kl,info:"Set up and understand Grafana if you have no prior experience. This tutorial guides you through the entire process and covers the \u201CData source\u201D and \u201CDashboards\u201D steps to the right.",href:"https://grafana.com/tutorials/grafana-fundamentals",icon:"grafana",check:()=>Promise.resolve(zo.Z.get(xi)),key:xi,done:!1},{type:"docs",title:"Add your first data source",heading:"data sources",icon:"database",learnHref:"https://grafana.com/docs/grafana/latest/features/datasources/add-a-data-source",href:"datasources/new",check:()=>new Promise(W=>{W((0,wc.ak)().getMetricSources().filter(te=>te.meta.builtIn!==!0).length>0)}),done:!1},{type:"docs",heading:"dashboards",title:"Create your first dashboard",icon:"apps",href:"dashboard/new",learnHref:"https://grafana.com/docs/grafana/latest/guides/getting_started/#create-a-dashboard",check:async()=>(await(0,Be.i)().search({limit:1})).length>0,done:!1}]},{heading:"Setup complete!",subheading:"All necessary steps to use Grafana are done. Now tackle advanced steps or make the best use of this home dashboard \u2013 it is, after all, a fully customizable dashboard \u2013 and remove this panel.",title:"Advanced",info:" Manage your users and teams and add plugins. These steps are optional",done:!1,cards:[{type:"tutorial",heading:"Users",title:"Create users and teams",info:"Learn to organize your users in teams and manage resource access and roles.",href:"https://grafana.com/tutorials/create-users-and-teams",icon:"users-alt",key:Nc,check:()=>Promise.resolve(zo.Z.get(Nc)),done:!1},{type:"docs",heading:"plugins",title:"Find and install plugins",learnHref:"https://grafana.com/docs/grafana/latest/plugins/installation",href:"plugins",icon:"plug",check:async()=>{const W=await(0,Be.i)().get("/api/plugins",{embedded:0,core:0});return Promise.resolve(W.length>0)},done:!1}]}];class Yd extends D.PureComponent{constructor(){super(...arguments),this.state={checksDone:!1,currentStep:0,steps:jd()},this.onForwardClick=()=>{this.setState(te=>({currentStep:te.currentStep+1}))},this.onPreviousClick=()=>{this.setState(te=>({currentStep:te.currentStep-1}))},this.dismiss=()=>{const{id:te}=this.props,ie=(0,en.h4)().getCurrent(),Ce=ie?.getPanelById(te);ie?.removePanel(Ce),Be.ae.put("/api/user/helpflags/1",void 0,{showSuccessAlert:!1}).then(Le=>{de.Vt.user.helpFlags1=Le.helpFlags1})}}async componentDidMount(){const{steps:te}=this.state,ie=te.map(async Le=>{const Ve=Le.cards.map(rt=>rt.check().then(dt=>({...rt,done:dt}))),je=await Promise.all(Ve);return{...Le,done:je.every(rt=>rt.done),cards:je}}),Ce=await Promise.all(ie);this.setState({currentStep:Ce[0].done?1:0,steps:Ce,checksDone:!0})}render(){const{checksDone:te,currentStep:ie,steps:Ce}=this.state,Le=Qd(),Ve=Ce[ie];return D.createElement("div",{className:Le.container},te?D.createElement(D.Fragment,null,D.createElement(Ye.zx,{variant:"secondary",fill:"text",className:Le.dismiss,onClick:this.dismiss},"Remove this panel"),ie===Ce.length-1&&D.createElement(Ye.zx,{className:(0,x.cx)(Le.backForwardButtons,Le.previous),onClick:this.onPreviousClick,"aria-label":"To advanced tutorials",icon:"angle-left",variant:"secondary"}),D.createElement("div",{className:Le.content},D.createElement(Do,{step:Ve})),ie<Ce.length-1&&D.createElement(Ye.zx,{className:(0,x.cx)(Le.backForwardButtons,Le.forward),onClick:this.onForwardClick,"aria-label":"To basic tutorials",icon:"angle-right",variant:"secondary"})):D.createElement("div",{className:Le.loading},D.createElement("div",{className:Le.loadingText},"Checking completed setup steps"),D.createElement(Rc.$,{size:24,inline:!0})))}}const Qd=(0,ur.B)(()=>{const W=Re.v.theme2;return{container:x.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      // background: url(public/img/getting_started_bg_${W.colors.mode}.svg) no-repeat;
      background-size: cover;
      padding: ${W.spacing(4)} ${W.spacing(2)} 0;
    `,content:x.css`
      label: content;
      display: flex;
      justify-content: center;

      ${W.breakpoints.down("xxl")} {
        margin-left: ${W.spacing(3)};
        justify-content: flex-start;
      }
    `,header:x.css`
      label: header;
      margin-bottom: ${W.spacing(3)};
      display: flex;
      flex-direction: column;

      ${W.breakpoints.down("lg")} {
        flex-direction: row;
      }
    `,headerLogo:x.css`
      height: 58px;
      padding-right: ${W.spacing(2)};
      display: none;

      ${W.breakpoints.up("md")} {
        display: block;
      }
    `,heading:x.css`
      label: heading;
      margin-right: ${W.spacing(3)};
      margin-bottom: ${W.spacing(3)};
      flex-grow: 1;
      display: flex;

      ${W.breakpoints.up("md")} {
        margin-bottom: 0;
      }
    `,backForwardButtons:x.css`
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `,previous:x.css`
      left: 10px;

      ${W.breakpoints.down("md")} {
        left: 0;
      }
    `,forward:x.css`
      right: 10px;

      ${W.breakpoints.down("md")} {
        right: 0;
      }
    `,dismiss:x.css`
      align-self: flex-end;
      text-decoration: underline;
      margin-bottom: ${W.spacing(1)};
    `,loading:x.css`
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    `,loadingText:x.css`
      margin-right: ${W.spacing(1)};
    `}}),Zd=new me.c(Yd).setNoPadding();var so=e(15128),Uc=e(3200);const Qu=Object.freeze([0,0]),jl={bucketOffset:0},Yl={fillOpacity:80,gradientMode:Rt.FI.None,lineWidth:1};function Fc(W,te){return Math.floor(W/te)*te}function Jd(W,te){return Math.ceil(W/te)*te}function ol(W){return W.fields[1].values.get(0)-W.fields[0].values.get(0)}const li=(W,te)=>{let ie=new kr.U,Ce=ol(W),Le=(wt,zt,Vt,dn,un,Cn)=>{let Qt=wt.axes[zt]._space,ln=wt.valToPos(wt.data[0][0]+Ce,"x")-wt.valToPos(wt.data[0][0],"x"),_t=wt.data[0][0],mn=wt.data[0][wt.data[0].length-1]+Ce,Hn=[],In=Math.ceil(Qt/ln);for(let ra=0,jn=_t;jn<=mn;ra++,jn+=Ce)!(ra%In)&&Hn.push(jn);return Hn};ie.addScale({scaleKey:"x",isTime:!1,distribution:Rt.wf.Linear,orientation:Rt.wN.Horizontal,direction:Rt.bQ.Right,range:(wt,zt,Vt)=>{let dn=wt.data[0][0],un=wt.data[0][wt.data[0].length-1];return Vt===un?Vt+=Ce:Vt=Jd(Vt,Ce),zt>dn&&(zt=Fc(zt,Ce)),[zt,Vt]}}),ie.addScale({scaleKey:"y",isTime:!1,distribution:Rt.wf.Linear,orientation:Rt.wN.Vertical,direction:Rt.bQ.Up});const Ve=W.fields[0].display,je=wt=>(0,Za.zc)(Ve(wt));ie.addAxis({scaleKey:"x",isTime:!1,placement:Rt.LB.Bottom,incrs:so.Zi,splits:Le,values:(wt,zt)=>{const Vt=zt.map(je),dn=Vt.reduce((ln,_t)=>Math.max((0,We.X1)(_t,ct.gD).width,ln),0),un=10,Cn=wt.bbox.width/((dn+un)*devicePixelRatio),Qt=Math.ceil(Vt.length/Cn);return Vt.map((ln,_t)=>_t%Qt===0?ln:null)},theme:te});let dt=W.fields[2].display;ie.addAxis({scaleKey:"y",isTime:!1,placement:Rt.LB.Left,formatValue:(wt,zt)=>(0,Za.zc)(dt(wt,zt)),theme:te}),ie.setCursor({points:{show:!1},drag:{x:!0,y:!1,setScale:!0}});let Ct=Aa.Z.paths.bars({align:1,size:[1,1/0]}),Et=0;for(let wt=2;wt<W.fields.length;wt++){const zt=W.fields[wt];zt.state=zt.state??{},zt.state.seriesIndex=Et++;const Vt={...Yl,...zt.config.custom},dn="y",un=(0,cs.fD)(zt),Qt=(0,cs.YO)(zt,te).color;ie.addSeries({scaleKey:dn,lineWidth:Vt.lineWidth,lineColor:Qt,fillOpacity:Vt.fillOpacity,theme:te,colorMode:un,pathBuilder:Ct,show:!Vt.hideFrom?.viz,gradientMode:Vt.gradientMode,thresholds:zt.config.thresholds,hardMin:zt.config.min,hardMax:zt.config.max,softMin:Vt.axisSoftMin,softMax:Vt.axisSoftMax,dataFrameFieldIndex:zt.state.origin})}return ie},Wc=W=>{let te=[];for(const ie of W.fields)ie.name!==so.cO&&te.push(ie.values.toArray());for(let ie=1;ie<te.length;ie++){let Ce=te[ie];for(let Le=0;Le<Ce.length;Le++)Ce[Le]===0&&(Ce[Le]=null)}return te};class Xd extends D.Component{constructor(te){super(te),this.state=this.prepState(te)}prepState(te,ie=!0){let Ce=null;const{alignedFrame:Le}=te;return Le&&(Ce={alignedData:Wc(Le)},ie&&(Ce.config=li(Le,this.props.theme))),Ce}renderLegend(te){const{legend:ie}=this.props;return!te||ie.showLegend===!1?null:D.createElement(qt.l,{data:this.props.rawSeries,config:te,maxHeight:"35%",maxWidth:"60%",...ie})}componentDidUpdate(te){const{structureRev:ie,alignedFrame:Ce,bucketSize:Le}=this.props;if(Ce!==te.alignedFrame){let Ve=this.prepState(this.props,!1);Ve&&(Le!==te.bucketSize||this.props.options!==te.options||this.state.config===void 0||ie!==te.structureRev||!ie)&&(Ve.config=li(Ce,this.props.theme)),Ve&&this.setState(Ve)}}render(){const{width:te,height:ie,children:Ce,alignedFrame:Le}=this.props,{config:Ve}=this.state;return Ve?D.createElement(St.AY,{width:te,height:ie,legend:this.renderLegend(Ve)},(je,rt)=>D.createElement(Uc.N,{config:this.state.config,data:this.state.alignedData,width:je,height:rt,timeRange:null},Ce?Ce(Ve,Le):null)):null}}const $c=({data:W,options:te,width:ie,height:Ce})=>{const Le=(0,ot.l4)(),Ve=(0,D.useMemo)(()=>{if(!W?.series?.length)return;if(W.series.forEach((dt,Ct)=>{dt.fields.forEach((Et,wt)=>{Et.state={...Et.state,origin:{frameIndex:Ct,fieldIndex:wt}}})}),W.series.length===1){const dt=(0,so.qr)(W.series[0]);if(dt)return(0,so.zM)(dt)}const rt=(0,so.gY)(W.series,te);if(rt)return(0,so.zM)(rt,Le)},[W.series,te,Le]);if(!Ve||!Ve.fields.length)return D.createElement("div",{className:"panel-empty"},D.createElement("p",null,"No histogram found in response"));const je=ol(Ve);return D.createElement(Xd,{options:te,theme:Le,legend:te.legend,rawSeries:W.series,structureRev:W.structureRev,width:ie,height:Ce,alignedFrame:Ve,bucketSize:je},(rt,dt)=>null)};function il(W){if(W?.length!==1)return!1;const te=W[0];if(te.fields.length<3||!(0,so.Ok)(te.fields[0].name)||!(0,so.kl)(te.fields[1].name))return!1;for(const ie of te.fields)if(ie.type!==fn.fS.number)return!1;return!0}const co=new me.c($c).setPanelOptions(W=>{W.addCustomEditor({id:"__calc__",path:"__calc__",name:"Values",description:"Showing frequencies that are calculated in the query",editor:()=>null,showIf:(te,ie)=>il(ie)}).addNumberInput({path:"bucketSize",name:so.py.bucketSize.name,description:so.py.bucketSize.description,settings:{placeholder:"Auto",min:0},defaultValue:jl.bucketSize,showIf:(te,ie)=>!il(ie)}).addNumberInput({path:"bucketOffset",name:so.py.bucketOffset.name,description:so.py.bucketOffset.description,settings:{placeholder:"0",min:0},defaultValue:jl.bucketOffset,showIf:(te,ie)=>!il(ie)}).addBooleanSwitch({path:"combine",name:so.py.combine.name,description:so.py.combine.description,defaultValue:jl.combine,showIf:(te,ie)=>!il(ie)}),rs.J(W)}).useFieldConfig({standardOptions:{[Gt.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Zt.S.PaletteClassic}}},useCustomConfig:W=>{const te=Yl;W.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:te.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:te.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:ya.q.fillGradient[0].value,settings:{options:ya.q.fillGradient}}),Ca.B(W)}});var br=e(62626),ll=e(64353);const cl=[{label:"Grafana",value:br.z.Grafana,description:"Core grafana live features"},{label:"Data Sources",value:br.z.DataSource,description:"Data sources with live support"},{label:"Plugins",value:br.z.Plugin,description:"Plugins with live support"}];class Js extends D.PureComponent{constructor(){super(...arguments),this.state={namespaces:[],paths:[]},this.onScopeChanged=te=>{te.value&&this.props.onChange({scope:te.value,namespace:void 0,path:void 0})},this.onNamespaceChanged=te=>{const ie={scope:this.props.value?.scope,path:void 0};te.value&&(ie.namespace=te.value),this.props.onChange(ie)},this.onPathChanged=te=>{const{value:ie,onChange:Ce}=this.props,Le={scope:ie.scope,namespace:ie.namespace};te.value&&(Le.path=te.value),Ce(Le)}}async componentDidMount(){this.updateSelectOptions()}async componentDidUpdate(te){this.props.value!==te.value&&this.updateSelectOptions()}async updateSelectOptions(){this.setState({namespaces:[],paths:[]})}render(){const{namespaces:te,paths:ie}=this.state,{scope:Ce,namespace:Le,path:Ve}=this.props.value,je=Kc(X.vc.theme2);return D.createElement(D.Fragment,null,D.createElement(Ea.b,{title:"Grafana Live",severity:"info"},"This supports real-time event streams in grafana core. This feature is under heavy development. Expect the intefaces and structures to change as this becomes more production ready."),D.createElement("div",null,D.createElement("div",{className:je.dropWrap},D.createElement(ll._,null,"Scope"),D.createElement(pt.Ph,{options:cl,value:cl.find(rt=>rt.value===Ce),onChange:this.onScopeChanged})),Ce&&D.createElement("div",{className:je.dropWrap},D.createElement(ll._,null,"Namespace"),D.createElement(pt.Ph,{options:te,value:te.find(rt=>rt.value===Le)??(Le?{label:Le,value:Le}:void 0),onChange:this.onNamespaceChanged,allowCustomValue:!0,backspaceRemovesValue:!0})),Ce&&Le&&D.createElement("div",{className:je.dropWrap},D.createElement(ll._,null,"Path"),D.createElement(pt.Ph,{options:ie,value:vo(ie,Ve),onChange:this.onPathChanged,allowCustomValue:!0,backspaceRemovesValue:!0}))))}}function vo(W,te){const ie=W.find(Ce=>Ce.value===te);if(ie)return ie;if(te)return{label:te,value:te}}const Kc=(0,ur.B)(W=>({dropWrap:x.css`
    margin-bottom: ${W.spacing(1)};
  `}));var Fi=e(49922),Ho=e(75118),_d=e(16065),dl=e(9405),Ql=e(28625),ko=e(85854),Lo=e(88144);function bi(W){const{data:te,height:ie,width:Ce,options:Le,fieldConfig:Ve,id:je}=W,rt=(0,ot.l4)(),dt=(0,Ge.R9)(),Ct=te.series,Et=Ct.filter(mn=>mn.meta?.custom?.parentRowIndex===void 0),wt=Ct.filter(mn=>mn.meta?.custom?.parentRowIndex!==void 0),zt=Et?.length,Vt=Et[0]?.fields.length,dn=Xs(Et,Le),un=Et[dn];let Cn=ie,Qt=wt;if(!zt||!Vt)return D.createElement(Bt.Z,{panelId:je,fieldConfig:Ve,data:te});if(zt>1){const mn=rt.spacing.gridSize*rt.components.height.md,Hn=rt.spacing.gridSize;Cn=ie-mn-Hn,Qt=wt.filter(In=>In.refId===un.refId)}const ln=D.createElement(Lo.i,{height:Cn,width:Ce,data:un,noHeader:!Le.showHeader,showTypeIcons:Le.showTypeIcons,resizable:!0,initialSortBy:Le.sortBy,onSortByChange:mn=>Us(mn,W),onColumnResize:(mn,Hn)=>Rr(mn,Hn,W),onCellFilterAdded:dt.onAddAdHocFilter,footerOptions:Le.footer,enablePagination:Le.footer?.enablePagination,subData:Qt});if(zt===1)return ln;const _t=Et.map((mn,Hn)=>({label:(0,hn.n)(mn),value:Hn}));return D.createElement("div",{className:ro.wrapper},ln,D.createElement("div",{className:ro.selectWrapper},D.createElement(pt.Ph,{options:_t,value:_t[dn],onChange:mn=>Di(mn,W)})))}function Xs(W,te){return te.frameIndex>0&&te.frameIndex<W.length?te.frameIndex:0}function Rr(W,te,ie){const{fieldConfig:Ce}=ie,{overrides:Le}=Ce,Ve=ko.mi.byName,je="custom.width",rt=Le.find(dt=>dt.matcher.id===Ve&&dt.matcher.options===W);if(rt){const dt=rt.properties.find(Ct=>Ct.id===je);dt?dt.value=te:rt.properties.push({id:je,value:te})}else Le.push({matcher:{id:Ve,options:W},properties:[{id:je,value:te}]});ie.onFieldConfigChange({...Ce,overrides:Le})}function Us(W,te){te.onOptionsChange({...te.options,sortBy:W})}function Di(W,te){te.onOptionsChange({...te.options,frameIndex:W.value||0})}const ro={wrapper:x.css`
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
  `,noData:x.css`
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
  `,selectWrapper:x.css`
    padding: 8px 8px 0px 8px;
  `};var Gr=(W=>(W.Raw="raw",W.JSON="json",W.Auto="auto",W.None="none",W))(Gr||{});class qd extends D.PureComponent{constructor(te){super(te),this.styles=eu(Re.v.theme2),this.streamObserver={next:ie=>{(0,br.se)(ie)?this.setState({status:ie,changed:Date.now()}):(0,br.RL)(ie)?this.setState({message:ie.message,changed:Date.now()}):console.log("ignore",ie)}},this.unsubscribe=()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)},this.onSaveJSON=ie=>{const{options:Ce,onOptionsChange:Le}=this.props;try{const Ve=JSON.parse(ie);Le({...Ce,json:Ve})}catch(Ve){console.log("Error reading JSON",Ve)}},this.onPublishClicked=async()=>{const{addr:ie}=this.state;if(!ie){console.log("invalid address");return}const Ce=this.props.options?.json;if(!Ce){console.log("nothing to publish");return}const Le=await(0,Ho.gj)().publish(ie,Ce);console.log("onPublishClicked (response from publish)",Le)},this.isValid=!!(0,Ho.gj)(),this.state={changed:0}}async componentDidMount(){this.loadChannel()}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(te){this.props.options?.channel!==te.options?.channel&&this.loadChannel()}async loadChannel(){const te=this.props.options?.channel;if(!(0,br.nU)(te)){console.log("INVALID",te),this.unsubscribe(),this.setState({addr:void 0});return}if((0,R.isEqual)(te,this.state.addr)){console.log("Same channel",this.state.addr);return}const ie=(0,Ho.gj)();if(!ie){console.log("INVALID",te),this.unsubscribe(),this.setState({addr:void 0});return}this.unsubscribe(),console.log("LOAD",te);try{this.subscription=ie.getStream(te).subscribe(this.streamObserver),this.setState({addr:te,error:void 0})}catch(Ce){this.setState({addr:void 0,error:Ce})}}renderNotEnabled(){const te=`[feature_toggles]
    enable = live`;return D.createElement(Ea.b,{title:"Grafana Live",severity:"info"},D.createElement("p",null,"Grafana live requires a feature flag to run"),D.createElement("b",null,"custom.ini:"),D.createElement("pre",null,te))}renderMessage(te){const{options:ie}=this.props,{message:Ce}=this.state;if(!Ce)return D.createElement("div",null,D.createElement("h4",null,"Waiting for data:"),ie.channel?.scope,"/",ie.channel?.namespace,"/",ie.channel?.path);if(ie.message===Gr.JSON)return D.createElement(_d.g,{json:Ce,open:5});if(ie.message===Gr.Auto&&Ce instanceof Ql.Av){const Le={series:(0,xn.SM)({data:[Ce],theme:Re.v.theme2,replaceVariables:je=>je,fieldConfig:{defaults:{},overrides:[]}}),state:Fi.Gu.Streaming},Ve={...this.props,options:{frameIndex:0,showHeader:!0}};return D.createElement(bi,{...Ve,data:Le,height:te})}return D.createElement("pre",null,JSON.stringify(Ce))}renderPublish(te){const{options:ie}=this.props;return D.createElement(D.Fragment,null,D.createElement(dl.p,{height:te-32,language:"json",value:ie.json?JSON.stringify(ie.json,null,2):"{ }",onBlur:this.onSaveJSON,onSave:this.onSaveJSON,showMiniMap:!1,showLineNumbers:!0}),D.createElement("div",{style:{height:32}},D.createElement(Ye.zx,{onClick:this.onPublishClicked},"Publish")))}renderStatus(){const{status:te}=this.state;if(te?.state===br.yS.Connected)return;let ie="";return te&&(ie=this.styles.status[te.state]),D.createElement("div",{className:(0,x.cx)(ie,this.styles.statusWrap)},te?.state)}renderBody(){const{status:te}=this.state,{options:ie,height:Ce}=this.props;if(ie.publish){if(ie.message===Gr.None)return D.createElement("div",null,this.renderPublish(Ce));const Le=Ce/2;return D.createElement("div",null,D.createElement("div",{style:{height:Le,overflow:"hidden"}},D.createElement(_e.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(Le))),D.createElement("div",null,this.renderPublish(Le)))}return ie.message===Gr.None?D.createElement("pre",null,JSON.stringify(te)):D.createElement("div",{style:{overflow:"hidden",height:Ce}},D.createElement(_e.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(Ce)))}render(){if(!this.isValid)return this.renderNotEnabled();const{addr:te,error:ie}=this.state;return te?ie?D.createElement("div",null,D.createElement("h2",null,"ERROR"),D.createElement("div",null,JSON.stringify(ie))):D.createElement(D.Fragment,null,this.renderStatus(),this.renderBody()):D.createElement(Ea.b,{title:"Grafana Live",severity:"info"},"Use the panel editor to pick a channel")}}const eu=(0,ur.B)(W=>({statusWrap:x.css`
    margin: auto;
    position: absolute;
    top: 0;
    right: 0;
    background: ${W.components.panel.background};
    padding: 10px;
    z-index: ${W.zIndex.modal};
  `,status:{[br.yS.Pending]:x.css`
      border: 1px solid ${W.v1.palette.orange};
    `,[br.yS.Connected]:x.css`
      border: 1px solid ${W.colors.success.main};
    `,[br.yS.Connecting]:x.css`
      border: 1px solid ${W.v1.palette.brandWarning};
    `,[br.yS.Disconnected]:x.css`
      border: 1px solid ${W.colors.warning.main};
    `,[br.yS.Shutdown]:x.css`
      border: 1px solid ${W.colors.error.main};
    `,[br.yS.Invalid]:x.css`
      border: 1px solid red;
    `}})),Vc=new me.c(qd).setPanelOptions(W=>{W.addCustomEditor({category:["Channel"],id:"channel",path:"channel",name:"Channel",editor:Js,defaultValue:{}}),W.addRadio({path:"message",name:"Show Message",description:"Display the last message received on this channel",settings:{options:[{value:Gr.Raw,label:"Raw Text"},{value:Gr.JSON,label:"JSON"},{value:Gr.Auto,label:"Auto"},{value:Gr.None,label:"None"}]},defaultValue:Gr.JSON}).addBooleanSwitch({path:"publish",name:"Show Publish",description:"Display a form to publish values",defaultValue:!1})});var jr=e(90595),Wi=e(37959),Zl=e(51927),zc=e(54972),ul=e(28947);const Hc=({data:W,timeZone:te,fieldConfig:ie,options:{showLabels:Ce,showTime:Le,wrapLogMessage:Ve,showCommonLabels:je,prettifyLogMessage:rt,sortOrder:dt,dedupStrategy:Ct,enableLogDetails:Et},title:wt,id:zt})=>{const Vt=dt===jr.UV.Ascending,dn=(0,ot.wW)(kc(wt,Vt)),[un,Cn]=(0,D.useState)(0),Qt=(0,D.useRef)(null),{eventBus:ln}=(0,Ge.R9)(),_t=(0,D.useCallback)(ga=>{ga?ln.publish(new Ga.es({point:{time:ga.timeEpochMs}})):ln.publish(new Ga.xH)},[ln]),[mn,Hn,In]=(0,D.useMemo)(()=>{const ga=W?(0,Wi.aB)(W.series,W.request?.intervalMs,void 0,W.request?.targets):null,Ra=ga?.rows||[],Ta=ga?.meta?.find(rr=>rr.label===Wi.Qp),Ja=(0,Wi.UW)(Ra,Ct);return[Ra,Ja,Ta]},[W,Ct]);(0,D.useLayoutEffect)(()=>{Vt&&Qt.current?Cn(Qt.current.offsetHeight):Cn(0)},[Vt,mn]);const ra=(0,D.useCallback)((ga,Ra)=>(0,ia.a)({field:ga,rowIndex:Ra,range:W.timeRange}),[W]);if(!W||mn.length===0)return D.createElement(Zl.Z,{fieldConfig:ie,panelId:zt,data:W,needsStringField:!0});const jn=()=>D.createElement("div",{className:dn.labelContainer},D.createElement("span",{className:dn.label},"Common labels:"),D.createElement(zc.j,{labels:In?In.value:{labels:"(no common labels)"}}));return D.createElement(_e.$,{autoHide:!0,scrollTop:un},D.createElement("div",{className:dn.container,ref:Qt},je&&!Vt&&jn(),D.createElement(ul.w,{logRows:mn,deduplicatedRows:Hn,dedupStrategy:Ct,showLabels:Ce,showTime:Le,wrapLogMessage:Ve,prettifyLogMessage:rt,timeZone:te,getFieldLinks:ra,logsSortOrder:dt,enableLogDetails:Et,previewLimit:Vt?mn.length:void 0,onLogRowHover:_t,app:le.zj.Dashboard}),je&&Vt&&jn()))},kc=(W,te)=>ie=>({container:x.css`
    margin-bottom: ${ie.spacing(1.5)};
    //We can remove this hot-fix when we fix panel menu with no title overflowing top of all panels
    margin-top: ${ie.spacing(W?0:2.5)};
  `,labelContainer:x.css`
    margin: ${te?ie.spacing(.5,0,.5,0):ie.spacing(0,0,.5,.5)};
    display: flex;
    align-items: center;
  `,label:x.css`
    margin-right: ${ie.spacing(.5)};
    font-size: ${ie.typography.bodySmall.fontSize};
    font-weight: ${ie.typography.fontWeightMedium};
  `});class tu{getSuggestionsForData(te){const ie=te.getListAppender({name:"",pluginId:"logs",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}),{dataSummary:Ce}=te;!Ce.hasData||!Ce.hasTimeField||!Ce.hasStringField||(Ce.preferredVisualisationType==="logs"?ie.append({name:ps.y.Logs,score:Tn._.Best}):ie.append({name:ps.y.Logs}))}}const ml=new me.c(Hc).setPanelOptions(W=>{W.addBooleanSwitch({path:"showTime",name:"Time",description:"",defaultValue:!1}).addBooleanSwitch({path:"showLabels",name:"Unique labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"showCommonLabels",name:"Common labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"wrapLogMessage",name:"Wrap lines",description:"",defaultValue:!1}).addBooleanSwitch({path:"prettifyLogMessage",name:"Prettify JSON",description:"",defaultValue:!1}).addBooleanSwitch({path:"enableLogDetails",name:"Enable log details",description:"",defaultValue:!0}).addRadio({path:"dedupStrategy",name:"Deduplication",description:"",settings:{options:[{value:jr.Y4.none,label:"None",description:jr.Uv[jr.Y4.none]},{value:jr.Y4.exact,label:"Exact",description:jr.Uv[jr.Y4.exact]},{value:jr.Y4.numbers,label:"Numbers",description:jr.Uv[jr.Y4.numbers]},{value:jr.Y4.signature,label:"Signature",description:jr.Uv[jr.Y4.signature]}]},defaultValue:jr.Y4.none}).addRadio({path:"sortOrder",name:"Order",description:"",settings:{options:[{value:jr.UV.Descending,label:"Newest first"},{value:jr.UV.Ascending,label:"Oldest first"}]},defaultValue:jr.UV.Descending})}).setSuggestionsSupplier(new tu);var fl=e(53764),Gc=e(6981),nu=e(13724);function au(W){const{width:te,options:{feedUrl:ie=Gc.k,showImage:Ce}}=W,{state:Le,getNews:Ve}=(0,nu.j)(ie);return(0,D.useEffect)(()=>{const je=W.eventBus.subscribe(ja.U5,Ve);return()=>{je.unsubscribe()}},[Ve,W.eventBus]),(0,D.useEffect)(()=>{Ve()},[Ve]),Le.error?D.createElement("div",null,"Error loading RSS feed."):Le.loading?D.createElement("div",null,"Loading..."):Le.value?D.createElement(_e.$,{autoHeightMin:"100%",autoHeightMax:"100%"},Le.value.map((je,rt)=>D.createElement(fl.S,{key:rt,index:rt,width:te,showImage:Ce,data:Le.value}))):null}const Zu=Object.freeze([0,0]),jc={showImage:!0},$i=new me.c(au).setPanelOptions(W=>{W.addTextInput({path:"feedUrl",name:"URL",description:"Supports RSS and Atom feeds",settings:{placeholder:Gc.k},defaultValue:jc.feedUrl}).addBooleanSwitch({path:"showImage",name:"Show image",description:"Controls if the news item social (og:image) image is shown above text content",defaultValue:jc.showImage})});var Ju=e(58635),Yc=e(74538),Si=e(68545);const Ki=({width:W,height:te,data:ie,options:Ce})=>{const Le=(0,ia.u)(ie.timeRange);if(!ie||!ie.series.length)return D.createElement("div",{className:"panel-empty"},D.createElement("p",null,"No data found in response"));const Ve=(0,Ju.Z)(Si.Ee);return D.createElement("div",{style:{width:W,height:te}},D.createElement(Yc.E,{dataFrames:Ve(ie.series,Ce),getLinks:Le}))};var Qc=e(90208),gl=e(15448);const Go=({value:W,onChange:te,context:ie})=>{const Ce=(0,ot.wW)(Zc),Le=()=>{const rt={field:"",color:""};te(W?[...W,rt]:[rt])},Ve=rt=>{const dt=W?.slice();dt.splice(rt,1),te(dt)},je=(rt,dt,Ct)=>{let Et=W?.slice()??[];Et[rt][dt]=Ct,te(Et)};return D.createElement(D.Fragment,null,W?.map((rt,dt)=>D.createElement("div",{className:Ce.section,key:dt},D.createElement(gl.b,{context:ie,value:rt.field??"",onChange:Ct=>{je(dt,"field",Ct)},item:{settings:{filter:Ct=>Ct.name.includes("arc__")},id:`arc-field-${dt}`,name:`arc-field-${dt}`,editor:()=>null}}),D.createElement(Qc.zH,{color:rt.color||"#808080",onChange:Ct=>{je(dt,"color",Ct)}}),D.createElement(Ye.zx,{size:"sm",icon:"minus",variant:"secondary",onClick:()=>Ve(dt),title:"Remove arc"}))),D.createElement(Ye.zx,{size:"sm",icon:"plus",onClick:Le,variant:"secondary"},"Add arc"))},Zc=()=>({section:x.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0 8px;
      margin-bottom: 8px;
    `}),Jl=new me.c(Ki).setPanelOptions((W,te)=>{W.addNestedOptions({category:["Nodes"],path:"nodes",build:ie=>{ie.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),ie.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"}),ie.addCustomEditor({name:"Arc sections",path:"arcs",id:"arcs",editor:Go})}}),W.addNestedOptions({category:["Edges"],path:"edges",build:ie=>{ie.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),ie.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"})}})});var Xl=e(17128),Jc=e(26993),Xc=e(5361),pl=e(42365),_c=e(78668),qc=e(66838),hl=e(82992),ed=e(22038),_l=e(35008),ql=e.n(_l),jo=e(18543),oo=e(50800);let su=0;const ru=()=>su++;function Mi(W){const te=(0,D.useRef)(null);return te.current===null&&(te.current=W+ru()),te.current.toString()}const vl=Object.freeze([0,0]);var Eo=(W=>(W.Donut="donut",W.Pie="pie",W))(Eo||{}),eo=(W=>(W.Name="name",W.Percent="percent",W.Value="value",W))(eo||{}),Yo=(W=>(W.Percent="percent",W.Value="value",W))(Yo||{});const Xu={values:[]},_u={displayLabels:[]};function ci(W){return!W.field.custom?.hideFrom?.viz&&!isNaN(W.display.numeric)}function Qo(W,te){return te.display.numeric+W}const ou=({fieldDisplayValues:W,pieType:te,width:ie,height:Ce,highlightedTitle:Le,displayLabels:Ve=[],tooltipOptions:je})=>{const rt=(0,ot.l4)(),dt=Mi("PieChart"),Ct=(0,ot.wW)(Zo),Et=(0,hl.Z)(),{containerRef:wt,TooltipInPortal:zt}=(0,ed.Z)({detectBounds:!0,scroll:!0}),Vt=W.filter(ci),dn=In=>In.display.numeric,un=In=>`${dt}-${ql()(In).toHex()}`,Cn=In=>`url(#${un(In)})`,Qt=Ve.length>0,ln=je.mode!=="none"&&Et.tooltipOpen,_t=Vt.reduce(Qo,0),mn=uu(ie,Ce,te),Hn=[...new Set(Vt.map(In=>In.display.color??Zt.R))];return D.createElement("div",{className:Ct.container},D.createElement("svg",{width:mn.size,height:mn.size,ref:wt},D.createElement(_c.Z,{top:mn.position,left:mn.position},Hn.map(In=>D.createElement(pl.Z,{key:In,id:un(In),from:cu(In,rt),to:du(In,rt),fromOffset:mn.gradientFromOffset,toOffset:"1",gradientUnits:"userSpaceOnUse",cx:0,cy:0,radius:mn.outerRadius})),D.createElement(qc.Z,{data:Vt,pieValue:dn,outerRadius:mn.outerRadius,innerRadius:mn.innerRadius,cornerRadius:3,padAngle:.005},In=>D.createElement(D.Fragment,null,In.arcs.map(ra=>{const jn=ra.data.display.color??Zt.R,ga=El(Le,ra);return ra.data.hasLinks&&ra.data.getLinks?D.createElement(jo.V,{key:ra.index,links:ra.data.getLinks},Ra=>D.createElement(ec,{tooltip:Et,highlightState:ga,arc:ra,pie:In,fill:Cn(jn),openMenu:Ra.openMenu,tooltipOptions:je})):D.createElement(ec,{key:ra.index,highlightState:ga,tooltip:Et,arc:ra,pie:In,fill:Cn(jn),tooltipOptions:je})}),Qt&&In.arcs.map(ra=>{const jn=El(Le,ra);return D.createElement(td,{arc:ra,key:ra.index,highlightState:jn,outerRadius:mn.outerRadius,innerRadius:mn.innerRadius,displayLabels:Ve,total:_t,color:rt.colors.text.primary})}))))),ln?D.createElement(zt,{key:Math.random(),top:Et.tooltipTop,className:Ct.tooltipPortal,left:Et.tooltipLeft,unstyled:!0,applyPositionStyle:!0},D.createElement(oo.c,{series:Et.tooltipData})):null)};function ec({arc:W,pie:te,highlightState:ie,openMenu:Ce,fill:Le,tooltip:Ve,tooltipOptions:je}){const rt=(0,ot.l4)(),dt=(0,ot.wW)(Zo),{eventBus:Ct}=(0,Ge.R9)(),Et=(0,D.useCallback)(Vt=>{Ct?.publish({type:Ga.xH.type,payload:{raw:Vt,x:0,y:0,dataId:W.data.display.title}}),Ve.hideTooltip()},[Ct,W,Ve]),wt=(0,D.useCallback)(Vt=>{Ct?.publish({type:Ga.es.type,payload:{raw:Vt,x:0,y:0,dataId:W.data.display.title}});const dn=Vt.currentTarget.ownerSVGElement;if(dn){const un=(0,Xc.Z)(dn,Vt);Ve.showTooltip({tooltipLeft:un.x,tooltipTop:un.y,tooltipData:iu(te,W,je)})}},[Ct,W,Ve,te,je]),zt=Vi(ie,dt);return D.createElement("g",{key:W.data.display.title,className:zt,onMouseMove:je.mode!=="none"?wt:void 0,onMouseOut:Et,onClick:Ce,"aria-label":Qe.wl.components.Panels.Visualization.PieChart.svgSlice},D.createElement("path",{d:te.path({...W}),fill:Le,stroke:rt.colors.background.primary,strokeWidth:1}))}function td({arc:W,outerRadius:te,innerRadius:ie,displayLabels:Ce,total:Le,color:Ve,highlightState:je}){const rt=(0,ot.wW)(Zo),dt=ie===0?te/6:ie,[Ct,Et]=lu(W,te,dt);if(!(W.endAngle-W.startAngle>=.3))return null;let zt=Ce.includes(eo.Name)?Math.min(Math.max(te/150*14,12),30):Math.min(Math.max(te/100*14,12),36);return D.createElement("g",{className:Vi(je,rt)},D.createElement("text",{fill:Ve,x:Ct,y:Et,dy:".33em",fontSize:zt,fontWeight:500,textAnchor:"middle",pointerEvents:"none"},Ce.includes(eo.Name)&&D.createElement("tspan",{x:Ct,dy:"1.2em"},W.data.display.title),Ce.includes(eo.Value)&&D.createElement("tspan",{x:Ct,dy:"1.2em"},(0,Za.zc)(W.data.display)),Ce.includes(eo.Percent)&&D.createElement("tspan",{x:Ct,dy:"1.2em"},(W.data.display.numeric/Le*100).toFixed(W.data.field.decimals??0)+"%")))}function iu(W,te,ie){return ie.mode==="multi"?W.arcs.filter(Ce=>{const Le=Ce.data.field;return Le&&!Le.custom?.hideFrom?.tooltip&&!Le.custom?.hideFrom?.viz}).map(Ce=>({color:Ce.data.display.color??Zt.R,label:Ce.data.display.title,value:(0,Za.zc)(Ce.data.display),isActive:Ce.index===te.index})):[{color:te.data.display.color??Zt.R,label:te.data.display.title,value:(0,Za.zc)(te.data.display)}]}function lu(W,te,ie){const Ce=(te+ie)/2,Le=(+W.startAngle+ +W.endAngle)/2-Math.PI/2;return[Math.cos(Le)*Ce,Math.sin(Le)*Ce]}function cu(W,te){return ql()(W).darken(20*(te.isDark?1:-.7)).spin(4).toRgbString()}function du(W,te){return ql()(W).darken(10*(te.isDark?1:-.7)).spin(-4).toRgbString()}function uu(W,te,ie,Ce=16){const Le=Math.min(te,W),Ve=(Le-Ce*2)/2,je=ie===Eo.Pie?Ve:Math.max(Ve/3,20),rt=Ve-je,dt=(Le-Ce*2)/2,Ct=1-(Ve-rt)/Ve;return{position:dt+Ce,size:Le,outerRadius:Ve,innerRadius:rt,gradientFromOffset:Ct}}var mu=(W=>(W[W.Highlighted=0]="Highlighted",W[W.Deemphasized=1]="Deemphasized",W[W.Normal=2]="Normal",W))(mu||{});function El(W,te){return W?W===te.data.display.title?0:1:2}function Vi(W,te){switch(W){case 0:return te.svgArg.highlighted;case 1:return te.svgArg.deemphasized;case 2:default:return te.svgArg.normal}}const Zo=W=>({container:x.css`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,svgArg:{normal:x.css`
        transition: all 200ms ease-in-out;
      `,highlighted:x.css`
        transition: all 200ms ease-in-out;
        transform: scale3d(1.03, 1.03, 1);
      `,deemphasized:x.css`
        transition: all 200ms ease-in-out;
        fill-opacity: 0.5;
      `},tooltipPortal:x.css`
      ${(0,Bl.getTooltipContainerStyles)(W)}
    `}),fu={displayMode:Rt.jK.List,showLegend:!0,placement:"right",calcs:[],values:[Yo.Percent]};function gu(W){const{data:te,timeZone:ie,fieldConfig:Ce,replaceVariables:Le,width:Ve,height:je,options:rt,id:dt}=W,Ct=(0,ot.l4)(),Et=pu(),wt=(0,Xl.nG)({fieldConfig:Ce,reduceOptions:rt.reduceOptions,data:te.series,theme:Ct,replaceVariables:Le,timeZone:ie});return em(wt)?D.createElement(St.AY,{width:Ve,height:je,legend:qu(W,wt)},(zt,Vt)=>D.createElement(ou,{width:zt,height:Vt,highlightedTitle:Et,fieldDisplayValues:wt,tooltipOptions:rt.tooltip,pieType:rt.pieType,displayLabels:rt.displayLabels})):D.createElement(Bt.Z,{panelId:dt,fieldConfig:Ce,data:te})}function qu(W,te){const ie=W.options.legend??fu;if(ie.showLegend===!1)return;const Ce=te.filter(ci).reduce(Qo,0),Le=te.sort((Ve,je)=>isNaN(Ve.display.numeric)?1:isNaN(je.display.numeric)?-1:je.display.numeric-Ve.display.numeric).map((Ve,je)=>{const rt=Ve.field.custom?.hideFrom??{};if(rt.legend)return;const dt=Boolean(rt.viz),Ct=Ve.display;return{label:Ct.title??"",color:Ct.color??Zt.R,yAxis:1,disabled:dt,getItemKey:()=>(Ct.title??"")+je,getDisplayValues:()=>{const Et=ie.values??[];let wt=[];if(Et.includes(Yo.Value)&&wt.push({numeric:Ct.numeric,text:(0,Za.zc)(Ct),title:"Value"}),Et.includes(Yo.Percent)){const zt=dt?0:Ct.numeric/Ce,Vt=zt*100;wt.push({numeric:zt,percent:Vt,text:dt||isNaN(zt)?W.fieldConfig.defaults.noValue??"-":Vt.toFixed(Ve.field.decimals??0)+"%",title:Et.length>1?"Percent":""})}return wt}}}).filter(Ve=>!!Ve);return D.createElement($t.l,{items:Le,seriesVisibilityChangeBehavior:Jc.Y.Hide,placement:ie.placement,displayMode:ie.displayMode})}function em(W){return W.some(te=>te.view?.dataFrame.length)}function pu(){const[W,te]=(0,D.useState)(),{eventBus:ie}=(0,Ge.R9)();return(0,D.useEffect)(()=>{const Ce=je=>{te(je.payload.dataId)},Le=je=>{te(void 0)},Ve=new ka.w0;return Ve.add(ie.getStream(Ga.es).subscribe({next:Ce})),Ve.add(ie.getStream(Ga.xH).subscribe({next:Le})),()=>{Ve.unsubscribe()}},[te,ie]),W}const tc=(W,te,ie)=>{if(te==="grafana-piechart-panel"&&ie.angular){const Ce=ie.angular,Le=[];let Ve=W.options;if(Ce.aliasColors)for(const je of Object.keys(Ce.aliasColors)){const rt=Ce.aliasColors[je];rt&&Le.push({matcher:{id:ko.mi.byName,options:je},properties:[{id:Gt.qb.Color,value:{mode:Zt.S.Fixed,fixedColor:rt}}]})}if(W.fieldConfig={overrides:Le,defaults:{unit:Ce.format,decimals:Ce.decimals?Ce.decimals:0}},Ve.legend={placement:"right",values:[],displayMode:Rt.jK.Table,showLegend:!0,calcs:[]},Ce.valueName)switch(Ve.reduceOptions={calcs:[]},Ce.valueName){case"current":Ve.reduceOptions.calcs=["lastNotNull"];break;case"min":Ve.reduceOptions.calcs=["min"];break;case"max":Ve.reduceOptions.calcs=["max"];break;case"avg":Ve.reduceOptions.calcs=["mean"];break;case"total":Ve.reduceOptions.calcs=["sum"];break}switch(Ce.legendType){case"Under graph":Ve.legend.placement="bottom";break;case"Right side":Ve.legend.placement="right";break}switch(Ce.pieType){case"pie":Ve.pieType=Eo.Pie;break;case"donut":Ve.pieType=Eo.Donut;break}return Ce.legend&&(Ce.legend.show||(Ve.legend.showLegend=!1),Ce.legend.values&&Ve.legend.values.push(Yo.Value),Ce.legend.percentage&&Ve.legend.values.push(Yo.Percent),!Ce.legend.percentage&&!Ce.legend.values&&(Ve.legend.showLegend=!1)),Ce.legendType==="On graph"&&(Ve.legend.showLegend=!1,Ve.displayLabels=[eo.Name],Ce.legend.values&&Ve.displayLabels.push(eo.Value),Ce.legend.percentage&&Ve.displayLabels.push(eo.Percent)),Ve}return{}};class hu{getSuggestionsForData(te){const ie=te.getListAppender({name:ps.y.PieChart,pluginId:"piechart",options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},displayLabels:[eo.Percent],legend:{placement:"right",values:[]}},cardOptions:{previewModifier:Le=>{Le.options.legend.showLegend=!1}}}),{dataSummary:Ce}=te;if(Ce.hasNumberField){if(Ce.hasStringField&&Ce.frameCount===1){if(Ce.rowCountTotal>30||Ce.rowCountTotal<2)return;ie.append({name:ps.y.PieChart,options:{reduceOptions:{values:!0,calcs:[]}}}),ie.append({name:ps.y.PieChartDonut,options:{reduceOptions:{values:!0,calcs:[]},pieType:Eo.Donut}});return}Ce.numberFieldCount>30||Ce.numberFieldCount<2||(ie.append({name:ps.y.PieChart}),ie.append({name:ps.y.PieChartDonut,options:{pieType:Eo.Donut}}))}}}const Jo=new me.c(gu).setPanelChangeHandler(tc).useFieldConfig({disableStandardOptions:[Gt.qb.Thresholds],standardOptions:{[Gt.qb.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Zt.S.PaletteClassic}}},useCustomConfig:W=>{Ca.B(W)}}).setPanelOptions(W=>{(0,hi.j)(W),W.addRadio({name:"Piechart type",description:"How the piechart should be rendered",path:"pieType",settings:{options:[{value:Eo.Pie,label:"Pie"},{value:Eo.Donut,label:"Donut"}]},defaultValue:Eo.Pie}).addMultiSelect({name:"Labels",path:"displayLabels",description:"Select the labels to be displayed in the pie chart",settings:{options:[{value:eo.Percent,label:"Percent"},{value:eo.Name,label:"Name"},{value:eo.Value,label:"Value"}]}}),wa.L(W),rs.J(W,!1),W.addMultiSelect({name:"Legend values",path:"legend.values",category:["Legend"],settings:{options:[{value:Yo.Percent,label:"Percent"},{value:Yo.Value,label:"Value"}]},showIf:te=>te.legend.showLegend!==!1})}).setSuggestionsSupplier(new hu);var nd=e(98967),nc=e(49616);const yl=["rowHeight","colWidth","showValue","mergeValues","alignValue"];class ac extends D.Component{constructor(){super(...arguments),this.panelContext={},this.getValueColor=(te,ie,Ce)=>{const Le=this.props.frames[te].fields[ie];if(Le.display){const Ve=Le.display(Ce);if(Ve.color)return Ve.color}return Zt.R},this.prepConfig=(te,ie,Ce)=>{this.panelContext=this.context;const{eventBus:Le,sync:Ve}=this.panelContext;return(0,os.Nj)({frame:te,getTimeRange:Ce,eventBus:Le,sync:Ve,allFrames:this.props.frames,...this.props,timeZones:Array.isArray(this.props.timeZone)?this.props.timeZone:[this.props.timeZone],rowHeight:te.fields.length>2?this.props.rowHeight:1,getValueColor:this.getValueColor})},this.renderLegend=te=>{const{legend:ie,legendItems:Ce}=this.props;return!te||!Ce||!ie||ie.showLegend===!1?null:D.createElement(St.AY.Legend,{placement:ie.placement},D.createElement($t.l,{placement:ie.placement,items:Ce,displayMode:ie.displayMode,readonly:!0}))}}render(){return D.createElement(Yt.d,{...this.props,fields:{x:te=>te.type===fn.fS.time,y:te=>te.type===fn.fS.number||te.type===fn.fS.boolean||te.type===fn.fS.string},prepConfig:this.prepConfig,propsToDiff:yl,renderLegend:this.renderLegend})}}ac.contextType=Ge.bb;const Pl=({data:W,alignedData:te,seriesIdx:ie,datapointIdx:Ce,timeZone:Le,onAnnotationAdd:Ve})=>{const je=(0,ot.l4)();if(!W||Ce==null)return null;const rt=te.fields[ie],dt=[],Ct=new Set;if(rt.getLinks){const In=rt.values.get(Ce),ra=rt.display?rt.display(In):{text:`${In}`,numeric:+In};rt.getLinks({calculatedValue:ra,valueRowIndex:Ce}).forEach(jn=>{const ga=`${jn.title}/${jn.href}`;Ct.has(ga)||(dt.push(jn),Ct.add(ga))})}const Et=te.fields[0],wt=Et.display||(0,Ys.U)({field:Et,timeZone:Le,theme:je}),zt=rt.state?.origin,Vt=rt.display||(0,Ys.U)({field:rt,timeZone:Le,theme:je}),dn=rt.values.get(Ce),un=Vt(dn),Cn=zt?(0,hn.C)(W[zt.frameIndex].fields[zt.fieldIndex],W[zt.frameIndex],W):null,Qt=(0,os.iK)(rt,Ce);let ln;Qt&&(ln=Et.values.get(Qt));const _t=Et.values.get(Ce);let mn=null,Hn=null;if(ln){const In=ln&&(0,os.Y)(ln-_t);Hn=D.createElement(D.Fragment,null,D.createElement("br",null),D.createElement("strong",null,"Duration:")," ",In),mn=D.createElement(D.Fragment,null," to"," ",D.createElement("strong",null,wt(Et.values.get(Qt)).text))}return D.createElement("div",null,D.createElement("div",{style:{fontSize:je.typography.bodySmall.fontSize}},Cn,D.createElement("br",null),D.createElement(oo.V,{label:un.text,color:un.color||Zt.R,isActive:!0}),"From ",D.createElement("strong",null,wt(Et.values.get(Ce)).text),mn,Hn),D.createElement("div",{style:{margin:je.spacing(1,-1,-1,-1),borderTop:`1px solid ${je.colors.border.weak}`}},Ve&&D.createElement(_i.s,{label:"Add annotation",icon:"comment-alt",onClick:Ve}),dt.length>0&&dt.map((In,ra)=>D.createElement(_i.s,{key:ra,icon:"external-link-alt",target:In.target,label:In.title,url:In.href,onClick:In.onClick}))))};Pl.displayName="StateTimelineTooltip";const zi=10,sc=({data:W,timeRange:te,timeZone:ie,options:Ce,width:Le,height:Ve,replaceVariables:je,onChangeTimeRange:rt})=>{const dt=(0,ot.l4)(),Ct=(0,D.useRef)(void 0),Et=(0,D.useRef)(!1),[wt,zt]=(0,D.useState)(void 0),[Vt,dn]=(0,D.useState)(null),[un,Cn]=(0,D.useState)(null),[Qt,ln]=(0,D.useState)(null),[_t,mn]=(0,D.useState)(!1),[Hn,In]=(0,D.useState)(!1),{sync:ra,canAddAnnotations:jn}=(0,Ge.R9)(),ga=()=>{Et.current=!1,dn(null),In(!1)},Ra=()=>{Et.current=!Et.current,In(Et.current)},{frames:Ta,warn:Ja}=(0,D.useMemo)(()=>(0,os.AR)(W?.series,Ce.mergeValues??!0,te,dt),[W,Ce.mergeValues,te,dt]),rr=(0,D.useMemo)(()=>(0,os.SA)(Ta,Ce.legend,dt),[Ta,Ce.legend,dt]),Cs=(0,D.useMemo)(()=>Kl(Ce.timezone,ie),[Ce.timezone,ie]),ua=(0,D.useCallback)((fs,fr,Cr,gr)=>{const Dr=Ta??[],Qs=Dr.reduce((Ka,gs)=>Ka+gs.fields.filter(Ls=>Ls.type!==fn.fS.time).length,0);return fr===null||Cr===null||!fs.meta?.transformations?.length&&fs.fields.length-1!==Qs||!fs.fields[fr]?null:D.createElement(D.Fragment,null,Hn&&D.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},D.createElement(ns.P,{onClick:ga,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),D.createElement(Pl,{data:Dr,alignedData:fs,seriesIdx:fr,datapointIdx:Cr,timeZone:ie,onAnnotationAdd:gr}))},[ie,Ta,Hn]);if(!Ta||Ja)return D.createElement("div",{className:"panel-empty"},D.createElement("p",null,Ja??"No data found in response"));if(Ta.length===1){const fs=(0,Ql.MB)(Ta[0])}const qa=Boolean(jn&&jn());return D.createElement(ac,{theme:dt,frames:Ta,structureRev:W.structureRev,timeRange:te,timeZone:Cs,width:Le,height:Ve,legendItems:rr,...Ce,mode:os.KN.Changes},(fs,fr)=>(Ct.current!==fs&&(Ct.current=_n({config:fs,onUPlotClick:Ra,setFocusedSeriesIdx:Cn,setFocusedPointIdx:ln,setCoords:dn,setHover:zt,isToolTipOpen:Et,isActive:_t,setIsActive:mn,sync:ra})),D.createElement(D.Fragment,null,D.createElement(Ln.R,{config:fs,onZoom:rt}),D.createElement(Ei,{config:fs,onChangeTimeRange:rt}),W.annotations&&D.createElement(qr,{annotations:W.annotations,config:fs,timeZone:ie}),qa?D.createElement(vi,{data:fr,timeZone:ie,config:fs},({startAnnotating:Cr})=>Ce.tooltip.mode===Rt.f3.None||Qt===null||!_t&&ra&&ra()===wn.m.Crosshair?null:D.createElement(Dn.h_,null,wt&&Vt&&un&&D.createElement(Nn.S,{position:{x:Vt.viewport.x,y:Vt.viewport.y},offset:{x:zi,y:zi},allowPointerEvents:Et.current},ua(fr,un,Qt,()=>{Cr({coords:{plotCanvas:Vt.canvas,viewport:Vt.viewport}}),ga()})))):D.createElement(Dn.h_,null,Ce.tooltip.mode!==Rt.f3.None&&wt&&Vt&&D.createElement(Nn.S,{position:{x:Vt.viewport.x,y:Vt.viewport.y},offset:{x:zi,y:zi},allowPointerEvents:Et.current},ua(fr,un,Qt))))))};var yo=e(26031);const ad=(W,te,ie)=>{let Ce=W.options??{};if(te==="natel-discrete-panel"&&ie.angular){const Le=ie.angular,Ve=W.fieldConfig??{defaults:{},overrides:[]};Le.units&&(Ve.defaults.unit=Le.units);const je={fillOpacity:100,lineWidth:0};Ve.defaults.custom=je,Ce.mergeValues=!0;const rt={type:yo.H.ValueToText,options:{}};if(Ve.defaults.mappings=[rt],(0,R.isArray)(Le.colorMaps))for(const dt of Le.colorMaps){const Ct=dt.color;Ct&&(rt.options[dt.text]={color:Ct})}if((0,R.isArray)(Le.valueMaps))for(const dt of Le.valueMaps){const Ct=dt.text,Et=dt.value;if(Ct&&Et){let wt=rt.options[Et];wt?wt.text=Ct:rt.options[Et]={text:Ct}}}if((0,R.isArray)(Le.rangeMaps))for(const dt of Le.rangeMaps){let Ct=+dt.from,Et=+dt.to;const wt=dt.text;wt&&Ve.defaults.mappings.push({type:yo.H.RangeToText,options:{from:Ct,to:Et,result:{text:wt}}})}W.fieldConfig=Ve}return Ce},tm=Object.freeze([0,0]),Cl={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:Rt.Jp.Auto},sd={fillOpacity:70,lineWidth:0};class vu{getSuggestionsForData(te){const{dataSummary:ie}=te;if(!ie.hasData||!ie.hasTimeField||!ie.hasStringField&&!ie.hasNumberField||ie.numberFieldCount>=30||ie.preferredVisualisationType==="logs")return;te.getListAppender({name:"",pluginId:"state-timeline",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:ps.y.StateTimeline})}}const Eu=new me.c(sc).setPanelChangeHandler(ad).useFieldConfig({standardOptions:{[Gt.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Zt.S.ContinuousGrYlRd}}},useCustomConfig:W=>{W.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:sd.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:sd.fillOpacity,settings:{min:0,max:100,step:1}}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",defaultValue:!1,editor:nc.c,override:nc.c,shouldApply:te=>te.type!==fn.fS.time,process:cn.kG})}}).setPanelOptions(W=>{W.addBooleanSwitch({path:"mergeValues",name:"Merge equal consecutive values",defaultValue:Cl.mergeValues}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Rt.Jp.Auto,label:"Auto"},{value:Rt.Jp.Always,label:"Always"},{value:Rt.Jp.Never,label:"Never"}]},defaultValue:Cl.showValue}).addRadio({path:"alignValue",name:"Align values",settings:{options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},defaultValue:Cl.alignValue}).addSliderInput({path:"rowHeight",name:"Row height",settings:{min:0,max:1,step:.01},defaultValue:Cl.rowHeight}),rs.J(W,!1),wa.L(W,!0)}).setSuggestionsSupplier(new vu).setDataSupport({annotations:!0}),rd=({data:W,alignedData:te,seriesIdx:ie,datapointIdx:Ce,timeZone:Le})=>{const Ve=(0,ot.l4)();if(!W||Ce==null)return null;const je=te.fields[ie],rt=[],dt=new Set;if(je.getLinks){const Cn=je.values.get(Ce),Qt=je.display?je.display(Cn):{text:`${Cn}`,numeric:+Cn};je.getLinks({calculatedValue:Qt,valueRowIndex:Ce}).forEach(ln=>{const _t=`${ln.title}/${ln.href}`;dt.has(_t)||(rt.push(ln),dt.add(_t))})}const Ct=te.fields[0],Et=Ct.display||(0,Ys.U)({field:Ct,timeZone:Le,theme:Ve}),wt=je.state?.origin,zt=je.display||(0,Ys.U)({field:je,timeZone:Le,theme:Ve}),Vt=je.values.get(Ce),dn=zt(Vt),un=wt?(0,hn.C)(W[wt.frameIndex].fields[wt.fieldIndex],W[wt.frameIndex],W):null;return D.createElement("div",null,D.createElement("div",{style:{fontSize:Ve.typography.bodySmall.fontSize}},D.createElement("strong",null,Et(Ct.values.get(Ce)).text),D.createElement("br",null),D.createElement(oo.V,{label:dn.text,color:dn.color||Zt.R,isActive:!0}),un),rt.length>0&&D.createElement("div",{style:{margin:Ve.spacing(1,-1,-1,-1),borderTop:`1px solid ${Ve.colors.border.weak}`}},rt.map((Cn,Qt)=>D.createElement(_i.s,{key:Qt,icon:"external-link-alt",target:Cn.target,label:Cn.title,url:Cn.href,onClick:Cn.onClick}))))};rd.displayName="StatusHistoryTooltip";const od=10,yu=({data:W,timeRange:te,timeZone:ie,options:Ce,width:Le,height:Ve,onChangeTimeRange:je})=>{const rt=(0,ot.l4)(),dt=(0,D.useRef)(void 0),Ct=(0,D.useRef)(!1),[Et,wt]=(0,D.useState)(void 0),[zt,Vt]=(0,D.useState)(null),[dn,un]=(0,D.useState)(null),[Cn,Qt]=(0,D.useState)(null),[ln,_t]=(0,D.useState)(!1),[mn,Hn]=(0,D.useState)(!1),{sync:In}=(0,Ge.R9)(),ra=()=>{Ct.current=!1,Vt(null),Hn(!1)},jn=()=>{Ct.current=!Ct.current,Hn(Ct.current)},{frames:ga,warn:Ra}=(0,D.useMemo)(()=>(0,os.AR)(W?.series,!1,te,rt),[W,te,rt]),Ta=(0,D.useMemo)(()=>(0,os.SA)(ga,Ce.legend,rt),[ga,Ce.legend,rt]),Ja=(0,D.useCallback)((ua,qa,fs)=>{const fr=ga??[],Cr=fr.reduce((gr,Dr)=>gr+Dr.fields.filter(Qs=>Qs.type!==fn.fS.time).length,0);return qa===null||fs===null||!ua.meta?.transformations?.length&&ua.fields.length-1!==Cr||!ua.fields[qa]?null:D.createElement(D.Fragment,null,mn&&D.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},D.createElement(ns.P,{onClick:ra,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),D.createElement(rd,{data:fr,alignedData:ua,seriesIdx:qa,datapointIdx:fs,timeZone:ie}))},[ie,ga,mn]),rr=ua=>Ce.tooltip.mode===Rt.f3.None||Cn===null||!ln&&In&&In()===wn.m.Crosshair?null:D.createElement(Dn.h_,null,Et&&zt&&dn&&D.createElement(Nn.S,{position:{x:zt.viewport.x,y:zt.viewport.y},offset:{x:od,y:od},allowPointerEvents:Ct.current},Ja(ua,dn,Cn))),Cs=(0,D.useMemo)(()=>Kl(Ce.timezone,ie),[Ce.timezone,ie]);return!ga||Ra?D.createElement("div",{className:"panel-empty"},D.createElement("p",null,Ra??"No data found in response")):ga[0].length>Le/2?D.createElement("div",{className:"panel-empty"},D.createElement("p",null,"Too many points to visualize properly. ",D.createElement("br",null),"Update the query to return fewer points. ",D.createElement("br",null),"(",ga[0].length," points received)")):D.createElement(ac,{theme:rt,frames:ga,structureRev:W.structureRev,timeRange:te,timeZone:Cs,width:Le,height:Ve,legendItems:Ta,...Ce,mode:os.KN.Samples},(ua,qa)=>(dt.current!==ua&&(dt.current=_n({config:ua,onUPlotClick:jn,setFocusedSeriesIdx:un,setFocusedPointIdx:Qt,setCoords:Vt,setHover:wt,isToolTipOpen:Ct,isActive:ln,setIsActive:_t})),D.createElement(D.Fragment,null,D.createElement(Ln.R,{config:ua,onZoom:je}),rr(qa),D.createElement(Ei,{config:ua,onChangeTimeRange:je}))))},Pu=Object.freeze([0,0]),rc={colWidth:.9,rowHeight:.9,showValue:Rt.Jp.Auto},oc={fillOpacity:70,lineWidth:1};class Cu{getSuggestionsForData(te){const{dataSummary:ie}=te;if(!ie.hasData||!ie.hasTimeField||!ie.hasStringField&&!ie.hasNumberField||ie.numberFieldCount>=30||ie.rowCountMax>100||ie.preferredVisualisationType==="logs")return;te.getListAppender({name:"",pluginId:"status-history",options:{},fieldConfig:{defaults:{color:{mode:Zt.S.ContinuousGrYlRd},custom:{}},overrides:[]},cardOptions:{previewModifier:Le=>{Le.options.colWidth=.7}}}).append({name:ps.y.StatusHistory})}}const xu=new me.c(yu).useFieldConfig({standardOptions:{[Gt.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Zt.S.Thresholds}}},useCustomConfig:W=>{W.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:oc.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:oc.fillOpacity,settings:{min:0,max:100,step:1}})}}).setPanelOptions(W=>{W.addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Rt.Jp.Auto,label:"Auto"},{value:Rt.Jp.Always,label:"Always"},{value:Rt.Jp.Never,label:"Never"}]},defaultValue:Rt.Jp.Auto}).addSliderInput({path:"rowHeight",name:"Row height",defaultValue:.9,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"colWidth",name:"Column width",defaultValue:.9,settings:{min:0,max:1,step:.01}}),rs.J(W,!1),wa.L(W,!0)}).setSuggestionsSupplier(new Cu);var bu=e(35363),id=e(8944);function ld({onChange:W,value:te,context:ie}){const Ce=Le=>{Le?.currentTarget.checked&&(ie.options.footer.show=!1),W(Le?.currentTarget.checked)};return D.createElement(id.r,{value:Boolean(te),onChange:Ce})}const ic=[{value:Rt.QH.Basic,label:"Basic"},{value:Rt.QH.Gradient,label:"Gradient"},{value:Rt.QH.Lcd,label:"Retro LCD"}],nm=({cellOptions:W,onChange:te})=>{const ie=Ce=>{W.mode=Ce.value,te(W)};return D.createElement(Zr.Lh,null,D.createElement(Ba.g,{label:"Gauge Display Mode"},D.createElement(pt.Ph,{value:W?.mode,onChange:ie,options:ic})))},lc=[{value:Rt.v7.Basic,label:"Basic"},{value:Rt.v7.Gradient,label:"Gradient"}],Du=({cellOptions:W,onChange:te})=>{const ie=Ce=>{W.mode=Ce.value,te(W)};return D.createElement(Zr.Lh,null,D.createElement(Ba.g,{label:"Background display mode"},D.createElement(pt.Ph,{value:W?.mode,onChange:ie,options:lc})))},cc=({value:W,onChange:te})=>{const ie=W.type,Ce=xl.find(dt=>dt.value.type===ie);let[Le,Ve]=(0,D.useState)({});const je=dt=>{dt.value!==void 0&&(W=dt.value,Le[W.type]!==void 0&&Object.keys(Le[W.type]).length>1&&(W=(0,R.merge)(W,Le[W.type])),te(W))},rt=dt=>{Le[W.type]=(0,R.merge)(W,dt),Ve(Le),te(Le[W.type])};return D.createElement(D.Fragment,null,D.createElement(Ba.g,null,D.createElement(pt.Ph,{options:xl,value:Ce,onChange:je})),ie===Rt.h2.Gauge&&D.createElement(nm,{cellOptions:W,onChange:rt}),ie===Rt.h2.ColorBackground&&D.createElement(Du,{cellOptions:W,onChange:rt}))},xl=[{value:{type:Rt.h2.Auto},label:"Auto"},{value:{type:Rt.h2.ColorText},label:"Colored text"},{value:{type:Rt.h2.ColorBackground},label:"Colored background"},{value:{type:Rt.h2.Gauge},label:"Gauge"},{value:{type:Rt.h2.JSONView},label:"JSON View"},{value:{type:Rt.h2.Image},label:"Image"}];var dc=e(24177);const uc=W=>(!W.pluginVersion&&W.columns&&console.log("Was angular table",W),W.options),cd={timeseries_to_rows:"seriesToRows",timeseries_to_columns:"seriesToColumns",timeseries_aggregations:"reduce",table:"merge"},Su={avg:"mean",min:"min",max:"max",total:"sum",current:"lastNotNull",count:"count"},dd={cell:"color-background",row:"color-background",value:"color-text"},mc=(W,te)=>[-1/0,...W].map((ie,Ce)=>({color:te[Ce],value:(0,R.isNumber)(ie)?ie:parseInt(ie,10)})),fc=(W,te)=>{const ie=W.transformations??[];if(Object.keys(cd).includes(te.transform)){const Ce={reducers:[]};te.transform==="timeseries_aggregations"&&(Ce.includeTimeField=!1,Ce.reducers=te.columns.map(Le=>Su[Le.value])),ie.push({id:cd[te.transform],options:Ce})}return ie},Mu=W=>{const ie={matcher:{id:/^\/.*\/$/.test(W.pattern)?ko.mi.byRegexp:ko.mi.byName,options:W.pattern},properties:[]};return W.alias&&ie.properties.push({id:"displayName",value:W.alias}),W.unit&&ie.properties.push({id:"unit",value:W.unit}),W.decimals&&ie.properties.push({id:"decimals",value:W.decimals}),W.type==="date"&&ie.properties.push({id:"unit",value:`time: ${W.dateFormat}`}),W.link&&ie.properties.push({id:"links",value:[{title:(0,R.defaultTo)(W.linkTooltip,""),url:(0,R.defaultTo)(W.linkUrl,""),targetBlank:(0,R.defaultTo)(W.linkTargetBlank,!1)}]}),W.colorMode&&ie.properties.push({id:"custom.displayMode",value:dd[W.colorMode]}),W.align&&ie.properties.push({id:"custom.align",value:W.align==="auto"?null:W.align}),W.thresholds?.length&&ie.properties.push({id:"thresholds",value:{mode:dc.H.Absolute,steps:mc(W.thresholds,W.colors)}}),ie},Tu=W=>{let te={custom:{}};if(W&&(te=(0,R.omitBy)({unit:W.unit,decimals:W.decimals,displayName:W.alias,custom:{align:W.align==="auto"?null:W.align,displayMode:dd[W.colorMode]}},R.isNil),W.thresholds.length)){const ie={mode:dc.H.Absolute,steps:mc(W.thresholds,W.colors)};te.thresholds=ie}return te},Ou=(W,te,ie)=>{if(te==="table-old"&&ie.angular){const Ce=ie.angular,Le=fc(W,Ce),Ve=Ce.styles.find(dt=>dt.pattern==="/.*/"),je=Tu(Ve),rt=Ce.styles.filter(dt=>dt.pattern!=="/.*/").map(Mu);W.transformations=Le,W.fieldConfig={defaults:je,overrides:rt}}return{}},am=Object.freeze([1,0]),bl={frameIndex:0,showHeader:!0,showTypeIcons:!1,footer:{show:!1,reducer:[],countRows:!1}},Hi={align:"auto",cellOptions:{type:Rt.h2.Auto},inspect:!1};class Iu{getSuggestionsForData(te){const ie=te.getListAppender({name:ps.y.Table,pluginId:"table",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Ce=>{Ce.fieldConfig.defaults.custom.minWidth=50}}});te.dataSummary.fieldCount===0?ie.append({cardOptions:{imgSrc:"public/app/plugins/panel/table/img/icn-table-panel.svg"}}):ie.append({})}}const di="Table footer",Dl=["Cell Options"],gc=new me.c(bi).setPanelChangeHandler(Ou).setMigrationHandler(uc).useFieldConfig({useCustomConfig:W=>{W.addNumberInput({path:"minWidth",name:"Minimum column width",description:"The minimum width for column auto resizing",settings:{placeholder:"150",min:50,max:500},shouldApply:()=>!0,defaultValue:Hi.minWidth}).addNumberInput({path:"width",name:"Column width",settings:{placeholder:"auto",min:20,max:300},shouldApply:()=>!0,defaultValue:Hi.width}).addRadio({path:"align",name:"Column alignment",settings:{options:[{label:"auto",value:"auto"},{label:"left",value:"left"},{label:"center",value:"center"},{label:"right",value:"right"}]},defaultValue:Hi.align}).addCustomEditor({id:"cellOptions",path:"cellOptions",name:"Cell Type",editor:cc,override:cc,defaultValue:Hi.cellOptions,process:cn.kG,category:Dl,shouldApply:()=>!0}).addBooleanSwitch({path:"inspect",name:"Cell value inspect",description:"Enable cell value inspection in a modal window",defaultValue:!1,category:Dl,showIf:te=>te.cellOptions.type===Rt.h2.Auto||te.cellOptions.type===Rt.h2.JSONView||te.cellOptions.type===Rt.h2.ColorText||te.cellOptions.type===Rt.h2.ColorBackground}).addBooleanSwitch({path:"filterable",name:"Column filter",description:"Enables/disables field filters in table",defaultValue:Hi.filterable}).addBooleanSwitch({path:"hidden",name:"Hide in table",defaultValue:void 0,hideFromDefaults:!0})}}).setPanelOptions(W=>{W.addBooleanSwitch({path:"showHeader",name:"Show table header",defaultValue:bl.showHeader}).addBooleanSwitch({path:"footer.show",category:[di],name:"Show table footer",defaultValue:bl.footer?.show}).addCustomEditor({id:"footer.reducer",category:[di],path:"footer.reducer",name:"Calculation",description:"Choose a reducer function / calculation",editor:bu.S.get("stats-picker").editor,defaultValue:[hr.gz.sum],showIf:te=>te.footer?.show}).addBooleanSwitch({path:"footer.countRows",category:[di],name:"Count rows",description:"Display a single count for all data rows",defaultValue:bl.footer?.countRows,showIf:te=>te.footer?.reducer?.length===1&&te.footer?.reducer[0]===hr.gz.count}).addMultiSelect({path:"footer.fields",category:[di],name:"Fields",description:"Select the fields that should be calculated",settings:{allowCustomValue:!1,options:[],placeholder:"All Numeric Fields",getOptions:async te=>{const ie=[];if(te&&te.data&&te.data.length>0){const Ce=te.data[0];for(const Le of Ce.fields)if(Le.type===fn.fS.number){const Ve=(0,hn.C)(Le,Ce,te.data),je=Le.name;ie.push({value:je,label:Ve})}}return ie}},defaultValue:"",showIf:te=>te.footer?.show&&!te.footer?.countRows||te.footer?.reducer?.length===1&&te.footer?.reducer[0]!==hr.gz.count}).addCustomEditor({id:"footer.enablePagination",path:"footer.enablePagination",name:"Enable pagination",editor:ld})}).setSuggestionsSupplier(new Iu);var Ru=e(54391),Au=e(70197),Lu=e(41959);const sm=Object.freeze([0,0]);var Xr=(W=>(W.Code="code",W.HTML="html",W.Markdown="markdown",W))(Xr||{}),ud=(W=>(W.Go="go",W.Html="html",W.Json="json",W.Markdown="markdown",W.Plaintext="plaintext",W.Sql="sql",W.Typescript="typescript",W.Xml="xml",W.Yaml="yaml",W))(ud||{});const rm="plaintext",ki={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},pc={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"};function Bu(W){const te=(0,ot.wW)(fd),[ie,Ce]=(0,D.useState)({mode:W.options.mode,content:md(W.options,W.replaceVariables,X.ZP.disableSanitizeHtml)});if((0,Au.Z)(()=>{const{options:Le,replaceVariables:Ve}=W,je=md(Le,Ve,X.ZP.disableSanitizeHtml);(je!==ie.content||Le.mode!==ie.mode)&&Ce({mode:Le.mode,content:je})},100,[W]),ie.mode===Xr.Code){const Le=W.options.code??ki;return D.createElement(dl.p,{key:`${Le.showLineNumbers}/${Le.showMiniMap}`,value:ie.content,language:Le.language??ki.language,width:W.width,height:W.height,containerStyles:te.codeEditorContainer,showMiniMap:Le.showMiniMap,showLineNumbers:Le.showLineNumbers,readOnly:!0})}return D.createElement(_e.$,{autoHeightMin:"100%"},D.createElement(Ru.Z,{html:ie.content,className:te.markdown,"data-testid":"TextPanel-converted-content"}))}function md(W,te,ie){let{mode:Ce,content:Le}=W;if(!Le)return"";switch(Le=te(Le,{},W.code?.language==="json"?"json":"html"),Ce){case Xr.Code:break;case Xr.HTML:ie||(Le=wl.QX.sanitizeTextPanelContent(Le));break;case Xr.Markdown:default:Le=(0,Lu.x)(Le,{noSanitize:ie})}return Le}const fd=W=>({codeEditorContainer:x.css`
    .monaco-editor .margin,
    .monaco-editor-background {
      background-color: ${W.colors.background.primary};
    }
  `,markdown:(0,x.cx)("markdown-html",x.css`
      height: 100%;
    `)});var wu=e(89050),Sl=e(25503);const Nu=({value:W,onChange:te,context:ie})=>{const Ce=(0,D.useMemo)(()=>ie.options?.mode??Xr.Markdown,[ie]),Le=(0,ot.wW)(gd),Ve=()=>ie.getSuggestions?ie.getSuggestions().map(je=>(0,Sl.T)(je)):[];return D.createElement("div",{className:(0,x.cx)(Le.editorBox)},D.createElement(wu.Z,{disableHeight:!0},({width:je})=>je===0?null:D.createElement(dl.p,{value:W,onBlur:te,onSave:te,language:Ce,width:je,showMiniMap:!1,showLineNumbers:!1,height:"500px",getSuggestions:Ve})))},gd=W=>({editorBox:x.css`
    label: editorBox;
    border: 1px solid ${W.colors.border.medium};
    border-radius: ${W.shape.borderRadius(1)};
    margin: ${W.spacing(.5)} 0;
    width: 100%;
  `}),Gi=W=>{const te=parseFloat(W.pluginVersion||"6.1");let ie=W.options;if(W.hasOwnProperty("content")&&W.hasOwnProperty("mode")){const Le=W,Ve=Le.content,je=Le.mode;delete Le.content,delete Le.mode,te<7.1&&(ie={content:Ve,mode:je})}return[Xr.Code,Xr.HTML,Xr.Markdown].find(Le=>Le===ie.mode)||(ie={...ie,mode:Xr.Markdown}),ie},Uu=new me.c(Bu).setPanelOptions(W=>{W.addRadio({path:"mode",name:"Mode",settings:{options:[{value:Xr.Markdown,label:"Markdown"},{value:Xr.HTML,label:"HTML"},{value:Xr.Code,label:"Code"}]},defaultValue:pc.mode}).addSelect({path:"code.language",name:"Language",settings:{options:Object.values(ud).map(te=>({value:te,label:te}))},defaultValue:ki.language,showIf:te=>te.mode===Xr.Code}).addBooleanSwitch({path:"code.showLineNumbers",name:"Show line numbers",defaultValue:ki.showLineNumbers,showIf:te=>te.mode===Xr.Code}).addBooleanSwitch({path:"code.showMiniMap",name:"Show mini map",defaultValue:ki.showMiniMap,showIf:te=>te.mode===Xr.Code}).addCustomEditor({id:"content",path:"content",name:"Content",editor:Nu,defaultValue:pc.content})}).setMigrationHandler(Gi);var pd=e(16366);const Fu=({data:W,timeRange:te,timeZone:ie,width:Ce,height:Le,options:Ve,fieldConfig:je,onChangeTimeRange:rt,replaceVariables:dt,id:Ct})=>{const{sync:Et,canAddAnnotations:wt,onThresholdsChange:zt,canEditThresholds:Vt,showThresholds:dn,onSplitOpen:un}=(0,Ge.R9)(),Cn=(mn,Hn)=>(0,ia.a)({field:mn,rowIndex:Hn,splitOpenFn:un,range:te}),Qt=(0,D.useMemo)(()=>$l(W.series,X.vc.theme2,te),[W,te]),ln=(0,D.useMemo)(()=>Kl(Ve.timezone,ie),[Ve.timezone,ie]);if(!Qt)return D.createElement(Bt.Z,{panelId:Ct,fieldConfig:je,data:W,needsTimeField:!0,needsNumberField:!0});const _t=Boolean(wt&&wt());return D.createElement(Gn.p,{frames:Qt,structureRev:W.structureRev,timeRange:te,timeZone:ln,width:Ce,height:Le,legend:Ve.legend,options:Ve},(mn,Hn)=>(Hn.fields.filter(In=>In.config.links!==void 0&&In.config.links.length>0).length>0&&(Hn=el(Hn,Qt,dt,ie)),D.createElement(D.Fragment,null,D.createElement(pd.C,{config:mn}),D.createElement(Ln.R,{config:mn,onZoom:rt}),Ve.tooltip.mode===Rt.f3.None||D.createElement(Un.i,{frames:Qt,data:Hn,config:mn,mode:Ve.tooltip.mode,sortOrder:Ve.tooltip.sort,sync:Et,timeZone:ie}),W.annotations&&D.createElement(qr,{annotations:W.annotations,config:mn,timeZone:ie}),_t?D.createElement(vi,{data:Hn,timeZone:ie,config:mn},({startAnnotating:In})=>D.createElement(Bi,{data:Hn,config:mn,timeZone:ie,replaceVariables:dt,defaultItems:[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(ra,jn)=>{jn&&In({coords:jn.coords})}}]}]})):D.createElement(Bi,{data:Hn,frames:Qt,config:mn,timeZone:ie,replaceVariables:dt,defaultItems:[]}),W.annotations&&D.createElement(xd,{visibleSeries:bd(mn,Qt),config:mn,exemplars:W.annotations,timeZone:ie,getFieldLinks:Cn}),(Vt&&zt||dn)&&D.createElement(bo,{config:mn,fieldConfig:je,onThresholdsChange:Vt?zt:void 0}),D.createElement(Ei,{config:mn,onChangeTimeRange:rt}))))};var Ml=e(38306),Wu=e(52566);const yr=({value:W,onChange:te})=>{const ie=(0,ot.wW)($u);(!W||W.length<1)&&(W=[""]);const Ce=()=>{te([...W,Ml.RQ.default])},Le=je=>{const rt=W.slice();rt.splice(je,1),te(rt)},Ve=(je,rt)=>{const dt=W.slice();dt[je]=rt??Ml.RQ.default,dt.length===0||dt.length===1&&dt[0]===""?te(void 0):te(dt)};return D.createElement("div",null,W.map((je,rt)=>D.createElement("div",{className:ie.wrapper,key:`${rt}.${je}`},D.createElement("span",{className:ie.first},D.createElement(Wu.O,{onChange:dt=>Ve(rt,dt),includeInternal:!0,value:je??Ml.RQ.default})),rt===W.length-1?D.createElement(mo.h,{ariaLabel:"Add timezone",name:"plus",onClick:Ce}):D.createElement(mo.h,{ariaLabel:"Remove timezone",name:"times",onClick:()=>Le(rt)}))))},$u=W=>({wrapper:x.css`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:x.css`
    margin-right: 8px;
    flex-grow: 2;
  `}),_=(W,te,ie,Ce)=>{if(te==="graph"&&ie.angular){const{fieldConfig:Le,options:Ve}=k({...ie.angular,fieldConfig:Ce});return W.fieldConfig=Le,W.alert=ie.angular.alert,Ve}return Ot(W),{}};function k(W){const te=W.fieldConfig?.overrides??[],ie=W.yaxes??[];let Ce=Pe(ie[0]);W.fieldConfig?.defaults&&(Ce={...W.fieldConfig?.defaults,...Ce});const Le={fill:W.dashes?"dash":"solid",dash:[W.dashLength??10,W.spaceLength??10]};if(W.aliasColors)for(const Et of Object.keys(W.aliasColors)){const wt=W.aliasColors[Et];wt&&te.push({matcher:{id:ko.mi.byName,options:Et},properties:[{id:Gt.qb.Color,value:{mode:Zt.S.Fixed,fixedColor:wt}}]})}let Ve=!1;if(W.seriesOverrides?.length)for(const Et of W.seriesOverrides){if(!Et.alias)continue;const zt={matcher:{id:/^([/~@;%#'])(.*?)\1([gimsuy]*)$/.test(Et.alias)?ko.mi.byRegexp:ko.mi.byName,options:Et.alias},properties:[]};let Vt;for(const dn of Object.keys(Et)){const un=Et[dn];switch(dn){case"alias":case"$$hashKey":break;case"yaxis":if(un===2){const Cn=Pe(ie[1]);ze(Ce,Cn,zt.properties)}break;case"fill":zt.properties.push({id:"custom.fillOpacity",value:un*10});break;case"fillBelowTo":Ve=!0,zt.properties.push({id:"custom.fillBelowTo",value:un});break;case"fillGradient":un&&(zt.properties.push({id:"custom.fillGradient",value:"opacity"}),zt.properties.push({id:"custom.fillOpacity",value:un*10}));break;case"points":zt.properties.push({id:"custom.showPoints",value:un?Rt.Jp.Always:Rt.Jp.Never});break;case"bars":un?(zt.properties.push({id:"custom.drawStyle",value:Rt.l8.Bars}),zt.properties.push({id:"custom.fillOpacity",value:100})):zt.properties.push({id:"custom.drawStyle",value:Rt.l8.Line});break;case"lines":zt.properties.push({id:"custom.lineWidth",value:0});break;case"linewidth":zt.properties.push({id:"custom.lineWidth",value:un});break;case"pointradius":zt.properties.push({id:"custom.pointSize",value:2+un*2});break;case"dashLength":case"spaceLength":case"dashes":switch(Vt||(Vt={fill:Le.fill,dash:[...Le.dash]}),dn){case"dashLength":Vt.dash[0]=un;break;case"spaceLength":Vt.dash[1]=un;break;case"dashes":Vt.fill=un?"dash":"solid";break}break;case"stack":zt.properties.push({id:"custom.stacking",value:{mode:Rt.o0.Normal,group:un}});break;case"color":zt.properties.push({id:"color",value:{fixedColor:un,mode:Zt.S.Fixed}});break;case"transform":zt.properties.push({id:"custom.transform",value:un==="negative-Y"?Rt.pR.NegativeY:Rt.pR.Constant});break;default:console.log("Ignore override migration:",Et.alias,dn,un)}}Vt&&zt.properties.push({id:"custom.lineStyle",value:Vt}),zt.properties.length&&te.push(zt)}const je=Ce.custom??{};je.drawStyle=W.bars?Rt.l8.Bars:W.lines?Rt.l8.Line:Rt.l8.Points,W.points?(je.showPoints=Rt.Jp.Always,(0,R.isNumber)(W.pointradius)&&(je.pointSize=2+W.pointradius*2)):je.drawStyle!==Rt.l8.Points&&(je.showPoints=Rt.Jp.Never),je.lineWidth=W.linewidth,Le.fill!=="solid"&&(je.lineStyle=Le),Ve?je.fillOpacity=35:(0,R.isNumber)(W.fill)&&(je.fillOpacity=W.fill*10),(0,R.isNumber)(W.fillGradient)&&W.fillGradient>0&&(je.gradientMode=Rt.FI.Opacity,je.fillOpacity=W.fillGradient*10),je.spanNulls=W.nullPointMode===Fi.Gl.Ignore,W.steppedLine&&(je.lineInterpolation=Rt.KC.StepAfter),je.drawStyle===Rt.l8.Bars&&(je.fillOpacity=100),W.stack&&(je.stacking={mode:Rt.o0.Normal,group:an.r.stacking.group}),Ce.custom=(0,R.omitBy)(je,R.isNil),Ce.nullValueMode=W.nullPointMode;const rt={legend:{displayMode:Rt.jK.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:Rt.f3.Single,sort:Rt.As.None}},dt=W.legend;if(dt){if(dt.show?rt.legend.displayMode=dt.alignAsTable?Rt.jK.Table:Rt.jK.List:rt.legend.showLegend=!1,dt.rightSide&&(rt.legend.placement="right"),W.legend.values){const Et=(0,R.pickBy)(W.legend);rt.legend.calcs=st(Et)}W.legend.sideWidth&&(rt.legend.width=W.legend.sideWidth)}const Ct=W.tooltip;if(Ct&&(Ct.shared!==void 0&&(rt.tooltip.mode=Ct.shared?Rt.f3.Multi:Rt.f3.Single),Ct.sort!==void 0&&Ct.shared))switch(Ct.sort){case 1:rt.tooltip.sort=Rt.As.Ascending;break;case 2:rt.tooltip.sort=Rt.As.Descending;break;default:rt.tooltip.sort=Rt.As.None}if(W.thresholds&&W.thresholds.length>0){let Et=[],wt=!1,zt=!1;const Vt=W.thresholds.sort((un,Cn)=>un.value>Cn.value?1:-1);for(let un=0;un<Vt.length;un++){const Cn=Vt[un],Qt=Vt.length>un+1?Vt[un+1]:null;Cn.fill&&(wt=!0),Cn.line&&(zt=!0),Cn.op==="gt"&&Et.push({value:Cn.value,color:ne(Cn)}),Cn.op==="lt"&&(Et.length===0&&Et.push({value:-1/0,color:ne(Cn)}),Qt&&Qt.op==="gt"&&Qt.value>Cn.value?Et.push({value:Cn.value,color:"transparent"}):Qt&&Qt.op==="lt"?Et.push({value:Cn.value,color:ne(Qt)}):Et.push({value:Cn.value,color:"transparent"}))}Et.length>0&&Et[0].value!==-1/0&&Et.unshift({color:"transparent",value:-1/0});let dn=wt?Rt.i3.Area:Rt.i3.Line;zt&&wt&&(dn=Rt.i3.LineAndArea),Ce.custom.thresholdsStyle={mode:dn},Ce.thresholds={mode:dc.H.Absolute,steps:Et}}return W.xaxis&&W.xaxis.show===!1&&W.xaxis.mode==="time"&&te.push({matcher:{id:ko.mi.byType,options:fn.fS.time},properties:[{id:"custom.axisPlacement",value:Rt.LB.Hidden}]}),{fieldConfig:{defaults:(0,R.omitBy)(Ce,R.isNil),overrides:te},options:rt}}function ne(W){return W.colorMode==="critical"?"red":W.colorMode==="warning"?"orange":W.colorMode==="custom"?W.fillColor||W.lineColor:"red"}function Pe(W){if(!W)return{};const te={axisPlacement:W.show?Rt.LB.Auto:Rt.LB.Hidden};if(W.label&&(te.axisLabel=W.label),W.logBase){const ie=W.logBase;(ie===2||ie===10)&&(te.scaleDistribution={type:Rt.wf.Log,log:ie})}return(0,R.omitBy)({unit:W.format,decimals:tt(W.decimals),min:tt(W.min),max:tt(W.max),custom:te},R.isNil)}function ze(W,te,ie){for(const Ve of Object.keys(te)){const je=te[Ve];Ve!=="custom"&&je!==W[Ve]&&ie.push({id:Ve,value:je})}const Ce=W.custom??{},Le=te.custom??{};for(const Ve of Object.keys(Le)){const je=Le[Ve];je!==Ce[Ve]&&ie.push({id:`custom.${Ve}`,value:je})}}function tt(W){if((0,R.isNumber)(W))return W;if((0,R.isString)(W)){const te=Number(W);if(!isNaN(te))return te}}function st(W){const te=[];for(const ie of Object.keys(W)){const Ce=hr.TB.getIfExists(ie);Ce&&te.push(Ce.id)}return te}function Ot(W){W.fieldConfig?.defaults?.custom?.hideFrom?.graph!==void 0&&(W.fieldConfig.defaults.custom.hideFrom.viz=W.fieldConfig.defaults.custom.hideFrom.graph,delete W.fieldConfig.defaults.custom.hideFrom.graph),W.fieldConfig?.overrides&&(W.fieldConfig.overrides=W.fieldConfig.overrides.map(te=>(te.properties=te.properties.map(ie=>(ie.id==="custom.hideFrom"&&ie.value.graph&&(ie.value.viz=ie.value.graph,delete ie.value.graph),ie)),te)))}class Kt{getSuggestionsForData(te){const{dataSummary:ie}=te;if(!ie.hasTimeField||!ie.hasNumberField||ie.rowCountTotal<2)return;const Ce=te.getListAppender({name:ps.y.LineChart,pluginId:"timeseries",options:{legend:{}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Ve=>{Ve.options.legend.showLegend=!1,Ve.fieldConfig?.defaults.custom?.drawStyle!==Rt.l8.Bars&&(Ve.fieldConfig.defaults.custom.lineWidth=Math.max(Ve.fieldConfig.defaults.custom.lineWidth??1,2))}}}),Le=100;if(Ce.append({name:ps.y.LineChart}),ie.rowCountMax<200&&Ce.append({name:ps.y.LineChartSmooth,fieldConfig:{defaults:{custom:{lineInterpolation:Rt.KC.Smooth}},overrides:[]}}),ie.numberFieldCount===1){Ce.append({name:ps.y.AreaChart,fieldConfig:{defaults:{custom:{fillOpacity:25}},overrides:[]}}),Ce.append({name:ps.y.LineChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:Zt.S.ContinuousGrYlRd},custom:{gradientMode:Rt.FI.Scheme,lineInterpolation:Rt.KC.Smooth,lineWidth:3,fillOpacity:20}},overrides:[]}}),ie.rowCountMax<Le&&(Ce.append({name:ps.y.BarChart,fieldConfig:{defaults:{custom:{drawStyle:Rt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Rt.FI.Hue}},overrides:[]}}),Ce.append({name:ps.y.BarChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:Zt.S.ContinuousGrYlRd},custom:{drawStyle:Rt.l8.Bars,fillOpacity:90,lineWidth:1,gradientMode:Rt.FI.Scheme}},overrides:[]}}));return}Ce.append({name:ps.y.AreaChartStacked,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:Rt.o0.Normal,group:"A"}}},overrides:[]}}),Ce.append({name:ps.y.AreaChartStackedPercent,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:Rt.o0.Percent,group:"A"}}},overrides:[]}}),ie.rowCountTotal/ie.numberFieldCount<Le&&(Ce.append({name:ps.y.BarChartStacked,fieldConfig:{defaults:{custom:{drawStyle:Rt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Rt.FI.Hue,stacking:{mode:Rt.o0.Normal,group:"A"}}},overrides:[]}}),Ce.append({name:ps.y.BarChartStackedPercent,fieldConfig:{defaults:{custom:{drawStyle:Rt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Rt.FI.Hue,stacking:{mode:Rt.o0.Percent,group:"A"}}},overrides:[]}}))}}const Ht=new me.c(Fu).setPanelChangeHandler(_).useFieldConfig((0,an.F)(an.r)).setPanelOptions(W=>{wa.L(W),rs.J(W),W.addCustomEditor({id:"timezone",name:"Time zone",path:"timezone",category:["Axis"],editor:yr,defaultValue:void 0})}).setSuggestionsSupplier(new Kt).setDataSupport({annotations:!0,alertStates:!0});var jt=e(86647),pn=e(94619),Rn=e(72169),$n=e(93183),Vn=e(75151),ba=e(335);const us={wrapper:x.css`
    height: 100%;
    overflow: scroll;
  `},sr=({data:W})=>{const te=(0,D.createRef)(),ie=(0,D.useMemo)(()=>(0,ba.N)(W.series[0]),[W.series]),{search:Ce,setSearch:Le,spanFindMatches:Ve}=(0,Vn.R)(ie?.spans),[je,rt]=(0,D.useState)(""),[dt,Ct]=(0,D.useState)(""),Et=(0,Ut.Z)(async()=>await(0,jt.F)().get(W.request?.targets[0].datasource?.uid)),wt=document.getElementsByClassName(us.wrapper)[0],zt=Et&&Et.value?Et.value.type:"unknown";return!W||!W.series.length||!ie?D.createElement("div",{className:"panel-empty"},D.createElement("p",null,"No data found in response")):D.createElement("div",{className:us.wrapper},D.createElement("div",{ref:te}),W.series[0]?.meta?.preferredVisualisationType==="trace"?D.createElement(Rn.Z,{navigable:!0,searchValue:Ce,setSearch:Le,spanFindMatches:Ve,searchBarSuffix:dt,setSearchBarSuffix:Ct,focusedSpanIdForSearch:je,setFocusedSpanIdForSearch:rt,datasourceType:zt}):null,D.createElement(pn.m,{dataFrames:W.series,scrollElement:wt,traceProp:ie,spanFindMatches:Ve,search:Ce,focusedSpanIdForSearch:je,queryResponse:W,datasource:Et.value,topOfViewRef:te,topOfViewRefType:$n.l4.Panel}))},Ar=new me.c(sr),Lr=[{value:0,label:"Documentation",href:"https://grafana.com/docs/grafana/latest"},{value:1,label:"Tutorials",href:"https://grafana.com/tutorials"},{value:2,label:"Community",href:"https://community.grafana.com"},{value:3,label:"Public Slack",href:"http://slack.grafana.com"}],Xo=()=>{const W=(0,ot.wW)(Ti);return D.createElement("div",{className:W.container},D.createElement("h1",{className:W.title},"Welcome to Grafana"),D.createElement("div",{className:W.help},D.createElement("h3",{className:W.helpText},"Need help?"),D.createElement("div",{className:W.helpLinks},Lr.map((te,ie)=>D.createElement("a",{key:`${te.label}-${ie}`,className:W.helpLink,href:`${te.href}?utm_source=grafana_gettingstarted`},te.label)))))},Ti=W=>({container:x.css`
      display: flex;
      /// background: url(public/img/g8_home_v2.svg) no-repeat;
      background-size: cover;
      height: 100%;
      align-items: center;
      padding: 0 16px;
      justify-content: space-between;
      padding: 0 ${W.spacing(3)};

      ${W.breakpoints.down("lg")} {
        background-position: 0px;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
      }

      ${W.breakpoints.down("sm")} {
        padding: 0 ${W.spacing(1)};
      }
    `,title:x.css`
      margin-bottom: 0;

      ${W.breakpoints.down("lg")} {
        margin-bottom: ${W.spacing(1)};
      }

      ${W.breakpoints.down("md")} {
        font-size: ${W.typography.h2.fontSize};
      }
      ${W.breakpoints.down("sm")} {
        font-size: ${W.typography.h3.fontSize};
      }
    `,help:x.css`
      display: flex;
      align-items: baseline;
    `,helpText:x.css`
      margin-right: ${W.spacing(2)};
      margin-bottom: 0;

      ${W.breakpoints.down("md")} {
        font-size: ${W.typography.h4.fontSize};
      }

      ${W.breakpoints.down("sm")} {
        display: none;
      }
    `,helpLinks:x.css`
      display: flex;
      flex-wrap: wrap;
    `,helpLink:x.css`
      margin-right: ${W.spacing(2)};
      text-decoration: underline;
      text-wrap: no-wrap;

      ${W.breakpoints.down("sm")} {
        margin-right: 8px;
      }
    `}),hd=new me.c(Xo).setNoPadding();var ym=(W=>(W[W.NoData=0]="NoData",W[W.BadFrameSelection=1]="BadFrameSelection",W[W.XNotFound=2]="XNotFound",W))(ym||{});function hc(W){return W.type===fn.fS.number}function Pm(W,te){if(!te||!te.length)return{error:0};W||(W={frame:0});let ie=te[W.frame??0];if(!ie)return{error:1};let Ce=-1;for(let rt=0;rt<ie.fields.length;rt++){const dt=ie.fields[rt];if(W.x&&W.x===(0,hn.C)(dt,ie,te)){Ce=rt;break}if(hc(dt)&&!W.x){Ce=rt;break}}let Le=!1;const Ve=ie.fields[Ce],je=[Ve];for(const rt of ie.fields)if(rt.type===fn.fS.time&&(Le=!0),!(rt===Ve||!hc(rt))){if(W.exclude){const dt=(0,hn.C)(rt,ie,te);if(W.exclude.includes(dt))continue}je.push(rt)}return{x:Ve,fields:{x:om(Ve),y:Cm(Ve)},frame:{...ie,fields:je},hasData:ie.fields.length>0,hasTime:Le}}function om(W){return W?te=>W===te||!!(W.state&&W.state===te.state):()=>!1}function Cm(W){if(!W)return()=>!1;const te=om(W);return ie=>!te(ie,void 0,void 0)}const xm=({value:W,onChange:te,context:ie})=>{const Ce=(0,D.useMemo)(()=>ie?.data?.length?ie.data.map((rt,dt)=>({value:dt,label:(0,hn.n)(rt,dt)})):[{value:0,label:"First result"}],[ie.data]),Le=(0,D.useMemo)(()=>Pm(W,ie.data),[ie.data,W]),Ve=(0,D.useMemo)(()=>{const rt={label:"?",value:void 0},dt={numberFields:[rt],yFields:[],xAxis:W?.x?{label:`${W.x} (Not found)`,value:W.x}:rt},Ct=ie.data?ie.data[W?.frame??0]:void 0;if(Ct){const Et=Le.x?(0,hn.C)(Le.x,Le.frame,ie.data):void 0;for(let wt of Ct.fields)if(hc(wt)){const zt=(0,hn.C)(wt,Ct,ie.data),Vt={label:zt,value:zt};dt.numberFields.push(Vt),rt.label==="?"&&(rt.label=`${zt} (First)`),W?.x&&zt===W.x&&(dt.xAxis=Vt),Et!==zt&&dt.yFields.push({label:zt,value:W?.exclude?.includes(zt)})}}return dt},[Le,ie.data,W]),je=(0,ot.wW)(Um);return ie.data?D.createElement("div",null,D.createElement(Ba.g,{label:"Data"},D.createElement(pt.Ph,{options:Ce,value:Ce.find(rt=>rt.value===W?.frame)??Ce[0],onChange:rt=>{te({...W,frame:rt.value})}})),D.createElement(Ba.g,{label:"X Field"},D.createElement(pt.Ph,{options:Ve.numberFields,value:Ve.xAxis,onChange:rt=>{te({...W,x:rt.value})}})),D.createElement(Ba.g,{label:"Y Fields"},D.createElement("div",null,Ve.yFields.map(rt=>D.createElement("div",{key:rt.label,className:je.row},D.createElement(mo.h,{name:rt.value?"eye-slash":"eye",onClick:()=>{const dt=W?.exclude?[...W.exclude]:[];let Ct=dt.indexOf(rt.label);Ct<0?dt.push(rt.label):dt.splice(Ct,1),te({...W,exclude:dt})}}),rt.label))))):D.createElement("div",null,"No data...")},Um=W=>({sorter:x.css`
    margin-top: 10px;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    cursor: pointer;
  `,row:x.css`
    padding: ${W.spacing(.5,1)};
    border-radius: ${W.shape.borderRadius(1)};
    background: ${W.colors.background.secondary};
    min-height: ${W.spacing(4)};
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    margin-bottom: 3px;
    border: 1px solid ${W.components.input.borderColor};
  `});var Fm=e(93022),im=e(54643);const Wm=Object.freeze([0,0]);var bm=(W=>(W.Auto="auto",W.Manual="manual",W))(bm||{}),ui=(W=>(W.Lines="lines",W.Points="points",W.PointsAndLines="points+lines",W))(ui||{});const $m={exclude:[]},Dm={label:Rt.Jp.Auto,show:"points"},lm={series:[]},vc={...Dm},cm=({value:W,onChange:te,context:ie})=>{const[Ce,Le]=(0,D.useState)(0),Ve=(0,ot.wW)(Sm),je=(Et,wt,zt)=>{te(W.map((Vt,dn)=>dn===wt?{...Vt,[zt]:Et}:Vt))},rt=()=>{te([...W,{pointColor:{},pointSize:vc.pointSize}]),Le(W.length)};(0,D.useEffect)(()=>{W?.length||rt()},[]);const dt=Et=>{te(W.filter((wt,zt)=>zt!==Et))},Ct=Et=>Et===Ce?`${Ve.row} ${Ve.sel}`:Ve.row;return D.createElement(D.Fragment,null,D.createElement(Ye.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:rt,className:Ve.marginBot},"Add series"),D.createElement("div",{className:Ve.marginBot},W.map((Et,wt)=>D.createElement("div",{key:`series/${wt}`,className:Ct(wt),onMouseDown:()=>Le(wt)},D.createElement(Fm.X,{name:Et.name??`Series ${wt+1}`,onChange:zt=>je(zt,wt,"name")}),D.createElement(mo.h,{name:"trash-alt",title:"remove",className:(0,x.cx)(Ve.actionIcon),onClick:()=>dt(wt)})))),Ce>=0&&W[Ce]&&D.createElement(D.Fragment,null,D.createElement("div",{key:`series/${Ce}`},D.createElement(Ba.g,{label:"X Field"},D.createElement(gl.b,{value:W[Ce].x??"",context:ie,onChange:Et=>je(Et,Ce,"x"),item:{}})),D.createElement(Ba.g,{label:"Y Field"},D.createElement(gl.b,{value:W[Ce].y??"",context:ie,onChange:Et=>je(Et,Ce,"y"),item:{}})),D.createElement(Ba.g,{label:"Point color"},D.createElement(im.Lm,{value:W[Ce].pointColor,context:ie,onChange:Et=>je(Et,Ce,"pointColor"),item:{}})),D.createElement(Ba.g,{label:"Point size"},D.createElement(im.cL,{value:W[Ce].pointSize,context:ie,onChange:Et=>je(Et,Ce,"pointSize"),item:{settings:{min:1,max:100}}})))))},Sm=W=>({marginBot:x.css`
    margin-bottom: 20px;
  `,row:x.css`
    padding: ${W.spacing(.5,1)};
    border-radius: ${W.shape.borderRadius(1)};
    background: ${W.colors.background.secondary};
    min-height: ${W.spacing(4)};
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 3px;
    cursor: pointer;

    border: 1px solid ${W.components.input.borderColor};
    &:hover {
      border: 1px solid ${W.components.input.borderHover};
    }
  `,sel:x.css`
    border: 1px solid ${W.colors.primary.border};
    &:hover {
      border: 1px solid ${W.colors.primary.border};
    }
  `,actionIcon:x.css`
    color: ${W.colors.text.secondary};
    &:hover {
      color: ${W.colors.text};
    }
  `});var dm=e(54291),um=(W=>(W.Points="points",W.Lines="lines",W.PointsAndLines="points+lines",W))(um||{}),Ku=(W=>(W.Auto="auto",W.Manual="manual",W))(Ku||{});const Km={show:"points",lineWidth:1,lineStyle:{fill:"solid"},pointSize:{fixed:5,min:1,max:20},axisPlacement:Rt.LB.Auto},mm=({allSeries:W,data:te,manualSeriesConfigs:ie,seriesMapping:Ce,rowIndex:Le,hoveredPointIndex:Ve,options:je,range:rt})=>{const dt=(0,ot.wW)(Mm),{onSplitOpen:Ct}=(0,Ge.R9)();if(!W||Le==null)return null;const Et=W[Ve],wt=Et.frame(te),zt=Et.x(wt),Vt=Et.y(wt),dn=(0,ia.a)({field:Vt,splitOpenFn:Ct,rowIndex:Le,range:rt});let un=null,Cn=null;if(Ce===Ku.Manual&&ie){const Qt=ie[Ve].pointColor?.field??"",ln=ie[Ve].pointSize?.field??"",_t=Qt?wt.fields.find(Hn=>Hn.name===Qt):void 0,mn=ln?wt.fields.find(Hn=>Hn.name===ln):void 0;Cn={colorFacetFieldName:Qt,sizeFacetFieldName:ln,colorFacetValue:_t?.values.get(Le),sizeFacetValue:mn?.values.get(Le)}}return un={name:(0,hn.C)(Vt,wt),val:Vt.values.get(Le),field:Vt,color:Et.pointColor(wt)},D.createElement(D.Fragment,null,D.createElement("table",{className:dt.infoWrap},D.createElement("tr",null,D.createElement("th",{colSpan:2,style:{backgroundColor:un.color}})),D.createElement("tbody",null,D.createElement("tr",null,D.createElement("th",null,zt.name),D.createElement("td",null,fm(wt.fields[0],zt.values.get(Le)))),D.createElement("tr",null,D.createElement("th",null,un.name,":"),D.createElement("td",null,fm(un.field,un.val))),Cn!==null&&Cn.colorFacetFieldName&&D.createElement("tr",null,D.createElement("th",null,Cn.colorFacetFieldName,":"),D.createElement("td",null,Cn.colorFacetValue)),Cn!==null&&Cn.sizeFacetFieldName&&D.createElement("tr",null,D.createElement("th",null,Cn.sizeFacetFieldName,":"),D.createElement("td",null,Cn.sizeFacetValue)),dn.length>0&&D.createElement("tr",null,D.createElement("td",{colSpan:2},D.createElement(Zr.wc,null,dn.map((Qt,ln)=>D.createElement(Ye.Qj,{key:ln,icon:"external-link-alt",target:Qt.target,href:Qt.href,onClick:Qt.onClick,fill:"text",style:{width:"100%"}},Qt.title))))))))};function fm(W,te){return W.display?(0,Za.zc)(W.display(te)):`${te}`}const Mm=W=>({infoWrap:x.css`
    padding: 8px;
    width: 100%;
    th {
      font-weight: ${W.typography.fontWeightMedium};
      padding: ${W.spacing(.25,2)};
    }
  `,highlight:x.css`
    background: ${W.colors.action.hover};
  `,xVal:x.css`
    font-weight: ${W.typography.fontWeightBold};
  `,icon:x.css`
    margin-right: ${W.spacing(1)};
    vertical-align: middle;
  `});function Vm(W,te,ie,Ce,Le,Ve){let je,rt;try{je=Tm(W,te()),rt=Om(te,je,ie,Ce,Le,Ve)}catch(dt){let Ct="Unknown error in prepScatter";return typeof dt=="string"?Ct=dt:dt instanceof Error&&(Ct=dt.message),{error:Ct,series:[]}}return{series:je,builder:rt}}function gm(W,te,ie,Ce,Le,Ve){const je=te[ie],rt=je.fields[Le];let dt=rt.state??{};dt.seriesIndex=W,rt.state=dt;let Ct=Ve.pointColorFixed?Re.v.theme2.visualization.getColorByName(Ve.pointColorFixed):(0,cs.YO)(rt,Re.v.theme2).color,Et=()=>Ct;const wt={...vc,...rt.config.custom};let zt=cs.WO.get(Zt.S.PaletteClassic);if(Ve.pointColorIndex){const Qt=te[ie].fields[Ve.pointColorIndex];if(Qt){const ln=Qt.display??(0,Ys.U)({field:Qt,theme:Re.v.theme2});if(zt=(0,cs.fD)(rt),zt.isByValue){const _t=Ve.pointColorIndex;Et=mn=>mn.fields[_t].values.toArray().map(Hn=>ln(Hn).color)}else Ct=zt.getCalculator(Qt,Re.v.theme2)(Qt.values.get(0),1),Et=()=>Ct}}let Vt=Ve.pointSizeConfig,dn=Ve.pointSizeConfig?.fixed??rt.config.custom?.pointSize?.fixed??5,un=()=>dn;Ve.pointSizeIndex?un=Qt=>{const ln=(0,vr.getScaledDimensionForField)(Qt.fields[Ve.pointSizeIndex],Ve.pointSizeConfig,vr.ScaleDimensionMode.Quadratic),_t=Array(Qt.length);for(let mn=0;mn<Qt.length;mn++)_t[mn]=ln.get(mn);return _t}:Vt={fixed:dn,min:dn,max:dn};const Cn=(0,hn.C)(rt,je,te);return{name:Cn,frame:Qt=>Qt[ie],x:Qt=>Qt.fields[Ce],y:Qt=>Qt.fields[Le],legend:()=>[{label:Cn,color:Ct,getItemKey:()=>Cn,yAxis:Le}],showLine:wt.show!==ui.Points,lineWidth:wt.lineWidth??2,lineStyle:wt.lineStyle,lineColor:()=>Ct,showPoints:wt.show!==ui.Lines?Rt.Jp.Always:Rt.Jp.Never,pointSize:un,pointColor:Et,pointSymbol:(Qt,ln)=>"circle",label:Rt.Jp.Never,labelValue:()=>"",show:!je.fields[Le].config.custom.hideFrom?.viz,hints:{pointSize:Vt,pointColor:{mode:zt}}}}function Tm(W,te){let ie=0;if(!te.length)throw"Missing data";if(W.seriesMapping==="manual"){if(!W.series?.length)throw"Missing series config";const dt=[];for(const Ct of W.series){if(!Ct?.x)throw"Select X dimension";if(!Ct?.y)throw"Select Y dimension";for(let Et=0;Et<te.length;Et++){const wt=te[Et],zt=(0,vr.findFieldIndex)(wt,Ct.x);if(zt!=null){const Vt=(0,vr.findFieldIndex)(wt,Ct.y);if(Vt==null)throw"Y must be in the same frame as X";const dn={pointColorFixed:Ct.pointColor?.fixed,pointColorIndex:(0,vr.findFieldIndex)(wt,Ct.pointColor?.field),pointSizeConfig:Ct.pointSize,pointSizeIndex:(0,vr.findFieldIndex)(wt,Ct.pointSize?.field)};dt.push(gm(ie++,te,Et,zt,Vt,dn))}}}return dt}const Ce=W.dims??{},Le=Ce.frame??0,Ve=te[Le],je=[];let rt=(0,vr.findFieldIndex)(Ve,Ce.x);for(let dt=0;dt<Ve.fields.length;dt++)if(hc(Ve.fields[dt])){if(rt==null||dt===rt){rt=dt;continue}if(Ce.exclude&&Ce.exclude.includes((0,hn.C)(Ve.fields[dt],Ve,te)))continue;je.push(dt)}if(rt==null)throw"Missing X dimension";if(!je.length)throw"No Y values";return je.map(dt=>gm(ie++,te,Le,rt,dt,{}))}const Om=(W,te,ie,Ce,Le,Ve)=>{let je,rt;function dt(Qt){return(_t,mn,Hn,In)=>(Aa.Z.orient(_t,mn,(ra,jn,ga,Ra,Ta,Ja,rr,Cs,ua,qa,fs,fr,Cr,gr,Dr)=>{const Qs=te[mn-1];let Ka=_t.data[mn],gs=Qs.showLine,Ls=Qs.showPoints===Rt.Jp.Always;!Ls&&Qs.showPoints===Rt.Jp.Auto&&(Ls=Ka[0].length<1e3),!Ls&&!gs&&(gs=!0);let cr=1;_t.ctx.save(),_t.ctx.rect(_t.bbox.left,_t.bbox.top,_t.bbox.width,_t.bbox.height),_t.ctx.clip(),_t.ctx.fillStyle=ra.fill(),_t.ctx.strokeStyle=ra.stroke(),_t.ctx.lineWidth=cr;let js=2*Math.PI,xr=Ra.key,Ms=Ta.key,Yn=Qs.hints.pointSize;const oa=Qs.hints.pointColor.mode.isByValue;let ca=(Yn.max??Yn.fixed)*devicePixelRatio,Na=_t.posToVal(-ca/2,xr),Va=_t.posToVal(_t.bbox.width/devicePixelRatio+ca/2,xr),Os=_t.posToVal(_t.bbox.height/devicePixelRatio+ca/2,Ms),vs=_t.posToVal(-ca/2,Ms),_r=Qt.disp.size.values(_t,mn),Hr=Qt.disp.color.values(_t,mn),mi=Qt.disp.color.alpha(_t,mn),no=gs?new Path2D:null;for(let io=0;io<Ka[0].length;io++){let Mo=Ka[0][io],Tl=Ka[1][io],lo=_r[io]*devicePixelRatio;if(Mo>=Na&&Mo<=Va&&Tl>=Os&&Tl<=vs){let _o=Ja(Mo,Ra,qa,Cs),fi=rr(Tl,Ta,fs,ua);gs&&no.lineTo(_o,fi),Ls&&(_t.ctx.moveTo(_o+lo/2,fi),_t.ctx.beginPath(),_t.ctx.arc(_o,fi,lo/2,0,js),oa&&(_t.ctx.fillStyle=mi[io],_t.ctx.strokeStyle=Hr[io]),_t.ctx.fill(),_t.ctx.stroke(),Qt.each(_t,mn,io,_o-lo/2-cr/2,fi-lo/2-cr/2,lo+cr,lo+cr))}}if(gs){let io=Qs.frame(W());_t.ctx.strokeStyle=Qs.lineColor(io),_t.ctx.lineWidth=Qs.lineWidth*devicePixelRatio;const{lineStyle:Mo}=Qs;Mo&&Mo.fill!=="solid"&&(Mo.fill==="dot"&&(_t.ctx.lineCap="round"),_t.ctx.setLineDash(Mo.dash??[10,10])),_t.ctx.stroke(no)}_t.ctx.restore()}),null)}let Ct=dt({disp:{size:{values:(Qt,ln)=>Qt.data[ln][2]},color:{values:(Qt,ln)=>Qt.data[ln][3],alpha:(Qt,ln)=>Qt.data[ln][4]}},each:(Qt,ln,_t,mn,Hn,In,ra)=>{mn-=Qt.bbox.left,Hn-=Qt.bbox.top,je.add({x:mn,y:Hn,w:In,h:ra,sidx:ln,didx:_t})}});const Et=new kr.U;Et.setCursor({drag:{setScale:!0},dataIdx:(Qt,ln)=>{if(ln===1){rt=null;let _t=1/0,mn=Qt.cursor.left*devicePixelRatio,Hn=Qt.cursor.top*devicePixelRatio;je.get(mn,Hn,1,1,In=>{if((0,Yr.Pn)(mn,Hn,In.x,In.y,In.x+In.w,In.y+In.h)){let ra=In.x+In.w/2,jn=In.y+In.h/2,ga=ra-mn,Ra=jn-Hn,Ta=Math.sqrt(ga**2+Ra**2);Ta<=In.w/2&&Ta<=_t&&(_t=Ta,rt=In)}})}return rt&&ln===rt.sidx?rt.didx:null},points:{size:(Qt,ln)=>rt&&ln===rt.sidx?rt.w/devicePixelRatio:0,fill:(Qt,ln)=>"rgba(255,255,255,0.4)"}});const wt=()=>{Ve.current&&(Ce(void 0),Le&&Le())};let zt=null;Et.addHook("init",(Qt,ln)=>{Qt.over.style.overflow="hidden",zt=Qt.root.parentElement,Le&&zt?.addEventListener("click",Le)}),Et.addHook("destroy",Qt=>{Le&&(zt?.removeEventListener("click",Le),wt())});let Vt;Et.addHook("syncRect",(Qt,ln)=>{Vt=ln}),Et.addHook("setLegend",Qt=>{if(Qt.cursor.idxs!=null)for(let ln=0;ln<Qt.cursor.idxs.length;ln++){const _t=Qt.cursor.idxs[ln];if(_t!=null&&!Ve.current){Ce({scatterIndex:ln-1,xIndex:_t,pageX:Vt.left+Qt.cursor.left,pageY:Vt.top+Qt.cursor.top});return}}Ve.current||Ce(void 0)}),Et.addHook("drawClear",Qt=>{wt(),je=je||new Yr.lW(0,0,Qt.bbox.width,Qt.bbox.height),je.clear(),Qt.series.forEach((ln,_t)=>{_t>0&&(ln._paths=null)})}),Et.setMode(2);const dn=W();let un=te[0].x(te[0].frame(dn));Et.addScale({scaleKey:"x",isTime:!1,orientation:Rt.wN.Horizontal,direction:Rt.bQ.Right,min:un.config.min,max:un.config.max});let Cn=un.config.custom.axisLabel;return Et.addAxis({scaleKey:"x",placement:un.config.custom?.axisPlacement!==Rt.LB.Hidden?Rt.LB.Bottom:Rt.LB.Hidden,show:un.config.custom?.axisPlacement!==Rt.LB.Hidden,theme:ie,label:Cn==null||Cn===""?(0,hn.C)(un,te[0].frame(dn),dn):Cn}),te.forEach((Qt,ln)=>{let _t=Qt.frame(dn),mn=Qt.y(_t);const Hn=Qt.lineColor(_t),In=Rm(_t,Qt.pointColor);let ra=mn.config.unit??"y";if(Et.addScale({scaleKey:ra,orientation:Rt.wN.Vertical,direction:Rt.bQ.Up,max:mn.config.max,min:mn.config.min}),mn.config.custom?.axisPlacement!==Rt.LB.Hidden){let jn=mn.config.custom?.axisLabel;Et.addAxis({scaleKey:ra,theme:ie,placement:mn.config.custom?.axisPlacement,label:jn==null||jn===""?(0,hn.C)(mn,te[ln].frame(dn),dn):jn,values:(ga,Ra)=>Ra.map(Ta=>mn.display(Ta).text)})}Et.addSeries({facets:[{scale:"x",auto:!0},{scale:ra,auto:!0}],pathBuilder:Ct,theme:ie,scaleKey:"",lineColor:Hn,fillColor:(0,wr.alpha)(In,.5),show:!mn.config.custom.hideFrom?.viz})}),Et};function fo(W,te,ie){return W.error||!te.length?[null]:[null,...W.series.map((Ce,Le)=>{const Ve=Ce.frame(te);let je,rt;const dt=Ce.pointColor(Ve);return Array.isArray(dt)?(je=dt,rt=dt.map(Ct=>(0,wr.alpha)(Ct,.5))):(je=Array(Ve.length).fill(dt),rt=Array(Ve.length).fill((0,wr.alpha)(dt,.5))),[Ce.x(Ve).values.toArray(),Ce.y(Ve).values.toArray(),Im(Ve,Ce.pointSize),je,rt]})]}function Im(W,te){const ie=te(W);return Array.isArray(ie)?ie:Array(W.length).fill(ie)}function Rm(W,te){const ie=te(W);return Array.isArray(ie)?ie[0]:ie}const pm=10,Am=W=>{const[te,ie]=(0,D.useState)(),[Ce,Le]=(0,D.useState)([]),[Ve,je]=(0,D.useState)(),[rt,dt]=(0,D.useState)(),[Ct,Et]=(0,D.useState)(),[wt,zt]=(0,D.useState)(!1),Vt=(0,D.useRef)(!1),dn=(0,dm.Z)(W.options),un=(0,dm.Z)(W.data),Cn=()=>{Vt.current=!1,zt(!1),ln(void 0)},Qt=()=>{Vt.current=!Vt.current,zt(Vt.current)},ln=In=>{Et(In)},_t=(0,D.useCallback)(()=>{const In=()=>W.data.series,ra=Vm(W.options,In,Re.v.theme2,ln,Qt,Vt);ra.error?ie(ra.error):ra.series.length&&W.data.series&&(je(ra.builder),Le(ra.series),dt(()=>fo(ra,W.data.series)),ie(void 0))},[W.data.series,W.options]),mn=(0,D.useCallback)(()=>{dt(()=>fo({error:te,series:Ce},W.data.series))},[W.data.series,te,Ce]);(0,D.useEffect)(()=>{dn!==W.options||un?.structureRev!==W.data.structureRev?_t():un!==W.data&&mn()},[W]);const Hn=()=>{const In=[],ra=Ra=>Ra==null?"-":Ra.toFixed(1),jn=Re.v.theme2;for(let Ra=0;Ra<Ce.length;Ra++){const Ta=Ce[Ra],Ja=Ta.frame(W.data.series);if(Ja)for(const rr of Ta.legend())rr.getDisplayValues=()=>{const Cs=W.options.legend.calcs;if(!Cs?.length)return[];const ua=Ta.y(Ja),qa=ua.display??ra;let fs=null;const fr=(0,hr.Kx)({field:ua,reducers:Cs});return Cs.map(Cr=>{const gr=hr.TB.get(Cr);let Dr=qa;return gr.id===hr.gz.diffperc&&(Dr=(0,Ys.U)({field:{...ua,config:{...ua.config,unit:"percent"}},theme:jn})),(gr.id===hr.gz.count||gr.id===hr.gz.changeCount||gr.id===hr.gz.distinctCount)&&(fs||(fs=(0,Ys.U)({field:{...ua,config:{...ua.config,unit:"none"}},theme:jn})),Dr=fs),{...Dr(fr[Cr]),title:gr.name,description:gr.description}})},rr.disabled=!(Ta.show??!0),W.options.seriesMapping===Ku.Manual&&(rr.label=W.options.series?.[Ra]?.name??`Series ${Ra+1}`),In.push(rr)}if(!W.options.legend.showLegend)return null;const ga={flexStart:x.css`
        div {
          justify-content: flex-start !important;
        }
      `};return D.createElement(St.AY.Legend,{placement:W.options.legend.placement,width:W.options.legend.width},D.createElement($t.l,{className:ga.flexStart,placement:W.options.legend.placement,items:In,displayMode:W.options.legend.displayMode}))};return te||!Ve||!rt?D.createElement("div",{className:"panel-empty"},D.createElement("p",null,te)):D.createElement(D.Fragment,null,D.createElement(St.AY,{width:W.width,height:W.height,legend:Hn()},(In,ra)=>D.createElement(Uc.N,{config:Ve,data:rt,width:In,height:ra,timeRange:W.timeRange})),D.createElement(Dn.h_,null,Ct&&W.options.tooltip.mode!==Rt.f3.None&&D.createElement(Nn.S,{position:{x:Ct.pageX,y:Ct.pageY},offset:{x:pm,y:pm},allowPointerEvents:Vt.current},wt&&D.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},D.createElement(ns.P,{onClick:Cn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),D.createElement(mm,{options:W.options.tooltip,allSeries:Ce,manualSeriesConfigs:W.options.series,seriesMapping:W.options.seriesMapping,rowIndex:Ct.xIndex,hoveredPointIndex:Ct.scatterIndex,data:W.data.series,range:W.timeRange}))))};var hm=e(66683);function Lm(W){return{standardOptions:{[Gt.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Zt.S.PaletteClassic}}},useCustomConfig:te=>{te.addRadio({path:"show",name:"Show",defaultValue:W.show,settings:{options:[{label:"Points",value:ui.Points},{label:"Lines",value:ui.Lines},{label:"Both",value:ui.PointsAndLines}]}}).addSliderInput({path:"pointSize.fixed",name:"Point size",defaultValue:W.pointSize?.fixed,settings:{min:1,max:100,step:1},showIf:ie=>ie.show!==ui.Lines}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",showIf:ie=>ie.show!==ui.Points,editor:hm.j,override:hm.j,process:cn.kG,shouldApply:ie=>ie.type===fn.fS.number}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:W.lineWidth,settings:{min:0,max:10,step:1},showIf:ie=>ie.show!==ui.Points}),Sa.r(te,W),Ca.B(te)}}}const Bm=new me.c(Am).useFieldConfig(Lm(vc)).setPanelOptions(W=>{W.addRadio({path:"seriesMapping",name:"Series mapping",defaultValue:"auto",settings:{options:[{value:"auto",label:"Auto",description:"No changes to saved model since 8.0"},{value:"manual",label:"Manual"}]}}).addCustomEditor({id:"xyPlotConfig",path:"dims",name:"",editor:xm,showIf:te=>te.seriesMapping==="auto"}).addCustomEditor({id:"series",path:"series",name:"",defaultValue:[],editor:cm,showIf:te=>te.seriesMapping==="manual"}),wa.L(W),rs.J(W)}),Ds={"app/plugins/datasource/graphite/module":async()=>await e.e(7494).then(e.bind(e,86069)),"app/plugins/datasource/cloudwatch/module":async()=>await Promise.all([e.e(7421),e.e(8831)]).then(e.bind(e,17421)),"app/plugins/datasource/dashboard/module":async()=>await e.e(2557).then(e.bind(e,14642)),"app/plugins/datasource/elasticsearch/module":async()=>await Promise.all([e.e(5048),e.e(4601),e.e(9897)]).then(e.bind(e,14601)),"app/plugins/datasource/opentsdb/module":async()=>await e.e(3168).then(e.bind(e,80808)),"app/plugins/datasource/grafana/module":async()=>await Promise.all([e.e(7e3),e.e(7537)]).then(e.bind(e,37e3)),"app/plugins/datasource/influxdb/module":async()=>await e.e(5783).then(e.bind(e,9722)),"app/plugins/datasource/loki/module":async()=>await Promise.all([e.e(1899),e.e(4254),e.e(794),e.e(6196),e.e(3320),e.e(1598)]).then(e.bind(e,33320)),"app/plugins/datasource/jaeger/module":async()=>await Promise.all([e.e(4053),e.e(890)]).then(e.bind(e,94053)),"app/plugins/datasource/zipkin/module":async()=>await e.e(4023).then(e.bind(e,86098)),"app/plugins/datasource/mixed/module":async()=>await e.e(2001).then(e.bind(e,40336)),"app/plugins/datasource/mysql/module":async()=>await Promise.all([e.e(4993),e.e(4251)]).then(e.bind(e,30221)),"app/plugins/datasource/postgres/module":async()=>await Promise.all([e.e(4993),e.e(534)]).then(e.bind(e,50992)),"app/plugins/datasource/mssql/module":async()=>await Promise.all([e.e(4993),e.e(5032)]).then(e.bind(e,32320)),"app/plugins/datasource/prometheus/module":async()=>await Promise.all([e.e(1899),e.e(4254),e.e(5048),e.e(6303),e.e(6196),e.e(7004)]).then(e.bind(e,60356)),"app/plugins/datasource/testdata/module":async()=>await e.e(319).then(e.bind(e,50747)),"app/plugins/datasource/cloud-monitoring/module":async()=>await Promise.all([e.e(2773),e.e(3549)]).then(e.bind(e,43737)),"app/plugins/datasource/grafana-azure-monitor-datasource/module":async()=>await Promise.all([e.e(4552),e.e(2364)]).then(e.bind(e,14552)),"app/plugins/datasource/tempo/module":async()=>await Promise.all([e.e(3663),e.e(6752),e.e(295)]).then(e.bind(e,6752)),"app/plugins/datasource/alertmanager/module":async()=>await e.e(6795).then(e.bind(e,98548)),"app/plugins/datasource/phlare/module":async()=>await Promise.all([e.e(1899),e.e(4254),e.e(9704)]).then(e.bind(e,75885)),"app/plugins/datasource/parca/module":async()=>await e.e(2015).then(e.bind(e,96907)),"app/plugins/panel/text/module":E,"app/plugins/panel/timeseries/module":C,"app/plugins/panel/state-timeline/module":i,"app/plugins/panel/status-history/module":u,"app/plugins/panel/candlestick/module":g,"app/plugins/panel/graph/module":async()=>await e.e(1260).then(e.bind(e,35155)),"app/plugins/panel/xychart/module":M,"app/plugins/panel/geomap/module":async()=>await Promise.all([e.e(1189),e.e(8096)]).then(e.bind(e,86418)),"app/plugins/panel/canvas/module":async()=>await Promise.all([e.e(7638),e.e(8528),e.e(3330)]).then(e.bind(e,38280)),"app/plugins/panel/icon/module":async()=>await Promise.all([e.e(8528),e.e(53)]).then(e.bind(e,10529)),"app/plugins/panel/dashlist/module":f,"app/plugins/panel/alertlist/module":n,"app/plugins/panel/annolist/module":c,"app/plugins/panel/heatmap/module":async()=>await e.e(6987).then(e.bind(e,28975)),"app/plugins/panel/table/module":P,"app/plugins/panel/table-old/module":async()=>await e.e(6784).then(e.bind(e,8414)),"app/plugins/panel/news/module":h,"app/plugins/panel/live/module":d,"app/plugins/panel/stat/module":nd,"app/plugins/panel/debug/module":o,"app/plugins/panel/flamegraph/module":l,"app/plugins/panel/gettingstarted/module":a,"app/plugins/panel/gauge/module":ii,"app/plugins/panel/piechart/module":v,"app/plugins/panel/bargauge/module":r,"app/plugins/panel/barchart/module":s,"app/plugins/panel/logs/module":p,"app/plugins/panel/traces/module":b,"app/plugins/panel/welcome/module":S,"app/plugins/panel/nodeGraph/module":y,"app/plugins/panel/histogram/module":m,"app/plugins/panel/alertGroups/module":t};function Ws(W){const ie=new URL(W).pathname.split("/");return{id:ie[3],version:ie[4]}}function to(W){const{address:te}=W,ie=te.split("/public/plugin-cdn/");return`${Re.v.pluginsCDNBaseURL}/${ie[1]}`}function uo(W){const{id:te,version:ie}=Ws(W.name),Ce=`${Re.v.pluginsCDNBaseURL}/${te}/${ie}`;return W.source=W.source.replace(/(\/?)(public\/plugins)/g,`${Ce}/$2`),W.source=W.source.replace(/(["|'])(plugins\/.+?.css)(["|'])/g,`$1${Ce}/public/$2$3`),W.source=W.source.replace(/(\/\/#\ssourceMappingURL=)(.+)\.map/g,`$1${Ce}/public/plugins/${te}/$2.map`),W.source}function Fr(W){return W.metadata.loader==="cdn-loader"&&W.address.startsWith(`${location.origin}/public/plugin-cdn`)&&(W.address=W.address.replace(`${location.origin}/public/plugin-cdn`,Re.v.pluginsCDNBaseURL)),W.address}function Pr(W){const te=document.getElementsByTagName("link");return Array.from(te).map(Ce=>Ce.href).includes(W.address)?"":zr(W.address)}const $s="?_cache="+Date.now(),lr=100;function zr(W){return new Promise(function(te,ie){const Ce=setTimeout(function(){ie("Unable to load CSS")},lr*1e3),Le=function(je){clearTimeout(Ce),Ve.onload=Ve.onerror=R.noop,setTimeout(function(){je?ie(je):te("")},7)},Ve=document.createElement("link");Ve.type="text/css",Ve.rel="stylesheet",Ve.href=W,Ve.href.startsWith(Re.v.pluginsCDNBaseURL)||(Ve.href=Ve.href+$s),Ve.onload=function(){Le()},Ve.onerror=function(je){Le(je instanceof ErrorEvent?je.message:new Error("Error loading CSS file."))},document.head.appendChild(Ve)})}var Vu=e(82907),vm=e(89377),jm=e(4027),Ym=e(59554),Qm=e(65103),Zm=e(85095),Jm=e(28844),Xm=e(26189),_m=e(47825),qm=e(7540);const zu=G;zu.PanelPlugin=me.c,zu.DataSourcePlugin=re.hf,zu.AppPlugin=le.k8,zu.DataSourceApi=re.MF,se.i3.registry.set("css",se.i3.newModule({locate:Fr,fetch:Pr})),se.i3.registry.set("plugin-loader",se.i3.newModule({locate:Vu.hf})),se.i3.registry.set("cdn-loader",se.i3.newModule({locate:to,translate:uo})),se.i3.config({baseURL:"public",defaultExtension:"js",packages:{plugins:{defaultExtension:"js"},"plugin-cdn":{defaultExtension:"js"}},map:{text:"vendor/plugin-text/text.js"},meta:{"/*":{esModule:!0,authorization:!0,loader:"plugin-loader"},"*.css":{loader:"css"},"plugin-cdn/*":{esModule:!0,authorization:!1,loader:"cdn-loader"}}});function As(W,te){se.i3.registerDynamic(W,[],!0,(ie,Ce,Le)=>{Le.exports=te})}As("@grafana/data",pe),As("@grafana/ui",zu),As("@grafana/runtime",Q),As("lodash",A()),As("moment",I()),As("jquery",w()),As("d3",L),As("rxjs",Z),As("rxjs/operators",ae),As("react-router-dom",K),As("prismjs",F()),As("slate",J.ZP),As("slate-react",Ee.ZP),As("@grafana/slate-react",Ee.ZP),As("slate-plain-serializer",oe.Z),As("react",D),As("react-dom",Y),As("react-redux",j),As("redux",z),As("emotion",x),As("@emotion/css",x),As("@emotion/react",O),As("app/features/dashboard/impression_store",{impressions:ke.Z,__esModule:!0}),As("app/core/services/backend_srv",{BackendSrv:Be.y$,getBackendSrv:Be.i}),As("app/core/utils/datemath",ee),As("app/core/utils/flatten",ue),As("app/core/utils/kbn",Oe.Z),As("app/core/utils/ticks",Fe),As("app/core/config",X.ZP),As("app/core/time_series",He.Z),As("app/core/time_series2",He.Z),As("app/core/table_model",q.Z),As("app/core/app_events",de.h$),As("app/core/core",{appEvents:de.h$,contextSrv:de.Vt,__esModule:!0});const Hm=["jquery.flot","jquery.flot.pie","jquery.flot.time","jquery.flot.fillbelow","jquery.flot.crosshair","jquery.flot.stack","jquery.flot.selection","jquery.flot.stackpercent","jquery.flot.events","jquery.flot.gauge"];for(const W of Hm)As(W,{fakeDep:1});async function wm(W,te){te&&(0,Vu.Vf)({path:W,version:te});const ie=Ds[W];return ie?typeof ie=="function"?await ie():ie:se.i3.import(W)}function km(W){return wm(W.module,W.info?.version).then(te=>{if(te.plugin){const ie=te.plugin;return ie.meta=W,ie}if(te.Datasource){const ie=new re.hf(te.Datasource);return ie.setComponentsFromLegacyExports(te),ie.meta=W,ie}throw new Error("Plugin module is missing DataSourcePlugin or Datasource constructor export")})}function Gm(W){return wm(W.module,W.info?.version).then(te=>{const ie=te.plugin?te.plugin:new le.k8;return ie.init(W),ie.meta=W,ie.setComponentsFromLegacyExports(te),ie})}},82907:(H,T,e)=>{"use strict";e.d(T,{Hl:()=>r,Vf:()=>s,hf:()=>g});var t=e(13011);const n={},c=Date.now();function s({path:o,version:l}){n[o]||(n[o]=encodeURI(l))}function r(o){const l=`plugins/${o}/module`;n[l]&&delete n[l],(0,t.Z)(o)}function g(o,l=c){const{address:a}=o,m=f(a);if(!m)return`${a}?_cache=${l}`;const p=n[m]||l;return`${a}?_cache=${p}`}function f(o){const l=/\/public\/(plugins\/.+\/module)\.js/i.exec(o);if(!l)return;const[a,m]=l;if(m)return m}},55111:(H,T,e)=>{"use strict";e.d(T,{O:()=>g,d:()=>f});var t=e(24699),n=e(35645),c=e(38490),s=e(13011),r=e(82221);async function g(o){const l=await(0,s.a)(o);let a;if(l.type===t.zV.app&&(a=await(0,r.Av)(l)),l.type===t.zV.datasource&&(a=await(0,r.nL)(l)),l.type===t.zV.panel&&(a=await(0,c._2)(l)),l.type===t.zV.renderer&&(a={meta:l}),!a)throw new Error("Unknown Plugin type: "+l.type);return a}function f(o,l,a){if(!n.v.featureToggles.topnav)return l??void 0;let m={...o},d;function p(h,y){return!y.startsWith(h.url??"")||d&&(d.url?.length??0)>(h.url?.length??0)?h:(d&&(d.active=!1),d={...h,active:!0},d)}return m.children=(m?.children??[]).map(h=>{if(h.children){const y=h.children.map(v=>p(v,a));return{...p(h,a),children:y}}return p(h,a)}),{main:m,node:d??m}}},19360:(H,T,e)=>{"use strict";e.d(T,{h:()=>a});var t=e(54899);async function n(m){try{await(0,t.i)().put("/api/user/password",m)}catch(d){console.error(d)}}function c(){return(0,t.i)().get("/api/user")}function s(){return(0,t.i)().get("/api/user/teams")}function r(){return(0,t.i)().get("/api/user/orgs")}function g(){return(0,t.i)().get("/api/user/auth-tokens")}async function f(m){await(0,t.i)().post("/api/user/revoke-auth-token",{authTokenId:m})}async function o(m){await(0,t.i)().post("/api/user/using/"+m.orgId,{})}async function l(m){try{await(0,t.i)().put("/api/user",m)}catch(d){console.error(d)}}const a={changePassword:n,revokeUserSession:f,loadUser:c,loadSessions:g,loadOrgs:r,loadTeams:s,setUserOrg:o,updateUserProfile:l}},54294:(H,T,e)=>{"use strict";e.d(T,{$S:()=>h,Ns:()=>y,PL:()=>i,Uk:()=>E,YT:()=>m,ZP:()=>O,aw:()=>u,p$:()=>P,qD:()=>v,rf:()=>a,z0:()=>C,zW:()=>d,zc:()=>p});var t=e(32557),n=e(82897),c=e.n(n),s=e(38849),r=e(46519),g=e(47694),f=e(77582);const o={orgId:g.ZP.bootData.user.orgId,timeZone:g.ZP.bootData.user.timezone,weekStart:g.ZP.bootData.user.weekStart,fiscalYearStartMonth:0,orgsAreLoading:!1,sessionsAreLoading:!1,teamsAreLoading:!1,isUpdating:!1,orgs:[],sessions:[],teams:[],user:null},l=(0,t.oM)({name:"user/profile",initialState:o,reducers:{updateTimeZone:(L,B)=>{L.timeZone=B.payload.timeZone},updateWeekStart:(L,B)=>{L.weekStart=B.payload.weekStart},updateFiscalYearStartMonth:(L,B)=>{L.fiscalYearStartMonth=B.payload.fiscalYearStartMonth},setUpdating:(L,B)=>{L.isUpdating=B.payload.updating},userLoaded:(L,B)=>{L.user=B.payload.user},initLoadTeams:(L,B)=>{L.teamsAreLoading=!0},teamsLoaded:(L,B)=>{L.teams=B.payload.teams,L.teamsAreLoading=!1},initLoadOrgs:(L,B)=>{L.orgsAreLoading=!0},orgsLoaded:(L,B)=>{L.orgs=B.payload.orgs,L.orgsAreLoading=!1},initLoadSessions:(L,B)=>{L.sessionsAreLoading=!0},sessionsLoaded:(L,B)=>{const w=B.payload.sessions.sort((R,A)=>Number(A.isActive)-Number(R.isActive));L.sessions=w.map(R=>({id:R.id,isActive:R.isActive,seenAt:(0,s.E8)(R.seenAt),createdAt:R.createdAt,clientIp:R.clientIp,browser:R.browser,browserVersion:R.browserVersion,os:R.os,osVersion:R.osVersion,device:R.device})),L.sessionsAreLoading=!1},userSessionRevoked:(L,B)=>{L.sessions=L.sessions.filter(w=>w.id!==B.payload.tokenId),L.isUpdating=!1}}}),a=L=>async B=>{(0,n.set)(f.Vt,"user.fiscalYearStartMonth",L),B(M({fiscalYearStartMonth:L}))},m=L=>async B=>{(!(0,n.isString)(L)||(0,n.isEmpty)(L))&&(L=g.ZP?.bootData?.user?.timezone),(0,n.set)(f.Vt,"user.timezone",L),B(b({timeZone:L}))},d=L=>async B=>{(!(0,n.isString)(L)||(0,n.isEmpty)(L))&&(L=g.ZP?.bootData?.user?.weekStart),(0,n.set)(f.Vt,"user.weekStart",L),B(S({weekStart:L})),(0,r.Ls)(L)},{setUpdating:p,initLoadOrgs:h,orgsLoaded:y,initLoadTeams:v,teamsLoaded:i,userLoaded:u,userSessionRevoked:P,initLoadSessions:E,sessionsLoaded:C,updateTimeZone:b,updateWeekStart:S,updateFiscalYearStartMonth:M}=l.actions,x=l.reducer,O={user:l.reducer}},25405:(H,T,e)=>{"use strict";e.d(T,{Z:()=>t,i:()=>n});const t=c=>c.timeZone,n=c=>c.fiscalYearStartMonth},9386:(H,T,e)=>{"use strict";e.d(T,{S:()=>n,f:()=>c});class t{constructor(){this.extraRenderActions=[]}addExtraRenderAction(r){this.extraRenderActions=this.extraRenderActions.concat(r)}getAllExtraRenderAction(){return this.extraRenderActions}}const n=new t,c=new t},36584:(H,T,e)=>{"use strict";e.d(T,{x:()=>D,t:()=>j});var t=e(9085),n=e.n(t),c=e(82897),s=e(64681),r=e.n(s),g=e(68404),f=e(40400),o=e(94929),l=e(85081),a=e(49922),m=e(16911),d=e(25318),p=e(68183),h=e(11484),y=e(86647),v=e(19985),i=e(52081),u=e(53546),P=e(19117),E=e(1029),C=e(67254),b=e(19349),S=e(96161),M=e(9386),x=e(52423),O=e(53117),L=e(72648),B=e(39904),w=e(46967),R=e(57227);const A=K=>{const{query:z,queries:Z,onClick:ae,onChange:J,collapsedText:oe,renderExtras:Ee,disabled:me}=K,re=(0,L.wW)(I),[le,pe]=(0,g.useState)(!1),[ee,se]=(0,g.useState)(null),Q=ke=>{pe(!0)},G=ke=>{if(pe(!1),ee){se(null);return}z.refId!==ke&&J({...z,refId:ke})},q=ke=>{const He=ke.currentTarget.value.trim();if(He.length===0){se("An empty query name is not allowed");return}for(const ue of Z)if(ue!==z&&He===ue.refId){se("Query name already exists");return}ee&&se(null)},X=ke=>{G(ke.currentTarget.value.trim())},de=ke=>{ke.key==="Enter"&&G(ke.target.value)},Be=ke=>{ke.target.select()};return g.createElement(g.Fragment,null,g.createElement("div",{className:re.wrapper},!le&&g.createElement("button",{className:re.queryNameWrapper,"aria-label":p.wl.components.QueryEditorRow.title(z.refId),title:"Edit query name",onClick:Q,"data-testid":"query-name-div",type:"button"},g.createElement("span",{className:re.queryName},z.refId),g.createElement(B.J,{name:"pen",className:re.queryEditIcon,size:"sm"})),le&&g.createElement(g.Fragment,null,g.createElement(w.I,{type:"text",defaultValue:z.refId,onBlur:X,autoFocus:!0,onKeyDown:de,onFocus:Be,invalid:ee!==null,onChange:q,className:re.queryNameInput,"data-testid":"query-name-input"}),ee&&g.createElement(R.S,{horizontal:!0},ee)),U(K,re),Ee&&g.createElement("div",{className:re.itemWrapper},Ee()),me&&g.createElement("em",{className:re.contextInfo},"Disabled")),oe&&g.createElement("div",{className:re.collapsedText,onClick:ae},oe))},U=(K,z)=>{const{alerting:Z,dataSource:ae,onChangeDataSource:J}=K;return J?g.createElement("div",{className:z.itemWrapper},g.createElement(O.q,{variables:!0,alerting:Z,current:ae.name,onChange:J})):g.createElement("em",{className:z.contextInfo},"(",ae.name,")")},I=K=>({wrapper:x.css`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${K.spacing(.5)};
      overflow: hidden;
    `,queryNameWrapper:x.css`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${K.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${K.spacing(.5)};
      margin: 0;
      background: transparent;
      overflow: hidden;

      &:hover {
        background: ${K.colors.action.hover};
        border: 1px dashed ${K.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${K.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,queryName:x.css`
      font-weight: ${K.typography.fontWeightMedium};
      color: ${K.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${K.spacing(.5)};
    `,queryEditIcon:(0,x.cx)(x.css`
        margin-left: ${K.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),queryNameInput:x.css`
      max-width: 300px;
      margin: -4px 0;
    `,collapsedText:x.css`
      font-weight: ${K.typography.fontWeightRegular};
      font-size: ${K.typography.bodySmall.fontSize};
      color: ${K.colors.text.secondary};
      padding-left: ${K.spacing(1)};
      align-items: center;
      overflow: hidden;
      font-style: italic;
      white-space: nowrap;
      text-overflow: ellipsis;
    `,contextInfo:x.css`
      font-size: ${K.typography.bodySmall.fontSize};
      font-style: italic;
      color: ${K.colors.text.secondary};
      padding-left: 10px;
      padding-right: 10px;
    `,itemWrapper:x.css`
      display: flex;
      margin-left: 4px;
    `});function N({error:K}){const z=(0,L.wW)(F),Z=K?.message??K?.data?.message??"Query error";return g.createElement("div",{className:z.wrapper},g.createElement("div",{className:z.icon},g.createElement(B.J,{name:"exclamation-triangle"})),g.createElement("div",{className:z.message},Z))}const F=K=>({wrapper:(0,x.css)({marginTop:K.spacing(.5),background:K.colors.background.secondary,display:"flex"}),icon:(0,x.css)({background:K.colors.error.main,color:K.colors.error.contrastText,padding:K.spacing(1)}),message:(0,x.css)({fontSize:K.typography.bodySmall.fontSize,fontFamily:K.typography.fontFamilyMonospace,padding:K.spacing(1)})});class D extends g.PureComponent{constructor(){super(...arguments),this.element=null,this.angularScope=null,this.angularQueryEditor=null,this.id="",this.state={datasource:null,hasTextEditMode:!1,data:void 0,isOpen:!0,showingHelp:!1},this.renderAngularQueryEditor=()=>{if(!this.element)return;this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null);const z=(0,h.w)(),Z='<plugin-component type="query-ctrl" />',ae={ctrl:this.getAngularQueryComponentScope()};this.angularQueryEditor=z.load(this.element,ae,Z),this.angularScope=ae.ctrl},this.onOpen=()=>{this.renderAngularQueryEditor()},this.renderPluginEditor=()=>{const{query:z,onChange:Z,queries:ae,onRunQuery:J,onAddQuery:oe,app:Ee=f.zj.PanelEditor,history:me}=this.props,{datasource:re,data:le}=this.state;if(this.isWaitingForDatasourceToLoad())return null;if(re?.components?.QueryCtrl)return g.createElement("div",{ref:pe=>this.element=pe});if(re){let pe=this.getReactQueryEditor(re);if(pe)return g.createElement(o.n,{instanceSettings:this.props.dataSource},g.createElement(pe,{key:re?.name,query:z,datasource:re,onChange:Z,onRunQuery:J,onAddQuery:oe,data:le,range:(0,b.$t)().timeRange(),queries:ae,app:Ee,history:me}))}return g.createElement("div",null,"Data source plugin does not export any Query Editor component")},this.onToggleEditMode=(z,Z)=>{z.stopPropagation(),this.angularScope&&this.angularScope.toggleEditorMode&&(this.angularScope.toggleEditorMode(),this.angularQueryEditor?.digest(),Z.isOpen||Z.onOpen())},this.onRemoveQuery=()=>{const{onRemoveQuery:z,query:Z,onQueryRemoved:ae}=this.props;z(Z),ae&&ae()},this.onCopyQuery=()=>{const{query:z,onAddQuery:Z,onQueryCopied:ae}=this.props,J=(0,c.cloneDeep)(z);Z(J),ae&&ae()},this.onDisableQuery=()=>{const{query:z,onChange:Z,onRunQuery:ae,onQueryToggled:J}=this.props;Z({...z,hide:!z.hide}),ae(),J&&J(z.hide)},this.onToggleHelp=()=>{this.setState(z=>({showingHelp:!z.showingHelp}))},this.onClickExample=z=>{z.datasource===void 0&&(z.datasource={type:this.props.dataSource.type,uid:this.props.dataSource.uid}),this.props.onChange({...z,refId:this.props.query.refId}),this.onToggleHelp()},this.renderWarnings=()=>{const{data:z,query:Z}=this.props,J=(j(z,Z.refId)?.series??[]).reduce((re,le)=>{if(!le.meta?.notices)return re;const pe=(0,c.filter)(le.meta.notices,{severity:"warning"})??[];return re.concat(pe)},[]),oe=(0,c.uniqBy)(J,"text");if(!(oe.length>0))return null;const me=oe.map(re=>re.text).join(`
`);return g.createElement(v.C,{color:"orange",icon:"exclamation-triangle",text:g.createElement(g.Fragment,null,oe.length," ",r()("warning",oe.length)),tooltip:me})},this.renderExtraActions=()=>{const{query:z,queries:Z,data:ae,onAddQuery:J,dataSource:oe}=this.props,Ee=M.f.getAllExtraRenderAction().map((me,re)=>me({query:z,queries:Z,timeRange:ae.timeRange,onAddQuery:J,dataSource:oe,key:re})).filter(Boolean);return Ee.push(this.renderWarnings()),Ee},this.renderActions=z=>{const{query:Z,hideDisableQuery:ae=!1}=this.props,{hasTextEditMode:J,datasource:oe,showingHelp:Ee}=this.state,me=Z.hide,re=oe?.components?.QueryEditorHelp;return g.createElement(i.Lh,{width:"auto"},re&&g.createElement(E.y,{title:"Toggle data source help",icon:"question-circle",onClick:this.onToggleHelp,active:Ee}),J&&g.createElement(E.y,{title:"Toggle text edit mode",icon:"pen",onClick:le=>{this.onToggleEditMode(le,z)}}),this.renderExtraActions(),g.createElement(E.y,{title:"Duplicate query",icon:"copy",onClick:this.onCopyQuery}),ae?null:g.createElement(E.y,{title:"Disable/enable query",icon:me?"eye-slash":"eye",active:me,onClick:this.onDisableQuery}),g.createElement(E.y,{title:"Remove query",icon:"trash-alt",onClick:this.onRemoveQuery}))},this.renderHeader=z=>{const{alerting:Z,query:ae,dataSource:J,onChangeDataSource:oe,onChange:Ee,queries:me,renderHeaderExtras:re}=this.props;return g.createElement(A,{query:ae,queries:me,onChangeDataSource:oe,dataSource:J,disabled:ae.hide,onClick:le=>this.onToggleEditMode(le,z),onChange:Ee,collapsedText:z.isOpen?null:this.renderCollapsedText(),renderExtras:re,alerting:Z})}}componentDidMount(){const{data:z,query:Z,id:ae}=this.props,J=j(z,Z.refId);this.id=(0,c.uniqueId)(ae+"_"),this.setState({data:J}),this.loadDatasource()}componentWillUnmount(){this.angularQueryEditor&&this.angularQueryEditor.destroy()}getAngularQueryComponentScope(){const{query:z,queries:Z}=this.props,{datasource:ae}=this.state,J=new S.r({targets:Z}),oe={},Ee=this;return{datasource:ae,target:z,panel:J,dashboard:oe,refresh:()=>{z.hide!==Ee.props.query.hide&&(z.hide=Ee.props.query.hide),this.props.onChange(z),this.props.onRunQuery()},render:()=>()=>console.log("legacy render function called, it does nothing"),events:this.props.eventBus||new l.F,range:(0,b.$t)().timeRange()}}getQueryDataSourceIdentifier(){const{query:z,dataSource:Z}=this.props;return z.datasource?.uid??Z.uid}async loadDatasource(){const z=(0,y.F)();let Z;const ae=this.getQueryDataSourceIdentifier();try{Z=await z.get(ae)}catch{Z=await z.get()}this.setState({datasource:Z,loadedDataSourceIdentifier:ae,hasTextEditMode:(0,c.has)(Z,"components.QueryCtrl.prototype.toggleEditorMode")})}componentDidUpdate(z){const{datasource:Z,loadedDataSourceIdentifier:ae}=this.state,{data:J,query:oe}=this.props;if(z.id!==this.props.id&&(this.id=(0,c.uniqueId)(this.props.id+"_")),J!==z.data){const Ee=j(J,oe.refId);this.setState({data:Ee}),this.angularScope&&(this.angularScope.range=(0,b.$t)().timeRange()),this.angularQueryEditor&&Ee&&Y(this.angularScope,Ee,this.angularQueryEditor)}if(Z&&ae!==this.getQueryDataSourceIdentifier()){this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null),this.loadDatasource();return}!this.element||this.angularQueryEditor||this.renderAngularQueryEditor()}getReactQueryEditor(z){if(z)switch(this.props.app){case f.zj.Explore:return z.components?.ExploreMetricsQueryField||z.components?.ExploreLogsQueryField||z.components?.ExploreQueryField||z.components?.QueryEditor;case f.zj.PanelEditor:case f.zj.Dashboard:default:return z.components?.QueryEditor}}isWaitingForDatasourceToLoad(){return this.props.dataSource.uid!==this.state.loadedDataSourceIdentifier}renderCollapsedText(){const{datasource:z}=this.state;return z?.getQueryDisplayText?z.getQueryDisplayText(this.props.query):this.angularScope&&this.angularScope.getCollapsedText?this.angularScope.getCollapsedText():null}render(){const{query:z,index:Z,visualization:ae}=this.props,{datasource:J,showingHelp:oe,data:Ee}=this.state,me=z.hide,re=n()("query-editor-row",{"query-editor-row--disabled":me,"gf-form-disabled":me});if(!J)return null;const le=this.renderPluginEditor(),pe=J.components?.QueryEditorHelp;return g.createElement("div",{"aria-label":p.wl.components.QueryEditorRows.rows},g.createElement(C.t,{id:this.id,draggable:!0,index:Z,headerElement:this.renderHeader,actions:this.renderActions,onOpen:this.onOpen},g.createElement("div",{className:re,id:this.id},g.createElement(u.z4,null,oe&&pe&&g.createElement(P.h,null,g.createElement(pe,{onClickExample:ee=>this.onClickExample(ee),query:this.props.query,datasource:J})),le),Ee?.error&&Ee.error.refId===z.refId&&g.createElement(N,{error:Ee.error}),ae)))}}function Y(K,z,Z){if(z.state===a.Gu.Done){const ae=z.series.map(J=>(0,m.Zr)(J));K.events.emit(d.Kh.dataReceived,ae)}else z.state===a.Gu.Error&&K.events.emit(d.Kh.dataError,z.error);setTimeout(Z.digest)}function j(K,z){const Z=K.series.filter(Ee=>Ee.refId===z);if(K.state!==a.Gu.Loading&&K.error&&!K.series.length)return{...K,state:a.Gu.Error};let ae=K.state;const J=K.error&&K.error.refId===z?K.error:void 0;J?ae=a.Gu.Error:!J&&K.state===a.Gu.Error&&(ae=a.Gu.Done);const oe=K.timeRange;return{...K,state:ae,series:Z,error:J,timeRange:oe}}},87865:(H,T,e)=>{"use strict";e.d(T,{Tl:()=>ee,kt:()=>re});var t=e(16527),n=e(96209),c=e(95484),s=e(16313),r=e(4561),g=e(2101),f=e(67305),o=e(15562),l=e(38581),a=e(97218),m=e(44962),d=e(7356),p=e(82378),h=e(47694),y=e(82897);function v(se){let Q=[];const G=(0,y.partition)(se,"id"),q=(0,y.groupBy)(G[0],"id");return Q=(0,y.map)(q,X=>X.length>1&&!(0,y.every)(X,i)?(0,y.find)(X,de=>de.eventType!=="panel-alert"):(0,y.head)(X)),Q=(0,y.concat)(Q,G[1]),Q}function i(se){return se.eventType==="panel-alert"}var u=e(19349),P=e(85526),E=e(94514),C=e(54899),b=e(55197);class S{canWork({dashboard:Q,range:G}){return!(!Q.id||G.raw.to!=="now"||!Q.panels.find(q=>!!q.alert))}work(Q){if(!this.canWork(Q))return(0,b.H_)();const{dashboard:G}=Q;return(0,P.D)((0,C.i)().get("/api/alerts/states-for-dashboard",{dashboardId:G.id},`dashboard-query-runner-alert-states-${G.id}`)).pipe((0,g.U)(q=>({alertStates:q,annotations:[]})),(0,E.K)(b.Rc))}}var M=e(53786),x=e(98356),O=e(14542),L=e(86647),B=e(45984),w=e(17424),R=e(86953);class A{canRun(Q){return Q?Boolean(!Q.annotationQuery||Q.annotations):!1}run({annotation:Q,datasource:G,dashboard:q,range:X}){if(!this.canRun(G))return(0,M.of)([]);const de={};return(0,R.r)({dashboard:q,range:X,panel:de},G,Q).pipe((0,g.U)(Be=>Be.events??[]),(0,E.K)(b.h1))}}var U=e(66228);class I{canRun(Q){return Q?(0,U.yr)(Q)?!0:Boolean(Q.annotationQuery&&!Q.annotations):!1}run({annotation:Q,datasource:G,dashboard:q,range:X}){return this.canRun(G)?(0,P.D)(G.annotationQuery({range:X,rangeRaw:X.raw,annotation:Q,dashboard:q})).pipe((0,E.K)(b.h1)):(0,M.of)([])}}class N{constructor(Q=[new I,new A]){this.runners=Q}canWork({dashboard:Q}){const G=Q.annotations.list.find(N.getAnnotationsToProcessFilter);return Boolean(G)}work(Q){if(!this.canWork(Q))return(0,b.H_)();const{dashboard:G,range:q}=Q;let X=G.annotations.list.filter(N.getAnnotationsToProcessFilter);G.meta.publicDashboardAccessToken&&X.length>0&&(X=[X[0]]);const de=X.map(Be=>{let ke;if((0,h.iE)().isPublicDashboardView){const He=new w.lh(w.Qi);ke=(0,M.of)(He).pipe((0,E.K)(b.hs))}else ke=(0,P.D)((0,L.F)().get(Be.datasource)).pipe((0,E.K)(b.hs));return ke.pipe((0,x.z)(He=>{const ue=this.runners.find(Oe=>Oe.canRun(He));return ue?(G.events.publish(new B.z(Be)),ue.run({annotation:Be,datasource:He,dashboard:G,range:q}).pipe((0,f.R)(re().cancellations().pipe((0,O.h)(Oe=>Oe===Be))),(0,g.U)(Oe=>(G.snapshot&&(Be.snapshotData=(0,y.cloneDeep)(Oe)),G.meta.publicDashboardAccessToken?Oe:(0,b.pG)(Be,Oe))),(0,a.x)(()=>{G.events.publish(new B.RB(Be))}))):(0,M.of)([])}))});return(0,s.T)(de).pipe((0,o.J)(),(0,l.u)((Be,ke)=>Be.concat(ke)),(0,g.U)(Be=>({annotations:Be,alertStates:[]})))}static getAnnotationsToProcessFilter(Q){return Q.enable&&!Boolean(Q.snapshotData)}}var F=e(56422),D=e(23309),Y=e(82002),j=e(37190),K=e(79662),z=e(81168),Z=e(46063);class ae{constructor(){this.hasAlertRules={}}canWork({dashboard:Q,range:G}){return!(!Q.uid||Q.meta.publicDashboardAccessToken||G.raw.to!=="now"||this.hasAlertRules[Q.uid]===!1||!(Y.Vt.hasPermission(z.AccessControlAction.AlertingRuleRead)&&Y.Vt.hasPermission(z.AccessControlAction.AlertingRuleExternalRead)))}work(Q){if(!this.canWork(Q))return(0,b.H_)();const{dashboard:G}=Q;return(0,P.D)((0,C.i)().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:G.uid},`dashboard-query-runner-unified-alert-states-${G.id}`)).pipe((0,g.U)(q=>{if(q.status==="success"){this.hasAlertRules[G.uid]=!1;const X={};return q.data.groups.forEach(de=>de.rules.forEach(Be=>{if((0,K.x_)(Be)&&Be.annotations&&Be.annotations[j.q6.panelID]){this.hasAlertRules[G.uid]=!0;const ke=Number(Be.annotations[j.q6.panelID]),He=J(Be.state);X[ke]?He===D.Z.Alerting&&X[ke].state!==D.Z.Alerting?X[ke].state=D.Z.Alerting:He===D.Z.Pending&&X[ke].state!==D.Z.Alerting&&X[ke].state!==D.Z.Pending&&(X[ke].state=D.Z.Pending):X[ke]={state:He,id:Object.keys(X).length,panelId:ke,dashboardId:G.id}}})),{alertStates:Object.values(X),annotations:[]}}throw new Error("Unexpected alert rules response.")}),(0,E.K)(b.Rc))}}function J(se){return se===Z.x_.Firing?D.Z.Alerting:se===Z.x_.Pending?D.Z.Pending:D.Z.OK}class oe{constructor(Q,G=(0,u.$t)(),q=[h.vc.unifiedAlertingEnabled?new ae:new S,new F.g,new N]){this.dashboard=Q,this.timeSrv=G,this.workers=q,this.run=this.run.bind(this),this.getResult=this.getResult.bind(this),this.cancel=this.cancel.bind(this),this.destroy=this.destroy.bind(this),this.executeRun=this.executeRun.bind(this),this.results=new t.t(1),this.runs=new n.x,this.cancellationStream=new n.x,this.runsSubscription=this.runs.subscribe(X=>this.executeRun(X)),this.eventsSubscription=Q.events.subscribe(p.U5,X=>{this.run({dashboard:this.dashboard,range:this.timeSrv.timeRange()})})}run(Q){this.runs.next(Q)}getResult(Q){return this.results.asObservable().pipe((0,g.U)(G=>{const q=(0,b.tD)(G.annotations,Q),X=G.alertStates.find(de=>Boolean(Q)&&de.panelId===Q);return{annotations:v(q),alertState:X}}))}executeRun(Q){const q=this.workers.filter(He=>He.canWork(Q)).map(He=>He.work(Q)),X=new c.w0,de=(0,s.T)(q).pipe((0,f.R)(this.runs.asObservable()),(0,o.J)(),(0,l.u)((He,ue)=>(He.annotations=He.annotations.concat(ue.annotations),He.alertStates=He.alertStates.concat(ue.alertStates),He)),(0,a.x)(()=>{X.unsubscribe()}),(0,m.B)()),Be=new c.w0,ke=(0,r.H)(200).pipe((0,d.h)({annotations:[],alertStates:[]}),(0,f.R)(de),(0,a.x)(()=>{Be.unsubscribe()}));Be.add(ke.subscribe(He=>{this.results.next(He)})),X.add(de.subscribe(He=>{this.results.next(He)}))}cancel(Q){this.cancellationStream.next(Q)}cancellations(){return this.cancellationStream.asObservable().pipe((0,m.B)())}destroy(){this.results.complete(),this.runs.complete(),this.cancellationStream.complete(),this.runsSubscription.unsubscribe(),this.eventsSubscription.unsubscribe()}}let Ee;function me(se){Ee&&Ee.destroy(),Ee=se}function re(){if(!Ee)throw new Error("getDashboardQueryRunner can only be used after Grafana instance has started.");return Ee}let le;function pe(se){le=se}function ee(se){le||(le=({dashboard:G,timeSrv:q,workers:X})=>new oe(G,q,X));const Q=le(se);return me(Q),Q}},56422:(H,T,e)=>{"use strict";e.d(T,{g:()=>c});var t=e(53786),n=e(55197);class c{canWork({dashboard:r}){return r?.annotations?.list?.some(g=>g.enable&&Boolean(g.snapshotData))}work(r){if(!this.canWork(r))return(0,n.H_)();const g=this.getAnnotationsFromSnapshot(r.dashboard);return(0,t.of)({annotations:g,alertStates:[]})}getAnnotationsFromSnapshot(r){return(r?.annotations?.list?.filter(l=>l.enable)).filter(l=>Boolean(l.snapshotData)).reduce((l,a)=>l.concat((0,n.pG)(a,a.snapshotData)),[])}getAnnotationsInSnapshot(r,g){const f=this.getAnnotationsFromSnapshot(r);return(0,n.tD)(f,g)}}},55197:(H,T,e)=>{"use strict";e.d(T,{H_:()=>d,Rc:()=>p,em:()=>i,h1:()=>a,hs:()=>m,pG:()=>v,tD:()=>y});var t=e(82897),n=e.n(t),c=e(53786),s=e(50235),r=e(77599),g=e(35645),f=e(3153),o=e(60499),l=e(98864);function a(u){return u.cancelled?(0,c.of)([]):(h("AnnotationQueryRunner failed",u),(0,c.of)([]))}function m(u){return h("Failed to retrieve datasource",u),(0,c.of)(void 0)}const d=()=>(0,c.of)({annotations:[],alertStates:[]});function p(u){return u.cancelled||h("DashboardQueryRunner failed",u),d()}function h(u,P){const E=(0,r.P)(P);console.error("handleAnnotationQueryRunnerError",E);const C=(0,o.t_)(u,E.message);(0,f.WI)((0,l.$l)(C))}function y(u,P){return u.filter(E=>P!==void 0&&E.panelId&&E.source?.type==="dashboard"?E.panelId===P:!0)}function v(u,P){u.snapshotData&&(u=(0,t.cloneDeep)(u),delete u.snapshotData);for(const E of P)switch(E.source=u,E.color=g.v.theme2.visualization.getColorByName(u.iconColor),E.type=u.name,E.isRegion=Boolean(E.timeEnd&&E.time!==E.timeEnd),E.newState?.toLowerCase()){case"pending":E.color="yellow";break;case"alerting":E.color="red";break;case"ok":E.color="green";break;case"normal":E.color="green";break;case"no_data":E.color="gray";break;case"nodata":E.color="gray";break}return P}function i(u){if(!u||!u.length)return[];const P=[];for(const E of u){const C=new s.U(E);for(let b=0;b<E.length;b++){const S=(0,t.cloneDeep)(C.get(b));P.push(S)}}return P}},78800:(H,T,e)=>{"use strict";e.d(T,{o:()=>B,t:()=>L});var t=e(82897),n=e(53786),c=e(16527),s=e(98356),r=e(2101),g=e(79720),f=e(49922),o=e(16911),l=e(69311),a=e(36998),m=e(38067),d=e(40400),p=e(33180),h=e(40885),y=e(77599),v=e(22069),i=e(14035),u=e(91162),P=e(53693),E=e(17424),C=e(87865),b=e(86680),S=e(71398);function M(R,A){return(0,b.a)([R,A]).pipe((0,s.z)(U=>{const[I,N]=U;if(Boolean(N.annotations?.length)||Boolean(N.alertState)){I.annotations||(I.annotations=[]);const F=I.annotations.concat(new S.i(N.annotations)),D=N.alertState;return(0,n.of)({...I,annotations:F,alertState:D})}return(0,n.of)(I)}))}var x=e(75434);let O=100;function L(){return"Q"+O++}class B{constructor(A){this.getTransformationsStream=U=>I=>I.pipe((0,s.z)(N=>{if(!U)return(0,n.of)(N);const F=this.dataConfigSource.getTransformations();if(!F||F.length===0)return(0,n.of)(N);const D={interpolate:Y=>(0,h.J)().replace(Y,N?.request?.scopedVars)};return(0,g.H)(F,N.series,D).pipe((0,r.U)(Y=>({...N,series:Y})))})),this.resendLastResult=()=>{this.lastResult&&this.subject.next(this.lastResult)},this.subject=new c.t(1),this.dataConfigSource=A}getData(A){const{withFieldConfig:U,withTransforms:I}=A;let N=1,F=[],D=!0,Y=-1;if(this.dataConfigSource.snapshotData){const j={state:f.Gu.Done,series:this.dataConfigSource.snapshotData.map(K=>(0,o.g0)(K)),timeRange:(0,l.JK)()};return(0,n.of)(j)}return this.subject.pipe(this.getTransformationsStream(I),(0,r.U)(j=>{let K=j,z=!1;if(U&&j.series?.length){if(Y===this.dataConfigSource.configRev){const ae=j.series.find(J=>(0,i.iL)(J));ae&&!ae.packetInfo.schemaChanged&&F[0].fields.length===ae.fields.length&&(K={...K,series:F.map((J,oe)=>({...J,length:j.series[oe].length,fields:J.fields.map((Ee,me)=>({...Ee,values:j.series[oe].fields[me].values,state:{...Ee.state,calcs:void 0,range:void 0}}))}))},z=!0)}let Z=this.dataConfigSource.getFieldOverrideOptions();Z!=null&&(D||!z)&&(Y=this.dataConfigSource.configRev,K={...K,series:(0,a.SM)({timeZone:j.request?.timezone??"browser",data:K.series,...Z})},D=!1)}return!z&&!(0,m.nl)(F,K.series,m.Ch)&&N++,F=K.series,{...K,structureRev:N}}))}async run(A){const{queries:U,timezone:I,datasource:N,panelId:F,dashboardId:D,dashboardUID:Y,publicDashboardAccessToken:j,timeRange:K,timeInfo:z,cacheTimeout:Z,maxDataPoints:ae,scopedVars:J,minInterval:oe,app:Ee}=A;if((0,P.yl)(N)){this.pipeToSubject((0,P.AK)(A,U[0]),F);return}const me={app:Ee??d.zj.Dashboard,requestId:L(),timezone:I,panelId:F,dashboardId:D,dashboardUID:Y,publicDashboardAccessToken:j,range:K,timeInfo:z,interval:"",intervalMs:0,targets:(0,t.cloneDeep)(U),maxDataPoints:ae,scopedVars:J||{},cacheTimeout:Z,startTime:Date.now(),rangeRaw:K.raw};try{const re=await w(N,me.scopedVars,j),le=re.meta?.mixed;me.targets=me.targets.map(se=>{const Q=se.datasource?.type===v.hr.type;return(!se.datasource||se.datasource.uid!==re.uid&&!le&&!Q)&&(se.datasource=re.getRef()),se});const pe=oe?(0,h.J)().replace(oe,me.scopedVars):re.interval,ee=p.calculateInterval(K,ae,pe);me.scopedVars=Object.assign({},me.scopedVars,{__interval:{text:ee.interval,value:ee.interval},__interval_ms:{text:ee.intervalMs.toString(),value:ee.intervalMs}}),me.interval=ee.interval,me.intervalMs=ee.intervalMs,this.lastRequest=me,this.pipeToSubject((0,x.v7)(re,me),F)}catch(re){this.pipeToSubject((0,n.of)({state:f.Gu.Error,error:(0,y.P)(re),series:[],timeRange:me.range}),F)}}pipeToSubject(A,U){this.subscription&&this.subscription.unsubscribe();let I=A;const N=this.dataConfigSource.getDataSupport();if(N.alertStates||N.annotations){const F=this.dataConfigSource;I=M(A,(0,C.kt)().getResult(F.id))}this.subscription=I.subscribe({next:F=>{this.lastResult=(0,x.zR)(F,this.lastResult),this.subject.next(this.lastResult)}})}cancelQuery(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===f.Gu.Loading&&this.subject.next({...this.lastResult,state:f.Gu.Done}))}clearLastResult(){this.lastResult=void 0,this.subject=new c.t(1)}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}useLastResultFrom(A){this.lastResult=A.getLastResult(),this.lastResult&&this.subject.next(this.lastResult)}setLastResult(A){this.lastResult=A}getLastResult(){return this.lastResult}getLastRequest(){return this.lastRequest}}async function w(R,A,U){if(!U&&R&&typeof R=="object"&&"query"in R)return R;const I=await(0,u.ak)().get(R,A);return U?new E.lh(I):I}},88039:(H,T,e)=>{"use strict";e.d(T,{V:()=>n});var t=e(97218);function n(c,s){return(0,t.x)(()=>{s&&c.resolveCancelerIfExists(s)})}},59584:(H,T,e)=>{"use strict";e.d(T,{C:()=>n});var t=e(38067);const n=(c,s)=>{let r=1;return s?.structureRev&&s.series&&(r=s.structureRev,(0,t.nl)(c.series,s.series,t.Ch)||r++),c.structureRev=r,c}},75434:(H,T,e)=>{"use strict";e.d(T,{zR:()=>N,v7:()=>R});var t=e(82897),n=e(53786),c=e(16313),s=e(4561),r=e(85526),g=e(2101),f=e(94514),o=e(29236),l=e(44962),a=e(7356),m=e(67305),d=e(49922),p=e(62163),h=e(21053),y=e(40400),v=e(16911),i=e(77599),u=e(22069),P=e(29930),E=e(99822),C=e(47471),b=e(88039),S=e(27677),M=e(75552),x=e(41818),O=e(9398);function L(F){let D=!1;return K=>{if(!K.request||D||S.Cj.getUrlSearchParams().editPanel!=null||K.state!==d.Gu.Done&&K.state!==d.Gu.Error)return;const Z={eventName:M.ct.DataRequest,source:K.request.app,datasourceName:F.name,datasourceId:F.id,datasourceUid:F.uid,datasourceType:F.type,dataSize:0,duration:K.request.endTime-K.request.startTime};K.request.app===y.zj.Explore||K.request.app===y.zj.Correlations?Y(Z,K):j(Z,K),K.series&&K.series.length>0&&(Z.dataSize=K.series.length),(0,x.r_)(Z),D=!0};function Y(K,z){const Z=Object.keys(z.series).length;K.totalQueries=Z}function j(K,z){const Z={};for(let Ee=0;Ee<z.series.length;Ee++){const me=z.series[Ee].refId;me&&!Z[me]&&(Z[me]=z.series[Ee].meta?.isCachedResponse??!1)}const ae=Object.keys(Z).length,J=Object.values(Z).filter(Ee=>Ee===!0).length;K.panelId=z.request.panelId,K.dashboardId=z.request.dashboardId,K.totalQueries=ae,K.cachedQueries=J;const oe=(0,O.h4)().getCurrent();oe&&(K.dashboardId=oe.id,K.dashboardName=oe.title,K.dashboardUid=oe.uid,K.folderName=oe.meta.folderTitle),z.error&&(K.error=z.error.message)}}function B(F,D){const Y=D.panelData.request,j={...D.packets},K=F.key??F.data?.[0]?.refId??"A";j[K]=F;let z=F.state||d.Gu.Done,Z;const ae=[],J=[];for(const me in j){const re=j[me];if(re.error&&(z=d.Gu.Error,Z=re.error),re.data&&re.data.length)for(const le of re.data){if(le.meta?.dataTopic===p.w5.Annotations){J.push(le);continue}ae.push(le)}}const oe=w(Y,z);return{packets:j,panelData:{state:z,series:ae,annotations:J,error:Z,request:Y,timeRange:oe}}}function w(F,D){const Y=F.range;return!(0,t.isString)(Y.raw.from)||D!==d.Gu.Streaming?Y:{...Y,from:h.parse(Y.raw.from,!1),to:h.parse(Y.raw.to,!0)}}function R(F,D,Y){let j={panelData:{state:d.Gu.Loading,series:[],request:D,timeRange:D.range},packets:{}};if(!D.targets.length)return D.endTime=Date.now(),j.panelData.state=d.Gu.Done,(0,n.of)(j.panelData);const K=A(F,D,Y).pipe((0,g.U)(z=>{if(!(0,t.map)(z.data))throw new Error(`Expected response data to be array, got ${typeof z.data}.`);return D.endTime=Date.now(),j=B(z,j),j.panelData}),(0,f.K)(z=>{const Z=typeof z=="string"?z:JSON.stringify(z);return console.error("runRequest.catchError",Z),(0,n.of)({...j.panelData,state:d.Gu.Error,error:(0,i.P)(z)})}),(0,o.b)(L(F)),(0,b.V)(P.ae,D.requestId),(0,l.B)());return(0,c.T)((0,s.H)(200).pipe((0,a.h)(j.panelData),(0,m.R)(K)),K)}function A(F,D,Y){if(D.targets=D.targets.map(K=>(0,E.vH)(K)?{...F?.getDefaultQuery?.(y.zj.PanelEditor),...K}:K),F.type==="public-ds")return(0,r.D)(F.query(D));for(const K of D.targets)if((0,u.Pr)(K.datasource))return C.mV.query(D);const j=Y?Y(D):F.query(D);return(0,r.D)(j)}function U(F){const D=(0,v.SX)((0,v.g0)(F));if(D.fields&&D.fields.length)for(const Y of D.fields)Y.state=null;return D}function I(F){return!F||!(0,t.map)(F)?[]:F.map(D=>U(D))}function N(F,D){const{series:Y,annotations:j}=F;if(F.state===d.Gu.Loading&&Y.length===0)return D||(D=F),{...D,state:d.Gu.Loading,request:F.request};const K=performance.now(),z=Y.map(J=>U(J)),Z=I(j),ae=performance.now();return{...F,series:z,annotations:Z,timings:{dataProcessingTime:ae-K}}}},43993:(H,T,e)=>{"use strict";e.d(T,{K:()=>P,A:()=>u});var t=e(52423),n=e(68404),c=e(95148),s=e(11979),r=e(68183),g=e(72648),f=e(39904),o=e(34807),l=e(85511),a=e(29930),m=e(9085),d=e.n(m),p=e(67487);function h({className:C,imageHeight:b,imageWidth:S,item:M,lastUpdated:x,onClick:O}){const L=(0,g.l4)(),[B,w]=(0,n.useState)(!0),R=u(M.uid,L.isLight),A=y(L,b,S),U=M.folderTitle||"General";return n.createElement("a",{className:d()(C,A.card),key:M.uid,href:M.url,onClick:O},n.createElement("div",{className:A.imageContainer},B?n.createElement("img",{loading:"lazy",alt:"Dashboard preview",className:A.image,src:R,onLoad:()=>w(!0),onError:()=>w(!1)}):n.createElement("div",{className:A.imagePlaceholder},M.icon?n.createElement(c.Z,{src:M.icon,width:36,height:36,title:M.title}):n.createElement(f.J,{name:"apps",size:"xl"}))),n.createElement("div",{className:A.info},n.createElement("div",{className:A.infoHeader},n.createElement("div",{className:A.titleContainer},n.createElement("div",null,M.title),n.createElement("div",{className:A.folder},n.createElement(f.J,{name:"folder"}),U)),x!==null&&n.createElement("div",{className:A.updateContainer},n.createElement("div",null,"Last updated"),x?n.createElement("div",{className:A.update},x):n.createElement(p.$,null))),n.createElement("div",null,n.createElement(o.P,{className:A.tagList,tags:M.tags}))))}const y=(C,b,S)=>{const M=C.spacing(4);return{card:t.css`
      background-color: ${C.colors.background.secondary};
      border: 1px solid ${C.colors.border.medium};
      border-radius: 4px;
      box-shadow: ${C.shadows.z3};
      display: flex;
      flex-direction: column;
      height: 100%;
      max-width: calc(${S}px + (${M} * 2))};
      width: 100%;
    `,folder:t.css`
      align-items: center;
      color: ${C.colors.text.secondary};
      display: flex;
      font-size: ${C.typography.size.sm};
      gap: ${C.spacing(.5)};
    `,image:t.css`
      box-shadow: ${C.shadows.z2};
      height: ${b}px;
      margin: ${C.spacing(1)} calc(${M} - 1px) 0;
      width: ${S}px;
    `,imageContainer:t.css`
      flex: 1;
      position: relative;

      &:after {
        background: linear-gradient(180deg, rgba(196, 196, 196, 0) 0%, rgba(127, 127, 127, 0.25) 100%);
        bottom: 0;
        content: '';
        left: 0;
        margin: ${C.spacing(1)} calc(${M} - 1px) 0;
        position: absolute;
        right: 0;
        top: 0;
      }
    `,imagePlaceholder:t.css`
      align-items: center;
      color: ${C.colors.text.secondary};
      display: flex;
      height: ${b}px;
      justify-content: center;
      margin: ${C.spacing(1)} ${M} 0;
      width: ${S}px;
    `,info:t.css`
      background-color: ${C.colors.background.canvas};
      border-bottom-left-radius: 4px;
      border-bottom-right-radius: 4px;
      display: flex;
      flex-direction: column;
      min-height: ${C.spacing(7)};
      gap: ${C.spacing(1)};
      padding: ${C.spacing(1)} ${C.spacing(2)};
      z-index: 1;
    `,infoHeader:t.css`
      display: flex;
      gap: ${C.spacing(1)};
      justify-content: space-between;
    `,tagList:t.css`
      justify-content: flex-start;
    `,titleContainer:t.css`
      display: flex;
      flex-direction: column;
      gap: ${C.spacing(.5)};
    `,updateContainer:t.css`
      align-items: flex-end;
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
      font-size: ${C.typography.bodySmall.fontSize};
      gap: ${C.spacing(.5)};
    `,update:t.css`
      color: ${C.colors.text.secondary};
      text-align: right;
    `}};var v=e(84638);const i=500;function u(C,b){return`/api/dashboards/uid/${C}/img/thumb/${b?"light":"dark"}`}function P({editable:C,item:b,onTagSelected:S,onToggleChecked:M,onClick:x}){const[O,L]=(0,n.useState)(!0),[B,w]=(0,n.useState)(null),[R,A]=(0,n.useState)(!1),U=(0,n.useRef)(null),I=(0,n.useCallback)(({placement:pe,reference:ee,popper:se})=>{let Q=[0,0];return pe==="bottom"||pe==="top"?Q=[0,-(ee.height+se.height)/2]:(pe==="left"||pe==="right")&&(Q=[-(ee.width+se.width)/2,0]),Q},[]),[N,F]=n.useState(null),[D,Y]=n.useState(null),{styles:j,attributes:K}=(0,s.D)(N,D,{modifiers:[{name:"offset",options:{offset:I}}]}),z=(0,g.l4)(),Z=u(b.uid,z.isLight),ae=E(z,N?.getBoundingClientRect().width,D?.getBoundingClientRect().width),J=async()=>{if(A(!0),b.uid&&!B){const pe=await a.ae.getDashboardByUid(b.uid),{updated:ee}=pe.meta;w(ee?new Date(ee).toLocaleString():null)}},oe=()=>{U.current=window.setTimeout(J,i)},Ee=()=>{U.current&&window.clearTimeout(U.current),U.current=window.setTimeout(J,i)},me=()=>{U.current&&window.clearTimeout(U.current),A(!1)},re=pe=>{pe.stopPropagation(),pe.preventDefault(),M?.(b)},le=(pe,ee)=>{ee.stopPropagation(),ee.preventDefault(),S?.(pe)};return n.createElement("a",{"data-testid":r.wl.components.Search.dashboardCard(b.title),className:ae.card,key:b.uid,href:b.url,ref:pe=>F(pe),onMouseEnter:oe,onMouseLeave:me,onMouseMove:Ee,onClick:x},n.createElement("div",{className:ae.imageContainer},n.createElement(v.R,{className:ae.checkbox,"aria-label":`Select dashboard ${b.title}`,editable:C,checked:b.checked,onClick:re}),O?n.createElement("img",{loading:"lazy",className:ae.image,src:Z,alt:"Dashboard preview",onError:()=>L(!1)}):n.createElement("div",{className:ae.imagePlaceholder},b.icon?n.createElement(c.Z,{src:b.icon,width:36,height:36,title:b.title}):n.createElement(f.J,{name:"apps",size:"xl"}))),n.createElement("div",{className:ae.info},n.createElement("div",{className:ae.title},b.title),n.createElement(o.P,{displayMax:1,tags:b.tags,onClick:le})),R&&n.createElement(l.h_,{className:ae.portal},n.createElement("div",{ref:Y,style:j.popper,...K.popper},n.createElement(h,{className:ae.expandedView,imageHeight:240,imageWidth:320,item:b,lastUpdated:B,onClick:x}))))}const E=(C,b=0,S=0)=>{const M=C.spacing(4);return{card:t.css`
      background-color: ${C.colors.background.secondary};
      border: 1px solid ${C.colors.border.medium};
      border-radius: 4px;
      display: flex;
      flex-direction: column;

      &:hover {
        background-color: ${C.colors.emphasize(C.colors.background.secondary,.03)};
      }
    `,checkbox:t.css`
      left: 0;
      margin: ${C.spacing(1)};
      position: absolute;
      top: 0;
    `,expandedView:t.css`
      @keyframes expand {
        0% {
          transform: scale(${b/S});
        }
        100% {
          transform: scale(1);
        }
      }

      animation: expand ${C.transitions.duration.shortest}ms ease-in-out 0s 1 normal;
      background-color: ${C.colors.emphasize(C.colors.background.secondary,.03)};
    `,image:t.css`
      aspect-ratio: 4 / 3;
      box-shadow: ${C.shadows.z1};
      margin: ${C.spacing(1)} ${M} 0;
      width: calc(100% - (2 * ${M}));
    `,imageContainer:t.css`
      flex: 1;
      position: relative;

      &:after {
        background: linear-gradient(180deg, rgba(196, 196, 196, 0) 0%, rgba(127, 127, 127, 0.25) 100%);
        bottom: 0;
        content: '';
        left: 0;
        margin: ${C.spacing(1)} ${M} 0;
        position: absolute;
        right: 0;
        top: 0;
      }
    `,imagePlaceholder:t.css`
      align-items: center;
      aspect-ratio: 4 / 3;
      color: ${C.colors.text.secondary};
      display: flex;
      justify-content: center;
      margin: ${C.spacing(1)} ${M} 0;
      width: calc(100% - (2 * ${M}));
    `,info:t.css`
      align-items: center;
      background-color: ${C.colors.background.canvas};
      border-bottom-left-radius: 4px;
      border-bottom-right-radius: 4px;
      display: flex;
      height: ${C.spacing(7)};
      gap: ${C.spacing(1)};
      padding: 0 ${C.spacing(2)};
      z-index: 1;
    `,portal:t.css`
      pointer-events: none;
    `,title:t.css`
      display: block;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    `}}},84638:(H,T,e)=>{"use strict";e.d(T,{R:()=>c});var t=e(68404),n=e(58255);const c=(0,t.memo)(({onClick:s,className:r,checked:g=!1,editable:f=!1,"aria-label":o})=>f?t.createElement("div",{onClick:s,className:r},t.createElement(n.X,{value:g,"aria-label":o})):null);c.displayName="SearchCheckbox"},81029:(H,T,e)=>{"use strict";e.d(T,{T:()=>d});var t=e(52423),n=e(68404),c=e(68183),s=e(72648),r=e(72948),g=e(39904),f=e(34807),o=e(10216),l=e(84638);const a=c.wl.components.Search,m=(h="")=>{const y=new Map([["errors","info-circle"],["views","eye"]]);return y.has(h)?y.get(h):"sort-amount-down"},d=({item:h,editable:y,onToggleChecked:v,onTagSelected:i,onClickItem:u})=>{const P=(0,s.wW)(p),E=(0,n.useCallback)((S,M)=>{M.stopPropagation(),M.preventDefault(),i(S)},[i]),C=(0,n.useCallback)(S=>{S.stopPropagation(),S.preventDefault(),v&&v(h)},[h,v]),b=h.folderTitle||"General";return n.createElement(r.Z,{"data-testid":a.dashboardItem(h.title),href:h.url,style:{minHeight:o.CN},className:P.container,onClick:u},n.createElement(r.Z.Heading,null,h.title),n.createElement(r.Z.Figure,{align:"center",className:P.checkbox},n.createElement(l.R,{"aria-label":"Select dashboard",editable:y,checked:h.checked,onClick:C})),n.createElement(r.Z.Meta,{separator:""},n.createElement("span",{className:P.metaContainer},n.createElement(g.J,{name:"folder","aria-hidden":!0}),b),h.sortMetaName&&n.createElement("span",{className:P.metaContainer},n.createElement(g.J,{name:m(h.sortMetaName)}),h.sortMeta," ",h.sortMetaName)),n.createElement(r.Z.Tags,null,n.createElement(f.P,{tags:h.tags,onClick:E,getAriaLabel:S=>`Filter by tag "${S}"`})))},p=h=>({container:t.css`
      margin-bottom: ${h.spacing(.75)};
      padding: ${h.spacing(1)} ${h.spacing(2)};
    `,metaContainer:t.css`
      display: flex;
      align-items: center;
      margin-right: ${h.spacing(1)};

      svg {
        margin-right: ${h.spacing(.5)};
      }
    `,checkbox:t.css`
      margin-right: 0;
    `})},10216:(H,T,e)=>{"use strict";e.d(T,{CN:()=>c,E_:()=>h,YQ:()=>o,fy:()=>l,pW:()=>f,qb:()=>d,qi:()=>g,rh:()=>m,to:()=>a,xb:()=>p,yw:()=>r});var t=e(1037);const n=null,c=58,s=8,r={label:"A\u2013Z",value:"alpha-asc"},g="search.sections",f=0,o="general",l="General",a="grafana.search.include.panels",m="grafana.search.layout",d="grafana.search.sort",p={dashboard:t.o.DashDB,folder:t.o.DashFolder,home:t.o.DashHome},h=1e3},54350:(H,T,e)=>{"use strict";e.d(T,{A:()=>r,v:()=>g});var t=e(68404),n=e(96209),c=e(83383),s=e(37932);function r(){const f=(0,t.useRef)(new n.x);return{keyboardEvents:f.current,onKeyDown:o=>{switch(o.code){case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":case"Enter":f.current.next(o);default:}}}}function g(f,o,l){const a=(0,t.useRef)({x:0,y:-1}),[m,d]=(0,t.useState)({x:0,y:-1}),p=(0,t.useRef)();return(0,t.useEffect)(()=>{p.current=l.view.fields.url,a.current.x=0,a.current.y=-1,d({...a.current})},[l]),(0,t.useEffect)(()=>{const h=f.subscribe({next:y=>{switch(y?.code){case"ArrowDown":{a.current.y++,d({...a.current});break}case"ArrowUp":a.current.y=Math.max(0,a.current.y-1),d({...a.current});break;case"ArrowRight":{o>0&&(a.current.x=Math.min(o,a.current.x+1),d({...a.current}));break}case"ArrowLeft":{o>0&&(a.current.x=Math.max(0,a.current.x-1),d({...a.current}));break}case"Enter":if(!p.current)break;const v=a.current.x*o+a.current.y;if(v<0){a.current.x=0,a.current.y=0,d({...a.current});break}const i=p.current.values?.get(v);i&&s.E1.push(c.u.stripBaseFromUrl(i))}}});return()=>h.unsubscribe()},[f,o]),m}},30506:(H,T,e)=>{"use strict";e.d(T,{T:()=>t.T,_:()=>M});var t=e(81029),n=e(68404),c=e(35645),s=e(70356),r=e(37932);function g(){const x=(0,s.TH)();return[new URLSearchParams(x.search),(B,w)=>{r.E1.partial(B,w)}]}var f=e(52423),o=e(72648),l=e(8180),a=e(7804),m=e(54350),d=e(71897),p=e(66757);function h({}){const x=(0,o.wW)(y),O=(0,p.hD)(),L=O.useState();(0,n.useEffect)(()=>O.initStateFromUrl(),[O]);const{onKeyDown:B,keyboardEvents:w}=(0,m.A)();return n.createElement("div",{className:x.overlay},n.createElement("div",{className:x.container},n.createElement("div",{className:x.searchField},n.createElement("div",null,n.createElement("input",{type:"text",autoFocus:!0,placeholder:L.includePanels?"Search dashboards and panels by name":"Search dashboards by name",value:L.query??"",onChange:R=>O.onQueryChange(R.currentTarget.value),onKeyDown:B,spellCheck:!1,className:x.input})),n.createElement("div",{className:x.closeBtn},n.createElement(l.h,{name:"times",onClick:O.onCloseSearch,size:"xxl",tooltip:"Close search"}))),n.createElement("div",{className:x.search},n.createElement(d.Z,{showManage:!1,keyboardEvents:w}))))}const y=(0,a.B)(x=>({overlay:f.css`
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      z-index: ${x.zIndex.sidemenu};
      position: fixed;
      background: ${x.colors.background.canvas};
      padding: ${x.spacing(1)};

      ${x.breakpoints.up("md")} {
        left: ${x.components.sidemenu.width}px;
        z-index: ${x.zIndex.navbarFixed+1};
        padding: ${x.spacing(2)};
      }
    `,container:f.css`
      display: flex;
      flex-direction: column;
      max-width: 1400px;
      margin: 0 auto;
      padding: ${x.spacing(1)};
      background: ${x.colors.background.primary};
      border: 1px solid ${x.components.panel.borderColor};
      height: 100%;

      ${x.breakpoints.up("md")} {
        padding: ${x.spacing(3)};
      }
    `,closeBtn:f.css`
      right: -5px;
      top: 2px;
      z-index: 1;
      position: absolute;
    `,searchField:f.css`
      position: relative;
    `,search:f.css`
      display: flex;
      flex-direction: column;
      overflow: hidden;
      height: 100%;
      padding: ${x.spacing(2,0,3,0)};
    `,input:f.css`
      box-sizing: border-box;
      outline: none;
      background-color: transparent;
      background: transparent;
      border-bottom: 2px solid ${x.v1.colors.border1};
      font-size: 20px;
      line-height: 38px;
      width: 100%;

      &::placeholder {
        color: ${x.v1.colors.textWeak};
      }
    `}));var v=e(99510),i=e(81699),u=e(6665),P=e(22163);const E=200;function C({isOpen:x}){const O=(0,o.wW)(S),L=(0,o.wW)(K=>b(K,E)),B=(0,p.hD)(),w=B.useState(),R=(0,n.useRef)(null),A=(0,n.useRef)(null),[U,I]=(0,n.useState)(!1),{overlayProps:N,underlayProps:F}=(0,u.Ir)({isOpen:x,onClose:B.onCloseSearch},R),{dialogProps:D}=(0,v.R)({},R),{onKeyDown:Y,keyboardEvents:j}=(0,m.A)();return(0,n.useEffect)(()=>B.initStateFromUrl(),[B]),n.createElement(u.Xj,null,n.createElement(P.Z,{nodeRef:A,appear:!0,in:!0,timeout:E,classNames:L.underlay},n.createElement("div",{ref:A,onClick:B.onCloseSearch,className:O.underlay,...F})),n.createElement(P.Z,{nodeRef:R,onEntered:()=>I(!0),appear:!0,in:!0,timeout:E,classNames:L.overlay},n.createElement("div",{ref:R,className:O.overlay,...N,...D},n.createElement(i.MT,{contain:!0,autoFocus:!0},n.createElement("div",{className:O.searchField},n.createElement("div",null,n.createElement("input",{type:"text",placeholder:w.includePanels?"Search dashboards and panels by name":"Search dashboards by name",value:w.query??"",onChange:K=>B.onQueryChange(K.currentTarget.value),onKeyDown:Y,tabIndex:0,spellCheck:!1,className:O.input})),n.createElement("div",{className:O.closeBtn},n.createElement(l.h,{name:"times",onClick:B.onCloseSearch,size:"xl",tooltip:"Close search"}))),U&&n.createElement("div",{className:O.search},n.createElement(d.Z,{showManage:!1,keyboardEvents:j}))))))}const b=(x,O)=>{const L={transitionDuration:`${O}ms`,transitionTimingFunction:x.transitions.easing.easeInOut},B={[x.breakpoints.up("md")]:{...L,transitionProperty:"opacity"}},w={[x.breakpoints.up("md")]:{opacity:0}},R={[x.breakpoints.up("md")]:{opacity:1}},A={[x.breakpoints.up("md")]:{...L,transitionProperty:"height, width",overflow:"hidden"}},U={height:"100%",width:"100%",[x.breakpoints.up("md")]:{height:"32px",width:"50%"}},I={height:"100%",width:"100%",[x.breakpoints.up("md")]:{height:"90%",width:"75%"}};return{overlay:{appear:(0,f.css)(U),appearActive:(0,f.css)(A,I),appearDone:(0,f.css)(I)},underlay:{appear:(0,f.css)(w),appearActive:(0,f.css)(B,R),appearDone:(0,f.css)(R)}}},S=x=>({underlay:f.css`
      background-color: ${x.components.overlay.background};
      backdrop-filter: blur(1px);
      bottom: 0;
      left: 0;
      padding: 0;
      position: fixed;
      right: 0;
      top: 0;
      z-index: ${x.zIndex.modalBackdrop};
    `,overlay:f.css`
      background: ${x.colors.background.primary};
      border: 1px solid ${x.components.panel.borderColor};
      display: flex;
      flex-direction: column;
      margin: 0 auto;
      padding: ${x.spacing(1)};
      position: fixed;
      height: 100%;
      z-index: ${x.zIndex.modal};

      ${x.breakpoints.up("md")} {
        border-radius: ${x.shape.borderRadius(2)};
        box-shadow: ${x.shadows.z3};
        left: 0;
        margin: ${x.spacing(.5,"auto",0)};
        padding: ${x.spacing(1)};
        right: 0;
      }
    `,closeBtn:f.css`
      right: -5px;
      top: 0px;
      z-index: 1;
      position: absolute;
    `,searchField:f.css`
      position: relative;
    `,search:f.css`
      display: flex;
      flex-direction: column;
      overflow: hidden;
      height: 100%;
      padding: ${x.spacing(2,0,3,0)};
    `,input:f.css`
      box-sizing: border-box;
      outline: none;
      background-color: transparent;
      background: transparent;
      border-bottom: 1px solid ${x.colors.border.medium};
      font-size: 16px;
      line-height: 30px;
      width: 100%;

      &::placeholder {
        color: ${x.colors.text.disabled};
      }
    `}),M=(0,n.memo)(()=>{const[x]=g(),O=x.get("search")==="open",L=c.v.featureToggles.topnav;return O?L?n.createElement(C,{isOpen:O}):n.createElement(h,null):null});M.displayName="SearchWrapper"},16526:(H,T,e)=>{"use strict";e.d(T,{Q:()=>z});var t=e(52423),n=e(68404),c=e(91742),s=e(75478),r=e(47535),g=e(72648),f=e(35316),o=e(12245),l=e(54350),a=e(14582),m=e(36512),d=e(89890),p=e(20112),h=e(35645),y=e(86647),v=e(8180),i=e(58255),u=e(39904),P=e(34807),E=e(97063),C=e(48996),b=e(45984),S=e(88683),M=e(35029),x=e(94893),O=e(9405),L=e(19942);const B=[{label:"Score",value:"score"},{label:"Fields",value:"fields"},{label:"Allowed actions",value:"allowed_actions"}];function w({name:J,explain:oe,frame:Ee,row:me}){const[re,le]=(0,n.useState)(!0),[pe,ee]=(0,n.useState)("score"),se=n.createElement(S.H,{title:J,icon:"info",tabs:B,activeTab:pe,onChangeTab:Q=>{ee(Q.value)}});return n.createElement(M.u,{title:se,isOpen:re,onDismiss:()=>le(!1),closeOnBackdropClick:!0,closeOnEscape:!0},n.createElement(x.I,null,pe===B[0].value&&n.createElement(O.p,{width:"100%",height:"70vh",language:"json",showLineNumbers:!1,showMiniMap:!0,value:JSON.stringify(oe,null,2),readOnly:!1}),pe===B[1].value&&n.createElement("div",null,n.createElement(L.H,{data:Ee,rowIndex:me})),pe===B[2].value&&n.createElement(O.p,{width:"100%",height:"70vh",language:"json",showLineNumbers:!1,showMiniMap:!1,value:(()=>{const Q=Ee.fields.find(q=>q.name==="allowed_actions")?.values?.get(me),G=Ee.fields.find(q=>q.name==="ds_uid")?.values?.get(me);return JSON.stringify({dsUids:G??[],allowedActions:Q??[]},null,2)})(),readOnly:!1})))}const R=175,A=200,U=(J,oe,Ee,me,re,le,pe,ee,se)=>{const Q=[],G=J.view.fields,q=G.uid,X=G.kind;let de=0;const Be=G[J.view.dataFrame.meta?.custom?.sortBy];Be&&(de=175,Be.type===a.fS.time&&(de+=25),oe-=de),G.explain&&G.score&&(oe-=100);let ke=50;Ee&&me&&(ke=30,Q.push({id:"column-checkbox",width:ke,Header:()=>Ee("*","*")?n.createElement("div",{className:le.checkboxHeader},n.createElement(v.h,{name:"check-square",onClick:re})):n.createElement("div",{className:le.checkboxHeader},n.createElement(i.X,{checked:!1,onChange:Oe=>{Oe.stopPropagation(),Oe.preventDefault();const{view:Fe}=J,Ie=Math.min(Fe.length,50);for(let we=0;we<Ie;we++){const Re=Fe.get(we);Re.uid&&Re.kind&&(Ee(Re.kind,Re.uid)||me(Re.kind,Re.uid))}}})),Cell:Oe=>{const Fe=q.values.get(Oe.row.index),Ie=X?X.values.get(Oe.row.index):"dashboard",we=Ee(Ie,Fe),Re=Fe!=null;return n.createElement("div",{...Oe.cellProps},n.createElement("div",{className:le.checkbox},n.createElement(i.X,{disabled:!Re,value:we&&Re,onChange:_e=>{me(Ie,Fe)}})))},field:q}),oe-=ke),ke=Math.max(oe*.2,300),Q.push({Cell:Oe=>{let Fe=(0,t.cx)(le.nameCellStyle),Ie=G.name.values.get(Oe.row.index);return Ie?.length||(Ie=Oe.row.index>=J.view.dataFrame.length?"Loading...":"Missing title",Fe+=" "+le.missingTitleText),n.createElement("a",{...Oe.cellProps,href:Oe.userProps.href,onClick:Oe.userProps.onClick,className:Fe,title:Ie},Ie)},id:"column-name",field:G.name,Header:()=>n.createElement("div",{className:le.headerNameStyle},"Name"),width:ke}),oe-=ke,ke=R,Q.push(D(G.kind,G.panel_type,ke,le)),oe-=ke,G.ds_uid&&ee&&(ke=Math.min(oe/2.5,A),Q.push(F(G.ds_uid,ke,le.typeIcon,le.datasourceItem,le.invalidDatasourceItem,ee)),oe-=ke);const He=!se||N(J.view.fields.tags),ue=J.view.dataFrame.meta?.custom;if(ue?.locationInfo&&oe>0&&(ke=He?Math.max(oe/1.75,300):oe,oe-=ke,Q.push({Cell:Oe=>{const Fe=(G.location?.values.get(Oe.row.index)??"").split("/");return n.createElement("div",{...Oe.cellProps,className:(0,t.cx)(le.locationCellStyle)},Fe.map(Ie=>{const we=ue.locationInfo[Ie];return we?n.createElement("a",{key:Ie,href:we.url,className:le.locationItem},n.createElement(u.J,{name:I(we.kind)})," ",we.name):n.createElement("span",{key:Ie},Ie)}))},id:"column-location",field:G.location??G.url,Header:"Location",width:ke})),oe>0&&He&&Q.push(Y(G.tags,oe,le.tagList,pe)),Be&&de){const Oe=Be.display??(0,m.U)({field:Be,theme:h.v.theme2});Q.push({Header:()=>n.createElement("div",{className:le.sortedHeader},(0,d.C)(Be)),Cell:Fe=>n.createElement("div",{...Fe.cellProps,className:le.sortedItems},j({sortField:Be,getDisplay:Oe,index:Fe.row.index,kind:G.kind})),id:"column-sort-field",field:Be,width:de})}if(G.explain&&G.score){const Oe=G.score.values,Fe=Ie=>{E.Z.publish(new b.Dn({component:w,props:{name:G.name.values.get(Ie),explain:G.explain.values.get(Ie),frame:J.view.dataFrame,row:Ie}}))};Q.push({Header:()=>n.createElement("div",{className:le.sortedHeader},"Score"),Cell:Ie=>n.createElement("div",{...Ie.cellProps,className:le.explainItem,onClick:()=>Fe(Ie.row.index)},Oe.get(Ie.row.index)),id:"column-score-field",field:G.score,width:100})}return Q};function I(J){return J==="dashboard"?"apps":J==="folder"?"folder":"question-circle"}function N(J){for(let oe=0;oe<J.values.length;oe++)if(J.values.get(oe)!=null)return!0;return!1}function F(J,oe,Ee,me,re,le){const pe=(0,y.F)();return{id:"column-datasource",field:J,Header:"Data source",Cell:ee=>{const se=J.values.get(ee.row.index);return se?.length?n.createElement("div",{...ee.cellProps,className:(0,t.cx)(me)},se.map((Q,G)=>{const q=pe.getInstanceSettings(Q),X=q?.meta?.info?.logos?.small;return X?n.createElement("span",{key:G,onClick:de=>{de.stopPropagation(),de.preventDefault(),le(q.uid)}},n.createElement("img",{src:X,alt:"",width:14,height:14,title:q.type,className:Ee}),q.name):n.createElement("span",{className:re,key:G},Q)})):null},width:oe}}function D(J,oe,Ee,me){return{id:"column-type",field:J??oe,Header:"Type",Cell:re=>{const le=re.row.index,pe=J?.values.get(le)??"dashboard";let ee="apps",se="Dashboard";if(pe)switch(se=pe,se){case"dashboard":se="Dashboard";break;case"folder":ee="folder",se="Folder";break;case"panel":ee=`${C.Co.panel}`;const Q=oe.values.get(le);if(Q){se=Q;const G=h.v.panels[se];if(G?.name)se=G.name;else switch(Q){case"row":se="Row",ee="bars";break;case"singlestat":se="Singlestat";break;default:ee="question-circle"}}break}return n.createElement("div",{...re.cellProps,className:me.typeText},n.createElement(u.J,{name:ee,size:"sm",title:se,className:me.typeIcon}),se)},width:Ee}}function Y(J,oe,Ee,me){return{Cell:re=>{const le=J.values.get(re.row.index);return le?n.createElement("div",{...re.cellProps},n.createElement(P.P,{className:Ee,tags:le,onClick:me})):null},id:"column-tags",field:J,Header:"Tags",width:oe}}function j({kind:J,sortField:oe,index:Ee,getDisplay:me}){const re=oe.values.get(Ee);return["folder","panel"].includes(J.values.get(Ee))&&re===0?"-":(0,p.zc)(me(re))}const K=36,z=n.memo(({response:J,width:oe,height:Ee,selection:me,selectionToggle:re,clearSelection:le,onTagSelected:pe,onDatasourceChange:ee,onClickItem:se,keyboardEvents:Q})=>{const G=(0,g.wW)(Z),q=(0,g.wW)(ae),X=(0,g.wW)(o.V),de=(0,n.useRef)(null),[Be,ke]=(0,n.useState)(null),He=(0,l.v)(Q,0,J),ue=(0,n.useMemo)(()=>J?.view?.dataFrame.fields.length?Array(J.totalRows).fill(0):[],[J]);(0,n.useEffect)(()=>{de.current&&de.current.resetloadMoreItemsCache(),Be&&Be.scrollTo(0)},[ue,Be]);const Oe=(0,n.useMemo)(()=>U(J,oe,me,re,le,q,pe,ee,J.view?.length>=J.totalRows),[J,oe,q,me,re,le,pe,ee]),Fe=(0,n.useMemo)(()=>({columns:Oe,data:ue}),[Oe,ue]),{getTableProps:Ie,getTableBodyProps:we,headerGroups:Re,rows:_e,prepareRow:et}=(0,c.useTable)(Fe,c.useAbsoluteLayout),qe=(0,n.useCallback)(({index:Je,style:lt})=>{const at=_e[Je];et(at);const Xe=J.view.fields.url?.values.get(Je);let gt=G.rowContainer;return Je===He.y&&(gt+=" "+G.selectedRow),n.createElement("div",{...at.getRowProps({style:lt}),className:gt},at.cells.map((ot,Ye)=>n.createElement(f.p,{key:Ye,tableStyles:X,cell:ot,columnIndex:Ye,columnCount:at.cells.length,userProps:{href:Xe,onClick:se}})))},[_e,et,J.view.fields.url?.values,He,G,X,se]);return _e.length?n.createElement("div",{...Ie(),"aria-label":"Search results table",role:"table"},n.createElement("div",null,Re.map(Je=>{const{key:lt,...at}=Je.getHeaderGroupProps();return n.createElement("div",{key:lt,...at,className:G.headerRow},Je.headers.map(Xe=>{const{key:gt,...ot}=Xe.getHeaderProps();return n.createElement("div",{key:gt,...ot,role:"columnheader",className:G.headerCell},Xe.render("Header"))}))})),n.createElement("div",{...we()},n.createElement(r.Z,{ref:de,isItemLoaded:J.isItemLoaded,itemCount:_e.length,loadMoreItems:J.loadMoreItems},({onItemsRendered:Je,ref:lt})=>n.createElement(s.t7,{ref:at=>{lt(at),ke(at)},onItemsRendered:Je,height:Ee-K,itemCount:_e.length,itemSize:X.rowHeight,width:"100%",style:{overflow:"hidden auto"}},qe)))):n.createElement("div",{className:G.noData},"No data")});z.displayName="SearchResultsTable";const Z=J=>{const oe=J.colors.emphasize(J.colors.background.primary,.03);return{noData:t.css`
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
    `,headerCell:t.css`
      padding: ${J.spacing(1)};
    `,headerRow:t.css`
      background-color: ${J.colors.background.secondary};
      height: ${K}px;
      align-items: center;
    `,selectedRow:t.css`
      background-color: ${oe};
      box-shadow: inset 3px 0px ${J.colors.primary.border};
    `,rowContainer:t.css`
      label: row;
      &:hover {
        background-color: ${oe};
      }

      &:not(:hover) div[role='cell'] {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
    `}},ae=J=>({nameCellStyle:t.css`
      border-right: none;
      padding: ${J.spacing(1)} ${J.spacing(1)} ${J.spacing(1)} ${J.spacing(2)};
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      &:hover {
        box-shadow: none;
      }
    `,headerNameStyle:t.css`
      padding-left: ${J.spacing(1)};
    `,typeIcon:t.css`
      margin-left: 5px;
      margin-right: 9.5px;
      vertical-align: middle;
      display: inline-block;
      margin-bottom: ${J.v1.spacing.xxs};
      fill: ${J.colors.text.secondary};
    `,datasourceItem:t.css`
      span {
        &:hover {
          color: ${J.colors.text.link};
        }
      }
    `,missingTitleText:t.css`
      color: ${J.colors.text.disabled};
      font-style: italic;
    `,invalidDatasourceItem:t.css`
      color: ${J.colors.error.main};
      text-decoration: line-through;
    `,typeText:t.css`
      color: ${J.colors.text.secondary};
      padding-top: ${J.spacing(1)};
    `,locationItem:t.css`
      color: ${J.colors.text.secondary};
      margin-right: 12px;
    `,sortedHeader:t.css`
      text-align: right;
      padding-right: ${J.spacing(2)};
    `,sortedItems:t.css`
      text-align: right;
      padding: ${J.spacing(1)} ${J.spacing(3)} ${J.spacing(1)} ${J.spacing(1)};
    `,explainItem:t.css`
      text-align: right;
      padding: ${J.spacing(1)} ${J.spacing(3)} ${J.spacing(1)} ${J.spacing(1)};
      cursor: pointer;
    `,locationCellStyle:t.css`
      padding-top: ${J.spacing(1)};
      padding-right: ${J.spacing(1)};
    `,checkboxHeader:t.css`
      margin-left: 2px;
    `,checkbox:t.css`
      margin-left: 10px;
      margin-right: 10px;
      margin-top: 5px;
    `,tagList:t.css`
      padding-top: ${J.spacing(.5)};
      justify-content: flex-start;
      flex-wrap: nowrap;
    `})},71897:(H,T,e)=>{"use strict";e.d(T,{Z:()=>et});var t=e(52423),n=e(68404),c=e(70197),s=e(89050),r=e(72648),g=e(67487),f=e(31403),o=e(69142),l=e(35645),a=e(45253);const m=({text:Je})=>n.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},Je),d=({requiredImageRendererPluginVersion:Je})=>Je?n.createElement(n.Fragment,null,"You must update the ",n.createElement(m,{text:"Grafana image renderer plugin"})," to version"," ",Je," to enable dashboard previews. Please contact your Grafana administrator to update the plugin."):n.createElement(n.Fragment,null,"You must install the ",n.createElement(m,{text:"Grafana image renderer plugin"})," to enable dashboard previews. Please contact your Grafana administrator to install the plugin."),p=({showPreviews:Je,onRemove:lt,topSpacing:at,bottomSpacing:Xe})=>{const gt=(0,r.wW)(h),ot=l.v.featureToggles.dashboardPreviews,Ye=l.v.rendererAvailable,{systemRequirements:{met:mt,requiredImageRendererPluginVersion:ce},thumbnailsExist:be}=l.v.dashboardPreviews,ge=ot&&Je&&!(Ye&&mt||be),Me=ce?"Image renderer plugin needs to be updated":"Image renderer plugin not installed";return n.createElement(n.Fragment,null,ge&&n.createElement("div",{className:gt.wrapper},n.createElement(a.b,{className:gt.alert,topSpacing:at,bottomSpacing:Xe,severity:"info",title:Me,onRemove:lt},n.createElement(d,{requiredImageRendererPluginVersion:ce}))))},h=()=>({wrapper:t.css`
      display: flex;
      justify-content: center;
    `,alert:t.css`
      max-width: 800px;
    `});var y=e(64823),v=e(66757),i=e(1037);function u(){const Je=new Map;return{items:Je,isSelected:(at,Xe)=>Boolean(Je.get(at)?.has(Xe))}}function P(Je,lt,at,Xe){const gt=Je.items;if(Xe.length){const ot=gt.get(at);if(ot){for(const Ye of Xe)lt?ot.add(Ye):ot.delete(Ye);ot.size<1&&gt.delete(at)}else lt&&gt.set(at,new Set(Xe))}return{items:gt,isSelected:(ot,Ye)=>{if(Ye==="*"){if(ot==="*"){for(const mt of gt.keys())if(gt.get(mt)?.size)return!0;return!1}return Boolean(gt.get(ot)?.size)}return Boolean(gt.get(ot)?.has(Ye))}}}var E=e(52081),C=e(58255),b=e(2594),S=e(79979),M=e(24357);const x=[{value:i.A.Folders,icon:"folder",ariaLabel:"View by folders"},{value:i.A.List,icon:"list-ul",ariaLabel:"View as list"}];l.v.featureToggles.dashboardPreviews&&x.push({value:i.A.Grid,icon:"apps",ariaLabel:"Grid view"});function O(Je){const lt=Je.layout??i.A.Folders;return lt===i.A.Folders&&(Je.query||Je.sort||Je.starred||Je.tag.length>0)||lt===i.A.Grid&&!l.v.featureToggles.dashboardPreviews?i.A.List:lt}const L=({onLayoutChange:Je,onSortChange:lt,onStarredFilterChange:at=()=>{},onTagFilterChange:Xe,getTagOptions:gt,getSortOptions:ot,sortPlaceholder:Ye,onDatasourceChange:mt,onSetIncludePanels:ce,state:be,showStarredFilter:Te,hideLayout:Ke})=>{const ge=(0,r.wW)(B),Me=O(be),ye=be.query?[i.A.Folders]:[];return n.createElement("div",{className:ge.actionRow},n.createElement(E.Lh,{spacing:"md",width:"auto"},n.createElement(M.D,{isClearable:!1,tags:be.tag,tagOptions:gt,onChange:Xe}),l.v.featureToggles.panelTitleSearch&&n.createElement(C.X,{"data-testid":"include-panels",disabled:Me===i.A.Folders,value:be.includePanels,onChange:()=>ce(!be.includePanels),label:"Include panels"}),Te&&n.createElement("div",{className:ge.checkboxWrapper},n.createElement(C.X,{label:"Starred",onChange:at,value:be.starred})),be.datasource&&n.createElement(f.zx,{icon:"times",variant:"secondary",onClick:()=>mt(void 0)},"Datasource: ",be.datasource)),n.createElement("div",{className:ge.rowContainer},n.createElement(E.Lh,{spacing:"md",width:"auto"},!Ke&&n.createElement(b.S,{options:x,disabledOptions:ye,onChange:Je,value:Me}),n.createElement(S.P,{onChange:fe=>lt(fe?.value),value:be.sort,getSortOptions:ot,placeholder:Ye||"Sort",isClearable:!0}))))};L.displayName="ActionRow";const B=Je=>({actionRow:t.css`
      display: none;

      ${Je.breakpoints.up("md")} {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-bottom: ${Je.spacing(2)};
        width: 100%;
      }
    `,rowContainer:t.css`
      margin-right: ${Je.v1.spacing.md};
    `,checkboxWrapper:t.css`
      label {
        line-height: 1.2;
      }
    `});var w=e(24664),R=e(22350),A=e(68183),U=e(72948),I=e(20941),N=e(39904),F=e(63053),D=e(56991),Y=e(30506);const j=({section:Je,selectionToggle:lt,onClickItem:at,onTagSelected:Xe,selection:gt,renderStandaloneBody:ot,tags:Ye})=>{const mt=lt!=null,ce=(0,r.wW)((0,n.useCallback)(Ae=>K(Ae,Je.selected,mt),[Je.selected,mt])),[be,Te]=(0,w.Z)((0,F.tT)(Je.title),!1),Ke=(0,R.Z)(async()=>{if(!be&&!ot)return Promise.resolve([]);let Ae=Je.uid,Ne=Je.title,Ze={query:"*",kind:["dashboard"],location:Je.uid,sort:"name_sort",limit:1e3};Je.itemsUIDs&&(Ze={uid:Je.itemsUIDs},Ae=void 0,Ne=void 0);const Se=await(0,y.getGrafanaSearcher)().search({...Ze,tags:Ye});return Se.view.map(Qe=>({uid:Qe.uid,title:Qe.name,url:Qe.url,uri:Qe.url,type:Qe.kind==="folder"?i.o.DashFolder:i.o.DashDB,id:666,isStarred:!1,tags:Qe.tags??[],folderUid:Ae||Qe.location,folderTitle:Ne||Se.view.dataFrame.meta?.custom?.locationInfo[Qe.location].name}))},[be,Ye]),ge=()=>{Te(!be)},Me=Ae=>{if(Ae.preventDefault(),Ae.stopPropagation(),lt&&gt){const Ne=!gt(Je.kind,Je.uid);lt(Je.kind,Je.uid);const Ze=Ke.value??[];for(const Se of Ze)gt("dashboard",Se.uid)!==Ne&&lt("dashboard",Se.uid)}},fe=`section-header-label-${(0,D.L)()}`;let he=Je.icon;he||(he=be?"folder-open":"folder");const De=()=>{if(Ke.value){if(Ke.value.length===0&&!Ke.loading)return n.createElement(U.Z,null,n.createElement(U.Z.Heading,null,"No results found"))}else return null;return Ke.value.map(Ae=>{if(gt&&lt){const Ne=Ae.type===i.o.DashFolder?"folder":"dashboard";Ae={...Ae,checked:gt(Ne,Ae.uid)}}return n.createElement(Y.T,{key:Ae.uid,item:Ae,onTagSelected:Xe,onToggleChecked:Ne=>{lt&&lt("dashboard",Ne.uid)},editable:Boolean(gt!=null),onClickItem:at})})};return ot?n.createElement("div",{className:ce.folderViewResults},!Ke.value?.length&&Ke.loading?n.createElement(g.$,{className:ce.spinner}):De()):n.createElement(I.s,{headerDataTestId:A.wl.components.Search.folderHeader(Je.title),contentDataTestId:A.wl.components.Search.folderContent(Je.title),isOpen:be??!1,onToggle:ge,className:ce.wrapper,contentClassName:ce.content,loading:Ke.loading,labelId:fe,label:n.createElement(n.Fragment,null,lt&&gt&&n.createElement("div",{onClick:Me},n.createElement(C.X,{value:gt(Je.kind,Je.uid),"aria-label":"Select folder"})),n.createElement("div",{className:ce.icon},n.createElement(N.J,{name:he})),n.createElement("div",{className:ce.text},n.createElement("span",{id:fe},Je.title),Je.url&&Je.uid!=="general"&&n.createElement("a",{href:Je.url,className:ce.link},n.createElement("span",{className:ce.separator},"|")," ",n.createElement(N.J,{name:"folder-upload"})," Go to folder")))},Ke.value&&n.createElement("ul",{className:ce.sectionItems},De()))},K=(Je,lt=!1,at)=>{const Xe=Je.spacing(1);return{wrapper:(0,t.cx)(t.css`
        align-items: center;
        font-size: ${Je.typography.size.base};
        padding: 12px;
        border-bottom: none;
        color: ${Je.colors.text.secondary};
        z-index: 1;

        &:hover,
        &.selected {
          color: ${Je.colors.text};
        }

        &:hover,
        &:focus-visible,
        &:focus-within {
          a {
            opacity: 1;
          }
        }
      `,"pointer",{selected:lt}),sectionItems:t.css`
      margin: 0 24px 0 32px;
    `,icon:t.css`
      padding: 0 ${Xe} 0 ${at?0:Xe};
    `,folderViewResults:t.css`
      overflow: auto;
    `,text:t.css`
      flex-grow: 1;
      line-height: 24px;
    `,link:t.css`
      padding: 2px 10px 0;
      color: ${Je.colors.text.secondary};
      opacity: 0;
      transition: opacity 150ms ease-in-out;
    `,separator:t.css`
      margin-right: 6px;
    `,content:t.css`
      padding-top: 0px;
      padding-bottom: 0px;
    `,spinner:t.css`
      display: grid;
      place-content: center;
      padding-bottom: 1rem;
    `}};var z=e(54899),Z=e(82002),ae=e(13019),J=e(10216);const oe=({selection:Je,selectionToggle:lt,onTagSelected:at,tags:Xe,hidePseudoFolders:gt,onClickItem:ot})=>{const Ye=(0,r.wW)(Ee),mt=(0,R.Z)(async()=>{const be=[];if(!gt){if(Z.Vt.isSignedIn){const Me=await(0,z.i)().get("api/user/stars");Me.length>0&&be.push({title:"Starred",icon:"star",kind:"query-star",uid:"__starred",itemsUIDs:Me})}const ge=await ae.Z.getDashboardOpened();ge.length&&be.push({title:"Recent",icon:"clock-nine",kind:"query-recent",uid:"__recent",itemsUIDs:ge})}be.push({title:"General",url:"/dashboards",kind:"folder",uid:J.YQ});const Te=(0,y.getGrafanaSearcher)(),Ke=await Te.search({query:"*",kind:["folder"],sort:Te.getFolderViewSort(),limit:1e3});for(const ge of Ke.view)be.push({title:ge.name,url:ge.url,uid:ge.uid,kind:ge.kind});return be},[]),ce=()=>mt.loading?n.createElement(g.$,{className:Ye.spinner}):mt.value?mt.value.map(be=>n.createElement("div",{"data-testid":A.wl.components.Search.sectionV2,className:Ye.section,key:be.title},be.title&&n.createElement(j,{selection:Je,selectionToggle:lt,onTagSelected:at,section:be,tags:Xe,onClickItem:ot}))):n.createElement(a.b,{className:Ye.error,title:mt.error?mt.error.message:"Something went wrong"});return n.createElement("div",{className:Ye.wrapper},ce())},Ee=Je=>({wrapper:t.css`
      display: flex;
      flex-direction: column;
      overflow: auto;

      > ul {
        list-style: none;
      }

      border: solid 1px ${Je.v1.colors.border2};
    `,section:t.css`
      display: flex;
      flex-direction: column;
      background: ${Je.v1.colors.panelBg};

      &:not(:last-child) {
        border-bottom: solid 1px ${Je.v1.colors.border2};
      }
    `,spinner:t.css`
      align-items: center;
      display: flex;
      justify-content: center;
      min-height: 100px;
    `,error:t.css`
      margin: ${Je.spacing(4)} auto;
    `});var me=e(8180),re=e(98102),le=e(50946);const pe=({results:Je,onDeleteItems:lt,isOpen:at,onDismiss:Xe})=>{const gt=(0,r.wW)(ee),ot=Array.from(Je.get("dashboard")??[]),Ye=Array.from(Je.get("folder")??[]),mt=Ye.length,ce=ot.length;let be="Do you want to delete the ",Te;const Ke=ce===1?"":"s",ge=mt===1?"":"s";mt>0&&ce>0?(be+=`selected folder${ge} and dashboard${Ke}?
`,Te=`All dashboards and alerts of the selected folder${ge} will also be deleted`):mt>0?be+=`selected folder${ge} and all ${mt===1?"its":"their"} dashboards and alerts?`:be+=`${ce} selected dashboard${Ke}?`;const Me=()=>{(0,le.Fd)(Ye,ot).then(()=>{lt(),Xe()})};return at?n.createElement(re.s,{isOpen:at,title:"Delete",body:n.createElement(n.Fragment,null,be," ",Te&&n.createElement("div",{className:gt.subtitle},Te)),confirmText:"Delete",onConfirm:Me,onDismiss:Xe}):null},ee=Je=>({subtitle:t.css`
    font-size: ${Je.typography.fontSize}px;
    padding-top: ${Je.spacing(2)};
  `});var se=e(35029),Q=e(79658),G=e(60499);const q=({results:Je,onMoveItems:lt,isOpen:at,onDismiss:Xe})=>{const[gt,ot]=(0,n.useState)(null),Ye=(0,r.wW)(X),mt=(0,G.iG)(),ce=Array.from(Je.get("dashboard")??[]),[be,Te]=(0,n.useState)(!1),Ke=()=>{if(gt&&ce.length){const ge=gt.title??"General";Te(!0),(0,le.ct)(ce,gt).then(Me=>{if(Me.successCount>0){const ye=Me.successCount===1?"":"s",fe=`Dashboard${ye} Moved`,he=`${Me.successCount} dashboard${ye} moved to ${ge}`;mt.success(fe,he)}Me.totalCount===Me.alreadyInFolderCount?mt.error("Error",`Dashboard already belongs to folder ${ge}`):lt(),Te(!1),Xe()})}};return at?n.createElement(se.u,{className:Ye.modal,title:"Choose Dashboard Folder",icon:"folder-plus",isOpen:at,onDismiss:Xe},n.createElement(n.Fragment,null,n.createElement("div",{className:Ye.content},n.createElement("p",null,"Move the ",ce.length," selected dashboard",ce.length===1?"":"s"," to the following folder:"),n.createElement(Q.Es,{onChange:ge=>ot(ge)})),n.createElement(E.Lh,{justify:"center"},n.createElement(f.zx,{icon:be?"fa fa-spinner":void 0,variant:"primary",onClick:Ke},"Move"),n.createElement(f.zx,{variant:"secondary",onClick:Xe},"Cancel")))):null},X=Je=>({modal:t.css`
      width: 500px;
    `,content:t.css`
      margin-bottom: ${Je.spacing(3)};
    `});function de({items:Je,folder:lt,onChange:at,clearSelection:Xe}){const gt=(0,r.wW)(B),ot=lt?.canSave,Ye=lt?ot:Z.Vt.hasEditPermissionInFolders,mt=Ye,be=Array.from(Je.get("folder")??[]).find(De=>De===J.YQ),Te=Ye&&!be,[Ke,ge]=(0,n.useState)(!1),[Me,ye]=(0,n.useState)(!1),fe=()=>{ge(!0)},he=()=>{ye(!0)};return n.createElement("div",{className:gt.actionRow,"data-testid":"manage-actions"},n.createElement("div",{className:gt.rowContainer},n.createElement(E.Lh,{spacing:"md",width:"auto"},n.createElement(me.h,{name:"check-square",onClick:Xe,title:"Uncheck everything"}),n.createElement(f.zx,{disabled:!mt,onClick:fe,icon:"exchange-alt",variant:"secondary"},"Move"),n.createElement(f.zx,{disabled:!Te,onClick:he,icon:"trash-alt",variant:"destructive"},"Delete"))),n.createElement(pe,{onDeleteItems:at,results:Je,isOpen:Me,onDismiss:()=>ye(!1)}),n.createElement(q,{onMoveItems:at,results:Je,isOpen:Ke,onDismiss:()=>ge(!1)}))}var Be=e(75478),ke=e(47535),He=e(81029),ue=e(54350);const Oe=n.memo(({response:Je,width:lt,height:at,selection:Xe,selectionToggle:gt,onTagSelected:ot,keyboardEvents:Ye,onClickItem:mt})=>{const ce=(0,r.wW)(Fe),be=(0,n.useRef)(null),[Te,Ke]=(0,n.useState)(null),ge=(0,ue.v)(Ye,0,Je);(0,n.useEffect)(()=>{be.current&&be.current.resetloadMoreItemsCache(),Te&&Te.scrollTo(0)},[Je,Te]);const Me=(0,n.useCallback)(({index:ye,style:fe})=>{const he=Je.view.dataFrame.meta?.custom;let De="";ye===ge.y&&(De+=" "+ce.selectedRow);const Ae=Je.view.get(ye);let Ne={uid:Ae.uid,title:Ae.name,url:Ae.url,uri:Ae.url,type:Ae.kind==="folder"?i.o.DashFolder:i.o.DashDB,id:666,isStarred:!1,tags:Ae.tags??[]};if(Ae.location){const Ze=Ae.location.split("/")[0],Se=he.locationInfo[Ze];Se&&(Ne.folderUid=Ae.location,Ne.folderTitle=Se.name)}if(Xe&&gt){const Ze=Ne.type===i.o.DashFolder?"folder":"dashboard";Ne={...Ne,checked:Xe(Ze,Ne.uid)}}return n.createElement("div",{style:fe,key:Ae.uid,className:De,role:"row"},n.createElement(He.T,{item:Ne,onTagSelected:ot,onToggleChecked:Ze=>{gt&&gt("dashboard",Ze.uid)},editable:Boolean(Xe!=null),onClickItem:mt}))},[Je.view,ge,ce,ot,Xe,gt,mt]);return Je.totalRows?n.createElement("div",{"aria-label":"Search results list",style:{width:lt},role:"list"},n.createElement(ke.Z,{ref:be,isItemLoaded:Je.isItemLoaded,itemCount:Je.totalRows,loadMoreItems:Je.loadMoreItems},({onItemsRendered:ye,ref:fe})=>n.createElement(Be.t7,{ref:he=>{fe(he),Ke(he)},onItemsRendered:ye,height:at,itemCount:Je.totalRows,itemSize:72,width:"100%",style:{overflow:"hidden auto"}},Me))):n.createElement("div",{className:ce.noData,style:{width:lt}},"No data")});Oe.displayName="SearchResultsCards";const Fe=Je=>({noData:t.css`
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
    `,selectedRow:t.css`
      border-left: 3px solid ${Je.colors.primary.border};
    `});var Ie=e(43993);const we=({response:Je,width:lt,height:at,selection:Xe,selectionToggle:gt,onTagSelected:ot,onClickItem:Ye,keyboardEvents:mt})=>{const ce=(0,r.wW)(Re),be={editable:Xe!=null,onToggleChecked:De=>{const Ae=De,Ne=Ae.type===i.o.DashFolder?"folder":"dashboard";gt&&gt(Ne,Ae.uid)},onTagSelected:ot,onClick:Ye},Te=Je.totalRows??Je.view.length,Ke=Je.view,ge=Math.ceil(lt/320),Me=lt/ge,ye=(Me-64)*.75+56+8,fe=Math.ceil(Te/ge),he=(0,ue.v)(mt,ge,Je);return n.createElement(ke.Z,{isItemLoaded:Je.isItemLoaded,itemCount:Te,loadMoreItems:Je.loadMoreItems},({onItemsRendered:De,ref:Ae})=>n.createElement(Be.Ym,{ref:Ae,onItemsRendered:Ne=>{De({visibleStartIndex:Ne.visibleRowStartIndex*ge,visibleStopIndex:Ne.visibleRowStopIndex*ge,overscanStartIndex:Ne.overscanRowStartIndex*ge,overscanStopIndex:Ne.overscanColumnStopIndex*ge})},columnCount:ge,columnWidth:Me,rowCount:fe,rowHeight:ye,className:ce.wrapper,innerElementType:"ul",height:at,width:lt-2},({columnIndex:Ne,rowIndex:Ze,style:Se})=>{const Ue=Ze*ge+Ne;if(Ue>=Ke.length)return null;const Qe=Ke.get(Ue),pt=Qe.kind??"dashboard",bt={uid:Qe.uid,title:Qe.name,url:Qe.url,uri:Qe.url,type:pt==="folder"?i.o.DashFolder:i.o.DashDB,id:666,isStarred:!1,tags:Qe.tags??[],checked:Xe?Xe(pt,Qe.uid):!1};if(pt==="panel"){const Mt=Qe.panel_type;if(bt.icon="public/img/icons/unicons/graph-bar.svg",Mt){const At=l.v.panels[Mt];if(At?.name){const Pt=At.info?.logos.small;Pt&&Pt.endsWith(".svg")&&(bt.icon=Pt)}}}let yt=ce.virtualizedGridItemWrapper;return Ze===he.y&&Ne===he.x&&(yt+=" "+ce.selectedItem),Qe?n.createElement("li",{style:Se,className:yt},n.createElement(Ie.K,{key:Qe.uid,...be,item:bt})):null}))},Re=Je=>({virtualizedGridItemWrapper:t.css`
    padding: 4px;
  `,wrapper:t.css`
    display: flex;
    flex-direction: column;

    > ul {
      list-style: none;
    }
  `,selectedItem:t.css`
    box-shadow: inset 1px 1px 3px 3px ${Je.colors.primary.border};
  `});var _e=e(16526);const et=({showManage:Je,folderDTO:lt,hidePseudoFolders:at,keyboardEvents:Xe})=>{const gt=(0,r.wW)(qe),ot=(0,v.hD)(),Ye=ot.useState(),[mt,ce]=(0,n.useState)(u()),be=O(Ye),Te=be===i.A.Folders,[Ke,ge]=(0,n.useState)(Date.now());(0,c.Z)(ot.onReportSearchUsage,1e3,[]);const Me=(0,n.useCallback)(()=>{mt.items.clear(),ce({...mt})},[mt]),ye=(0,n.useCallback)((De,Ae)=>{const Ne=mt.isSelected(De,Ae);ce(P(mt,!Ne,De,[Ae]))},[mt]),fe=async()=>{Me(),ge(Date.now()),ot.onQueryChange(Ye.query)},he=()=>{const De=Ye.result;if((!De||!De.totalRows)&&!Te)return Ye.loading&&!De?n.createElement(g.$,null):n.createElement("div",{className:gt.noResults},n.createElement("div",null,"No results found for your query."),n.createElement("br",null),n.createElement(f.zx,{variant:"secondary",onClick:()=>{Ye.query&&ot.onQueryChange(""),Ye.tag?.length&&ot.onTagFilterChange([]),Ye.datasource&&ot.onDatasourceChange(void 0)}},"Clear search and filters"));const Ae=Je?mt.isSelected:void 0;return be===i.A.Folders?lt?n.createElement(j,{section:{uid:lt.uid,kind:"folder",title:lt.title},selection:Ae,selectionToggle:ye,onTagSelected:ot.onAddTag,renderStandaloneBody:!0,tags:Ye.tag,key:Ke,onClickItem:ot.onSearchItemClicked}):n.createElement(oe,{key:Ke,selection:Ae,selectionToggle:ye,tags:Ye.tag,onTagSelected:ot.onAddTag,hidePseudoFolders:at,onClickItem:ot.onSearchItemClicked}):n.createElement("div",{style:{height:"100%",width:"100%"}},n.createElement(s.Z,null,({width:Ne,height:Ze})=>{const Se={response:De,selection:Ae,selectionToggle:ye,clearSelection:Me,width:Ne,height:Ze,onTagSelected:ot.onAddTag,keyboardEvents:Xe,onDatasourceChange:Ye.datasource?ot.onDatasourceChange:void 0,onClickItem:ot.onSearchItemClicked};return be===i.A.Grid?n.createElement(we,{...Se}):Ne<800?n.createElement(Oe,{...Se}):n.createElement(_e.Q,{...Se})}))};return lt&&!Ye.loading&&!Ye.result?.totalRows&&!ot.hasSearchFilters()?n.createElement(o.Z,{title:"This folder doesn't have any dashboards yet",buttonIcon:"plus",buttonTitle:"Create Dashboard",buttonLink:`dashboard/new?folderUid=${lt.uid}`,proTip:"Add/move dashboards to your folder at ->",proTipLink:"dashboards",proTipLinkTitle:"Manage dashboards",proTipTarget:""}):n.createElement(n.Fragment,null,Boolean(mt.items.size>0)?n.createElement(de,{items:mt.items,onChange:fe,clearSelection:Me}):n.createElement(L,{onLayoutChange:ot.onLayoutChange,showStarredFilter:at,onStarredFilterChange:at?ot.onStarredFilterChange:void 0,onSortChange:ot.onSortChange,onTagFilterChange:ot.onTagFilterChange,getTagOptions:ot.getTagOptions,getSortOptions:(0,y.getGrafanaSearcher)().getSortOptions,sortPlaceholder:(0,y.getGrafanaSearcher)().sortPlaceholder,onDatasourceChange:ot.onDatasourceChange,state:Ye,includePanels:Ye.includePanels,onSetIncludePanels:ot.onSetIncludePanels}),be===i.A.Grid&&n.createElement(p,{bottomSpacing:3,showPreviews:!0,onRemove:()=>ot.onLayoutChange(i.A.List)}),he())},qe=Je=>({searchInput:t.css`
    margin-bottom: 6px;
    min-height: ${Je.spacing(4)};
  `,unsupported:t.css`
    padding: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    font-size: 18px;
  `,noResults:t.css`
    padding: ${Je.v1.spacing.md};
    background: ${Je.v1.colors.bg2};
    font-style: italic;
    margin-top: ${Je.v1.spacing.md};
  `})},72809:(H,T,e)=>{"use strict";e.d(T,{Jy:()=>g,Nw:()=>o,OY:()=>r,Qw:()=>s,TP:()=>f});var t=e(41818),n=e(35645),c=e(1037);const s=(a,m)=>{(0,t.ff)(`${a}_viewed`,l(m))},r=(a,m)=>{(0,t.ff)(`${a}_result_clicked`,l(m))},g=(a,m)=>{(0,t.ff)(`${a}_query_submitted`,l(m))},f=(a,{error:m,...d})=>{(0,t.ff)(`${a}_query_failed`,{...l(d),error:m})},o=(a,m,d)=>{(0,t.ff)(`grafana_panel_inspect_${a}_${m}_clicked`,d)},l=a=>{const m=a.layout===c.A.Grid;return{previews:Boolean(n.v.featureToggles.panelTitleSearch)?m?"on":"off":"feature_disabled",layout:a.layout,starredFilter:a.starred??!1,sort:a.sortValue??"",tagCount:a.tagCount??0,queryLength:a.query?.length??0,includePanels:a.includePanels??!1}}},64823:(H,T,e)=>{"use strict";e.d(T,{getGrafanaSearcher:()=>R});var t=e(35645),n=e(50235),c=e(16911),s=e(36512),r=e(54899),g=e(9398);async function f(A){return A.query&&A.query.indexOf("folder:current")>=0&&(A={...A,location:await o(),query:A.query.replace("folder:current","").trim()},A.query?.length||(A.query="*")),Promise.resolve(A)}async function o(){try{let A=(0,g.h4)().getCurrent();return A||(await l(500),A=(0,g.h4)().getCurrent()),Promise.resolve(A?.meta?.folderUid)}catch(A){console.error(A)}}function l(A){return new Promise(U=>setTimeout(U,A))}const a="Loading",m="api/search-v2",d="name_sort";class p{constructor(U){this.fallbackSearcher=U}async search(U){if(U.facet?.length)throw new Error("facets not supported!");return this.doSearchQuery(U)}async starred(U){if(U.facet?.length)throw new Error("facets not supported!");const I=await(0,r.i)().get("api/user/stars");return I?.length?this.doSearchQuery({uid:I,query:U.query??"*"}):{view:new n.U({length:0,fields:[]}),totalRows:0,loadMoreItems:async(N,F)=>{},isItemLoaded:N=>!0}}async tags(U){const I={...U,query:U.query??"*",sort:void 0,facet:[{field:"tag"}],limit:1},F=(await(0,r.i)().post(m,I)).frames.map(D=>(0,c.g0)(D));if(F[0]?.name===a)return this.fallbackSearcher.tags(U);for(const D of F)if(D.fields[0].name==="tag")return v(D);return[]}getSortOptions(){const U=[{value:d,label:"Alphabetically (A-Z)"},{value:"-name_sort",label:"Alphabetically (Z-A)"}];if(t.v.licenseInfo.enabledFeatures.analytics){for(const I of i)U.push({value:`-${I.name}`,label:`${I.display} (most)`}),U.push({value:`${I.name}`,label:`${I.display} (least)`});for(const I of u)U.push({value:`-${I.name}`,label:`${I.display} (recent)`}),U.push({value:`${I.name}`,label:`${I.display} (oldest)`})}return Promise.resolve(U)}async doSearchQuery(U){U=await f(U);const I={...U,query:U.query??"*",limit:U.limit??h},F=(await(0,r.i)().post(m,I)).frames.map(ae=>(0,c.g0)(ae)),D=F.length?(0,c.g0)(F[0]):{fields:[],length:0};if(D.name===a)return this.fallbackSearcher.search(U);for(const ae of D.fields)ae.display=(0,s.U)({field:ae,theme:t.v.theme2});D.meta?.custom||(D.meta={...D.meta,custom:{count:D.length,max_score:1}});const Y=D.meta.custom;if(Y.locationInfo||(Y.locationInfo={}),Y.sortBy?.length){const ae=D.fields.find(J=>J.name===Y.sortBy);if(ae){const J=P(ae.name);Y.sortBy=J,ae.name=J}}let j=0,K;const z=async()=>{for(;j>Z.dataFrame.length;){const ae=Z.dataFrame.length;if(ae>=Y.count)return;const J=await(0,r.i)().post(m,{...I??{},from:ae,limit:y}),oe=(0,c.g0)(J.frames[0]);if(!oe){console.log("no results",oe);return}if(oe.fields.length!==Z.dataFrame.fields.length){console.log("invalid shape",oe,Z.dataFrame);return}const Ee=oe.length+Z.dataFrame.length;for(let re=0;re<oe.fields.length;re++)Z.dataFrame.fields[re].values.buffer.push(...oe.fields[re].values.toArray());Z.dataFrame.length=Ee;const me=oe.meta?.custom;if(me?.locationInfo&&Y)for(const[re,le]of Object.entries(me.locationInfo))Y.locationInfo[re]=le}K=void 0},Z=new n.U(D);return{totalRows:Y.count??D.length,view:Z,loadMoreItems:async(ae,J)=>(j=Math.max(j,J),K||(K=z()),K),isItemLoaded:ae=>ae<Z.dataFrame.length}}getFolderViewSort(){return"name_sort"}}const h=50,y=100;function v(A){const U=A.fields[0].values,I=A.fields[1].values,N=[];for(let F=0;F<A.length;F++)N.push({term:U.get(F),count:I.get(F)});return N}const i=[{name:"views_total",display:"Views total"},{name:"views_last_30_days",display:"Views 30 days"},{name:"errors_total",display:"Errors total"},{name:"errors_last_30_days",display:"Errors 30 days"}],u=[{name:"created_at",display:"Created time"},{name:"updated_at",display:"Updated time"}];function P(A){for(const U of i)if(U.name===A)return U.display;for(const U of u)if(U.name===A)return U.display;return A}var E=e(12398),C=e(19695);class b{constructor(U){this.parent=U,this.cache=new Map,this.sortPlaceholder="Default (Relevance)"}async search(U){if(U.facet?.length)throw new Error("facets not supported!");if(U.sort!=null)throw new Error("custom sorting is not supported yet");if(U.tags?.length||U.ds_uid?.length)return this.parent.search(U);const N=(await this.getCache(U.kind)).search(U.query);return{isItemLoaded:()=>!0,loadMoreItems:async(F,D)=>{},totalRows:N.length,view:N}}async getCache(U){const I=U?U.sort().join(","):"*",N=this.cache.get(I);if(N)try{return await N}catch{return this.cache.delete(I),new S(new n.U({name:"error",fields:[],length:0}))}const F=this.parent.search({kind:U,limit:5e3}).then(D=>new S(D.view));return this.cache.set(I,F),F}async starred(U){return this.parent.starred(U)}async getSortOptions(){return this.parent.getSortOptions()}async tags(U){return this.parent.tags(U)}getFolderViewSort(){return this.parent.getFolderViewSort()}}class S{constructor(U){this.full=U,this.ufuzzy=new E.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),this.names=this.full.fields.name.values.toArray(),this.empty=new n.U({...this.full.dataFrame,fields:this.full.dataFrame.fields.map(I=>({...I,values:new C.G([])})),length:0})}search(U){if(!U?.length||U==="*")return this.full;const I=this.full.dataFrame.fields,N=this.names,F=I.map(K=>[]),D=new Set,Y=this.ufuzzy.split(U);return E.Z.permute(Y).map(K=>K.join(" ")).forEach(K=>{let z=this.ufuzzy.filter(N,K),Z=this.ufuzzy.info(z,N,K),ae=this.ufuzzy.sort(Z,N,K);for(let J=0;J<ae.length;J++){let oe=Z.idx[ae[J]];if(!D.has(oe)){D.add(oe);for(let Ee=0;Ee<I.length;Ee++)F[Ee].push(I[Ee].values.get(oe))}}}),this.empty.dataFrame.fields.forEach((K,z)=>{K.values=new C.G(F[z])}),this.empty.dataFrame.length=this.empty.dataFrame.fields[0].values.length,this.empty}}var M=e(14582),x=e(29930),O=e(10216),L=e(1037);class B{constructor(){this.locationInfo={general:{kind:"folder",name:"General",url:"/dashboards",folderId:0}},this.getFolderViewSort=()=>""}async composeQuery(U,I){const N=await f(I);if(N.query==="*"?N.kind?.length===1&&O.xb[N.kind[0]]&&(U.type=O.xb[N.kind[0]]):N.query?.length&&(U.query=N.query),N.uid)U.dashboardUID=N.uid;else if(N.location?.length){let F=this.locationInfo[N.location];F||(await this.doAPIQuery({type:L.o.DashFolder,limit:999}),F=this.locationInfo[N.location]),U.folderIds=[F?.folderId??0]}return U}async search(U){if(U.facet?.length)throw new Error("facets not supported!");const I=await this.composeQuery({limit:U.limit??O.E_,tag:U.tags,sort:U.sort},U);return this.doAPIQuery(I)}async starred(U){if(U.facet?.length)throw new Error("facets not supported!");const I=await this.composeQuery({limit:U.limit??O.E_,tag:U.tags,sort:U.sort,starred:U.starred},U);return this.doAPIQuery(I)}async getSortOptions(){return(await x.ae.get("/api/search/sorting")).sortOptions.map(I=>({value:I.name,label:I.displayName}))}async tags(U){return(await x.ae.get("/api/dashboards/tags")).sort((N,F)=>F.count-N.count)}async doAPIQuery(U){const I=await x.ae.get("/api/search",U),N=[],F=[],D=[],Y=[],j=[],K=[],z=[];let Z;for(let oe of I){const Ee=oe.type==="dash-folder"?"folder":"dashboard";N.push(Ee),F.push(oe.title),D.push(oe.uid),Y.push(oe.url),j.push(oe.tags),z.push(oe.sortMeta);let me=oe.folderUid;!me&&Ee==="dashboard"&&(me="general"),K.push(me),oe.sortMetaName?.length&&(Z=oe.sortMetaName),oe.folderUid&&oe.folderTitle?this.locationInfo[oe.folderUid]={kind:"folder",name:oe.folderTitle,url:oe.folderUrl,folderId:oe.folderId}:Ee==="folder"&&(this.locationInfo[oe.uid]={kind:Ee,name:oe.title,url:oe.url,folderId:oe.id})}const ae={fields:[{name:"kind",type:M.fS.string,config:{},values:new C.G(N)},{name:"name",type:M.fS.string,config:{},values:new C.G(F)},{name:"uid",type:M.fS.string,config:{},values:new C.G(D)},{name:"url",type:M.fS.string,config:{},values:new C.G(Y)},{name:"tags",type:M.fS.other,config:{},values:new C.G(j)},{name:"location",type:M.fS.string,config:{},values:new C.G(K)}],length:F.length,meta:{custom:{count:F.length,max_score:1,locationInfo:this.locationInfo}}};Z?.length&&z.length&&(ae.meta.custom.sortBy=Z,ae.fields.push({name:Z,type:M.fS.number,config:{},values:new C.G(z)}));for(const oe of ae.fields)oe.display=(0,s.U)({field:oe,theme:t.v.theme2});const J=new n.U(ae);return{totalRows:ae.length,view:J,loadMoreItems:async(oe,Ee)=>{},isItemLoaded:oe=>!0}}}let w;function R(){if(!w){const A=new B,U=t.v.featureToggles.panelTitleSearch;w=U?new p(A):A,U&&location.search.includes("do-frontend-query")&&(w=new b(w))}return w}},66757:(H,T,e)=>{"use strict";e.d(T,{hD:()=>y});var t=e(82897),n=e.n(t),c=e(37932),s=e(38535),r=e(58379),g=e(10216),f=e(72809),o=e(64823),l=e(1037),a=e(63053);const m={query:"",tag:[],starred:!1,layout:l.A.Folders,sort:void 0,prevSort:void 0,eventTrackingNamespace:"dashboard_search"},d={sort:null,starred:null,query:null,tag:null,layout:null};class p extends s.b{constructor(){super(...arguments),this.updateLocation=(0,t.debounce)(i=>c.E1.partial(i,!0),300),this.doSearchWithDebounce=(0,t.debounce)(()=>this.doSearch(),300),this.onCloseSearch=()=>{this.updateLocation({search:null,folder:null,...d})},this.onQueryChange=i=>{this.setStateAndDoSearch({query:i})},this.onRemoveTag=i=>{this.setStateAndDoSearch({tag:this.state.tag.filter(u=>u!==i)})},this.onTagFilterChange=i=>{this.setStateAndDoSearch({tag:i})},this.onAddTag=i=>{this.state.tag&&this.state.tag.includes(i)||this.setStateAndDoSearch({tag:[...this.state.tag,i]})},this.onDatasourceChange=i=>{this.setStateAndDoSearch({datasource:i})},this.onStarredFilterChange=i=>{const u=i.currentTarget.checked;this.setStateAndDoSearch({starred:u})},this.onClearStarred=()=>{this.setStateAndDoSearch({starred:!1})},this.onSortChange=i=>{i?localStorage.setItem(g.qb,i):localStorage.removeItem(g.qb),this.state.layout===l.A.Folders?this.setStateAndDoSearch({sort:i,layout:l.A.List}):this.setStateAndDoSearch({sort:i})},this.onLayoutChange=i=>{localStorage.setItem(g.rh,i),this.state.sort&&i===l.A.Folders?this.setStateAndDoSearch({layout:i,prevSort:this.state.sort,sort:void 0}):this.setStateAndDoSearch({layout:i,sort:this.state.prevSort})},this.onSetIncludePanels=i=>{this.setStateAndDoSearch({includePanels:i}),r.Z.set(g.to,i)},this.getTagOptions=()=>(0,o.getGrafanaSearcher)().tags(this.lastQuery),this.onSearchItemClicked=i=>{!i.altKey&&!i.ctrlKey&&!i.metaKey&&this.setState({tag:[],starred:!1,sort:void 0,query:"",folderUid:void 0}),(0,f.OY)(this.state.eventTrackingNamespace,{layout:this.state.layout,starred:this.state.starred,sortValue:this.state.sort,query:this.state.query,tagCount:this.state.tag?.length,includePanels:this.state.includePanels})},this.onReportSearchUsage=()=>{(0,f.Qw)(this.state.eventTrackingNamespace,{layout:this.state.layout,starred:this.state.starred,sortValue:this.state.sort,query:this.state.query,tagCount:this.state.tag?.length,includePanels:this.state.includePanels})}}initStateFromUrl(i){const u=(0,a.vj)(c.E1.getSearchObject());h.setState({...u,folderUid:i,eventTrackingNamespace:i?"manage_dashboards":"dashboard_search"}),this.doSearch()}setStateAndDoSearch(i){this.setState(i),this.updateLocation({query:this.state.query.length===0?null:this.state.query,tag:this.state.tag,datasource:this.state.datasource,starred:this.state.starred?this.state.starred:null,sort:this.state.sort}),this.doSearchWithDebounce()}hasSearchFilters(){return this.state.query||this.state.tag.length||this.state.starred}getSearchQuery(){const i={query:this.state.query,tags:this.state.tag,ds_uid:this.state.datasource,location:this.state.folderUid,sort:this.state.sort,explain:this.state.explain,withAllowedActions:this.state.explain,starred:this.state.starred};return i.sort?.length&&!i.sort.includes("name")&&(i.kind=["dashboard","folder"]),i.query?.length||(i.query="*",i.location||(i.kind=["dashboard","folder"])),!this.state.includePanels&&!i.kind&&(i.kind=["dashboard","folder"]),i}doSearch(){const i={layout:this.state.layout,starred:this.state.starred,sortValue:this.state.sort,query:this.state.query,tagCount:this.state.tag?.length,includePanels:this.state.includePanels};(0,f.Jy)(this.state.eventTrackingNamespace,i),this.lastQuery=this.getSearchQuery(),this.setState({loading:!0}),this.state.starred?(0,o.getGrafanaSearcher)().starred(this.lastQuery).then(u=>this.setState({result:u,loading:!1})).catch(u=>{(0,f.TP)(this.state.eventTrackingNamespace,{...i,error:u?.message}),this.setState({loading:!1})}):(0,o.getGrafanaSearcher)().search(this.lastQuery).then(u=>this.setState({result:u,loading:!1})).catch(u=>{(0,f.TP)(this.state.eventTrackingNamespace,{...i,error:u?.message}),this.setState({loading:!1})})}}let h;function y(){if(!h){const i=localStorage.getItem(g.rh)??m.layout,u=localStorage.getItem(g.qb)??void 0;let P=r.Z.getBool(g.to,!0);P&&(P=!1),h=new p({...m,layout:i,sort:u,includePanels:P})}return h}},1037:(H,T,e)=>{"use strict";e.d(T,{A:()=>n,o:()=>t});var t=(c=>(c.DashDB="dash-db",c.DashHome="dash-home",c.DashFolder="dash-folder",c))(t||{}),n=(c=>(c.List="list",c.Folders="folders",c.Grid="grid",c))(n||{})},63053:(H,T,e)=>{"use strict";e.d(T,{L:()=>n,tT:()=>c,vj:()=>s});var t=e(10216);const n=r=>r?Boolean(r.query||r.tag?.length>0||r.starred||r.sort):!1,c=(r="General")=>`${t.qi}.${r.toLowerCase()}`,s=r=>{const g=Object.entries(r).reduce((f,[o,l])=>{if(l){if(o==="tag"&&!Array.isArray(l))return{...f,tag:[l]}}else return f;return{...f,[o]:l}},{});if(r.folder){const f=`folder:${r.folder}`;return{...g,query:`${f} ${(g.query??"").replace(f,"")}`}}return{...g}}},45003:(H,T,e)=>{"use strict";e.d(T,{Dn:()=>v,LA:()=>l,M4:()=>E,P4:()=>g,Ub:()=>y,ZP:()=>b,aj:()=>C,cB:()=>i,dt:()=>h,e7:()=>f,gl:()=>u,pN:()=>p,s3:()=>o});var t=e(32557),n=e(81168);const c={serviceAccount:{},isLoading:!0,tokens:[]},s=(0,t.oM)({name:"serviceaccount",initialState:c,reducers:{serviceAccountFetchBegin:S=>({...S,isLoading:!0}),serviceAccountFetchEnd:S=>({...S,isLoading:!1}),serviceAccountLoaded:(S,M)=>({...S,serviceAccount:M.payload,isLoading:!1}),serviceAccountTokensLoaded:(S,M)=>({...S,tokens:M.payload,isLoading:!1})}}),r=s.reducer,{serviceAccountLoaded:g,serviceAccountTokensLoaded:f,serviceAccountFetchBegin:o,serviceAccountFetchEnd:l}=s.actions,a={serviceAccounts:[],isLoading:!0,roleOptions:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,serviceAccountStateFilter:n.ServiceAccountStateFilter.All,apiKeysMigrated:!1,showApiKeysMigrationInfo:!1},m=(0,t.oM)({name:"serviceaccounts",initialState:a,reducers:{serviceAccountsFetched:(S,M)=>{const{totalCount:x,perPage:O,...L}=M.payload,B=Math.ceil(x/O);return{...S,...L,totalPages:B,perPage:O,showPaging:B>1,isLoading:!1}},serviceAccountsFetchBegin:S=>({...S,isLoading:!0}),serviceAccountsFetchEnd:S=>({...S,isLoading:!1}),acOptionsLoaded:(S,M)=>({...S,roleOptions:M.payload}),apiKeysMigrationStatusLoaded:(S,M)=>({...S,apiKeysMigrated:M.payload}),showApiKeysMigrationInfoLoaded:(S,M)=>({...S,showApiKeysMigrationInfo:M.payload}),queryChanged:(S,M)=>({...S,query:M.payload,page:0}),pageChanged:(S,M)=>({...S,page:M.payload}),stateFilterChanged:(S,M)=>({...S,serviceAccountStateFilter:M.payload})}}),d=m.reducer,{serviceAccountsFetchBegin:p,serviceAccountsFetchEnd:h,serviceAccountsFetched:y,acOptionsLoaded:v,apiKeysMigrationStatusLoaded:i,showApiKeysMigrationInfoLoaded:u,pageChanged:P,stateFilterChanged:E,queryChanged:C}=m.actions,b={serviceAccountProfile:r,serviceAccounts:d}},63163:(H,T,e)=>{"use strict";e.d(T,{$:()=>l,J:()=>f});var t=e(70006),n=e(36512),c=e(54899),s=e(35645),r=e(29930);class g{constructor(){}async get(m){const d=`api/storage/read/${m}`.replace("//","/");return(0,c.i)().get(d)}async list(m){let d="api/storage/list/";m&&(d+=m+"/");const p=await(0,c.i)().get(d);if(p?.data){const h=(0,t.vP)(p);for(const y of h.fields)y.display=(0,n.U)({field:y,theme:s.v.theme2});return h}}async createFolder(m){const d=await(0,c.i)().post("/api/storage/createFolder",JSON.stringify({path:m}));return d.success?{}:{error:d.message??"unknown error"}}async deleteFolder(m){const d=await(0,c.i)().post("/api/storage/deleteFolder",JSON.stringify(m));return d.success?{}:{error:d.message??"unknown error"}}async deleteFile(m){const d=await(0,c.i)().post(`/api/storage/delete/${m.path}`);return d.success?{}:{error:d.message??"unknown error"}}async delete(m){return m.isFolder?this.deleteFolder({path:m.path,force:!0}):this.deleteFile({path:m.path})}async upload(m,d,p){const h=new FormData;h.append("folder",m),h.append("file",d),h.append("overwriteExistingFile",String(p));const y=await fetch("/api/storage/upload",{method:"POST",body:h});let v=await y.json();return v||(v={}),v.status=y.status,v.statusText=y.statusText,y.status!==200&&!v.err&&(v.err=!0),v}async getDashboard(m){if(!s.v.featureToggles.dashboardsFromStorage)return Promise.reject("Dashboards from storage is not enabled");m.endsWith(".json")||(m+=".json"),m.startsWith("content/")||(m=`content/${m}`);const d=await r.ae.get(`/api/storage/read/${m}`);return d.uid=m,delete d.id,{meta:{uid:m,slug:m,canEdit:!0,canSave:!0,canStar:!1},dashboard:d}}async write(m,d){return r.ae.post(`/api/storage/write/${m}`,d)}async getConfig(){return(0,c.i)().get("/api/storage/config")}async getOptions(m){return(0,c.i)().get(`/api/storage/options/${m}`)}}function f(a,m){const p=a.toLowerCase().trim();return m.map(y=>y.trim().toLowerCase()).includes(p)}let o;function l(){return o||(o=new g),o}},94108:(H,T,e)=>{"use strict";e.d(T,{c:()=>n,i:()=>t});var t=(c=>(c.Data="data",c.Config="config",c.Perms="perms",c.History="history",c.AddRoot="add",c))(t||{}),n=(c=>(c.Save="save",c.PR="pr",c.Push="push",c))(n||{})},62295:(H,T,e)=>{"use strict";e.d(T,{Ii:()=>r,UW:()=>l,ZP:()=>p,cD:()=>f,fT:()=>m,ik:()=>o,ki:()=>g,rI:()=>a,rW:()=>s});var t=e(32557);const n={supportBundles:[],isLoading:!1,supportBundleCollectors:[],createBundlePageLoading:!1,loadBundlesError:"",createBundleError:""},c=(0,t.oM)({name:"supportBundles",initialState:n,reducers:{supportBundlesLoaded:(h,y)=>({...h,supportBundles:y.payload,isLoading:!1}),fetchBegin:h=>({...h,isLoading:!0}),fetchEnd:h=>({...h,isLoading:!1}),collectorsFetchBegin:h=>({...h,createBundlePageLoading:!0}),collectorsFetchEnd:h=>({...h,createBundlePageLoading:!1}),supportBundleCollectorsLoaded:(h,y)=>({...h,supportBundleCollectors:y.payload,createBundlePageLoading:!1}),setLoadBundleError:(h,y)=>({...h,loadBundlesError:y.payload,supportBundleCollectors:[]}),setCreateBundleError:(h,y)=>({...h,createBundleError:y.payload})}}),{supportBundlesLoaded:s,fetchBegin:r,fetchEnd:g,supportBundleCollectorsLoaded:f,collectorsFetchBegin:o,collectorsFetchEnd:l,setLoadBundleError:a,setCreateBundleError:m}=c.actions,p={supportBundles:c.reducer}},97189:(H,T,e)=>{"use strict";e.d(T,{PJ:()=>g,PL:()=>s,UD:()=>p,ZP:()=>y,aj:()=>r,iI:()=>m,n2:()=>d,p3:()=>n,y$:()=>a});var t=e(32557);const n={teams:[],page:1,query:"",perPage:30,totalPages:0,noTeams:!1,hasFetched:!1},c=(0,t.oM)({name:"teams",initialState:n,reducers:{teamsLoaded:(v,i)=>{const{totalCount:u,perPage:P,...E}=i.payload,C=Math.ceil(u/P);return{...v,...E,totalPages:C,perPage:P,hasFetched:!0}},queryChanged:(v,i)=>({...v,page:1,query:i.payload}),pageChanged:(v,i)=>({...v,page:i.payload})}}),{teamsLoaded:s,queryChanged:r,pageChanged:g}=c.actions,f=c.reducer,o={team:{},members:[],groups:[],searchMemberQuery:""},l=(0,t.oM)({name:"team",initialState:o,reducers:{teamLoaded:(v,i)=>({...v,team:i.payload}),teamMembersLoaded:(v,i)=>({...v,members:i.payload}),setSearchMemberQuery:(v,i)=>({...v,searchMemberQuery:i.payload}),teamGroupsLoaded:(v,i)=>({...v,groups:i.payload})}}),{teamLoaded:a,teamGroupsLoaded:m,teamMembersLoaded:d,setSearchMemberQuery:p}=l.actions,h=l.reducer,y={teams:f,team:h}},98639:(H,T,e)=>{"use strict";e.d(T,{J:()=>u});var t=e(82897),n=e(99227),c=e(86647),s=e(40885),r=e(71208),g=e(40705),f=e(22323),o=e(82253),l=e(15546),a=e(87095),m=e(92624);class d{constructor(E,C,b){this.state={name:E.name,value:C,text:b,type:E.type}}getValue(E){let{value:C}=this.state;return C==="string"||C==="number"||C==="boolean"?C:String(C)}getValueText(){const{value:E,text:C}=this.state;return typeof C=="string"?E===o.r2?o.xk:C:Array.isArray(C)?C.join(" + "):(console.log("value",C),String(C))}}let p;function h(P,E,C){return p?(p.state.name=P.name,p.state.type=P.type,p.state.value=E,p.state.text=C):p=new d(P,E,C),p}const y={getFilteredVariables:a.Q4,getVariables:a.ng,getVariableWithName:a._K};class v{constructor(E=y){this.dependencies=E,this.regex=m.J7,this.index={},this.grafanaVariables=new Map,this.timeRange=null,this.fieldAccessorCache={},this._variables=[]}init(E,C){this._variables=E,this.timeRange=C,this.updateIndex()}get variables(){return(0,n.d)("template_srv.ts","variables","getVariables"),this.getVariables()}getVariables(){return this.dependencies.getVariables()}updateIndex(){const E=C=>C||C==="";if(this.index=this._variables.reduce((C,b)=>(b.current&&(b.current.isNone||E(b.current.value))&&(C[b.name]=b),C),{}),this.timeRange){const C=this.timeRange.from.valueOf().toString(),b=this.timeRange.to.valueOf().toString();this.index={...this.index,__from:{current:{value:C,text:C}},__to:{current:{value:b,text:b}}}}}updateTimeRange(E){this.timeRange=E,this.updateIndex()}variableInitialized(E){this.index[E.name]=E}getAdhocFilters(E){let C=[],b=(0,c.F)().getInstanceSettings(E);if(!b)return[];for(const S of this.getAdHocVariables()){const M=S.datasource?.uid;(M===b.uid||M?.indexOf("$")===0&&this.replace(M)===E)&&(C=C.concat(S.filters))}return C}formatValue(E,C,b,S){if(b=b||{},E==null||(0,l.Kn)(b)&&C!==r.Q.queryParam)return"";if(!Array.isArray(E)&&typeof E=="object"&&(E=`${E}`),typeof C=="function")return C(E,b,this.formatValue);C||(C=r.Q.glob);let M=C.split(":");M.length>1?(C=M[0],M=M.slice(1)):M=[];let x=r.V.getIfExists(C);x||(console.error(`Variable format ${C} not found. Using glob format as fallback.`),x=r.V.get(r.Q.glob));const O=h(b,E,S??E);return x.formatter(E,M,O)}setGrafanaVariable(E,C){this.grafanaVariables.set(E,C)}setGlobalVariable(E,C){(0,n.d)("template_srv.ts","setGlobalVariable",""),this.index={...this.index,[E]:{current:C}}}getVariableName(E){this.regex.lastIndex=0;const C=this.regex.exec(E);return C?C.slice(1).find(S=>S!==void 0):null}containsTemplate(E){if(!E)return!1;const C=this.getVariableName(E),b=C&&this.getVariableAtIndex(C);return b!=null}variableExists(E){return(0,n.d)("template_srv.ts","variableExists","containsTemplate"),this.containsTemplate(E)}highlightVariablesAsHtml(E){return!E||!(0,t.isString)(E)?E:(E=(0,t.escape)(E),this.regex.lastIndex=0,E.replace(this.regex,(C,b,S,M,x)=>this.getVariableAtIndex(b||S||x)?'<span class="template-variable">'+C+"</span>":C))}getAllValue(E){if(E.allValue)return E.allValue;const C=[];for(let b=1;b<E.options.length;b++)C.push(E.options[b].value);return C}getFieldAccessor(E){const C=this.fieldAccessorCache[E];return C||(this.fieldAccessorCache[E]=(0,t.property)(E))}getVariableValue(E,C,b){const S=b[E];return S?C?this.getFieldAccessor(C)(S.value):S.value:null}getVariableText(E,C,b){const S=b[E];return S?S.value===C||typeof C!="string"?S.text:C:null}replace(E,C,b){return C&&C.__sceneObject?g.ep.interpolate(C.__sceneObject.value,E,C,b):E?(this.regex.lastIndex=0,E.replace(this.regex,(S,M,x,O,L,B,w)=>{const R=M||x||L,A=this.getVariableAtIndex(R),U=O||w||b;if(C){const Y=this.getVariableValue(R,B,C),j=this.getVariableText(R,Y,C);if(Y!=null)return this.formatValue(Y,U,A,j)}if(!A)return S;if(U===r.Q.queryParam||(0,l.Kn)(A)){const Y=f.z.get(A.type).getValueForUrl(A),j=(0,l.Kn)(A)?A.id:A.current.text;return this.formatValue(Y,U,A,j)}const I=this.grafanaVariables.get(A.current.value);if(I)return this.formatValue(I,U,A);let N=A.current.value,F=A.current.text;if(this.isAllValue(N)&&(N=this.getAllValue(A),F=o.xk,A.allValue&&U!==r.Q.text))return this.replace(N);if(B){const Y=this.getVariableValue(R,B,{[R]:{value:N,text:F}});if(Y!=null)return this.formatValue(Y,U,A,F)}return this.formatValue(N,U,A,F)})):E??""}isAllValue(E){return E===o.r2||Array.isArray(E)&&E[0]===o.r2}replaceWithText(E,C){return(0,n.d)("template_srv.ts","replaceWithText()","replace(), and specify the :text format"),this.replace(E,C,"text")}getVariableAtIndex(E){if(E)return this.index[E]?this.index[E]:this.dependencies.getVariableWithName(E)}getAdHocVariables(){return this.dependencies.getFilteredVariables(l.Kn)}}const i=new v;(0,s.l)(i);const u=()=>i},90024:(H,T,e)=>{"use strict";e.d(T,{J:()=>m});var t=e(40538),n=e(34315),c=e(35585),s=e(68404),r=e(52081),g=e(2594),f=e(46967);const o=[{label:"Size",value:c.k.Size,description:"Split the buckets based on size"},{label:"Count",value:c.k.Count,description:"Split the buckets based on count"}],l=[{label:"Split",value:c.k.Size,description:"Split the buckets based on size"}],a=({value:d,onChange:p,item:h})=>s.createElement(r.Lh,null,s.createElement(g.S,{value:d?.mode||c.k.Size,options:d?.scale?.type===t.wf.Log?l:o,onChange:y=>{p({...d,mode:y})}}),s.createElement(f.I,{value:d?.value??"",placeholder:"Auto",onChange:y=>{p({...d,value:y.currentTarget.value})}}));function m(d,p,h,y){p.addCustomEditor({id:"xBuckets",path:`${d}xBuckets`,name:"X Bucket",editor:a,category:y,defaultValue:{mode:c.k.Size}}),p.addCustomEditor({id:"yBuckets",path:`${d}yBuckets`,name:"Y Bucket",editor:a,category:y,defaultValue:{mode:c.k.Size}}),p.addCustomEditor({id:"yBuckets-scale",path:`${d}yBuckets.scale`,name:"Y Bucket scale",category:y,editor:n.Y,defaultValue:{type:t.wf.Linear}})}},77564:(H,T,e)=>{"use strict";e.d(T,{xf:()=>Y,Oy:()=>R,qJ:()=>N,d8:()=>I,Cj:()=>F});var t=e(2101),n=e(17130),c=e(14582),s=e(89890),r=e(20112),g=e(88432),f=e(19695),o=e(37556),l=e(15128),a=e(40538),m=e(35585),d=e(43211);const{abs:p,pow:h}=Math,y=new Map;function v(z,Z,ae,J){let oe=[],Ee=J.map(d.d);for(let me=Z;me<ae;me++){let re=p(me),le=(0,d.O)(h(z,me),re);for(let pe=0;pe<J.length;pe++){let ee=J[pe]*le,se=(ee>=0&&me>=0?0:re)+(me>=Ee[pe]?0:Ee[pe]),Q=(0,d.O)(ee,se);oe.push(Q),y.set(Q,se)}}return oe}const i=z=>z%1===0,u=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5],P=v(10,-16,0,u),E=v(10,0,16,u),C=E.filter(i),b=P.concat(E),S=P.concat(C),M=1*1e3,x=60*M,O=60*x,L=24*O,B=365*L,w=[1,2,4,5,10,20,25,40,50,100,200,250,400,500,M,2*M,4*M,5*M,10*M,15*M,20*M,30*M,x,2*x,4*x,5*x,10*x,15*x,20*x,30*x,O,2*O,4*O,6*O,8*O,12*O,18*O,L,2*L,3*L,4*L,5*L,6*L,7*L,10*L,15*L,30*L,45*L,60*L,90*L,180*L,B,2*B,3*B,4*B,5*B,6*B,7*B,8*B,9*B,10*B],R={id:n.W.heatmap,name:"Create heatmap",description:"calculate heatmap from source data",defaultOptions:{},operator:(z,Z)=>ae=>ae.pipe((0,t.U)(J=>R.transformer(z,Z)(J))),transformer:z=>Z=>{const ae=Y(Z,z);return z.keepOriginalData?[ae,...Z]:[ae]}};function A(z){return z==="+Inf"?1/0:z==="-Inf"?-1/0:+(z??0)}function U(z,Z){return A(z)-A(Z)}function I(z){return z?.meta?.custom??{}}function N(z){let Z=!1;for(let ae of z.fields)switch(ae.name){case"y":case"yMin":case"yMax":if(Z)return!1;Z=!0}return Z}function F(z){const Z=z.frame.fields[0],ae=Z.values.toArray(),J=z.frame.fields.filter((G,q)=>G.type===c.fS.number&&q>0),oe=ae.length*J.length,Ee=new Array(oe),me=new Array(oe),re=new Array(oe),le=J.map(G=>G.values.toArray().slice());le.forEach((G,q)=>{for(let X=0;X<G.length;X++)re[le.length*X+q]=G[X]});const pe=Array.from({length:J.length},(G,q)=>q);for(let G=0,q=0,X=0;G<oe;q=++G%pe.length)me[G]=pe[q],q===0&&G>=pe.length&&X++,Ee[G]=ae[X];let ee=J[0].labels?.le!=null?"yMax":"y";switch(z.layout){case m.D.le:ee="yMax";break;case m.D.ge:ee="yMin";break;case m.D.unknown:ee="y";break}const se={yOrdinalDisplay:J.map(G=>(0,s.C)(G,z.frame)),yMatchWithLabel:Object.keys(J[0].labels??{})[0]};if(se.yMatchWithLabel&&(se.yOrdinalLabel=J.map(G=>G.labels?.[se.yMatchWithLabel]??""),se.yMatchWithLabel==="le"&&(se.yMinDisplay="0.0")),z.unit?.length||z.decimals!=null){const G=(0,r.Cf)(z.unit??"short");se.yMinDisplay&&(se.yMinDisplay=(0,r.zc)(G(0,z.decimals))),se.yOrdinalDisplay=se.yOrdinalDisplay.map(q=>{let X=+q;return Number.isNaN(X)?q:(0,r.zc)(G(X,z.decimals))})}const Q={...J[0].config};return Q.displayNameFromDS&&delete Q.displayNameFromDS,{length:Ee.length,refId:z.frame.refId,meta:{type:g.P.HeatmapCells,custom:se},fields:[{name:Z.type===c.fS.time?"xMax":"x",type:Z.type,values:new f.G(Ee),config:Z.config},{name:ee,type:c.fS.number,values:new f.G(me),config:{unit:"short"}},{name:z.value?.length?z.value:"Value",type:c.fS.number,values:new f.G(re),config:Q,display:J[0].display}]}}function D(z){z=z.slice(),z.sort((ae,J)=>U(ae.name,J.name));const Z=z.map(ae=>ae.fields[1].values.toArray().slice());return Z.reverse(),Z.forEach((ae,J)=>{if(J<Z.length-1)for(let oe=0;oe<ae.length;oe++)ae[oe]-=Z[J+1][oe]}),Z.reverse(),z.map((ae,J)=>({...ae,fields:[ae.fields[0],{...ae.fields[1],values:new ArrayVector(Z[J])}]}))}function Y(z,Z){let ae,J,oe=0;for(let G of z)G.fields.find(X=>X.type===c.fS.time)&&(oe+=G.length);let Ee=Array(oe),me=Array(oe),re=0;for(let G of z){const q=G.fields.find(de=>de.type===c.fS.time);if(!q)continue;ae||(ae=q);const X=q.values.toArray();for(let de of G.fields)if(de!==q&&de.type===c.fS.number){const Be=de.values.toArray();for(let ke=0;ke<X.length;ke++,re++)Ee[re]=X[ke],me[re]=Be[ke];J||(J=de)}}if(!ae||!J)throw"no heatmap fields found";if(!Ee.length||!me.length)throw"no values found";const le=Z.xBuckets??{},pe=Z.yBuckets??{};if(le.scale?.type===a.wf.Log)throw"X axis only supports linear buckets";const ee=Z.yBuckets?.scale??{type:a.wf.Linear},se=j(Ee,me,{xSorted:!0,xTime:ae.type===c.fS.time,xMode:le.mode,xSize:le.mode===m.k.Size?(0,o.iX)((0,o.RA)(le.value??"")):le.value?+le.value:void 0,yMode:pe.mode,ySize:pe.value?+pe.value:void 0,yLog:ee?.type===a.wf.Log?ee?.log:void 0});return{length:se.x.length,name:(0,s.C)(J),meta:{type:g.P.HeatmapCells},fields:[{name:"xMin",type:ae.type,values:new f.G(se.x),config:ae.config},{name:"yMin",type:c.fS.number,values:new f.G(se.y),config:{...J.config,custom:{scaleDistribution:ee}}},{name:"Count",type:c.fS.number,values:new f.G(se.count),config:{unit:"short"}}]}}function j(z,Z,ae){let J=z.length,oe=ae?.xSorted??!1,Ee=ae?.ySorted??!1,me=oe?z[0]:1/0,re=Ee?Z[0]:1/0,le=oe?z[J-1]:-1/0,pe=Ee?Z[J-1]:-1/0,ee=ae?.yLog;for(let _e=0;_e<J;_e++)oe||(me=Math.min(me,z[_e]),le=Math.max(le,z[_e])),Ee||(!ee||Z[_e]>0)&&(re=Math.min(re,Z[_e]),pe=Math.max(pe,Z[_e]));let se=ae?.xSize??0,Q=ae?.ySize??0,G=ae?.xMode,q=ae?.yMode;if((!Number.isFinite(se)||se<=0)&&(G=m.k.Count,se=20),(!Number.isFinite(Q)||Q<=0)&&(q=m.k.Count,Q=10),G===m.k.Count){let _e=(le-me)/Math.max(se-1,1),et=ae?.xTime?w:S,qe=et.findIndex(Je=>Je>_e)-1;se=et[Math.max(qe,0)]}if(q===m.k.Count){let _e=(pe-re)/Math.max(Q-1,1),et=ae?.yTime?w:S,qe=et.findIndex(Je=>Je>_e)-1;Q=et[Math.max(qe,0)]}let X=ae?.xCeil?_e=>(0,l.UO)(_e,se):_e=>(0,l.mB)(_e,se),de=ae?.yCeil?_e=>(0,l.UO)(_e,Q):_e=>(0,l.mB)(_e,Q);if(ee){Q=1/(ae?.ySize??1);let _e=ee===2?Math.log2:Math.log10;de=ae?.yCeil?et=>(0,l.UO)(_e(et),Q):et=>(0,l.mB)(_e(et),Q)}let Be=X(me),ke=X(le),He=de(re),ue=de(pe),Oe=Math.round((ke-Be)/se)+1,Fe=Math.round((ue-He)/Q)+1,[Ie,we,Re]=K(Oe,Fe,Be,se,He,Q,ee);for(let _e=0;_e<J;_e++){if(ee&&Z[_e]<=0)continue;const et=(X(z[_e])-Be)/se,qe=(de(Z[_e])-He)/Q,Je=et*Fe+qe;Re[Je]++}return{x:Ie,y:we,count:Re}}function K(z,Z,ae,J,oe,Ee,me){const re=z*Z,le=new Array(re),pe=new Array(re),ee=new Array(re);for(let se=0,Q=0,G=ae;se<re;Q=++se%Z)ee[se]=0,me?pe[se]=me**(oe+Q*Ee):pe[se]=oe+Q*Ee,Q===0&&se>=Z&&(G+=J),le[se]=G;return[le,pe,ee]}},35585:(H,T,e)=>{"use strict";e.d(T,{D:()=>n,k:()=>t});var t=(c=>(c.Size="size",c.Count="count",c))(t||{}),n=(c=>(c.le="le",c.ge="ge",c.unknown="unknown",c.auto="auto",c))(n||{})},96366:(H,T,e)=>{"use strict";e.d(T,{Ii:()=>c,JJ:()=>n,ac:()=>s});var t=e(40538),n=(g=>(g.Prepare="prepare",g.Calculate="calculate",g.Modify="modify",g))(n||{}),c=(g=>(g.Heading="heading",g.Distance="distance",g.Area="area",g))(c||{}),s=(g=>(g.AsLine="asLine",g.LineBuilder="lineBuilder",g))(s||{});const r={action:"prepare",source:{mode:t.q1.Auto}}},14573:(H,T,e)=>{"use strict";e.d(T,{Lb:()=>m,Lp:()=>l,N7:()=>p});var t=e(68208),n=e(54428),c=e(18788),s=e(61331),r=e(12527),g=e(14582),f=e(19695),o=e(96366);function l(h){const y=[];for(const v of h.values.toArray())v&&y.push(m(v));return new n.Z(y)}function a(h){const y=new Array(h.length);if(h.length>1){let v=d(h[0]);for(let i=1;i<h.length;i++){let u=d(h[i]);if(v&&u){let P=Math.atan2(u[0]-v[0],u[1]-v[1])*180/Math.PI;P<0&&(P+=360),y[i-1]=y[i]=P}}}else y.fill(0);return y}function m(h){return h instanceof c.Z?h.getCoordinates():(0,t.qg)(h.getExtent())}function d(h){if(h)return(0,s.bU)(m(h))}function p(h,y){const v=h.values.toArray(),i=new Array(h.values.length),u=y.calc??o.Ii.Heading,P=y.field??u;switch(u){case o.Ii.Area:{for(let E=0;E<v.length;E++){const C=v[E];C&&(i[E]=(0,r.bg)(C))}return{name:P,type:g.fS.number,config:{unit:"areaM2"},values:new f.G(i)}}case o.Ii.Distance:{for(let E=0;E<v.length;E++){const C=v[E];C&&(i[E]=(0,r.xA)(C))}return{name:P,type:g.fS.number,config:{unit:"lengthm"},values:new f.G(i)}}case o.Ii.Heading:default:return{name:P,type:g.fS.number,config:{unit:"degree"},values:new f.G(a(v))}}}},46002:(H,T,e)=>{"use strict";e.d(T,{PJ:()=>a,ZP:()=>d,eT:()=>f,k7:()=>l,tZ:()=>o,w4:()=>r});var t=e(32557),n=e(47694);const c={users:[],searchQuery:"",page:0,perPage:30,totalPages:1,canInvite:!n.ZP.externalUserMngLinkName,externalUserMngInfo:n.ZP.externalUserMngInfo,externalUserMngLinkName:n.ZP.externalUserMngLinkName,externalUserMngLinkUrl:n.ZP.externalUserMngLinkUrl,isLoading:!1},s=(0,t.oM)({name:"users",initialState:c,reducers:{usersLoaded:(p,h)=>{const{totalCount:y,perPage:v,page:i,orgUsers:u}=h.payload,P=Math.ceil(y/v);return{...p,isLoading:!0,users:u,perPage:v,page:i,totalPages:P}},searchQueryChanged:(p,h)=>({...p,searchQuery:h.payload,page:c.page}),setUsersSearchPage:(p,h)=>({...p,page:h.payload}),pageChanged:(p,h)=>({...p,page:h.payload}),usersFetchBegin:p=>({...p,isLoading:!0}),usersFetchEnd:p=>({...p,isLoading:!1})}}),{searchQueryChanged:r,setUsersSearchPage:g,usersLoaded:f,usersFetchBegin:o,usersFetchEnd:l,pageChanged:a}=s.actions,d={users:s.reducer}},22323:(H,T,e)=>{"use strict";e.d(T,{z:()=>n});var t=e(64140);const n=new t.B},30002:(H,T,e)=>{"use strict";e.d(T,{KJ:()=>v,M6:()=>h,Ue:()=>i,Z$:()=>u,ku:()=>y,m2:()=>p});var t=e(82897),n=e.n(t),c=e(91162),s=e(50678),r=e(15546),g=e(85803),f=e(7240),o=e(87095),l=e(92990),a=e(92624),m=e(79134);const d="Filters",p=C=>async(b,S)=>{let M=E(C,S());if(!M&&(b(P(C)),M=E(C,S()),!M))return;const x=M.filters.findIndex(L=>L.key===C.key&&L.value===C.value);if(x===-1){const{value:L,key:B,operator:w}=C,R={value:L,key:B,operator:w,condition:""};return await b(v((0,a.yQ)(M),R))}const O={...M.filters[x],operator:C.operator};return await b(h((0,a.yQ)(M),{index:x,filter:O}))},h=(C,b)=>async(S,M)=>{const x=(0,o.E0)(C,M());S((0,f.mb)(C.rootStateKey,(0,m.e_)((0,a.Y6)(x,b)))),await S((0,g.MB)((0,a.yQ)(x),!0))},y=(C,b)=>async(S,M)=>{const x=(0,o.E0)(C,M());S((0,f.mb)(C.rootStateKey,(0,m.DO)((0,a.Y6)(x,b)))),await S((0,g.MB)((0,a.yQ)(x),!0))},v=(C,b)=>async(S,M)=>{const x=(0,o.E0)(C,M());S((0,f.mb)(C.rootStateKey,(0,m.QL)((0,a.Y6)(x,b)))),await S((0,g.MB)((0,a.yQ)(x),!0))},i=(C,b)=>async(S,M)=>{const x=(0,o.E0)(C,M());S((0,f.mb)(C.rootStateKey,(0,m.aM)((0,a.Y6)(x,b)))),await S((0,g.MB)((0,a.yQ)(x),!0))},u=(C,b)=>async(S,M)=>{const x=(0,o.E0)(C,M());S((0,f.mb)(C.rootStateKey,(0,l.Pl)((0,a.Y6)(x,{propName:"datasource",propValue:b}))));const L=(await(0,c.ak)().get(b))?.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters yet.";S((0,f.mb)(C.rootStateKey,(0,s.z7)({infoText:L})))},P=C=>(b,S)=>{const M=(0,o.S_)(S()),x={...(0,t.cloneDeep)(m.Js),datasource:C.datasource,name:d,id:d,rootStateKey:M},O=!1,L=(0,o.Eo)(M,S()),B={type:"adhoc",id:x.id,rootStateKey:M};b((0,f.mb)(M,(0,l.VN)((0,a.Y6)(B,{global:O,model:x,index:L}))))},E=(C,b)=>{const S=(0,o.S_)(b),M=(0,o.AE)(S,b);return Object.values(M.variables).find(x=>(0,r.Kn)(x)&&x.datasource?.uid===C.datasource.uid)}},44847:(H,T,e)=>{"use strict";e.d(T,{F:()=>E});var t=e(68404),n=e(70044),c=e(68118),s=e(39904),r=e(91162);const g=90,f=({datasource:C,onChange:b,disabled:S,filterKey:M,getTagKeysOptions:x})=>{const O=()=>m(C,x),L=()=>d(C,x);return M===null?t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-add-key-wrapper"},t.createElement(c.V,{disabled:S,className:"query-segment-key",Component:a,value:M,onChange:b,loadOptions:O,inputMinWidth:g})):t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-key-wrapper"},t.createElement(c.V,{disabled:S,className:"query-segment-key",value:M,onChange:b,loadOptions:L,inputMinWidth:g}))},o="-- remove filter --",l={label:o,value:o},a=t.createElement("span",{className:"gf-form-label query-part","aria-label":"Add Filter"},t.createElement(s.J,{name:"plus"})),m=async(C,b)=>{const S=await(0,r.ak)().get(C);return!S||!S.getTagKeys?[]:(await S.getTagKeys(b)).map(x=>({label:x.text,value:x.text}))},d=async(C,b)=>{const S=await m(C,b);return[l,...S]},p=({datasource:C,disabled:b,onChange:S,filterKey:M,filterValue:x,placeHolder:O})=>{const L=()=>h(C,M);return t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterValue-value-wrapper"},t.createElement(c.V,{className:"query-segment-value",disabled:b,placeholder:O,value:x,onChange:S,loadOptions:L}))},h=async(C,b)=>{const S=await(0,r.ak)().get(C);return!S||!S.getTagValues?[]:(await S.getTagValues({key:b})).map(x=>({label:x.text,value:x.text}))},y=["=","!=","<",">","=~","!~"].map(C=>({label:C,value:C})),v=({value:C,disabled:b,onChange:S})=>t.createElement(n.X,{className:"query-segment-operator",value:C,disabled:b,options:y,onChange:S}),i=({datasource:C,filter:{key:b,operator:S,value:M},onKeyChange:x,onOperatorChange:O,onValueChange:L,placeHolder:B,getTagKeysOptions:w,disabled:R})=>t.createElement(t.Fragment,null,t.createElement(f,{disabled:R,datasource:C,filterKey:b,onChange:x,getTagKeysOptions:w}),t.createElement("div",{className:"gf-form"},t.createElement(v,{disabled:R,value:S,onChange:O})),t.createElement(p,{disabled:R,datasource:C,filterKey:b,filterValue:M,onChange:L,placeHolder:B})),u=({datasource:C,appendBefore:b,onCompleted:S,getTagKeysOptions:M})=>{const[x,O]=(0,t.useState)(null),[L,B]=(0,t.useState)("="),w=(0,t.useCallback)(U=>{if(U.value!==o){O(U.value??"");return}O(null)},[O]),R=(0,t.useCallback)(U=>B(U.value??""),[B]),A=(0,t.useCallback)(U=>{S({value:U.value??"",operator:L,condition:"",key:x}),O(null),B("=")},[S,L,x]);return x===null?t.createElement(f,{datasource:C,filterKey:x,onChange:w,getTagKeysOptions:M}):t.createElement(t.Fragment,{key:"filter-builder"},b,t.createElement(i,{datasource:C,filter:{key:x,value:"",operator:L,condition:""},placeHolder:"select value",onKeyChange:w,onOperatorChange:R,onValueChange:A,getTagKeysOptions:M}))},P=({label:C})=>t.createElement("div",{className:"gf-form"},t.createElement("span",{className:"gf-form-label query-keyword"},C));class E extends t.PureComponent{constructor(){super(...arguments),this.onChange=(b,S)=>M=>{const{filters:x}=this.props,{value:O}=M;return M.value===o?this.props.removeFilter(b):this.props.changeFilter(b,{...x[b],[S]:O})},this.appendFilterToVariable=b=>{this.props.addFilter(b)}}render(){const{filters:b,disabled:S}=this.props;return t.createElement("div",{className:"gf-form-inline"},this.renderFilters(b,S),!S&&t.createElement(u,{datasource:this.props.datasource,appendBefore:b.length>0?t.createElement(P,{label:"AND"}):null,onCompleted:this.appendFilterToVariable,getTagKeysOptions:this.props.getTagKeysOptions}))}renderFilters(b,S){return b.length===0&&S?t.createElement(n.X,{disabled:S,value:"No filters",options:[],onChange:()=>{}}):b.reduce((M,x,O)=>(M.length>0&&M.push(t.createElement(P,{label:"AND",key:`condition-${O}`})),M.push(this.renderFilterSegments(x,O,S)),M),[])}renderFilterSegments(b,S,M){return t.createElement(t.Fragment,{key:`filter-${S}`},t.createElement(i,{disabled:M,datasource:this.props.datasource,filter:b,onKeyChange:this.onChange(S,"key"),onOperatorChange:this.onChange(S,"operator"),onValueChange:this.onChange(S,"value"),getTagKeysOptions:this.props.getTagKeysOptions}))}}},79134:(H,T,e)=>{"use strict";e.d(T,{DO:()=>o,Js:()=>r,QL:()=>f,aM:()=>a,e_:()=>l,jo:()=>m});var t=e(32557),n=e(10672),c=e(87095),s=e(63510);const r={...n.Eg,type:"adhoc",datasource:null,filters:[]},g=(0,t.oM)({name:"templating/adhoc",initialState:s.s,reducers:{filterAdded:(d,p)=>{const h=(0,c.ir)(d,p.payload.id);h.type==="adhoc"&&h.filters.push(p.payload.data)},filterRemoved:(d,p)=>{const h=(0,c.ir)(d,p.payload.id);if(h.type!=="adhoc")return;const y=p.payload.data;h.filters.splice(y,1)},filterUpdated:(d,p)=>{const h=(0,c.ir)(d,p.payload.id);if(h.type!=="adhoc")return;const{filter:y,index:v}=p.payload.data;h.filters[v]=y},filtersRestored:(d,p)=>{const h=(0,c.ir)(d,p.payload.id);h.type==="adhoc"&&(h.filters=p.payload.data)}}}),{filterAdded:f,filterRemoved:o,filterUpdated:l,filtersRestored:a}=g.actions,m=g.reducer},82253:(H,T,e)=>{"use strict";e.d(T,{BH:()=>s,QX:()=>r,UY:()=>t,r2:()=>c,xk:()=>n});const t="00000000-0000-0000-0000-000000000000",n="All",c="$__all",s="None",r=""},95125:(H,T,e)=>{"use strict";e.d(T,{R:()=>o,z:()=>f});var t=e(42066),n=e(68404),c=e(68183),s=e(72648),r=e(97379),g=e(49993);const f="Grafana-LegacyVariableQueryEditor",o=({onChange:l,query:a})=>{const m=(0,s.wW)(g.w),[d,p]=(0,n.useState)(a),h=i=>{p(i.currentTarget.value)},y=(0,n.useCallback)(i=>{l(i.currentTarget.value,i.currentTarget.value)},[l]),v=(0,t.Me)();return n.createElement(r.K,{id:v,rows:2,value:d,onChange:h,onBlur:y,placeholder:"Metric name or tags query",required:!0,"aria-label":c.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsQueryInput,cols:52,className:m.textarea})};o.displayName=f},41624:(H,T,e)=>{"use strict";e.d(T,{e:()=>r});var t=e(52423),n=e(68404),c=e(72648),s=e(19825);function r({className:f,...o}){const l=(0,c.wW)(g);return n.createElement(s.D,{...o,className:(0,t.cx)(l.legend,f)})}function g(f){return{legend:(0,t.css)({marginTop:f.spacing(3),marginBottom:f.spacing(1)})}}},83704:(H,T,e)=>{"use strict";e.d(T,{u:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(24799),r=e(53217),g=e(56991);function f({name:l,description:a,value:m,options:d,onChange:p,testId:h,width:y}){const v=(0,c.wW)(o),i=(0,g.L)(),u=`variable-select-input-${l}-${i}`;return n.createElement(s.g,{label:l,description:a,htmlFor:u},n.createElement("div",{"data-testid":h},n.createElement(r.Ph,{inputId:u,onChange:p,value:m,width:y??30,options:d,className:v.selectContainer})))}function o(l){return{selectContainer:t.css`
      margin-right: ${l.spacing(.5)};
    `}}},49993:(H,T,e)=>{"use strict";e.d(T,{W:()=>f,w:()=>o});var t=e(52423),n=e(42066),c=e(68404),s=e(72648),r=e(24799),g=e(97379);function f({value:l,name:a,description:m,placeholder:d,onChange:p,onBlur:h,ariaLabel:y,required:v,width:i,testId:u}){const P=(0,s.wW)(o),E=(0,n.Me)();return c.createElement(r.g,{label:a,description:m,htmlFor:E},c.createElement(g.K,{id:E,rows:2,value:l,onChange:p,onBlur:h,placeholder:d,required:v,"aria-label":y,cols:i,className:P.textarea,"data-testid":u}))}function o(l){return{textarea:t.css`
      white-space: pre-wrap;
      min-height: ${l.spacing(4)};
      height: auto;
      overflow: auto;
      padding: ${l.spacing(.75,1)};
      width: inherit;
    `}}},57052:(H,T,e)=>{"use strict";e.d(T,{V:()=>r});var t=e(42066),n=e(68404),c=e(24799),s=e(46967);function r({value:g,name:f,placeholder:o="",onChange:l,testId:a,width:m,required:d,onBlur:p,grow:h,description:y,invalid:v,error:i,maxLength:u}){const P=(0,t.Me)(f);return n.createElement(c.g,{label:f,description:y,invalid:v,error:i,htmlFor:P},n.createElement(s.I,{type:"text",id:P,placeholder:o,value:g,onChange:l,onBlur:p,width:h?void 0:m??30,"data-testid":a,maxLength:u,required:d}))}},50678:(H,T,e)=>{"use strict";e.d(T,{PF:()=>n,PV:()=>m,QR:()=>d,Sg:()=>a,Yo:()=>r,gl:()=>s,qe:()=>o,wJ:()=>f,y8:()=>g,z7:()=>l});var t=e(32557);const n={id:"",isValid:!0,errors:{},name:"",extended:null},c=(0,t.oM)({name:"templating/editor",initialState:n,reducers:{variableEditorMounted:(p,h)=>{p.name=h.payload.name,p.id=h.payload.id},variableEditorUnMounted:(p,h)=>n,changeVariableNameSucceeded:(p,h)=>{p.name=h.payload.data.newName,delete p.errors.name,p.isValid=Object.keys(p.errors).length===0},changeVariableNameFailed:(p,h)=>{p.name=h.payload.newName,p.errors.name=h.payload.errorText,p.isValid=Object.keys(p.errors).length===0},addVariableEditorError:(p,h)=>{p.errors[h.payload.errorProp]=h.payload.errorText,p.isValid=Object.keys(p.errors).length===0},removeVariableEditorError:(p,h)=>{delete p.errors[h.payload.errorProp],p.isValid=Object.keys(p.errors).length===0},changeVariableEditorExtended:(p,h)=>{p.extended={...p.extended,...h.payload}},cleanEditorState:()=>n}}),s=c.reducer,{changeVariableNameSucceeded:r,changeVariableNameFailed:g,variableEditorMounted:f,variableEditorUnMounted:o,changeVariableEditorExtended:l,addVariableEditorError:a,removeVariableEditorError:m,cleanEditorState:d}=c.actions},69155:(H,T,e)=>{"use strict";e.d(T,{c:()=>c});var t=e(40885),n=e(22323);function c(s){const r={},g=(0,t.J)().getVariables();for(let f=0;f<g.length;f++){const o=g[f];if(s&&s[o.name]!==void 0){if(s[o.name].skipUrlSync)continue;r["var-"+o.name]=s[o.name].value}else{if(o.skipUrlSync)continue;r["var-"+o.name]=n.z.get(o.type).getValueForUrl(o)}}return r}},15546:(H,T,e)=>{"use strict";e.d(T,{$7:()=>y,Ju:()=>m,Kn:()=>s,Kr:()=>o,NX:()=>h,R:()=>a,U4:()=>g,VC:()=>r,X7:()=>p,Xh:()=>c,d7:()=>d,eL:()=>f});var t=e(59670),n=e(95125);const c=v=>v.type==="query",s=v=>v.type==="adhoc",r=v=>v.type==="constant",g=v=>"multi"in v,f=v=>"options"in v,o=v=>"current"in v;function l(v){return v===null?!1:typeof v=="string"}const a=v=>Boolean(v.metricFindQuery)&&!Boolean(v.variables),m=v=>{if(!v.variables||v.variables.getType()!==t.j2.Standard)return!1;const i=v.variables;return"toDataQuery"in i&&Boolean(i.toDataQuery)},d=v=>{if(!v.variables||v.variables.getType()!==t.j2.Custom)return!1;const i=v.variables;return"query"in i&&"editor"in i&&Boolean(i.query)&&Boolean(i.editor)},p=v=>v.variables?v.variables.getType()===t.j2.Datasource:!1;function h(v,i){return v?v.displayName===n.z||a(i):!1}function y(v,i){return v?v.displayName!==n.z&&(p(i)||m(i)||d(i)):!1}},37737:(H,T,e)=>{"use strict";e.d(T,{Kf:()=>n,iV:()=>s,j4:()=>r});var t=e(32557);const n={usages:[],usagesNetwork:[]},c=(0,t.oM)({name:"templating/inspect",initialState:n,reducers:{initInspect:(g,f)=>{const{usages:o,usagesNetwork:l}=f.payload;g.usages=o,g.usagesNetwork=l}}}),s=c.reducer,{initInspect:r}=c.actions},19248:(H,T,e)=>{"use strict";e.d(T,{MJ:()=>m,GQ:()=>l,V:()=>v,Of:()=>a,PQ:()=>P,dH:()=>O,Yg:()=>i,Rv:()=>M,vI:()=>b});var t=e(89029);function n(L,B){const w=new Set;for(const R of L)w.add(B(R));return w}var c=e(96161),s=e(55935),r=e(86899),g=e(22323),f=e(15546),o=e(92624);const l=L=>{const B=[];for(const w of L)B.push({id:w.id,label:`${w.id}`});return B},a=(L,B)=>L.filter(w=>B.some(R=>R.from===w.id||R.to===w.id)),m=L=>{const B=[];for(const w of L)for(const R of L){if(w===R)continue;g.z.get(w.type).dependsOn(w,R)&&B.push({from:w.id,to:R.id})}return B};function d(L){const B=(0,o.a9)(L);return B?B.slice(1).find(R=>R!==void 0):void 0}const p=(L,B)=>{o.J7.lastIndex=0;const w=[],A=(0,s.Xh)(B,2).match(o.J7);if(!A)return w;for(const U of A){if(!U||U.indexOf("$__")!==-1||U.indexOf("${__")!==-1||U.indexOf("$hashKey")!==-1)continue;const I=d(U);L.some(N=>N.id===I)||w.find(N=>N===I)||I&&w.push(I)}return w},h={alias:[/^m$/,/^measurement$/,/^col$/,/^tag_(\w+|\d+)$/],query:[/^timeFilter$/]},y=(L,B,w)=>{const R=Object.keys(B.value).reduce((U,I)=>{const N=B.value[I];if(!N||typeof N!="string")return U;const F=h[I]?h[I].find(Y=>Y.test(L)):void 0;let D=(0,o.QI)(N,L);return I==="repeat"&&N===L&&(D=!0),!F&&D&&(U={...U,[I]:N}),U},{}),A=Object.keys(B.value).reduce((U,I)=>{const N=B.value[I];if(N&&typeof N=="object"&&Object.keys(N).length){let F=N.title||N.name||N.id||I;Array.isArray(B.value)&&B.key==="panels"&&(F=`${F}[${N.id}]`);const D=y(L,{key:I,value:N},{});Object.keys(D).length&&(U={...U,[F]:D})}return U},{});return(Object.keys(R).length||Object.keys(A).length)&&(w={...w,...R,...A}),w},v=(L,B)=>{if(!B)return{unUsed:[],usages:[]};const w=[];let R=[];const A=B.getSaveModelClone();for(const U of L){const I=U.id,N=y(I,{key:"model",value:A},{});!Object.keys(N).length&&!(0,f.Kn)(U)&&w.push(U),Object.keys(N).length&&R.push({variable:U,tree:N})}return{unUsed:w,usages:R}};async function i(L,B){return new Promise((w,R)=>{setTimeout(()=>{try{const A=u(L,B);w(b(A))}catch(A){R(A)}},200)})}function u(L,B){if(!B)return[];let w=[];const R=B.getSaveModelClone(),A=p(L,R);for(const U of A){const I=y(U,{key:"model",value:R},{});if(Object.keys(I).length){const N={id:U,name:U};w.push({variable:N,tree:I})}}return w}function P(L,B,w){const R=n(B.descendants(L),U=>U.name);R.add(t.W.includeVars);for(const U of L)R.add(U);return E([...R],w)}function E(L,B){const w=[];for(const R of L)B[R]&&w.push(...B[R]);return new Set(w)}const C=(L,B)=>{const{id:w,value:R}=B,{nodes:A,edges:U}=L;if(R&&typeof R=="string"){const I=`${B.id}-${R}`;return A.push({id:I,label:R}),U.push({from:I,to:w}),L}if(R&&typeof R=="object"){const I=Object.keys(R);for(const N of I){const F=`${B.id}-${N}`;A.push({id:F,label:N}),U.push({from:F,to:w}),L=C(L,{id:F,value:R[N]})}return L}return L},b=L=>{const B=[];for(const w of L){const{variable:R,tree:A}=w,U={variable:R,nodes:[{id:"dashboard",label:"dashboard"}],edges:[],showGraph:!1};B.push(C(U,{id:"dashboard",value:A}))}return B},S=L=>Object.values(L).reduce((w,R)=>typeof R=="object"?w+S(R):w+1,0),M=(L,B)=>{const w=B.find(R=>R.variable.id===L);return w?S(w.tree):0};function x(L){const B=[];for(const w of L)B.push(w),w.panels?.length&&B.push(...x(w.panels.map(R=>new PanelModel(R))));return B}function O(L){const B={};for(const w of L){const R=(0,c.J)(w),A=[...R.matchAll(/"repeat":"([^"]+)"/g)].map(N=>N[1]),U=R.match(o.J7)?.map(N=>d(N))??[],I=[...A,...U];for(const N of I)N in B?B[N].add(w.id):B[N]=new Set([w.id])}return B}},85972:(H,T,e)=>{"use strict";e.d(T,{XJ:()=>S,nn:()=>i,yy:()=>f,Ew:()=>u,cv:()=>M,aN:()=>v,iQ:()=>P,_M:()=>y,ss:()=>C,wF:()=>b,Ug:()=>E});var t=e(32557),n=e(82897);const c=(x,...O)=>O.reduce((L,B)=>B(L),x);var s=e(82253),r=e(15546),g=e(92624);const f={id:"",highlightIndex:-1,queryValue:"",selectedValues:[],options:[],multi:!1},o=1e3,l=x=>Array.isArray(x)?x.reduce((O,L)=>((0,n.isString)(L.value)&&(O[L.value]=L),O),{}):{},a=x=>{if(!Array.isArray(x.options))return x.options=[],x;const O=l(x.selectedValues);return x.selectedValues=Object.values(O),x.options=x.options.map(L=>{if(!(0,n.isString)(L.value))return L;const B=!!O[L.value];return L.selected===B?L:{...L,selected:B}}),x.options=m(x.options),x},m=x=>Array.isArray(x)?x.length<=o?x:x.slice(0,o):[],d=x=>{const{options:O,selectedValues:L}=x;return O.length===0||L.length>0||!O[0]||O[0].value!==s.r2||(x.selectedValues=[{...O[0],selected:!0}]),x},p=x=>{const{selectedValues:O}=x;return O.length>1&&(x.selectedValues=O.filter(L=>L.value!==s.r2)),x},h=(0,t.oM)({name:"templating/optionsPicker",initialState:f,reducers:{showOptions:(x,O)=>{const{query:L,options:B}=O.payload;if(x.highlightIndex=-1,x.options=(0,n.cloneDeep)(B),x.id=O.payload.id,x.queryValue="",x.multi=!1,(0,r.U4)(O.payload)&&(x.multi=O.payload.multi??!1),(0,r.Xh)(O.payload)){const{queryValue:w}=O.payload,R=(0,g.bf)(L);x.queryValue=R&&w?w:""}return x.selectedValues=x.options.filter(w=>w.selected),c(x,d,a)},hideOptions:(x,O)=>({...f}),toggleOption:(x,O)=>{const{option:L,clearOthers:B,forceSelect:w}=O.payload,{multi:R,selectedValues:A}=x;if(L){const U=!A.find(I=>I.value===L.value&&I.text===L.text);if(L.value===s.r2||!R||B)return U||w?x.selectedValues=[{...L,selected:!0}]:x.selectedValues=[],c(x,d,p,a);if(w||U)return x.selectedValues.push({...L,selected:!0}),c(x,d,p,a);x.selectedValues=A.filter(I=>I.value!==L.value&&I.text!==L.text)}else x.selectedValues=[];return c(x,d,p,a)},moveOptionsHighlight:(x,O)=>{let L=x.highlightIndex+O.payload;return L<0?L=-1:L>=x.options.length&&(L=x.options.length-1),{...x,highlightIndex:L}},toggleAllOptions:(x,O)=>x.selectedValues.length>0?(x.selectedValues=[],c(x,a)):(x.selectedValues=x.options.filter(L=>L.value!==s.r2).map(L=>({...L,selected:!0})),c(x,a)),updateSearchQuery:(x,O)=>(x.queryValue=O.payload,x),updateOptionsAndFilter:(x,O)=>{const L=(0,n.trimStart)((x.queryValue??"").toLowerCase());return x.options=O.payload.filter(B=>{const w=B.text??"";return(Array.isArray(w)?w.toString():w).toLowerCase().indexOf(L)!==-1}),x.highlightIndex=0,c(x,d,a)},updateOptionsFromSearch:(x,O)=>(x.options=O.payload,x.highlightIndex=0,c(x,d,a)),cleanPickerState:()=>f}}),{toggleOption:y,showOptions:v,hideOptions:i,moveOptionsHighlight:u,toggleAllOptions:P,updateSearchQuery:E,updateOptionsAndFilter:C,updateOptionsFromSearch:b,cleanPickerState:S}=h.actions,M=h.reducer},96188:(H,T,e)=>{"use strict";e.d(T,{x:()=>t});const t=(s,r)=>s&&(r&&!Array.isArray(s.value)?{...s,value:c(s.value),text:c(s.text)}:!r&&Array.isArray(s.value)?{...s,value:n(s.value),text:n(s.text)}:s),n=s=>Array.isArray(s)?s.length>0?s[0]:"":s,c=s=>Array.isArray(s)?s:[s]},85803:(H,T,e)=>{"use strict";e.d(T,{Ci:()=>z,DU:()=>me,Fz:()=>J,LX:()=>se,MB:()=>Ee,Rk:()=>X,Z7:()=>I,kG:()=>G,wX:()=>q,xQ:()=>ae,xs:()=>le});var t=e(82897),n=e.n(t),c=e(49922),s=e(5916),r=e(37932),g=e(659),f=e(82002),o=e(19349),l=e(3153),a=e(60499),m=e(77582),d=e(29930),p=e(28630),h=e(91162),y=e(98639),v=e(22323),i=e(82253),u=e(50678),P=e(15546),E=e(19248),C=e(85972),b=e(96188),S=e(10672),M=e(92624),x=e(7240),O=e(87095),L=e(92990),B=e(75138),w=e(6942);const R=(ue,Oe)=>(Fe,Ie)=>{let we=0;const Re=Oe.templating.list;for(let et=0;et<Re.length;et++){const qe=A(Re[et]);qe.rootStateKey=ue,v.z.getIfExists(qe.type)&&Fe((0,x.mb)(ue,(0,L.VN)((0,M.Y6)(qe,{global:!1,index:we++,model:qe}))))}(0,y.J)().updateTimeRange((0,o.$t)().timeRange());const _e=(0,O.gt)(ue,Ie());for(const et of _e)Fe((0,x.mb)(ue,(0,L.Mn)((0,M.Y6)(et))))};function A(ue){if(!(0,P.eL)(ue))return ue;let Oe=!1;for(const Fe of ue.options)if(Fe.selected=!1,Array.isArray(ue.current.value))for(const Ie of ue.current.value)Fe.value===Ie&&(Fe.selected=Oe=!0);else Fe.value===ue.current.value&&(Fe.selected=Oe=!0);return!Oe&&ue.options.length&&(ue.options[0].selected=!0),ue}const U=(ue,Oe)=>Fe=>{const Ie={...S.Eg,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:S.bU.hideVariable,current:{value:{name:Oe.title,uid:Oe.uid,toString:()=>Oe.title}}};Fe((0,x.mb)(ue,(0,L.VN)((0,M.Y6)(Ie,{global:Ie.global,index:Ie.index,model:Ie}))));const we={...S.Eg,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:S.bU.hideVariable,current:{value:{name:f.Vt.user.orgName,id:f.Vt.user.orgId,toString:()=>f.Vt.user.orgId.toString()}}};Fe((0,x.mb)(ue,(0,L.VN)((0,M.Y6)(we,{global:we.global,index:we.index,model:we}))));const Re={...S.Eg,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:S.bU.hideVariable,current:{value:{login:f.Vt.user.login,id:f.Vt.user.id,email:f.Vt.user.email,toString:()=>f.Vt.user.id.toString()}}};Fe((0,x.mb)(ue,(0,L.VN)((0,M.Y6)(Re,{global:Re.global,index:Re.index,model:Re}))))},I=(ue,Oe)=>(Fe,Ie)=>{const{rootStateKey:we}=ue,Re=(0,O.E0)(ue,Ie());if(!(0,P.U4)(Re))return;const _e=(0,b.x)(Re.current,Oe);Fe((0,x.mb)(we,(0,L.Pl)((0,M.Y6)(ue,{propName:"multi",propValue:Oe})))),Fe((0,x.mb)(we,(0,L.Pl)((0,M.Y6)(ue,{propName:"current",propValue:_e}))))},N=async(ue,Oe)=>{if(!ue.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${ue.id}`);if(F(ue,Oe))throw new Error("Circular dependency in dashboard variables detected. Dashboard may not work as expected.");const Fe=D(ue,Oe);Y(ue.rootStateKey,Fe,Oe)&&await new Promise(Ie=>{const we=l.h.subscribe(()=>{if(!ue.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${ue.id}`);Y(ue.rootStateKey,Fe,l.h.getState())||(we(),Ie())})})},F=(ue,Oe,Fe=new Set)=>Fe.has(ue.id)?!0:(Fe=new Set([...Fe,ue.id]),D(ue,Oe).some(Ie=>F(Ie,Oe,Fe))),D=(ue,Oe)=>{if(!ue.rootStateKey)return[];const Fe=[];for(const Ie of(0,O.gt)(ue.rootStateKey,Oe))ue!==Ie&&v.z.getIfExists(ue.type)&&v.z.get(ue.type).dependsOn(ue,Ie)&&Fe.push(Ie);return Fe},Y=(ue,Oe,Fe)=>{if(Oe.length===0)return!1;const Ie=(0,O.gt)(ue,Fe);return Oe.filter(Re=>Ie.some(_e=>_e.id===Re.id&&(_e.state===c.Gu.NotStarted||_e.state===c.Gu.Loading))).length>0},j=(ue,Oe)=>async(Fe,Ie)=>{const we=(0,O.E0)(ue,Ie());await N(we,Ie());const Re=Oe["var-"+we.name];if(Re!==void 0){const _e=(0,M.Hi)(Re);await v.z.get(we.type).setValueFromUrl(we,_e);return}if(we.hasOwnProperty("refresh")){const _e=we;if(_e.refresh===S.Bd.onDashboardLoad||_e.refresh===S.Bd.onTimeRangeChanged){await Fe(X((0,M.yQ)(_e)));return}}Fe(Be(ue))},K=ue=>async(Oe,Fe)=>{const Ie=r.E1.getSearchObject(),we=(0,O.gt)(ue,Fe()).map(async Re=>await Oe(j((0,M.yQ)(Re),Ie)));await Promise.all(we)},z=(ue,Oe)=>async(Fe,Ie)=>{const we=(0,M.Hi)(Oe),Re=(0,O.E0)(ue,Ie());(0,M.iD)(Re)!==S.Bd.never&&await Fe(X((0,M.yQ)(Re)));const _e=(0,O.E0)((0,M.yQ)(Re),Ie());if(!(0,P.eL)(_e))return;if(!_e)throw new Error(`Couldn't find variable with name: ${Re.name}`);let et=_e.options.find(qe=>qe.text===we||qe.value===we);if(!et&&(0,P.U4)(_e)&&_e.allValue&&we===_e.allValue&&(et={text:i.xk,value:i.r2,selected:!1}),!et){let qe=we;const Je=we;Array.isArray(we)&&(qe=we.reduce((lt,at)=>{const Xe=_e.options.find(gt=>gt.value===at);return Xe?[].concat(lt,[Xe.text]):[].concat(lt,[at])},[])),et={text:qe,value:Je,selected:!1}}(0,P.U4)(_e)&&(et=(0,b.x)({text:(0,t.castArray)(et.text),value:(0,t.castArray)(et.value),selected:!1},_e.multi)),await v.z.get(Re.type).setValue(_e,et)},Z=ue=>{let Oe,Fe,Ie,we;const Re=[];for(Oe=0;Oe<ue.options.length;Oe++)if(we={...ue.options[Oe]},we.selected=!1,Array.isArray(ue.current.value))for(Fe=0;Fe<ue.current.value.length;Fe++)Ie=ue.current.value[Fe],we.value===Ie&&(we.selected=!0,Re.push(we));else we.value===ue.current.value&&(we.selected=!0,Re.push(we));return Re},ae=(ue,Oe)=>(Fe,Ie)=>{const we=(0,O.E0)(ue,Ie());if(!(0,P.eL)(we))return Promise.resolve();const Re=we.current||{},_e=v.z.get(we.type).setValue;if(Array.isArray(Re.value)){const Je=Z(we);if(Je.length===0){const at=we.options[0];return _e(we,at)}const lt={value:Je.map(at=>at.value),text:Je.map(at=>at.text),selected:!0};return _e(we,lt)}let et=null;const qe=(0,M.Tt)(we);if(et=we.options?.find(Je=>Je.text===qe),et||Oe&&(et=we.options?.find(Je=>Je.text===Oe),et))return _e(we,et);if(we.options){const Je=we.options[0];if(Je)return _e(we,Je)}return Promise.resolve()},J=(ue,Oe,Fe)=>async Ie=>{const{rootStateKey:we}=ue;return Ie((0,x.mb)(we,(0,L.Q8)((0,M.Y6)(ue,{option:Oe})))),await Ie(Ee(ue,Fe))},oe=ue=>{const Oe=new p.kJ;return ue.forEach(Fe=>{Oe.createNode(Fe.name)}),ue.forEach(Fe=>{ue.forEach(Ie=>{Fe!==Ie&&v.z.get(Fe.type).dependsOn(Fe,Ie)&&Oe.link(Fe.name,Ie.name)})}),Oe},Ee=(ue,Oe,Fe=m.h$)=>async(Ie,we)=>{const Re=we(),{rootStateKey:_e}=ue,et=(0,O.E0)(ue,Re);if((0,O.AE)(_e,Re).transaction.status===S.LN.Fetching)return(0,M.iD)(et)===S.Bd.never&&(await Ie(ke((0,M.yQ)(et))),Ie(Be(ue))),Promise.resolve();const qe=(0,O.gt)(_e,Re),Je=oe(qe),lt=Re.dashboard?.getModel()?.panels??[],at=(0,E.dH)(lt),Xe=(0,P.Kn)(et)?{refreshAll:!0,panelIds:[]}:{refreshAll:!1,panelIds:Array.from((0,E.PQ)([et.id],Je,at))},gt=Je.getNode(et.name);let ot=[];return gt&&(ot=gt.getOptimizedInputEdges().map(Ye=>{const mt=qe.find(ce=>ce.name===Ye.inputNode?.name);return mt?Ie(X((0,M.yQ)(mt))):Promise.resolve()})),Promise.all(ot).then(()=>{Oe&&(Fe.publish(new S.x9(Xe)),r.E1.partial(ee(_e,we)))})},me=(ue,Oe,Fe={templateSrv:(0,y.J)(),events:m.h$})=>async(Ie,we)=>{Fe.templateSrv.updateTimeRange(Oe);const Re=(0,O.gt)(ue,we()).filter(qe=>qe.hasOwnProperty("refresh")&&qe.hasOwnProperty("options")?qe.refresh===S.Bd.onTimeRangeChanged:!1),_e=Re.map(qe=>qe.id),et=Re.map(qe=>Ie(re((0,M.yQ)(qe))));try{await Promise.all(et),Fe.events.publish(new S.eq({variableIds:_e}))}catch(qe){console.error(qe),Ie((0,g.$l)(de("Template variable service failed",qe)))}},re=ue=>async(Oe,Fe)=>{const Ie=(0,O.E0)(ue,Fe());if(!(0,P.eL)(Ie))return;const we=Ie.options.slice();await Oe(X((0,M.yQ)(Ie),!0));const Re=(0,O.E0)(ue,Fe());if(!(0,P.eL)(Re))return;const _e=Re.options;JSON.stringify(we)!==JSON.stringify(_e)&&Fe().dashboard.getModel()?.templateVariableValueUpdated()},le=(ue,Oe,Fe=m.h$)=>async(Ie,we)=>{const Re=[],_e=we().dashboard.getModel(),et=(0,O.gt)(ue,we());for(const Xe of et){const gt=`var-${Xe.name}`;if(!Oe.hasOwnProperty(gt)||!pe(Xe,Oe[gt].value))continue;let ot=Oe[gt].value;if(Oe[gt].removed){const mt=_e?.templating.list.find(ce=>ce.name===Xe.name);mt&&(0,P.Kr)(mt)&&(ot=mt.current.value),mt&&(0,P.VC)(mt)&&(ot=mt.query)}const Ye=v.z.get(Xe.type).setValueFromUrl(Xe,ot);Re.push(Ye)}const qe=et.filter(Xe=>{const gt=`var-${Xe.name}`;return Oe.hasOwnProperty(gt)&&pe(Xe,Oe[gt].value)&&!(0,P.Kn)(Xe)}),Je=oe(et),lt=(0,E.dH)(_e?.panels??[]),at=(0,E.PQ)(qe.map(Xe=>Xe.id),Je,lt);Re.length&&(await Promise.all(Re),Fe.publish(new S.Wy({refreshAll:at.size===0,panelIds:Array.from(at)})))};function pe(ue,Oe){const Fe=v.z.get(ue.type).getValueForUrl(ue);let Ie=(0,M.Hi)(Oe);return Array.isArray(Fe)&&!Array.isArray(Ie)&&(Ie=[Ie]),!(0,t.isEqual)(Fe,Ie)}const ee=(ue,Oe)=>{const Fe=r.E1.getSearchObject(),Ie=Object.keys(Fe).filter(we=>we.indexOf("var-")===-1).reduce((we,Re)=>(we[Re]=Fe[Re],we),{});for(const we of(0,O.gt)(ue,Oe())){if(we.skipUrlSync)continue;const Re=v.z.get(we.type);Ie["var-"+we.name]=Re.getValueForUrl(we)}return Ie},se=(ue,Oe)=>async(Fe,Ie)=>{try{const we=(0,M.mn)(ue),Re=Ie(),_e=(0,O.cp)(Re);_e&&(0,O.AE)(_e,Re).transaction.status===S.LN.Fetching&&Fe(q(_e)),Fe((0,x.mb)(we,(0,B.Z9)({uid:we}))),Fe(U(we,Oe)),Fe(R(we,Oe)),Fe(Q(we)),await Fe(K(we)),Fe((0,x.mb)(we,(0,B.iv)({uid:we})))}catch(we){Fe((0,g.$l)(de("Templating init failed",we))),console.error(we)}};function Q(ue,Oe=h.ak){return(Fe,Ie)=>{const we=(0,O.gt)(ue,Ie());for(const Re of we){if(!(0,P.Kn)(Re)&&!(0,P.Xh)(Re))continue;const{datasource:_e}=Re;if((0,s.cv)(_e))continue;const et=Oe().getInstanceSettings(_e),qe=et?(0,s.iU)(et):{uid:_e};Fe((0,x.mb)(ue,(0,L.Pl)((0,M.Y6)(Re,{propName:"datasource",propValue:qe}))))}}}const G=ue=>Oe=>{Oe((0,x.mb)(ue,(0,w.S)())),Oe((0,x.mb)(ue,(0,u.QR)())),Oe((0,x.mb)(ue,(0,C.XJ)())),Oe((0,x.mb)(ue,(0,B.p3)()))},q=(ue,Oe={getBackendSrv:d.i})=>Fe=>{Oe.getBackendSrv().cancelAllInFlightRequests(),Fe(G(ue))},X=(ue,Oe=!1)=>async(Fe,Ie)=>{const{rootStateKey:we}=ue;try{if(!(0,M.A3)(we,Ie()))return;const Re=(0,O.E0)(ue,Ie());Fe((0,x.mb)(we,(0,L.$M)((0,M.Y6)(Re)))),await Fe(ke((0,M.yQ)(Re))),await v.z.get(Re.type).updateOptions(Re),Fe(Be(ue))}catch(Re){if(Fe((0,x.mb)(we,(0,L.Le)((0,M.Y6)(ue,{error:Re})))),Oe||(console.error(Re),Fe((0,g.$l)(de("Error updating options:",Re,ue)))),Oe)throw Re}},de=(ue,Oe,Fe)=>(0,a.t_)(`${Fe?`Templating [${Fe.id}]`:"Templating"}`,`${ue} ${Oe.message}`),Be=ue=>(Oe,Fe)=>{const{rootStateKey:Ie}=ue;if(!(0,M.A3)(Ie,Fe()))return;const we=(0,O.E0)(ue,Fe());we.state!==c.Gu.Done&&Oe((0,x.mb)(ue.rootStateKey,(0,L.qQ)((0,M.Y6)(we))))};function ke(ue,Oe=h.ak){return async function(Fe,Ie){const{id:we,rootStateKey:Re}=ue;if(!(0,M.A3)(Re,Ie()))return;const _e=(0,O.E0)(ue,Ie());if(_e.type==="query")try{const et=await Oe().get(_e.datasource??"");if((0,P.R)(et)||!(0,P.Ju)(et)||He(_e.query))return;const qe={refId:`${et.name}-${we}-Variable-Query`,query:_e.query};Fe((0,x.mb)(Re,(0,L.Pl)((0,M.Y6)(ue,{propName:"query",propValue:qe}))))}catch(et){Fe((0,g.$l)(de("Failed to upgrade legacy queries",et))),console.error(et)}}}function He(ue){return ue?ue.hasOwnProperty("refId")&&typeof ue.refId=="string":!1}},7240:(H,T,e)=>{"use strict";e.d(T,{ZP:()=>l,mb:()=>g,qM:()=>s});var t=e(92624),n=e(51511),c=e(75138);const s={keys:{}},r=a=>({type:`templating/keyed/${a.action.type.replace(/^templating\//,"")}`,payload:a});function g(a,m){const d=(0,t.mn)(a);return r({key:d,action:m})}const f=a=>typeof a.type=="string"&&a.type.startsWith("templating/keyed")&&"payload"in a&&typeof a.payload.key=="string";function o(a=s,m){if(f(m)){const{key:d,action:p}=m.payload,h=(0,t.mn)(d),y=c.Z9.match(p)?h:a.lastKey,v=(0,n.Q)(),i=a.keys[h],u=v(i,p);return{...a,lastKey:y,keys:{...a.keys,[h]:u}}}return a}const l={templating:o}},51511:(H,T,e)=>{"use strict";e.d(T,{L:()=>a,Q:()=>l});var t=e(31259),n=e(50678),c=e(37737),s=e(85972),r=e(75138),g=e(63510),f=e(6942);let o;function l(){return o||(o=(0,t.combineReducers)({editor:n.gl,variables:f.L,optionsPicker:s.cv,transaction:r.vw,inspect:c.iV})),o}function a(){return{editor:n.PF,variables:g.s,optionsPicker:s.yy,transaction:r.xO,inspect:c.Kf}}},87095:(H,T,e)=>{"use strict";e.d(T,{AE:()=>f,E0:()=>r,Eo:()=>d,IV:()=>a,Q4:()=>i,QT:()=>p,S_:()=>v,_K:()=>P,cp:()=>y,gt:()=>o,ir:()=>E,ng:()=>u,xD:()=>m});var t=e(58635),n=e(3153),c=e(92624),s=e(51511);function r(C,b=(0,n.y0)(),S=!0){const{id:M,rootStateKey:x}=C,L=f(x,b).variables[M];if(!L){if(S)throw new Error(`Couldn't find variable with id:${M}`);return}return L}function g(C,b,S=(0,n.y0)()){return Object.values(f(b,S).variables).filter(C).sort((M,x)=>M.index-x.index)}function f(C,b=(0,n.y0)()){return b.templating.keys[(0,c.mn)(C)]??(0,s.L)()}function o(C,b=(0,n.y0)()){return g(l,C,b)}function l(C){return C.type!=="system"}const a=(0,t.Z)((C,b)=>o(C,(0,n.y0)())),m=(C,b)=>o(C,b);function d(C,b=(0,n.y0)()){return p(Object.values(f(C,b).variables))}function p(C){const b=C.filter(l).sort((S,M)=>S.index-M.index);return b.length>0?b[b.length-1].index+1:0}function h(C,b=getState()){return f(C,b).transaction.isDirty}function y(C=(0,n.y0)()){return C.templating?.lastKey}function v(C=(0,n.y0)()){if(!C.templating?.lastKey)throw new Error("Accessing lastKey without initializing it variables");return C.templating.lastKey}function i(C,b=(0,n.y0)()){const S=y(b);return S?g(C,S,b):[]}function u(C=(0,n.y0)()){const b=y(C);return b?o(b,C):[]}function P(C,b=(0,n.y0)()){const S=y(b);if(S)return r({id:C,rootStateKey:S,type:"query"},b,!1)}function E(C,b){return C[b]}},92990:(H,T,e)=>{"use strict";e.d(T,{$M:()=>C,Be:()=>P,Le:()=>S,Mn:()=>E,Pl:()=>y,Q8:()=>u,VN:()=>h,Y9:()=>i,b5:()=>d,gE:()=>v,mZ:()=>p,qQ:()=>b});var t=e(32557),n=e(82897),c=e.n(n),s=e(49922),r=e(22323),g=e(50678),f=e(15546),o=e(92624),l=e(87095),a=e(63510);const m=(0,t.oM)({name:"templating/shared",initialState:a.s,reducers:{addVariable:(M,x)=>{const O=x.payload.id??x.payload.data.model.name,L=r.z.get(x.payload.type),B=(0,n.cloneDeep)(L.initialState),w=L.beforeAdding?L.beforeAdding(x.payload.data.model):(0,n.cloneDeep)(x.payload.data.model),R={...(0,n.defaults)({},w,B),id:O,index:x.payload.data.index,global:x.payload.data.global};M[O]=R},variableStateNotStarted:(M,x)=>{const O=(0,l.ir)(M,x.payload.id);O.state=s.Gu.NotStarted,O.error=null},variableStateFetching:(M,x)=>{const O=(0,l.ir)(M,x.payload.id);O.state=s.Gu.Loading,O.error=null},variableStateCompleted:(M,x)=>{const O=(0,l.ir)(M,x.payload.id);O&&(O.state=s.Gu.Done,O.error=null)},variableStateFailed:(M,x)=>{const O=(0,l.ir)(M,x.payload.id);O&&(O.state=s.Gu.Error,O.error=x.payload.data.error)},removeVariable:(M,x)=>{if(delete M[x.payload.id],!x.payload.data.reIndex)return;const O=Object.values(M).sort((L,B)=>L.index-B.index);for(let L=0;L<O.length;L++)O[L].index=L},duplicateVariable:(M,x)=>{const O=(0,n.cloneDeep)(M[x.payload.id]),L=`copy_of_${O.name}`,B=x.payload.data?.newId??L,w=(0,l.QT)(Object.values(M));M[B]={...(0,n.cloneDeep)(r.z.get(x.payload.type).initialState),...O,id:B,name:L,index:w}},changeVariableOrder:(M,x)=>{const{toIndex:O,fromIndex:L}=x.payload.data,B=Object.values(M);for(let w=0;w<B.length;w++){const R=B[w];R.index===L?R.index=O:R.index>L&&R.index<=O?R.index--:R.index<L&&R.index>=O&&R.index++}},changeVariableType:(M,x)=>{const{id:O}=x.payload,{label:L,name:B,index:w,description:R,rootStateKey:A}=M[O];M[O]={...(0,n.cloneDeep)(r.z.get(x.payload.data.newType).initialState),id:O,rootStateKey:A,label:L,name:B,index:w,description:R}},setCurrentVariableValue:(M,x)=>{if(!x.payload.data.option)return;const O=(0,l.ir)(M,x.payload.id);if(!(0,f.eL)(O))return;const{option:L}=x.payload.data,B={...L,text:(0,o.Hi)(L?.text),value:(0,o.Hi)(L?.value)};O.current=B,O.options=O.options.map(w=>{w.value=(0,o.Hi)(w.value),w.text=(0,o.Hi)(w.text);let R=!1;if(Array.isArray(B.value))for(let A=0;A<B.value.length;A++){const U=B.value[A];if(w.value===U){R=!0;break}}else w.value===B.value&&(R=!0);return w.selected=R,w})},changeVariableProp:(M,x)=>{const O=(0,l.ir)(M,x.payload.id);O[x.payload.data.propName]=x.payload.data.propValue}},extraReducers:M=>M.addCase(g.Yo,(x,O)=>{const L=(0,l.ir)(x,O.payload.id);L.name=O.payload.data.newName})}),d=m.reducer,{removeVariable:p,addVariable:h,changeVariableProp:y,changeVariableOrder:v,duplicateVariable:i,setCurrentVariableValue:u,changeVariableType:P,variableStateNotStarted:E,variableStateFetching:C,variableStateCompleted:b,variableStateFailed:S}=m.actions},75138:(H,T,e)=>{"use strict";e.d(T,{Z9:()=>f,iv:()=>l,p3:()=>o,vw:()=>a,xO:()=>s});var t=e(32557),n=e(10672),c=e(92990);const s={uid:null,status:n.LN.NotStarted,isDirty:!1},r=(0,t.oM)({name:"templating/transaction",initialState:s,reducers:{variablesInitTransaction:(m,d)=>{m.uid=d.payload.uid,m.status=n.LN.Fetching},variablesCompleteTransaction:(m,d)=>{m.uid===d.payload.uid&&(m.status=n.LN.Completed)},variablesClearTransaction:(m,d)=>{m.uid=null,m.status=n.LN.NotStarted,m.isDirty=!1}},extraReducers:m=>m.addMatcher(g,(d,p)=>{d.status===n.LN.Completed&&(d.isDirty=!0)})});function g(m){return c.mZ.match(m)||c.VN.match(m)||c.Pl.match(m)||c.gE.match(m)||c.Y9.match(m)||c.Be.match(m)}const{variablesInitTransaction:f,variablesClearTransaction:o,variablesCompleteTransaction:l}=r.actions,a=r.reducer},63510:(H,T,e)=>{"use strict";e.d(T,{s:()=>t});const t={}},6942:(H,T,e)=>{"use strict";e.d(T,{L:()=>g,S:()=>r});var t=e(32557),n=e(22323),c=e(92990),s=e(63510);const r=(0,t.PH)("templating/cleanVariables"),g=(f=s.s,o)=>{if(r.match(o)){const l=Object.values(f).filter(m=>m.global);return l?l.reduce((m,d)=>(m[d.id]=d,m),{}):s.s}return o?.payload?.type&&n.z.getIfExists(o?.payload?.type)?n.z.get(o.payload.type).reducer((0,c.b5)(f,o),o):f}},10672:(H,T,e)=>{"use strict";e.d(T,{$U:()=>t.$U,Bd:()=>t.Bd,Eg:()=>g,LN:()=>r,Wy:()=>l,bU:()=>t.bU,eq:()=>o,x9:()=>f});var t=e(22107),n=e(49922),c=e(62316),s=e(82253),r=(a=>(a.NotStarted="Not started",a.Fetching="Fetching",a.Completed="Completed",a))(r||{});const g={id:s.UY,rootStateKey:null,name:"",type:"query",global:!1,index:-1,hide:t.bU.dontHide,skipUrlSync:!1,state:n.Gu.NotStarted,error:null,description:null};class f extends c.R{}f.type="variables-changed";class o extends c.R{}o.type="variables-time-range-process-done";class l extends c.R{}l.type="variables-changed-in-url"},92624:(H,T,e)=>{"use strict";e.d(T,{A3:()=>L,AQ:()=>C,HY:()=>i,Hi:()=>O,J7:()=>m,N9:()=>P,QI:()=>v,Tt:()=>u,Y6:()=>R,_6:()=>y,a9:()=>d,bf:()=>h,bi:()=>S,gR:()=>E,iD:()=>b,mn:()=>B,xT:()=>x,yQ:()=>w});var t=e(82897),n=e.n(t),c=e(40885),s=e(55935),r=e(3153),g=e(19349),f=e(22323),o=e(82253),l=e(87095),a=e(10672);const m=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,d=A=>(m.lastIndex=0,m.exec(A)),p="__searchFilter",h=A=>A&&typeof A=="string"?A.indexOf(p)!==-1:!1,y=A=>{const{query:U,wildcardChar:I}=A;if(!h(U))return{};let{options:N}=A;return N=N||{searchFilter:""},{__searchFilter:{value:N.searchFilter?`${N.searchFilter}${I}`:`${I}`,text:""}}};function v(...A){const U=A[A.length-1];A[0]=typeof A[0]=="string"?A[0]:(0,s.Xh)(A[0]);const N=A.slice(0,-1).join(" ").match(m);return!!(N!==null?N.find(D=>{const Y=d(D);return Y!==null&&Y.indexOf(U)>-1}):!1)}const i=A=>{if(!A||!A.current)return!1;if(A.current.value){const U=Array.isArray(A.current.value);if(U&&A.current.value.length&&A.current.value[0]===o.r2||!U&&A.current.value===o.r2)return!0}if(A.current.text){const U=Array.isArray(A.current.text);if(U&&A.current.text.length&&A.current.text[0]===o.xk||!U&&A.current.text===o.xk)return!0}return!1},u=A=>!A||!A.current||!A.current.text?"":Array.isArray(A.current.text)?A.current.text.toString():typeof A.current.text!="string"?"":A.current.text,P=A=>!A||!A.current||A.current.value===void 0||A.current.value===null?null:Array.isArray(A.current.value)?A.current.value.toString():typeof A.current.value!="string"?null:A.current.value;function E(A,U=(0,c.J)()){return!A||!A.regex?"":U.replace(A.regex,{},"regex")}function C(A,U,I=(0,g.$t)()){const N={range:void 0,variable:A,searchFilter:U};return(A.refresh===a.Bd.onTimeRangeChanged||A.refresh===a.Bd.onDashboardLoad)&&(N.range=I.timeRange()),N}function b(A){if(!A||!A.hasOwnProperty("refresh"))return a.Bd.never;const U=A;return U.refresh!==a.Bd.onTimeRangeChanged&&U.refresh!==a.Bd.onDashboardLoad&&U.refresh!==a.Bd.never?a.Bd.never:U.refresh}function S(){return f.z.list().filter(A=>A.id!=="system").map(({id:A,name:U,description:I})=>({label:U,value:A,description:I}))}function M(A){return(0,t.isArray)(A)&&(A.length===0?A=void 0:A.length===1&&(A=A[0])),A}function x(A,U){let I=0;const N={};for(const F in A){if(!F.startsWith("var-"))continue;let D=M(U[F]),Y=M(A[F]);(0,t.isEqual)(Y,D)||(N[F]={value:A[F]},I++)}for(const F in U){if(!F.startsWith("var-"))continue;const D=U[F];(0,t.isArray)(D)&&D.length===0||A.hasOwnProperty(F)||(N[F]={value:"",removed:!0},I++)}return I?N:void 0}function O(A){return Array.isArray(A)?A.map(String):A==null?"":typeof A=="number"?A.toString(10):typeof A=="string"?A:typeof A=="boolean"?A.toString():""}function L(A,U=(0,r.y0)()){return(0,l.AE)(A,U).transaction.status!==a.LN.NotStarted}function B(A){return String(A)}const w=A=>{if(!A.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${A.id}`);return{type:A.type,id:A.id,rootStateKey:A.rootStateKey}};function R(A,U){return{type:A.type,id:A.id,data:U}}},17541:(H,T,e)=>{"use strict";var t=e(32478),n=e(86169),c=e(17103),s=e(44032),r=e(63073),g=e(3574),f=e(21256),o=e(91162),l=e(87449),a=e(9398),m=e(134),d=e(39514),p=e(99714),h=e(36182),y=e(82897),v=e.n(y),i=e(68404),u=e(97394),P=e(46519),E=e(99919),C=e(35363),b=e(20256),S=e(87442),M=e(83383),x=e(54899),O=e(47458),L=e(37932),B=e(36535),w=e(19920),R=e(86647),A=e(5494),U=e(87670),I=e(98825),N=e(87221),F=e(90771),D=e(47694),Y=e(79378),j=e(52423),K=e(14582),z=e(3249),Z=e(85854),ae=e(89890),J=e(17130),oe=e(74940),Ee=e(86789),me=e(2594),re=e(31403),le=e(7804),pe=e(53217),ee=e(64140),se=e(46967);function Q(_,k){switch(k.type){case K.fS.boolean:return(0,y.isUndefined)(_)?!1:G(_);case K.fS.number:return isNaN(_)?0:parseFloat(_);case K.fS.string:return _?String(_):"";default:return _}}const G=_=>(0,y.isString)(_)?!(_[0]==="F"||_[0]==="f"||_[0]==="0"):!!_;function q(_){return function({options:ne,onChange:Pe,field:ze}){const{validator:tt,converter:st=Q}=_,{value:Ot}=ne,[Kt,Ht]=(0,i.useState)(!tt(Ot)),jt=(0,i.useCallback)(Rn=>{Ht(!tt(Rn.currentTarget.value))},[Ht,tt]),pn=(0,i.useCallback)(Rn=>{if(Kt)return;const{value:$n}=Rn.currentTarget;Pe({...ne,value:st($n,ze)})},[ne,Pe,Kt,ze,st]);return i.createElement(se.I,{className:"flex-grow-1",invalid:Kt,defaultValue:String(ne.value),placeholder:"Value",onChange:jt,onBlur:pn})}}const X=()=>[{name:"Is greater",id:Z.mE.greater,component:q({validator:_=>!isNaN(_)})},{name:"Is greater or equal",id:Z.mE.greaterOrEqual,component:q({validator:_=>!isNaN(_)})},{name:"Is lower",id:Z.mE.lower,component:q({validator:_=>!isNaN(_)})},{name:"Is lower or equal",id:Z.mE.lowerOrEqual,component:q({validator:_=>!isNaN(_)})},{name:"Is equal",id:Z.mE.equal,component:q({validator:()=>!0})},{name:"Is not equal",id:Z.mE.notEqual,component:q({validator:()=>!0})},{name:"Regex",id:Z.mE.regex,component:q({validator:()=>!0,converter:_=>String(_)})}],de=()=>null,Be=()=>[{name:"Is null",id:Z.mE.isNull,component:de},{name:"Is not null",id:Z.mE.isNotNull,component:de}];function ke(_){return function({options:ne,onChange:Pe,field:ze}){const{validator:tt}=_,[st,Ot]=(0,i.useState)({from:!tt(ne.from),to:!tt(ne.to)}),Kt=(0,i.useCallback)((jt,pn)=>{Ot({...st,[pn]:!tt(jt.currentTarget.value)})},[Ot,tt,st]),Ht=(0,i.useCallback)((jt,pn)=>{if(st[pn])return;const{value:Rn}=jt.currentTarget;Pe({...ne,[pn]:Q(Rn,ze)})},[ne,Pe,st,ze]);return i.createElement(i.Fragment,null,i.createElement(se.I,{className:"flex-grow-1 gf-form-spacing",invalid:st.from,defaultValue:String(ne.from),placeholder:"From",onChange:jt=>Kt(jt,"from"),onBlur:jt=>Ht(jt,"from")}),i.createElement("div",{className:"gf-form-label"},"and"),i.createElement(se.I,{className:"flex-grow-1",invalid:st.to,defaultValue:String(ne.to),placeholder:"To",onChange:jt=>Kt(jt,"to"),onBlur:jt=>Ht(jt,"to")}))}}const He=()=>[{name:"Is between",id:Z.mE.between,component:ke({validator:_=>!isNaN(_)})}],ue=new ee.B(()=>[...X(),...Be(),...He()]),Oe=_=>{const{onDelete:k,onChange:ne,filter:Pe,fieldsInfo:ze}=_,{fieldsAsOptions:tt,fieldByDisplayName:st}=ze,Ot=we(Pe,tt)??"",Kt=st[Ot],Ht=Kt?Fe(Kt):[],jt=Ie(Pe,Ht),pn=ue.getIfExists(jt),Rn=(0,i.useCallback)(ba=>{ba?.value&&ne({...Pe,fieldName:ba.value})},[ne,Pe]),$n=(0,i.useCallback)(ba=>{if(!ba?.value)return;const us=ba.value,sr=z.U8.get(us).getDefaultOptions(Kt);ne({...Pe,config:{id:us,options:sr}})},[ne,Pe,Kt]),Vn=(0,i.useCallback)(ba=>{ne({...Pe,config:{...Pe.config,options:ba}})},[ne,Pe]);return!Kt||!pn||!pn.component?null:i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form gf-form-spacing"},i.createElement("div",{className:"gf-form-label width-7"},"Field"),i.createElement(pe.Ph,{className:"min-width-15 max-width-24",placeholder:"Field Name",options:tt,value:Pe.fieldName,onChange:Rn})),i.createElement("div",{className:"gf-form gf-form-spacing"},i.createElement("div",{className:"gf-form-label"},"Match"),i.createElement(pe.Ph,{className:"width-12",placeholder:"Select test",options:Ht,value:jt,onChange:$n})),i.createElement("div",{className:"gf-form gf-form--grow gf-form-spacing"},i.createElement("div",{className:"gf-form-label"},"Value"),i.createElement(pn.component,{field:Kt,options:Pe.config.options??{},onChange:Vn})),i.createElement("div",{className:"gf-form"},i.createElement(re.zx,{icon:"times",onClick:k,variant:"secondary"})))},Fe=_=>{const k=[];for(const ne of z.U8.list())!ne.isApplicable(_)||!ue.getIfExists(ne.id)||k.push({value:ne.id,label:ne.name,description:ne.description});return k},Ie=(_,k)=>{const ne=k.find(Pe=>Pe.value===_.config.id);if(ne&&ne.value)return ne.value;if(k[0]?.value)return k[0]?.value},we=(_,k)=>{const ne=k.find(Pe=>Pe.value===_.fieldName);if(ne&&ne.value)return ne.value;if(k[0]?.value)return k[0]?.value},Re=[{label:"Include",value:Ee.PQ.include},{label:"Exclude",value:Ee.PQ.exclude}],_e=[{label:"Match all",value:Ee.ER.all},{label:"Match any",value:Ee.ER.any}],et=_=>{const{input:k,options:ne,onChange:Pe}=_,ze=Je(),tt=lt(k),st=(0,i.useCallback)(()=>{const pn=k[0],Rn=pn.fields.find(ba=>ba.type!==K.fS.time);if(!Rn)return;const $n=(0,y.cloneDeep)(ne.filters),Vn=z.U8.get(Z.mE.greater);$n.push({fieldName:(0,ae.C)(Rn,pn,k),config:{id:Vn.id,options:Vn.getDefaultOptions(Rn)}}),Pe({...ne,filters:$n})},[Pe,ne,k]),Ot=(0,i.useCallback)(pn=>{let Rn=(0,y.cloneDeep)(ne.filters);Rn.splice(pn,1),Pe({...ne,filters:Rn})},[ne,Pe]),Kt=(0,i.useCallback)((pn,Rn)=>{let $n=(0,y.cloneDeep)(ne.filters);$n[Rn]=pn,Pe({...ne,filters:$n})},[ne,Pe]),Ht=(0,i.useCallback)(pn=>{Pe({...ne,type:pn??Ee.PQ.include})},[ne,Pe]),jt=(0,i.useCallback)(pn=>{Pe({...ne,match:pn??Ee.ER.all})},[ne,Pe]);return i.createElement("div",null,i.createElement("div",{className:"gf-form gf-form-inline"},i.createElement("div",{className:"gf-form-label width-8"},"Filter type"),i.createElement("div",{className:"width-15"},i.createElement(me.S,{options:Re,value:ne.type,onChange:Ht,fullWidth:!0}))),i.createElement("div",{className:"gf-form gf-form-inline"},i.createElement("div",{className:"gf-form-label width-8"},"Conditions"),i.createElement("div",{className:"width-15"},i.createElement(me.S,{options:_e,value:ne.match,onChange:jt,fullWidth:!0}))),i.createElement("div",{className:ze.conditions},ne.filters.map((pn,Rn)=>i.createElement(Oe,{key:Rn,filter:pn,fieldsInfo:tt,onChange:$n=>Kt($n,Rn),onDelete:()=>Ot(Rn)})),i.createElement("div",{className:"gf-form"},i.createElement(re.zx,{icon:"plus",size:"sm",onClick:st,variant:"secondary"},"Add condition"))))},qe={id:J.W.filterByValue,editor:et,transformation:oe.Y.filterByValueTransformer,name:oe.Y.filterByValueTransformer.name,description:"Removes rows of the query results using user-defined filters. This is useful if you can not filter your data in the data source."},Je=(0,le.B)(()=>({conditions:j.css`
    padding-left: 16px;
  `})),lt=_=>(0,i.useMemo)(()=>{const k={fieldsAsOptions:[],fieldByDisplayName:{}};return Array.isArray(_)?_.reduce((ne,Pe)=>Pe.fields.reduce((ze,tt)=>{const st=(0,ae.C)(tt,Pe,_);return ze.fieldByDisplayName[st]||(ze.fieldsAsOptions.push({label:st,value:st,type:tt.type}),ze.fieldByDisplayName[st]=tt),ze},ne),k):k},[_]);var at=e(24699),Xe=e(91171),gt=e(91752),ot=e(57054),Ye=e(13505);function mt(_,k){const ne={data:_.input,options:_.options},Pe=new gt.j({id:"root",title:"root"}),ze=st=>{if(st?.length){const Ot=st[0];let Kt=Pe.categories.find(Ht=>Ht.props.id===Ot);return Kt||(Kt=new gt.j({id:Ot,title:Ot}),Pe.categories.push(Kt)),Kt}return Pe},tt={getValue:st=>(0,y.get)(_.options,st),onChange:(st,Ot)=>{_.onChange((0,Ye.hs)(_.options,st,Ot))}};return(0,ot.HZ)(k,tt,ze,ne),Pe}function ce(_){const k={data:[],options:{}},ne={},Pe=new Xe.rt;_(Pe,k);for(const ze of Pe.getItems())ze.defaultValue!=null&&(0,y.set)(ne,ze.path,ze.defaultValue);return ne}var be=e(90024),Te=e(77564);const Ke=(_,k)=>{const ne=k.options??{};(0,be.J)("",_,ne)},ge=_=>{(0,i.useEffect)(()=>{if(!_.options.xBuckets?.mode){const ne=ce(Ke);_.onChange({...ne,..._.options}),console.log("geometry useEffect",ne)}});const k=mt(_,Ke);return i.createElement("div",null,i.createElement("div",null,k.items.map(ne=>ne.render())))},Me={id:Te.Oy.id,editor:ge,transformation:Te.Oy,name:Te.Oy.name,description:Te.Oy.description,state:at.BV.alpha};var ye=e(72648),fe=e(43714),he=e(11543),De=e(81764),Ae=e(21760),Ne=e(71294),Ze=e(66926),Se=e(63279),Ue=e(24177),Qe=e(26031);function pt(_,k,ne){const Pe={},ze={};for(const tt of _.fields){const st=(0,ae.C)(tt,_),Kt=ne.index[st].handler;if(!Kt)continue;const Ht=tt.values.get(k);if(Ht==null)continue;const jt=Kt.processor(Ht,Pe,ze);jt!=null&&(Pe[Kt.targetProperty??Kt.key]=jt)}return ze.mappingValues&&(Pe.mappings=Mt(ze)),Pe}var bt=(_=>(_.Name="field.name",_.Value="field.value",_.Label="field.label",_.Ignore="__ignore",_))(bt||{});const yt=[{key:"field.name",name:"Field name",processor:()=>{}},{key:"field.value",name:"Field value",processor:()=>{}},{key:"field.label",name:"Field label",processor:()=>{}},{key:"__ignore",name:"Ignore",processor:()=>{}},{key:"max",processor:rn},{key:"min",processor:rn},{key:"unit",processor:_=>_.toString()},{key:"decimals",processor:rn},{key:"displayName",name:"Display name",processor:_=>_.toString()},{key:"color",processor:_=>({fixedColor:_,mode:Ze.S.Fixed})},{key:"threshold1",targetProperty:"thresholds",processor:(_,k)=>{const ne=(0,Se.I)(_);if(!isNaN(ne))return k.thresholds||(k.thresholds={mode:Ue.H.Absolute,steps:[{value:-1/0,color:"green"}]}),k.thresholds.steps.push({value:ne,color:"red"}),k.thresholds}},{key:"mappings.value",name:"Value mappings / Value",targetProperty:"mappings",defaultReducer:Ae.gz.allValues,processor:(_,k,ne)=>{if((0,y.isArray)(_))return ne.mappingValues=_,k.mappings}},{key:"mappings.color",name:"Value mappings / Color",targetProperty:"mappings",defaultReducer:Ae.gz.allValues,processor:(_,k,ne)=>{if((0,y.isArray)(_))return ne.mappingColors=_,k.mappings}},{key:"mappings.text",name:"Value mappings / Display text",targetProperty:"mappings",defaultReducer:Ae.gz.allValues,processor:(_,k,ne)=>{if((0,y.isArray)(_))return ne.mappingTexts=_,k.mappings}}];function Mt(_){const k={type:Qe.H.ValueToText,options:{}};if(!_.mappingValues)return[];for(let ne=0;ne<_.mappingValues.length;ne++){const Pe=_.mappingValues[ne];Pe!=null&&(k.options[Pe.toString()]={color:_.mappingColors&&_.mappingColors[ne],text:_.mappingTexts&&_.mappingTexts[ne],index:ne})}return[k]}let At=null;function Pt(){if(At===null){At={};for(const _ of yt)At[_.key]=_}return At}function rn(_){const k=(0,Se.I)(_);if(!isNaN(k))return k}function Fn(_,k){for(const ne of k)if(_===ne.fieldName)return ne.handlerKey;return _.toLowerCase()}function kn(_){return _?Pt()[_]:null}function Jn(_,k,ne){const Pe={index:{}};let ze=k.find(st=>st.handlerKey==="field.name"),tt=k.find(st=>st.handlerKey==="field.value");for(const st of _.fields){const Ot=(0,ae.C)(st,_),Kt=k.find(pn=>pn.fieldName===Ot),Ht=Kt?Kt.handlerKey:Ot.toLowerCase();let jt=kn(Ht);ne&&(jt?(jt.key==="field.name"&&(Pe.nameField=st),jt.key==="field.value"&&(Pe.valueField=st)):Kt||(!Pe.nameField&&!ze&&st.type===K.fS.string&&(Pe.nameField=st,jt=kn("field.name")),!Pe.valueField&&!tt&&st.type===K.fS.number&&(Pe.valueField=st,jt=kn("field.value")))),!jt&&ne&&(jt=kn("field.label")),Pe.index[Ot]={automatic:!Kt,handler:jt,reducerId:Kt?.reducerId??jt?.defaultReducer??Ae.gz.lastNotNull}}return Pe}function qn({frame:_,mappings:k,onChange:ne,withReducers:Pe,withNameAndValue:ze}){const tt=(0,ye.wW)(nt),st=Ut(_,k,ze),Ot=yt.map(jt=>ut(jt,!1)),Kt=(jt,pn)=>{const Rn=k.findIndex($n=>$n.fieldName===jt.fieldName);if(pn)if(Rn!==-1){const $n=[...k];$n.splice(Rn,1,{...k[Rn],handlerKey:pn.value}),ne($n)}else ne([...k,{fieldName:jt.fieldName,handlerKey:pn.value}]);else ne(Rn!==-1?k.filter(($n,Vn)=>Vn!==Rn):[...k,{fieldName:jt.fieldName,handlerKey:"__ignore"}])},Ht=(jt,pn)=>{const Rn=k.findIndex($n=>$n.fieldName===jt.fieldName);if(Rn!==-1){const $n=[...k];$n.splice(Rn,1,{...k[Rn],reducerId:pn}),ne($n)}else ne([...k,{fieldName:jt.fieldName,handlerKey:jt.handlerKey,reducerId:pn}])};return i.createElement("table",{className:tt.table},i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",null,"Field"),i.createElement("th",null,"Use as"),Pe&&i.createElement("th",null,"Select"))),i.createElement("tbody",null,st.map(jt=>i.createElement("tr",{key:jt.fieldName},i.createElement("td",{className:tt.labelCell},jt.fieldName),i.createElement("td",{className:tt.selectCell,"data-testid":`${jt.fieldName}-config-key`},i.createElement(pe.Ph,{options:Ot,value:jt.configOption,placeholder:jt.placeholder,isClearable:!0,onChange:pn=>Kt(jt,pn)})),Pe&&i.createElement("td",{"data-testid":`${jt.fieldName}-reducer`,className:tt.selectCell},i.createElement(Ne.m,{stats:[jt.reducerId],defaultStat:jt.reducerId,onChange:pn=>Ht(jt,pn[0])}))))))}function Ut(_,k,ne){const Pe=[],ze=Jn(_,k??[],ne);for(const tt of _.fields){const st=(0,ae.C)(tt,_),Ot=ze.index[st],Kt=ut(Ot.handler,Ot.automatic);Pe.push({fieldName:st,configOption:Ot.automatic?null:Kt,placeholder:Ot.automatic?Kt?.label:"Choose",handlerKey:Ot.handler?.key??null,reducerId:Ot.reducerId})}for(const tt of k)if(!Pe.find(st=>st.fieldName===tt.fieldName)){const st=kn(tt.handlerKey);Pe.push({fieldName:tt.fieldName,handlerKey:tt.handlerKey,configOption:ut(st,!1),missingInFrame:!0,reducerId:tt.reducerId??Ae.gz.lastNotNull})}return Object.values(Pe)}function ut(_,k){if(!_)return null;let ne=_.name??(0,y.capitalize)(_.key);return k&&(ne=`${ne} (auto)`),{label:ne,value:_.key}}const nt=_=>({table:j.css`
    margin-top: ${_.spacing(1)};

    td,
    th {
      border-right: 4px solid ${_.colors.background.primary};
      border-bottom: 4px solid ${_.colors.background.primary};
      white-space: nowrap;
    }
    th {
      font-size: ${_.typography.bodySmall.fontSize};
      line-height: ${_.spacing(4)};
      padding: ${_.spacing(0,1)};
    }
  `,labelCell:j.css`
    font-size: ${_.typography.bodySmall.fontSize};
    background: ${_.colors.background.secondary};
    padding: ${_.spacing(0,1)};
    max-width: 400px;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 140px;
  `,selectCell:j.css`
    padding: 0;
    min-width: 161px;
  `});var vt=e(2101),ht=e(19695);function It(_,k){let ne=null;for(const Ot of k)if(Ot.refId===_.configRefId){ne=Ot;break}if(!ne)return k;const Pe={fields:[],length:1},ze=Jn(ne,_.mappings??[],!1);for(const Ot of ne.fields){const Kt={...Ot},Ht=(0,ae.C)(Ot,ne),jt=ze.index[Ht],pn=(0,Ae.Kx)({field:Ot,reducers:[jt.reducerId]});Kt.values=new ht.G([pn[jt.reducerId]]),Pe.fields.push(Kt)}const tt=[],st=(0,z.sq)(_.applyTo||{id:Z.mi.numeric});for(const Ot of k){if(Ot===ne&&k.length>1)continue;const Kt={fields:[],length:Ot.length};for(const Ht of Ot.fields)if(st(Ht,Ot,k)){const jt=pt(Pe,0,ze);Kt.fields.push({...Ht,config:{...Ht.config,...jt}})}else Kt.fields.push(Ht);tt.push(Kt)}return tt}const Ft={id:J.W.configFromData,name:"Config from query results",description:"Set unit, min, max and more from data",defaultOptions:{configRefId:"config",mappings:[]},operator:_=>k=>k.pipe((0,vt.U)(ne=>It(_,ne)))};function en({input:_,onChange:k,options:ne}){const Pe=(0,ye.wW)(Mn),ze=_.map($n=>$n.refId).filter($n=>$n!=null).map($n=>({label:$n,value:$n})),tt=ne.configRefId||"config",st=ne.applyTo??{id:Z.mi.byType,options:"number"},Ot=fe.i.get(st.id),Kt=_.find($n=>$n.refId===tt),Ht=$n=>{k({...ne,configRefId:$n.value||"config"})},jt=$n=>{k({...ne,applyTo:{id:$n.value}})},pn=$n=>{k({...ne,applyTo:{id:st.id,options:$n}})},Rn=fe.i.list().filter($n=>!$n.excludeFromPicker).map($n=>({label:$n.name,value:$n.id,description:$n.description}));return i.createElement(i.Fragment,null,i.createElement(he.Z,null,i.createElement(De._,{label:"Config query",labelWidth:20},i.createElement(pe.Ph,{onChange:Ht,options:ze,value:tt,width:30}))),i.createElement(he.Z,null,i.createElement(De._,{label:"Apply to",labelWidth:20},i.createElement(pe.Ph,{onChange:jt,options:Rn,value:st.id,width:30}))),i.createElement(he.Z,null,i.createElement(De._,{label:"Apply to options",labelWidth:20,className:Pe.matcherOptions},i.createElement(Ot.component,{matcher:Ot.matcher,data:_,options:st.options,onChange:pn}))),i.createElement(he.Z,null,Kt&&i.createElement(qn,{frame:Kt,mappings:ne.mappings,onChange:$n=>k({...ne,mappings:$n}),withReducers:!0})))}const sn={id:Ft.id,editor:en,transformation:Ft,name:Ft.name,description:Ft.description,state:at.BV.beta,help:`
### Use cases

This transformation allows you select one query and from it extract standard options such as
**Min**, **Max**, **Unit**, and **Thresholds** and apply them to other query results.
This enables dynamic query driven visualization configuration.

### Options

- **Config query**: Selet the query that returns the data you want to use as configuration.
- **Apply to**: Select what fields or series to apply the configuration to.
- **Apply to options**: Usually a field type or field name regex depending on what option you selected in **Apply to**.

### Field mapping table

Below the configuration listed above you will find the field table. Here all fields found in the data returned by the config query will be listed along with a **Use as** and **Select** option. This table gives you control over what field should be mapped to which config property and if there are multiple rows which value to select.

## Example

Input[0] (From query: A, name: ServerA)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 10    |
| 1626178119129 | 30    |

Input[1] (From query: B)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 100   |
| 1626178119129 | 100   |

Output (Same as Input[0] but now with config on the Value field)

| Time          | Value (config: Max=100) |
| ------------- | ----------------------- |
| 1626178119127 | 10                      |
| 1626178119129 | 30                      |

Each row in the source data becomes a separate field. Each field now also has a maximum
configuration option set. Options such as **min**, **max**, **unit**, and **thresholds** are all part of field configuration, and if they are set like this, they will be used by the visualization instead of any options that are manually configured.
in the panel editor options pane.

## Value mappings

You can also transform a query result into value mappings. This is is a bit different because every
row in the configuration query result is used to define a single value mapping row. See the following example.

Config query result:

| Value | Text   | Color |
| ----- | ------ | ----- |
| L     | Low    | blue  |
| M     | Medium | green |
| H     | High   | red   |

In the field mapping specify:

| Field | Use as                  | Select     |
| ----- | ----------------------- | ---------- |
| Value | Value mappings / Value  | All values |
| Text  | Value mappings / Text   | All values |
| Color | Value mappings / Ciolor | All values |

Grafana will build the value mappings from you query result and apply it the the real data query results. You should see values being mapped and colored according to the config query results.
`},Mn=_=>({matcherOptions:j.css`
    min-width: 404px;
  `});var En=e(53786),yn=e(98082),Bn=e(89984),ea=e(52081),Qn=e(41165),Kn=e(14835);const Ua=[{value:Bn.ie.BinaryOperation,label:"Binary operation"},{value:Bn.ie.ReduceRow,label:"Reduce row"}],pa=new Set([K.fS.time,K.fS.number,K.fS.string]);class va extends i.PureComponent{constructor(k){super(k),this.onToggleReplaceFields=()=>{const{options:ne}=this.props;this.props.onChange({...ne,replaceFields:!ne.replaceFields})},this.onModeChanged=ne=>{const{options:Pe,onChange:ze}=this.props,tt=ne.value??Bn.ie.BinaryOperation;ze({...Pe,mode:tt})},this.onAliasChanged=ne=>{const{options:Pe}=this.props;this.props.onChange({...Pe,alias:ne.target.value})},this.updateReduceOptions=ne=>{const{options:Pe,onChange:ze}=this.props;ze({...Pe,mode:Bn.ie.ReduceRow,reduce:ne})},this.onFieldToggle=ne=>{const{selected:Pe}=this.state;Pe.indexOf(ne)>-1?this.onChange(Pe.filter(ze=>ze!==ne)):this.onChange([...Pe,ne])},this.onChange=ne=>{this.setState({selected:ne});const{reduce:Pe}=this.props.options;this.updateReduceOptions({...Pe,include:ne})},this.onStatsChange=ne=>{const Pe=ne.length?ne[0]:Ae.gz.sum,{reduce:ze}=this.props.options;this.updateReduceOptions({...ze,reducer:Pe})},this.updateBinaryOptions=ne=>{const{options:Pe,onChange:ze}=this.props;ze({...Pe,mode:Bn.ie.BinaryOperation,binary:ne})},this.onBinaryLeftChanged=ne=>{const{binary:Pe}=this.props.options;this.updateBinaryOptions({...Pe,left:ne.value})},this.onBinaryRightChanged=ne=>{const{binary:Pe}=this.props.options;this.updateBinaryOptions({...Pe,right:ne.value})},this.onBinaryOperationChanged=ne=>{const{binary:Pe}=this.props.options;this.updateBinaryOptions({...Pe,operator:ne.value})},this.state={include:k.options?.reduce?.include||[],names:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(k){this.props.input!==k.input&&this.initOptions()}initOptions(){const{options:k}=this.props,ne=k?.reduce?.include||[],Pe={interpolate:tt=>tt},ze=(0,En.of)(this.props.input).pipe(oe.Y.ensureColumnsTransformer.operator(null,Pe),this.extractAllNames(),this.extractNamesAndSelected(ne)).subscribe(({selected:tt,names:st})=>{this.setState({names:st,selected:tt},()=>ze.unsubscribe())})}extractAllNames(){return k=>k.pipe((0,vt.U)(ne=>{const Pe=[],ze={};for(const tt of ne)for(const st of tt.fields){if(!pa.has(st.type))continue;const Ot=(0,ae.C)(st,tt,ne);ze[Ot]||(ze[Ot]=!0,Pe.push(Ot))}return Pe}))}extractNamesAndSelected(k){return ne=>ne.pipe((0,vt.U)(Pe=>{if(!k.length)return{names:Pe,selected:[]};const ze=[],tt=[];for(const st of Pe)k.includes(st)&&tt.push(st),ze.push(st);return{names:ze,selected:tt}}))}renderReduceRow(k){const{names:ne,selected:Pe}=this.state;return k=(0,y.defaults)(k,{reducer:Ae.gz.sum}),i.createElement(i.Fragment,null,i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form gf-form--grow"},i.createElement("div",{className:"gf-form-label width-8"},"Field name"),i.createElement(ea.Lh,{spacing:"xs",align:"flex-start",wrap:!0},ne.map((ze,tt)=>i.createElement(Qn.B,{key:`${ze}/${tt}`,onClick:()=>{this.onFieldToggle(ze)},label:ze,selected:Pe.indexOf(ze)>-1}))))),i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form"},i.createElement("div",{className:"gf-form-label width-8"},"Calculation"),i.createElement(Ne.m,{allowMultiple:!1,className:"width-18",stats:[k.reducer],onChange:this.onStatsChange,defaultStat:Ae.gz.sum}))))}renderBinaryOperation(k){k=(0,y.defaults)(k,{reducer:Ae.gz.sum});let ne=!k?.left,Pe=!k?.right;const ze=this.state.names.map(Kt=>(Kt===k?.left&&(ne=!0),Kt===k?.right&&(Pe=!0),{label:Kt,value:Kt})),tt=ne?ze:[...ze,{label:k?.left,value:k?.left}],st=Pe?ze:[...ze,{label:k?.right,value:k?.right}],Ot=yn.n.list().map(Kt=>({label:Kt.id,value:Kt.id}));return i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form"},i.createElement("div",{className:"gf-form-label width-8"},"Operation")),i.createElement("div",{className:"gf-form"},i.createElement(pe.Ph,{allowCustomValue:!0,placeholder:"Field or number",options:tt,className:"min-width-18 gf-form-spacing",value:k?.left,onChange:this.onBinaryLeftChanged}),i.createElement(pe.Ph,{className:"width-8 gf-form-spacing",options:Ot,value:k.operator??Ot[0].value,onChange:this.onBinaryOperationChanged}),i.createElement(pe.Ph,{allowCustomValue:!0,placeholder:"Field or number",className:"min-width-10",options:st,value:k?.right,onChange:this.onBinaryRightChanged})))}render(){const{options:k}=this.props,ne=k.mode??Bn.ie.BinaryOperation;return i.createElement("div",null,i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form"},i.createElement("div",{className:"gf-form-label width-8"},"Mode"),i.createElement(pe.Ph,{className:"width-18",options:Ua,value:Ua.find(Pe=>Pe.value===ne),onChange:this.onModeChanged}))),ne===Bn.ie.BinaryOperation&&this.renderBinaryOperation(k.binary),ne===Bn.ie.ReduceRow&&this.renderReduceRow(k.reduce),i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form"},i.createElement("div",{className:"gf-form-label width-8"},"Alias"),i.createElement(se.I,{className:"width-18",value:k.alias??"",placeholder:(0,Bn.h)(k),onChange:this.onAliasChanged}))),i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form"},i.createElement(Kn.LegacyForms.Switch,{label:"Replace all fields",labelClass:"width-8",checked:!!k.replaceFields,onChange:this.onToggleReplaceFields}))))}}const za={id:J.W.calculateField,editor:va,transformation:oe.Y.calculateFieldTransformer,name:"Add field from calculation",description:"Use the row values to calculate a new field"};var ja=e(42074);const Ea=[{value:ja.HO.FieldName,label:"Copy frame name to field name"},{value:ja.HO.Label,label:"Add a label with the frame name"},{value:ja.HO.Drop,label:"Ignore the frame name"}];class ma extends i.PureComponent{constructor(k){super(k),this.onModeChanged=ne=>{const{options:Pe,onChange:ze}=this.props,tt=ne.value??ja.HO.FieldName;ze({...Pe,frameNameMode:tt})},this.onLabelChanged=ne=>{const{options:Pe}=this.props;this.props.onChange({...Pe,frameNameLabel:ne.target.value})}}render(){const{options:k}=this.props,ne=k.frameNameMode??ja.HO.FieldName;return i.createElement("div",null,i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form"},i.createElement("div",{className:"gf-form-label width-8"},"Name"),i.createElement(pe.Ph,{className:"width-18",options:Ea,value:Ea.find(Pe=>Pe.value===ne),onChange:this.onModeChanged}))),ne===ja.HO.Label&&i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form"},i.createElement("div",{className:"gf-form-label width-8"},"Label"),i.createElement(se.I,{className:"width-18",value:k.frameNameLabel??"",placeholder:"frame",onChange:this.onLabelChanged}))))}}const Xa={id:J.W.concatenate,editor:ma,transformation:oe.Y.concatenateTransformer,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length."};var Oa=e(15448);const ss={settings:{width:24}},Ks=({input:_,options:k,onChange:ne})=>{const Pe=[{value:K.fS.number,label:"Numeric"},{value:K.fS.string,label:"String"},{value:K.fS.time,label:"Time"},{value:K.fS.boolean,label:"Boolean"},{value:K.fS.other,label:"JSON"}],ze=(0,i.useCallback)(Ht=>jt=>{const pn=k.conversions;pn[Ht]={...pn[Ht],targetField:jt??""},ne({...k,conversions:pn})},[ne,k]),tt=(0,i.useCallback)(Ht=>jt=>{const pn=k.conversions;pn[Ht]={...pn[Ht],destinationType:jt.value},ne({...k,conversions:pn})},[ne,k]),st=(0,i.useCallback)(Ht=>jt=>{const pn=k.conversions;pn[Ht]={...pn[Ht],dateFormat:jt.currentTarget.value},ne({...k,conversions:pn})},[ne,k]),Ot=(0,i.useCallback)(()=>{ne({...k,conversions:[...k.conversions,{targetField:void 0,destinationType:void 0,dateFormat:void 0}]})},[ne,k]),Kt=(0,i.useCallback)(Ht=>{const jt=k.conversions;jt.splice(Ht,1),ne({...k,conversions:jt})},[ne,k]);return i.createElement(i.Fragment,null,k.conversions.map((Ht,jt)=>i.createElement(he.Z,{key:`${Ht.targetField}-${jt}`},i.createElement(De._,{label:"Field"},i.createElement(Oa.b,{context:{data:_},value:Ht.targetField??"",onChange:ze(jt),item:ss})),i.createElement(De._,{label:"as"},i.createElement(pe.Ph,{options:Pe,value:Ht.destinationType,placeholder:"Type",onChange:tt(jt),width:18})),Ht.destinationType===K.fS.time&&i.createElement(De._,{label:"Input format",tooltip:"Specify the format of the input field so Grafana can parse the date string correctly."},i.createElement(se.I,{value:Ht.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:st(jt),width:24})),i.createElement(re.zx,{size:"md",icon:"trash-alt",variant:"secondary",onClick:()=>Kt(jt),"aria-label":"Remove convert field type transformer"}))),i.createElement(re.zx,{size:"sm",icon:"plus",onClick:Ot,variant:"secondary","aria-label":"Add a convert field type transformer"},"Convert field type"))},Ss={id:J.W.convertFieldType,editor:Ks,transformation:oe.Y.convertFieldTypeTransformer,name:oe.Y.convertFieldTypeTransformer.name,description:oe.Y.convertFieldTypeTransformer.description};var Bs=e(29076),ls=e(24799);class ws extends i.PureComponent{constructor(k){super(k),this.onFieldToggle=ne=>{const{selected:Pe}=this.state;Pe.indexOf(ne)>-1?this.onChange(Pe.filter(ze=>ze!==ne)):this.onChange([...Pe,ne])},this.onChange=ne=>{const{regex:Pe,isRegexValid:ze}=this.state,tt={...this.props.options,include:{names:ne}};Pe&&ze&&(tt.include=tt.include??{},tt.include.pattern=Pe),this.setState({selected:ne},()=>{this.props.onChange(tt)})},this.onInputBlur=ne=>{const{selected:Pe,regex:ze}=this.state;let tt=!0;try{ze&&(0,Bs.jO)(ze)}catch{tt=!1}tt?this.props.onChange({...this.props.options,include:{pattern:ze}}):this.props.onChange({...this.props.options,include:{names:Pe}}),this.setState({isRegexValid:tt})},this.state={include:k.options.include?.names||[],regex:k.options.include?.pattern,options:[],selected:[],isRegexValid:!0}}componentDidMount(){this.initOptions()}componentDidUpdate(k){this.props.input!==k.input&&this.initOptions()}initOptions(){const{input:k,options:ne}=this.props,Pe=Array.from(ne.include?.names??[]),ze=[],tt={};for(const st of k)for(const Ot of st.fields){const Kt=(0,ae.C)(Ot,st,k);let Ht=tt[Kt];Ht||(Ht=tt[Kt]={name:Kt,count:0},ze.push(Ht)),Ht.count++}if(ne.include?.pattern)try{const st=(0,Bs.jO)(ne.include.pattern);for(const Ot of ze)st.test(Ot.name)&&Pe.push(Ot.name)}catch(st){console.error(st)}if(Pe.length){const st=ze.filter(Ot=>Pe.includes(Ot.name));this.setState({options:ze,selected:st.map(Ot=>Ot.name),regex:ne.include?.pattern})}else this.setState({options:ze,selected:ze.map(st=>st.name),regex:ne.include?.pattern})}render(){const{options:k,selected:ne,isRegexValid:Pe}=this.state;return i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form gf-form--grow"},i.createElement("div",{className:"gf-form-label width-8"},"Identifier"),i.createElement(ea.Lh,{spacing:"xs",align:"flex-start",wrap:!0},i.createElement(ls.g,{invalid:!Pe,error:Pe?void 0:"Invalid pattern",className:j.css`
                margin-bottom: 0;
              `},i.createElement(se.I,{placeholder:"Regular expression pattern",value:this.state.regex||"",onChange:ze=>this.setState({regex:ze.currentTarget.value}),onBlur:this.onInputBlur,width:25})),k.map((ze,tt)=>{const st=`${ze.name}${ze.count>1?" ("+ze.count+")":""}`,Ot=ne.indexOf(ze.name)>-1;return i.createElement(Qn.B,{key:`${ze.name}/${tt}`,onClick:()=>{this.onFieldToggle(ze.name)},label:st,selected:Ot})}))))}}const qs={id:J.W.filterFieldsByName,editor:ws,transformation:oe.Y.filterFieldsByNameTransformer,name:"Filter by name",description:"Removes part of the query results using a regex pattern. The pattern can be inclusive or exclusive."};var Da=e(57227);class Vs extends i.PureComponent{constructor(k){super(k),this.onFieldToggle=ne=>{const{selected:Pe}=this.state;Pe.indexOf(ne)>-1?this.onChange(Pe.filter(ze=>ze!==ne)):this.onChange([...Pe,ne])},this.onChange=ne=>{this.setState({selected:ne}),this.props.onChange({...this.props.options,include:ne.join("|")})},this.state={include:k.options.include||"",options:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(k){this.props.input!==k.input&&this.initOptions()}initOptions(){const{input:k,options:ne}=this.props,Pe=ne.include?ne.include.split("|"):[],ze=[],tt={};for(const st of k)if(st.refId){let Ot=tt[st.refId];Ot||(Ot=tt[st.refId]={refId:st.refId,count:0},ze.push(Ot)),Ot.count++}if(Pe.length){const st=[],Ot=[];for(const Kt of ze)Pe.includes(Kt.refId)&&Ot.push(Kt),st.push(Kt);this.setState({options:st,selected:Ot.map(Kt=>Kt.refId)})}else this.setState({options:ze,selected:[]})}render(){const{options:k,selected:ne}=this.state,{input:Pe}=this.props;return i.createElement(i.Fragment,null,Pe.length<=1&&i.createElement("div",null,i.createElement(Da.S,null,"Filter data by query expects multiple queries in the input.")),i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form gf-form--grow"},i.createElement("div",{className:"gf-form-label width-8"},"Series refId"),i.createElement(ea.Lh,{spacing:"xs",align:"flex-start",wrap:!0},k.map((ze,tt)=>{const st=`${ze.refId}${ze.count>1?" ("+ze.count+")":""}`,Ot=ne.indexOf(ze.refId)>-1;return i.createElement(Qn.B,{key:`${ze.refId}/${tt}`,onClick:()=>{this.onFieldToggle(ze.refId)},label:st,selected:Ot})})))))}}const Es={id:J.W.filterByRefId,editor:Vs,transformation:oe.Y.filterFramesByRefIdTransformer,name:"Filter data by query",description:"Filter data by query. This is useful if you are sharing the results from a different panel that has many queries and you want to only visualize a subset of that in this panel."};var er=e(88861);function dr(_){return(0,i.useMemo)(()=>Array.isArray(_)?Object.keys(_.reduce((k,ne)=>!ne||!Array.isArray(ne.fields)?k:ne.fields.reduce((Pe,ze)=>{const tt=(0,ae.C)(ze,ne,_);return Pe[tt]=!0,Pe},k),{})):[],[_])}function es(_){const k=new Set;for(const ne of _)for(const Pe of ne.fields)if(Pe.labels)for(const ze of Object.keys(Pe.labels))k.add(ze);return k}const tr=({input:_,options:k,onChange:ne})=>{const Pe=dr(_),ze=(0,i.useCallback)(tt=>st=>{ne({...k,fields:{...k.fields,[tt]:st}})},[ne]);return i.createElement("div",null,Pe.map(tt=>i.createElement(ts,{onConfigChange:ze(tt),fieldName:tt,config:k.fields[tt],key:tt})))},Is=[{label:"Group by",value:er.x.groupBy},{label:"Calculate",value:er.x.aggregate}],ts=({fieldName:_,config:k,onConfigChange:ne})=>{const Pe=Zs(),ze=(0,i.useCallback)(tt=>{ne({aggregations:k?.aggregations??[],operation:tt?.value??null})},[k,ne]);return i.createElement("div",{className:(0,j.cx)("gf-form-inline",Pe.row)},i.createElement("div",{className:(0,j.cx)("gf-form",Pe.fieldName)},i.createElement("div",{className:(0,j.cx)("gf-form-label",Pe.rowSpacing)},_)),i.createElement("div",{className:(0,j.cx)("gf-form",Pe.cell)},i.createElement("div",{className:(0,j.cx)("gf-form-spacing",Pe.rowSpacing)},i.createElement(pe.Ph,{className:"width-12",options:Is,value:k?.operation,placeholder:"Ignored",onChange:ze,isClearable:!0}))),k?.operation===er.x.aggregate&&i.createElement("div",{className:(0,j.cx)("gf-form","gf-form--grow",Pe.calculations)},i.createElement(Ne.m,{className:(0,j.cx)("flex-grow-1",Pe.rowSpacing),placeholder:"Select Stats",allowMultiple:!0,stats:k.aggregations,onChange:tt=>{ne({...k,aggregations:tt})}})))},Zs=(0,le.B)(()=>{const _=j.css`
    display: table-cell;
  `;return{row:j.css`
      display: table-row;
    `,cell:_,rowSpacing:j.css`
      margin-bottom: 4px;
    `,fieldName:j.css`
      ${_}
      min-width: 250px;
      white-space: nowrap;
    `,calculations:j.css`
      ${_}
      width: 99%;
    `}}),Xt={id:J.W.groupBy,editor:tr,transformation:oe.Y.groupByTransformer,name:oe.Y.groupByTransformer.name,description:oe.Y.groupByTransformer.description};var kt=e(16217);const vn=({input:_,options:k,onChange:ne})=>{const Pe=dr(_).map(Ht=>({label:Ht,value:Ht})),ze=(0,i.useCallback)(Ht=>{ne({...k,columnField:Ht?.value})},[ne,k]),tt=(0,i.useCallback)(Ht=>{ne({...k,rowField:Ht?.value})},[ne,k]),st=(0,i.useCallback)(Ht=>{ne({...k,valueField:Ht?.value})},[ne,k]),Ot=[{label:"Null",value:kt.U.Null,description:"Null value"},{label:"True",value:kt.U.True,description:"Boolean true value"},{label:"False",value:kt.U.False,description:"Boolean false value"},{label:"Empty",value:kt.U.Empty,description:"Empty string"}],Kt=(0,i.useCallback)(Ht=>{ne({...k,emptyValue:Ht?.value})},[ne,k]);return i.createElement(i.Fragment,null,i.createElement(he.Z,null,i.createElement(De._,{label:"Column",labelWidth:8},i.createElement(pe.Ph,{options:Pe,value:k.columnField,onChange:ze,isClearable:!0})),i.createElement(De._,{label:"Row",labelWidth:8},i.createElement(pe.Ph,{options:Pe,value:k.rowField,onChange:tt,isClearable:!0})),i.createElement(De._,{label:"Cell Value",labelWidth:10},i.createElement(pe.Ph,{options:Pe,value:k.valueField,onChange:st,isClearable:!0})),i.createElement(De._,{label:"Empty Value"},i.createElement(pe.Ph,{options:Ot,value:k.emptyValue,onChange:Kt,isClearable:!0}))))},An={id:J.W.groupingToMatrix,editor:vn,transformation:oe.Y.groupingToMatrixTransformer,name:"Grouping to matrix",description:"Takes a three fields combination and produces a Matrix"};var Wn=e(15128),Xn=e(8944),Ha=e(45458);const Qa=({input:_,options:k,onChange:ne})=>{const ze=(0,i.useCallback)(Ot=>{ne({...k,bucketSize:Ot})},[ne,k]),tt=(0,i.useCallback)(Ot=>{ne({...k,bucketOffset:Ot})},[ne,k]),st=(0,i.useCallback)(()=>{ne({...k,combine:!k.combine})},[ne,k]);return i.createElement("div",null,i.createElement(he.Z,null,i.createElement(De._,{labelWidth:18,label:Wn.py.bucketSize.name,tooltip:Wn.py.bucketSize.description},i.createElement(Ha.Y,{value:k.bucketSize,placeholder:"auto",onChange:ze,min:0}))),i.createElement(he.Z,null,i.createElement(De._,{labelWidth:18,label:Wn.py.bucketOffset.name,tooltip:Wn.py.bucketOffset.description},i.createElement(Ha.Y,{value:k.bucketOffset,placeholder:"none",onChange:tt,min:0}))),i.createElement(he.Z,null,i.createElement(De._,{labelWidth:18,label:Wn.py.combine.name,tooltip:Wn.py.combine.description},i.createElement(Xn.x,{value:k.combine??!1,onChange:st}))))},ka={id:J.W.histogram,editor:Qa,transformation:oe.Y.histogramTransformer,name:oe.Y.histogramTransformer.name,description:oe.Y.histogramTransformer.description};var ys=e(75176);const xs=[{value:ys.c.outer,label:"OUTER",description:"Keep all rows from any table with a value"},{value:ys.c.inner,label:"INNER",description:"Drop rows that do not match a value in all tables"}];function Ga({input:_,options:k,onChange:ne}){const Pe=dr(_).map(st=>({label:st,value:st})),ze=(0,i.useCallback)(st=>{ne({...k,byField:st?.value})},[ne,k]),tt=(0,i.useCallback)(st=>{ne({...k,mode:st?.value})},[ne,k]);return i.createElement(i.Fragment,null,i.createElement(he.Z,null,i.createElement(De._,{label:"Mode",labelWidth:8,grow:!0},i.createElement(pe.Ph,{options:xs,value:k.mode??ys.c.outer,onChange:tt}))),i.createElement(he.Z,null,i.createElement(De._,{label:"Field",labelWidth:8,grow:!0},i.createElement(pe.Ph,{options:Pe,value:k.byField,onChange:ze,placeholder:"time",isClearable:!0}))))}const or={id:J.W.joinByField,aliasIds:[J.W.seriesToColumns],editor:Ga,transformation:oe.Y.joinByFieldTransformer,name:oe.Y.joinByFieldTransformer.name,description:oe.Y.joinByFieldTransformer.description};var bs=e(1052),ur=e(26418);const mr=[{value:bs.k.Columns,label:"Columns"},{value:bs.k.Rows,label:"Rows"}],Sr=({input:_,options:k,onChange:ne})=>{const{labelNames:ze,selected:tt}=(0,i.useMemo)(()=>{let Kt=[],Ht={};for(const pn of _)for(const Rn of pn.fields)if(Rn.labels)for(const $n of Object.keys(Rn.labels))Ht[$n]||(Kt.push({value:$n,label:$n}),Ht[$n]=!0);const jt=new Set(k.keepLabels?.length?k.keepLabels:Object.keys(Ht));return{labelNames:Kt,selected:jt}},[k.keepLabels,_]),st=Kt=>{ne({...k,valueLabel:Kt?.value})},Ot=Kt=>{if(tt.has(Kt)?tt.delete(Kt):tt.add(Kt),tt.size===ze.length||!tt.size){const{keepLabels:Ht,...jt}=k;ne(jt)}else ne({...k,keepLabels:[...tt]})};return i.createElement("div",null,i.createElement(he.Z,null,i.createElement(De._,{label:"Mode",labelWidth:20},i.createElement(me.S,{options:mr,value:k.mode??bs.k.Columns,onChange:Kt=>ne({...k,mode:Kt})}))),i.createElement(he.Z,null,i.createElement(De._,{label:"Labels",labelWidth:20},i.createElement(ur.Stack,{gap:1,wrap:!0},ze.map((Kt,Ht)=>{const jt=Kt.label;return i.createElement(Qn.B,{key:`${jt}/${Ht}`,onClick:()=>Ot(jt),label:jt,selected:tt.has(jt)})})))),k.mode!==bs.k.Rows&&i.createElement(he.Z,null,i.createElement(De._,{label:"Value field name",labelWidth:20,tooltip:"Replace the value field name with a label",htmlFor:"labels-to-fields-as-name"},i.createElement(pe.Ph,{inputId:"labels-to-fields-as-name",isClearable:!0,allowCustomValue:!1,placeholder:"(Optional) Select label",options:ze,value:k?.valueLabel,onChange:st,className:"min-width-16"}))))},Wr={id:J.W.labelsToFields,editor:Sr,transformation:oe.Y.labelsToFieldsTransformer,name:"Labels to fields",description:`Groups series by time and return labels or tags as fields.
                Useful for showing time series with labels in a table where each label key becomes a separate column`},ms=({options:_,onChange:k})=>{const ne=(0,i.useCallback)(Pe=>{k({..._,limitField:Number(Pe.currentTarget.value)})},[k,_]);return i.createElement(i.Fragment,null,i.createElement(he.Z,null,i.createElement(De._,{label:"Limit",labelWidth:8},i.createElement(se.I,{placeholder:"Limit count",pattern:"[0-9]*",value:_.limitField,onChange:ne,width:25}))))},Mr={id:J.W.limit,editor:ms,transformation:oe.Y.limitTransformer,name:"Limit",description:"Limit the number of items displayed."},ir=({input:_,options:k,onChange:ne})=>_.length<=1?i.createElement(Da.S,null,"Merge has no effect when applied on a single frame."):null,tn={id:J.W.merge,editor:ir,transformation:oe.Y.mergeTransformer,name:"Merge",description:`Merge many series/tables and return a single table where mergeable values will be combined into the same row.
                Useful for showing multiple series, tables or a combination of both visualized in a table.`};var pr=e(19677),$r=e(7582),Br=e(39904),it=e(8180);const Dt=({options:_,input:k,onChange:ne})=>{const{indexByName:Pe,excludeByName:ze,renameByName:tt}=_,st=dr(k),Ot=(0,i.useMemo)(()=>cn(st,Pe),[st,Pe]),Kt=(0,i.useCallback)((pn,Rn)=>{ne({..._,excludeByName:{...ze,[pn]:Rn}})},[ne,_,ze]),Ht=(0,i.useCallback)(pn=>{if(!pn||!pn.destination)return;const Rn=pn.source.index,$n=pn.destination.index;Rn!==$n&&ne({..._,indexByName:Zt(st,Rn,$n)})},[ne,_,st]),jt=(0,i.useCallback)((pn,Rn)=>{ne({..._,renameByName:{..._.renameByName,[pn]:Rn}})},[ne,_]);return k.length>1?i.createElement(Da.S,null,"Organize fields only works with a single frame. Consider applying a join transformation or filtering the input first."):i.createElement(pr.Z5,{onDragEnd:Ht},i.createElement(pr.bK,{droppableId:"sortable-fields-transformer",direction:"vertical"},pn=>i.createElement("div",{ref:pn.innerRef,...pn.droppableProps},Ot.map((Rn,$n)=>i.createElement(Lt,{fieldName:Rn,renamedFieldName:tt[Rn],index:$n,onToggleVisibility:Kt,onRenameField:jt,visible:!ze[Rn],key:Rn})),pn.placeholder)))};Dt.displayName="OrganizeFieldsTransformerEditor";const Lt=({fieldName:_,renamedFieldName:k,index:ne,visible:Pe,onToggleVisibility:ze,onRenameField:tt})=>{const st=(0,ye.wW)(Gt);return i.createElement(pr._l,{draggableId:_,index:ne},Ot=>i.createElement("div",{className:"gf-form-inline",ref:Ot.innerRef,...Ot.draggableProps},i.createElement("div",{className:"gf-form gf-form--grow"},i.createElement("div",{className:"gf-form-label gf-form-label--justify-left width-30"},i.createElement(Br.J,{name:"draggabledots",title:"Drag and drop to reorder",size:"lg",className:st.draggable,...Ot.dragHandleProps}),i.createElement(it.h,{className:st.toggle,size:"md",name:Pe?"eye":"eye-slash",onClick:()=>ze(_,Pe)}),i.createElement("span",{className:st.name,title:_},_)),i.createElement(se.I,{className:"flex-grow-1",defaultValue:k||"",placeholder:`Rename ${_}`,onBlur:Kt=>tt(_,Kt.currentTarget.value)}))))};Lt.displayName="DraggableFieldName";const Gt=_=>({toggle:j.css`
    margin: 0 8px;
    color: ${_.colors.text.secondary};
  `,draggable:j.css`
    opacity: 0.4;
    &:hover {
      color: ${_.colors.text.maxContrast};
    }
  `,name:j.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: ${_.typography.bodySmall.fontSize};
    font-weight: ${_.typography.fontWeightMedium};
  `}),Zt=(_,k,ne)=>{const Pe=Array.from(_),[ze]=Pe.splice(k,1);return Pe.splice(ne,0,ze),Pe.reduce((tt,st,Ot)=>(tt[st]=Ot,tt),{})},cn=(_,k={})=>{if(!k||Object.keys(k).length===0)return _;const ne=(0,$r.$)(k);return _.sort(ne)},hn={id:J.W.organize,editor:Dt,transformation:oe.Y.organizeFieldsTransformer,name:"Organize fields",description:"Allows the user to re-order, hide, or rename fields / columns. Useful when data source doesn't allow overrides for visualizing data."};var Tn=e(4157),fn=e(68183);const Rt=({options:_,onChange:k})=>{const ne=[{label:"Series to rows",value:Tn.AL.SeriesToRows,description:"Create a table with one row for each series value"},{label:"Reduce fields",value:Tn.AL.ReduceFields,description:"Collapse each field into a single value"}],Pe=(0,i.useCallback)(st=>{const Ot=st.value;k({..._,mode:Ot,includeTimeField:Ot===Tn.AL.ReduceFields?!!_.includeTimeField:!1})},[k,_]),ze=(0,i.useCallback)(()=>{k({..._,includeTimeField:!_.includeTimeField})},[k,_]),tt=(0,i.useCallback)(()=>{k({..._,labelsToFields:!_.labelsToFields})},[k,_]);return i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement("div",{className:"gf-form gf-form--grow"},i.createElement("div",{className:"gf-form-label width-8","aria-label":fn.wl.components.Transforms.Reduce.modeLabel},"Mode"),i.createElement(pe.Ph,{options:ne,value:ne.find(st=>st.value===_.mode)||ne[0],onChange:Pe,className:"flex-grow-1"}))),i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form gf-form--grow"},i.createElement("div",{className:"gf-form-label width-8","aria-label":fn.wl.components.Transforms.Reduce.calculationsLabel},"Calculations"),i.createElement(Ne.m,{className:"flex-grow-1",placeholder:"Choose Stat",allowMultiple:!0,stats:_.reducers||[],onChange:st=>{k({..._,reducers:st})}}))),_.mode===Tn.AL.ReduceFields&&i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form"},i.createElement(Kn.LegacyForms.Switch,{label:"Include time",labelClass:"width-8",checked:!!_.includeTimeField,onChange:ze}))),_.mode!==Tn.AL.ReduceFields&&i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form"},i.createElement(Kn.LegacyForms.Switch,{label:"Labels to fields",labelClass:"width-8",checked:!!_.labelsToFields,onChange:tt}))))},ya={id:J.W.reduce,editor:Rt,transformation:oe.Y.reduceTransformer,name:oe.Y.reduceTransformer.name,description:oe.Y.reduceTransformer.description};class Sa extends i.PureComponent{constructor(k){super(k),this.handleRegexChange=ne=>{const Pe=ne.currentTarget.value;let ze=!0;if(Pe)try{Pe&&(0,Bs.jO)(Pe)}catch{ze=!1}this.setState(tt=>({...tt,regex:Pe,isRegexValid:ze}))},this.handleRenameChange=ne=>{const Pe=ne.currentTarget.value;this.setState(ze=>({...ze,renamePattern:Pe}))},this.handleRegexBlur=ne=>{const Pe=ne.currentTarget.value;let ze=!0;try{Pe&&(0,Bs.jO)(Pe)}catch{ze=!1}this.setState({isRegexValid:ze},()=>{ze&&this.props.onChange({...this.props.options,regex:Pe})})},this.handleRenameBlur=ne=>{const Pe=ne.currentTarget.value;this.setState({renamePattern:Pe},()=>this.props.onChange({...this.props.options,renamePattern:Pe}))},this.state={regex:k.options.regex,renamePattern:k.options.renamePattern,isRegexValid:!0}}render(){const{regex:k,renamePattern:ne,isRegexValid:Pe}=this.state;return i.createElement(i.Fragment,null,i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form gf-form--grow"},i.createElement("div",{className:"gf-form-label width-8"},"Match"),i.createElement(ls.g,{invalid:!Pe,error:Pe?void 0:"Invalid pattern",className:j.css`
                margin-bottom: 0;
              `},i.createElement(se.I,{placeholder:"Regular expression pattern",value:k||"",onChange:this.handleRegexChange,onBlur:this.handleRegexBlur,width:25})))),i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form gf-form--grow"},i.createElement("div",{className:"gf-form-label width-8"},"Replace"),i.createElement(ls.g,{className:j.css`
                margin-bottom: 0;
              `},i.createElement(se.I,{placeholder:"Replacement pattern",value:ne||"",onChange:this.handleRenameChange,onBlur:this.handleRenameBlur,width:25})))))}}const Ca={id:J.W.renameByRegex,editor:Sa,transformation:oe.Y.renameByRegexTransformer,name:"Rename by regex",description:"Renames part of the query result by using regular expression with placeholders."},wa=({input:_,options:k,onChange:ne})=>null,rs={id:J.W.seriesToRows,editor:wa,transformation:oe.Y.seriesToRowsTransformer,name:"Series to rows",description:`Merge many series and return a single series with time, metric and value as columns.
                Useful for showing multiple time series visualized in a table.`},Fa=({input:_,options:k,onChange:ne})=>{const Pe=dr(_).map(st=>({label:st,value:st})),ze=(0,i.useCallback)((st,Ot)=>{ne({...k,sort:[Ot]})},[ne,k]),tt=k.sort?.length?k.sort:[{}];return i.createElement("div",null,tt.map((st,Ot)=>i.createElement(he.Z,{key:`${st.field}/${Ot}`},i.createElement(De._,{label:"Field",labelWidth:10,grow:!0},i.createElement(pe.Ph,{options:Pe,value:st.field,placeholder:"Select field",onChange:Kt=>{ze(Ot,{...st,field:Kt.value})}})),i.createElement(De._,{label:"Reverse"},i.createElement(Xn.x,{value:!!st.desc,onChange:()=>{ze(Ot,{...st,desc:!st.desc})}})))))},zs={id:J.W.sortBy,editor:Fa,transformation:oe.Y.sortByTransformer,name:oe.Y.sortByTransformer.name,description:oe.Y.sortByTransformer.description};function _a({options:_,onChange:k}){const[ne,Pe]=(0,i.useState)(_),ze=Bt(),tt=Ge(),st=()=>{ne.push({path:""}),Pe([...ne]),Ht()},Ot=jt=>{ne&&(ne.splice(jt,1),Pe([...ne]),Ht())},Kt=(jt,pn,Rn)=>{ne&&(Rn==="alias"?ne[pn].alias=jt.currentTarget.value??"":ne[pn].path=jt.currentTarget.value??"",Pe([...ne]))},Ht=()=>{k(ne)};return i.createElement("ol",{className:(0,j.cx)(tt.list)},ne&&ne.map((jt,pn)=>i.createElement("li",{key:pn},i.createElement(he.Z,null,i.createElement(De._,{label:"Field",tooltip:ze.field,grow:!0},i.createElement(se.I,{onBlur:Ht,onChange:Rn=>Kt(Rn,pn,"path"),value:jt.path,placeholder:'A valid json path, e.g. "object.value1" or "object.value2[0]"'})),i.createElement(De._,{label:"Alias",tooltip:ze.alias},i.createElement(se.I,{width:12,value:jt.alias,onBlur:Ht,onChange:Rn=>Kt(Rn,pn,"alias")})),i.createElement(De._,{className:(0,j.cx)(tt.removeIcon)},i.createElement(it.h,{onClick:()=>Ot(pn),name:"trash-alt"}))))),i.createElement(De._,null,i.createElement(re.zx,{icon:"plus",onClick:()=>st(),variant:"secondary"},"Add path")))}const Bt=()=>{const _=[{path:"object",description:"=> extract fields from object"},{path:"object.value1",description:"=> extract value1"},{path:"object.value2",description:"=> extract value2"},{path:"object.value2[0]",description:"=> extract value2 first element"},{path:"object.value2[1]",description:"=> extract value2 second element"}];return{field:i.createElement("div",null,"A valid path of an json object.",i.createElement("div",null,i.createElement("strong",null,"JSON Value:")),i.createElement("pre",null,i.createElement("code",null,["{",'  "object": {','    "value1": "hello world"','    "value2": [1, 2, 3, 4]',"  }","}"].join(`
`))),i.createElement("strong",null,"Valid Paths:"),_.map((k,ne)=>i.createElement("p",{key:ne},i.createElement("code",null,k.path),i.createElement("i",null,k.description)))),alias:"An alias name for the variable in the dashboard. If left blank the given path will be used."}};function Ge(){return{list:j.css`
      margin-left: 20px;
    `,removeIcon:j.css`
      margin: 0 0 0 4px;
      align-items: center;
    `}}var We=e(16911),ct=e(25532),St=(_=>(_.JSON="json",_.KeyValues="kvp",_.Auto="auto",_))(St||{});const $t={id:St.JSON,name:"JSON",description:"Parse JSON string",parse:_=>JSON.parse(_)};function qt(_){const k=[];let ne="",Pe="";const ze={};for(let tt=0;tt<_.length;tt++){let st=_[tt];st===ne&&(ne="",st=_[++tt]);const Ot=st==="\\";if(Ot&&(st=_[++tt]),Ot||ne.length){k.push(st);continue}switch((st==='"'||st==="'")&&(ne=st),st){case":":case"=":k.length&&(Pe&&(ze[Pe]=""),Pe=k.join(""),k.length=0);break;case'"':case"'":case" ":case`
`:case"	":case"\r":case`
`:k.length&&Pe===""&&(ze[k.join("")]="",k.length=0);case",":case";":case"&":case"{":case"}":if(k.length){const Kt=k.join("");Pe.length?(ze[Pe]=Kt,Pe=""):Pe=Kt,k.length=0}break;default:k.push(st),tt===_.length-1&&Pe===""&&k.length&&(ze[k.join("")]="",k.length=0)}}return Pe.length&&(ze[Pe]=k.join("")),ze}const Yt={id:St.KeyValues,name:"Key+value pairs",description:"Look for a=b, c: d values in the line",parse:qt},Dn=[$t,Yt],Nn={id:St.Auto,name:"Auto",description:"parse new fields automatically",parse:_=>{for(const k of Dn)try{const ne=k.parse(_);if(ne!=null)return ne}catch{}}},wn=new ee.B(()=>[...Dn,Nn]),Un={id:J.W.extractFields,name:"Extract fields",description:"Parse fields from the contends of another",defaultOptions:{},operator:(_,k)=>ne=>ne.pipe((0,vt.U)(Pe=>Un.transformer(_,k)(Pe))),transformer:_=>k=>k.map(ne=>_n(ne,_))};function _n(_,k){if(!k.source)return _;const ne=(0,ct.findField)(_,k.source);if(!ne)return _;const Pe=wn.getIfExists(k.format??St.Auto);if(!Pe)throw new Error("unkonwn extractor");const ze=_.length,tt=[],st=new Map;for(let Kt=0;Kt<ze;Kt++){let Ht=ne.values.get(Kt);if((0,y.isString)(Ht))try{Ht=Pe.parse(Ht)}catch{Ht={}}if(k.format===St.JSON&&k.jsonPaths&&k.jsonPaths?.length>0){const jt={},pn=k.jsonPaths.filter(Rn=>Rn.path);pn.length>0&&(pn.forEach(Rn=>{const $n=Rn.alias&&Rn.alias.length>0?Rn.alias:Rn.path;jt[$n]=(0,y.get)(Ht,Rn.path)??"Not Found"}),Ht=jt)}for(const[jt,pn]of Object.entries(Ht)){let Rn=st.get(jt);Rn==null&&(Rn=new Array(ze),st.set(jt,Rn),tt.push(jt)),Rn[Kt]=pn}}const Ot=tt.map(Kt=>{const Ht=st.get(Kt);return{name:Kt,values:new ht.G(Ht),type:Ht?(0,We.DP)(Ht.find(jt=>jt!=null)):K.fS.other,config:{}}});if(k.keepTime){const Kt=(0,ct.findField)(_,"Time")||(0,ct.findField)(_,"time");Kt&&Ot.unshift(Kt)}return k.replace||Ot.unshift(..._.fields),{..._,fields:Ot}}const ns={settings:{width:30,placeholderText:"Select field"},name:"",id:"",editor:()=>null},os=({input:_,options:k,onChange:ne})=>{const Pe=Ht=>{ne({...k,source:Ht})},ze=Ht=>{ne({...k,format:Ht?.value})},tt=Ht=>{ne({...k,jsonPaths:Ht})},st=()=>{k.replace&&(k.keepTime=!1),ne({...k,replace:!k.replace})},Ot=()=>{ne({...k,keepTime:!k.keepTime})},Kt=wn.selectOptions(k.format?[k.format]:void 0);return i.createElement("div",null,i.createElement(he.Z,null,i.createElement(De._,{label:"Source",labelWidth:16},i.createElement(Oa.b,{context:{data:_},value:k.source??"",onChange:Pe,item:ns}))),i.createElement(he.Z,null,i.createElement(De._,{label:"Format",labelWidth:16},i.createElement(pe.Ph,{value:Kt.current[0],options:Kt.options,onChange:ze,width:24,placeholder:"Auto"}))),k.format==="json"&&i.createElement(_a,{options:k.jsonPaths??[],onChange:tt}),i.createElement(he.Z,null,i.createElement(De._,{label:"Replace all fields",labelWidth:16},i.createElement(Xn.x,{value:k.replace??!1,onChange:st}))),k.replace&&i.createElement(he.Z,null,i.createElement(De._,{label:"Keep time",labelWidth:16},i.createElement(Xn.x,{value:k.keepTime??!1,onChange:Ot}))))},ks={id:J.W.extractFields,editor:os,transformation:Un,name:"Extract fields",description:"Parse fields from content (JSON, labels, etc)"};var Aa=e(45253),Za=e(15670);const cs={id:J.W.joinByLabels,name:"Join by labels",description:"Flatten labeled results into a table joined by labels",defaultOptions:{},operator:(_,k)=>ne=>ne.pipe((0,vt.U)(Pe=>cs.transformer(_,k)(Pe))),transformer:_=>k=>!k||!k.length?k:[as(_,k)]};function as(_,k){if(!_.value?.length)return Rs("No value labele configured");const ne=es(k);if(ne.size<1)return Rs("No labels in result");if(!ne.has(_.value))return Rs("Value label not found");let Pe=_.join?.length?_.join:Array.from(ne);Pe=Pe.filter(pn=>pn!==_.value);const ze=new Set,tt=new Map,st={};for(const pn of k)for(const Rn of pn.fields)if(Rn.labels&&Rn.type!==K.fS.time){const $n=Pe.map(Lr=>Rn.labels[Lr]),Vn=$n.join(",");let ba=tt.get(Vn);ba||(ba={keys:$n,values:{}},tt.set(Vn,ba));const us=Rn.labels[_.value],sr=Rn.values.toArray(),Ar=ba.values[us];Ar?ba.values[us]=Ar.concat(sr):ba.values[us]=sr,st[us]||(st[us]=Rn),ze.add(us)}const Ot=Array.from(ze),Kt=Pe.map(()=>[]),Ht=Ot.map(()=>[]);for(const pn of tt.values()){let Rn=-1,$n=!1;for(;!$n;){Rn++,$n=!0;for(let Vn=0;Vn<Pe.length;Vn++)Kt[Vn].push(pn.keys[Vn]);for(let Vn=0;Vn<Ot.length;Vn++){const ba=Ot[Vn],us=pn.values[ba]??[];Ht[Vn].push(us[Rn]),us.length>Rn+1&&($n=!1)}}}const jt={fields:[],length:Ht[0].length};for(let pn=0;pn<Pe.length;pn++)jt.fields.push({name:Pe[pn],config:{},type:K.fS.string,values:new ht.G(Kt[pn])});for(let pn=0;pn<Ot.length;pn++){const Rn=st[Ot[pn]];jt.fields.push({name:Ot[pn],config:{},type:Rn.type??K.fS.number,values:new ht.G(Ht[pn])})}return jt}function Rs(_){return{meta:{notices:[{severity:"error",text:_}]},fields:[{name:"Error",type:K.fS.string,config:{},values:new ht.G([_])}],length:0}}function Ys({input:_,options:k,onChange:ne}){const Pe=(0,i.useMemo)(()=>{let Kt;const Ht=es(_),jt=Array.from(Ht).map(us=>({label:us,value:us}));let pn=jt.find(us=>us.value===k.value);!pn&&k.value&&(pn={label:`${k.value} (not found)`,value:k.value},jt.push(pn)),_.length?Ht.size===0&&(Kt=i.createElement(Aa.b,{title:"No labels found"},"The input does not contain any labels")):Kt=i.createElement(Aa.b,{title:"No input found"},"No input (or labels) found"),Ht.delete(k.value);const Rn=Array.from(Ht).map(us=>({label:us,value:us}));let $n=Rn;const Vn=Boolean(k.join?.length);let ba="Join";return Vn?$n=Rn.filter(us=>!k.join.includes(us.value)):ba=Rn.map(us=>us.value).join(", "),{warn:Kt,valueOptions:jt,valueOption:pn,joinOptions:Rn,addOptions:$n,addText:ba,hasJoin:Vn,key:Date.now()}},[k,_]),ze=(Kt,Ht)=>{if(!k.join)return;const jt=k.join.slice();if(Ht)jt[Kt]=Ht;else if(jt.splice(Kt,1),!jt.length){ne({...k,join:void 0});return}const pn=new Set(jt);k.value&&pn.delete(k.value),ne({...k,join:Array.from(pn)})},tt=Kt=>{const Ht=Kt?.value;if(!Ht)return;const jt=k.join?k.join.slice():[];jt.push(Ht),ne({...k,join:jt})},st=10,Ot="No labels found";return i.createElement("div",null,Pe.warn,i.createElement(he.Z,null,i.createElement(De._,{error:"required",invalid:!Boolean(k.value?.length),label:"Value",labelWidth:st,tooltip:"Select the label indicating the values name"},i.createElement(pe.Ph,{options:Pe.valueOptions,value:Pe.valueOption,onChange:Kt=>ne({...k,value:Kt.value}),noOptionsMessage:Ot}))),Pe.hasJoin?k.join.map((Kt,Ht)=>i.createElement(he.Z,{key:Kt+Ht},i.createElement(De._,{label:"Join",labelWidth:st,error:"Unable to join by the value label",invalid:Kt===k.value},i.createElement(ea.Lh,null,i.createElement(pe.Ph,{options:Pe.joinOptions,value:Pe.joinOptions.find(jt=>jt.value===Kt),isClearable:!0,onChange:jt=>ze(Ht,jt?.value),noOptionsMessage:Ot}),Boolean(Pe.addOptions.length&&Ht===k.join.length-1)&&i.createElement(Za.b,{icon:"plus",label:"",options:Pe.addOptions,onChange:tt,variant:"secondary"}))))):i.createElement(i.Fragment,null,Boolean(Pe.addOptions.length)&&i.createElement(he.Z,null,i.createElement(De._,{label:"Join",labelWidth:st},i.createElement(pe.Ph,{options:Pe.addOptions,placeholder:Pe.addText,onChange:tt,noOptionsMessage:Ot})))))}const hr={id:cs.id,editor:Ys,transformation:cs,name:cs.name,description:cs.description,state:at.BV.beta};var kr=e(74311),Ns=e(98356),vr=e(85526),wr=e(73063);const Nr={id:J.W.fieldLookup,name:"Lookup fields from resource",description:"Retrieve matching data based on specified field",defaultOptions:{},operator:_=>k=>k.pipe((0,Ns.z)(ne=>(0,vr.D)(Yr(ne,_))))};async function Yr(_,k){const ne=z.Ls.get(Z.mi.byName).get(k?.lookupField),Pe=await(0,wr.so)(k?.gazetteer??wr.LI);return Pe.frame?Ts(_,Pe,ne):Promise.reject("missing frame in gazetteer")}function Ts(_,k,ne){const Pe=k.frame()?.fields;return Pe?_.map(ze=>{const tt=ze.length,st=[];for(const Ot of ze.fields)if(st.push(Ot),ne(Ot,ze,_)){const Kt=Ot.values.toArray(),Ht=[];for(const jt of Pe){const pn=new Array(tt);Ht.push(pn),st.push({...jt,values:new ht.G(pn)})}for(let jt=0;jt<Ht.length;jt++){const pn=k.find(Kt[jt]);if(pn?.index!=null)for(let Rn=0;Rn<Pe.length;Rn++)Ht[Rn][jt]=Pe[Rn].values.get(pn.index)}}return{...ze,fields:st}}):_}const To={settings:{width:30,filter:_=>_.type===K.fS.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null},ds={settings:{}},nr=({input:_,options:k,onChange:ne})=>{const Pe=(0,i.useCallback)(tt=>{ne({...k,lookupField:tt})},[ne,k]),ze=(0,i.useCallback)(tt=>{ne({...k,gazetteer:tt})},[ne,k]);return i.createElement("div",null,i.createElement(he.Z,null,i.createElement(De._,{label:"Field",labelWidth:12},i.createElement(Oa.b,{context:{data:_},value:k?.lookupField??"",onChange:Pe,item:To}))),i.createElement(he.Z,null,i.createElement(De._,{label:"Lookup",labelWidth:12},i.createElement(kr.Q,{value:k?.gazetteer??"",context:{data:_},item:ds,onChange:ze}))))},Bo={id:J.W.fieldLookup,editor:nr,transformation:Nr,name:"Field lookup",description:"Use a field value to lookup additional fields from an external source.  This currently supports spatial data, but will eventually support more formats",state:at.BV.alpha};var Oo=e(80760),gi=e(84931),Ol=e(21398);const pi=(_,k,ne=[])=>(k===0?ne.push(_):_.forEach(Pe=>{pi(Pe,k-1,ne)}),ne);function qo(_){const k=_[0].length,ne=_.length,Pe=new Map;for(let ze=0;ze<k;ze++){let tt=Pe;for(let st=0;st<ne;st++){let Ot=_[st][ze],Kt=tt.get(Ot);Kt==null&&(Kt=st===ne-1?[]:new Map,tt.set(Ot,Kt)),tt=Kt}tt.push(ze)}return pi(Pe,ne)}const Il={asLabels:!0,append:!1,withNames:!1,separator1:"=",separator2:" "};function ji(_,k,ne){return k.map((Pe,ze)=>_.withNames?`${Pe}${_.separator1}${ne[ze]}`:ne[ze]).join(_.separator2)}function Ec(_,k){const ne={};return _.forEach((Pe,ze)=>{ne[Pe]=String(k[ze])}),ne}const Qr={id:J.W.partitionByValues,name:"Partition by values",description:"Splits a one-frame dataset into multiple series discriminated by unique/enum values in one or more fields.",defaultOptions:{},operator:(_,k)=>ne=>ne.pipe((0,vt.U)(Pe=>Qr.transformer(_,k)(Pe))),transformer:(_,k)=>{const ne=(0,gi.f)({names:_.fields});if(!ne)return Ol.d.transformer({},k);const Pe=(0,z.sq)(ne);return ze=>{if(!ze.length)return ze;const tt=ze[0],st=tt.fields.filter(jt=>Pe(jt,tt,ze)),Ot=st.map(jt=>jt.values.toArray()),Kt=st.map(jt=>jt.name),Ht={...Il,..._.naming};return qo(Ot).map(jt=>{let pn=tt.name,Rn={};if(Ht.asLabels)Rn=Ec(Kt,st.map((Vn,ba)=>Ot[ba][jt[0]]));else{let Vn=ji(Ht,Kt,st.map((ba,us)=>Ot[us][jt[0]]));_.naming?.append&&tt.name&&(Vn=`${tt.name} ${Vn}`),pn=Vn}let $n=tt.fields;if(!_.keepFields){const Vn=new Set(Kt);$n=tt.fields.filter(ba=>!Vn.has(ba.name))}return{...tt,name:pn,length:jt.length,fields:$n.map(Vn=>{const ba=Vn.values.toArray(),us=Array(jt.length);for(let sr=0;sr<jt.length;sr++)us[sr]=ba[jt[sr]];return{...Vn,labels:{...Vn.labels,...Rn},state:void 0,values:new ht.G(us)}})}})}}};function ei({input:_,options:k,onChange:ne}){const Pe=(0,Oo.IX)(_),ze=(0,Oo.nw)(Pe),tt=(0,i.useMemo)(()=>{const Ht=new Set(k.fields);return Ht.size<1?ze:ze.filter(jt=>!Ht.has(jt.value))},[ze,k]),st=(0,i.useCallback)(Ht=>{if(!Ht.value)return;const jt=new Set(k.fields);jt.add(Ht.value),ne({...k,fields:[...jt]})},[ne,k]),Ot=(0,i.useCallback)(Ht=>{if(!Ht)return;const jt=new Set(k.fields);jt.delete(Ht),ne({...k,fields:[...jt]})},[ne,k]);if(_.length>1)return i.createElement(Da.S,null,"Partition by values only works with a single frame.");const Kt=[...new Set(k.fields)];return i.createElement("div",null,i.createElement(he.Z,null,i.createElement(De._,{label:"Field",labelWidth:10,grow:!0},i.createElement(ea.Lh,null,Kt.map(Ht=>i.createElement(re.zx,{key:Ht,icon:"times",variant:"secondary",size:"md",onClick:()=>Ot(Ht)},Ht)),tt.length&&i.createElement(Za.b,{variant:"secondary",size:"md",options:tt,onChange:st,label:"Select field",icon:"plus"})))))}const Yi={id:J.W.partitionByValues,editor:ei,transformation:Qr,name:Qr.name,description:Qr.description,state:at.BV.alpha};var Oi=e(88432),wo=e(38685),Qi=e(98234),Po=(_=>(_.TimeSeriesWide="wide",_.TimeSeriesMany="many",_.TimeSeriesLong="long",_.TimeSeriesMulti="multi",_))(Po||{});function Ii(_){if(!Array.isArray(_)||_.length===0)return _;const k=[];for(const ne of Rl(_)){const Pe=ne.fields[0];if(!Pe||Pe.type!==K.fS.time)continue;const ze=[],tt=[];for(const st of ne.fields)switch(st.type){case K.fS.number:case K.fS.boolean:ze.push(st);break;case K.fS.string:tt.push(st);break}for(const st of ze)if(tt.length){const Ot=new Map;for(let Kt=0;Kt<ne.length;Kt++){const Ht=Pe.values.get(Kt),jt=st.values.get(Kt);if(jt===void 0||Ht==null)continue;const pn=tt.map($n=>$n.values.get(Kt)).join("/");let Rn=Ot.get(pn);if(!Rn){Rn={key:pn,time:[],value:[],labels:{}};for(const $n of tt)Rn.labels[$n.name]=$n.values.get(Kt);Ot.set(pn,Rn)}Rn.time.push(Ht),Rn.value.push(jt)}for(const Kt of Ot.values())k.push({name:ne.name,refId:ne.refId,meta:{...ne.meta,type:Oi.P.TimeSeriesMulti},fields:[{...Pe,values:new ht.G(Kt.time)},{...st,values:new ht.G(Kt.value),labels:Kt.labels}],length:Kt.time.length})}else k.push({name:ne.name,refId:ne.refId,meta:{...ne.meta,type:Oi.P.TimeSeriesMulti},fields:[Pe,st],length:ne.length})}return k}function Rl(_){if(!Array.isArray(_)||_.length===0)return _;const k=[];for(const ne of _){let Pe;const ze=[],tt={},st={},Ot={},Kt={};for(let Vn=0;Vn<ne.fields.length;Vn++){const ba=ne.fields[Vn];switch(ba.type){case K.fS.string:case K.fS.boolean:ba.name in Kt||(Kt[ba.name]=Vn,st[ba.name]=!0);break;case K.fS.time:if(!Pe){Pe=ba;break}default:if(ba.name in tt){const Ar=tt[ba.name];if(ba.type!==Ar)continue}else tt[ba.name]=ba.type,ze.push(ba.name);const us=JSON.stringify(ba.labels),sr=Ot[us];if(sr!==void 0?sr.push(Vn):Ot[us]=[Vn],ba.labels!=null)for(const Ar in ba.labels)st[Ar]=!0}}if(!Pe)continue;const Ht=[],jt=[],pn=[],Rn=[];for(let Vn=0;Vn<ne.length;Vn++)Ht.push({time:Pe.values.get(Vn),wideRowIndex:Vn});for(const Vn in Ot)jt.push(Vn);for(const Vn in st)pn.push(Vn);for(const Vn in Kt)Rn.push(Vn);Ht.sort((Vn,ba)=>Vn.time-ba.time),jt.sort(),pn.sort(),ze.sort();const $n=new wo.v({...ne,meta:{...ne.meta,type:Oi.P.TimeSeriesLong},fields:[{name:Pe.name,type:Pe.type}]});for(const Vn of ze)$n.addField({name:Vn,type:tt[Vn]});for(const Vn of pn)$n.addField({name:Vn,type:K.fS.string});for(const Vn of Ht){const{time:ba,wideRowIndex:us}=Vn;for(const sr of jt){const Ar={};for(const Xo of Rn)Ar[Xo]=ne.fields[Kt[Xo]].values.get(us);let Lr=0;for(const Xo of Ot[sr]){const Ti=ne.fields[Xo];if(Lr++===0&&Ti.labels!=null)for(const hd in Ti.labels)Ar[hd]=Ti.labels[hd];Ar[Ti.name]=Ti.values.get(us)}Ar[Pe.name]=ba,$n.add(Ar)}}k.push($n)}return k}const ti={id:J.W.prepareTimeSeries,name:"Prepare time series",description:"Will stretch data frames from the wide format into the long format. This is really helpful to be able to keep backwards compatibility for panels not supporting the new wide format.",defaultOptions:{},operator:(_,k)=>ne=>ne.pipe((0,vt.U)(Pe=>ti.transformer(_,k)(Pe))),transformer:_=>{const k=_?.format??"wide";return Ii}},Zi={label:"Wide time series",value:Po.TimeSeriesWide,description:"Creates a single frame joined by time",info:i.createElement("ul",null,i.createElement("li",null,"Single frame"),i.createElement("li",null,"1st field is shared time field"),i.createElement("li",null,"Time in ascending order"),i.createElement("li",null,"Multiple value fields of any type"))},Zr={label:"Multi-frame time series",value:Po.TimeSeriesMulti,description:"Creates a new frame for each time/number pair",info:i.createElement("ul",null,i.createElement("li",null,"Multiple frames"),i.createElement("li",null,"Each frame has two fields: time, value"),i.createElement("li",null,"Time in ascending order"),i.createElement("li",null,"String values are represented as labels"),i.createElement("li",null,"All values are numeric"))},Al={label:"Long time series",value:Po.TimeSeriesLong,description:"Convert each frame to long format",info:i.createElement("ul",null,i.createElement("li",null,"Single frame"),i.createElement("li",null,"1st field is time field"),i.createElement("li",null,"Time in ascending order, but may have duplictes"),i.createElement("li",null,"String values are represented as separate fields rather than as labels"),i.createElement("li",null,"Multiple value fields may exist"))},No=[Zi,Zr,Al];function Uo(_){const{options:k,onChange:ne}=_,Pe=(0,ye.wW)(ni),ze=(0,i.useCallback)(tt=>{ne({...k,format:tt.value})},[ne,k]);return i.createElement(i.Fragment,null,i.createElement(he.Z,null,i.createElement(De._,{label:"Format",labelWidth:12},i.createElement(pe.Ph,{width:35,options:No,value:No.find(tt=>tt.value===Po.TimeSeriesMulti&&k.format===Po.TimeSeriesMany?!0:tt.value===k.format)||No[0],onChange:ze,className:"flex-grow-1"}))),i.createElement(he.Z,null,i.createElement(De._,{label:"Info",labelWidth:12},i.createElement("div",{className:Pe.info},(No.find(tt=>tt.value===k.format)||No[0]).info))))}const ni=_=>({info:j.css`
    margin-left: 20px;
  `}),ps={id:ti.id,editor:Uo,transformation:ti,name:ti.name,description:ti.description,help:`
  ### Use cases

  This takes query results and transforms them into a predictable timeseries format.
  This transformer may be especially useful when using old panels that only expect the
  many-frame timeseries format.
  `},Fo={id:J.W.rowsToFields,name:"Rows to fields",description:"Convert each row into a field with dynamic config",defaultOptions:{},operator:_=>k=>k.pipe((0,vt.U)(ne=>ne.map(Pe=>Ji(_,Pe))))};function Ji(_,k){const ne=Jn(k,_.mappings??[],!0),{nameField:Pe,valueField:ze}=ne;if(!Pe||!ze)return k;const tt=[];for(let st=0;st<Pe.values.length;st++){const Ot=Pe.values.get(st),Kt=ze.values.get(st),Ht=pt(k,st,ne),jt=Ri(k,st,ne),pn={name:`${Ot}`,type:ze.type,values:new ht.G([Kt]),config:Ht,labels:jt};tt.push(pn)}return{fields:tt,length:1}}function Ri(_,k,ne){const Pe={...ne.nameField.labels};for(let ze=0;ze<_.fields.length;ze++){const tt=_.fields[ze],st=(0,ae.C)(tt,_),Ot=ne.index[st];if(Ot.handler&&Ot.handler.key!==bt.Label)continue;const Kt=tt.values.get(k);Kt!=null&&(Pe[st]=Kt)}return Pe}function Wo({input:_,options:k,onChange:ne}){return _.length===0?null:i.createElement("div",null,i.createElement(qn,{frame:_[0],mappings:k.mappings??[],onChange:Pe=>ne({...k,mappings:Pe}),withNameAndValue:!0}))}const hi={id:Fo.id,editor:Wo,transformation:Fo,name:Fo.name,description:Fo.description,state:at.BV.beta,help:`
### Use cases 

This transforms rows into separate fields. This can be useful as fields can be styled and configured 
individually, something rows cannot. It can also use additional fields as sources for dynamic field 
configuration or map them to field labels. The additional labels can then be used to define better 
display names for the resulting fields.

Useful when visualization data in:
- Gauge
- Stat
- Pie chart

## Example

Input:

| Name    | Value | Max |
| ------- | ----- | --- |
| ServerA | 10    | 100 |
| ServerB | 20    | 200 |
| ServerC | 30    | 300 |

Output:

| ServerA (config: max=100) | ServerB (config: max=200) | ServerC (config: max=300) |
| ------------------------- | ------------------------- | ------------------------- |
| 10                        | 20                        | 30                        |

As you can see each row in the source data becomes a separate field. Each field now also has a max 
config option set. Options like **Min**, **Max**, **Unit** and **Thresholds** are all part of field 
configuration and if set like this will be used by the visualization instead of any options manually 
configured in the panel editor options pane.

`};var Ll=e(40538),xe=e(71575),xt=e(96366),Nt=e(50466),Jt=e(43524),nn=e(14573);const an={id:J.W.spatial,name:"Spatial operations",description:"Apply spatial operations to query results",defaultOptions:{},operator:_=>k=>k.pipe((0,Ns.z)(ne=>(0,vr.D)(Gn(ne,_))))};function xn(_){return _.action===xt.JJ.Modify&&_.modify?.op===xt.ac.LineBuilder}async function Gn(_,k){const ne=await(0,Jt.cJ)(k.source);if(xn(k)){const Pe=await(0,Jt.cJ)(k.modify?.target);return _.map(ze=>{const tt=(0,Jt.g6)(ze,ne),st=(0,Jt.g6)(ze,Pe);if(tt.field&&st.field){const Ot=[...ze.fields],Kt=(0,Nt.Fh)(tt.field,st.field),Ht=Ot[0];return Ht.type===K.fS.geo&&Ht!==tt.field&&Ht!==st.field?Ot[0]=(0,Nt.EK)(Ht,Kt):Ot.unshift(Kt),{...ze,fields:Ot}}return ze})}return _.map(Pe=>{let ze=(0,Jt.g6)(Pe,ne);if(ze.field){if(k.action===xt.JJ.Modify){switch(k.modify?.op){case xt.ac.AsLine:let st=ze.field.name;return(!st||st==="Point")&&(st="Line"),{...Pe,length:1,fields:[{...ze.field,name:st,type:K.fS.geo,values:new ht.G([(0,nn.Lp)(ze.field)])}]}}return Pe}const tt=ze.derived?[ze.field,...Pe.fields]:Pe.fields.slice(0);if(k.action===xt.JJ.Calculate&&(tt.push((0,nn.N7)(ze.field,k.calculate??{})),ze.derived=!0),ze.derived)return{...Pe,fields:tt}}return Pe})}const Ln=(_,k)=>{const ne=k.options??{};_.addSelect({path:"action",name:"Action",description:"",defaultValue:xt.JJ.Prepare,settings:{options:[{value:xt.JJ.Prepare,label:"Prepare spatial field",description:"Set a geometry field based on the results of other fields"},{value:xt.JJ.Calculate,label:"Calculate value",description:"Use the geometry to define a new field (heading/distance/area)"},{value:xt.JJ.Modify,label:"Transform",description:"Apply spatial operations to the geometry"}]}}),ne.action===xt.JJ.Calculate?_.addSelect({path:"calculate.calc",name:"Function",description:"",defaultValue:xt.Ii.Heading,settings:{options:[{value:xt.Ii.Heading,label:"Heading"},{value:xt.Ii.Area,label:"Area"},{value:xt.Ii.Distance,label:"Distance"}]}}):ne.action===xt.JJ.Modify&&_.addSelect({path:"modify.op",name:"Operation",description:"",defaultValue:xt.ac.AsLine,settings:{options:[{value:xt.ac.AsLine,label:"As line",description:"Create a single line feature with a vertex at each row"},{value:xt.ac.LineBuilder,label:"Line builder",description:"Create a line between two points"}]}}),xn(ne)?(_.addNestedOptions({category:["Source"],path:"source",build:(Pe,ze)=>{const tt=ne.source??{};tt.mode||(tt.mode=Ll.q1.Auto),(0,xe.C)("Point","",Pe,tt)}}),_.addNestedOptions({category:["Target"],path:"modify",build:(Pe,ze)=>{const tt=ne.modify?.target??{};tt.mode||(tt.mode=Ll.q1.Auto),(0,xe.C)("Point","target.",Pe,tt)}})):(0,xe.C)("Location","source.",_,ne.source)},ia=_=>{(0,i.useEffect)(()=>{if(!_.options.source?.mode){const Pe=ce(Ln);_.onChange({...Pe,..._.options}),console.log("geometry useEffect",Pe)}},[]);const k=ta((0,ye.l4)()),ne=mt(_,Ln);return i.createElement("div",null,i.createElement("div",null,ne.items.map(Pe=>Pe.render())),i.createElement("div",null,ne.categories.map(Pe=>i.createElement("div",{key:Pe.props.id,className:k.wrap},i.createElement("h5",null,Pe.props.title),i.createElement("div",{className:k.item},Pe.items.map(ze=>ze.render()))))))},ta=_=>({wrap:j.css`
      margin-bottom: 20px;
    `,item:j.css`
      border-left: 4px solid ${_.colors.border.strong};
      padding-left: 10px;
    `}),fa={id:J.W.spatial,editor:ia,transformation:an,name:an.name,description:an.description,state:at.BV.alpha},ha=()=>[ya,qs,Ca,Es,qe,hn,or,rs,Xa,za,Wr,Xt,zs,tn,ka,hi,sn,ps,Ss,fa,Bo,ks,Me,An,Mr,hr,Yi],zn=(window.__grafana_public_path__??"public/")+"lib/monaco/min/vs",Zn=[[`${zn}/language/kusto/bridge.min.js`],[`${zn}/language/kusto/kusto.javascript.client.min.js`,`${zn}/language/kusto/newtonsoft.json.min.js`,`${zn}/language/kusto/Kusto.Language.Bridge.min.js`]];function xa(_){return new Promise((k,ne)=>{let Pe;typeof _=="string"?(Pe=document.createElement("script"),Pe.src=_):Pe=_,Pe.onload=()=>k(),Pe.onerror=ze=>ne(ze),document.body.appendChild(Pe)})}const Wa=()=>new Promise(_=>{window.__monacoKustoResolvePromise=_;const k=document.createElement("script");return k.innerHTML=`require(['vs/language/kusto/monaco.contribution'], function() {
      window.__monacoKustoResolvePromise();
    });`,document.body.appendChild(k)});async function Ba(){let _=Promise.resolve();for(const k of Zn){await _;const ne=k.filter(Pe=>!document.querySelector(`script[src="${Pe}"]`)).map(Pe=>xa(Pe));await Promise.all(ne)}await Wa()}function La(){return[{id:"kusto",name:"kusto",init:Ba}]}var Tr=e(30562),Co=e(3499),Io=e(63479),xo=e(25318),Ro=e(41818),Kr=e(97063),Ur=e(35287),vi=e(58379);function Ai(_,k){if(_===k)return!0;if(!(_ instanceof Object)||!(k instanceof Object))return!1;const ne=Object.keys(_),Pe=ne.length;for(let ze=0;ze<Pe;ze++)if(!(ne[ze]in k))return!1;for(let ze=0;ze<Pe;ze++)if(_[ne[ze]]!==k[ne[ze]])return!1;return Pe===Object.keys(k).length}var Or=e(81168);class yc{constructor(){this.searchBarStorageKey="SearchBar_Hidden",this.state=new Io.X({chromeless:!0,sectionNav:{text:(0,Ur.t)("nav.home.title","Home")},searchBarHidden:vi.Z.getBool(this.searchBarStorageKey,!1),kioskMode:null}),this.onToggleMegaMenu=()=>{const k=!this.state.getValue().megaMenuOpen;(0,Ro.ff)("grafana_toggle_menu_clicked",{action:k?"open":"close"}),this.update({megaMenuOpen:k})},this.setMegaMenu=k=>{this.update({megaMenuOpen:k})},this.onToggleSearchBar=()=>{const k=!this.state.getValue().searchBarHidden;vi.Z.set(this.searchBarStorageKey,k),this.update({searchBarHidden:k})},this.onToggleKioskMode=()=>{const k=this.getNextKioskMode();this.update({kioskMode:k}),L.E1.partial({kiosk:this.getKioskUrlValue(k)})}}setMatchedRoute(k){this.currentRoute!==k&&(this.currentRoute=k,this.routeChangeHandled=!1)}update(k){const ne=this.state.getValue(),Pe={...ne};this.routeChangeHandled||(Pe.actions=void 0,Pe.pageNav=void 0,Pe.sectionNav={text:(0,Ur.t)("nav.home.title","Home")},Pe.chromeless=this.currentRoute?.chromeless,this.routeChangeHandled=!0),Object.assign(Pe,k),Pe.chromeless=Pe.kioskMode===Or.KioskMode.Full||this.currentRoute?.chromeless,Ai(ne,Pe)||this.state.next(Pe)}useState(){return(0,Co.Z)(this.state,this.state.getValue())}exitKioskMode(){this.update({kioskMode:void 0}),L.E1.partial({kiosk:null})}setKioskModeFromUrl(k){switch(k){case"tv":this.update({kioskMode:Or.KioskMode.TV});break;case"1":case!0:this.update({kioskMode:Or.KioskMode.Full})}}getKioskUrlValue(k){switch(k){case Or.KioskMode.TV:return"tv";case Or.KioskMode.Full:return!0;default:return null}}getNextKioskMode(){const{kioskMode:k,searchBarHidden:ne}=this.state.getValue();return ne||k===Or.KioskMode.TV?(Kr.Z.emit(xo.SI.alertSuccess,[(0,Ur.t)("navigation.kiosk.tv-alert","Press ESC to exit kiosk mode")]),Or.KioskMode.Full):k?null:Or.KioskMode.TV}}var Xi=e(52974),Bl=e(52889),wl=e(79396);function mo({actions:_,children:k,info:ne,pageNav:Pe,layout:ze,renderTitle:tt,subTitle:st}){const Ot=(0,i.useContext)(Bl.v);return i.createElement(wl.T,{navModel:Ot.sectionNav,pageNav:Pe,layout:ze,actions:_,renderTitle:tt,info:ne,subTitle:st},i.createElement(wl.T.Contents,null,k))}var vd=e(27677);function Ed(_){const k=Pc(_.target);if(!(_.ctrlKey||_.metaKey||_.defaultPrevented)&&k){let ne=k.getAttribute("href");const Pe=k.getAttribute("target");if(ne&&!Pe){const ze=vd.Cj.parseKeyValue(ne.split("?")[1]),tt=ze.orgId&&Number(ze.orgId)!==D.vc.bootData.user.orgId;if((0,L.GQ)("utils",!1,"intercepting link click",_),_.preventDefault(),ne=M.u.stripBaseFromUrl(ne),ne[0]!=="/"||tt)if(ne.indexOf("://")>0||ne.indexOf("mailto:")===0||tt){window.location.href=ne;return}else if(ne.indexOf("#")===0){window.location.hash=ne;return}else ne=`/${ne}`;L.E1.push(ne)}}}function Pc(_){for(;_!==null&&_.tagName;){if(_.tagName.toUpperCase()==="A")return _;_=_.parentNode}return null}var yd=e(8928),Li=e(82378),ai=e(35645),Cc=e(98102),Pd=e(2476),qr=e(45984),xc=e(5191),$o=e(36635),ar=e(3153);function _i(_,...k){const ne=(0,$o.connect)(...k)(_);return Pe=>i.createElement(ne,{...Pe,store:ar.h})}function Cd(_,...k){const ne=(0,$o.connect)(...k)(_);return Pe=>i.createElement($o.Provider,{store:ar.h},i.createElement(ne,{...Pe,store:ar.h}))}const Bi=Cd(_=>i.createElement(i.Fragment,null,i.createElement(xc.$i,{..._},i.createElement(xc.Y0,null))));var bc=e(92973);class ku{constructor(){this.reactModalRoot=document.body,this.reactModalNode=document.createElement("div"),this.onReactModalDismiss=()=>{u.unmountComponentAtNode(this.reactModalNode),this.reactModalRoot.removeChild(this.reactModalNode)}}init(){Kr.Z.subscribe(qr.VJ,k=>this.showConfirmModal(k.payload)),Kr.Z.subscribe(qr.Dn,k=>this.showModalReact(k.payload)),Kr.Z.subscribe(Li.EK,k=>(0,Pd.bY)(k.payload))}showModalReact(k){const{component:ne,props:Pe}=k,ze={component:ne,props:{...Pe,isOpen:!0,onDismiss:this.onReactModalDismiss}},tt=i.createElement((0,bc.E)(Bi,ai.v.theme2),ze);this.reactModalRoot.appendChild(this.reactModalNode),u.render(tt,this.reactModalNode)}showConfirmModal(k){const{confirmText:ne,onConfirm:Pe=()=>{},onDismiss:ze,text2:tt,altActionText:st,onAltAction:Ot,noText:Kt,text:Ht,text2htmlBind:jt,yesText:pn="Yes",icon:Rn,title:$n="Confirm",yesButtonVariant:Vn}=k,ba={confirmText:pn,confirmButtonVariant:Vn,confirmationText:ne,icon:Rn,title:$n,body:Ht,description:tt&&jt?yd.QX.sanitize(tt):tt,isOpen:!0,dismissText:Kt,onConfirm:()=>{Pe(),this.onReactModalDismiss()},onDismiss:()=>{ze?.(),this.onReactModalDismiss()},onAlternative:Ot?()=>{Ot(),this.onReactModalDismiss()}:void 0,alternativeText:st},us={component:Cc.s,props:ba},sr=i.createElement((0,bc.E)(Bi,ai.v.theme2),us);this.reactModalRoot.appendChild(this.reactModalNode),u.render(sr,this.reactModalNode)}}var Nl=e(29930),qi=e(82002),xd=e(88383),bd=e(73289);function wi(_,k=!1){return new Promise(ne=>{const Pe=document.createElement("script");Pe.onload=ne,Pe.src=_,Pe.async=k,document.head.appendChild(Pe)})}const Ul=(0,xd.h)("EchoSrv"),Ei=Ul.logger;(0,bd.x)("echo",void 0,Ul);class Gu{constructor(k){this.config={flushInterval:1e4,debug:!1},this.backends=[],this.flush=()=>{for(const ne of this.backends)ne.flush()},this.addBackend=ne=>{Ei("Adding backend",!1,ne),this.backends.push(ne)},this.addEvent=(ne,Pe)=>{const ze=this.getMeta(),tt={...ne,meta:{...ze,...Pe}};for(const st of this.backends)(st.supportedEvents.length===0||st.supportedEvents.indexOf(tt.type)>-1)&&st.addEvent(tt);Ei("Reporting event",!1,tt)},this.getMeta=()=>({sessionId:"",userId:qi.Vt.user.id,userLogin:qi.Vt.user.login,userSignedIn:qi.Vt.user.isSignedIn,screenSize:{width:window.innerWidth,height:window.innerHeight},windowSize:{width:window.screen.width,height:window.screen.height},userAgent:window.navigator.userAgent,ts:new Date().getTime(),timeSinceNavigationStart:performance.now(),url:window.location.href}),this.config={...this.config,...k},setInterval(this.flush,this.config.flushInterval)}}const Dd=(_,k)=>{(0,A.RP)().addEvent({type:A.ee.Performance,payload:{name:_,value:k}})},ju=_=>captureException(_);class Fl{constructor(k){this.options=k,this.buffer=[],this.supportedEvents=[A.ee.Performance],this.addEvent=ne=>{this.buffer.push(ne.payload)},this.flush=()=>{this.buffer.length!==0&&(Nl.ae.post("/api/frontend-metrics",{events:this.buffer}),this.buffer=[])}}}var yi=e(75552);class Pi{constructor(k){this.options=k,this.supportedEvents=[A.ee.Pageview,A.ee.Interaction],this.addEvent=ze=>{window.applicationInsights&&((0,yi.Si)(ze)&&window.applicationInsights.trackPageView?.(),(0,yi.fV)(ze)&&window.applicationInsights.trackEvent?.({name:ze.payload.interactionName,properties:ze.payload.properties}))},this.flush=()=>{};const ne={config:{connectionString:k.connectionString,endpointUrl:k.endpointUrl}};wi("https://js.monitor.azure.com/scripts/b/ai.2.min.js").then(()=>{const ze=new window.Microsoft.ApplicationInsights.ApplicationInsights(ne);window.applicationInsights=ze.loadAppInsights()})}}class si{constructor(k){this.options=k,this.supportedEvents=[A.ee.Pageview],this.googleAnalytics4SendManualPageViews=!1,this.addEvent=ze=>{window.gtag&&this.googleAnalytics4SendManualPageViews&&window.gtag("event","page_view",{page_path:ze.payload.page})},this.flush=()=>{};const ne=`https://www.googletagmanager.com/gtag/js?id=${k.googleAnalyticsId}`;wi(ne,!0),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date);const Pe={page_path:window.location.pathname};k.user&&(Pe.user_id=k.user.analytics.identifier),this.googleAnalytics4SendManualPageViews=k.googleAnalytics4SendManualPageViews,window.gtag("config",k.googleAnalyticsId,Pe)}}class bo{constructor(k){this.options=k,this.supportedEvents=[A.ee.Pageview],this.trackedUserId=null,this.addEvent=ze=>{if(!window.ga)return;window.ga("set",{page:ze.payload.page}),window.ga("send","pageview");const{userSignedIn:tt,userId:st}=ze.meta;tt&&st!==this.trackedUserId&&(this.trackedUserId=st,window.ga("set","userId",st))},this.flush=()=>{};const ne=`https://www.google-analytics.com/analytics${k.debug?"_debug":""}.js`;wi(ne);const Pe=window.ga=window.ga||function(){(Pe.q=Pe.q||[]).push(arguments)};Pe.l=+new Date,Pe("create",k.googleAnalyticsId,"auto"),Pe("set","anonymizeIp",!0)}}class ri{constructor(k){this.options=k,this.supportedEvents=[A.ee.Pageview,A.ee.Interaction,A.ee.ExperimentView],this.addEvent=tt=>{window.rudderanalytics&&((0,yi.Si)(tt)&&window.rudderanalytics.page?.(),(0,yi.fV)(tt)&&window.rudderanalytics.track?.(tt.payload.interactionName,tt.payload.properties),(0,yi.mR)(tt)&&window.rudderanalytics.track?.("experiment_viewed",{experiment_id:tt.payload.experimentId,experiment_group:tt.payload.experimentGroup,experiment_variant:tt.payload.experimentVariant}))},this.flush=()=>{};const ne=k.sdkUrl||"https://cdn.rudderlabs.com/v1/rudder-analytics.min.js";wi(ne);const Pe=window.rudderanalytics=[],ze=["load","page","track","identify","alias","group","ready","reset","getAnonymousId","setAnonymousId"];for(let tt=0;tt<ze.length;tt++){const st=ze[tt];Pe[st]=function(Ot){return function(){Pe.push([Ot].concat(Array.prototype.slice.call(arguments)))}}(st)}if(window.rudderanalytics?.load?.(k.writeKey,k.dataPlaneUrl,{configUrl:k.configUrl}),k.user){const{identifier:tt,intercomIdentifier:st}=k.user.analytics,Ot={};st&&(Ot.Intercom={user_hash:st}),window.rudderanalytics?.identify?.(tt,{email:k.user.email,orgId:k.user.orgId,language:k.user.language},Ot)}}}var Wl=e(13891),Sd=e(68372),$l=e(1335),Md=e(14063),Kl=e(2194),el=e(75078),Yu=e(74128);class ao extends Yu.d{constructor(){super(...arguments),this.name="EchoSrvTransport",this.version=ai.v.buildInfo.version}send(k){(0,A.RP)().addEvent({type:A.ee.GrafanaJavascriptAgent,payload:k})}getIgnoreUrls(){return[]}}class oi{constructor(k){this.options=k,this.supportedEvents=[A.ee.GrafanaJavascriptAgent],this.addEvent=ze=>{this.transports.forEach(tt=>tt.send(ze.payload))},this.flush=()=>{};const ne=[];this.transports=[],k.customEndpoint&&this.transports.push(new Wl.V({url:k.customEndpoint,apiKey:k.apiKey})),k.errorInstrumentalizationEnabled&&ne.push(new Sd.w),k.consoleInstrumentalizationEnabled&&ne.push(new $l.J),k.webVitalsInstrumentalizationEnabled&&ne.push(new Md.P);const Pe={globalObjectKey:k.globalObjectKey||"faro",preventGlobalExposure:k.preventGlobalExposure||!1,app:{version:k.buildInfo.version,environment:k.buildInfo.env},instrumentations:ne,transports:[new ao],ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"],metas:[...Kl.i,{session:{id:(Math.random()+1).toString(36).substring(2)}}]};this.faroInstance=(0,el.p)(Pe),k.user&&this.faroInstance.api.setUser({id:k.user.id,attributes:{orgId:String(k.user.orgId)||""}})}}var Ao=e(37916),tl=e(81534),Ko=e(34785),po=e(48606),Td=e(51401),nl=e(51499),Vl=e(76501),Od=e(28466),Id=e(3469);const Rd=3,Ad=5e3;class Ld{constructor(k){this.options=k,this._disabledUntil=new Date(Date.now()),this._buffer=(0,Td.x)(k.maxConcurrentRequests??Rd)}sendEvent(k){if(new Date(Date.now())<this._disabledUntil){const ze="Dropping frontend event due to too many requests.";return console.warn(ze),Promise.resolve({event:k,reason:ze,status:"skipped"})}const ne={body:JSON.stringify({...k,level:k.level??(k.exception?po.z.Error:po.z.Info),exception:k.exception?{values:k.exception.values?.map(ze=>({...ze,value:wd(ze.value)}))}:k.exception,breadcrumbs:k.breadcrumbs?.map(ze=>({...ze,timestamp:Bd(ze.timestamp)})),timestamp:Bd(k.timestamp)}),url:this.options.endpoint},Pe={body:ne.body,headers:{"Content-Type":"application/json"},method:"POST",referrerPolicy:(0,nl.hv)()?"origin":""};return this.options.fetchParameters!==void 0&&Object.assign(Pe,this.options.fetchParameters),this._buffer.add(()=>new Vl.cW((ze,tt)=>{window.fetch(ne.url,Pe).then(st=>{if(st.status===200){ze({status:"success"});return}if(st.status===429){const Ot=Date.now(),Kt=st.headers.get("Retry-After");Kt?this._disabledUntil=new Date(Ot+(0,Od.JY)(Kt,Ot)):this._disabledUntil=new Date(Ot+Ad),Id.kg.warn(`Too many requests, backing off till: ${this._disabledUntil}`)}tt(st)}).catch(tt)})).then(void 0,ze=>{if(ze.message==="Not adding Promise due to buffer limit reached."){const tt="Dropping frontend log event due to too many requests in flight.";return console.warn(tt),{event:k,reason:tt,status:"skipped"}}throw ze})}}function Bd(_){return _?new Date(_*1e3).toISOString():new Date().toISOString()}function wd(_){return typeof _=="string"||_===void 0?_:_&&typeof _=="object"&&Object.keys(_).length===0?"":String(_)}class ho extends Ko.d8{sendEvent(k){return(0,A.RP)().addEvent({type:A.ee.Sentry,payload:k}),Promise.resolve({status:"success",event:k})}sendSession(k){return Promise.resolve({status:"skipped"})}_sendRequest(k,ne){throw new Error("should not happen")}}class Dc{constructor(k){this.options=k,this.supportedEvents=[A.ee.Sentry],this.addEvent=Pe=>{this.transports.forEach(ze=>ze.sendEvent(Pe.payload))},this.flush=()=>{},this.transports=[],k.dsn&&this.transports.push(new Ko.Vh({dsn:k.dsn},fetch)),k.customEndpoint&&this.transports.push(new Ld({endpoint:k.customEndpoint}));const ne={release:k.buildInfo.version,environment:k.buildInfo.env,dsn:k.dsn||"https://examplePublicKey@o0.ingest.sentry.io/0",sampleRate:k.sampleRate,transport:ho,ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"]};k.user&&(0,Ao.av)({email:k.user.email,id:String(k.user.id)}),(0,tl.S1)(ne)}}var Nd=e(35582),al=e.n(Nd),Em=e(76767),sl=e(93013),Vo=e(55935),Ud=e(7196),Sc=e(18262),Ci=e(19349),Fd=e(41197),Wd=e(77582),Mc=e(5534);function $d(_){return()=>{const k=document.querySelectorAll(":hover");for(let ne=k.length-1;ne>0;ne--){const Pe=k[ne];Pe instanceof HTMLElement&&Pe.dataset?.panelid&&_(parseInt(Pe.dataset?.panelid,10))}}}class Kd{constructor(k,ne){this.locationService=k,this.chromeService=ne}clearAndInitGlobalBindings(){al().reset(),this.locationService.getLocation().pathname!=="/login"&&(this.bind(["?","h"],this.showHelpModal),this.bind("g h",this.goToHome),this.bind("g a",this.openAlerting),this.bind("g p",this.goToProfile),this.bind("g e",this.goToExplore),ai.v.featureToggles.topNavCommandPalette||(this.bind("s o",this.openSearch),this.bind("f",this.openSearch)),this.bind("t a",this.makeAbsoluteTime),this.bind("esc",this.exit),this.bindGlobalEsc()),this.bind("c t",()=>(0,Mc.X)(!1)),this.bind("c r",()=>(0,Mc.X)(!0))}bindGlobalEsc(){this.bindGlobal("esc",this.globalEsc)}globalEsc(){const ne=document.activeElement;if(!(document.querySelectorAll(".slate-typeahead--open").length>0)){if(ne&&ne instanceof HTMLElement&&(ne.nodeName==="INPUT"||ne.nodeName==="TEXTAREA"||ne.hasAttribute("data-slate-editor"))){ne.blur();return}this.exit()}}toggleNav(){window.location.href=ai.v.appSubUrl+M.u.getUrlForPartial(this.locationService.getLocation(),{"__feature.topnav":(!ai.v.featureToggles.topnav).toString()})}openSearch(){this.locationService.partial({search:"open"})}closeSearch(){this.locationService.partial({search:null})}openAlerting(){this.locationService.push("/alerting")}goToHome(){this.locationService.push("/")}goToProfile(){this.locationService.push("/profile")}goToExplore(){this.locationService.push("/explore")}makeAbsoluteTime(){Kr.Z.publish(new qr.QI)}showHelpModal(){Kr.Z.publish(new qr.Dn({component:Fd.B}))}exit(){const k=this.locationService.getSearchObject();if(k.editview){this.locationService.partial({editview:null,editIndex:null});return}if(k.inspect){this.locationService.partial({inspect:null,inspectTab:null});return}if(k.editPanel){this.locationService.partial({editPanel:null,tab:null});return}if(k.viewPanel){this.locationService.partial({viewPanel:null,tab:null});return}const{kioskMode:ne}=this.chromeService.state.getValue();ne&&this.chromeService.exitKioskMode(),k.search&&this.closeSearch()}showDashEditView(){this.locationService.partial({editview:"settings"})}bind(k,ne){al().bind(k,Pe=>{Pe.preventDefault(),Pe.stopPropagation(),Pe.returnValue=!1,ne.call(this)},"keydown")}bindGlobal(k,ne){al().bindGlobal(k,Pe=>{Pe.preventDefault(),Pe.stopPropagation(),Pe.returnValue=!1,ne.call(this)},"keydown")}unbind(k,ne){al().unbind(k,ne)}bindWithPanelId(k,ne){this.bind(k,$d(ne))}setupTimeRangeBindings(k=!0){this.bind("t z",()=>{Kr.Z.publish(new qr.p8({scale:2,updateUrl:k}))}),this.bind("ctrl+z",()=>{Kr.Z.publish(new qr.p8({scale:2,updateUrl:k}))}),this.bind("t left",()=>{Kr.Z.publish(new qr.Qt({direction:qr.Im.Left,updateUrl:k}))}),this.bind("t right",()=>{Kr.Z.publish(new qr.Qt({direction:qr.Im.Right,updateUrl:k}))})}setupDashboardBindings(k){this.bind("mod+o",()=>{k.graphTooltip=(k.graphTooltip+1)%3,k.events.publish(new xo.oi),k.startRefresh()}),this.bind("mod+s",()=>{k.meta.canSave&&Kr.Z.publish(new qr.Dn({component:Ud.d,props:{dashboard:k}}))}),this.setupTimeRangeBindings(),this.bindWithPanelId("e",ne=>{if(k.canEditPanelById(ne)){const Pe=this.locationService.getSearchObject().editPanel!==void 0;this.locationService.partial({editPanel:Pe?null:ne})}}),this.bindWithPanelId("v",ne=>{const Pe=this.locationService.getSearchObject().viewPanel!==void 0;this.locationService.partial({viewPanel:Pe?null:ne})}),this.bindWithPanelId("p l",ne=>{const Pe=k.getPanelById(ne),ze={...Pe.options};ze.legend.showLegend?ze.legend.showLegend=!1:ze.legend.showLegend=!0,Pe.updateOptions(ze)}),this.bindWithPanelId("i",ne=>{this.locationService.partial({inspect:ne})}),Wd.Vt.hasAccessToExplore()&&this.bindWithPanelId("x",async ne=>{const Pe=k.getPanelById(ne),ze=await(0,Vo.H6)({panel:Pe,datasourceSrv:(0,o.ak)(),timeSrv:(0,Ci.$t)()});if(ze){const tt=M.u.stripBaseFromUrl(ze);tt&&this.locationService.push(tt)}}),this.bindWithPanelId("p r",ne=>{k.canEditPanelById(ne)&&!(k.panelInView||k.panelInEdit)&&Kr.Z.publish(new qr.Eb(ne))}),this.bindWithPanelId("p d",ne=>{if(k.canEditPanelById(ne)){const Pe=k.getPanelInfoById(ne).index;k.duplicatePanel(k.panels[Pe])}}),this.bindWithPanelId("p s",ne=>{const Pe=k.getPanelInfoById(ne);Kr.Z.publish(new qr.Dn({component:Sc.ShareModal,props:{dashboard:k,panel:Pe?.panel}}))}),this.bind("d l",()=>{k.toggleLegendsForAll()}),this.bind("d shift+c",()=>{k.collapseRows()}),this.bind("d shift+e",()=>{k.expandRows()}),this.bind("d n",()=>{this.locationService.push("/dashboard/new")}),this.bind("d r",()=>{k.startRefresh()}),this.bind("d s",()=>{this.showDashEditView()}),this.bind("d k",()=>{this.chromeService.onToggleKioskMode()}),this.bind("d a",()=>{const Pe=this.locationService.getSearchObject().autofitpanels?"":"&autofitpanels";window.location.href=window.location.href+Pe})}}async function Tc(){if(window.location.search.indexOf("why-render")!==-1){const{default:_}=await e.e(2182).then(e.t.bind(e,62182,23));_(React,{trackAllPureComponents:!0})}}var Vd=e(51927),zd=e(98141),Oc=e(38490),Ic=e(82221);async function Vr(_=[]){await Promise.all(_.map(Jr))}async function Jr(_){const{path:k,version:ne}=_;try{await(0,Ic.N$)(k,ne)}catch(Pe){console.error(`Failed to load plugin: ${k} (version: ${ne})`,Pe)}}var Hd=e(16527),kd=e(43464),rl=e(40400),Ni=e(33180),Ir=e(49922),ii=e(40885),Rc=e(78800),Ac=e(59584),Ui=e(75434);class Lc{constructor(){this.subject=new Hd.t(1)}get(){return this.subject.asObservable()}run(k){const{queries:ne,timezone:Pe,datasource:ze,panelId:tt,app:st,dashboardId:Ot,timeRange:Kt,timeInfo:Ht,cacheTimeout:jt,maxDataPoints:pn,scopedVars:Rn,minInterval:$n}=k;this.subscription&&this.subscription.unsubscribe();const Vn={app:st??rl.zj.Unknown,requestId:(0,Rc.t)(),timezone:Pe,panelId:tt,dashboardId:Ot,range:Kt,timeInfo:Ht,interval:"",intervalMs:0,targets:(0,y.cloneDeep)(ne),maxDataPoints:pn,scopedVars:Rn||{},cacheTimeout:jt,startTime:Date.now()};Vn.rangeRaw=Kt.raw,(0,vr.D)(zl(ze,Vn.scopedVars)).pipe((0,kd.P)()).subscribe({next:ba=>{Vn.targets=Vn.targets.map(Ar=>(Ar.datasource||(Ar.datasource=ba.getRef()),Ar));const us=$n?(0,ii.J)().replace($n,Vn.scopedVars):ba.interval,sr=Ni.calculateInterval(Kt,pn,us);Vn.scopedVars=Object.assign({},Vn.scopedVars,{__interval:{text:sr.interval,value:sr.interval},__interval_ms:{text:sr.intervalMs.toString(),value:sr.intervalMs}}),Vn.interval=sr.interval,Vn.intervalMs=sr.intervalMs,this.subscription=(0,Ui.v7)(ba,Vn).subscribe({next:Ar=>{const Lr=(0,Ui.zR)(Ar,this.lastResult);this.lastResult=(0,Ac.C)(Lr,this.lastResult),this.subject.next(this.lastResult)}})},error:ba=>console.error("PanelQueryRunner Error",ba)})}cancel(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===Ir.Gu.Loading&&this.subject.next({...this.lastResult,state:Ir.Gu.Done}))}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}}async function zl(_,k){return _&&"query"in _?_:(0,o.ak)().get(_,k)}function Gd(){window.grafanaRuntime={getDashboardSaveModel:()=>{const _=(0,a.h4)().getCurrent();if(_)return _.getSaveModelClone()},getDashboardTimeRange:()=>{const _=(0,Ci.$t)().timeRange();return{from:_.from.valueOf(),to:_.to.valueOf(),raw:_.raw}},getPanelData:()=>{const _=(0,a.h4)().getCurrent();if(_)return _.panels.reduce((k,ne)=>(k[ne.id]=ne.getQueryRunner().getLastResult(),k),{})}}}var zo=e(22323),Pa=e(92624),Bc=e(5916),Hl=e(53117),Do=e(41624),So=e(50678);function wc(_){return _.extended&&"infoText"in _.extended?_.extended:null}function kl(_){return _.extended&&"dataSourceTypes"in _.extended?_.extended:null}function Gl(_){return _.extended&&"dataSource"in _.extended?_.extended:null}var Ps=e(87095),xi=e(30002);const Nc=(_,k)=>{const{rootStateKey:ne}=k.variable;if(!ne)return console.error("AdHocVariableEditor: variable has no rootStateKey"),{extended:wc(So.PF)};const{editor:Pe}=(0,Ps.AE)(ne,_);return{extended:wc(Pe)}},jd={changeVariableDatasource:xi.Z$},Yd=(0,$o.connect)(Nc,jd);class Qd extends i.PureComponent{constructor(){super(...arguments),this.onDatasourceChanged=k=>{this.props.changeVariableDatasource((0,Pa.yQ)(this.props.variable),(0,Bc.iU)(k))}}componentDidMount(){const{rootStateKey:k}=this.props.variable;if(!k){console.error("AdHocVariableEditor: variable has no rootStateKey");return}}render(){const{variable:k,extended:ne}=this.props,Pe=ne?.infoText??null;return i.createElement(i.Fragment,null,i.createElement(Do.e,null,"Ad-hoc options"),i.createElement(ls.g,{label:"Data source",htmlFor:"data-source-picker"},i.createElement(Hl.q,{current:k.datasource,onChange:this.onDatasourceChanged,width:30,noDefault:!0})),Pe?i.createElement(Aa.b,{title:Pe,severity:"info"}):null)}}const Zd=Yd(Qd);var so=e(44847);const Uc={addFilter:xi.KJ,removeFilter:xi.ku,changeFilter:xi.M6},Qu=(0,$o.connect)(null,Uc);class jl extends i.PureComponent{constructor(){super(...arguments),this.addFilter=k=>{this.props.addFilter((0,Pa.yQ)(this.props.variable),k)},this.removeFilter=k=>{this.props.removeFilter((0,Pa.yQ)(this.props.variable),k)},this.changeFilter=(k,ne)=>{this.props.changeFilter((0,Pa.yQ)(this.props.variable),{index:k,filter:ne})}}render(){const{filters:k,datasource:ne}=this.props.variable;return i.createElement(so.F,{datasource:ne,filters:k,disabled:this.props.readOnly,addFilter:this.addFilter,removeFilter:this.removeFilter,changeFilter:this.changeFilter})}}const Yl=Qu(jl);Yl.displayName="AdHocPicker";var Fc=e(79134);const Jd=_=>_.map(k=>Xd(k).map(li).join("|")),ol=_=>{if((0,y.isArray)(_))return _.map($c).filter(il);const k=$c(_);return k===null?[]:[k]};function li(_){return _==null?"":/\|/g[Symbol.replace](_,"__gfp__")}function Wc(_){return _==null?"":/__gfp__/g[Symbol.replace](_,"|")}function Xd(_){return[_.key,_.operator,_.value]}function $c(_){if(!(0,y.isString)(_)||_.length===0)return null;const k=_.split("|").map(Wc);return{key:k[0],operator:k[1],value:k[2],condition:""}}function il(_){return _!==null&&(0,y.isString)(_.value)}const co=async()=>{},br=()=>({id:"adhoc",description:"Add key/value filters on the fly.",name:"Ad hoc filters",initialState:Fc.Js,reducer:Fc.jo,picker:Yl,editor:Zd,dependsOn:()=>!1,setValue:co,setValueFromUrl:async(_,k)=>{const ne=ol(k);await(0,ar.WI)((0,xi.Ue)((0,Pa.yQ)(_),ne))},updateOptions:co,getSaveModel:_=>{const{index:k,id:ne,state:Pe,global:ze,rootStateKey:tt,...st}=(0,y.cloneDeep)(_);return st},getValueForUrl:_=>{const k=_?.filters??[];return Jd(k)}});var ll=e(31259),cl=e(94437),Js=e(15546),vo=e(96209),Kc=e(37537),Fi=e(16313),Ho=e(14542),_d=e(89689),dl=e(67305),Ql=e(94514),ko=e(97218),Lo=e(44288),bi=e(69311),Xs=e(10672),Rr=e(85803),Us=e(7240),Di=e(32557),ro=e(82253),Gr=e(63510);const qd={...Xs.Eg,type:"query",datasource:null,query:"",regex:"",sort:Xs.$U.disabled,refresh:Xs.Bd.onDashboardLoad,multi:!1,includeAll:!1,allValue:null,options:[],current:{},definition:""},eu=(_,k)=>{if(k===Xs.$U.disabled)return _;const ne=Math.ceil(k/2),Pe=k%2===0;return ne===1?_=(0,y.sortBy)(_,"text"):ne===2?_=(0,y.sortBy)(_,ze=>{if(!ze.text)return-1;const tt=ze.text.match(/.*?(\d+).*/);return!tt||tt.length<2?-1:parseInt(tt[1],10)}):ne===3&&(_=(0,y.sortBy)(_,ze=>(0,y.toLower)(ze.text))),Pe&&(_=_.reverse()),_},Vc=(_,k)=>{const ne=[];let Pe=null;k.lastIndex=0;do Pe=k.exec(_),Pe&&ne.push(Pe);while(k.global&&Pe&&Pe[0]!==""&&Pe[0]!==void 0);return ne},jr=(_,k,ne)=>{let Pe,ze=[];_&&(Pe=(0,Bs.jO)(_));for(let tt=0;tt<ne.length;tt++){const st=ne[tt];let Ot=st.text===void 0||st.text===null?st.value:st.text,Kt=st.value===void 0||st.value===null?st.text:st.value;if((0,y.isNumber)(Kt)&&(Kt=Kt.toString()),(0,y.isNumber)(Ot)&&(Ot=Ot.toString()),Pe){const Ht=Vc(Kt,Pe);if(!Ht.length)continue;const jt=Ht.find(Vn=>Vn.groups&&Vn.groups.value),pn=Ht.find(Vn=>Vn.groups&&Vn.groups.text),Rn=Ht.find(Vn=>Vn.length>1),$n=Ht.length>1&&Rn;if(jt||pn)Kt=jt?.groups?.value??pn?.groups?.text,Ot=pn?.groups?.text??jt?.groups?.value;else if($n){for(let Vn=0;Vn<Ht.length;Vn++){const ba=Ht[Vn];ze.push({text:ba[1],value:ba[1],selected:!1})}continue}else Rn&&(Ot=Rn[1],Kt=Rn[1])}ze.push({text:Ot,value:Kt,selected:!1})}return ze=(0,y.uniqBy)(ze,"value"),eu(ze,k)},Wi=(0,Di.oM)({name:"templating/query",initialState:Gr.s,reducers:{updateVariableOptions:(_,k)=>{const{results:ne,templatedRegex:Pe}=k.payload.data,ze=(0,Ps.ir)(_,k.payload.id);if(ze.type!=="query")return;const{includeAll:tt,sort:st}=ze,Ot=jr(Pe,st,ne);tt&&Ot.unshift({text:ro.xk,value:ro.r2,selected:!1}),Ot.length||Ot.push({text:ro.BH,value:ro.QX,isNone:!0,selected:!1}),ze.options=Ot}}}),Zl=Wi.reducer,{updateVariableOptions:zc}=Wi.actions;function ul(){return _=>_.pipe((0,vt.U)(k=>{const ne=k.series;if(!ne||!ne.length)return[];if(tu(ne))return ne;const Pe=(0,We.F9)(ne),ze=[];let tt=-1,st=-1,Ot=-1,Kt=-1;for(const Ht of Pe)for(let jt=0;jt<Ht.fields.length;jt++){const pn=Ht.fields[jt],Rn=(0,ae.C)(pn,Ht,ne).toLowerCase();pn.type===K.fS.string&&Ot===-1&&(Ot=jt),Rn==="text"&&pn.type===K.fS.string&&st===-1&&(st=jt),Rn==="value"&&pn.type===K.fS.string&&tt===-1&&(tt=jt),Rn==="expandable"&&(pn.type===K.fS.boolean||pn.type===K.fS.number)&&Kt===-1&&(Kt=jt)}if(Ot===-1)throw new Error("Couldn't find any field of type string in the results.");for(const Ht of ne)for(let jt=0;jt<Ht.length;jt++){const pn=Kt!==-1?Ht.fields[Kt].values.get(jt):void 0,Rn=Ht.fields[Ot].values.get(jt),$n=st!==-1?Ht.fields[st].values.get(jt):null,Vn=tt!==-1?Ht.fields[tt].values.get(jt):null;if(tt===-1&&st===-1){ze.push({text:Rn,value:Rn,expandable:pn});continue}if(tt===-1&&st!==-1){ze.push({text:$n,value:$n,expandable:pn});continue}if(tt!==-1&&st===-1){ze.push({text:Vn,value:Vn,expandable:pn});continue}ze.push({text:$n,value:Vn,expandable:pn})}return ze}))}function Hc(_){return k=>k.pipe((0,vt.U)(ne=>{const{variable:Pe,dispatch:ze,getTemplatedRegexFunc:tt}=_;if(!Pe.rootStateKey){console.error("updateOptionsState: variable.rootStateKey is not defined");return}const st=tt(Pe),Ot=(0,Pa.Y6)(Pe,{results:ne,templatedRegex:st});ze((0,Us.mb)(Pe.rootStateKey,zc(Ot)))}))}function kc(_){return k=>k.pipe((0,Ns.z)(()=>{const{dispatch:ne,variable:Pe,searchFilter:ze}=_;return ze?(0,En.of)():(0,vr.D)(ne((0,Rr.xQ)((0,Pa.yQ)(Pe))))}))}function tu(_){if(!_)return!1;if(!_.length)return!0;const k=_[0];if((0,We.aY)(k))return!1;for(const ne in k){if(!k.hasOwnProperty(ne)||k[ne]!==null&&typeof k[ne]!="string"&&typeof k[ne]!="number")continue;const Pe=ne.toLowerCase();if(Pe==="text"||Pe==="value")return!0}return!1}var ml=e(59670);class fl{constructor(){this.runners=[new Gc,new nu,new au,new jc]}getRunnerForDatasource(k){const ne=this.runners.find(Pe=>Pe.canRun(k));if(ne)return ne;throw new Error("Couldn't find a query runner that matches supplied arguments.")}}class Gc{constructor(){this.type=ml.j2.Legacy}canRun(k){return(0,Js.R)(k)}getTarget({datasource:k,variable:ne}){if((0,Js.R)(k))return ne.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:k,variable:ne,searchFilter:Pe,timeSrv:ze},tt){if(!(0,Js.R)(k))return $i();const st=(0,Pa.AQ)(ne,Pe,ze);return(0,vr.D)(k.metricFindQuery(ne.query,st)).pipe((0,Ns.z)(Ot=>{if(!Ot||!Ot.length)return $i();const Kt=Ot;return(0,En.of)({series:Kt,state:Ir.Gu.Done,timeRange:st.range})}))}}class nu{constructor(){this.type=ml.j2.Standard}canRun(k){return(0,Js.Ju)(k)}getTarget({datasource:k,variable:ne}){if((0,Js.Ju)(k))return k.variables.toDataQuery(ne.query);throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:k,runRequest:ne},Pe){return(0,Js.Ju)(k)?k.variables.query?ne(k,Pe,k.variables.query):ne(k,Pe):$i()}}class au{constructor(){this.type=ml.j2.Custom}canRun(k){return(0,Js.d7)(k)}getTarget({datasource:k,variable:ne}){if((0,Js.d7)(k))return ne.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:k,runRequest:ne},Pe){return(0,Js.d7)(k)?ne(k,Pe,k.variables.query):$i()}}const Zu="variable-query";class jc{constructor(){this.type=ml.j2.Datasource}canRun(k){return(0,Js.X7)(k)}getTarget({datasource:k,variable:ne}){if((0,Js.X7)(k))return{...ne.query,refId:ne.query.refId??Zu};throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:k,runRequest:ne},Pe){return(0,Js.X7)(k)?ne(k,Pe):$i()}}function $i(){return(0,En.of)({state:Ir.Gu.Done,series:[],timeRange:(0,bi.JK)()})}class Ju{constructor(k={dispatch:ar.WI,getState:ar.y0,getVariable:Ps.E0,getTemplatedRegex:Pa.gR,getTimeSrv:Ci.$t,queryRunners:new fl,runRequest:Ui.v7}){this.dependencies=k,this.updateOptionsRequests=new vo.x,this.updateOptionsResults=new vo.x,this.cancelRequests=new vo.x,this.onNewRequest=this.onNewRequest.bind(this),this.subscription=this.updateOptionsRequests.subscribe(this.onNewRequest)}queueRequest(k){this.updateOptionsRequests.next(k)}getResponse(k){return this.updateOptionsResults.asObservable().pipe((0,Ho.h)(ne=>ne.identifier===k))}cancelRequest(k){this.cancelRequests.next({identifier:k})}destroy(){this.subscription.unsubscribe()}onNewRequest(k){const{datasource:ne,identifier:Pe,searchFilter:ze}=k;try{const{dispatch:tt,runRequest:st,getTemplatedRegex:Ot,getVariable:Kt,queryRunners:Ht,getTimeSrv:jt,getState:pn}=this.dependencies,Rn=(0,Ps.S_)(pn());this.updateOptionsResults.next({identifier:Pe,state:Ir.Gu.Loading});const $n=Kt(Pe,pn());if($n.type!=="query")return;const Vn=jt(),ba={variable:$n,datasource:ne,searchFilter:ze,timeSrv:Vn,runRequest:st},us=Ht.getRunnerForDatasource(ne),sr=us.getTarget({datasource:ne,variable:$n}),Ar=this.getRequest($n,k,sr);us.runRequest(ba,Ar).pipe((0,Ho.h)(()=>{const Lr=(0,Ps.S_)(pn());return Rn===Lr}),(0,Ho.h)(Lr=>Lr.state===Ir.Gu.Done||Lr.state===Ir.Gu.Error),(0,_d.q)(1),(0,Ns.z)(Lr=>Lr.state===Ir.Gu.Error?(0,Kc._)(()=>Lr.error):(0,En.of)(Lr)),ul(),Hc({variable:$n,dispatch:tt,getTemplatedRegexFunc:Ot}),kc({variable:$n,dispatch:tt,searchFilter:ze}),(0,dl.R)((0,Fi.T)(this.updateOptionsRequests,this.cancelRequests).pipe((0,Ho.h)(Lr=>{let Xo=!1;return Lr.identifier.id===Pe.id&&(Xo=!0,this.updateOptionsResults.next({identifier:Pe,state:Ir.Gu.Loading,cancelled:Xo})),Xo}))),(0,Ql.K)(Lr=>Lr.cancelled?(0,En.of)({}):(this.updateOptionsResults.next({identifier:Pe,state:Ir.Gu.Error,error:Lr}),(0,Kc._)(()=>Lr))),(0,ko.x)(()=>{this.updateOptionsResults.next({identifier:Pe,state:Ir.Gu.Done})})).subscribe()}catch(tt){this.updateOptionsResults.next({identifier:Pe,state:Ir.Gu.Error,error:tt})}}getRequest(k,ne,Pe){const{searchFilter:ze}=ne,tt={variable:{text:k.current.text,value:k.current.value}},Kt={...ze?{searchFilter:{text:ze,value:ze}}:{},...tt},Ht=k.refresh===Xs.Bd.onTimeRangeChanged?this.dependencies.getTimeSrv().timeRange():(0,bi.JK)();return{app:rl.zj.Dashboard,requestId:(0,Lo.Z)(),timezone:"",range:Ht,interval:"",intervalMs:0,targets:[Pe],scopedVars:Kt,startTime:Date.now()}}}let Yc;function Si(_){Yc=_}function Ki(){return Yc}const Qc=_=>{if(!gl(_))return _.name;const{current:k}=_;return Array.isArray(k.text)?k.text.join(" + "):k.text},gl=_=>Array.isArray(_?.options)||typeof _?.current=="object";var Go=(_=>(_[_.moveUp=38]="moveUp",_[_.moveDown=40]="moveDown",_[_.select=32]="select",_[_.cancel=27]="cancel",_[_.selectAndClose=13]="selectAndClose",_))(Go||{});class Zc extends i.PureComponent{constructor(){super(...arguments),this.onKeyDown=k=>{if(Go[k.keyCode]&&k.keyCode!==Go.select){const ne=k.ctrlKey||k.metaKey||k.shiftKey;this.props.onNavigate(k.keyCode,ne),k.preventDefault()}},this.onChange=k=>{this.props.onChange(k.target.value)}}render(){const{value:k,id:ne,onNavigate:Pe,...ze}=this.props;return i.createElement("input",{...ze,ref:tt=>{tt&&(tt.focus(),tt.setAttribute("style",`width:${Math.max(tt.width,150)}px`))},type:"text",className:"gf-form-input",value:k??"",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:(0,Ur.t)("variable.picker.input","Enter variable value")})}}var Jl=e(61860);const Xl=({loading:_,disabled:k,onClick:ne,text:Pe,onCancel:ze,id:tt})=>{const st=(0,ye.wW)(pl),Ot=(0,i.useCallback)(Kt=>{Kt.stopPropagation(),Kt.preventDefault(),ne()},[ne]);return _?i.createElement("div",{className:st.container,"data-testid":fn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${Pe}`),title:Pe,id:tt},i.createElement(Jc,{text:Pe}),i.createElement(Xc,{onCancel:ze})):i.createElement("button",{onClick:Ot,className:st.container,"data-testid":fn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${Pe}`),"aria-expanded":!1,"aria-controls":`options-${tt}`,id:tt,title:Pe,disabled:k},i.createElement(Jc,{text:Pe}),i.createElement(Br.J,{"aria-hidden":!0,name:"angle-down",size:"sm"}))},Jc=({text:_})=>{const k=(0,ye.wW)(pl);return i.createElement("span",{className:k.textAndTags},_===ro.xk?(0,Ur.t)("variable.picker.link-all","All"):_)},Xc=({onCancel:_})=>{const k=(0,i.useCallback)(ne=>{ne.preventDefault(),_()},[_]);return i.createElement(Jl.u,{content:"Cancel query"},i.createElement(Br.J,{className:"spin-clockwise",name:"sync",size:"xs",onClick:k,"aria-label":fn.wl.components.LoadingIndicator.icon}))},pl=_=>({container:j.css`
    max-width: 500px;
    padding-right: 10px;
    padding: 0 ${_.spacing(1)};
    background-color: ${_.components.input.background};
    border: 1px solid ${_.components.input.borderColor};
    border-radius: ${_.shape.borderRadius(1)};
    display: flex;
    align-items: center;
    color: ${_.colors.text};
    height: ${_.spacing(_.components.height.md)};

    .label-tag {
      margin: 0 5px;
    }

    &:disabled {
      background-color: ${_.colors.action.disabledBackground};
      color: ${_.colors.action.disabledText};
      border: 1px solid ${_.colors.action.disabledBackground};
    }
  `,textAndTags:j.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-right: ${_.spacing(.25)};
    user-select: none;
  `});var _c=e(9085),qc=e.n(_c);class hl extends i.PureComponent{constructor(){super(...arguments),this.onToggle=k=>ne=>{const Pe=ne.shiftKey||ne.ctrlKey||ne.metaKey;this.handleEvent(ne),this.props.onToggle(k,Pe)},this.onToggleAll=k=>{this.handleEvent(k),this.props.onToggleAll()}}handleEvent(k){k.preventDefault(),k.stopPropagation()}render(){const{multi:k,values:ne,highlightIndex:Pe,selectedValues:ze,onToggle:tt,onToggleAll:st,...Ot}=this.props;return i.createElement("div",{className:`${k?"variable-value-dropdown multi":"variable-value-dropdown single"}`},i.createElement("div",{className:"variable-options-wrapper"},i.createElement("ul",{className:ed,"aria-label":fn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownDropDown,...Ot},this.renderMultiToggle(),ne.map((Kt,Ht)=>this.renderOption(Kt,Ht)))))}renderOption(k,ne){const{highlightIndex:Pe,theme:ze}=this.props,tt=k.selected?"variable-option pointer selected":"variable-option pointer",st=ne===Pe?`${tt} highlighted`:tt,Ot=k.value===ro.r2;return i.createElement("li",{key:`${k.value}`},i.createElement("button",{role:"checkbox",type:"button","aria-checked":k.selected,className:qc()(st,(0,re.gN)(ze),_l),onClick:this.onToggle(k)},i.createElement("span",{className:"variable-option-icon"}),i.createElement("span",{"data-testid":fn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(`${k.text}`)},Ot?(0,Ur.t)("variable.picker.option-all","All"):k.text)))}renderMultiToggle(){const{multi:k,selectedValues:ne,theme:Pe}=this.props;if(!k)return null;const ze=()=>i.createElement(Ur.cC,{i18nKey:"variable.picker.option-tooltip"},"Clear selections");return i.createElement(Jl.u,{content:ze,placement:"top"},i.createElement("button",{className:`${ne.length>1?"variable-options-column-header many-selected":"variable-options-column-header"} ${_l} ${(0,re.gN)(Pe)}`,role:"checkbox","aria-checked":ne.length>1?"mixed":"false",onClick:this.onToggleAll,"aria-label":"Toggle all values","data-placement":"top"},i.createElement("span",{className:"variable-option-icon"}),i.createElement(Ur.cC,{i18nKey:"variable.picker.option-selected-values"},"Selected")," (",ne.length,")"))}}const ed=(0,j.cx)("variable-options-column",j.css`
    list-style-type: none;
  `),_l=j.css`
  width: 100%;
  text-align: left;
`,ql=(0,ye.HE)(hl);var jo=e(92990),oo=e(85972);const su=(_,k,ne)=>async(Pe,ze)=>{if(k===Go.cancel)return await Pe(vl(_));if(k===Go.select)return Pe(eo(_,ne));if(k===Go.selectAndClose)return(0,Ps.AE)(_,ze()).optionsPicker.multi?Pe(eo(_,ne)):(Pe(eo(_,ne,!0)),Pe(vl(_)));if(k===Go.moveDown)return Pe((0,Us.mb)(_,(0,oo.Ew)(1)));if(k===Go.moveUp)return Pe((0,Us.mb)(_,(0,oo.Ew)(-1)))},ru=(_,k="")=>async(ne,Pe)=>{const{rootStateKey:ze}=_,{id:tt,queryValue:st}=(0,Ps.AE)(ze,Pe()).optionsPicker,Ot={id:tt,rootStateKey:ze,type:"query"},Kt=(0,Ps.E0)(Ot,Pe());if(!(0,Js.eL)(Kt))return;const{query:Ht,options:jt}=Kt;if(ne((0,Us.mb)(ze,(0,oo.Ug)(k))),(0,y.trim)(st)!==(0,y.trim)(k))return(0,Pa.bf)(Ht)?Xu(ne,Pe,k,ze):ne((0,Us.mb)(ze,(0,oo.ss)(jt)))},Mi=async _=>{await zo.z.get(_.type).setValue(_,_.current,!0)},vl=(_,k)=>async(ne,Pe)=>{const ze=(0,Ps.AE)(_,Pe()).optionsPicker,tt={id:ze.id,rootStateKey:_,type:"query"},st=(0,Ps.E0)(tt,Pe());if(!(0,Js.eL)(st))return;const Ot={option:_u(ze)},Kt={propName:"queryValue",propValue:ze.queryValue};ne((0,Us.mb)(_,(0,jo.Q8)((0,Pa.Y6)(st,Ot)))),ne((0,Us.mb)(_,(0,jo.Pl)((0,Pa.Y6)(st,Kt))));const Ht=(0,Ps.E0)(tt,Pe());if((0,Js.eL)(Ht)&&(ne((0,Us.mb)(_,(0,oo.nn)())),(0,Pa.N9)(st)!==(0,Pa.N9)(Ht)))return k?k(Ht):await Mi(Ht)},Eo=(_,k)=>async(ne,Pe)=>{const{id:ze,rootStateKey:tt}=_,st=(0,Ps.AE)(tt,Pe()).optionsPicker;st.id&&st.id!==ze&&await ne(vl(tt,k));const Ot=(0,Ps.E0)(_,Pe());(0,Js.eL)(Ot)&&ne((0,Us.mb)(tt,(0,oo.aN)(Ot)))},eo=(_,k,ne=!1)=>(Pe,ze)=>{const{highlightIndex:tt,options:st}=(0,Ps.AE)(_,ze()).optionsPicker,Ot=st[tt];Pe((0,Us.mb)(_,(0,oo._M)({option:Ot,forceSelect:ne,clearOthers:k})))},Yo=async(_,k,ne,Pe)=>{try{const{id:ze}=(0,Ps.AE)(Pe,k()).optionsPicker,tt={id:ze,rootStateKey:Pe,type:"query"},st=(0,Ps.E0)(tt,k());if(!(0,Js.eL)(st))return;await zo.z.get(st.type).updateOptions(st,ne);const Kt=(0,Ps.E0)(tt,k());if(!(0,Js.eL)(Kt))return;_((0,Us.mb)(Pe,(0,oo.wF)(Kt.options)))}catch(ze){console.error(ze)}},Xu=(0,y.debounce)(Yo,500);function _u(_){const{options:k,selectedValues:ne,queryValue:Pe,multi:ze}=_;if(k.length===0&&Pe&&Pe.length>0)return{text:Pe,value:Pe,selected:!1};if(!ze)return ne.find(Ot=>Ot.selected);const tt=[],st=[];for(const Ot of ne)Ot.selected&&(tt.push(Ot.text.toString()),st.push(Ot.value.toString()));return{value:st,text:tt,selected:!0}}const ci=()=>{const _=tt=>({...(0,ll.bindActionCreators)({openOptions:Eo,commitChangesToVariable:vl,navigateOptions:su},tt),filterOrSearchOptions:(st,Ot="")=>{tt(ru(st,Ot))},toggleAllOptions:st=>tt((0,Us.mb)(st.rootStateKey,(0,oo.iQ)())),toggleOption:(st,Ot,Kt,Ht)=>tt((0,Us.mb)(st.rootStateKey,(0,oo._M)({option:Ot,clearOthers:Kt,forceSelect:Ht})))}),k=(tt,st)=>{const{rootStateKey:Ot}=st.variable;return Ot?{picker:(0,Ps.AE)(Ot,tt).optionsPicker}:(console.error("OptionPickerFactory: variable has no rootStateKey"),{picker:oo.yy})},ne=(0,$o.connect)(k,_);class Pe extends i.PureComponent{constructor(){super(...arguments),this.onShowOptions=()=>this.props.openOptions((0,Pa.yQ)(this.props.variable),this.props.onVariableChange),this.onHideOptions=()=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.commitChangesToVariable(this.props.variable.rootStateKey,this.props.onVariableChange)},this.onToggleOption=(st,Ot)=>{((0,Js.U4)(this.props.variable)&&this.props.variable.multi?this.onToggleMultiValueVariable:this.onToggleSingleValueVariable)(st,Ot)},this.onToggleSingleValueVariable=(st,Ot)=>{this.props.toggleOption((0,Pa.yQ)(this.props.variable),st,Ot,!1),this.onHideOptions()},this.onToggleMultiValueVariable=(st,Ot)=>{this.props.toggleOption((0,Pa.yQ)(this.props.variable),st,Ot,!1)},this.onToggleAllOptions=()=>{this.props.toggleAllOptions((0,Pa.yQ)(this.props.variable))},this.onFilterOrSearchOptions=st=>{this.props.filterOrSearchOptions((0,Pa.yQ)(this.props.variable),st)},this.onNavigate=(st,Ot)=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.navigateOptions(this.props.variable.rootStateKey,st,Ot)},this.onCancel=()=>{Ki().cancelRequest((0,Pa.yQ)(this.props.variable))}}render(){const{variable:st,picker:Ot}=this.props,Kt=Ot.id===st.id;return i.createElement("div",{className:"variable-link-wrapper"},Kt?this.renderOptions(Ot):this.renderLink(st))}renderLink(st){const Ot=Qc(st),Kt=st.state===Ir.Gu.Loading;return i.createElement(Xl,{id:`var-${st.id}`,text:Ot,onClick:this.onShowOptions,loading:Kt,onCancel:this.onCancel,disabled:this.props.readOnly})}renderOptions(st){const{id:Ot}=this.props.variable;return i.createElement(cl.L,{onClick:this.onHideOptions},i.createElement(Zc,{id:`var-${Ot}`,value:st.queryValue,onChange:this.onFilterOrSearchOptions,onNavigate:this.onNavigate,"aria-expanded":!0,"aria-controls":`options-${Ot}`}),i.createElement(ql,{values:st.options,onToggle:this.onToggleOption,onToggleAll:this.onToggleAllOptions,highlightIndex:st.highlightIndex,multi:st.multi,selectedValues:st.selectedValues,id:`options-${Ot}`}))}}const ze=ne(Pe);return ze.displayName="OptionsPicker",ze};var Qo=e(57052);class ou extends i.PureComponent{constructor(){super(...arguments),this.onChange=k=>{this.props.onPropChange({propName:"query",propValue:k.currentTarget.value})},this.onBlur=k=>{this.props.onPropChange({propName:"query",propValue:k.currentTarget.value,updateOptions:!0})}}render(){return i.createElement(i.Fragment,null,i.createElement(Do.e,null,"Constant options"),i.createElement(Qo.V,{value:this.props.variable.query,name:"Value",placeholder:"your metric prefix",onChange:this.onChange,onBlur:this.onBlur,testId:fn.wl.pages.Dashboard.Settings.Variables.Edit.ConstantVariable.constantOptionsQueryInputV2,width:30}))}}const ec={...Xs.Eg,type:"constant",hide:Xs.bU.hideVariable,query:"",current:{},options:[]},td=(0,Di.oM)({name:"templating/constant",initialState:Gr.s,reducers:{createConstantOptionsFromQuery:(_,k)=>{const ne=(0,Ps.ir)(_,k.payload.id);ne.type==="constant"&&(ne.options=[{text:ne.query.trim(),value:ne.query.trim(),selected:!1}])}}}),iu=td.reducer,{createConstantOptionsFromQuery:lu}=td.actions,cu=_=>async k=>{const{rootStateKey:ne}=_;await k((0,Us.mb)(ne,lu((0,Pa.Y6)(_)))),await k((0,Rr.xQ)(_))},du=()=>({id:"constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share.",name:"Constant",initialState:ec,reducer:iu,picker:ci(),editor:ou,dependsOn:()=>!1,setValue:async(_,k,ne=!1)=>{await(0,ar.WI)((0,Rr.Fz)((0,Pa.yQ)(_),k,ne))},setValueFromUrl:async(_,k)=>{await(0,ar.WI)((0,Rr.Ci)((0,Pa.yQ)(_),k))},updateOptions:async _=>{await(0,ar.WI)(cu((0,Pa.yQ)(_)))},getSaveModel:_=>{const{index:k,id:ne,state:Pe,global:ze,current:tt,options:st,rootStateKey:Ot,...Kt}=(0,y.cloneDeep)(_);return Kt},getValueForUrl:_=>_.current.value,beforeAdding:_=>{const{current:k,options:ne,query:Pe,...ze}=(0,y.cloneDeep)(_),tt={selected:!0,text:Pe,value:Pe};return{...ze,current:tt,options:[tt],query:Pe}}});var uu=e(42066),mu=e(58255);function El({value:_,name:k,description:ne,onChange:Pe,ariaLabel:ze}){const tt=(0,uu.Me)();return i.createElement(mu.X,{id:tt,label:k,description:ne,value:_,onChange:Pe,"aria-label":ze})}const Vi=({onMultiChanged:_,onPropChange:k,variable:ne})=>{const Pe=(0,i.useCallback)(st=>{_((0,Pa.yQ)(ne),st.target.checked)},[_,ne]),ze=(0,i.useCallback)(st=>{k({propName:"includeAll",propValue:st.target.checked})},[k]),tt=(0,i.useCallback)(st=>{k({propName:"allValue",propValue:st.currentTarget.value})},[k]);return i.createElement(ea.wc,{spacing:"md",height:"inherit"},i.createElement(El,{value:ne.multi,name:"Multi-value",description:"Enables multiple values to be selected at the same time",onChange:Pe}),i.createElement(El,{value:ne.includeAll,name:"Include All option",description:"Enables an option to include all variables",onChange:ze}),ne.includeAll&&i.createElement(Qo.V,{value:ne.allValue??"",onChange:tt,name:"Custom all value",placeholder:"blank = auto",testId:fn.wl.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsCustomAllInputV2}))};Vi.displayName="SelectionOptionsEditor";var Zo=e(49993);class fu extends i.PureComponent{constructor(){super(...arguments),this.onChange=k=>{this.props.onPropChange({propName:"query",propValue:k.currentTarget.value})},this.onSelectionOptionsChange=async({propName:k,propValue:ne})=>{this.props.onPropChange({propName:k,propValue:ne,updateOptions:!0})},this.onBlur=k=>{this.props.onPropChange({propName:"query",propValue:k.currentTarget.value,updateOptions:!0})}}render(){return i.createElement(i.Fragment,null,i.createElement(Do.e,null,"Custom options"),i.createElement(Zo.W,{name:"Values separated by comma",value:this.props.variable.query,placeholder:"1, 10, mykey : myvalue, myvalue, escaped\\,value",onChange:this.onChange,onBlur:this.onBlur,required:!0,width:52,testId:fn.wl.pages.Dashboard.Settings.Variables.Edit.CustomVariable.customValueInput}),i.createElement(Do.e,null,"Selection options"),i.createElement(Vi,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const gu=(_,k)=>({}),qu={changeVariableMultiValue:Rr.Z7},em=_i(fu,gu,qu),pu={...Xs.Eg,type:"custom",multi:!1,includeAll:!1,allValue:null,query:"",options:[],current:{}},tc=(0,Di.oM)({name:"templating/custom",initialState:Gr.s,reducers:{createCustomOptionsFromQuery:(_,k)=>{const ne=(0,Ps.ir)(_,k.payload.id);if(ne.type!=="custom")return;const{includeAll:Pe,query:ze}=ne,st=(ze.match(/(?:\\,|[^,])+/g)??[]).map(Ot=>{Ot=Ot.replace(/\\,/g,",");const Kt=/^(.+)\s:\s(.+)$/g.exec(Ot)??[];if(Kt.length===3){const[,Ht,jt]=Kt;return{text:Ht.trim(),value:jt.trim(),selected:!1}}else return{text:Ot.trim(),value:Ot.trim(),selected:!1}});Pe&&st.unshift({text:ro.xk,value:ro.r2,selected:!1}),ne.options=st}}}),hu=tc.reducer,{createCustomOptionsFromQuery:Jo}=tc.actions,nd=_=>async k=>{const{rootStateKey:ne}=_;await k((0,Us.mb)(ne,Jo((0,Pa.Y6)(_)))),await k((0,Rr.xQ)(_))},nc=()=>({id:"custom",description:"Define variable values manually",name:"Custom",initialState:pu,reducer:hu,picker:ci(),editor:em,dependsOn:()=>!1,setValue:async(_,k,ne=!1)=>{await(0,ar.WI)((0,Rr.Fz)((0,Pa.yQ)(_),k,ne))},setValueFromUrl:async(_,k)=>{await(0,ar.WI)((0,Rr.Ci)((0,Pa.yQ)(_),k))},updateOptions:async _=>{await(0,ar.WI)(nd((0,Pa.yQ)(_)))},getSaveModel:_=>{const{index:k,id:ne,state:Pe,global:ze,rootStateKey:tt,...st}=(0,y.cloneDeep)(_);return st},getValueForUrl:_=>(0,Pa.HY)(_)?ro.xk:_.current.value});var yl=e(83704);const ac={...Xs.Eg,type:"datasource",current:{},regex:"",options:[],query:"",multi:!1,includeAll:!1,refresh:Xs.Bd.onDashboardLoad},Pl=(0,Di.oM)({name:"templating/datasource",initialState:Gr.s,reducers:{createDataSourceOptions:(_,k)=>{const{sources:ne,regex:Pe}=k.payload.data,ze=[],tt=(0,Ps.ir)(_,k.payload.id);if(tt.type==="datasource"){for(let st=0;st<ne.length;st++){const Ot=ne[st];Ot.meta.id===tt.query&&(zi(Ot,Pe)&&ze.push({text:Ot.name,value:Ot.name,selected:!1}),sc(Ot,Pe)&&ze.push({text:"default",value:"default",selected:!1}))}ze.length===0&&ze.push({text:"No data sources found",value:"",selected:!1}),tt.includeAll&&ze.unshift({text:ro.xk,value:ro.r2,selected:!1}),tt.options=ze}}}});function zi(_,k){return k?k.exec(_.name):!0}function sc(_,k){return _.isDefault?k?k.exec("default"):!0:!1}const yo=Pl.reducer,{createDataSourceOptions:ad}=Pl.actions,tm=(_,k={getDatasourceSrv:o.ak})=>async(ne,Pe)=>{const{rootStateKey:ze}=_,tt=k.getDatasourceSrv().getList({metrics:!0,variables:!1}),st=(0,Ps.E0)(_,Pe());if(st.type!=="datasource")return;let Ot;st.regex&&(Ot=(0,ii.J)().replace(st.regex,void 0,"regex"),Ot=(0,Bs.jO)(Ot)),ne((0,Us.mb)(ze,ad((0,Pa.Y6)(_,{sources:tt,regex:Ot})))),await ne((0,Rr.xQ)(_))},Cl=(_,k={getDatasourceSrv:o.ak})=>ne=>{const Pe=k.getDatasourceSrv().getList({metrics:!0,variables:!0}),ze=(0,y.chain)(Pe).uniqBy("meta.id").map(tt=>({text:tt.meta.name,value:tt.meta.id})).value();ze.unshift({text:"",value:""}),ne((0,Us.mb)(_,(0,So.z7)({dataSourceTypes:ze})))},sd=(_,k)=>{const{variable:{rootStateKey:ne}}=k;if(!ne)return console.error("DataSourceVariableEditor: variable has no rootStateKey"),{extended:kl(So.PF)};const{editor:Pe}=(0,Ps.AE)(ne,_);return{extended:kl(Pe)}},vu={initDataSourceVariableEditor:Cl,changeVariableMultiValue:Rr.Z7},Eu=(0,$o.connect)(sd,vu);class rd extends i.PureComponent{constructor(){super(...arguments),this.onRegExChange=k=>{this.props.onPropChange({propName:"regex",propValue:k.currentTarget.value})},this.onRegExBlur=k=>{this.props.onPropChange({propName:"regex",propValue:k.currentTarget.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:k,propName:ne})=>{this.props.onPropChange({propName:ne,propValue:k,updateOptions:!0})},this.getSelectedDataSourceTypeValue=()=>{const{extended:k}=this.props;if(!k?.dataSourceTypes.length)return"";const ne=k.dataSourceTypes.find(ze=>ze.value===this.props.variable.query);return(ne?ne.value:k.dataSourceTypes[0].value)??""},this.onDataSourceTypeChanged=k=>{this.props.onPropChange({propName:"query",propValue:k.value,updateOptions:!0})}}componentDidMount(){const{rootStateKey:k}=this.props.variable;if(!k){console.error("DataSourceVariableEditor: variable has no rootStateKey");return}this.props.initDataSourceVariableEditor(k)}render(){const{variable:k,extended:ne,changeVariableMultiValue:Pe}=this.props,ze=ne?.dataSourceTypes?.length?ne.dataSourceTypes?.map(st=>({value:st.value??"",label:st.text})):[],tt=ze.find(st=>st.value===k.query)??ze[0];return i.createElement(i.Fragment,null,i.createElement(Do.e,null,"Data source options"),i.createElement(yl.u,{name:"Type",value:tt,options:ze,onChange:this.onDataSourceTypeChanged,testId:fn.wl.pages.Dashboard.Settings.Variables.Edit.DatasourceVariable.datasourceSelect}),i.createElement(Qo.V,{value:this.props.variable.regex,name:"Instance name filter",placeholder:"/.*-(.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,description:i.createElement("div",null,"Regex filter for which data source instances to choose from in the variable value list. Leave empty for all.",i.createElement("br",null),i.createElement("br",null),"Example: ",i.createElement("code",null,"/^prod/"))}),i.createElement(Do.e,null,"Selection options"),i.createElement(Vi,{variable:k,onPropChange:this.onSelectionOptionsChange,onMultiChanged:Pe}))}}const od=Eu(rd),yu=()=>({id:"datasource",description:"Enables you to dynamically switch the data source for multiple panels.",name:"Data source",initialState:ac,reducer:yo,picker:ci(),editor:od,dependsOn:(_,k)=>_.regex?(0,Pa.QI)(_.regex,k.name):!1,setValue:async(_,k,ne=!1)=>{await(0,ar.WI)((0,Rr.Fz)((0,Pa.yQ)(_),k,ne))},setValueFromUrl:async(_,k)=>{await(0,ar.WI)((0,Rr.Ci)((0,Pa.yQ)(_),k))},updateOptions:async _=>{await(0,ar.WI)(tm((0,Pa.yQ)(_)))},getSaveModel:_=>{const{index:k,id:ne,state:Pe,global:ze,rootStateKey:tt,...st}=(0,y.cloneDeep)(_);return{...st,options:[]}},getValueForUrl:_=>(0,Pa.HY)(_)?ro.xk:_.current.value});var Pu=e(69155);const rc=[1,2,3,4,5,10,20,30,40,50,100,200,300,400,500].map(_=>({label:`${_}`,value:_})),oc=i.memo(({onPropChange:_,variable:k})=>{const ne=Ht=>{_({propName:"auto",propValue:Ht.target.checked,updateOptions:!0})},Pe=Ht=>{_({propName:"query",propValue:Ht.currentTarget.value})},ze=Ht=>{_({propName:"query",propValue:Ht.currentTarget.value,updateOptions:!0})},tt=Ht=>{_({propName:"auto_count",propValue:Ht.value,updateOptions:!0})},st=Ht=>{_({propName:"auto_min",propValue:Ht.currentTarget.value,updateOptions:!0})},Ot=rc.find(Ht=>Ht.value===k.auto_count)??rc[0],Kt=(0,ye.wW)(Cu);return i.createElement(i.Fragment,null,i.createElement(Do.e,null,"Interval options"),i.createElement(Qo.V,{value:k.query,name:"Values",placeholder:"1m,10m,1h,6h,1d,7d",onChange:Pe,onBlur:ze,testId:fn.wl.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.intervalsValueInput,width:32,required:!0}),i.createElement(El,{value:k.auto,name:"Auto option",description:"Dynamically calculates interval by dividing time range by the count specified",onChange:ne}),k.auto&&i.createElement("div",{className:Kt.autoFields},i.createElement(yl.u,{name:"Step count",description:"How many times the current time range should be divided to calculate the value",value:Ot,options:rc,onChange:tt,width:9}),i.createElement(Qo.V,{value:k.auto_min,name:"Min interval",description:"The calculated value will not go below this threshold",placeholder:"10s",onChange:st,width:11})))});oc.displayName="IntervalVariableEditor";function Cu(_){return{autoFields:(0,j.css)({marginTop:_.spacing(2),display:"flex",flexDirection:"column"})}}var xu=e(98639);const bu={...Xs.Eg,type:"interval",auto_count:30,auto_min:"10s",options:[],auto:!1,query:"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",refresh:Xs.Bd.onTimeRangeChanged,current:{}},id=(0,Di.oM)({name:"templating/interval",initialState:Gr.s,reducers:{createIntervalOptions:(_,k)=>{const ne=(0,Ps.ir)(_,k.payload.id);if(ne.type!=="interval")return;const Pe=(0,y.map)(ne.query.match(/(["'])(.*?)\1|\w+/g),ze=>(ze=ze.replace(/["']+/g,""),{text:ze.trim(),value:ze.trim(),selected:!1}));ne.auto&&Pe.length&&Pe[0].text!=="auto"&&Pe.unshift({text:"auto",value:"$__auto_interval_"+ne.name,selected:!1}),ne.options=Pe}}}),ld=id.reducer,{createIntervalOptions:ic}=id.actions,nm=_=>async k=>{const{rootStateKey:ne}=_;await k((0,Us.mb)(ne,ic((0,Pa.Y6)(_)))),await k(lc(_)),await k((0,Rr.xQ)(_))},lc=(_,k={calculateInterval:Ni.calculateInterval,getTimeSrv:Ci.$t,templateSrv:(0,xu.J)()})=>(ne,Pe)=>{const ze=(0,Ps.E0)(_,Pe());if(ze.type==="interval"&&ze.auto){const tt=k.calculateInterval(k.getTimeSrv().timeRange(),ze.auto_count,ze.auto_min);k.templateSrv.setGrafanaVariable("$__auto_interval_"+ze.name,tt.interval),k.templateSrv.setGrafanaVariable("$__auto_interval",tt.interval)}},Du=()=>({id:"interval",description:"Define a timespan interval (ex 1m, 1h, 1d)",name:"Interval",initialState:bu,reducer:ld,picker:ci(),editor:oc,dependsOn:()=>!1,setValue:async(_,k,ne=!1)=>{await(0,ar.WI)(lc((0,Pa.yQ)(_))),await(0,ar.WI)((0,Rr.Fz)((0,Pa.yQ)(_),k,ne))},setValueFromUrl:async(_,k)=>{await(0,ar.WI)(lc((0,Pa.yQ)(_))),await(0,ar.WI)((0,Rr.Ci)((0,Pa.yQ)(_),k))},updateOptions:async _=>{await(0,ar.WI)(nm((0,Pa.yQ)(_)))},getSaveModel:_=>{const{index:k,id:ne,state:Pe,global:ze,rootStateKey:tt,...st}=(0,y.cloneDeep)(_);return st},getValueForUrl:_=>_.current.value});var cc=e(22107);const xl=[{label:"On dashboard load",value:cc.Bd.onDashboardLoad},{label:"On time range change",value:cc.Bd.onTimeRangeChanged}];function dc({onChange:_,refresh:k}){const ne=(0,i.useMemo)(()=>xl.find(Pe=>Pe.value===k)?.value??xl[0].value,[k]);return i.createElement(ls.g,{label:"Refresh",description:"When to update the values of this variable"},i.createElement(me.S,{options:xl,onChange:_,value:ne}))}const uc=[{label:"Disabled",value:Xs.$U.disabled},{label:"Alphabetical (asc)",value:Xs.$U.alphabeticalAsc},{label:"Alphabetical (desc)",value:Xs.$U.alphabeticalDesc},{label:"Numerical (asc)",value:Xs.$U.numericalAsc},{label:"Numerical (desc)",value:Xs.$U.numericalDesc},{label:"Alphabetical (case-insensitive, asc)",value:Xs.$U.alphabeticalCaseInsensitiveAsc},{label:"Alphabetical (case-insensitive, desc)",value:Xs.$U.alphabeticalCaseInsensitiveDesc}];function cd({onChange:_,sort:k}){const ne=(0,i.useMemo)(()=>uc.find(Pe=>Pe.value===k)??uc[0],[k]);return i.createElement(yl.u,{name:"Sort",description:"How to sort the values of this variable",value:ne,options:uc,onChange:_,testId:fn.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsSortSelectV2,width:25})}var Su=e(95484),dd=e(77599),mc=e(95125);async function fc(_,k=Ic.nL){if((0,Js.d7)(_))return _.variables.editor;if((0,Js.X7)(_)){const ne=await k(_.meta);if(!ne.components.QueryEditor)throw new Error("Missing QueryEditor in plugin definition.");return ne.components.QueryEditor??null}return(0,Js.Ju)(_)?Mu:(0,Js.R)(_)?(await k(_.meta)).components.VariableQueryEditor??mc.R:null}function Mu({datasource:_,query:k,onChange:ne}){const Pe=(0,i.useCallback)(ze=>{ne({refId:"StandardVariableQuery",query:ze})},[ne]);return i.createElement(mc.R,{query:k.query,onChange:Pe,datasource:_,templateSrv:(0,ii.J)()})}function Tu(_,k,ne){return{next:ze=>{if(ze.state===Ir.Gu.Error){ne.unsubscribe(),k(ze.error);return}if(ze.state===Ir.Gu.Done){ne.unsubscribe(),_();return}},error:ze=>{ne.unsubscribe(),k(ze)},complete:()=>{ne.unsubscribe(),_()}}}const Ou=(_,k)=>async(ne,Pe)=>{try{const{rootStateKey:ze}=_;if(!(0,Pa.A3)(ze,Pe()))return;const tt=(0,Ps.E0)(_,Pe());if(tt.type!=="query")return;(0,Ps.AE)(ze,Pe()).editor.id===tt.id&&ne((0,Us.mb)(ze,(0,So.PV)({errorProp:"update"})));const st=await(0,R.F)().get(tt.datasource??"");await new Promise((Ot,Kt)=>{const Ht=new Su.w0,jt=Tu(Ot,Kt,Ht),pn=Ki().getResponse(_).subscribe(jt);Ht.add(pn),Ki().queueRequest({identifier:_,datasource:st,searchFilter:k})})}catch(ze){if(ze instanceof Error){const tt=(0,dd.P)(ze),{rootStateKey:st}=_;throw(0,Ps.AE)(st,Pe()).editor.id===_.id&&ne((0,Us.mb)(st,(0,So.Sg)({errorProp:"update",errorText:tt.message}))),tt}}},am=_=>async(k,ne)=>{const Pe=(0,Ps.E0)(_,ne());Pe.type==="query"&&await k(bl((0,Pa.yQ)(Pe),Pe.datasource))},bl=(_,k)=>async(ne,Pe)=>{try{const{rootStateKey:ze}=_,{editor:tt}=(0,Ps.AE)(ze,Pe()),Ot=Gl(tt)?.dataSource,Kt=await(0,R.F)().get(k??"");Ot&&Ot.type!==Kt?.type&&ne((0,Us.mb)(ze,(0,jo.Pl)((0,Pa.Y6)(_,{propName:"query",propValue:""}))));const Ht=await fc(Kt);ne((0,Us.mb)(ze,(0,So.z7)({dataSource:Kt,VariableQueryEditor:Ht})))}catch(ze){console.error(ze)}},Hi=(_,k,ne)=>async(Pe,ze)=>{const{rootStateKey:tt}=_,st=(0,Ps.E0)(_,ze());if(st.type==="query"){if(Iu(st.name,k)){const Ot="Query cannot contain a reference to itself. Variable: $"+st.name;Pe((0,Us.mb)(tt,(0,So.Sg)({errorProp:"query",errorText:Ot})));return}Pe((0,Us.mb)(tt,(0,So.PV)({errorProp:"query"}))),Pe((0,Us.mb)(tt,(0,jo.Pl)((0,Pa.Y6)(_,{propName:"query",propValue:k})))),ne?Pe((0,Us.mb)(tt,(0,jo.Pl)((0,Pa.Y6)(_,{propName:"definition",propValue:ne})))):typeof k=="string"&&Pe((0,Us.mb)(tt,(0,jo.Pl)((0,Pa.Y6)(_,{propName:"definition",propValue:k})))),await Pe((0,Rr.Rk)(_))}};function Iu(_,k){if(typeof k=="string"&&k.match(new RegExp("\\$"+_+"(/| |$)")))return!0;const ne=di(k);for(let Pe in ne)if(ne.hasOwnProperty(Pe)){const ze=ne[Pe];if(typeof ze=="string"&&ze.match(new RegExp("\\$"+_+"(/| |$)")))return!0}return!1}function di(_){return typeof _!="object"||_===null?{query:_}:Object.keys(_).reduce((Pe,ze)=>{const tt=_[ze];if(typeof tt!="object"||tt===null)return Pe[ze]=tt,Pe;const st=di(tt);for(let Ot in st)st.hasOwnProperty(Ot)&&(Pe[`${ze}_${Ot}`]=st[Ot]);return Pe},{})}const Dl=(_,k)=>{const{rootStateKey:ne}=k.variable;if(!ne)return console.error("QueryVariableEditor: variable has no rootStateKey"),{extended:Gl(So.PF)};const{editor:Pe}=(0,Ps.AE)(ne,_);return{extended:Gl(Pe)}},gc={initQueryVariableEditor:am,changeQueryVariableDataSource:bl,changeQueryVariableQuery:Hi,changeVariableMultiValue:Rr.Z7},Ru=(0,$o.connect)(Dl,gc);class Au extends i.PureComponent{constructor(){super(...arguments),this.state={regex:null,tagsQuery:null,tagValuesQuery:null},this.onDataSourceChange=k=>{this.props.onPropChange({propName:"datasource",propValue:k.isDefault?null:(0,Bc.iU)(k)})},this.onLegacyQueryChange=async(k,ne)=>{this.props.variable.query!==k&&this.props.changeQueryVariableQuery((0,Pa.yQ)(this.props.variable),k,ne)},this.onQueryChange=async k=>{if(this.props.variable.query!==k){let ne="";k&&k.hasOwnProperty("query")&&typeof k.query=="string"&&(ne=k.query),this.props.changeQueryVariableQuery((0,Pa.yQ)(this.props.variable),k,ne)}},this.onRegExChange=k=>{this.setState({regex:k.currentTarget.value})},this.onRegExBlur=async k=>{const ne=k.currentTarget.value;this.props.variable.regex!==ne&&this.props.onPropChange({propName:"regex",propValue:ne,updateOptions:!0})},this.onRefreshChange=k=>{this.props.onPropChange({propName:"refresh",propValue:k})},this.onSortChange=async k=>{this.props.onPropChange({propName:"sort",propValue:k.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:k,propName:ne})=>{this.props.onPropChange({propName:ne,propValue:k,updateOptions:!0})},this.renderQueryEditor=()=>{const{extended:k,variable:ne}=this.props;if(!k||!k.dataSource||!k.VariableQueryEditor)return null;const Pe=k.dataSource,ze=k.VariableQueryEditor;let tt=ne.query;if(typeof tt=="string"?tt=tt||(Pe.variables?.getDefaultQuery?.()??""):tt={...Pe.variables?.getDefaultQuery?.(),...ne.query},(0,Js.NX)(ze,Pe))return i.createElement(ls.g,{label:"Query"},i.createElement(ze,{datasource:Pe,query:tt,templateSrv:(0,ii.J)(),onChange:this.onLegacyQueryChange}));const st=(0,Ci.$t)().timeRange();return(0,Js.$7)(ze,Pe)?i.createElement(ls.g,{label:"Query"},i.createElement(ze,{datasource:Pe,query:tt,onChange:this.onQueryChange,onRunQuery:()=>{},data:{series:[],state:Ir.Gu.Done,timeRange:st},range:st,onBlur:()=>{},history:[]})):null}}async componentDidMount(){await this.props.initQueryVariableEditor((0,Pa.yQ)(this.props.variable))}componentDidUpdate(k){k.variable.datasource!==this.props.variable.datasource&&this.props.changeQueryVariableDataSource((0,Pa.yQ)(this.props.variable),this.props.variable.datasource)}render(){return i.createElement(i.Fragment,null,i.createElement(Do.e,null,"Query options"),i.createElement(ls.g,{label:"Data source",htmlFor:"data-source-picker"},i.createElement(Hl.q,{current:this.props.variable.datasource,onChange:this.onDataSourceChange,variables:!0,width:30})),this.renderQueryEditor(),i.createElement(Zo.W,{value:this.state.regex??this.props.variable.regex,name:"Regex",description:i.createElement("div",null,"Optional, if you want to extract part of a series name or metric node segment.",i.createElement("br",null),"Named capture groups can be used to separate the display text and value (",i.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/variables/filter-variables-with-regex#filter-and-modify-using-named-text-and-value-capture-groups",target:"__blank"},"see examples"),")."),placeholder:"/.*-(?<text>.*)-(?<value>.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,testId:fn.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRegExInputV2,width:52}),i.createElement(cd,{onChange:this.onSortChange,sort:this.props.variable.sort}),i.createElement(dc,{onChange:this.onRefreshChange,refresh:this.props.variable.refresh}),i.createElement(Do.e,null,"Selection options"),i.createElement(Vi,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const Lu=Ru(Au),sm=()=>({id:"query",description:"Variable values are fetched from a datasource query",name:"Query",initialState:qd,reducer:Zl,picker:ci(),editor:Lu,dependsOn:(_,k)=>(0,Pa.QI)(_.query,_.datasource?.uid,_.regex,k.name),setValue:async(_,k,ne=!1)=>{await(0,ar.WI)((0,Rr.Fz)((0,Pa.yQ)(_),k,ne))},setValueFromUrl:async(_,k)=>{await(0,ar.WI)((0,Rr.Ci)((0,Pa.yQ)(_),k))},updateOptions:async(_,k)=>{await(0,ar.WI)(Ou((0,Pa.yQ)(_),k))},getSaveModel:_=>{const{index:k,id:ne,state:Pe,global:ze,queryValue:tt,rootStateKey:st,...Ot}=(0,y.cloneDeep)(_);return _.refresh!==Xs.Bd.never?{...Ot,options:[]}:Ot},getValueForUrl:_=>(0,Pa.HY)(_)?ro.xk:_.current.value}),Xr=()=>({id:"system",description:"",name:"system",initialState:{...Xs.Eg,type:"system",hide:Xs.bU.hideVariable,skipUrlSync:!0,current:{value:{toString:()=>""}},state:Ir.Gu.Done},reducer:(_,k)=>_,picker:null,editor:null,dependsOn:()=>!1,setValue:async(_,k,ne=!1)=>{},setValueFromUrl:async(_,k)=>{},updateOptions:async _=>{},getSaveModel:_=>({}),getValueForUrl:_=>""});function ud({onPropChange:_,variable:{query:k}}){const ne=(0,i.useCallback)((tt,st)=>{tt.preventDefault(),_({propName:"originalQuery",propValue:tt.currentTarget.value,updateOptions:!1}),_({propName:"query",propValue:tt.currentTarget.value,updateOptions:st})},[_]),Pe=(0,i.useCallback)(tt=>ne(tt,!1),[ne]),ze=(0,i.useCallback)(tt=>ne(tt,!0),[ne]);return i.createElement(i.Fragment,null,i.createElement(Do.e,null,"Text options"),i.createElement(Qo.V,{value:k,name:"Default value",placeholder:"default value, if any",onChange:Pe,onBlur:ze,width:30,testId:fn.wl.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2}))}function rm({variable:_,onVariableChange:k,readOnly:ne}){const Pe=(0,Or.useDispatch)(),[ze,tt]=(0,i.useState)(_.current.value);(0,i.useEffect)(()=>{tt(_.current.value)},[_]);const st=(0,i.useCallback)(()=>{if(!_.rootStateKey){console.error("Cannot update variable without rootStateKey");return}if(_.current.value!==ze){if(Pe((0,Us.mb)(_.rootStateKey,(0,jo.Pl)((0,Pa.Y6)({id:_.id,type:_.type},{propName:"query",propValue:ze})))),k){k({..._,current:{..._.current,value:ze}});return}zo.z.get(_.type).updateOptions(_)}},[_,ze,Pe,k]),Ot=(0,i.useCallback)(jt=>tt(jt.target.value),[tt]),Kt=jt=>st(),Ht=jt=>{jt.keyCode===13&&(jt.preventDefault(),st())};return i.createElement(se.I,{type:"text",value:ze,onChange:Ot,onBlur:Kt,disabled:ne,onKeyDown:Ht,placeholder:"Enter variable value",id:`var-${_.id}`})}const ki={...Xs.Eg,type:"textbox",query:"",current:{},options:[],originalQuery:null},pc=(0,Di.oM)({name:"templating/textbox",initialState:Gr.s,reducers:{createTextBoxOptions:(_,k)=>{const ne=(0,Ps.ir)(_,k.payload.id);if(ne.type!=="textbox")return;const Pe={text:ne.query.trim(),value:ne.query.trim(),selected:!1};ne.options=[Pe],ne.current=Pe}}}),Bu=pc.reducer,{createTextBoxOptions:md}=pc.actions,fd=_=>async(k,ne)=>{const{rootStateKey:Pe,type:ze}=_;k((0,Us.mb)(Pe,md((0,Pa.Y6)(_))));const tt=(0,Ps.E0)(_,ne());tt.type==="textbox"&&await zo.z.get(ze).setValue(tt,tt.options[0],!0)},wu=(_,k)=>async(ne,Pe)=>{const{rootStateKey:ze}=_,tt=(0,Ps.E0)(_,Pe());if(tt.type!=="textbox")return;const st=(0,Pa.Hi)(k);ne((0,Us.mb)(ze,(0,jo.Pl)((0,Pa.Y6)(tt,{propName:"query",propValue:st})))),await ne((0,Rr.Ci)((0,Pa.yQ)(tt),st))},Sl=()=>({id:"textbox",description:"Define a textbox variable, where users can enter any arbitrary string",name:"Text box",initialState:ki,reducer:Bu,picker:rm,editor:ud,dependsOn:(_,k)=>!1,setValue:async(_,k,ne=!1)=>{await(0,ar.WI)((0,Rr.Fz)((0,Pa.yQ)(_),k,ne))},setValueFromUrl:async(_,k)=>{await(0,ar.WI)(wu((0,Pa.yQ)(_),k))},updateOptions:async _=>{await(0,ar.WI)(fd((0,Pa.yQ)(_)))},getSaveModel:(_,k)=>{const{index:ne,id:Pe,state:ze,global:tt,originalQuery:st,rootStateKey:Ot,...Kt}=(0,y.cloneDeep)(_);if(_.query!==st&&!k){const Ht=st??"",jt={selected:!1,text:Ht,value:Ht};return{...Kt,query:Ht,current:jt,options:[jt]}}return Kt},getValueForUrl:_=>_.current.value,beforeAdding:_=>({...(0,y.cloneDeep)(_),originalQuery:_.query})});var Nu=e(29408);v().move=Y.R;const gd=e(72866),Gi=gd.keys().map(_=>gd(_));class Uu{async init(){try{parent.postMessage("GrafanaAppInit","*");const k=(0,Ur.uC)(D.ZP.bootData.user.language);(0,x.jW)(Nl.ae),Ml(),Wu(),(0,P.i_)(D.ZP.bootData.user.locale),(0,P.Ls)(D.ZP.bootData.user.weekStart),(0,I.L)(zd.$),(0,N.t)(mo),(0,U.$)(Vd.Z),(0,O.x)(L.E1),(0,E.K)(()=>D.ZP.bootData.user.timezone),await k,pd(),(0,Nu.x)(),Fu(),C.S.setInit(Xi.u),C.N.setInit(Xi.l),b.Z.setInit(ha),zo.z.setInit(()=>[sm(),nc(),Sl(),du(),yu(),Du(),br(),Xr()]),S.F.setInit(La),(0,B.pD)(()=>new Lc),Si(new Ju),(0,B.Iw)(Ui.v7),(0,w.Qf)({importPanelPlugin:Oc.Ub,getPanelPluginFromCache:Oc.q1}),M.u.initialize({config:D.ZP,getTimeRangeForUrl:(0,Ci.$t)().timeRangeForUrl,getVariablesUrlParams:Pu.c}),document.addEventListener("click",Ed);const ne=new o.ND;ne.init(D.ZP.datasources,D.ZP.defaultDatasource),(0,R.w)(ne),Gd(),new ku().init(),await Vr(D.ZP.pluginsToPreload);const ze=L.E1.getSearchObject(),tt=new yc,st=new Kd(L.E1,tt);tt.setKioskModeFromUrl(ze.kiosk),this.context={backend:Nl.ae,location:L.E1,chrome:tt,keybindings:st,config:D.ZP},u.render(i.createElement(Tr.Or,{app:this}),document.getElementById("reactRoot"))}catch(k){console.error("Failed to start Grafana",k),window.__grafana_load_failed()}}}function pd(){Gi.length>0&&Gi[0].addExtensionReducers()}function Fu(){Gi.length>0&&Gi[0].init()}function Ml(){(0,A.tz)(new Gu({debug:!1})),window.addEventListener("load",_=>{const k="frontend_boot_load_time_seconds",ne="frontend_boot_js_done_time_seconds",Pe="frontend_boot_css_time_seconds";performance&&(performance.mark(k),yr("first-paint","frontend_boot_","_time_seconds"),yr("first-contentful-paint","frontend_boot_","_time_seconds"),yr(k),yr(ne),yr(Pe))}),qi.Vt.user.orgRole!==""&&(0,A.e6)(new Fl({})),D.ZP.sentry.enabled&&(0,A.e6)(new Dc({...D.ZP.sentry,user:D.ZP.bootData.user,buildInfo:D.ZP.buildInfo})),D.ZP.grafanaJavascriptAgent.enabled&&(0,A.e6)(new oi({...D.ZP.grafanaJavascriptAgent,app:{version:D.ZP.buildInfo.version,environment:D.ZP.buildInfo.env},buildInfo:D.ZP.buildInfo,user:{id:String(D.ZP.bootData.user?.id),email:D.ZP.bootData.user?.email}})),D.ZP.googleAnalyticsId&&(0,A.e6)(new bo({googleAnalyticsId:D.ZP.googleAnalyticsId})),D.ZP.googleAnalytics4Id&&(0,A.e6)(new si({googleAnalyticsId:D.ZP.googleAnalytics4Id,googleAnalytics4SendManualPageViews:D.ZP.googleAnalytics4SendManualPageViews})),D.ZP.rudderstackWriteKey&&D.ZP.rudderstackDataPlaneUrl&&(0,A.e6)(new ri({writeKey:D.ZP.rudderstackWriteKey,dataPlaneUrl:D.ZP.rudderstackDataPlaneUrl,user:D.ZP.bootData.user,sdkUrl:D.ZP.rudderstackSdkUrl,configUrl:D.ZP.rudderstackConfigUrl})),D.ZP.applicationInsightsConnectionString&&(0,A.e6)(new Pi({connectionString:D.ZP.applicationInsightsConnectionString,endpointUrl:D.ZP.applicationInsightsEndpointUrl}))}function Wu(){(0,F.n)()>0&&document.body.classList.add("no-overlay-scrollbar")}function yr(_,k="",ne=""){const Pe=v().first(performance.getEntriesByName(_));if(Pe){const ze=Pe.name.replace(/-/g,"_");Dd(`${k}${ze}${ne}`,Math.round(Pe.startTime)/1e3)}}const $u=new Uu;window.public_cdn_path&&(e.p=window.public_cdn_path),window.__grafana_public_path__=e.p.substring(0,e.p.lastIndexOf("build/"))||e.p,window.nonce&&(e.nc=window.nonce),window.__grafana_app_bundle_loaded=!0,$u.init()},39031:(H,T,e)=>{"use strict";e.d(T,{As:()=>t,TE:()=>s,Z9:()=>n,_M:()=>c,sK:()=>r});var t=(g=>(g.Active="active",g.Expired="expired",g.Pending="pending",g))(t||{}),n=(g=>(g.Unprocessed="unprocessed",g.Active="active",g.Suppressed="suppressed",g))(n||{}),c=(g=>(g.equal="=",g.notEqual="!=",g.regex="=~",g.notRegex="!~",g))(c||{}),s=(g=>(g.Internal="internal",g.External="external",g.All="all",g))(s||{}),r=(g=>(g.cortex="cortex",g.mimir="mimir",g.prometheus="prometheus",g))(r||{})},2868:(H,T,e)=>{"use strict";e.d(T,{$5:()=>t,KB:()=>c,MQ:()=>n,wf:()=>s});var t=(r=>(r[r.Search=0]="Search",r[r.Query=1]="Query",r))(t||{}),n=(r=>(r[r.Builder=0]="Builder",r[r.Code=1]="Code",r))(n||{}),c=(r=>(r.Scheduled="Scheduled",r.Running="Running",r.Complete="Complete",r.Failed="Failed",r.Cancelled="Cancelled",r.Timeout="Timeout",r))(c||{}),s=(r=>(r.Regions="regions",r.Namespaces="namespaces",r.Metrics="metrics",r.DimensionKeys="dimensionKeys",r.DimensionValues="dimensionValues",r.EBSVolumeIDs="ebsVolumeIDs",r.EC2InstanceAttributes="ec2InstanceAttributes",r.ResourceArns="resourceARNs",r.Statistics="statistics",r.LogGroups="logGroups",r.Accounts="accounts",r))(s||{})},53693:(H,T,e)=>{"use strict";e.d(T,{hD:()=>R,yl:()=>f,AK:()=>o});var t=e(46060),n=e(62163),c=e(49922),s=e(69311),r=e(9398);const g="-- Dashboard --";function f(U){return U?typeof U=="string"?U===g:"meta"in U&&U.meta.name===g||U.uid===g:!1}function o(U,I){return new t.y(N=>{const F=(0,r.h4)().getCurrent(),D=l(U.queries);if(!D){N.next(a("Missing panel reference ID"));return}const Y=F?.getPanelById(D);if(!Y){N.next(a("Unknown Panel: "+D));return}const j=Y.getQueryRunner(),K=j.getData({withTransforms:Boolean(I?.withTransforms),withFieldConfig:!1}).subscribe({next:z=>{I?.topic===n.w5.Annotations&&(z={...z,series:z.annotations??[],annotations:void 0}),N.next(z)}});if(!Y.isInView){const{datasource:z,targets:Z}=Y,ae={...U,datasource:z,panelId:D,queries:Z};j.run(ae)}return()=>{K.unsubscribe()}})}function l(U){if(!(!U||!U.length))return U[0].panelId}function a(U){return{state:c.Gu.Error,series:[],request:{},error:{message:U},timeRange:(0,s.JK)()}}var m=e(52423),d=e(42066),p=e(64681),h=e.n(p),y=e(68404),v=e(22350),i=e(72648),u=e(24799),P=e(53217),E=e(67487),C=e(52081),b=e(39904),S=e(8944),M=e(2594),x=e(47694),O=e(91162),L=e(36584);function B(U){return JSON.stringify(U)}const w=[{label:"All data",value:!1},{label:"Annotations",value:!0,description:"Include annotations as regular data"}];function R({panelData:U,queries:I,onChange:N,onRunQueries:F}){const{value:D}=(0,v.Z)(()=>(0,O.ak)().get()),Y=I[0],j=(0,y.useMemo)(()=>(0,r.h4)().getCurrent()?.getPanelById(Y.panelId??-124134),[Y.panelId]),{value:K,loading:z}=(0,v.Z)(async()=>{if(!j)return[];const G=await(0,O.ak)().get(j.datasource);return Promise.all(j.targets.map(async q=>{const X=q.datasource?await(0,O.ak)().get(q.datasource):G,de=X.getQueryDisplayText||B,Be=(0,L.t)(U,q.refId)??U;return{refId:q.refId,query:de(q),img:X.meta.info.logos.small,data:Be.series,error:Be.error}}))},[U,j]),Z=(0,y.useCallback)(G=>{N([G]),F()},[N,F]),ae=(0,y.useCallback)(G=>{Z({...Y,panelId:G})},[Y,Z]),J=(0,y.useCallback)(()=>{Z({...Y,withTransforms:!Y.withTransforms})},[Y,Z]),oe=(0,y.useCallback)(G=>{Z({...Y,topic:G?n.w5.Annotations:void 0})},[Y,Z]),Ee=(0,y.useCallback)(G=>{const q=G.datasource??D,X=(0,O.ak)().getInstanceSettings(q)?.name,de=G.targets.length;return`${de} ${h()("query",de)} to ${X}`},[D]),me=(0,r.h4)().getCurrent(),re=(0,y.useMemo)(()=>me?.panels.filter(G=>x.ZP.panels[G.type]&&G.targets&&G.id!==me.panelInEdit?.id&&G.datasource?.uid!==g).map(G=>({value:G.id,label:G.title??"Panel "+G.id,description:Ee(G),imgUrl:x.ZP.panels[G.type].info.logos.small}))??[],[me,Ee]),le=(0,i.wW)(A),pe=(0,d.Me)();if(!me)return null;if(re.length<1)return y.createElement("p",{className:le.noQueriesText},"This dashboard does not have any other panels. Add queries to other panels and try again.");const ee=re.find(G=>G.value===Y.panelId),se=`d/${me.uid}/${me.title}?&editPanel=${Y.panelId}`,Q=Boolean(Y.withTransforms||j?.transformations?.length);return y.createElement(y.Fragment,null,y.createElement(u.g,{label:"Source",description:"Use the same results as panel"},y.createElement(P.Ph,{inputId:pe,placeholder:"Choose panel",isSearchable:!0,options:re,value:ee,onChange:G=>ae(G.value)})),z?y.createElement(E.$,null):y.createElement(y.Fragment,null,K&&Boolean(K.length)&&y.createElement(u.g,{label:"Queries"},y.createElement(C.wc,{spacing:"sm"},K.map((G,q)=>y.createElement("div",{className:le.queryEditorRowHeader,key:`DashboardQueryRow-${q}`},y.createElement("div",null,y.createElement("img",{src:G.img,alt:"",width:16}),y.createElement("span",{className:le.refId},G.refId,":")),y.createElement("div",null,y.createElement("a",{href:se},G.query,"\xA0",y.createElement(b.J,{name:"external-link-alt"})))))))),Q&&y.createElement(u.g,{label:"Transform",description:"Apply panel transformations from the source panel"},y.createElement(S.r,{value:Boolean(Y.withTransforms),onChange:J})),y.createElement(u.g,{label:"Data"},y.createElement(M.S,{options:w,value:Y.topic===n.w5.Annotations,onChange:oe})))}function A(U){return{results:(0,m.css)({padding:U.spacing(2)}),noQueriesText:(0,m.css)({padding:U.spacing(1.25)}),refId:(0,m.css)({padding:U.spacing(1.25)}),queryEditorRowHeader:m.css`
      label: queryEditorRowHeader;
      display: flex;
      padding: 4px 8px;
      flex-flow: row wrap;
      background: ${U.colors.background.secondary};
      align-items: center;
    `}}},83977:(H,T,e)=>{"use strict";e.d(T,{k:()=>F,e:()=>D});var t=e(82897),n=e(85526),c=e(53786),s=e(16313),r=e(2101),g=e(70006),f=e(49922),o=e(62626),l=e(38685),a=e(50235),m=e(16911),d=e(22069),p=e(40885),h=e(75118),y=e(54899),v=e(86647),i=e(7592),u=e(9398),P=e(52423),E=e(68404),C=e(13393),b=e(24799),S=e(53217),M=e(8944),x=e(24357),O=e(70659),L=e(7832);const B="Enabling this returns annotations that match any of the tags specified below",w=E.createElement("div",null,"Specify a list of tags to match. To specify a key and value tag use `key:value` syntax."),R=[{label:"Dashboard",value:L._$.Dashboard,description:"Query for events created on this dashboard and show them in the panels where they where created"},{label:"Tags",value:L._$.Tags,description:"This will fetch any annotation events that match the tags filter"}],A=[10,50,100,200,300,500,1e3,2e3].map(Y=>({label:String(Y),value:Y}));function U({query:Y,onChange:j}){const K=Y,{limit:z,matchAny:Z,tags:ae,type:J}=K,oe=I(),Ee=pe=>j({...K,type:pe.value}),me=pe=>j({...K,limit:pe.value}),re=pe=>j({...K,matchAny:pe.target.checked}),le=pe=>j({...K,tags:pe});return E.createElement(C.C,{className:oe.container},E.createElement(b.g,{label:"Filter by"},E.createElement(S.Ph,{inputId:"grafana-annotations__filter-by",options:R,value:J,onChange:Ee})),E.createElement(b.g,{label:"Max limit"},E.createElement(S.Ph,{inputId:"grafana-annotations__limit",width:16,options:A,value:z,onChange:me})),J===L._$.Tags&&E.createElement(E.Fragment,null,E.createElement(b.g,{label:"Match any",description:B},E.createElement(M.r,{id:"grafana-annotations__match-any",value:Z,onChange:re})),E.createElement(b.g,{label:"Tags",description:w},E.createElement(x.D,{allowCustomValue:!0,inputId:"grafana-annotations__tags",onChange:le,tagOptions:O.lK,tags:ae??[]}))))}const I=()=>({container:P.css`
      max-width: 600px;
    `});let N=100;class F extends d.CK{constructor(j){super(j),this.annotations={QueryEditor:U,prepareAnnotation(K){return K.target=K.target??{type:K.type??L._$.Dashboard,limit:K.limit??100,tags:K.tags??[],matchAny:K.matchAny??!1},K},prepareQuery(K){let z;if((0,t.isString)(K.datasource)){const Z=(0,i.p)(K.datasource,{returnDefaultAsNull:!1});Z&&(z=Z)}else z=K.datasource;return{...K,refId:K.name,queryType:L.hR.Annotations,datasource:z}}}}query(j){const K=[],z=[],Z=(0,p.J)();for(const ae of j.targets){if(ae.queryType===L.hR.Annotations)return(0,n.D)(this.getAnnotations({range:j.range,rangeRaw:j.range.raw,annotation:ae,dashboard:(0,u.h4)().getCurrent()}));if(!ae.hide){if(ae.queryType===L.hR.Snapshot){K.push((0,c.of)({data:(ae.snapshot??[]).map(J=>(0,g.vP)(J)),state:f.Gu.Done}));continue}if(ae.queryType===L.hR.LiveMeasurements){let J=Z.replace(ae.channel,j.scopedVars);const{filter:oe}=ae,Ee=(0,o.H7)(J);if(!(0,o.nU)(Ee))continue;const me={maxLength:j.maxDataPoints??500};ae.buffer?(me.maxDelta=ae.buffer,me.maxLength=me.maxLength*2):j.rangeRaw?.to==="now"&&(me.maxDelta=j.range.to.valueOf()-j.range.from.valueOf()),K.push((0,h.gj)().getDataStream({key:`${j.requestId}.${N++}`,addr:Ee,filter:oe,buffer:me}))}else ae.queryType||(ae.queryType=L.hR.RandomWalk),z.push(ae)}}return z.length&&K.push(super.query({...j,targets:z})),K.length?K.length===1?K[0]:(0,s.T)(...K):(0,c.of)()}listFiles(j){return this.query({targets:[{refId:"A",queryType:L.hR.List,path:j}]}).pipe((0,r.U)(K=>{const z=K.data[0]??new l.v;return new a.U(z)}))}metricFindQuery(j){return Promise.resolve([])}async getAnnotations(j){const K=(0,p.J)(),z=j.annotation,Z=z.target,ae={from:j.range.from.valueOf(),to:j.range.to.valueOf(),limit:Z.limit,tags:Z.tags,matchAny:Z.matchAny};if(Z.type===L._$.Dashboard){if(!j.dashboard.uid)return Promise.resolve({data:[]});ae.dashboardUID=j.dashboard.uid,delete ae.tags}else{if(!Array.isArray(Z.tags)||Z.tags.length===0)return Promise.resolve({data:[]});const oe="__delimiter__",Ee=[];for(const me of ae.tags){const re=K.replace(me,{},le=>typeof le=="string"?le:le.join(oe));for(const le of re.split(oe))Ee.push(le)}ae.tags=Ee}const J=await(0,y.i)().get("/api/annotations",ae,`grafana-data-source-annotations-${z.name}-${j.dashboard?.uid}`);return{data:[(0,m.g0)(J)]}}testDatasource(){return Promise.resolve()}}async function D(){return await(0,v.F)().get("-- Grafana --")}},7832:(H,T,e)=>{"use strict";e.d(T,{_$:()=>c,hR:()=>t,wi:()=>n});var t=(s=>(s.LiveMeasurements="measurements",s.Annotations="annotations",s.Snapshot="snapshot",s.RandomWalk="randomWalk",s.List="list",s.Read="read",s.Search="search",s))(t||{});const n={refId:"A",queryType:"randomWalk"};var c=(s=>(s.Dashboard="dashboard",s.Tags="tags",s))(c||{})},56991:(H,T,e)=>{"use strict";e.d(T,{L:()=>s});var t=e(82897),n=e.n(t),c=e(68404);function s(){const r=(0,c.useRef)(null);return r.current==null&&(r.current=(0,t.uniqueId)()),r.current}},63496:(H,T,e)=>{"use strict";e.d(T,{D:()=>v,w:()=>i});var t=e(82897),n=e.n(t),c=e(53786),s=e(85526),r=e(74687),g=e(98356),f=e(2101),o=e(73273),l=e(94514),a=e(15562),m=e(38581),d=e(7238),p=e(49922),h=e(86647),y=e(77599);const v="-- Mixed --";class i extends d.MF{constructor(E){super(E)}query(E){const C=E.targets.filter(M=>M.datasource?.uid!==v);if(!C.length)return(0,c.of)({data:[]});const b=(0,t.groupBy)(C,"datasource.uid"),S=[];for(const M in b){const x=b[M];S.push({datasource:(0,h.F)().get(x[0].datasource,E.scopedVars),targets:x})}return S.length?this.batchQueries(S,E):(0,c.of)({data:[]})}batchQueries(E,C){const b=E.filter(this.isQueryable).map((S,M)=>(0,s.D)(S.datasource).pipe((0,g.z)(x=>{const O=(0,t.cloneDeep)(C);return O.requestId=`mixed-${M}-${O.requestId||""}`,O.targets=S.targets,(0,s.D)(x.query(O)).pipe((0,f.U)(L=>({...L,data:L.data||[],state:p.Gu.Loading,key:`mixed-${M}-${L.key||""}`})),(0,o.q)(),(0,l.K)(L=>(L=(0,y.P)(L),L.message=`${x.name}: ${L.message}`,(0,c.of)([{data:[],state:p.Gu.Error,error:L,key:`mixed-${M}-${O.requestId||""}`}]))))})));return(0,r.D)(b).pipe(u(),(0,f.U)(this.finalizeResponses),(0,a.J)())}testDatasource(){return Promise.resolve({})}getQueryDisplayText(E){const C=(0,t.omit)(E,["key","refId","datasource"]),b=JSON.stringify(C);return`${E.datasource?.type?`${E.datasource?.type}: `:""}${b}`}isQueryable(E){return E&&Array.isArray(E.targets)&&E.targets.length>0}finalizeResponses(E){const{length:C}=E;if(C===0)return E;const b=E.find(S=>S.state===p.Gu.Error);return b?E.push(b):E[C-1].state=p.Gu.Done,E}}function u(){return(0,m.u)((P,E)=>E.reduce((C,b)=>(C.push.apply(C,b),C),P),[])}},40286:(H,T,e)=>{"use strict";e.d(T,{As:()=>t,LM:()=>c,kx:()=>n,wO:()=>s});var t=(r=>(r[r.AlphaAsc=1]="AlphaAsc",r[r.AlphaDesc=2]="AlphaDesc",r[r.Importance=3]="Importance",r[r.TimeAsc=4]="TimeAsc",r[r.TimeDesc=5]="TimeDesc",r))(t||{}),n=(r=>(r.Current="current",r.RecentChanges="changes",r))(n||{}),c=(r=>(r.Default="default",r.Custom="custom",r))(c||{}),s=(r=>(r.List="list",r.Stat="stat",r))(s||{})},28586:(H,T,e)=>{"use strict";e.d(T,{Gj:()=>n,Qm:()=>g});var t=e(43211);const n=1,c=2,s=3,r=(f,o,l,a)=>(0,t.O)(o+f*(l+a),6);function g(f,o,l,a,m){let d=1-o,p=l===n?d/(f-1):l===c?d/f:l===s?d/(f+1):0;(isNaN(p)||p===1/0)&&(p=0);let h=l===n?0:l===c?p/2:l===s?p:0,y=o/f,v=(0,t.O)(y,6);if(a==null)for(let i=0;i<f;i++)m(i,r(i,h,y,p),v);else m(a,r(a,h,y,p),v)}},60892:(H,T,e)=>{"use strict";e.d(T,{Pn:()=>c,kK:()=>r,lW:()=>g,zZ:()=>s});const t=10,n=4;function c(f,o,l,a,m,d){return f>=l&&f<=m&&o>=a&&o<=d}function s(f,o,l){let a;if(f.o.length&&(a=f.o.find(m=>m.sidx===o&&m.didx===l)),a==null&&f.q)for(let m=0;m<f.q.length&&(a=s(f.q[m],o,l),!a);m++);return a}function r(f,o){return f.x<=o.x+o.w&&f.x+f.w>=o.x&&f.y+f.h>=o.y&&f.y<=o.y+o.h}class g{constructor(o,l,a,m,d=0){this.x=o,this.y=l,this.w=a,this.h=m,this.l=d,this.o=[],this.q=null}split(){let o=this,l=o.x,a=o.y,m=o.w/2,d=o.h/2,p=o.l+1;o.q=[new g(l+m,a,m,d,p),new g(l,a,m,d,p),new g(l,a+d,m,d,p),new g(l+m,a+d,m,d,p)]}quads(o,l,a,m,d){let p=this,h=p.q,y=p.x+p.w/2,v=p.y+p.h/2,i=l<v,u=o<y,P=o+a>y,E=l+m>v;i&&P&&d(h[0]),u&&i&&d(h[1]),u&&E&&d(h[2]),P&&E&&d(h[3])}add(o){let l=this;if(l.q!=null)l.quads(o.x,o.y,o.w,o.h,a=>{a.add(o)});else{let a=l.o;if(a.push(o),a.length>t&&l.l<n){l.split();for(let m=0;m<a.length;m++){let d=a[m];l.quads(d.x,d.y,d.w,d.h,p=>{p.add(d)})}l.o.length=0}}}get(o,l,a,m,d){let p=this,h=p.o;for(let y=0;y<h.length;y++)d(h[y]);p.q!=null&&p.quads(o,l,a,m,y=>{y.get(o,l,a,m,d)})}clear(){this.o.length=0,this.q=null}}},63992:(H,T,e)=>{"use strict";e.d(T,{M:()=>a,l:()=>m});var t=e(82897),n=e.n(t),c=e(68404),s=e(20251),r=e(17128),g=e(19670),f=e(18543),o=e(4387),l=e(47694);class a extends c.PureComponent{constructor(){super(...arguments),this.renderComponent=(p,h)=>{const{options:y,fieldConfig:v}=this.props,{value:i,alignmentFactors:u,orientation:P,width:E,height:C,count:b}=p,{field:S,display:M,view:x,colIndex:O}=i,{openMenu:L,targetClassName:B}=h;let w;return x&&(0,t.isNumber)(O)&&(w=x.getFieldDisplayProcessor(O)),c.createElement(g.xf,{value:m(b,v.defaults,M),width:E,height:C,orientation:P,field:S,text:y.text,display:w,theme:l.vc.theme2,itemSpacing:this.getItemSpacing(),displayMode:y.displayMode,onClick:L,className:B,alignmentFactors:b>1?u:void 0,showUnfilled:y.showUnfilled})},this.renderValue=p=>{const{value:h,orientation:y}=p,{hasLinks:v,getLinks:i}=h;return v&&i?c.createElement("div",{style:{width:"100%",display:y===s.wm.Vertical?"flex":"initial"}},c.createElement(f.V,{links:i},u=>this.renderComponent(p,u))):this.renderComponent(p,{})},this.getValues=()=>{const{data:p,options:h,replaceVariables:y,fieldConfig:v,timeZone:i}=this.props;return(0,r.nG)({fieldConfig:v,reduceOptions:h.reduceOptions,replaceVariables:y,theme:l.vc.theme2,data:p.series,timeZone:i})}}getItemSpacing(){return this.props.options.displayMode==="lcd"?2:10}render(){const{height:p,width:h,options:y,data:v,renderCounter:i}=this.props;return c.createElement(o.Q,{source:v,getAlignmentFactors:r.sg,getValues:this.getValues,renderValue:this.renderValue,renderCounter:i,width:h,height:p,minVizWidth:y.minVizWidth,minVizHeight:y.minVizHeight,itemSpacing:this.getItemSpacing(),orientation:y.orientation})}}function m(d,p,h){return d===1&&!p.displayName?{...h,title:void 0}:h}},35450:(H,T,e)=>{"use strict";e.d(T,{Z:()=>ke});var t=e(52423),n=e(68404),c=e(11041),s=e(50235),r=e(40400),g=e(72648);const f=22*window.devicePixelRatio,o=10*window.devicePixelRatio,l=.5*window.devicePixelRatio,a=20*window.devicePixelRatio,m=.5*window.devicePixelRatio,d=4*window.devicePixelRatio,p=800,h=120;var y=e(12398),v=e(14582),i=e(36512),u=e(36328),P=(He=>(He.Bytes="bytes",He.Short="short",He.Nanoseconds="ns",He))(P||{}),E=(He=>(He.Symbol="Symbol",He.Self="Self",He.Total="Total",He))(E||{}),C=(He=>(He.TopTable="topTable",He.FlameGraph="flameGraph",He.Both="both",He))(C||{}),b=e(61860);const S=({tooltipRef:He,tooltipData:ue,showTooltip:Oe})=>{const Fe=(0,g.wW)(x);return n.createElement("div",{ref:He,className:Fe.tooltip},ue&&Oe&&n.createElement(b.u,{content:n.createElement("div",null,n.createElement("p",null,ue.name),n.createElement("p",{className:Fe.lastParagraph},ue.unitTitle,n.createElement("br",null),"Total: ",n.createElement("b",null,ue.unitValue)," (",ue.percentValue,"%)",n.createElement("br",null),"Self: ",n.createElement("b",null,ue.unitSelf)," (",ue.percentSelf,"%)",n.createElement("br",null),"Samples: ",n.createElement("b",null,ue.samples))),placement:"right",show:!0},n.createElement("span",null)))},M=(He,ue,Oe,Fe,Ie)=>{let we,Re;const _e=(0,i.U)({field:He,theme:(0,u.j)()}),et=_e(Oe),qe=_e(Fe),Je=Math.round(1e4*(Oe/Ie))/100,lt=Math.round(1e4*(Fe/Ie))/100;let at=et.text+et.suffix,Xe=qe.text+qe.suffix;switch(He.config.unit){case P.Bytes:we="% of total",Re="RAM";break;case P.Nanoseconds:we="% of total time",Re="Time";break;default:we="% of total",Re="Count",et.suffix||(at=et.text),qe.suffix||(Xe=qe.text);break}return{name:ue,percentTitle:we,percentValue:Je,percentSelf:lt,unitTitle:Re,unitValue:at,unitSelf:Xe,samples:Oe.toLocaleString()}},x=()=>({tooltip:t.css`
    position: fixed;
  `,lastParagraph:t.css`
    margin-bottom: 0;
  `,name:t.css`
    margin-bottom: 10px;
  `}),O=S;var L=e(16514);function B(He,ue,Oe,Fe,Ie,we){const Re=[];for(let _e=0;_e<He.length;_e+=1){const et=He[_e],qe=R(et.start,Oe,Fe,Ie);let Je=et.value;const lt=Je*Ie<=o;if(lt)for(;_e<He.length-1&&et.start+Je===He[_e+1].start&&He[_e+1].value*Ie<=o;)_e+=1,Je+=He[_e].value;const at=we(et.value);let Xe=at.suffix?at.text+at.suffix:at.text;const gt=Je*Ie-(lt?0:m*2);Re.push({width:gt,height:f,x:qe,y:ue*f,collapsed:lt,ticks:Je,label:et.label,unitLabel:Xe})}return Re}function w(He,ue,Oe,Fe,Ie,we,Re,_e,et){if(ue.width<l)return;He.beginPath(),He.rect(ue.x+(ue.collapsed?0:m),ue.y,ue.width,ue.height);const qe=Math.min(1,ue.ticks/Oe/(Ie-Fe)),Je=50-50*qe,lt=65+7*qe,at=ue.label,Xe=et.filter([at],we),gt=we&&Xe.length>0;ue.collapsed?He.fillStyle=gt?A(Je,lt):L.O9[55]:(He.stroke(),we?He.fillStyle=gt?A(Je,lt):L.O9[55]:He.fillStyle=Re>_e-1?A(Je,lt):A(Je,lt+15)),He.fill(),!ue.collapsed&&ue.width>=a&&(He.save(),He.clip(),He.fillStyle="#222",He.fillText(`${at} (${ue.unitLabel})`,Math.max(ue.x,0)+d,ue.y+f/2),He.restore())}function R(He,ue,Oe,Fe){return(He-ue*Oe)*Fe}function A(He,ue){return`hsl(${He}, 100%, ${ue}%)`}const U=({data:He,app:ue,flameGraphHeight:Oe,levels:Fe,topLevelIndex:Ie,rangeMin:we,rangeMax:Re,search:_e,setTopLevelIndex:et,setRangeMin:qe,setRangeMax:Je,selectedView:lt})=>{const at=I(lt,ue,Oe),Xe=He.fields[1].values.get(0),gt=He.fields.find(fe=>fe.name==="value")??He.fields.find(fe=>fe.type===v.fS.number);if(!gt)throw new Error("Malformed dataFrame: value field of type number is not in the query response");const[ot,{width:Ye}]=(0,c.Z)(),mt=(0,n.useRef)(null),ce=(0,n.useRef)(null),[be,Te]=(0,n.useState)(),[Ke,ge]=(0,n.useState)(!1),Me=(0,n.useCallback)((fe,he,De)=>{const Ae=Math.floor(he/(f/window.devicePixelRatio)),Ne=N(fe,Fe[Ae],De,Xe,we);return{levelIndex:Ae,barIndex:Ne}},[Fe,Xe,we]),ye=(0,n.useCallback)(fe=>{if(!Fe.length)return;const he=mt.current?.getContext("2d"),De=mt.current,Ae=f*Fe.length;De.width=Math.round(Ye*window.devicePixelRatio),De.height=Math.round(Ae*window.devicePixelRatio),De.style.width=`${Ye}px`,De.style.height=`${Ae}px`,he.textBaseline="middle",he.font=12*window.devicePixelRatio+"px monospace",he.strokeStyle="white";const Ne=(0,i.U)({field:gt,theme:(0,u.j)()}),Ze=new y.Z({intraMode:0,intraIns:0});for(let Se=0;Se<Fe.length;Se++){const Ue=Fe[Se],Qe=B(Ue,Se,Xe,we,fe,Ne);for(const pt of Qe)w(he,pt,Xe,we,Re,_e,Se,Ie,Ze)}},[Fe,Ye,gt,Xe,we,Re,_e,Ie]);return(0,n.useEffect)(()=>{if(mt.current){const fe=Ye*window.devicePixelRatio/Xe/(Re-we);ye(fe),mt.current.onclick=he=>{const De=mt.current.clientWidth/Xe/(Re-we),{levelIndex:Ae,barIndex:Ne}=Me(he.offsetX,he.offsetY,De);Ne!==-1&&!isNaN(Ae)&&!isNaN(Ne)&&(et(Ae),qe(Fe[Ae][Ne].start/Xe),Je((Fe[Ae][Ne].start+Fe[Ae][Ne].value)/Xe))},mt.current.onmousemove=he=>{if(ce.current){ge(!1);const De=mt.current.clientWidth/Xe/(Re-we),{levelIndex:Ae,barIndex:Ne}=Me(he.offsetX,he.offsetY,De);if(Ne!==-1&&!isNaN(Ae)&&!isNaN(Ne)){ce.current.style.left=he.clientX+10+"px",ce.current.style.top=he.clientY+"px";const Ze=Fe[Ae][Ne],Se=M(gt,Ze.label,Ze.value,Ze.self,Xe);Te(Se),ge(!0)}}},mt.current.onmouseleave=()=>{ge(!1)}}},[ye,Me,Fe,we,Re,Ie,Xe,Ye,et,qe,Je,lt,gt]),n.createElement("div",{className:at.graph,ref:ot},n.createElement("canvas",{ref:mt,"data-testid":"flameGraph"}),n.createElement(O,{tooltipRef:ce,tooltipData:be,showTooltip:Ke}))},I=(He,ue,Oe)=>({graph:t.css`
    cursor: pointer;
    float: left;
    overflow: scroll;
    width: ${He===C.FlameGraph?"100%":"50%"};
    ${ue!==r.zj.Explore?`height: calc(${Oe}px - 44px)`:""}; // 44px to adjust for header pushing content down
  `}),N=(He,ue,Oe,Fe,Ie)=>{if(ue){let we=0,Re=ue.length-1;for(;we<=Re;){const _e=we+Re>>1,et=R(ue[_e].start,Fe,Ie,Oe),qe=R(ue[_e].start+ue[_e].value,Fe,Ie,Oe);if(et<=He&&qe>=He)return _e;et>He?Re=_e-1:we=_e+1}}return-1},F=U;function D(He){const ue=[];let Oe=0;for(let Fe=0;Fe<He.length;Fe++){const Ie={...He.get(Fe)},we=Fe>0?{...He.get(Fe-1)}:void 0;if(ue[Ie.level]=ue[Ie.level]||[],we&&we.level>=Ie.level){const _e=ue[Ie.level][ue[Ie.level].length-1];Oe=_e.start+_e.value}const Re={...Ie,start:Oe};ue[Ie.level].push(Re)}return ue}var Y=e(46967),j=e(31403),K=e(2594);const z=({app:He,search:ue,setTopLevelIndex:Oe,setRangeMin:Fe,setRangeMax:Ie,setSearch:we,selectedView:Re,setSelectedView:_e,containerWidth:et})=>{const qe=(0,g.wW)(lt=>Z(lt,He));let Je=[{value:C.TopTable,label:"Top Table",description:"Only show top table"},{value:C.FlameGraph,label:"Flame Graph",description:"Only show flame graph"}];return et>=p&&Je.push({value:C.Both,label:"Both",description:"Show both the top table and flame graph"}),n.createElement("div",{className:qe.header},n.createElement("div",{className:qe.leftContainer},n.createElement("div",{className:qe.inputContainer},n.createElement(Y.I,{value:ue||"",onChange:lt=>{we(lt.currentTarget.value)},placeholder:"Search..",width:24})),n.createElement(j.zx,{type:"button",variant:"secondary",size:"md",onClick:()=>{Oe(0),Fe(0),Ie(1),we("")}},"Reset View")),n.createElement("div",{className:qe.rightContainer},n.createElement(K.S,{options:Je,value:Re,onChange:lt=>{_e(lt)}})))},Z=(He,ue)=>({header:t.css`
    display: flow-root;
    width: 100%;
    background: ${He.colors.background.primary};
    top: 0;
    height: 50px;
    z-index: ${He.zIndex.navbarFixed};
    ${ue===r.zj.Explore?"position: sticky; margin-bottom: 8px; padding-top: 9px":""};
  `,inputContainer:t.css`
    float: left;
    margin-right: 20px;
  `,leftContainer:t.css`
    float: left;
  `,rightContainer:t.css`
    float: right;
  `}),ae=z;var J=e(89050),oe=e(91742),Ee=e(75478),me=e(39904),re=e(68226);const le=({width:He,height:ue,data:Oe,search:Fe,setSearch:Ie,setTopLevelIndex:we,setRangeMin:Re,setRangeMax:_e})=>{const et=(0,g.wW)(ce=>se(ce)),qe=(ce,be,Te)=>ce.values[Te].localeCompare(be.values[Te]),Je=(ce,be,Te)=>ce.values[Te].value.toString().localeCompare(be.values[Te].value.toString(),"en",{numeric:!0}),lt=(0,n.useMemo)(()=>[{accessor:E.Symbol.toLowerCase(),header:E.Symbol,cell:pe,sortType:qe,width:He-h*2},{accessor:E.Self.toLowerCase(),header:E.Self,cell:ee,sortType:Je,width:h},{accessor:E.Total.toLowerCase(),header:E.Total,cell:ee,sortType:Je,width:h}],[He]),at=(0,n.useMemo)(()=>({columns:lt,data:Oe,initialState:{sortBy:[{id:E.Self.toLowerCase(),desc:!0}]}}),[lt,Oe]),Xe=(0,n.useCallback)(ce=>{Fe===ce?Ie(""):(Ie(ce),we(0),Re(0),_e(1))},[Fe,_e,Re,Ie,we]),{headerGroups:gt,rows:ot,prepareRow:Ye}=(0,oe.useTable)(at,oe.useSortBy,oe.useAbsoluteLayout),mt=n.useCallback(({index:ce,style:be})=>{let Te=ot[ce];Ye(Te);const Ke=Te.values[E.Symbol.toLowerCase()],ge=(0,t.cx)(Ke===Fe&&et.matchedRow,et.row);return n.createElement("div",{...Te.getRowProps({style:be}),className:ge,onClick:()=>{Xe(Ke)}},Te.cells.map(Me=>{const{key:ye,...fe}=Me.getCellProps();return fe.style&&(fe.style.minWidth=fe.style.width),n.createElement("div",{key:ye,className:et.cell,...fe},Me.render("cell"))}))},[ot,Ye,Fe,et.matchedRow,et.row,et.cell,Xe]);return n.createElement("div",{className:et.table(ue),"data-testid":"topTable"},gt.map(ce=>{const{key:be,...Te}=ce.getHeaderGroupProps();return n.createElement("div",{key:be,className:et.header,...Te},ce.headers.map(Ke=>{const{key:ge,...Me}=Ke.getHeaderProps(Ke.canSort?Ke.getSortByToggleProps():void 0);return n.createElement("div",{key:ge,className:et.headerCell,...Me},Ke.render("header"),Ke.isSorted&&n.createElement(me.J,{name:Ke.isSortedDesc?"arrow-down":"arrow-up"}))}))}),ot.length>0?n.createElement(re.$,{hideVerticalTrack:!0},n.createElement(Ee.t7,{height:ue,itemCount:ot.length,itemSize:38,width:"100%",style:{overflow:"hidden auto"}},mt)):n.createElement("div",{style:{height:ue},className:et.noData},"No data"))},pe=({cell:{value:He}})=>n.createElement("div",null,He),ee=({cell:{value:He}})=>n.createElement("div",null,He.unitValue),se=He=>({table:ue=>t.css`
      background-color: ${He.colors.background.primary};
      height: ${ue}px;
      overflow: scroll;
      display: flex;
      flex-direction: column;
      width: 100%;
    `,header:t.css`
    height: 38px;

    & > :nth-child(2),
    & > :nth-child(3) {
      text-align: right;
    }

    // needed to keep header row height fixed so header row does not resize with browser
    & > :nth-child(3) {
      position: relative !important;
    }
  `,headerCell:t.css`
    background-color: ${He.colors.background.secondary};
    color: ${He.colors.primary.text};
    padding: ${He.spacing(1)};
  `,matchedRow:t.css`
    & > :nth-child(1),
    & > :nth-child(2),
    & > :nth-child(3) {
      background-color: ${He.colors.background.secondary} !important;
    }
  `,row:t.css`
    border-top: 1px solid ${He.components.panel.borderColor};

    &:hover {
      background-color: ${He.colors.emphasize(He.colors.background.primary,.03)};
    }
    & > :nth-child(2),
    & > :nth-child(3) {
      text-align: right;
    }
    & > :nth-child(3) {
      border-right: none;
    }
  `,cell:t.css`
    border-right: 1px solid ${He.components.panel.borderColor};
    padding: ${He.spacing(1)};

    div {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    &:hover {
      overflow: visible;
      width: auto !important;
      box-shadow: 0 0 2px ${He.colors.primary.main};
      background-color: ${He.colors.emphasize(He.colors.background.primary,.03)};
      z-index: 1;
    }
  `,noData:t.css`
    align-items: center;
    display: flex;
    justify-content: center;
  `}),Q=le,G=({data:He,app:ue,totalLevels:Oe,selectedView:Fe,search:Ie,setSearch:we,setTopLevelIndex:Re,setRangeMin:_e,setRangeMax:et})=>{const qe=(0,g.wW)(()=>q(Fe,ue)),[Je,lt]=(0,n.useState)(),at=He.fields.find(Ye=>Ye.name==="value")??He.fields.find(Ye=>Ye.type===v.fS.number),Xe=He.fields.find(Ye=>Ye.name==="self")??He.fields.find(Ye=>Ye.type===v.fS.number),gt=(0,n.useCallback)(()=>{let Ye,mt,ce,be={};if(He.fields.length===4){const Te=He.fields[1].values,Ke=He.fields[2].values,ge=He.fields[3].values;for(let Me=0;Me<Te.length;Me++)ce=Te.get(Me),mt=Ke.get(Me),Ye=ge.get(Me),be[Ye]=be[Ye]||{},be[Ye].self=be[Ye].self?be[Ye].self+mt:mt,be[Ye].total=be[Ye].total?be[Ye].total+ce:ce}return be},[He.fields]),ot=(Ye,mt)=>{const be=(0,i.U)({field:Ye,theme:(0,u.j)()})(mt);let Te=be.text+be.suffix;switch(Ye.config.unit){case P.Bytes:break;case P.Nanoseconds:break;default:be.suffix||(Te=be.text);break}return Te};return(0,n.useEffect)(()=>{const Ye=gt();let mt=[];for(let ce in Ye){const be=ot(Xe,Ye[ce].self),Te=ot(at,Ye[ce].total);mt.push({symbol:ce,self:{value:Ye[ce].self,unitValue:be},total:{value:Ye[ce].total,unitValue:Te}})}lt(mt)},[He.fields,Xe,gt,at]),n.createElement(n.Fragment,null,Je&&n.createElement("div",{className:qe.topTableContainer},n.createElement(J.Z,{style:{width:"100%",height:f*Oe+"px"}},({width:Ye,height:mt})=>n.createElement(Q,{width:Ye,height:mt,data:Je,search:Ie,setSearch:we,setTopLevelIndex:Re,setRangeMin:_e,setRangeMax:et}))))},q=(He,ue)=>{const Oe="20px";return{topTableContainer:t.css`
      cursor: pointer;
      float: left;
      margin-right: ${Oe};
      width: ${He===C.TopTable?"100%":`calc(50% - ${Oe})`};
      ${ue!==r.zj.Explore?"height: calc(100% - 44px)":""}; // 44px to adjust for header pushing content down
    `}},X=G,de=He=>{const[ue,Oe]=(0,n.useState)(0),[Fe,Ie]=(0,n.useState)(0),[we,Re]=(0,n.useState)(1),[_e,et]=(0,n.useState)(""),[qe,Je]=(0,n.useState)(C.Both),[lt,{width:at}]=(0,c.Z)(),Xe=(0,n.useMemo)(()=>{if(!He.data)return[];const ot=new s.U(He.data);return D(ot)},[He.data]),gt=(0,g.wW)(()=>Be(He.app,f*Xe.length));return(0,n.useEffect)(()=>{at>0&&at<p&&qe===C.Both&&Je(C.FlameGraph)},[qe,Je,at]),(0,n.useEffect)(()=>{Oe(0),Ie(0),Re(1)},[He.data]),n.createElement("div",{ref:lt,className:gt.container},n.createElement(ae,{app:He.app,setTopLevelIndex:Oe,setRangeMin:Ie,setRangeMax:Re,search:_e,setSearch:et,selectedView:qe,setSelectedView:Je,containerWidth:at}),qe!==C.FlameGraph&&n.createElement(X,{data:He.data,app:He.app,totalLevels:Xe.length,selectedView:qe,search:_e,setSearch:et,setTopLevelIndex:Oe,setRangeMin:Ie,setRangeMax:Re}),qe!==C.TopTable&&n.createElement(F,{data:He.data,app:He.app,flameGraphHeight:He.flameGraphHeight,levels:Xe,topLevelIndex:ue,rangeMin:Fe,rangeMax:we,search:_e,setTopLevelIndex:Oe,setRangeMin:Ie,setRangeMax:Re,selectedView:qe}))},Be=(He,ue)=>({container:t.css`
    height: ${He===r.zj.Explore?ue+"px":"100%"};
  `}),ke=de},7149:(H,T,e)=>{"use strict";e.r(T),e.d(T,{plugin:()=>E});var t=e(48513),n=e(25272),c=e(30383),s=e(76327);const r=C=>(0,s.rD)(C),g=(C,b,S)=>{const M=(0,s.ZH)(C,b,S);if(b==="singlestat"&&S.angular){const x=S.angular.gauge;x&&(M.showThresholdMarkers=x.thresholdMarkers,M.showThresholdLabels=x.thresholdLabels)}return M};var f=e(68404),o=e(17128),l=e(69823),a=e(18543),m=e(4387),d=e(47694),p=e(63992);class h extends f.PureComponent{constructor(){super(...arguments),this.renderComponent=(b,S)=>{const{options:M,fieldConfig:x}=this.props,{width:O,height:L,count:B,value:w}=b,{field:R,display:A}=w,{openMenu:U,targetClassName:I}=S;return f.createElement(l.a,{value:(0,p.l)(B,x.defaults,A),width:O,height:L,field:R,text:M.text,showThresholdLabels:M.showThresholdLabels,showThresholdMarkers:M.showThresholdMarkers,theme:d.vc.theme2,onClick:U,className:I})},this.renderValue=b=>{const{value:S}=b,{getLinks:M,hasLinks:x}=S;return x&&M?f.createElement(a.V,{links:M,style:{flexGrow:1}},O=>this.renderComponent(b,O)):this.renderComponent(b,{})},this.getValues=()=>{const{data:b,options:S,replaceVariables:M,fieldConfig:x,timeZone:O}=this.props;return(0,o.nG)({fieldConfig:x,reduceOptions:S.reduceOptions,replaceVariables:M,theme:d.vc.theme2,data:b.series,timeZone:O})}}render(){const{height:b,width:S,data:M,renderCounter:x,options:O}=this.props;return f.createElement(m.Q,{getValues:this.getValues,renderValue:this.renderValue,width:S,height:b,source:M,autoGrid:!0,renderCounter:x,orientation:O.orientation})}}const y=Object.freeze([0,0]),v={showThresholdLabels:!1,showThresholdMarkers:!0};var i=e(24177),u=e(26410);class P{getSuggestionsForData(b){const{dataSummary:S}=b;if(!S.hasData||!S.hasNumberField||S.numberFieldCount>=50)return;const M=b.getListAppender({name:u.y.Gauge,pluginId:"gauge",options:{},fieldConfig:{defaults:{thresholds:{steps:[{value:-1/0,color:"green"},{value:70,color:"orange"},{value:85,color:"red"}],mode:i.H.Percentage},custom:{}},overrides:[]},cardOptions:{previewModifier:x=>{x.options.reduceOptions.values&&(x.options.reduceOptions.limit=2)}}});S.hasStringField&&S.frameCount===1&&S.rowCountTotal<10?(M.append({name:u.y.Gauge,options:{reduceOptions:{values:!0,calcs:[]}}}),M.append({name:u.y.GaugeNoThresholds,options:{reduceOptions:{values:!0,calcs:[]},showThresholdMarkers:!1}})):(M.append({name:u.y.Gauge,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),M.append({name:u.y.GaugeNoThresholds,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},showThresholdMarkers:!1}}))}}const E=new t.c(h).useFieldConfig({useCustomConfig:C=>{C.addNumberInput({path:"neutral",name:"Neutral",description:"Leave empty to use Min as neutral point",category:["Gauge"],settings:{placeholder:"auto"}})}}).setPanelOptions(C=>{(0,c.j)(C),(0,c.h)(C),C.addBooleanSwitch({path:"showThresholdLabels",name:"Show threshold labels",description:"Render the threshold values around the gauge bar",defaultValue:v.showThresholdLabels}).addBooleanSwitch({path:"showThresholdMarkers",name:"Show threshold markers",description:"Renders the thresholds as an outer bar",defaultValue:v.showThresholdMarkers}),n.Z(C)}).setPanelChangeHandler(g).setSuggestionsSupplier(new P).setMigrationHandler(r)},19942:(H,T,e)=>{"use strict";e.d(T,{H:()=>a});var t=e(52423),n=e(68404),c=e(89890),s=e(20112),r=e(76553),g=e(40538),f=e(72648),o=e(52081),l=e(31403);const a=({data:d,rowIndex:p,columnIndex:h,sortOrder:y,mode:v,header:i=void 0})=>{const u=(0,f.wW)(m);if(!d||p==null)return null;const P=d.fields.filter(O=>!Boolean(O.config.custom?.hideFrom?.tooltip)),E=P.find(O=>O.name==="traceID")||d.fields[0],C=[E,...P.filter(O=>E!==O)];if(C.length===0)return null;const b=[],S=[],M=new Set;for(const O of C){const L=O.values.get(p),B=O.display?O.display(L):{text:`${L}`,numeric:+L};O.getLinks&&O.getLinks({calculatedValue:B,valueRowIndex:p}).forEach(w=>{const R=`${w.title}/${w.href}`;M.has(R)||(S.push(w),M.add(R))}),b.push([(0,c.C)(O,d),L,(0,s.zc)(B)])}y&&y!==g.As.None&&b.sort((O,L)=>r.sortValues(y)(O[1],L[1]));const x=()=>S.length>0&&n.createElement("tr",null,n.createElement("td",{colSpan:2},n.createElement(o.wc,null,S.map((O,L)=>n.createElement(l.Qj,{key:L,icon:"external-link-alt",target:O.target,href:O.href,onClick:O.onClick,fill:"text",style:{width:"100%"}},O.title)))));return n.createElement("div",{className:u.wrapper},i&&n.createElement("div",{className:u.header},n.createElement("span",{className:u.title},i)),n.createElement("table",{className:u.infoWrap},n.createElement("tbody",null,(v===g.f3.Multi||v==null)&&b.map((O,L)=>n.createElement("tr",{key:`${L}/${p}`,className:L===h?u.highlight:""},n.createElement("th",null,O[0],":"),n.createElement("td",null,O[2]))),v===g.f3.Single&&h&&n.createElement("tr",{key:`${h}/${p}`},n.createElement("th",null,b[h][0],":"),n.createElement("td",null,b[h][2])),x())))},m=d=>{const p=d.isDark?d.v1.palette.dark2:d.v1.palette.white,h=d.isDark?d.v1.palette.dark9:d.v1.palette.gray5,y=d.isDark?d.v1.palette.dark3:d.v1.palette.gray6;return{wrapper:t.css`
      background: ${p};
      border: 1px solid ${h};
      border-radius: ${d.shape.borderRadius(2)};
    `,header:t.css`
      background: ${h};
      padding: 6px 10px;
      display: flex;
    `,title:t.css`
      font-weight: ${d.typography.fontWeightMedium};
      padding-right: ${d.spacing(2)};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,infoWrap:t.css`
      padding: 8px;
      th {
        font-weight: ${d.typography.fontWeightMedium};
        padding: ${d.spacing(.25,2)};
      }
      tr {
        background-color: ${d.colors.background.primary};
        &:nth-child(even) {
          background-color: ${y};
        }
      }
    `,highlight:t.css`
      background: ${d.colors.action.hover};
    `}}},53764:(H,T,e)=>{"use strict";e.d(T,{S:()=>g});var t=e(52423),n=e(68404),c=e(8928),s=e(38849),r=e(72648);function g({width:o,showImage:l,data:a,index:m}){const d=(0,r.wW)(f),p=o>600,h=a.get(m);return n.createElement("article",{className:(0,t.cx)(d.item,p&&d.itemWide)},l&&h.ogImage&&n.createElement("a",{tabIndex:-1,href:c.QX.sanitizeUrl(h.link),target:"_blank",rel:"noopener noreferrer",className:(0,t.cx)(d.socialImage,p&&d.socialImageWide),"aria-hidden":!0},n.createElement("img",{src:h.ogImage,alt:h.title})),n.createElement("div",{className:d.body},n.createElement("time",{className:d.date,dateTime:(0,s.dq)(h.date,{format:"MMM DD"})},(0,s.dq)(h.date,{format:"MMM DD"})," "),n.createElement("a",{className:d.link,href:c.QX.sanitizeUrl(h.link),target:"_blank",rel:"noopener noreferrer"},n.createElement("h3",{className:d.title},h.title)),n.createElement("div",{className:d.content,dangerouslySetInnerHTML:{__html:c.QX.sanitize(h.content)}})))}const f=o=>({container:t.css`
    height: 100%;
  `,item:t.css`
    display: flex;
    padding: ${o.spacing(1)};
    position: relative;
    margin-bottom: 4px;
    margin-right: ${o.spacing(1)};
    border-bottom: 2px solid ${o.colors.border.weak};
    background: ${o.colors.background.primary};
    flex-direction: column;
    flex-shrink: 0;
  `,itemWide:t.css`
    flex-direction: row;
  `,body:t.css`
    display: flex;
    flex-direction: column;
  `,socialImage:t.css`
    display: flex;
    align-items: center;
    margin-bottom: ${o.spacing(1)};
    > img {
      width: 100%;
      border-radius: ${o.shape.borderRadius(2)} ${o.shape.borderRadius(2)} 0 0;
    }
  `,socialImageWide:t.css`
    margin-right: ${o.spacing(2)};
    margin-bottom: 0;
    > img {
      width: 250px;
      border-radius: ${o.shape.borderRadius()};
    }
  `,link:t.css`
    color: ${o.colors.text.link};
    display: inline-block;

    &:hover {
      color: ${o.colors.text.link};
      text-decoration: underline;
    }
  `,title:t.css`
    font-size: 16px;
    margin-bottom: ${o.spacing(.5)};
  `,content:t.css`
    p {
      margin-bottom: 4px;
      color: ${o.colors.text};
    }
  `,date:t.css`
    margin-bottom: ${o.spacing(.5)};
    font-weight: 500;
    border-radius: 0 0 0 3px;
    color: ${o.colors.text.secondary};
  `})},6981:(H,T,e)=>{"use strict";e.d(T,{k:()=>t});const t="https://grafana.com/blog/news.xml"},13724:(H,T,e)=>{"use strict";e.d(T,{j:()=>p});var t=e(671),n=e(50235);function c(h){const v=new DOMParser().parseFromString(h,"text/xml");return{items:Array.from(v.querySelectorAll("entry")).map(u=>({title:f(u,"title"),link:u.querySelector("link")?.getAttribute("href")??"",content:f(u,"content"),pubDate:f(u,"published"),ogImage:u.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}function s(h){const v=new DOMParser().parseFromString(h,"text/xml");return{items:Array.from(v.querySelectorAll("item")).map(u=>({title:f(u,"title"),link:f(u,"link"),content:f(u,"description"),pubDate:f(u,"pubDate"),ogImage:u.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}async function r(h){return await(await fetch(h)).text()}function g(h){return new DOMParser().parseFromString(h,"text/xml").querySelector("feed")!==null}function f(h,y){return h.querySelector(y)?.textContent??""}async function o(h){const y=await r(h);return g(y)?c(y):s(y)}var l=e(19695),a=e(46519),m=e(14582);function d(h){const y=new l.G([]),v=new l.G([]),i=new l.G([]),u=new l.G([]),P=new l.G([]);for(const E of h.items){const C=(0,a.CQ)(E.pubDate);try{if(y.buffer.push(C.valueOf()),v.buffer.push(E.title),i.buffer.push(E.link),P.buffer.push(E.ogImage),E.content){const b=E.content.replace(/<\/?[^>]+(>|$)/g,"");u.buffer.push(b)}}catch(b){console.warn("Error reading news item:",b,E)}}return{fields:[{name:"date",type:m.fS.time,config:{displayName:"Date"},values:y},{name:"title",type:m.fS.string,config:{},values:v},{name:"link",type:m.fS.string,config:{},values:i},{name:"content",type:m.fS.string,config:{},values:u},{name:"ogImage",type:m.fS.string,config:{},values:P}],length:y.length}}function p(h){const[y,v]=(0,t.Z)(async()=>{const i=await o(h),u=d(i);return new n.U(u)},[h],{loading:!0});return{state:y,getNews:v}}},74538:(H,T,e)=>{"use strict";e.d(T,{E:()=>ot});var t=e(52423),n=e(9085),c=e.n(n),s=e(68404),r=e(10025),g=e(72648),f=e(67487),o=e(39904),l=e(68545);const a=(0,s.memo)(function(Me){const{edge:ye,onClick:fe,onMouseEnter:he,onMouseLeave:De,hovering:Ae}=Me,{source:Ne,target:Ze}=ye,Se=(0,l.dM)({x1:Ne.x,y1:Ne.y,x2:Ze.x,y2:Ze.y},90);return s.createElement("g",{onClick:Ue=>fe(Ue,ye),style:{cursor:"pointer"},"aria-label":`Edge from: ${Ne.id} to: ${Ze.id}`},s.createElement("line",{strokeWidth:Ae?2:1,stroke:"#999",x1:Se.x1,y1:Se.y1,x2:Se.x2,y2:Se.y2,markerEnd:"url(#triangle)"}),s.createElement("line",{stroke:"transparent",x1:Se.x1,y1:Se.y1,x2:Se.x2,y2:Se.y2,strokeWidth:20,onMouseEnter:()=>{he(ye.id)},onMouseLeave:()=>{De(ye.id)}}))});function m(){return s.createElement("defs",null,s.createElement("marker",{id:"triangle",viewBox:"0 0 10 10",refX:"8",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:"10",markerHeight:"10",orient:"auto"},s.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#999"})))}const d=ge=>({mainGroup:t.css`
      pointer-events: none;
      font-size: 8px;
    `,background:t.css`
      fill: ${ge.components.tooltip.background};
    `,text:t.css`
      fill: ${ge.components.tooltip.text};
    `}),p=(0,s.memo)(function(Me){const{edge:ye}=Me,{source:fe,target:he}=ye,De=(0,l.dM)({x1:fe.x,y1:fe.y,x2:he.x,y2:he.y},90),Ae={x:De.x1+(De.x2-De.x1)/2,y:De.y1+(De.y2-De.y1)/2},Ne=(0,g.wW)(d);return s.createElement("g",{className:Ne.mainGroup},s.createElement("rect",{className:Ne.background,x:Ae.x-40,y:Ae.y-15,width:"80",height:"30",rx:"5"}),s.createElement("text",{className:Ne.text,x:Ae.x,y:Ae.y-5,textAnchor:"middle"},ye.mainStat),s.createElement("text",{className:Ne.text,x:Ae.x,y:Ae.y+10,textAnchor:"middle"},ye.secondaryStat))});var h=e(82897),y=e(66926),v=e(40538),i=e(78056),u=e(46920);function P(){return{item:t.css`
      label: LegendItem;
      flex-grow: 0;
    `,legend:t.css`
      label: Legend;
      pointer-events: all;
    `}}const E=function(Me){const{nodes:ye,onSort:fe,sort:he,sortable:De}=Me,Ae=(0,g.l4)(),Ne=(0,g.wW)(P),Ze=C(ye,Ae),Se=(0,s.useCallback)(Ue=>{fe({field:Ue.data.field,ascending:Ue.data.field===he?.field?!he?.ascending:!1})},[he,fe]);return s.createElement(i.l,{className:Ne.legend,displayMode:v.jK.List,placement:"bottom",items:Ze,itemRenderer:Ue=>s.createElement(s.Fragment,null,s.createElement(u.e,{item:Ue,className:Ne.item,onLabelClick:De?Se:void 0}),De&&(he?.field===Ue.data.field?s.createElement(o.J,{name:he.ascending?"arrow-up":"arrow-down"}):""))})};function C(ge,Me){if(!ge.length)return[];const ye=[ge[0].mainStat,ge[0].secondaryStat].filter(h.identity),fe=ge.find(he=>he.arcSections.length>0);return fe&&fe.arcSections[0].config?.color?.mode===y.S.Fixed&&ye.push(...new Set(ge.map(he=>he.arcSections).flat())),ge[0].color&&ye.push(ge[0].color),ye.map(he=>{const De={label:he.config.displayName||he.name,yAxis:0,data:{field:he}};return he.config.color?.mode===y.S.Fixed&&he.config.color?.fixedColor?De.color=Me.visualization.getColorByName(he.config.color?.fixedColor||""):he.config.color?.mode&&(De.gradient=he.config.color?.mode),De.color||De.gradient||(De.color=Me.visualization.getColorByName("")),De})}const b=40,S=ge=>({mainGroup:t.css`
    cursor: pointer;
    font-size: 10px;
  `,mainCircle:t.css`
    fill: ${ge.components.panel.background};
    stroke: ${ge.colors.border.strong};
  `,text:t.css`
    width: 50px;
    height: 50px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),M=(0,s.memo)(function(Me){const{marker:ye,onClick:fe}=Me,{node:he}=ye,De=(0,g.wW)(S);return he.x!==void 0&&he.y!==void 0?s.createElement("g",{"data-node-id":he.id,className:De.mainGroup,onClick:Ae=>{fe?.(Ae,ye)},"aria-label":`Hidden nodes marker: ${he.id}`},s.createElement("circle",{className:De.mainCircle,r:b,cx:he.x,cy:he.y}),s.createElement("g",null,s.createElement("foreignObject",{x:he.x-25,y:he.y-25,width:"50",height:"50"},s.createElement("div",{className:De.text},s.createElement("span",null,ye.count>100?">100":ye.count," nodes"))))):null});var x=e(35008),O=e.n(x),L=e(425);const B=40,w=(ge,Me)=>({mainGroup:t.css`
    cursor: pointer;
    font-size: 10px;
    transition: opacity 300ms;
    opacity: ${Me==="inactive"?.5:1};
  `,mainCircle:t.css`
    fill: ${ge.components.panel.background};
  `,hoverCircle:t.css`
    opacity: 0.5;
    fill: transparent;
    stroke: ${ge.colors.primary.text};
  `,text:t.css`
    fill: ${ge.colors.text.primary};
  `,titleText:t.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    background-color: ${O()(ge.colors.background.primary).setAlpha(.6).toHex8String()};
    width: 100px;
  `,statsText:t.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    width: 70px;
  `,textHovering:t.css`
    width: 200px;
    & span {
      background-color: ${O()(ge.colors.background.primary).setAlpha(.8).toHex8String()};
    }
  `}),R=(0,s.memo)(function(Me){const{node:ye,onMouseEnter:fe,onMouseLeave:he,onClick:De,hovering:Ae}=Me,Ne=(0,g.l4)(),Ze=w(Ne,Ae),Se=Ae==="active";return ye.x!==void 0&&ye.y!==void 0?s.createElement("g",{"data-node-id":ye.id,className:Ze.mainGroup,onMouseEnter:()=>{fe(ye.id)},onMouseLeave:()=>{he(ye.id)},onClick:Ue=>{De(Ue,ye)},"aria-label":`Node: ${ye.title}`},s.createElement("circle",{className:Ze.mainCircle,r:B,cx:ye.x,cy:ye.y}),Se&&s.createElement("circle",{className:Ze.hoverCircle,r:B-3,cx:ye.x,cy:ye.y,strokeWidth:2}),s.createElement(A,{node:ye}),s.createElement("g",{className:Ze.text},s.createElement("foreignObject",{x:ye.x-(Se?100:35),y:ye.y-15,width:Se?"200":"70",height:"40"},s.createElement("div",{className:c()(Ze.statsText,Se&&Ze.textHovering)},s.createElement("span",null,ye.mainStat&&(0,l.Ew)(ye.mainStat.config,ye.mainStat.values.get(ye.dataFrameRowIndex))),s.createElement("br",null),s.createElement("span",null,ye.secondaryStat&&(0,l.Ew)(ye.secondaryStat.config,ye.secondaryStat.values.get(ye.dataFrameRowIndex))))),s.createElement("foreignObject",{x:ye.x-(Se?100:50),y:ye.y+B+5,width:Se?"200":"100",height:"40"},s.createElement("div",{className:c()(Ze.titleText,Se&&Ze.textHovering)},s.createElement("span",null,ye.title),s.createElement("br",null),s.createElement("span",null,ye.subTitle))))):null});function A(ge){const{node:Me}=ge,ye=Me.arcSections.find(Ae=>Ae.values.get(Me.dataFrameRowIndex)>=1),fe=(0,g.l4)();if(ye)return s.createElement("circle",{fill:"none",stroke:fe.visualization.getColorByName(ye.config.color?.fixedColor||""),strokeWidth:2,r:B,cx:Me.x,cy:Me.y});const he=Me.arcSections.filter(Ae=>Ae.values.get(Me.dataFrameRowIndex)!==0);if(he.length===0)return s.createElement("circle",{fill:"none",stroke:Me.color?I(Me.color,Me.dataFrameRowIndex,fe):"gray",strokeWidth:2,r:B,cx:Me.x,cy:Me.y});const{elements:De}=he.reduce((Ae,Ne)=>{const Ze=Ne.config.color?.fixedColor||"",Se=Ne.values.get(Me.dataFrameRowIndex),Ue=s.createElement(U,{key:Ze,r:B,x:Me.x,y:Me.y,startPercent:Ae.percent,percent:Se+Ae.percent>1?1-Ae.percent:Se,color:fe.visualization.getColorByName(Ze),strokeWidth:2});return Ae.elements.push(Ue),Ae.percent=Ae.percent+Se,Ae},{elements:[],percent:0});return s.createElement(s.Fragment,null,De)}function U({r:ge,x:Me,y:ye,startPercent:fe,percent:he,color:De,strokeWidth:Ae=2}){const Ne=fe+he,Ze=Me+Math.sin(2*Math.PI*fe)*ge,Se=ye-Math.cos(2*Math.PI*fe)*ge,Ue=Me+Math.sin(2*Math.PI*Ne)*ge,Qe=ye-Math.cos(2*Math.PI*Ne)*ge,pt=he>.5?"1":"0";return s.createElement("path",{fill:"none",d:`M ${Ze} ${Se} A ${ge} ${ge} 0 ${pt} 1 ${Ue} ${Qe}`,stroke:De,strokeWidth:Ae})}function I(ge,Me,ye){return ge.config.color?(0,L.fD)(ge).getCalculator(ge,ye)(0,ge.values.get(Me)):ge.values.get(Me)}var N=e(52081),F=e(31403);function D(){return{wrapper:t.css`
      label: wrapper;
      pointer-events: all;
    `}}function Y(ge){const{config:Me,onConfigChange:ye,onPlus:fe,onMinus:he,disableZoomOut:De,disableZoomIn:Ae}=ge,[Ne,Ze]=(0,s.useState)(!1),Se=!1,Ue=(0,g.wW)(D);return s.createElement("div",{className:Ue.wrapper},s.createElement(N.wc,{spacing:"sm"},s.createElement(N.Lh,{spacing:"xs"},s.createElement(F.zx,{icon:"plus-circle",onClick:fe,size:"md",title:"Zoom in",variant:"secondary",disabled:Ae}),s.createElement(F.zx,{icon:"minus-circle",onClick:he,size:"md",title:"Zoom out",variant:"secondary",disabled:De})),s.createElement(N.Lh,{spacing:"xs"},s.createElement(F.zx,{icon:"code-branch",onClick:()=>ye({...Me,gridLayout:!1}),size:"md",title:"Default layout",variant:"secondary",disabled:!Me.gridLayout}),s.createElement(F.zx,{icon:"apps",onClick:()=>ye({...Me,gridLayout:!0}),size:"md",title:"Grid layout",variant:"secondary",disabled:Me.gridLayout}))),Se&&s.createElement(F.zx,{size:"xs",fill:"text",onClick:()=>Ze(Qe=>!Qe)},Ne?"Hide config":"Show config"),Se&&Ne&&Object.keys(Me).filter(Qe=>Qe!=="show").map(Qe=>s.createElement("div",{key:Qe},Qe,s.createElement("input",{style:{width:50},type:"number",value:Me[Qe],onChange:pt=>{ye({...Me,[Qe]:parseFloat(pt.target.value)})}}))))}var j=e(77303),K=e(98136),z=e(77410);const Z=()=>new z.q(new URL(e.p+e.u(1256),e.b));function ae(ge,Me,ye,fe,he){const[De,Ae]=(0,s.useMemo)(()=>{if(!(ge.length&&Me.length))return[{},{}];const Ne=Me.reduce((Se,Ue)=>(Se[Ue.source.id]=[...Se[Ue.source.id]??[],Ue],Se[Ue.target.id]=[...Se[Ue.target.id]??[],Ue],Se),{}),Ze=ge.reduce((Se,Ue)=>(Se[Ue.id]=Ue,Se),{});return[Ne,Ze]},[Me,ge]);return(0,s.useMemo)(()=>ge.length<=ye?{nodes:ge,edges:Me}:fe.gridLayout?oe(ge,ye,he):J(ge,Me,Ae,De,ye,he),[Me,De,ye,ge,Ae,he,fe.gridLayout])}function J(ge,Me,ye,fe,he,De){let Ae;De?Ae=[ye[De]]:(Ae=ge.filter(pt=>pt.incoming===0),Ae.length||(Ae=[ge[0]]));const{visibleNodes:Ne,markers:Ze}=Ee(he,Ae,ye,fe),Se=me(Ze,Ne,ye,fe),Ue=(0,h.fromPairs)(Se.map(pt=>[pt.node.id,pt]));for(const pt of Se)pt.count===1&&(delete Ue[pt.node.id],Ne[pt.node.id]=pt.node);const Qe=Me.filter(pt=>(Ne[pt.source.id]||Ue[pt.source.id])&&(Ne[pt.target.id]||Ue[pt.target.id]));return{nodes:Object.values(Ne),edges:Qe,markers:Object.values(Ue)}}function oe(ge,Me,ye){let fe=0,he=Me,De=[];if(ye){const Ae=ge.findIndex(Se=>Se.id===ye),Ne=Math.floor(Me/2);let Ze=Ne;fe=Ae-Ne,fe<0&&(Ze+=Math.abs(fe),fe=0),he=Ae+Ze+1,he>ge.length&&(fe>0&&(fe=Math.max(0,fe-(he-ge.length))),he=ge.length),fe>1&&De.push({node:ge[fe-1],count:fe}),ge.length-he>1&&De.push({node:ge[he],count:ge.length-he})}else ge.length-Me>1&&(De=[{node:ge[Me],count:ge.length-Me}]);return{nodes:ge.slice(fe,he),edges:[],markers:De}}function Ee(ge,Me,ye,fe){const he={};let De=[...Me];for(;Object.keys(he).length<ge&&De.length>0;){let Ne=De.shift();if(he[Ne.id])continue;he[Ne.id]=Ne;const Se=(fe[Ne.id]||[]).map(Ue=>{const Qe=Ue.source.id===Ne.id?Ue.target.id:Ue.source.id;return ye[Qe]});De=De.concat(Se)}const Ae=(0,h.uniq)(De.filter(Ne=>!he[Ne.id]));return{visibleNodes:he,markers:Ae}}function me(ge,Me,ye,fe){return ge.map(he=>{const De={};let Ae=0,Ne=[he];for(;Ne.length>0&&Ae<=101;){let Ze=Ne.shift();if(Me[Ze.id]||De[Ze.id])continue;De[Ze.id]||Ae++,De[Ze.id]=Ze;const Ue=(fe[Ze.id]||[]).map(Qe=>{const pt=Qe.source.id===Ze.id?Qe.target.id:Qe.source.id;return ye[pt]});Ne=Ne.concat(Ue)}return{node:he,count:Ae}})}const re={linkDistance:150,linkStrength:.5,forceX:2e3,forceXStrength:.02,forceCollide:100,tick:300,gridLayout:!1};function le(ge,Me,ye=re,fe,he,De){const[Ae,Ne]=(0,s.useState)([]),[Ze,Se]=(0,s.useState)([]),[Ue,Qe]=(0,s.useState)(!1),pt=(0,K.default)(),bt=(0,s.useRef)();(0,j.Z)(()=>{bt.current&&bt.current()}),(0,s.useEffect)(()=>{if(ge.length===0){Ne([]),Se([]),Qe(!1);return}Qe(!0);const kn=pe(ge,Me,({nodes:Jn,edges:qn})=>{pt()&&(Ne(Jn),Se(qn),Qe(!1))});return bt.current=kn,kn},[ge,Me,pt]);const[yt,Mt]=(0,s.useMemo)(()=>{if(ge.length===0)return[[],[]];const kn=ge.map(qn=>({...qn})),Jn=Me.map(qn=>({...qn}));return ee(kn,he,ye.sort),[kn,Jn]},[ye.sort,ge,Me,he]),{nodes:At,edges:Pt,markers:rn}=ae(ye.gridLayout?yt:Ae,ye.gridLayout?Mt:Ze,fe,ye,De),Fn=(0,s.useMemo)(()=>(0,l.Tz)([...At,...(rn||[]).map(kn=>kn.node)]),[At,rn]);return{nodes:At,edges:Pt,markers:rn,bounds:Fn,hiddenNodesCount:ge.length-At.length,loading:Ue}}function pe(ge,Me,ye){const fe=Z();return fe.onmessage=he=>{for(let De=0;De<ge.length;De++)he.data.nodes[De]={...ge[De],...he.data.nodes[De]};ye(he.data)},fe.postMessage({nodes:ge.map(he=>({id:he.id,incoming:he.incoming})),edges:Me,config:re}),()=>{fe.terminate()}}function ee(ge,Me,ye){const Ae=Math.min(Math.floor((Me-120)/140),ge.length),Ne=Math.floor((Ae-1)*120/2);ye&&ge.sort((Ze,Se)=>{const Ue=ye.field.values.get(Ze.dataFrameRowIndex),Qe=ye.field.values.get(Se.dataFrameRowIndex);return ye.ascending?Ue-Qe:Qe-Ue});for(const[Ze,Se]of ge.entries()){const Ue=Math.floor(Ze/Ae),Qe=Ze%Ae;Se.x=Qe*120-Ne,Se.y=-60+Ue*140}}var se=e(85506),Q=e(30909),G=e(14391),q=e(42044);function X(ge,Me,ye,fe,he,De){const[Ae,Ne]=(0,s.useState)(void 0),Ze=(0,s.useCallback)((Ue,Qe)=>{const[pt,bt]=fe.gridLayout?["Show in Graph layout",!1]:["Show in Grid layout",!0],yt=[{label:pt,onClick:Pt=>{De(Pt.id),he({...fe,gridLayout:bt}),Ne(void 0)}}],Mt=Me?ge(Me,Qe.dataFrameRowIndex):[],At=Be(Mt,Qe,yt);At&&Ne(de(s.createElement(ue,{node:Qe,nodes:Me}),At,Ue,Ne))},[fe,Me,ge,Ne,he,De]);return{onEdgeOpen:(0,s.useCallback)((Ue,Qe)=>{if(!ye)return;const pt=ge(ye,Qe.dataFrameRowIndex),bt=Be(pt,Qe);bt&&Ne(de(s.createElement(Oe,{edge:Qe,edges:ye}),bt,Ue,Ne))},[ye,ge,Ne]),onNodeOpen:Ze,MenuComponent:Ae}}function de(ge,Me,ye,fe){return s.createElement(Q.x,{renderHeader:()=>ge,renderMenuItems:Me,onClose:()=>fe(void 0),x:ye.pageX,y:ye.pageY})}function Be(ge,Me,ye){if(!(ge.length||ye?.length))return;const fe=He(ge);return()=>{let he=fe?.map((De,Ae)=>s.createElement(G.k,{key:`${De.label}${Ae}`,label:De.label},(De.items||[]).map(ke(Me))));return ye&&(he=[...ye.map(ke(Me)),...he]),he}}function ke(ge){return function(ye){return s.createElement(q.s,{key:ye.label,url:ye.url,label:ye.label,ariaLabel:ye.ariaLabel,onClick:ye.onClick?fe=>{fe?.ctrlKey||fe?.metaKey||fe?.shiftKey||(fe?.preventDefault(),fe?.stopPropagation(),ye.onClick?.(ge))}:void 0,target:"_self"})}}function He(ge){const Me="Open in Explore",ye=ge.reduce((fe,he)=>{let De,Ae;return he.title.indexOf("/")!==-1?(De=he.title.split("/")[0],Ae=he.title.split("/")[1],fe[De]=fe[De]||[],fe[De].push({l:he,newTitle:Ae})):(fe[Me]=fe[Me]||[],fe[Me].push({l:he})),fe},{});return Object.keys(ye).map(fe=>({label:fe,ariaLabel:fe,items:ye[fe].map(he=>({label:he.newTitle||he.l.title,ariaLabel:he.newTitle||he.l.title,url:he.l.href,onClick:he.l.onClick}))}))}function ue({node:ge,nodes:Me}){const ye=ge.dataFrameRowIndex;if(Me){const fe=(0,l.F)(Me);return s.createElement("div",null,fe.title&&s.createElement(Fe,{label:fe.title.config.displayName||fe.title.name,value:fe.title.values.get(ye)||""}),fe.subTitle&&s.createElement(Fe,{label:fe.subTitle.config.displayName||fe.subTitle.name,value:fe.subTitle.values.get(ye)||""}),fe.details.map(he=>s.createElement(Fe,{key:he.name,label:he.config.displayName||he.name,value:he.values.get(ye)||""})))}else return s.createElement("div",null,ge.title&&s.createElement(Fe,{label:"Title",value:ge.title}),ge.subTitle&&s.createElement(Fe,{label:"Subtitle",value:ge.subTitle}))}function Oe(ge){const Me=ge.edge.dataFrameRowIndex,ye=Ie((0,g.l4)()),fe=(0,l.lr)(ge.edges),he=fe.source?.values.get(Me)||"",De=fe.target?.values.get(Me)||"";return s.createElement("div",null,fe.source&&fe.target&&s.createElement("div",{className:ye.label},s.createElement("div",null,"Source \u2192 Target"),s.createElement("span",{className:ye.value},he," \u2192 ",De)),fe.details.map(Ae=>s.createElement(Fe,{key:Ae.name,label:Ae.config.displayName||Ae.name,value:Ae.values.get(Me)||""})))}function Fe({label:ge,value:Me}){const ye=(0,g.wW)(Ie);return s.createElement("div",{className:ye.label},s.createElement("div",null,ge),s.createElement("span",{className:ye.value},Me))}const Ie=ge=>({label:t.css`
      label: Label;
      line-height: 1.25;
      margin-bottom: ${ge.spacing(.5)};
      padding-left: ${ge.spacing(.25)};
      color: ${ge.colors.text.disabled};
      font-size: ${ge.typography.size.sm};
      font-weight: ${ge.typography.fontWeightMedium};
    `,value:t.css`
      label: Value;
      font-size: ${ge.typography.size.sm};
      font-weight: ${ge.typography.fontWeightMedium};
      color: ${ge.colors.text.primary};
      margin-top: ${ge.spacing(.25)};
      display: block;
    `});var we=e(64076);function Re(ge,Me,ye){const fe=(0,we.Z)(ge.gridLayout);let he;if(fe===!0&&!ge.gridLayout&&ye){const De=Me.find(Ae=>Ae.id===ye);De&&(he={x:-De.x,y:-De.y})}return he}function _e(ge){const[Me,ye]=(0,s.useState)(),fe=(0,K.default)();return(0,s.useEffect)(()=>{ge&&(ye(ge),setTimeout(()=>{fe()&&ye(void 0)},500))},[ge,fe]),Me}function et({scale:ge=1,bounds:Me,focus:ye}={}){const fe=(0,K.default)(),he=(0,s.useRef)(!1),De=(0,s.useRef)(0),Ae=(0,s.useRef)(null),Ne={x:0,y:0},Ze=(0,s.useMemo)(()=>({right:Me?-Me.left:1/0,left:Me?-Me.right:-1/0,bottom:Me?-Me.top:-1/0,top:Me?-Me.bottom:1/0}),[Me]),Se=(0,s.useRef)(Ne),Ue=(0,s.useRef)(Ne),Qe=(0,s.useRef)(Ne),[pt,bt]=(0,s.useState)({isPanning:!1,position:Ne});(0,s.useEffect)(()=>{const At=Ut=>{!he.current&&fe()&&(he.current=!0,Se.current=Je(Ut),Ue.current={...Qe.current},bt(ut=>({...ut,isPanning:!0})),Fn())},Pt=()=>{he.current&&fe()&&(he.current=!1,bt(Ut=>({...Ut,isPanning:!1})),kn())},rn=Ut=>{At(Ut),Jn(Ut)},Fn=()=>{document.addEventListener("mousemove",Jn),document.addEventListener("mouseup",Pt),document.addEventListener("touchmove",Jn),document.addEventListener("touchend",Pt)},kn=()=>{document.removeEventListener("mousemove",Jn),document.removeEventListener("mouseup",Pt),document.removeEventListener("touchmove",Jn),document.removeEventListener("touchend",Pt)},Jn=Ut=>{cancelAnimationFrame(De.current);const ut=Je(Ut);De.current=requestAnimationFrame(()=>{if(fe()&&Ae.current){let nt=ut.x-Se.current.x,vt=ut.y-Se.current.y;Qe.current={x:qe(Ue.current.x+nt/ge,Ze.left,Ze.right),y:qe(Ue.current.y+vt/ge,Ze.top,Ze.bottom)},bt(ht=>({...ht,position:{...Qe.current}}))}})},qn=Ae.current;return qn&&(qn.addEventListener("mousedown",rn),qn.addEventListener("touchstart",rn)),()=>{qn&&(qn.removeEventListener("mousedown",rn),qn.removeEventListener("touchstart",rn))}},[ge,Ze,fe]);const yt=(0,we.Z)(ye);(0,s.useEffect)(()=>{if(ye&&yt?.x!==ye.x&&yt?.y!==ye.y){const At={x:qe(ye.x,Ze.left,Ze.right),y:qe(ye.y,Ze.top,Ze.bottom)};bt({position:At,isPanning:!1}),Qe.current=At,Ue.current=At}},[ye,yt,Ze,Qe,Ue]);let Mt=pt.position;return ye&&yt?.x!==ye.x&&yt?.y!==ye.y&&(Mt=ye),{state:{...pt,position:{x:qe(Mt.x,Ze.left,Ze.right),y:qe(Mt.y,Ze.top,Ze.bottom)}},ref:Ae}}function qe(ge,Me,ye){return Math.min(Math.max(ge,Me??-1/0),ye??1/0)}function Je(ge){if(ge.changedTouches){const Me=ge;return{x:Me.changedTouches[0].clientX,y:Me.changedTouches[0].clientY}}else{const Me=ge;return{x:Me.clientX,y:Me.clientY}}}const lt={stepDown:ge=>ge/1.5,stepUp:ge=>ge*1.5,min:.13,max:2.25};function at({stepUp:ge,stepDown:Me,min:ye,max:fe}=lt){const he=(0,s.useRef)(null),[De,Ae]=(0,s.useState)(1),Ne=(0,s.useCallback)(()=>{De<(fe??1/0)&&Ae(ge(De))},[De,ge,fe]),Ze=(0,s.useCallback)(()=>{De>(ye??-1/0)&&Ae(Me(De))},[De,Me,ye]),Se=(0,s.useCallback)(function(Ue){if(Ue.ctrlKey||Ue.metaKey){if(Ue.preventDefault(),Ae(Math.min(Math.max(ye??-1/0,De+Math.min(Ue.deltaY,2)*-.01),fe??1/0)),Ue.deltaY<0){const Qe=De+Math.max(Ue.deltaY,-4)*-.015;Ae(Math.max(ye??-1/0,Qe))}else if(Ue.deltaY>0){const Qe=De+Math.min(Ue.deltaY,4)*-.015;Ae(Math.min(fe??1/0,Qe))}}},[ye,fe,De]);return(0,s.useEffect)(()=>{if(!he.current)return;const Ue=he.current;return Ue.addEventListener("wheel",Se,{passive:!1}),()=>{Ue&&Ue.removeEventListener("wheel",Se)}},[Se]),{onStepUp:Ne,onStepDown:Ze,scale:Math.max(Math.min(De,fe??1/0),ye??-1/0),isMax:De>=(fe??1/0),isMin:De<=(ye??-1/0),ref:he}}const Xe=ge=>({wrapper:t.css`
    label: wrapper;
    height: 100%;
    width: 100%;
    overflow: hidden;
    position: relative;
  `,svg:t.css`
    label: svg;
    height: 100%;
    width: 100%;
    overflow: visible;
    font-size: 10px;
    cursor: move;
  `,svgPanning:t.css`
    label: svgPanning;
    user-select: none;
  `,noDataMsg:t.css`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${ge.typography.h4.fontSize};
    color: ${ge.colors.text.secondary};
  `,mainGroup:t.css`
    label: mainGroup;
    will-change: transform;
  `,viewControls:t.css`
    label: viewControls;
    position: absolute;
    left: 2px;
    bottom: 3px;
    right: 0;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    pointer-events: none;
  `,legend:t.css`
    label: legend;
    background: ${ge.colors.background.secondary};
    box-shadow: ${ge.shadows.z1};
    padding-bottom: 5px;
    margin-right: 10px;
  `,viewControlsWrapper:t.css`
    margin-left: auto;
  `,alert:t.css`
    label: alert;
    padding: 5px 8px;
    font-size: 10px;
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
    border-radius: ${ge.shape.borderRadius()};
    align-items: center;
    position: absolute;
    top: 0;
    right: 0;
    background: ${ge.colors.warning.main};
    color: ${ge.colors.warning.contrastText};
  `,loadingWrapper:t.css`
    label: loadingWrapper;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),gt=200;function ot({getLinks:ge,dataFrames:Me,nodeLimit:ye}){const fe=ye||gt,{edges:he,nodes:De}=(0,se.Y)(Me),[Ae,{width:Ne,height:Ze}]=(0,r.Z)(),[Se,Ue]=(0,s.useState)(re),Qe=De[0],pt=he[0],bt=(0,s.useMemo)(()=>(0,l.HB)(Qe,pt),[pt,Qe]),{nodeHover:yt,setNodeHover:Mt,clearNodeHover:At,edgeHover:Pt,setEdgeHover:rn,clearEdgeHover:Fn}=Ke(),[kn,Jn]=(0,s.useState)([]);(0,s.useEffect)(()=>{let Oa=[];yt?Oa=(0,l.uX)(bt.nodes,bt.edges,yt):Pt&&(Oa=(0,l.MP)(bt.nodes,bt.edges,Pt)),Jn(Oa)},[yt,Pt,bt]);const[qn,Ut]=(0,s.useState)(),ut=(0,s.useCallback)((Oa,ss)=>Ut(ss.node.id),[Ut]),{nodes:nt,edges:vt,markers:ht,bounds:It,hiddenNodesCount:Ft,loading:en}=le(bt.nodes,bt.edges,Se,fe,Ne,qn),sn=Re(Se,nt,qn),{panRef:Mn,zoomRef:En,onStepUp:yn,onStepDown:Bn,isPanning:ea,position:Qn,scale:Kn,isMaxZoom:Ua,isMinZoom:pa}=Te(It,sn),{onEdgeOpen:va,onNodeOpen:za,MenuComponent:ja}=X(ge,Qe,pt,Se,Ue,Ut),Ea=(0,g.wW)(Xe),ma=(0,s.useCallback)(Oa=>{Ae(Oa),En.current=Oa},[Ae,En]),Xa=_e(qn);return s.createElement("div",{ref:ma,className:Ea.wrapper},en?s.createElement("div",{className:Ea.loadingWrapper},"Computing layout\xA0",s.createElement(f.$,null)):null,Me.length&&bt.nodes.length?s.createElement("svg",{ref:Mn,viewBox:`${-(Ne/2)} ${-(Ze/2)} ${Ne} ${Ze}`,className:c()(Ea.svg,ea&&Ea.svgPanning)},s.createElement("g",{className:Ea.mainGroup,style:{transform:`scale(${Kn}) translate(${Math.floor(Qn.x)}px, ${Math.floor(Qn.y)}px)`}},s.createElement(m,null),!Se.gridLayout&&s.createElement(ce,{edges:vt,nodeHoveringId:yt,edgeHoveringId:Pt,onClick:va,onMouseEnter:rn,onMouseLeave:Fn}),s.createElement(Ye,{nodes:nt,onMouseEnter:Mt,onMouseLeave:At,onClick:za,hoveringIds:kn||[Xa]}),s.createElement(mt,{markers:ht||[],onClick:ut}),!Se.gridLayout&&s.createElement(be,{edges:vt,nodeHoveringId:yt,edgeHoveringId:Pt}))):s.createElement("div",{className:Ea.noDataMsg},"No data"),s.createElement("div",{className:Ea.viewControls},nt.length?s.createElement("div",{className:Ea.legend},s.createElement(E,{sortable:Se.gridLayout,nodes:nt,sort:Se.sort,onSort:Oa=>{Ue({...Se,sort:Oa})}})):null,s.createElement("div",{className:Ea.viewControlsWrapper},s.createElement(Y,{config:Se,onConfigChange:Oa=>{Oa.gridLayout!==Se.gridLayout&&Ut(void 0),Ue(Oa)},onMinus:Bn,onPlus:yn,scale:Kn,disableZoomIn:Ua,disableZoomOut:pa}))),Ft>0&&s.createElement("div",{className:Ea.alert,"aria-label":"Nodes hidden warning"},s.createElement(o.J,{size:"sm",name:"info-circle"})," ",Ft," nodes are hidden for performance reasons."),ja)}const Ye=(0,s.memo)(function(Me){return s.createElement(s.Fragment,null,Me.nodes.map(ye=>s.createElement(R,{key:ye.id,node:ye,onMouseEnter:Me.onMouseEnter,onMouseLeave:Me.onMouseLeave,onClick:Me.onClick,hovering:!Me.hoveringIds||Me.hoveringIds.length===0?"default":Me.hoveringIds?.includes(ye.id)?"active":"inactive"})))}),mt=(0,s.memo)(function(Me){return s.createElement(s.Fragment,null,Me.markers.map(ye=>s.createElement(M,{key:"marker-"+ye.node.id,marker:ye,onClick:Me.onClick})))}),ce=(0,s.memo)(function(Me){return s.createElement(s.Fragment,null,Me.edges.map(ye=>s.createElement(a,{key:ye.id,edge:ye,hovering:ye.source.id===Me.nodeHoveringId||ye.target.id===Me.nodeHoveringId||Me.edgeHoveringId===ye.id,onClick:Me.onClick,onMouseEnter:Me.onMouseEnter,onMouseLeave:Me.onMouseLeave})))}),be=(0,s.memo)(function(Me){return s.createElement(s.Fragment,null,Me.edges.map((ye,fe)=>{const he=ye.source.id===Me.nodeHoveringId||ye.target.id===Me.nodeHoveringId||Me.edgeHoveringId===ye.id,De=ye.mainStat||ye.secondaryStat;return he&&De&&s.createElement(p,{key:ye.id,edge:ye})}))});function Te(ge,Me){const{scale:ye,onStepDown:fe,onStepUp:he,ref:De,isMax:Ae,isMin:Ne}=at(),{state:Ze,ref:Se}=et({scale:ye,bounds:ge,focus:Me}),{position:Ue,isPanning:Qe}=Ze;return{zoomRef:De,panRef:Se,position:Ue,isPanning:Qe,scale:ye,onStepDown:fe,onStepUp:he,isMaxZoom:Ae,isMinZoom:Ne}}function Ke(){const[ge,Me]=(0,s.useState)(void 0),ye=(0,s.useCallback)(()=>Me(void 0),[Me]),[fe,he]=(0,s.useState)(void 0),De=(0,s.useCallback)(()=>he(void 0),[he]);return{nodeHover:ge,setNodeHover:Me,clearNodeHover:ye,edgeHover:fe,setEdgeHover:he,clearEdgeHover:De}}},85506:(H,T,e)=>{"use strict";e.d(T,{Y:()=>n});var t=e(68404);function n(c){return(0,t.useMemo)(()=>c.reduce((s,r)=>(r.fields.filter(f=>f.name==="source").length?s.edges.push(r):s.nodes.push(r),s),{edges:[],nodes:[]}),[c])}},68545:(H,T,e)=>{"use strict";e.d(T,{Ee:()=>M,Ew:()=>i,F:()=>f,HB:()=>a,MP:()=>O,Tz:()=>S,dM:()=>g,lr:()=>o,uX:()=>L});var t=e(71895),n=e(5367),c=e(14582),s=e(19695),r=e(66926);function g(B,w){const R=B.x2-B.x1,A=B.y2-B.y1,U=Math.sqrt(R*R+A*A),I=Math.max((U-w)/U,0),N=R*I,F=A*I,D=R-N,Y=A-F,j=B.x1+D/2,K=B.y1+Y/2;return{x1:j,y1:K,x2:j+N,y2:K+F}}function f(B){const w={...B,fields:B.fields.map(A=>({...A,name:A.name.toLowerCase()}))},R=new t.N(w);return{id:R.getFieldByName(n.z.id.toLowerCase()),title:R.getFieldByName(n.z.title.toLowerCase()),subTitle:R.getFieldByName(n.z.subTitle.toLowerCase()),mainStat:R.getFieldByName(n.z.mainStat.toLowerCase()),secondaryStat:R.getFieldByName(n.z.secondaryStat.toLowerCase()),arc:l(B,n.z.arc),details:l(B,n.z.detail),color:R.getFieldByName(n.z.color)}}function o(B){const w={...B,fields:B.fields.map(A=>({...A,name:A.name.toLowerCase()}))},R=new t.N(w);return{id:R.getFieldByName(n.z.id.toLowerCase()),source:R.getFieldByName(n.z.source.toLowerCase()),target:R.getFieldByName(n.z.target.toLowerCase()),mainStat:R.getFieldByName(n.z.mainStat.toLowerCase()),secondaryStat:R.getFieldByName(n.z.secondaryStat.toLowerCase()),details:l(B,n.z.detail.toLowerCase())}}function l(B,w){return B.fields.filter(R=>R.name.match(new RegExp("^"+w)))}function a(B,w){if(!(w||B))return{nodes:[],edges:[]};if(B){const R=f(B);if(!R.id)throw new Error("id field is required for nodes data frame.");const A={};for(let I=0;I<R.id.values.length;I++){const N=R.id.values.get(I);A[N]=v(N,R,I)}let U=w?m(w,o(w)):[];for(const I of U)A[I.target].incoming++;return{nodes:Object.values(A),edges:U,legend:R.arc.map(I=>({color:I.config.color?.fixedColor??"",name:I.config.displayName||I.name}))}}else{w=w;const R={},A=o(w);let U=m(w,A);for(let N=0;N<U.length;N++){const F=U[N],{source:D,target:Y}=h(A,N);R[Y.id]=R[Y.id]||Y,R[D.id]=R[D.id]||D,d(A.mainStat)&&(R[Y.id].mainStatNumeric=(R[Y.id].mainStatNumeric??0)+A.mainStat.values.get(N)),d(A.secondaryStat)&&(R[Y.id].secondaryStatNumeric=(R[Y.id].secondaryStatNumeric??0)+A.secondaryStat.values.get(N)),R[F.target].incoming++}return{nodes:p(R,A),edges:U}}}function m(B,w){if(!w.id)throw new Error("id field is required for edges data frame.");return w.id.values.toArray().map((R,A)=>{const U=w.target?.values.get(A),I=w.source?.values.get(A);return{id:R,dataFrameRowIndex:A,source:I,target:U,mainStat:w.mainStat?i(w.mainStat.config,w.mainStat.values.get(A)):"",secondaryStat:w.secondaryStat?i(w.secondaryStat.config,w.secondaryStat.values.get(A)):""}})}function d(B){return B&&B.type===c.fS.number}function p(B,w){const R=new s.G,A=new s.G,U=d(w.secondaryStat)?{...w.secondaryStat,values:R}:void 0,I=d(w.mainStat)?{...w.mainStat,values:A}:void 0;return Object.values(B).map((N,F)=>{if(I||U){const D={...N};return I&&(D.mainStat=I,A.add(N.mainStatNumeric),D.dataFrameRowIndex=F),U&&(D.secondaryStat=U,R.add(N.secondaryStatNumeric),D.dataFrameRowIndex=F),D}return N})}function h(B,w){const R=B.target?.values.get(w),A=B.source?.values.get(w);return{target:y(R,w),source:y(A,w)}}function y(B,w){return{id:B,title:B,subTitle:"",dataFrameRowIndex:w,incoming:0,arcSections:[]}}function v(B,w,R){return{id:B,title:w.title?.values.get(R)||"",subTitle:w.subTitle?w.subTitle.values.get(R):"",dataFrameRowIndex:R,incoming:0,mainStat:w.mainStat,secondaryStat:w.secondaryStat,arcSections:w.arc,color:w.color}}function i(B,w){if(typeof w=="string")return w;{const R=B.decimals||2;return Number.isFinite(w)?w.toFixed(R)+(B.unit?" "+B.unit:""):""}}function u(B){const w=E();for(let R=0;R<B;R++)w.add(P(R));return w}function P(B){return{id:B.toString(),title:`service:${B}`,subtitle:"service",arc__success:.5,arc__errors:.5,mainstat:.1,secondarystat:2,color:.5}}function E(){const B={[NodeGraphDataFrameFieldNames.id]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.title]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.subTitle]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:new ArrayVector,type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:new ArrayVector,type:FieldType.number},[NodeGraphDataFrameFieldNames.arc+"success"]:{values:new ArrayVector,type:FieldType.number,config:{color:{fixedColor:"green"}}},[NodeGraphDataFrameFieldNames.arc+"errors"]:{values:new ArrayVector,type:FieldType.number,config:{color:{fixedColor:"red"}}},[NodeGraphDataFrameFieldNames.color]:{values:new ArrayVector,type:FieldType.number,config:{color:{mode:"continuous-GrYlRd"}}}};return new MutableDataFrame({name:"nodes",fields:Object.keys(B).map(w=>({...B[w],name:w}))})}function C(B){const w=b();for(const R of B)w.add({id:R.source+"--"+R.target,...R});return w}function b(){const B={[NodeGraphDataFrameFieldNames.id]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.source]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.target]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:new ArrayVector,type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:new ArrayVector,type:FieldType.number}};return new MutableDataFrame({name:"edges",fields:Object.keys(B).map(w=>({...B[w],name:w}))})}function S(B){if(B.length===0)return{top:0,right:0,bottom:0,left:0,center:{x:0,y:0}};const w=B.reduce((U,I)=>(I.x>U.right&&(U.right=I.x),I.x<U.left&&(U.left=I.x),I.y>U.bottom&&(U.bottom=I.y),I.y<U.top&&(U.top=I.y),U),{top:1/0,right:-1/0,bottom:-1/0,left:1/0}),R=w.top+(w.bottom-w.top)/2,A=w.left+(w.right-w.left)/2;return{...w,center:{x:A,y:R}}}function M(B,w){let R=B.filter(A=>!!(A.meta?.preferredVisualisationType==="nodeGraph"||A.name==="nodes"||A.name==="edges"||A.refId==="nodes"||A.refId==="edges"||new t.N(A).getFieldByName(n.z.id)));return w&&(R=x(R,w)),R}const x=(B,w)=>B.map(R=>{if(new t.N(R).getFieldByName(n.z.source.toLowerCase())){if(w?.edges?.mainStatUnit){const U=R.fields.find(I=>I.name.toLowerCase()===n.z.mainStat);U&&(U.config={...U.config,unit:w.edges.mainStatUnit})}if(w?.edges?.secondaryStatUnit){const U=R.fields.find(I=>I.name.toLowerCase()===n.z.secondaryStat);U&&(U.config={...U.config,unit:w.edges.secondaryStatUnit})}}else{if(w?.nodes?.mainStatUnit){const U=R.fields.find(I=>I.name.toLowerCase()===n.z.mainStat);U&&(U.config={...U.config,unit:w.nodes.mainStatUnit})}if(w?.nodes?.secondaryStatUnit){const U=R.fields.find(I=>I.name.toLowerCase()===n.z.secondaryStat);U&&(U.config={...U.config,unit:w.nodes.secondaryStatUnit})}if(w?.nodes?.arcs?.length)for(const U of w.nodes.arcs){const I=R.fields.find(N=>N.name.toLowerCase()===U.field);I&&U.color&&(I.config={...I.config,color:{fixedColor:U.color,mode:r.S.Fixed}})}}return R}),O=(B,w,R)=>{const A=w.find(U=>U.id===R);return A?[...new Set(B.filter(U=>A.source===U.id||A.target===U.id).map(U=>U.id))]:[]},L=(B,w,R)=>{const A=B.find(U=>U.id===R);if(A){const U=w.filter(I=>I.source===A.id||I.target===A.id);return[...new Set(U.flatMap(I=>B.filter(N=>I.source===N.id||I.target===N.id).map(N=>N.id)))]}return[]}},30383:(H,T,e)=>{"use strict";e.d(T,{h:()=>f,j:()=>g});var t=e(35363),n=e(21760),c=e(89890),s=e(29076),r=e(40538);function g(o,l=!0){const a=["Value options"];o.addRadio({path:"reduceOptions.values",name:"Show",description:"Calculate a single value per column or series or show each row",settings:{options:[{value:!1,label:"Calculate"},{value:!0,label:"All values"}]},category:a,defaultValue:!1}),o.addNumberInput({path:"reduceOptions.limit",name:"Limit",description:"Max number of rows to display",category:a,settings:{placeholder:"25",integer:!0,min:1,max:5e3},showIf:m=>m.reduceOptions.values===!0}),o.addCustomEditor({id:"reduceOptions.calcs",path:"reduceOptions.calcs",name:"Calculation",description:"Choose a reducer function / calculation",category:a,editor:t.S.get("stats-picker").editor,defaultValue:[n.gz.lastNotNull],showIf:m=>m.reduceOptions.values===!1}),l&&o.addSelect({path:"reduceOptions.fields",name:"Fields",description:"Select the fields that should be included in the panel",category:a,settings:{allowCustomValue:!0,options:[],getOptions:async m=>{const d=[{value:"",label:"Numeric Fields"},{value:"/.*/",label:"All Fields"}];if(m&&m.data)for(const p of m.data)for(const h of p.fields){const y=(0,c.C)(h,p,m.data),v=`/^${(0,s.GE)(y)}$/`;d.push({value:v,label:y})}return Promise.resolve(d)}},defaultValue:""})}function f(o,l){o.addRadio({path:"orientation",name:"Orientation",description:"Layout orientation",category:l,settings:{options:[{value:r.wm.Auto,label:"Auto"},{value:r.wm.Horizontal,label:"Horizontal"},{value:r.wm.Vertical,label:"Vertical"}]},defaultValue:r.wm.Auto})}},98967:(H,T,e)=>{"use strict";e.r(T),e.d(T,{plugin:()=>b});var t=e(48513),n=e(40538),c=e(25272),s=e(76327),r=e(66926);const g=(S,M,x)=>{const O=(0,s.ZH)(S,M,x);if(x.angular&&(M==="singlestat"||M==="grafana-singlestat-panel")){const L=x.angular;if(O.graphMode=n.IG.None,L.sparkline&&L.sparkline.show&&(O.graphMode=n.IG.Area),L.colorBackground)O.colorMode=n.pc.Background;else if(L.colorValue)O.colorMode=n.pc.Value;else if(O.colorMode=n.pc.None,L.sparkline?.lineColor&&O.graphMode===n.IG.Area){const B=S.fieldConfig??{};B.defaults.color={mode:r.S.Fixed,fixedColor:L.sparkline.lineColor},S.fieldConfig=B}L.valueName==="name"&&(O.textMode=n.jG.Name)}return O};var f=e(82897),o=e(68404),l=e(14582),a=e(17128),m=e(36998),d=e(57426),p=e(18543),h=e(4387),y=e(47694);class v extends o.PureComponent{constructor(){super(...arguments),this.renderComponent=(M,x)=>{const{timeRange:O,options:L}=this.props,{value:B,alignmentFactors:w,width:R,height:A,count:U,orientation:I}=M,{openMenu:N,targetClassName:F}=x;let D=B.sparkline;return D&&(D.timeRange=O),o.createElement(d.w6,{value:B.display,count:U,sparkline:D,colorMode:L.colorMode,graphMode:L.graphMode,justifyMode:L.justifyMode,textMode:this.getTextMode(),alignmentFactors:w,parentOrientation:I,text:L.text,width:R,height:A,theme:y.vc.theme2,onClick:N,className:F})},this.renderValue=M=>{const{value:x}=M,{getLinks:O,hasLinks:L}=x;return L&&O?o.createElement(p.V,{links:O},B=>this.renderComponent(M,B)):this.renderComponent(M,{})},this.getValues=()=>{const{data:M,options:x,replaceVariables:O,fieldConfig:L,timeZone:B}=this.props;let w;for(let R of M.series)for(let A of R.fields){let{config:U}=A;if(A.type===l.fS.number){if(A.state?.range)continue;!w&&(!(0,f.isNumber)(U.min)||!(0,f.isNumber)(U.max))&&(w=(0,m.Xu)(M.series));const I=U.min??w.min,N=U.max??w.max;A.state=A.state??{},A.state.range={min:I,max:N,delta:N-I}}}return(0,a.nG)({fieldConfig:L,reduceOptions:x.reduceOptions,replaceVariables:O,theme:y.vc.theme2,data:M.series,sparkline:x.graphMode!==n.IG.None,timeZone:B})}}getTextMode(){const{options:M,fieldConfig:x,title:O}=this.props;return M.textMode===n.jG.Auto&&(x.defaults.displayName||!O)?n.jG.ValueAndName:M.textMode}render(){const{height:M,options:x,width:O,data:L,renderCounter:B}=this.props;return o.createElement(h.Q,{getValues:this.getValues,getAlignmentFactors:a.sg,renderValue:this.renderValue,width:O,height:M,source:L,itemSpacing:3,renderCounter:B,autoGrid:!0,orientation:x.orientation})}}var i=e(30383);const u=Object.freeze([0,0]),P={colorMode:n.pc.Value,graphMode:n.IG.Area,justifyMode:n.ap.Auto,textMode:n.jG.Auto};var E=e(26410);class C{getSuggestionsForData(M){const{dataSummary:x}=M;if(!x.hasData)return;const O=M.getListAppender({name:E.y.Stat,pluginId:"stat",options:{},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:L=>{L.options.reduceOptions.values&&(L.options.reduceOptions.limit=1)}}});x.hasStringField&&x.hasNumberField&&x.frameCount===1&&x.rowCountTotal<10&&(O.append({name:E.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"}}}),O.append({name:E.y.StatColoredBackground,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.pc.Background}})),x.stringFieldCount===1&&x.frameCount===1&&x.rowCountTotal<10&&x.fieldCount===1&&O.append({name:E.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.pc.None}}),x.hasNumberField&&x.hasTimeField&&(O.append({options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),O.append({name:E.y.StatColoredBackground,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},graphMode:n.IG.None,colorMode:n.pc.Background}}))}}const b=new t.c(v).useFieldConfig().setPanelOptions(S=>{const M=["Stat styles"];(0,i.j)(S),(0,i.h)(S,M),c.Z(S),S.addSelect({path:"textMode",name:"Text mode",description:"Control if name and value is displayed or just name",category:M,settings:{options:[{value:n.jG.Auto,label:"Auto"},{value:n.jG.Value,label:"Value"},{value:n.jG.ValueAndName,label:"Value and name"},{value:n.jG.Name,label:"Name"},{value:n.jG.None,label:"None"}]},defaultValue:P.textMode}),S.addRadio({path:"colorMode",name:"Color mode",defaultValue:n.pc.Value,category:M,settings:{options:[{value:n.pc.None,label:"None"},{value:n.pc.Value,label:"Value"},{value:n.pc.Background,label:"Background"}]}}).addRadio({path:"graphMode",name:"Graph mode",description:"Stat panel graph / sparkline mode",category:M,defaultValue:P.graphMode,settings:{options:[{value:n.IG.None,label:"None"},{value:n.IG.Area,label:"Area"}]}}).addRadio({path:"justifyMode",name:"Text alignment",defaultValue:P.justifyMode,category:M,settings:{options:[{value:n.ap.Auto,label:"Auto"},{value:n.ap.Center,label:"Center"}]}})}).setNoPadding().setPanelChangeHandler(g).setSuggestionsSupplier(new C).setMigrationHandler(s.rD)},66683:(H,T,e)=>{"use strict";e.d(T,{j:()=>l});var t=e(68404),n=e(52081),c=e(2594),s=e(53217),r=e(8180);const g=[{label:"Solid",value:"solid"},{label:"Dash",value:"dash"},{label:"Dots",value:"dot"}],f=["10, 10","10, 15","10, 20","10, 25","10, 30","10, 40","15, 10","20, 10","25, 10","30, 10","40, 10","50, 10","5, 10","30, 3, 3"].map(m=>({label:m,value:m})),o=["0, 10","0, 20","0, 30","0, 40","0, 3, 3"].map(m=>({label:m,value:m})),l=({value:m,onChange:d})=>{const p=(0,t.useMemo)(()=>m?.fill==="dash"?f:o,[m]),h=(0,t.useMemo)(()=>{if(!m?.dash?.length)return p[0];const y=m.dash?.join(", "),v=p.find(i=>i.value===y);return v||{label:y,value:y}},[m,p]);return t.createElement(n.Lh,null,t.createElement(c.S,{value:m?.fill||"solid",options:g,onChange:y=>{let v;y==="dot"?v=a(o[0].value):y==="dash"&&(v=a(f[0].value)),d({...m,fill:y,dash:v})}}),m?.fill&&m?.fill!=="solid"&&t.createElement(t.Fragment,null,t.createElement(s.Ph,{allowCustomValue:!0,options:p,value:h,width:20,onChange:y=>{d({...m,dash:a(y.value??"")})},formatCreateLabel:y=>`Segments: ${a(y).join(", ")}`}),t.createElement("div",null,"\xA0",t.createElement("a",{title:"The input expects a segment list",href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Parameters",target:"_blank",rel:"noreferrer"},t.createElement(r.h,{name:"question-circle"})))))};function a(m){const d=[];for(const p of m.split(/(?:,| )+/)){const h=Number.parseInt(p,10);isNaN(h)||d.push(h)}return d}},49616:(H,T,e)=>{"use strict";e.d(T,{c:()=>f});var t=e(68404),n=e(33180),c=e(52081),s=e(2594),r=e(46967);const g=[{label:"Never",value:!1},{label:"Always",value:!0},{label:"Threshold",value:36e5}],f=({value:o,onChange:l})=>{const a=typeof o=="number",m=a?n.secondsToHms(o/1e3):void 0;g[2].value=a?o:36e5;const d=y=>{let v=!1;if(y)try{v=n.intervalToSeconds(y)*1e3}catch(i){console.warn("ERROR",i)}l(v)},p=y=>{y.key==="Enter"&&d(y.target.value)},h=y=>{d(y.target.value)};return t.createElement(c.Lh,null,t.createElement(s.S,{value:o,options:g,onChange:l}),a&&t.createElement(r.I,{autoFocus:!1,placeholder:"never",width:10,defaultValue:m,onKeyDown:p,onBlur:h,prefix:t.createElement("div",null,"<"),spellCheck:!1}))}},74855:(H,T,e)=>{"use strict";e.d(T,{F:()=>c});var t=e(68404),n=e(53217);const c=({item:s,value:r,onChange:g,id:f})=>{const o=(0,t.useCallback)(l=>{g({mode:l.value})},[g]);return t.createElement(n.Ph,{inputId:f,value:r.mode,options:s.settings.options,onChange:o})}},56703:(H,T,e)=>{"use strict";e.d(T,{F:()=>y,r:()=>p});var t=e(68061),n=e(66926),c=e(14582),s=e(78798),r=e(40538),g=e(26372),f=e(22110),o=e(34315),l=e(91511),a=e(66683),m=e(49616),d=e(74855);const p={drawStyle:r.l8.Line,lineInterpolation:r.KC.Linear,lineWidth:1,fillOpacity:0,gradientMode:r.FI.None,barAlignment:r.pu.Center,stacking:{mode:r.o0.None,group:"A"},axisGridShow:!0,axisCenteredZero:!1},h=["Graph styles"];function y(v){return{standardOptions:{[t.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:n.S.PaletteClassic}}},useCustomConfig:i=>{i.addRadio({path:"drawStyle",name:"Style",category:h,defaultValue:v.drawStyle,settings:{options:g.q.drawStyle}}).addRadio({path:"lineInterpolation",name:"Line interpolation",category:h,defaultValue:v.lineInterpolation,settings:{options:g.q.lineInterpolation},showIf:u=>u.drawStyle===r.l8.Line}).addRadio({path:"barAlignment",name:"Bar alignment",category:h,defaultValue:v.barAlignment,settings:{options:g.q.barAlignment},showIf:u=>u.drawStyle===r.l8.Bars}).addSliderInput({path:"lineWidth",name:"Line width",category:h,defaultValue:v.lineWidth,settings:{min:0,max:10,step:1,ariaLabelForHandle:"Line width"},showIf:u=>u.drawStyle!==r.l8.Points}).addSliderInput({path:"fillOpacity",name:"Fill opacity",category:h,defaultValue:v.fillOpacity,settings:{min:0,max:100,step:1,ariaLabelForHandle:"Fill opacity"},showIf:u=>u.drawStyle!==r.l8.Points}).addRadio({path:"gradientMode",name:"Gradient mode",category:h,defaultValue:g.q.fillGradient[0].value,settings:{options:g.q.fillGradient},showIf:u=>u.drawStyle!==r.l8.Points}).addFieldNamePicker({path:"fillBelowTo",name:"Fill below to",category:h,hideFromDefaults:!0,settings:{filter:u=>u.type===c.fS.number}}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",category:h,showIf:u=>u.drawStyle===r.l8.Line,editor:a.j,override:a.j,process:s.kG,shouldApply:u=>u.type===c.fS.number}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",category:h,defaultValue:!1,editor:m.c,override:m.c,showIf:u=>u.drawStyle===r.l8.Line,shouldApply:u=>u.type!==c.fS.time,process:s.kG}).addRadio({path:"showPoints",name:"Show points",category:h,defaultValue:g.q.showPoints[0].value,settings:{options:g.q.showPoints},showIf:u=>u.drawStyle!==r.l8.Points}).addSliderInput({path:"pointSize",name:"Point size",category:h,defaultValue:5,settings:{min:1,max:40,step:1,ariaLabelForHandle:"Point size"},showIf:u=>u.showPoints!==r.Jp.Never||u.drawStyle===r.l8.Points}),f.V(i,v.stacking,h),i.addSelect({category:h,name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:r.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:r.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),o.r(i,v),l.B(i),i.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:r.i3.Off},settings:{options:g.q.thresholdsDisplayModes},editor:d.F,override:d.F,process:s.kG,shouldApply:()=>!0})}}}},63073:()=>{"use strict";let H=window.matchMedia;window.matchMedia=T=>{let e=H(T);return e.addEventListener||(e.addEventListener=(t,n)=>{e.addListener(n)},e.removeEventListener=(t,n)=>{e.removeListener(n)}),e}},10323:(H,T,e)=>{"use strict";e.d(T,{gV:()=>es,eU:()=>tr});var t=e(68404),n=e(70356),c=e(31953),s=e(44407),r=e(52423),g=e(52081),f=e(31403),o=e(36578),l=e(47694),a=e(16534),m=e(86824),d=e(5080),p=e(80472),h=e(82897),y=e(66847),v=e(72648),i=e(39904);const u=()=>{const Xt=!!l.ZP.oauth;return{saml:{bgColor:"#464646",enabled:l.ZP.samlEnabled,name:l.ZP.samlName||y.bm,icon:"key-skeleton-alt"},google:{bgColor:"#e84d3c",enabled:Xt&&Boolean(l.ZP.oauth.google),name:"Google",icon:"google"},azuread:{bgColor:"#2f2f2f",enabled:Xt&&Boolean(l.ZP.oauth.azuread),name:"Microsoft",icon:"microsoft"},github:{bgColor:"#464646",enabled:Xt&&Boolean(l.ZP.oauth.github),name:"GitHub",icon:"github"},gitlab:{bgColor:"#fc6d26",enabled:Xt&&Boolean(l.ZP.oauth.gitlab),name:"GitLab",icon:"gitlab"},grafanacom:{bgColor:"#262628",enabled:Xt&&Boolean(l.ZP.oauth.grafana_com),name:"Grafana.com",icon:"grafana",hrefName:"grafana_com"},okta:{bgColor:"#2f2f2f",enabled:Xt&&Boolean(l.ZP.oauth.okta),name:l.ZP.oauth?.okta?.name||"Okta",icon:l.ZP.oauth?.okta?.icon??"okta"},oauth:{bgColor:"#262628",enabled:Xt&&Boolean(l.ZP.oauth.generic_oauth),name:l.ZP.oauth?.generic_oauth?.name||"OAuth",icon:l.ZP.oauth?.generic_oauth?.icon??"signin",hrefName:"generic_oauth"}}},P=Xt=>({button:r.css`
      color: #d8d9da;
      position: relative;
    `,buttonIcon:r.css`
      position: absolute;
      left: ${Xt.spacing(1)};
      top: 50%;
      transform: translateY(-50%);
    `,divider:{base:r.css`
        color: ${Xt.colors.text};
        display: flex;
        margin-bottom: ${Xt.spacing(1)};
        justify-content: space-between;
        text-align: center;
        width: 100%;
      `,line:r.css`
        width: 100px;
        height: 10px;
        border-bottom: 1px solid ${Xt.colors.text};
      `}}),E=()=>{const Xt=(0,v.wW)(P);return t.createElement(t.Fragment,null,t.createElement("div",{className:Xt.divider.base},t.createElement("div",null,t.createElement("div",{className:Xt.divider.line})),t.createElement("div",null,t.createElement("span",null,!l.ZP.disableLoginForm&&t.createElement("span",null,"or"))),t.createElement("div",null,t.createElement("div",{className:Xt.divider.line}))),t.createElement("div",{className:"clearfix"}))};function C(Xt,kt,vn){return(0,r.cx)(kt.button,r.css`
      background-color: ${Xt.bgColor};
      color: ${vn.colors.getContrastText(Xt.bgColor)};

      &:hover {
        background-color: ${vn.colors.emphasize(Xt.bgColor,.15)};
        box-shadow: ${vn.shadows.z1};
      }
    `)}const b=()=>{const Xt=(0,h.pickBy)(u(),Wn=>Wn.enabled),kt=Object.keys(Xt).length>0,vn=(0,v.l4)(),An=(0,v.wW)(P);return kt?t.createElement(g.wc,null,t.createElement(E,null),Object.entries(Xt).map(([Wn,Xn])=>t.createElement(f.Qj,{key:Wn,className:C(Xn,An,vn),href:`login/${Xn.hrefName?Xn.hrefName:Wn}`,target:"_self",fullWidth:!0},t.createElement(i.J,{className:An.buttonIcon,name:Xn.icon}),"Sign in with ",Xn.name))):null},S=()=>{const Xt=(0,l.iE)().verifyEmailEnabled?`${(0,l.iE)().appSubUrl}/verify`:`${(0,l.iE)().appSubUrl}/signup`,kt=(0,r.css)({paddingTop:"16px"});return t.createElement(g.wc,null,t.createElement("div",{className:kt},"New to Grafana?"),t.createElement(f.Qj,{className:r.css`
          width: 100%;
          justify-content: center;
        `,href:Xt,variant:"secondary",fill:"outline"},"Sign up"))},M=r.css`
  padding: 0;
  margin-top: 4px;
`,x=()=>(document.title=o.c.AppTitle,t.createElement(p.dd,null,t.createElement(m.Z,null,({loginHint:Xt,passwordHint:kt,disableLoginForm:vn,disableUserSignUp:An,login:Wn,isLoggingIn:Xn,changePassword:Ha,skipPasswordChange:Qa,isChangingPassword:ka})=>t.createElement(t.Fragment,null,!ka&&t.createElement(p.$s,null,!vn&&t.createElement(d.U,{onSubmit:Wn,loginHint:Xt,passwordHint:kt,isLoggingIn:Xn},t.createElement(g.Lh,{justify:"flex-end"},t.createElement(f.Qj,{className:M,fill:"text",href:`${l.ZP.appSubUrl}/user/password/send-reset-email`},"Forgot your password?"))),t.createElement(b,null),!An&&t.createElement(S,null)),ka&&t.createElement(p.$s,null,t.createElement(a.G,{onSubmit:Ha,onSkip:()=>Qa()}))))));var O=e(82002),L=e(36635),B=e(66121),w=e(79396),R=e(77582),A=e(81168),U=e(38849);const I="dddd YYYY-MM-DD HH:mm zz",N="/admin/ldap";class F extends t.PureComponent{constructor(){super(...arguments),this.onUserSync=()=>{this.props.onUserSync()}}render(){const{ldapSyncInfo:kt,user:vn}=this.props,Wn=kt&&kt.nextSync?(0,U.dq)(kt.nextSync,{format:I}):"",Xn=`${N}?user=${vn&&vn.login}`,Ha=R.Vt.hasPermission(A.AccessControlAction.LDAPUsersRead),Qa=R.Vt.hasPermission(A.AccessControlAction.LDAPUsersSync);return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"LDAP Synchronisation"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",null,"External sync"),t.createElement("td",null,"User synced via LDAP. Some changes must be done in LDAP or mappings."),t.createElement("td",null,t.createElement("span",{className:"label label-tag"},"LDAP"))),t.createElement("tr",null,kt.enabled?t.createElement(t.Fragment,null,t.createElement("td",null,"Next scheduled synchronization"),t.createElement("td",{colSpan:2},Wn)):t.createElement(t.Fragment,null,t.createElement("td",null,"Next scheduled synchronization"),t.createElement("td",{colSpan:2},"Not enabled")))))),t.createElement("div",{className:"gf-form-button-row"},Qa&&t.createElement(f.zx,{variant:"secondary",onClick:this.onUserSync},"Sync user"),Ha&&t.createElement(f.Qj,{variant:"secondary",href:Xn},"Debug LDAP Mapping"))))}}var D=e(7804),Y=e(71657),j=e(35029),K=e(24799),z=e(61860),Z=e(66226),ae=e(11630),J=e(671),oe=e(53217),Ee=e(29930);function me({onSelected:Xt,className:kt,inputId:vn,autoFocus:An,excludeOrgs:Wn}){(0,t.useEffect)(()=>{An&&vn&&document.getElementById(vn)?.focus()},[An,vn]);const[Xn,Ha]=(0,J.Z)(async()=>{const ka=(await(0,Ee.i)().get("/api/orgs")).map(ys=>({value:{id:ys.id,name:ys.name},label:ys.name}));if(Wn){let ys=Wn.map(Ga=>Ga.orgId);return ka.filter(Ga=>!ys.includes(Ga.value.id))}else return ka});return t.createElement(oe.qb,{inputId:vn,className:kt,isLoading:Xn.loading,defaultOptions:!0,isSearchable:!1,loadOptions:Ha,onChange:Xt,placeholder:"Select organization",noOptionsMessage:"No organizations found"})}var re=e(65135);class le extends t.PureComponent{constructor(){super(...arguments),this.addToOrgButtonRef=t.createRef(),this.state={showAddOrgModal:!1},this.showOrgAddModal=()=>{this.setState({showAddOrgModal:!0})},this.dismissOrgAddModal=()=>{this.setState({showAddOrgModal:!1},()=>{this.addToOrgButtonRef.current?.focus()})}}render(){const{user:kt,orgs:vn,isExternalUser:An,onOrgRoleChange:Wn,onOrgRemove:Xn,onOrgAdd:Ha}=this.props,{showAddOrgModal:Qa}=this.state,ka=r.css`
      margin-top: 0.8rem;
    `,ys=R.Vt.hasPermission(A.AccessControlAction.OrgUsersAdd)&&!An;return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Organizations"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,vn.map((xs,Ga)=>t.createElement(se,{key:`${xs.orgId}-${Ga}`,isExternalUser:An,user:kt,org:xs,onOrgRoleChange:Wn,onOrgRemove:Xn}))))),t.createElement("div",{className:ka},ys&&t.createElement(f.zx,{variant:"secondary",onClick:this.showOrgAddModal,ref:this.addToOrgButtonRef},"Add user to organization")),t.createElement(G,{user:kt,userOrgs:vn,isOpen:Qa,onOrgAdd:Ha,onDismiss:this.dismissOrgAddModal})))}}const pe=(0,D.B)(Xt=>({removeButton:r.css`
      margin-right: 0.6rem;
      text-decoration: underline;
      color: ${Xt.v1.palette.blue95};
    `,label:r.css`
      font-weight: 500;
    `,disabledTooltip:r.css`
      display: flex;
    `,tooltipItem:r.css`
      margin-left: 5px;
    `,tooltipItemLink:r.css`
      color: ${Xt.v1.palette.blue95};
    `,rolePickerWrapper:r.css`
      display: flex;
    `,rolePicker:r.css`
      flex: auto;
      margin-right: ${Xt.spacing(1)};
    `}));class ee extends t.PureComponent{constructor(){super(...arguments),this.state={currentRole:this.props.org.role,isChangingRole:!1,roleOptions:[]},this.onOrgRemove=async()=>{const{org:kt}=this.props;this.props.onOrgRemove(kt.orgId)},this.onChangeRoleClick=()=>{const{org:kt}=this.props;this.setState({isChangingRole:!0,currentRole:kt.role})},this.onOrgRoleChange=kt=>{this.setState({currentRole:kt})},this.onOrgRoleSave=()=>{this.props.onOrgRoleChange(this.props.org.orgId,this.state.currentRole)},this.onCancelClick=()=>{this.setState({isChangingRole:!1})},this.onBasicRoleChange=kt=>{this.props.onOrgRoleChange(this.props.org.orgId,kt)}}componentDidMount(){R.Vt.licensedAccessControlEnabled()&&R.Vt.hasPermission(A.AccessControlAction.ActionRolesList)&&(0,ae.ul)(this.props.org.orgId).then(kt=>this.setState({roleOptions:kt})).catch(kt=>console.error(kt))}render(){const{user:kt,org:vn,isExternalUser:An,theme:Wn}=this.props,{currentRole:Xn,isChangingRole:Ha}=this.state,Qa=pe(Wn),ka=(0,r.cx)("width-16",Qa.label),ys=R.Vt.hasPermission(A.AccessControlAction.OrgUsersWrite),xs=R.Vt.hasPermission(A.AccessControlAction.OrgUsersRemove),Ga=An||!ys,or=`${vn.name}-input`;return t.createElement("tr",null,t.createElement("td",{className:ka},t.createElement("label",{htmlFor:or},vn.name)),R.Vt.licensedAccessControlEnabled()?t.createElement("td",null,t.createElement("div",{className:Qa.rolePickerWrapper},t.createElement("div",{className:Qa.rolePicker},t.createElement(Z.R,{userId:kt?.id||0,orgId:vn.orgId,basicRole:vn.role,roleOptions:this.state.roleOptions,onBasicRoleChange:this.onBasicRoleChange,basicRoleDisabled:Ga})),An&&t.createElement(de,null))):t.createElement(t.Fragment,null,Ha?t.createElement("td",null,t.createElement(re.A,{inputId:or,value:Xn,onChange:this.onOrgRoleChange,autoFocus:!0})):t.createElement("td",{className:"width-25"},vn.role),t.createElement("td",{colSpan:1},t.createElement("div",{className:"pull-right"},ys&&t.createElement(X,{isExternalUser:An,onChangeRoleClick:this.onChangeRoleClick,onCancelClick:this.onCancelClick,onOrgRoleSave:this.onOrgRoleSave})))),t.createElement("td",{colSpan:1},t.createElement("div",{className:"pull-right"},xs&&t.createElement(Y.p,{confirmText:"Confirm removal",confirmVariant:"destructive",onCancel:this.onCancelClick,onConfirm:this.onOrgRemove,autoFocus:!0},"Remove from organization"))))}}const se=(0,v.HE)(ee),Q=(0,D.B)(()=>({modal:r.css`
    width: 500px;
  `,buttonRow:r.css`
    text-align: center;
  `,modalContent:r.css`
    overflow: visible;
  `}));class G extends t.PureComponent{constructor(){super(...arguments),this.state={selectedOrg:null,role:A.OrgRole.Viewer,roleOptions:[],pendingOrgId:null,pendingUserId:null,pendingRoles:[]},this.onOrgSelect=kt=>{const vn=this.props.userOrgs.find(An=>An.orgId===kt.value?.id);this.setState({selectedOrg:kt.value,role:vn?.role||A.OrgRole.Viewer}),R.Vt.licensedAccessControlEnabled()&&R.Vt.hasPermission(A.AccessControlAction.ActionRolesList)&&(0,ae.ul)(kt.value?.id).then(An=>this.setState({roleOptions:An})).catch(An=>console.error(An))},this.onOrgRoleChange=kt=>{this.setState({role:kt})},this.onAddUserToOrg=async()=>{const{selectedOrg:kt,role:vn}=this.state;this.props.onOrgAdd(kt.id,vn),R.Vt.licensedAccessControlEnabled()&&R.Vt.hasPermission(A.AccessControlAction.ActionUserRolesAdd)&&this.state.pendingUserId&&(await(0,ae.hB)(this.state.pendingRoles,this.state.pendingUserId,this.state.pendingOrgId),this.state.pendingOrgId=null,this.state.pendingRoles=[],this.state.pendingUserId=null)},this.onCancel=()=>{this.setState({selectedOrg:null,pendingRoles:[],pendingOrgId:null,pendingUserId:null}),this.props.onDismiss&&this.props.onDismiss()},this.onRoleUpdate=async(kt,vn,An)=>{this.setState({pendingRoles:kt,pendingOrgId:An,pendingUserId:vn})}}render(){const{isOpen:kt,user:vn,userOrgs:An}=this.props,{role:Wn,roleOptions:Xn,selectedOrg:Ha}=this.state,Qa=Q();return t.createElement(j.u,{className:Qa.modal,contentClassName:Qa.modalContent,title:"Add to an organization",isOpen:kt,onDismiss:this.onCancel},t.createElement(K.g,{label:"Organization"},t.createElement(me,{inputId:"new-org-input",onSelected:this.onOrgSelect,excludeOrgs:An,autoFocus:!0})),t.createElement(K.g,{label:"Role",disabled:Ha===null},R.Vt.accessControlEnabled()?t.createElement(Z.R,{userId:vn?.id||0,orgId:Ha?.id,basicRole:Wn,onBasicRoleChange:this.onOrgRoleChange,basicRoleDisabled:!1,roleOptions:Xn,apply:!0,onApplyRoles:this.onRoleUpdate,pendingRoles:this.state.pendingRoles}):t.createElement(re.A,{inputId:"new-org-role-input",value:Wn,onChange:this.onOrgRoleChange})),t.createElement(j.u.ButtonRow,null,t.createElement(g.Lh,{spacing:"md",justify:"center"},t.createElement(f.zx,{variant:"secondary",fill:"outline",onClick:this.onCancel},"Cancel"),t.createElement(f.zx,{variant:"primary",disabled:Ha===null,onClick:this.onAddUserToOrg},"Add to organization"))))}}const q=Xt=>({disabledTooltip:r.css`
    display: flex;
  `,tooltipItemLink:r.css`
    color: ${Xt.v1.palette.blue95};
  `});function X({onChangeRoleClick:Xt,isExternalUser:kt,onOrgRoleSave:vn,onCancelClick:An}){const Wn=(0,v.wW)(q);return t.createElement("div",{className:Wn.disabledTooltip},t.createElement(Y.p,{confirmText:"Save",onClick:Xt,onCancel:An,onConfirm:vn,disabled:kt},"Change role"),kt&&t.createElement(z.u,{placement:"right-end",content:t.createElement("div",null,"This user's role is not editable because it is synchronized from your auth provider. Refer to the\xA0",t.createElement("a",{className:Wn.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},t.createElement(i.J,{name:"question-circle"})))}const de=()=>{const Xt=(0,v.wW)(Be);return t.createElement("div",{className:Xt.disabledTooltip},t.createElement(z.u,{placement:"right-end",interactive:!0,content:t.createElement("div",null,"This user's built-in role is not editable because it is synchronized from your auth provider. Refer to the\xA0",t.createElement("a",{className:Xt.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer noopener",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},t.createElement(i.J,{name:"question-circle"})))},Be=Xt=>({disabledTooltip:r.css`
    display: flex;
  `,tooltipItemLink:r.css`
    color: ${Xt.v1.palette.blue95};
  `});var ke=e(2594);const He=[{label:"Yes",value:!0},{label:"No",value:!1}];function ue({isGrafanaAdmin:Xt,onGrafanaAdminChange:kt}){const[vn,An]=(0,t.useState)(!1),[Wn,Xn]=(0,t.useState)(Xt),Ha=()=>An(!0),Qa=()=>{An(!1),Xn(Xt)},ka=()=>kt(Wn),ys=R.Vt.hasPermission(A.AccessControlAction.UsersPermissionsUpdate);return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Permissions"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",{className:"width-16"},"Grafana Admin"),vn?t.createElement("td",{colSpan:2},t.createElement(ke.S,{options:He,value:Wn,onChange:Xn,autoFocus:!0})):t.createElement("td",{colSpan:2},Xt?t.createElement(t.Fragment,null,t.createElement(i.J,{name:"shield"})," Yes"):t.createElement(t.Fragment,null,"No")),t.createElement("td",null,ys&&t.createElement(Y.p,{onClick:Ha,onConfirm:ka,onCancel:Qa,confirmText:"Change"},"Change"))))))))}var Oe=e(98102),Fe=e(50869),Ie=e(46967);function we({user:Xt,onUserUpdate:kt,onUserDelete:vn,onUserDisable:An,onUserEnable:Wn,onPasswordChange:Xn}){const[Ha,Qa]=(0,t.useState)(!1),[ka,ys]=(0,t.useState)(!1),xs=(0,t.useRef)(null),Ga=Lt=>()=>{Qa(Lt),!Lt&&xs.current&&xs.current.focus()},or=(0,t.useRef)(null),bs=Lt=>()=>{ys(Lt),!Lt&&or.current&&or.current.focus()},ur=()=>vn(Xt.id),mr=()=>An(Xt.id),Sr=()=>Wn(Xt.id),Wr=Lt=>{kt({...Xt,name:Lt})},ms=Lt=>{kt({...Xt,email:Lt})},Mr=Lt=>{kt({...Xt,login:Lt})},ir=Xt.authLabels?.length&&Xt.authLabels[0],tn=ir?`Synced via ${ir}`:"",pr=Xt.isExternal||!R.Vt.hasPermissionInMetadata(A.AccessControlAction.UsersWrite,Xt),$r=Xt.isExternal||!R.Vt.hasPermissionInMetadata(A.AccessControlAction.UsersPasswordUpdate,Xt),Br=R.Vt.hasPermissionInMetadata(A.AccessControlAction.UsersDelete,Xt),it=R.Vt.hasPermissionInMetadata(A.AccessControlAction.UsersDisable,Xt),Dt=R.Vt.hasPermissionInMetadata(A.AccessControlAction.UsersEnable,Xt);return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"User information"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,t.createElement(_e,{label:"Name",value:Xt.name,locked:pr,lockMessage:tn,onChange:Wr}),t.createElement(_e,{label:"Email",value:Xt.email,locked:pr,lockMessage:tn,onChange:ms}),t.createElement(_e,{label:"Username",value:Xt.login,locked:pr,lockMessage:tn,onChange:Mr}),t.createElement(_e,{label:"Password",value:"********",inputType:"password",locked:$r,lockMessage:tn,onChange:Xn})))),t.createElement("div",{className:Re.buttonRow},Br&&t.createElement(t.Fragment,null,t.createElement(f.zx,{variant:"destructive",onClick:Ga(!0),ref:xs},"Delete user"),t.createElement(Oe.s,{isOpen:Ha,title:"Delete user",body:"Are you sure you want to delete this user?",confirmText:"Delete user",onConfirm:ur,onDismiss:Ga(!1)})),Xt.isDisabled&&Dt&&t.createElement(f.zx,{variant:"secondary",onClick:Sr},"Enable user"),!Xt.isDisabled&&it&&t.createElement(t.Fragment,null,t.createElement(f.zx,{variant:"secondary",onClick:bs(!0),ref:or},"Disable user"),t.createElement(Oe.s,{isOpen:ka,title:"Disable user",body:"Are you sure you want to disable this user?",confirmText:"Disable user",onConfirm:mr,onDismiss:bs(!1)})))))}const Re={buttonRow:r.css`
    margin-top: 0.8rem;
    > * {
      margin-right: 16px;
    }
  `};class _e extends t.PureComponent{constructor(){super(...arguments),this.state={editing:!1,value:this.props.value||""},this.setInputElem=kt=>{this.inputElem=kt},this.onEditClick=()=>{this.props.inputType==="password"?this.setState({editing:!0,value:""},this.focusInput):this.setState({editing:!0},this.focusInput)},this.onCancelClick=()=>{this.setState({editing:!1,value:this.props.value||""})},this.onInputChange=(kt,vn)=>{vn!==Fe.G.Invalid&&this.setState({value:kt.target.value})},this.onInputBlur=(kt,vn)=>{vn!==Fe.G.Invalid&&this.setState({value:kt.target.value})},this.focusInput=()=>{this.inputElem&&this.inputElem.focus&&this.inputElem.focus()},this.onSave=()=>{this.props.onChange&&this.props.onChange(this.state.value)}}render(){const{label:kt,locked:vn,lockMessage:An,inputType:Wn}=this.props,{value:Xn}=this.state,Ha=(0,r.cx)("width-16",r.css`
        font-weight: 500;
      `);if(vn)return t.createElement(et,{label:kt,value:Xn,lockMessage:An});const Qa=`${kt}-input`;return t.createElement("tr",null,t.createElement("td",{className:Ha},t.createElement("label",{htmlFor:Qa},kt)),t.createElement("td",{className:"width-25",colSpan:2},this.state.editing?t.createElement(Ie.I,{id:Qa,type:Wn,defaultValue:Xn,onBlur:this.onInputBlur,onChange:this.onInputChange,ref:this.setInputElem,width:30}):t.createElement("span",null,this.props.value)),t.createElement("td",null,t.createElement(Y.p,{confirmText:"Save",onClick:this.onEditClick,onConfirm:this.onSave,onCancel:this.onCancelClick},"Edit")))}}_e.defaultProps={value:"",locked:!1,lockMessage:"",inputType:"text"};const et=({label:Xt,value:kt,lockMessage:vn})=>{const An=r.css`
    font-style: italic;
    margin-right: 0.6rem;
  `,Wn=(0,r.cx)("width-16",r.css`
      font-weight: 500;
    `);return t.createElement("tr",null,t.createElement("td",{className:Wn},Xt),t.createElement("td",{className:"width-25",colSpan:2},kt),t.createElement("td",null,t.createElement("span",{className:An},vn)))};var qe=e(35287);class Je extends t.PureComponent{constructor(){super(...arguments),this.forceAllLogoutButton=t.createRef(),this.state={showLogoutModal:!1},this.showLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!0})},this.dismissLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!1},()=>{this.forceAllLogoutButton.current?.focus()})},this.onSessionRevoke=kt=>()=>{this.props.onSessionRevoke(kt)},this.onAllSessionsRevoke=()=>{this.setState({showLogoutModal:!1}),this.props.onAllSessionsRevoke()}}render(){const{sessions:kt}=this.props,{showLogoutModal:vn}=this.state,An=r.css`
      margin-top: 0.8rem;
    `,Wn=R.Vt.hasPermission(A.AccessControlAction.UsersLogout);return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Sessions"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Last seen"),t.createElement("th",null,"Logged on"),t.createElement("th",null,"IP address"),t.createElement("th",{colSpan:2},"Browser and OS"))),t.createElement("tbody",null,kt&&kt.map((Xn,Ha)=>t.createElement("tr",{key:`${Xn.id}-${Ha}`},t.createElement("td",null,Xn.isActive?"Now":Xn.seenAt),t.createElement("td",null,(0,qe.$q)(Xn.createdAt,{dateStyle:"long"})),t.createElement("td",null,Xn.clientIp),t.createElement("td",null,`${Xn.browser} on ${Xn.os} ${Xn.osVersion}`),t.createElement("td",null,t.createElement("div",{className:"pull-right"},Wn&&t.createElement(Y.p,{confirmText:"Confirm logout",confirmVariant:"destructive",onConfirm:this.onSessionRevoke(Xn.id),autoFocus:!0},"Force logout")))))))),t.createElement("div",{className:An},Wn&&kt.length>0&&t.createElement(f.zx,{variant:"secondary",onClick:this.showLogoutConfirmationModal,ref:this.forceAllLogoutButton},"Force logout from all devices"),t.createElement(Oe.s,{isOpen:vn,title:"Force logout from all devices",body:"Are you sure you want to force logout from all devices?",confirmText:"Force logout",onConfirm:this.onAllSessionsRevoke,onDismiss:this.dismissLogoutConfirmationModal}))))}}const lt=Je;var at=e(37592);const Xe=["OAuth"];class gt extends t.PureComponent{constructor(){super(...arguments),this.onUserUpdate=kt=>{this.props.updateUser(kt)},this.onPasswordChange=kt=>{const{user:vn,setUserPassword:An}=this.props;vn&&An(vn.id,kt)},this.onUserDelete=kt=>{this.props.deleteUser(kt)},this.onUserDisable=kt=>{this.props.disableUser(kt)},this.onUserEnable=kt=>{this.props.enableUser(kt)},this.onGrafanaAdminChange=kt=>{const{user:vn,updateUserPermissions:An}=this.props;vn&&An(vn.id,kt)},this.onOrgRemove=kt=>{const{user:vn,deleteOrgUser:An}=this.props;vn&&An(vn.id,kt)},this.onOrgRoleChange=(kt,vn)=>{const{user:An,updateOrgUserRole:Wn}=this.props;An&&Wn(An.id,kt,vn)},this.onOrgAdd=(kt,vn)=>{const{user:An,addOrgUser:Wn}=this.props;An&&Wn(An,kt,vn)},this.onSessionRevoke=kt=>{const{user:vn,revokeSession:An}=this.props;vn&&An(kt,vn.id)},this.onAllSessionsRevoke=()=>{const{user:kt,revokeAllSessions:vn}=this.props;kt&&vn(kt.id)},this.onUserSync=()=>{const{user:kt,syncLdapUser:vn}=this.props;kt&&vn(kt.id)}}async componentDidMount(){const{match:kt,loadAdminUserPage:vn}=this.props;vn(parseInt(kt.params.id,10))}render(){const{user:kt,orgs:vn,sessions:An,ldapSyncInfo:Wn,isLoading:Xn}=this.props,Ha=kt?.isExternal&&kt?.authLabels?.includes("LDAP"),Qa=kt?.authLabels?.includes("JWT"),ka=R.Vt.hasPermission(A.AccessControlAction.UsersAuthTokenList),ys=R.Vt.hasPermission(A.AccessControlAction.LDAPStatusRead),xs=kt?.isExternal&&kt?.authLabels?.some(tn=>Xe.includes(tn)),Ga=kt?.isExternal&&kt?.authLabels?.includes("SAML"),or=kt?.isExternal&&kt?.authLabels?.includes("Google"),bs=kt?.isExternal&&kt?.authLabels?.includes("GitHub"),ur=kt?.isExternal&&kt?.authLabels?.includes("GitLab"),mr=kt?.isExternal&&kt?.authLabels?.includes("Auth Proxy"),Sr=kt?.isExternal&&kt?.authLabels?.includes("AzureAD"),Wr=kt?.isExternal&&kt?.authLabels?.includes("Okta"),ms=kt?.isExternal&&kt?.authLabels?.includes("grafana.com"),Mr=!l.ZP.auth.DisableSyncLock&&(kt?.isExternal&&!(mr||or||ur||xs||Ga||Wr||Ha||bs||Sr||Qa||ms)||!l.ZP.auth.OAuthSkipOrgRoleUpdateSync&&xs||!l.ZP.auth.SAMLSkipOrgRoleSync&&Ga||!l.ZP.auth.LDAPSkipOrgRoleSync&&Ha||!l.ZP.auth.JWTAuthSkipOrgRoleSync&&Qa||!l.ZP.auth.OAuthSkipOrgRoleUpdateSync&&!l.ZP.auth.GrafanaComSkipOrgRoleSync&&ms||!l.ZP.auth.OAuthSkipOrgRoleUpdateSync&&!l.ZP.auth.OktaSkipOrgRoleSync&&Wr||!l.ZP.auth.OAuthSkipOrgRoleUpdateSync&&!l.ZP.auth.GithubSkipOrgRoleSync&&bs||!l.ZP.auth.OAuthSkipOrgRoleUpdateSync&&!l.ZP.auth.AzureADSkipOrgRoleSync&&Sr||!l.ZP.auth.OAuthSkipOrgRoleUpdateSync&&!l.ZP.auth.GitLabSkipOrgRoleSync&&ur||!l.ZP.auth.OAuthSkipOrgRoleUpdateSync&&!l.ZP.auth.GoogleSkipOrgRoleSync&&or),ir={text:kt?.login??"",icon:"shield",breadcrumbs:[{title:"Users",url:"admin/users"}],subTitle:"Manage settings for an individual user."};return t.createElement(w.T,{navId:"global-users",pageNav:ir},t.createElement(w.T.Contents,{isLoading:Xn},kt&&t.createElement(t.Fragment,null,t.createElement(we,{user:kt,onUserUpdate:this.onUserUpdate,onUserDelete:this.onUserDelete,onUserDisable:this.onUserDisable,onUserEnable:this.onUserEnable,onPasswordChange:this.onPasswordChange}),!l.ZP.auth.LDAPSkipOrgRoleSync&&Ha&&(0,B.v)("ldapsync")&&Wn&&ys&&t.createElement(F,{ldapSyncInfo:Wn,user:kt,onUserSync:this.onUserSync}),t.createElement(ue,{isGrafanaAdmin:kt.isGrafanaAdmin,onGrafanaAdminChange:this.onGrafanaAdminChange})),vn&&t.createElement(le,{user:kt,orgs:vn,isExternalUser:Mr,onOrgRemove:this.onOrgRemove,onOrgRoleChange:this.onOrgRoleChange,onOrgAdd:this.onOrgAdd}),An&&ka&&t.createElement(lt,{sessions:An,onSessionRevoke:this.onSessionRevoke,onAllSessionsRevoke:this.onAllSessionsRevoke})))}}const ot=Xt=>({user:Xt.userAdmin.user,sessions:Xt.userAdmin.sessions,orgs:Xt.userAdmin.orgs,ldapSyncInfo:Xt.ldap.syncInfo,isLoading:Xt.userAdmin.isLoading,error:Xt.userAdmin.error}),Ye={loadAdminUserPage:at.PK,updateUser:at.Nq,setUserPassword:at.tQ,disableUser:at.B9,enableUser:at.Dx,deleteUser:at.h8,updateUserPermissions:at.Xx,addOrgUser:at.bN,updateOrgUserRole:at.Jk,deleteOrgUser:at.uV,revokeSession:at._1,revokeAllSessions:at.Fm,syncLdapUser:at.CP},ce=(0,L.connect)(ot,Ye)(gt);var be=e(14835),Te=e(45253),Ke=e(86245);const ge=({ldapConnectionInfo:Xt})=>t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"LDAP Connection"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Host"),t.createElement("th",{colSpan:2},"Port"))),t.createElement("tbody",null,Xt&&Xt.map((kt,vn)=>t.createElement("tr",{key:vn},t.createElement("td",null,kt.host),t.createElement("td",null,kt.port),t.createElement("td",null,kt.available?t.createElement(i.J,{name:"check",className:"pull-right"}):t.createElement(i.J,{name:"exclamation-triangle",className:"pull-right"}))))))),t.createElement("div",{className:"gf-form-group"},t.createElement(Me,{ldapConnectionInfo:Xt})))),Me=({ldapConnectionInfo:Xt})=>{if(!Xt.some(Wn=>Wn.error))return null;const vn=[];Xt.forEach(Wn=>{Wn.error&&vn.push(Wn)});const An=vn.map((Wn,Xn)=>t.createElement("div",{key:Xn},t.createElement("span",{style:{fontWeight:500}},Wn.host,":",Wn.port,t.createElement("br",null)),t.createElement("span",null,Wn.error),Xn!==vn.length-1&&t.createElement(t.Fragment,null,t.createElement("br",null),t.createElement("br",null))));return t.createElement(Te.b,{title:"Connection error",severity:A.AppNotificationSeverity.Error},An)};var ye=e(67487);const fe="dddd YYYY-MM-DD HH:mm zz";class he extends t.PureComponent{constructor(){super(...arguments),this.state={isSyncing:!1},this.handleSyncClick=()=>{this.setState({isSyncing:!this.state.isSyncing})}}render(){const{ldapSyncInfo:kt}=this.props,{isSyncing:vn}=this.state,An=(0,U.dq)(kt.nextSync,{format:fe});return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"LDAP Synchronisation",t.createElement(f.zx,{className:"pull-right",onClick:this.handleSyncClick,hidden:!0},t.createElement("span",{className:"btn-title"},"Bulk-sync now"),vn&&t.createElement(ye.$,{inline:!0}))),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",null,"Active synchronisation"),t.createElement("td",{colSpan:2},kt.enabled?"Enabled":"Disabled")),t.createElement("tr",null,t.createElement("td",null,"Scheduled"),t.createElement("td",null,kt.schedule)),t.createElement("tr",null,t.createElement("td",null,"Next scheduled synchronisation"),t.createElement("td",null,An)))))))}}const De=({groups:Xt,showAttributeMapping:kt})=>{const vn=kt?Xt:Xt.filter(An=>An.orgRole);return t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,kt&&t.createElement("th",null,"LDAP Group"),t.createElement("th",null,"Organization",t.createElement(z.u,{placement:"top",content:"Only the first match for an Organization will be used",theme:"info"},t.createElement("span",{className:"gf-form-help-icon"},t.createElement(i.J,{name:"info-circle"})))),t.createElement("th",null,"Role"))),t.createElement("tbody",null,vn.map((An,Wn)=>t.createElement("tr",{key:`${An.orgId}-${Wn}`},kt&&t.createElement("td",null,An.groupDN),An.orgName&&An.orgRole?t.createElement("td",null,An.orgName):t.createElement("td",null),An.orgRole?t.createElement("td",null,An.orgRole):t.createElement("td",null,t.createElement("span",{className:"text-warning"},"No match",t.createElement(z.u,{placement:"top",content:"No matching groups found",theme:"info"},t.createElement("span",{className:"gf-form-help-icon"},t.createElement(i.J,{name:"info-circle"})))))))))))},Ae=({info:Xt,showAttributeMapping:kt})=>t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{colSpan:2},"User information"),kt&&t.createElement("th",null,"LDAP attribute"))),t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",{className:"width-16"},"First name"),t.createElement("td",null,Xt.name.ldapValue),kt&&t.createElement("td",null,Xt.name.cfgAttrValue)),t.createElement("tr",null,t.createElement("td",{className:"width-16"},"Surname"),t.createElement("td",null,Xt.surname.ldapValue),kt&&t.createElement("td",null,Xt.surname.cfgAttrValue)),t.createElement("tr",null,t.createElement("td",{className:"width-16"},"Username"),t.createElement("td",null,Xt.login.ldapValue),kt&&t.createElement("td",null,Xt.login.cfgAttrValue)),t.createElement("tr",null,t.createElement("td",{className:"width-16"},"Email"),t.createElement("td",null,Xt.email.ldapValue),kt&&t.createElement("td",null,Xt.email.cfgAttrValue)))))),Ne=({permissions:Xt})=>t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{colSpan:1},"Permissions"))),t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",{className:"width-16"}," Grafana admin"),t.createElement("td",null,Xt.isGrafanaAdmin?t.createElement(t.Fragment,null,t.createElement(i.J,{name:"shield"})," Yes"):"No")),t.createElement("tr",null,t.createElement("td",{className:"width-16"},"Status"),t.createElement("td",null,Xt.isDisabled?t.createElement(t.Fragment,null,t.createElement(i.J,{name:"times"})," Inactive"):t.createElement(t.Fragment,null,t.createElement(i.J,{name:"check"})," Active"))))))),Ze=({teams:Xt,showAttributeMapping:kt})=>{const vn=kt?Xt:Xt.filter(An=>An.teamName);return t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,kt&&t.createElement("th",null,"LDAP Group"),t.createElement("th",null,"Organisation"),t.createElement("th",null,"Team"))),t.createElement("tbody",null,vn.map((An,Wn)=>t.createElement("tr",{key:`${An.teamName}-${Wn}`},kt&&t.createElement(t.Fragment,null,t.createElement("td",null,An.groupDN),!An.orgName&&t.createElement(t.Fragment,null,t.createElement("td",null),t.createElement("td",null,t.createElement("div",{className:"text-warning"},"No match",t.createElement(z.u,{placement:"top",content:"No matching teams found",theme:"info"},t.createElement("span",{className:"gf-form-help-icon"},t.createElement(i.J,{name:"info-circle"}))))))),An.orgName&&t.createElement(t.Fragment,null,t.createElement("td",null,An.orgName),t.createElement("td",null,An.teamName))))))))},Se=({ldapUser:Xt,showAttributeMapping:kt})=>t.createElement(t.Fragment,null,t.createElement(Ae,{info:Xt.info,showAttributeMapping:kt}),t.createElement(Ne,{permissions:Xt.permissions}),Xt.roles&&Xt.roles.length>0&&t.createElement(De,{groups:Xt.roles,showAttributeMapping:kt}),Xt.teams&&Xt.teams.length>0?t.createElement(Ze,{teams:Xt.teams,showAttributeMapping:kt}):t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",null,"No teams found via LDAP"))))))),{FormField:Ue}=be.LegacyForms;class Qe extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0},this.search=kt=>{kt.preventDefault();const vn=kt.target.elements.username.value;vn&&this.fetchUserMapping(vn)},this.onClearUserError=()=>{this.props.clearUserError()}}async componentDidMount(){const{clearUserMappingInfo:kt,queryParams:vn}=this.props;await kt(),await this.fetchLDAPStatus(),vn.username&&await this.fetchUserMapping(vn.username),this.setState({isLoading:!1})}async fetchLDAPStatus(){const{loadLdapState:kt,loadLdapSyncStatus:vn}=this.props;return Promise.all([kt(),vn()])}async fetchUserMapping(kt){const{loadUserMapping:vn}=this.props;return await vn(kt)}render(){const{ldapUser:kt,userError:vn,ldapError:An,ldapSyncInfo:Wn,ldapConnectionInfo:Xn,navModel:Ha,queryParams:Qa}=this.props,{isLoading:ka}=this.state,ys=R.Vt.hasPermission(A.AccessControlAction.LDAPUsersRead);return t.createElement(w.T,{navModel:Ha},t.createElement(w.T.Contents,{isLoading:ka},t.createElement(t.Fragment,null,An&&An.title&&t.createElement("div",{className:"gf-form-group"},t.createElement(Te.b,{title:An.title,severity:A.AppNotificationSeverity.Error},An.body)),t.createElement(ge,{ldapConnectionInfo:Xn}),(0,B.v)("ldapsync")&&Wn&&t.createElement(he,{ldapSyncInfo:Wn}),ys&&t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Test user mapping"),t.createElement("div",{className:"gf-form-group"},t.createElement("form",{onSubmit:this.search,className:"gf-form-inline"},t.createElement(Ue,{label:"Username",labelWidth:8,inputWidth:30,type:"text",id:"username",name:"username",defaultValue:Qa.username}),t.createElement(f.zx,{type:"submit"},"Run"))),vn&&vn.title&&t.createElement("div",{className:"gf-form-group"},t.createElement(Te.b,{title:vn.title,severity:A.AppNotificationSeverity.Error,onRemove:this.onClearUserError},vn.body)),kt&&t.createElement(Se,{ldapUser:kt,showAttributeMapping:!0})))))}}const pt=Xt=>({navModel:(0,Ke.ht)(Xt.navIndex,"ldap"),ldapConnectionInfo:Xt.ldap.connectionInfo,ldapUser:Xt.ldap.user,ldapSyncInfo:Xt.ldap.syncInfo,userError:Xt.ldap.userError,ldapError:Xt.ldap.ldapError}),bt={loadLdapState:at.Y3,loadLdapSyncStatus:at.j4,loadUserMapping:at.b_,clearUserError:at.V0,clearUserMappingInfo:at.IS},Mt=(0,L.connect)(pt,bt)(Qe);var At=e(74020);const Pt=Xt=>t.lazy(Xt);var rn=e(97953);const Fn=[],kn=[...Fn,{path:"/alerting",component:()=>l.vc.featureToggles.topnav?t.createElement(c.G,{navId:"alerting"}):t.createElement(n.l_,{to:"/alerting/list"})},{path:"/alerting/list",component:Pt(()=>Promise.all([e.e(1899),e.e(4259),e.e(8225),e.e(2461)]).then(e.bind(e,65007)))},{path:"/alerting/ng/list",component:Pt(()=>e.e(4286).then(e.bind(e,65007)))},{path:"/alerting/notifications",roles:l.vc.unifiedAlertingEnabled?()=>["Editor","Admin"]:void 0,component:Pt(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notifications/templates/new",roles:()=>["Editor","Admin"],component:Pt(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notifications/templates/:id/edit",roles:()=>["Editor","Admin"],component:Pt(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notifications/receivers/new",roles:()=>["Editor","Admin"],component:Pt(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notifications/receivers/:id/edit",roles:()=>["Editor","Admin"],component:Pt(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notifications/global-config",roles:()=>["Admin","Editor"],component:Pt(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notification/new",component:Pt(()=>e.e(476).then(e.bind(e,13915)))},{path:"/alerting/notification/:id/edit",component:Pt(()=>e.e(7384).then(e.bind(e,81137)))}],Jn=[...Fn,l.vc.featureToggles.topnav?{path:"/alerting",component:Pt(()=>e.e(6034).then(e.bind(e,90237)))}:{path:"/alerting/home",component:Pt(()=>e.e(6034).then(e.bind(e,90237)))},{path:"/alerting/list",roles:(0,rn.ql)([A.AccessControlAction.AlertingRuleRead,A.AccessControlAction.AlertingRuleExternalRead],[At.B.Viewer,At.B.Editor,At.B.Admin]),component:Pt(()=>Promise.all([e.e(1899),e.e(4259),e.e(8225),e.e(2461)]).then(e.bind(e,67376)))},{path:"/alerting/routes",roles:(0,rn.ql)([A.AccessControlAction.AlertingNotificationsRead,A.AccessControlAction.AlertingNotificationsExternalRead],[At.B.Editor,At.B.Admin]),component:Pt(()=>e.e(8648).then(e.bind(e,2979)))},{path:"/alerting/routes/mute-timing/new",roles:(0,rn.ql)([A.AccessControlAction.AlertingNotificationsWrite,A.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:Pt(()=>e.e(9355).then(e.bind(e,91631)))},{path:"/alerting/routes/mute-timing/edit",roles:(0,rn.ql)([A.AccessControlAction.AlertingNotificationsWrite,A.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:Pt(()=>e.e(9355).then(e.bind(e,91631)))},{path:"/alerting/silences",roles:(0,rn.ql)([A.AccessControlAction.AlertingInstanceRead,A.AccessControlAction.AlertingInstancesExternalRead],["Viewer","Editor","Admin"]),component:Pt(()=>e.e(1783).then(e.bind(e,8572)))},{path:"/alerting/silence/new",roles:(0,rn.ql)([A.AccessControlAction.AlertingInstanceCreate,A.AccessControlAction.AlertingInstancesExternalWrite],["Editor","Admin"]),component:Pt(()=>e.e(1783).then(e.bind(e,8572)))},{path:"/alerting/silence/:id/edit",roles:(0,rn.ql)([A.AccessControlAction.AlertingInstanceUpdate,A.AccessControlAction.AlertingInstancesExternalWrite],["Editor","Admin"]),component:Pt(()=>e.e(1783).then(e.bind(e,8572)))},{path:"/alerting/notifications",roles:(0,rn.ql)([A.AccessControlAction.AlertingNotificationsRead,A.AccessControlAction.AlertingNotificationsExternalRead],["Editor","Admin"]),component:Pt(()=>e.e(6618).then(e.bind(e,68732)))},{path:"/alerting/notifications/:type/new",roles:(0,rn.ql)([A.AccessControlAction.AlertingNotificationsWrite,A.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:Pt(()=>e.e(6618).then(e.bind(e,68732)))},{path:"/alerting/notifications/:type/:id/edit",roles:(0,rn.ql)([A.AccessControlAction.AlertingNotificationsWrite,A.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:Pt(()=>e.e(6618).then(e.bind(e,68732)))},{path:"/alerting/notifications/:type/:id/duplicate",roles:(0,rn.ql)([A.AccessControlAction.AlertingNotificationsWrite,A.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:Pt(()=>e.e(6618).then(e.bind(e,68732)))},{path:"/alerting/notifications/:type",roles:(0,rn.ql)([A.AccessControlAction.AlertingNotificationsWrite,A.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:Pt(()=>e.e(6618).then(e.bind(e,68732)))},{path:"/alerting/groups/",roles:(0,rn.ql)([A.AccessControlAction.AlertingInstanceRead,A.AccessControlAction.AlertingInstancesExternalRead],[At.B.Viewer,At.B.Editor,At.B.Admin]),component:Pt(()=>e.e(2415).then(e.bind(e,71884)))},{path:"/alerting/new",pageClass:"page-alerting",roles:(0,rn.ql)([A.AccessControlAction.AlertingRuleCreate,A.AccessControlAction.AlertingRuleExternalWrite],[At.B.Viewer,At.B.Editor,At.B.Admin]),component:Pt(()=>e.e(5372).then(e.bind(e,85670)))},{path:"/alerting/:id/edit",pageClass:"page-alerting",roles:(0,rn.ql)([A.AccessControlAction.AlertingRuleUpdate,A.AccessControlAction.AlertingRuleExternalWrite],[At.B.Viewer,At.B.Editor,At.B.Admin]),component:Pt(()=>e.e(5372).then(e.bind(e,85670)))},{path:"/alerting/:sourceName/:id/view",pageClass:"page-alerting",roles:(0,rn.ql)([A.AccessControlAction.AlertingRuleRead,A.AccessControlAction.AlertingRuleExternalRead],[At.B.Viewer,At.B.Editor,At.B.Admin]),component:Pt(()=>Promise.all([e.e(1899),e.e(4259),e.e(4679)]).then(e.bind(e,77110)))},{path:"/alerting/:sourceName/:name/find",pageClass:"page-alerting",roles:(0,rn.ql)([A.AccessControlAction.AlertingRuleRead,A.AccessControlAction.AlertingRuleExternalRead],[At.B.Viewer,At.B.Editor,At.B.Admin]),component:Pt(()=>e.e(7918).then(e.bind(e,81471)))},{path:"/alerting/admin",roles:()=>["Admin"],component:Pt(()=>e.e(7680).then(e.bind(e,74460)))}];function qn(Xt=l.vc){return Xt.unifiedAlertingEnabled?Jn:Xt.alertingEnabled?kn:(0,h.uniq)([...kn,...Jn].map(vn=>vn.path)).map(vn=>({path:vn,component:Pt(()=>e.e(1333).then(e.bind(e,39597)))}))}var Ut=e(86475);function ut(){return l.vc.featureToggles.dataConnectionsConsole?[{path:`/${Ut.D}`,exact:!1,component:Pt(()=>Promise.all([e.e(3795),e.e(5981)]).then(e.bind(e,50713)))}]:[]}var nt=e(3597),vt=e(84532);const ht=[{path:"/live",component:Pt(()=>e.e(2120).then(e.bind(e,11828)))},{path:"/live/pipeline",component:Pt(()=>e.e(2651).then(e.bind(e,44654)))},{path:"/live/cloud",component:Pt(()=>e.e(5310).then(e.bind(e,223)))}];function It(Xt=l.vc){return(0,vt.bO)()?Xt.featureToggles["live-pipeline"]?ht:ht.map(kt=>({...kt,component:Pt(()=>e.e(7586).then(e.bind(e,13909)))})):[]}var Ft=e(48996);const en=[{path:"/plugins",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:Ft.cd.Home,component:Pt(()=>e.e(94).then(e.bind(e,21701)))},{path:"/plugins/browse",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:Ft.cd.Browse,component:Pt(()=>e.e(94).then(e.bind(e,21701)))},{path:"/plugins/:pluginId/",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:Ft.cd.Details,component:Pt(()=>Promise.all([e.e(3795),e.e(2417)]).then(e.bind(e,5793)))},{path:"/admin/plugins/*",navId:"admin-plugins",component:()=>t.createElement(n.l_,{to:"/plugins"})}];function sn(){return en}var Mn=e(32557),En=e(88706),yn=e(25318),Bn=e(24699),ea=e(35645),Qn=e(37932),Kn=e(96093);class Ua{constructor(){this.navItems=l.ZP.bootData.navTree}getCfgNode(){return this.navItems.find(kt=>kt.id==="cfg")}getNav(...kt){let vn=this.navItems;const An={breadcrumbs:[]};for(const Wn of kt){if(typeof Wn=="number"){An.main=An.breadcrumbs[Wn];break}const Xn=vn.find(Ha=>Ha.id===Wn);Xn&&(An.breadcrumbs.push(Xn),An.node=Xn,An.main=Xn,vn=Xn.children??[])}if(An.main?.children)for(const Wn of An.main.children)Wn.active=Wn.url===An.node?.url;return An}getNotFoundNav(){return va()}}function pa(Xt){return console.error(Xt),za("Exception thrown","See console for details")}function va(){return za("Page not found","404 Error")}function za(Xt,kt){const vn={text:Xt,subTitle:kt,icon:"exclamation-triangle"};return{node:vn,main:vn}}Kn.ZP.service("navModelSrv",Ua);var ja=e(2555),Ea=e(13011),ma=e(82221),Xa=e(55111),Oa=e(52889);const ss={loading:!0,pluginNav:null,plugin:null};function Ks({pluginId:Xt,pluginNavSection:kt}){const vn=(0,n.$B)(),An=(0,n.TH)(),[Wn,Xn]=(0,t.useReducer)(Ss.reducer,ss),Ha=(0,t.useMemo)(()=>(0,En.oD)(),[]),Qa=ea.v.appSubUrl+An.pathname+An.search,{plugin:ka,loading:ys,pluginNav:xs}=Wn,Ga=(0,Xa.d)(kt,xs,Qa),or=(0,t.useMemo)(()=>(0,Qn.Ox)(An.search),[An.search]),bs=(0,t.useMemo)(()=>(0,Oa.a)(Ga),[Ga]);(0,t.useEffect)(()=>{Bs(Xt,Xn)},[Xt]);const ur=(0,t.useCallback)(Sr=>Xn(Ss.actions.changeNav(Sr)),[]);if(!ka||Xt!==ka.meta.id)return t.createElement(w.T,{navModel:Ga},ys&&t.createElement(ja.Z,null));if(!ka.root)return t.createElement(w.T,{navModel:Ga??za("Plugin load error")},t.createElement("div",null,"No root app page component found"));const mr=ka.root&&t.createElement(ka.root,{meta:ka.meta,basename:vn.url,onNavChanged:ur,query:or,path:An.pathname});return ea.v.featureToggles.topnav&&!xs?t.createElement(Oa.v.Provider,{value:bs},mr):t.createElement(t.Fragment,null,t.createElement(En.Nq,{node:Ha},mr),Ga?t.createElement(w.T,{navModel:Ga,pageNav:xs?.node},t.createElement(w.T.Contents,{isLoading:ys},t.createElement(En.t0,{node:Ha}))):t.createElement(w.T,null,t.createElement(En.t0,{node:Ha})))}const Ss=(0,Mn.oM)({name:"prom-builder-container",initialState:ss,reducers:{setState:(Xt,kt)=>{Object.assign(Xt,kt.payload)},changeNav:(Xt,kt)=>{let vn=kt.payload;vn&&vn.node.children&&(vn={...vn,node:{...vn.main,hideFromBreadcrumbs:ea.v.featureToggles.topnav}}),Xt.pluginNav=vn}}});async function Bs(Xt,kt){try{const vn=await(0,Ea.a)(Xt).then(An=>{const Wn=ls(An);return Wn?(R.h$.emit(yn.SI.alertError,[Wn]),kt(Ss.actions.setState({pluginNav:za(Wn)})),null):(0,ma.Av)(An)});kt(Ss.actions.setState({plugin:vn,loading:!1,pluginNav:null}))}catch{kt(Ss.actions.setState({plugin:null,loading:!1,pluginNav:va()}))}}function ls(Xt){return Xt?Xt.type!==Bn.zV.app?"Plugin must be an app":Xt.enabled?null:"Application Not Enabled":"Unknown Plugin"}const ws=Ks;var qs=e(3153);function Da(){const Xt=(0,qs.y0)(),{navIndex:kt}=Xt,vn=Xn=>Xn.startsWith("standalone-plugin-page-/"),An=Xn=>"pluginId"in Xn&&"id"in Xn;return[...Object.values(kt).filter(An).map(Xn=>{const Ha=(0,Ke.vw)(Xn),Qa=`/a/${Xn.pluginId}`;return{path:vn(Xn.id)&&Xn.url||Qa,exact:!1,component:()=>t.createElement(ws,{pluginId:Xn.pluginId,pluginNavSection:Ha})}}),{path:"/a/:pluginId",exact:!1,component:({match:Xn})=>t.createElement(ws,{pluginId:Xn.params.pluginId,pluginNavSection:kt.home})}]}const Vs=[{path:"/profile",component:Pt(()=>e.e(7323).then(e.bind(e,87807)))},{path:"/profile/password",component:Pt(()=>e.e(5771).then(e.bind(e,75771)))},{path:"/profile/select-org",component:Pt(()=>e.e(1456).then(e.bind(e,90779)))},{path:"/profile/notifications",component:Pt(()=>e.e(743).then(e.bind(e,86992)))}];function Es(Xt=l.vc){return Xt.profileEnabled?Vs:(0,h.uniq)(Vs.map(vn=>vn.path)).map(vn=>({path:vn,component:Pt(()=>e.e(3395).then(e.bind(e,92080)))}))}function er(){return l.vc.featureToggles.queryLibrary?[{path:"/query-library",exact:!0,component:Pt(()=>e.e(1715).then(e.bind(e,72108)))}]:[]}const dr=()=>l.vc.featureToggles.publicDashboards?[{path:"/dashboard/public",pageClass:"page-dashboard",routeName:A.DashboardRoutes.Public,component:Pt(()=>e.e(1344).then(e.bind(e,10429)))},{path:"/public-dashboards/:accessToken",pageClass:"page-dashboard",routeName:A.DashboardRoutes.Public,chromeless:!0,component:Pt(()=>Promise.all([e.e(3189),e.e(7638),e.e(6571),e.e(5200),e.e(2613)]).then(e.bind(e,25055)))}]:[],es=[];function tr(){const Xt=l.ZP.featureToggles.topnav?[{path:"/apps",component:()=>t.createElement(c.G,{navId:"apps"})},{path:"/alerts-and-incidents",component:()=>t.createElement(c.G,{navId:"alerts-and-incidents"})},{path:"/monitoring",component:()=>t.createElement(c.G,{navId:"monitoring"})},{path:"/admin/general",component:()=>t.createElement(c.G,{navId:"admin/general"})},{path:"/admin/plugins",component:()=>t.createElement(c.G,{navId:"admin/plugins"})},{path:"/admin/access",component:()=>t.createElement(c.G,{navId:"admin/access"})}]:[];return[...Da(),{path:"/",pageClass:"page-dashboard",routeName:A.DashboardRoutes.Home,component:Pt(()=>Promise.all([e.e(1899),e.e(3189),e.e(7638),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(7023),e.e(8016),e.e(8225),e.e(5296)]).then(e.bind(e,53051)))},{path:"/d/:uid/:slug?",pageClass:"page-dashboard",routeName:A.DashboardRoutes.Normal,component:Pt(()=>Promise.all([e.e(1899),e.e(3189),e.e(7638),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(7023),e.e(8016),e.e(8225),e.e(5296)]).then(e.bind(e,53051)))},{path:"/dashboard/new",roles:()=>O.Vt.evaluatePermission(()=>["Editor","Admin"],[A.AccessControlAction.DashboardsCreate]),pageClass:"page-dashboard",routeName:A.DashboardRoutes.New,component:Pt(()=>Promise.all([e.e(1899),e.e(3189),e.e(7638),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(7023),e.e(8016),e.e(8225),e.e(5296)]).then(e.bind(e,66959)))},{path:"/dashboard/new-with-ds/:datasourceUid",roles:()=>O.Vt.evaluatePermission(()=>["Editor","Admin"],[A.AccessControlAction.DashboardsCreate]),component:Pt(()=>Promise.all([e.e(1899),e.e(3189),e.e(7638),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(7023),e.e(8016),e.e(8225),e.e(5296)]).then(e.bind(e,81704)))},{path:"/dashboard/:type/:slug",pageClass:"page-dashboard",routeName:A.DashboardRoutes.Normal,component:Pt(()=>Promise.all([e.e(1899),e.e(3189),e.e(7638),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(7023),e.e(8016),e.e(8225),e.e(5296)]).then(e.bind(e,53051)))},{path:"/d-solo/:uid/:slug",pageClass:"dashboard-solo",routeName:A.DashboardRoutes.Normal,chromeless:!0,component:Pt(()=>Promise.resolve().then(e.bind(e,30237)))},{path:"/dashboard-solo/:type/:slug",pageClass:"dashboard-solo",routeName:A.DashboardRoutes.Normal,chromeless:!0,component:Pt(()=>Promise.resolve().then(e.bind(e,30237)))},{path:"/d-solo/:uid",pageClass:"dashboard-solo",routeName:A.DashboardRoutes.Normal,chromeless:!0,component:Pt(()=>Promise.resolve().then(e.bind(e,30237)))},{path:"/dashboard/import",roles:()=>O.Vt.evaluatePermission(()=>["Editor","Admin"],[A.AccessControlAction.DashboardsCreate]),component:Pt(()=>e.e(8808).then(e.bind(e,26440)))},{path:nt.n.List,component:Pt(()=>e.e(4620).then(e.bind(e,85292)))},{path:nt.n.Edit,component:Pt(()=>e.e(1477).then(e.bind(e,72443)))},{path:nt.n.Dashboards,component:Pt(()=>e.e(2929).then(e.bind(e,46144)))},{path:nt.n.New,component:Pt(()=>e.e(4253).then(e.bind(e,70594)))},{path:"/datasources/correlations",component:Pt(()=>l.ZP.featureToggles.correlations?e.e(413).then(e.bind(e,89234)):e.e(2093).then(e.bind(e,91598)))},{path:"/dashboards",component:Pt(()=>e.e(4074).then(e.bind(e,48548)))},{path:"/dashboards/folder/new",roles:()=>O.Vt.evaluatePermission(()=>["Editor","Admin"],[A.AccessControlAction.FoldersCreate]),component:Pt(()=>e.e(8932).then(e.bind(e,94883)))},{path:"/dashboards/f/:uid/:slug/permissions",component:l.ZP.rbacEnabled&&O.Vt.hasPermission(A.AccessControlAction.FoldersPermissionsRead)?Pt(()=>e.e(8431).then(e.bind(e,42524))):Pt(()=>e.e(8431).then(e.bind(e,45663)))},{path:"/dashboards/f/:uid/:slug/settings",component:Pt(()=>e.e(4827).then(e.bind(e,90315)))},{path:"/dashboards/f/:uid/:slug",component:Pt(()=>e.e(4074).then(e.bind(e,48548)))},{path:"/dashboards/f/:uid",component:Pt(()=>e.e(4074).then(e.bind(e,48548)))},{path:"/explore",pageClass:"page-explore",roles:()=>O.Vt.evaluatePermission(()=>l.ZP.viewersCanEdit?[]:["Editor","Admin"],[A.AccessControlAction.DataSourcesExplore]),component:Pt(()=>l.ZP.exploreEnabled?Promise.all([e.e(1899),e.e(4254),e.e(5048),e.e(3663),e.e(7023),e.e(6303),e.e(9782)]).then(e.bind(e,61036)):e.e(172).then(e.bind(e,20750)))},...Xt,{path:"/org",component:Pt(()=>e.e(529).then(e.bind(e,23242)))},{path:"/org/new",component:Pt(()=>e.e(950).then(e.bind(e,72040)))},{path:"/org/users",component:Pt(()=>e.e(8039).then(e.bind(e,71221)))},{path:"/org/users/invite",component:Pt(()=>e.e(7707).then(e.bind(e,40509)))},{path:"/org/apikeys",roles:()=>O.Vt.evaluatePermission(()=>["Admin"],[A.AccessControlAction.ActionAPIKeysRead]),component:Pt(()=>e.e(3082).then(e.bind(e,60277)))},{path:"/org/serviceaccounts",roles:()=>O.Vt.evaluatePermission(()=>["Admin"],[A.AccessControlAction.ServiceAccountsRead,A.AccessControlAction.ServiceAccountsCreate]),component:Pt(()=>e.e(1337).then(e.bind(e,50951)))},{path:"/org/serviceaccounts/create",component:Pt(()=>e.e(9738).then(e.bind(e,36497)))},{path:"/org/serviceaccounts/:id",component:Pt(()=>e.e(687).then(e.bind(e,66446)))},{path:"/org/teams",roles:()=>O.Vt.evaluatePermission(()=>l.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[A.AccessControlAction.ActionTeamsRead,A.AccessControlAction.ActionTeamsCreate]),component:Pt(()=>e.e(9671).then(e.bind(e,17721)))},{path:"/org/teams/new",roles:()=>O.Vt.evaluatePermission(()=>l.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[A.AccessControlAction.ActionTeamsCreate]),component:Pt(()=>e.e(8715).then(e.bind(e,39874)))},{path:"/org/teams/edit/:id/:page?",roles:()=>O.Vt.evaluatePermission(()=>l.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[A.AccessControlAction.ActionTeamsRead,A.AccessControlAction.ActionTeamsCreate]),component:Pt(()=>e.e(8612).then(e.bind(e,64975)))},{path:"/admin",component:()=>l.ZP.featureToggles.topnav?t.createElement(c.G,{navId:"cfg"}):t.createElement(n.l_,{to:"/admin/users"})},{path:"/admin/access",component:()=>l.ZP.featureToggles.topnav?t.createElement(c.G,{navId:"admin/access"}):t.createElement(n.l_,{to:"/admin/users"})},{path:"/admin/config",component:()=>l.ZP.featureToggles.topnav?t.createElement(c.G,{navId:"admin/config"}):t.createElement(n.l_,{to:"/admin/org"})},{path:"/admin/settings",component:Pt(()=>e.e(9603).then(e.bind(e,55486)))},{path:"/admin/upgrading",component:Pt(()=>Promise.resolve().then(e.bind(e,62446)))},{path:"/admin/users",component:l.ZP.featureToggles.topnav?Pt(()=>e.e(7497).then(e.bind(e,21038))):Pt(()=>Promise.resolve().then(e.bind(e,68082)))},{path:"/admin/users/create",component:Pt(()=>e.e(2508).then(e.bind(e,49562)))},{path:"/admin/users/edit/:id",component:ce},{path:"/admin/orgs",component:Pt(()=>e.e(3798).then(e.bind(e,61608)))},{path:"/admin/orgs/edit/:id",component:Pt(()=>e.e(2721).then(e.bind(e,29209)))},{path:"/admin/storage/k8s",roles:()=>["Admin"],component:Pt(()=>e.e(1218).then(e.bind(e,6897)))},{path:"/admin/storage/export",roles:()=>["Admin"],component:Pt(()=>e.e(8426).then(e.bind(e,39892)))},{path:"/admin/storage/:path*",roles:()=>["Admin"],component:Pt(()=>e.e(7675).then(e.bind(e,17102)))},{path:"/admin/stats",component:Pt(()=>Promise.resolve().then(e.bind(e,97629)))},{path:"/admin/ldap",component:Mt},{path:"/login",component:x,pageClass:"login-page sidemenu-hidden",chromeless:!0},{path:"/invite/:code",component:Pt(()=>e.e(7429).then(e.bind(e,62887))),pageClass:"sidemenu-hidden",chromeless:!0},{path:"/verify",component:l.ZP.verifyEmailEnabled?Pt(()=>e.e(7583).then(e.bind(e,27583))):()=>t.createElement(n.l_,{to:"/signup"}),pageClass:"login-page sidemenu-hidden",chromeless:!0},{path:"/signup",component:l.ZP.disableUserSignUp?()=>t.createElement(n.l_,{to:"/login"}):Pt(()=>e.e(615).then(e.bind(e,40615))),pageClass:"sidemenu-hidden login-page",chromeless:!0},{path:"/user/password/send-reset-email",pageClass:"sidemenu-hidden",chromeless:!0,component:Pt(()=>e.e(133).then(e.bind(e,37673)))},{path:"/user/password/reset",component:Pt(()=>e.e(6848).then(e.bind(e,18310))),pageClass:"sidemenu-hidden login-page",chromeless:!0},{path:"/dashboard/snapshots",component:Pt(()=>e.e(5295).then(e.bind(e,11155)))},{path:"/playlists",component:Pt(()=>e.e(9218).then(e.bind(e,21977)))},{path:"/playlists/play/:uid",component:Pt(()=>e.e(3090).then(e.bind(e,48579)))},{path:"/playlists/new",component:Pt(()=>e.e(9975).then(e.bind(e,29666)))},{path:"/playlists/edit/:uid",component:Pt(()=>e.e(2341).then(e.bind(e,58809)))},{path:"/sandbox/benchmarks",component:Pt(()=>e.e(4908).then(e.bind(e,12902)))},{path:"/sandbox/test",component:Pt(()=>Promise.all([e.e(8016),e.e(8595)]).then(e.bind(e,42594)))},{path:"/dashboards/f/:uid/:slug/library-panels",component:Pt(()=>Promise.all([e.e(3189),e.e(3778)]).then(e.bind(e,42029)))},{path:"/dashboards/f/:uid/:slug/alerting",roles:()=>O.Vt.evaluatePermission(()=>["Viewer","Editor","Admin"],[A.AccessControlAction.AlertingRuleRead]),component:Pt(()=>e.e(1324).then(e.bind(e,30097)))},{path:"/library-panels",component:Pt(()=>Promise.all([e.e(3189),e.e(7878)]).then(e.bind(e,45407)))},{path:"/notifications",component:Pt(()=>e.e(743).then(e.bind(e,86992)))},...Is(),...Zs(),...sn(),...ts(),...It(),...qn(),...Es(),...er(),...es,...dr(),...ut(),{path:"/*",component:s.Z}]}function Is(Xt=l.ZP){return Xt.featureToggles.dashboardsFromStorage?[{path:"/g/:slug*.json",pageClass:"page-dashboard",routeName:A.DashboardRoutes.Path,component:Pt(()=>Promise.all([e.e(1899),e.e(3189),e.e(7638),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(7023),e.e(8016),e.e(8225),e.e(5296)]).then(e.bind(e,53051)))},{path:"/g/:slug*",component:Pt(()=>e.e(6092).then(e.bind(e,60265)))}]:[]}function ts(Xt=l.ZP){return Xt.featureToggles.supportBundles?[{path:"/support-bundles",component:Pt(()=>e.e(9939).then(e.bind(e,57906)))},{path:"/support-bundles/create",component:Pt(()=>e.e(539).then(e.bind(e,46190)))}]:[]}function Zs(Xt=l.ZP){return Xt.featureToggles.scenes?[{path:"/scenes",component:Pt(()=>Promise.all([e.e(6571),e.e(207)]).then(e.bind(e,13190)))},{path:"/scenes/dashboard/:uid",component:Pt(()=>Promise.all([e.e(6571),e.e(207)]).then(e.bind(e,64178)))},{path:"/scenes/embedded/:name",component:Pt(()=>Promise.all([e.e(6571),e.e(207)]).then(e.bind(e,50940)))},{path:"/scenes/:name",component:Pt(()=>Promise.all([e.e(6571),e.e(207)]).then(e.bind(e,23192)))}]:[]}},29408:(H,T,e)=>{"use strict";e.d(T,{U:()=>N,x:()=>F});var t=e(32557),n=e(10655),c=e(14393),s=e(31259),r=e(98864),g=e(61962);const f={navBarTree:g.V4,navIndex:c.G4,appNotifications:r.VW};var o=e(66114),l=e(11626),a=e(56777),m=e(36281),d=e(58790),p=e(71128),h=e(48197),y=e(15932),v=e(75804),i=e(24693),u=e(17283),P=e(46732),E=e(66552),C=e(54294),b=e(45003),S=e(62295),M=e(97189),x=e(46002),O=e(7240),L=e(29427),B=e(70431);const w={...f,...l.ZP,...M.ZP,...a.ZP,...y.ZP,...d.ZP,...h.ZP,...p.ZP,...x.ZP,...b.ZP,...C.ZP,...v.ZP,...u.ZP,...o.ZP,...i.ZP,...m.ZP,...P.ZP,...O.ZP,...S.ZP,plugins:E.I6,[L.C.reducerPath]:L.C.reducer,[n.Rh.reducerPath]:n.Rh.reducer},R={},A=D=>{Object.assign(R,D)},U=()=>{const D=(0,s.combineReducers)({...w,...R});return(Y,j)=>{if(j.type!==B.e.type)return D(Y,j);const{cleanupAction:K}=j.payload;return K(Y),D(Y,j)}};var I=e(3153);function N(D){A(D)}function F(D){const Y=(0,t.xC)({reducer:U(),middleware:j=>j({thunk:!0,serializableCheck:!1,immutableCheck:!1}).concat(L.C.middleware,n.Rh.middleware),devTools:!1,preloadedState:{navIndex:(0,c.Cu)(),...D}});return(0,I.PQ)(Y),Y}},3153:(H,T,e)=>{"use strict";e.d(T,{PQ:()=>c,WI:()=>r,h:()=>n,y0:()=>s});var t=e(7240);let n;function c(g){n=g}function s(){return!n||!n.getState?{templating:{...t.qM,lastKey:"key"}}:n.getState()}function r(g){if(!(!n||!n.getState))return n.dispatch(g)}},73757:(H,T,e)=>{"use strict";e.d(T,{pC:()=>g,zV:()=>r,B5:()=>n,V5:()=>c,bf:()=>s,hw:()=>t,BL:()=>o,vT:()=>l,nl:()=>f,eL:()=>a});var t=(m=>(m[m.Admin=4]="Admin",m[m.Editor=2]="Editor",m[m.Member=0]="Member",m[m.Viewer=1]="Viewer",m))(t||{}),n=(m=>(m.Viewer="Viewer",m.Editor="Editor",m.Admin="Admin",m))(n||{}),c=(m=>(m[m.View=1]="View",m[m.Edit=2]="Edit",m[m.Admin=4]="Admin",m))(c||{}),s=(m=>(m.View="View",m.Edit="Edit",m.Admin="Admin",m))(s||{}),r=(m=>(m[m.Query=1]="Query",m[m.Admin=2]="Admin",m))(r||{}),g=(m=>(m.Team="Team",m.User="User",m.Viewer="Viewer",m.Editor="Editor",m))(g||{});const f=[{value:1,label:"Query",description:"Can query data source."}],o=[{value:"Team",label:"Team"},{value:"User",label:"User"},{value:"Viewer",label:"Everyone With Viewer Role"},{value:"Editor",label:"Everyone With Editor Role"}],l=[{value:1,label:"View",description:"Can view dashboards."},{value:2,label:"Edit",description:"Can add, edit and delete dashboards."},{value:4,label:"Admin",description:"Can add/remove permissions and can add, edit and delete dashboards."}],a=[{value:t.Member,label:"Member",description:"Is team member"},{value:t.Admin,label:"Admin",description:"Can add/remove permissions, members and delete team."}]},20352:()=>{"use strict"},47622:()=>{"use strict"},18285:()=>{"use strict"},56968:()=>{"use strict"},45984:(H,T,e)=>{"use strict";e.d(T,{Ai:()=>r,Dn:()=>S,Eb:()=>E,GL:()=>o,GT:()=>h,Im:()=>i,Jd:()=>x,OW:()=>M,QI:()=>P,Qt:()=>u,RB:()=>L,VJ:()=>b,Wj:()=>m,Xw:()=>a,Yr:()=>w,_B:()=>d,_z:()=>y,hS:()=>p,le:()=>C,nq:()=>g,p8:()=>v,pO:()=>l,xF:()=>B,xt:()=>f,z:()=>O});var t=e(39253),n=e(62316);const c=(0,t.X)("ds-request-response"),s=(0,t.X)("ds-request-error"),r=(0,t.X)("toggle-sidemenu-hidden"),g=(0,t.X)("template-variable-value-updated"),f=(0,t.X)("graph-click"),o=(0,t.X)("threshold-changed");class l extends n.m{}l.type="panel-queries-changed";class a extends n.m{}a.type="panel-transformations-changed";class m extends n.m{}m.type="panels-options-changed";class d extends n.m{}d.type="dashboard-panels-changed";class p extends n.m{}p.type="dashboard-meta-changed";class h extends n.m{}h.type="panel-directive-ready";class y extends n.m{}y.type="render";class v extends n.R{}v.type="zoom-out";var i=(R=>(R[R.Left=-1]="Left",R[R.Right=1]="Right",R))(i||{});class u extends n.R{}u.type="shift-time";class P extends n.m{}P.type="absolute-time";class E extends n.R{}E.type="remove-panel";class C extends n.R{}C.type="show-modal";class b extends n.R{}b.type="show-confirm-modal";class S extends n.R{}S.type="show-react-modal";class M extends n.m{}M.type="hide-modal";class x extends n.m{}x.type="dashboard-saved";class O extends n.R{}O.type="annotation-query-started";class L extends n.R{}L.type="annotation-query-finished";class B extends n.R{}B.type="panel-edit-started";class w extends n.R{}w.type="panel-edit-finished"},3032:(H,T,e)=>{"use strict";e.d(T,{Kd:()=>t,f0:()=>n,zN:()=>s,zQ:()=>c});var t=(r=>(r.left="left",r.right="right",r))(t||{});const n=["lines","bars","points","stacked_lines","stacked_bars"];var c=(r=>(r.table="table",r.raw="raw",r))(c||{});const s=["table","raw"]},59784:()=>{"use strict"},81168:(H,T,e)=>{"use strict";e.d(T,{AccessControlAction:()=>L,AclTarget:()=>o.pC,AppNotificationSeverity:()=>y,AppNotificationTimeout:()=>v,CoreEvents:()=>B,DashboardInitPhase:()=>g,DashboardRoutes:()=>r,DataSourcePermissionLevel:()=>o.zV,EXPLORE_GRAPH_STYLES:()=>u.f0,ExploreId:()=>u.Kd,KioskMode:()=>f,OrgRole:()=>o.B5,PermissionLevelString:()=>o.bf,ServiceAccountStateFilter:()=>m,TABLE_RESULTS_STYLE:()=>u.zQ,TeamPermissionLevel:()=>o.hw,createAsyncThunk:()=>S,dataSourceAclLevels:()=>o.nl,teamsPermissionLevels:()=>o.eL,timeoutMap:()=>i,useDispatch:()=>C,useSelector:()=>b});var t=e(28317),n=e(20352),c=e(88391),s=e(59784),r=(w=>(w.Home="home-dashboard",w.New="new-dashboard",w.Normal="normal-dashboard",w.Path="path-dashboard",w.Scripted="scripted-dashboard",w.Public="public-dashboard",w))(r||{}),g=(w=>(w.NotStarted="Not started",w.Fetching="Fetching",w.Services="Services",w.Failed="Failed",w.Completed="Completed",w))(g||{}),f=(w=>(w.TV="tv",w.Full="full",w))(f||{}),o=e(73757),l=e(47622),a=e(26945),m=(w=>(w.All="All",w.WithExpiredTokens="WithExpiredTokens",w.Disabled="Disabled",w))(m||{}),d=e(56968),p=e(89040),h=e(81146),y=(w=>(w.Success="success",w.Warning="warning",w.Error="error",w.Info="info",w))(y||{}),v=(w=>(w[w.Success=3e3]="Success",w[w.Warning=5e3]="Warning",w[w.Error=7e3]="Error",w))(v||{});const i={success:3e3,warning:5e3,error:7e3,info:3e3};var u=e(3032),P=e(32557),E=e(36635);const C=E.useDispatch,b=E.useSelector,S=(w,R,A)=>(0,P.hg)(w,R,A);var M=e(51904),x=e(18285),O=e(49400),L=(w=>(w.UsersRead="users:read",w.UsersWrite="users:write",w.UsersAuthTokenList="users.authtoken:read",w.UsersAuthTokenUpdate="users.authtoken:write",w.UsersPasswordUpdate="users.password:write",w.UsersDelete="users:delete",w.UsersCreate="users:create",w.UsersEnable="users:enable",w.UsersDisable="users:disable",w.UsersPermissionsUpdate="users.permissions:write",w.UsersLogout="users:logout",w.UsersQuotasList="users.quotas:read",w.UsersQuotasUpdate="users.quotas:write",w.ServiceAccountsRead="serviceaccounts:read",w.ServiceAccountsCreate="serviceaccounts:create",w.ServiceAccountsWrite="serviceaccounts:write",w.ServiceAccountsDelete="serviceaccounts:delete",w.ServiceAccountsPermissionsRead="serviceaccounts.permissions:read",w.ServiceAccountsPermissionsWrite="serviceaccounts.permissions:write",w.OrgsRead="orgs:read",w.OrgsPreferencesRead="orgs.preferences:read",w.OrgsWrite="orgs:write",w.OrgsPreferencesWrite="orgs.preferences:write",w.OrgsCreate="orgs:create",w.OrgsDelete="orgs:delete",w.OrgUsersRead="org.users:read",w.OrgUsersAdd="org.users:add",w.OrgUsersRemove="org.users:remove",w.OrgUsersWrite="org.users:write",w.LDAPUsersRead="ldap.user:read",w.LDAPUsersSync="ldap.user:sync",w.LDAPStatusRead="ldap.status:read",w.DataSourcesExplore="datasources:explore",w.DataSourcesRead="datasources:read",w.DataSourcesCreate="datasources:create",w.DataSourcesWrite="datasources:write",w.DataSourcesDelete="datasources:delete",w.DataSourcesPermissionsRead="datasources.permissions:read",w.DataSourcesCachingRead="datasources.caching:read",w.DataSourcesInsightsRead="datasources.insights:read",w.ActionServerStatsRead="server.stats:read",w.ActionTeamsCreate="teams:create",w.ActionTeamsDelete="teams:delete",w.ActionTeamsRead="teams:read",w.ActionTeamsWrite="teams:write",w.ActionTeamsPermissionsRead="teams.permissions:read",w.ActionTeamsPermissionsWrite="teams.permissions:write",w.ActionRolesList="roles:read",w.ActionTeamsRolesList="teams.roles:read",w.ActionTeamsRolesAdd="teams.roles:add",w.ActionTeamsRolesRemove="teams.roles:remove",w.ActionUserRolesList="users.roles:read",w.ActionUserRolesAdd="users.roles:add",w.ActionUserRolesRemove="users.roles:remove",w.DashboardsRead="dashboards:read",w.DashboardsWrite="dashboards:write",w.DashboardsDelete="dashboards:delete",w.DashboardsCreate="dashboards:create",w.DashboardsPermissionsRead="dashboards.permissions:read",w.DashboardsPermissionsWrite="dashboards.permissions:write",w.DashboardsPublicWrite="dashboards.public:write",w.FoldersRead="folders:read",w.FoldersWrite="folders:write",w.FoldersDelete="folders:delete",w.FoldersCreate="folders:create",w.FoldersPermissionsRead="folders.permissions:read",w.FoldersPermissionsWrite="folders.permissions:write",w.ActionSupportBundlesCreate="support.bundles:create",w.ActionSupportBundlesRead="support.bundles:read",w.ActionSupportBundlesDelete="support.bundles:delete",w.AlertingRuleCreate="alert.rules:create",w.AlertingRuleRead="alert.rules:read",w.AlertingRuleUpdate="alert.rules:write",w.AlertingRuleDelete="alert.rules:delete",w.AlertingInstanceCreate="alert.instances:create",w.AlertingInstanceUpdate="alert.instances:write",w.AlertingInstanceRead="alert.instances:read",w.AlertingNotificationsRead="alert.notifications:read",w.AlertingNotificationsWrite="alert.notifications:write",w.AlertingRuleExternalWrite="alert.rules.external:write",w.AlertingRuleExternalRead="alert.rules.external:read",w.AlertingInstancesExternalWrite="alert.instances.external:write",w.AlertingInstancesExternalRead="alert.instances.external:read",w.AlertingNotificationsExternalWrite="alert.notifications.external:write",w.AlertingNotificationsExternalRead="alert.notifications.external:read",w.AlertingProvisioningRead="alert.provisioning:read",w.AlertingProvisioningWrite="alert.provisioning:write",w.ActionAPIKeysRead="apikeys:read",w.ActionAPIKeysCreate="apikeys:create",w.ActionAPIKeysDelete="apikeys:delete",w.PluginsInstall="plugins:install",w.PluginsWrite="plugins:write",w))(L||{}),B=e(45984)},51904:()=>{"use strict"},88391:()=>{"use strict"},81146:()=>{"use strict"},89040:()=>{"use strict"},49400:()=>{"use strict"},26410:(H,T,e)=>{"use strict";e.d(T,{y:()=>t});var t=(n=>(n.LineChart="Line chart",n.LineChartSmooth="Line chart smooth",n.LineChartGradientColorScheme="Line chart with gradient color scheme",n.AreaChart="Area chart",n.AreaChartStacked="Area chart stacked",n.AreaChartStackedPercent="Area chart 100% stacked",n.BarChart="Bar chart",n.BarChartGradientColorScheme="Bar chart with gradient color scheme",n.BarChartStacked="Bar chart stacked",n.BarChartStackedPercent="Bar chart 100% stacked",n.BarChartHorizontal="Bar chart horizontal",n.BarChartHorizontalStacked="Bar chart horizontal stacked",n.BarChartHorizontalStackedPercent="Bar chart horizontal 100% stacked",n.Candlestick="Candlestick",n.PieChart="Pie chart",n.PieChartDonut="Pie chart donut",n.Stat="Stat",n.StatColoredBackground="Stat colored background",n.Gauge="Gauge",n.GaugeNoThresholds="Gauge no thresholds",n.BarGaugeBasic="Bar gauge basic",n.BarGaugeLCD="Bar gauge LCD",n.Table="Table",n.StateTimeline="State timeline",n.StatusHistory="Status history",n.TextPanel="Text",n.DashboardList="Dashboard list",n.Logs="Logs",n))(t||{})},28317:()=>{"use strict"},46063:(H,T,e)=>{"use strict";e.d(T,{ED:()=>g,I9:()=>c,T8:()=>o,Yb:()=>s,bj:()=>n,g0:()=>l,pz:()=>f,x_:()=>t});var t=(a=>(a.Firing="firing",a.Inactive="inactive",a.Pending="pending",a))(t||{}),n=(a=>(a.Normal="Normal",a.Alerting="Alerting",a.Pending="Pending",a.NoData="NoData",a.Error="Error",a))(n||{});function c(a){return Object.values(t).includes(a)}function s(a){return Object.values(n).some(m=>m===a)}function r(a){return a!==null&&typeof a<"u"&&!Object.values(t).includes(a)}function g(a){return r(a)?a.split(" ")[0]:a}var f=(a=>(a.Alerting="alerting",a.Recording="recording",a))(f||{}),o=(a=>(a.Cortex="Cortex",a.Mimir="Mimir",a.Prometheus="Prometheus",a.Thanos="Thanos",a))(o||{}),l=(a=>(a.Alerting="Alerting",a.NoData="NoData",a.KeepLastState="KeepLastState",a.OK="OK",a.Error="Error",a))(l||{})},26945:()=>{"use strict"},23932:H=>{const T="    ";function e(s){let r="";return s&&Object.keys(s).forEach(function(g){r+=g+":"+s[g]+";"}),r}function t(s){function r(f){return'class="'+f+'"'}function g(f){return'style="'+e(s["."+f])+'"'}return s?g:r}function n(s){return s===null?"null":Array.isArray(s)?"array":typeof s=="string"&&/^https?:/.test(s)?"link":typeof s=="object"&&typeof s.toISOString=="function"?"date":typeof s}function c(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}H.exports=function(s,r){let g="";const f=t(r);let o=function(a,m,d,p){if(!a.length)return m+" "+d;let h=m+`
`;return g+=T,a.forEach(function(y,v){h+=g+p(y)+(v<a.length-1?",":"")+`
`}),g=g.slice(0,-T.length),h+g+d};function l(a){if(a===void 0)return"";switch(n(a)){case"boolean":return"<span "+f("json-markup-bool")+">"+a+"</span>";case"number":return"<span "+f("json-markup-number")+">"+a+"</span>";case"date":return'<span class="json-markup-string">"'+c(a.toISOString())+'"</span>';case"null":return"<span "+f("json-markup-null")+">null</span>";case"string":return"<span "+f("json-markup-string")+'>"'+c(a.replace(/\n/g,`
`+g))+'"</span>';case"link":return"<span "+f("json-markup-string")+'>"<a href="'+encodeURI(a)+'">'+c(a)+'</a>"</span>';case"array":return o(a,"[","]",l);case"object":const m=Object.keys(a).filter(function(d){return a[d]!==void 0});return o(m,"{","}",function(d){return"<span "+f("json-markup-key")+'>"'+c(d)+'":</span> '+l(a[d])})}return""}return"<div "+f("json-markup")+">"+l(s)+"</div>"}},26189:()=>{(function(H){var T={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function e(t){var n={x:-1,y:-1,locked:!1};t.setCrosshair=function(g){if(!g)n.x=-1;else{var f=t.p2c(g);n.x=Math.max(0,Math.min(f.left,t.width())),n.y=Math.max(0,Math.min(f.top,t.height()))}t.triggerRedrawOverlay()},t.clearCrosshair=t.setCrosshair,t.lockCrosshair=function(g){g&&t.setCrosshair(g),n.locked=!0},t.unlockCrosshair=function(){n.locked=!1};function c(r){n.locked||n.x!=-1&&(n.x=-1,t.triggerRedrawOverlay())}function s(r){if(!n.locked){if(t.getSelection&&t.getSelection()){n.x=-1;return}var g=t.offset();n.x=Math.max(0,Math.min(r.pageX-g.left,t.width())),n.y=Math.max(0,Math.min(r.pageY-g.top,t.height())),t.triggerRedrawOverlay()}}t.hooks.bindEvents.push(function(r,g){r.getOptions().crosshair.mode&&(g.mouseout(c),g.mousemove(s))}),t.hooks.drawOverlay.push(function(r,g){var f=r.getOptions().crosshair;if(f.mode){var o=r.getPlotOffset();if(g.save(),g.translate(o.left,o.top),n.x!=-1){var l=r.getOptions().crosshair.lineWidth%2?.5:0;if(g.strokeStyle=f.color,g.lineWidth=f.lineWidth,g.lineJoin="round",g.beginPath(),f.mode.indexOf("x")!=-1){var a=Math.floor(n.x)+l;g.moveTo(a,0),g.lineTo(a,r.height())}if(f.mode.indexOf("y")!=-1){var m=Math.floor(n.y)+l;g.moveTo(0,m),g.lineTo(r.width(),m)}g.stroke()}g.restore()}}),t.hooks.shutdown.push(function(r,g){g.unbind("mouseout",c),g.unbind("mousemove",s)})}H.plot.plugins.push({init:e,options:T,name:"crosshair",version:"1.0"})})(jQuery)},47825:()=>{(function(H){function T(e){e.hooks.processDatapoints.push(function(t,n,c){n.dashes.show&&t.hooks.draw.push(function(s,r){var g=s.getPlotOffset(),f=n.xaxis,o=n.yaxis;function l(p,h){var y=c.points,v=c.pointsize,i=null,u=null,P=0,E=!0,C,b;n.dashes.dashLength[0]?(C=n.dashes.dashLength[0],n.dashes.dashLength[1]?b=n.dashes.dashLength[1]:b=C):b=C=n.dashes.dashLength,r.beginPath();for(var S=v;S<y.length;S+=v){let N=function(F){var D=Math.sqrt(Math.pow(R-B,2)+Math.pow(A-w,2));if(D<=F)return{deltaX:R-B,deltaY:A-w,distance:D,remainder:F-D};var Y=R>B?1:-1,j=A>w?1:-1;return{deltaX:Y*Math.sqrt(Math.pow(F,2)/(1+Math.pow((A-w)/(R-B),2))),deltaY:j*Math.sqrt(Math.pow(F,2)-Math.pow(F,2)/(1+Math.pow((A-w)/(R-B),2))),distance:F,remainder:0}};var I=N,M=y[S-v],x=y[S-v+1],O=y[S],L=y[S+1];if(!(M==null||O==null)){if(x<=L&&x<o.min){if(L<o.min)continue;M=(o.min-x)/(L-x)*(O-M)+M,x=o.min}else if(L<=x&&L<o.min){if(x<o.min)continue;O=(o.min-x)/(L-x)*(O-M)+M,L=o.min}if(x>=L&&x>o.max){if(L>o.max)continue;M=(o.max-x)/(L-x)*(O-M)+M,x=o.max}else if(L>=x&&L>o.max){if(x>o.max)continue;O=(o.max-x)/(L-x)*(O-M)+M,L=o.max}if(M<=O&&M<f.min){if(O<f.min)continue;x=(f.min-M)/(O-M)*(L-x)+x,M=f.min}else if(O<=M&&O<f.min){if(M<f.min)continue;L=(f.min-M)/(O-M)*(L-x)+x,O=f.min}if(M>=O&&M>f.max){if(O>f.max)continue;x=(f.max-M)/(O-M)*(L-x)+x,M=f.max}else if(O>=M&&O>f.max){if(M>f.max)continue;L=(f.max-M)/(O-M)*(L-x)+x,O=f.max}(M!=i||x!=u)&&r.moveTo(f.p2c(M)+p,o.p2c(x)+h);var B=f.p2c(M)+p,w=o.p2c(x)+h,R=f.p2c(O)+p,A=o.p2c(L)+h,U;do U=N(P>0?P:E?C:b),(U.deltaX!=0||U.deltaY!=0)&&(E?r.lineTo(B+U.deltaX,w+U.deltaY):r.moveTo(B+U.deltaX,w+U.deltaY)),E=!E,P=U.remainder,B+=U.deltaX,w+=U.deltaY;while(U.distance>0);i=O,u=L}}r.stroke()}r.save(),r.translate(g.left,g.top),r.lineJoin="round";var a=n.dashes.lineWidth,m=n.shadowSize;if(a>0&&m>0){r.lineWidth=m,r.strokeStyle="rgba(0,0,0,0.1)";var d=Math.PI/18;l(Math.sin(d)*(a/2+m/2),Math.cos(d)*(a/2+m/2)),r.lineWidth=m/2,l(Math.sin(d)*(a/2+m/4),Math.cos(d)*(a/2+m/4))}r.lineWidth=a,r.strokeStyle=n.color,a>0&&l(0,0),r.restore()})})}H.plot.plugins.push({init:T,options:{series:{dashes:{show:!1,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})})(jQuery)},28844:()=>{(function(H){"use strict";var T={series:{fillBelowTo:null}};function e(t){function n(r,g){var f;for(f=0;f<g.length;++f)if(g[f].id===r.fillBelowTo)return g[f];return null}function c(r,g,f,o,l,a,m,d){var p,h,y,v,i,u;return p=f-r,h=o-g,y=m-l,v=d-a,i=(-h*(r-l)+p*(g-a))/(-y*h+p*v),u=(y*(g-a)-v*(r-l))/(-y*h+p*v),i>=0&&i<=1&&u>=0&&u<=1?[r+u*p,g+u*h]:null}function s(r,g,f){if(f.fillBelowTo===null)return;var o,l,a,m,d,p,h;function y(b,S){g.beginPath(),g.moveTo(f.xaxis.p2c(b)+p.left,f.yaxis.p2c(S)+p.top)}function v(){g.closePath(),g.fill()}function i(){if(a.length/l!==d.length/m)return console.error("Refusing to graph inconsistent number of points"),!1;var b;for(b=0;b<a.length/l;b++)if(a[b*l]!==null&&d[b*m]!==null&&a[b*l]!==d[b*m])return console.error("Refusing to graph points without matching value"),!1;return!0}function u(b,S){console.assert(S>b,"expects the end index to be greater than the start index");var M=b===0||a[b-1]===null||d[b-1]===null,x=!1,O,L;for(O=b;O<S;O++)if(a[O*l+1]===null||d[O*l+1]===null)x=!1,M=!0;else if(a[O*l+1]===d[O*m+1])x=!0,M=!1;else if(a[O*l+1]>d[O*m+1]){M?y(a[O*l],a[O*l+1]):x?y(a[(O-1)*l],a[(O-1)*l+1]):(L=P(O),y(L[0],L[1])),C(O,S);return}else M=!1,x=!1}function P(b){console.assert(b>0,"expects the second point in the series line segment");var S,M;for(S=1;S<d.length/m;S++)if(M=c(a[(b-1)*l],a[(b-1)*l+1],a[b*l],a[b*l+1],d[(S-1)*m],d[(S-1)*m+1],d[S*m],d[S*m+1]),M!==null)return M;console.error("intersectionPoint() should only be called when an intersection happens")}function E(b,S){console.assert(b>=S,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var M;for(M=b;M>=S;M--)g.lineTo(o.xaxis.p2c(d[M*m])+p.left,o.yaxis.p2c(d[M*m+1])+p.top);v()}function C(b,S){console.assert(b<=S,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var M,x;for(M=b;M<S;M++)if(a[M*l+1]===null&&M>b){E(M-1,b),u(M,S);return}else if(a[M*l+1]===d[M*m+1]){E(M,b),u(M,S);return}else if(a[M*l+1]<d[M*m+1]){x=P(M),g.lineTo(f.xaxis.p2c(x[0])+p.left,f.yaxis.p2c(x[1])+p.top),E(M,b),u(M,S);return}else g.lineTo(f.xaxis.p2c(a[M*l])+p.left,f.yaxis.p2c(a[M*l+1])+p.top);E(S,b)}o=n(f,r.getData()),o&&(l=f.datapoints.pointsize,a=f.datapoints.points,m=o.datapoints.pointsize,d=o.datapoints.points,p=r.getPlotOffset(),i()&&(h=H.color.parse(f.color),h.a=.4,h.normalize(),g.fillStyle=h.toString(),u(0,a.length/l)))}t.hooks.drawSeries.push(s)}H.plot.plugins.push({init:e,options:T,name:"fillbelow",version:"0.1.0"})})(jQuery)},7540:()=>{/*!
 * jquery.flot.gauge v1.1.0 *
 *
 * Flot plugin for rendering gauge charts.
 *
 * Copyright (c) 2015 @toyoty99.
 * Licensed under the MIT license.
 */(function(H){var T=function(){var f,o,l,a,m,d,p=function(b,S){f=S,o=b.getPlaceholder(),l=b.getOptions(),a=l.series.gauges,m=b.getData(),d=e(a.debug)};p.prototype.calculateLayout=function(){var b=o.width(),S=o.height(),M=Math.min(m.length,a.layout.columns),x=Math.ceil(m.length/M),O=a.layout.margin,L=a.layout.hMargin,B=a.layout.vMargin,w=(b-O*2-L*(M-1))/M,R=(S-O*2-B*(x-1))/x;if(a.layout.square){var A=Math.min(w,R);w=A,R=A}h(a,w);var U=a.cell.margin,I=0,N=0;a.label.show&&(I=a.label.margin,N=a.label.font.size);var F=0,D=0;a.value.show&&(F=a.value.margin,D=a.value.font.size);var Y=0;a.threshold.show&&(Y=a.threshold.width);var j=0,K=0;a.threshold.label.show&&(j=a.threshold.label.margin,K=a.threshold.label.font.size);for(var z=w/2-U-Y-j*2-K,Z=a.gauge.startAngle,ae=a.gauge.endAngle,J=(ae-Z)/100,oe=-1,Ee=Z;Ee<ae;Ee+=J)oe=Math.max(oe,Math.sin(c(Ee)));oe=Math.max(oe,Math.sin(c(ae)));var me=(R-U*2-I*2-N)/(1+oe);me*oe<F+D/2&&(me=R-U*2-I*2-N-F-D/2);var re=me-j*2-K-Y,le=Math.min(z,re),pe=a.gauge.width;pe>=le&&(pe=Math.max(3,le/3));var ee=j*2+K+Y+le,se=Math.max(ee*(1+oe),ee+F+D/2);return{canvasWidth:b,canvasHeight:S,margin:O,hMargin:L,vMargin:B,columns:M,rows:x,cellWidth:w,cellHeight:R,cellMargin:U,labelMargin:I,labelFontSize:N,valueMargin:F,valueFontSize:D,width:pe,radius:le,thresholdWidth:Y,thresholdLabelMargin:j,thresholdLabelFontSize:K,gaugeOuterHeight:se}};function h(b,S){b.gauge.width==="auto"&&(b.gauge.width=Math.max(5,S/8)),b.label.margin==="auto"&&(b.label.margin=Math.max(1,S/20)),b.label.font.size==="auto"&&(b.label.font.size=Math.max(5,S/8)),b.value.margin==="auto"&&(b.value.margin=Math.max(1,S/30)),b.value.font.size==="auto"&&(b.value.font.size=Math.max(5,S/9)),b.threshold.width==="auto"&&(b.threshold.width=Math.max(3,S/100)),b.threshold.label.margin==="auto"&&(b.threshold.label.margin=Math.max(3,S/40)),b.threshold.label.font.size==="auto"&&(b.threshold.label.font.size=Math.max(5,S/15))}p.prototype.calculateAutoValues=h,p.prototype.calculateCellLayout=function(b,S,M){var x=t(S.columns,M),O=n(S.columns,M),L=S.margin+(S.cellWidth+S.hMargin)*x,B=S.margin+(S.cellHeight+S.vMargin)*O,w=L+S.cellWidth/2,R=B+S.cellMargin+S.labelMargin*2+S.labelFontSize+S.thresholdWidth+S.thresholdLabelFontSize+S.thresholdLabelMargin*2+S.radius,A=S.cellHeight-S.cellMargin*2-S.labelMargin*2-S.labelFontSize-S.gaugeOuterHeight,U=0;return b.cell.vAlign==="middle"?U=A/2:b.cell.vAlign==="bottom"&&(U=A),R+=U,{col:x,row:O,x:L,y:B,offsetY:U,cellWidth:S.cellWidth,cellHeight:S.cellHeight,cellMargin:S.cellMargin,cx:w,cy:R}},p.prototype.drawBackground=function(b){a.frame.show&&(f.save(),f.strokeStyle=l.grid.borderColor,f.lineWidth=l.grid.borderWidth,f.strokeRect(0,0,b.canvasWidth,b.canvasHeight),l.grid.backgroundColor&&(f.fillStyle=l.grid.backgroundColor,f.fillRect(0,0,b.canvasWidth,b.canvasHeight)),f.restore())},p.prototype.drawCellBackground=function(b,S){f.save(),b.cell.border&&b.cell.border.show&&b.cell.border.color&&b.cell.border.width&&(f.strokeStyle=b.cell.border.color,f.lineWidth=b.cell.border.width,f.strokeRect(S.x,S.y,S.cellWidth,S.cellHeight)),b.cell.background&&b.cell.background.color&&(f.fillStyle=b.cell.background.color,f.fillRect(S.x,S.y,S.cellWidth,S.cellHeight)),f.restore()},p.prototype.drawGauge=function(b,S,M,x,O){var L=b.gauge.shadow.show?b.gauge.shadow.blur:0,B=i(b,O),w=y(b,S,O);P(M.cx,M.cy,S.radius,S.width,c(b.gauge.startAngle),c(b.gauge.endAngle),b.gauge.border.color,b.gauge.border.width,b.gauge.background.color,L),P(M.cx,M.cy,S.radius-1,S.width-2,c(w.a1),c(w.a2),B,1,B,L),b.gauge.neutralValue!=null&&v(b,S,M,B)};function y(b,S,M){let x={};var O=b.gauge.neutralValue;return O!=null?M<O?(x.a1=u(b,S,M),x.a2=u(b,S,O)):(x.a1=u(b,S,O),x.a2=u(b,S,M)):(x.a1=b.gauge.startAngle,x.a2=u(b,S,M)),x}function v(b,S,M,x){var O=(b.gauge.max-b.gauge.min)/600;s(f,M.cx,M.cy,S.radius-2,S.width-4,c(u(b,S,b.gauge.neutralValue-O)),c(u(b,S,b.gauge.neutralValue+O)),x,2,b.gauge.background.color)}function i(b,S){for(var M,x=0;x<b.threshold.values.length;x++){var O=b.threshold.values[x];if(M=O.color,S<O.value)break}return M}function u(b,S,M){var x=b.gauge.startAngle+(b.gauge.endAngle-b.gauge.startAngle)*((M-b.gauge.min)/(b.gauge.max-b.gauge.min));return x<b.gauge.startAngle?x=b.gauge.startAngle:x>b.gauge.endAngle&&(x=b.gauge.endAngle),x}p.prototype.drawThreshold=function(b,S,M){for(var x=b.gauge.startAngle,O=0;O<b.threshold.values.length;O++){var L=b.threshold.values[O];c1=L.color,a2=u(b,S,L.value),s(f,M.cx,M.cy,S.radius+S.thresholdWidth,S.thresholdWidth-2,c(x),c(a2),c1,1,c1),x=a2}};function P(b,S,M,x,O,L,B,w,R,A){O!==L&&(f.save(),s(f,b,S,M,x,O,L,B,w,R),A&&(s(f,b,S,M,x,O,L),f.clip(),f.shadowOffsetX=0,f.shadowOffsetY=0,f.shadowBlur=10,f.shadowColor="gray",s(f,b,S,M+1,x+2,O,L,B,1)),f.restore())}p.prototype.drawLable=function(b,S,M,x,O){C(M.cx,M.y+M.cellMargin+S.labelMargin+M.offsetY,"flotGaugeLabel"+x,b.label.formatter?b.label.formatter(O.label,O.data[0][1]):text,b.label)},p.prototype.drawValue=function(b,S,M,x,O){C(M.cx,M.cy-b.value.font.size/2,"flotGaugeValue"+x,b.value.formatter?b.value.formatter(O.label,O.data[0][1]):text,b.value)},p.prototype.drawThresholdValues=function(b,S,M,x){E(b,S,M,"Min"+x,b.gauge.min,b.gauge.startAngle),E(b,S,M,"Max"+x,b.gauge.max,b.gauge.endAngle);for(var O=0;O<b.threshold.values.length;O++){var L=b.threshold.values[O];if(L.value>b.gauge.min&&L.value<b.gauge.max){var B=u(b,S,L.value);E(b,S,M,x+"_"+O,L.value,B)}}var w=b.gauge.neutralValue;w!=null&&w>b.gauge.min&&w<b.gauge.max&&E(b,S,M,"Neutral"+x,w,u(b,S,w))};function E(b,S,M,x,O,L){C(M.cx+(S.thresholdLabelMargin+S.thresholdLabelFontSize/2+S.radius)*Math.cos(c(L)),M.cy+(S.thresholdLabelMargin+S.thresholdLabelFontSize/2+S.radius)*Math.sin(c(L)),"flotGaugeThresholdValue"+x,b.threshold.label.formatter?b.threshold.label.formatter(O):O,b.threshold.label,L)}function C(b,S,M,x,O,L){var B=H(o).find("#"+M),w=B.length;w||(B=H("<span></span>"),B.attr("id",M),B.attr("class","flot-temp-elem"),o.append(B)),B.css("position","absolute"),B.css("top",S+"px"),B.css("white-space","nowrap"),O.font.size&&B.css("font-size",O.font.size+"px"),O.font.family&&B.css("font-family",O.font.family),O.color&&B.css("color",O.color),O.background.color&&B.css("background-color",O.background.color),O.background.opacity&&B.css("opacity",O.background.opacity),B.text(x),B.css("left",b+"px"),B.css("left",parseInt(B.css("left"))-B.width()/2+"px"),!w&&L&&(B.css("top",parseInt(B.css("top"))-B.height()/2+"px"),B.css("transform","rotate("+(180*L+90)+"deg)"))}return p}();function e(f){return typeof Logger<"u"?new Logger(f):null}function t(f,o){return o%f}function n(f,o){return Math.floor(o/f)}function c(f){return f*Math.PI}function s(f,o,l,a,m,d,p,h,y,v){if(d!==p){var i=!1;f.save(),f.beginPath(),f.arc(o,l,a,d,p,i),f.lineTo(o+(a-m)*Math.cos(p),l+(a-m)*Math.sin(p)),f.arc(o,l,a-m,p,d,!i),f.closePath(),y&&(f.lineWidth=y),h&&(f.strokeStyle=h,f.stroke()),v&&(f.fillStyle=v,f.fill()),f.restore()}}function r(f){f.hooks.processOptions.push(function(o,l){var a=e(l.series.gauges.debug);l.series.gauges.show&&(l.grid.show=!1,l.legend.show=!1);var m=l.series.gauges.threshold.values;m.sort(function(d,p){return d.value<p.value?-1:d.value>p.value?1:0})}),f.hooks.draw.push(function(o,l){var a=o.getOptions(),m=a.series.gauges,d=e(m.debug);if(m.show){var p=o.getData();if(!(!p||!p.length)){var h=new T(o,l),y=h.calculateLayout();m.debug.layout,h.drawBackground(y);for(var v=0;v<p.length;v++){var i=p[v],u=H.extend({},m,i.gauges);i.gauges&&h.calculateAutoValues(u,y.cellWidth);var P=h.calculateCellLayout(u,y,v);h.drawCellBackground(u,P),u.debug.layout,u.label.show&&h.drawLable(u,y,P,v,i),h.drawGauge(u,y,P,i.label,i.data[0][1]),u.threshold.show&&h.drawThreshold(u,y,P),u.threshold.label.show&&h.drawThresholdValues(u,y,P,v),u.value.show&&h.drawValue(u,y,P,v,i)}}}})}var g={series:{gauges:{debug:{log:!1,layout:!1,alert:!1},show:!1,layout:{margin:5,columns:3,hMargin:5,vMargin:5,square:!1},frame:{show:!0},cell:{background:{color:null},border:{show:!0,color:"black",width:1},margin:5,vAlign:"middle"},gauge:{width:"auto",startAngle:.9,endAngle:2.1,min:0,max:100,background:{color:"white"},border:{color:"lightgray",width:2},shadow:{show:!0,blur:5}},label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(f,o){return f}},value:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(f,o){return parseInt(o)}},threshold:{show:!0,width:"auto",label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:",sans-serif"},color:null,formatter:function(f){return f}},values:[]}}}};H.plot.plugins.push({init:r,options:g,name:"gauge",version:"1.1.0"})})(jQuery)},89377:()=>{(function(H){H.color={},H.color.make=function(e,t,n,c){var s={};return s.r=e||0,s.g=t||0,s.b=n||0,s.a=c??1,s.add=function(r,g){for(var f=0;f<r.length;++f)s[r.charAt(f)]+=g;return s.normalize()},s.scale=function(r,g){for(var f=0;f<r.length;++f)s[r.charAt(f)]*=g;return s.normalize()},s.toString=function(){return s.a>=1?"rgb("+[s.r,s.g,s.b].join(",")+")":"rgba("+[s.r,s.g,s.b,s.a].join(",")+")"},s.normalize=function(){function r(g,f,o){return f<g?g:f>o?o:f}return s.r=r(0,parseInt(s.r),255),s.g=r(0,parseInt(s.g),255),s.b=r(0,parseInt(s.b),255),s.a=r(0,s.a,1),s},s.clone=function(){return H.color.make(s.r,s.b,s.g,s.a)},s.normalize()},H.color.extract=function(e,t){var n;do{if(n=e.css(t).toLowerCase(),n!=""&&n!="transparent")break;e=e.parent()}while(e.length&&!H.nodeName(e.get(0),"body"));return n=="rgba(0, 0, 0, 0)"&&(n="transparent"),H.color.parse(n)},H.color.parse=function(e){var t,n=H.color.make;if(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10));if(t=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),parseFloat(t[4]));if(t=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55);if(t=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55,parseFloat(t[4]));if(t=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return n(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16));if(t=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return n(parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16));var c=H.trim(e).toLowerCase();return c=="transparent"?n(255,255,255,0):(t=T[c]||[0,0,0],n(t[0],t[1],t[2]))};var T={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery),function(H){var T=Object.prototype.hasOwnProperty;H.fn.detach||(H.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});function e(c,s){var r=s.children("."+c)[0];if(r==null&&(r=document.createElement("canvas"),r.className=c,H(r).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(s),!r.getContext))if(window.G_vmlCanvasManager)r=window.G_vmlCanvasManager.initElement(r);else throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=r;var g=this.context=r.getContext("2d"),f=window.devicePixelRatio||1,o=g.webkitBackingStorePixelRatio||g.mozBackingStorePixelRatio||g.msBackingStorePixelRatio||g.oBackingStorePixelRatio||g.backingStorePixelRatio||1;this.pixelRatio=f/o,this.resize(s.width(),s.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}e.prototype.resize=function(c,s){if(c<=0||s<=0)throw new Error("Invalid dimensions for plot, width = "+c+", height = "+s);var r=this.element,g=this.context,f=this.pixelRatio;this.width!=c&&(r.width=c*f,r.style.width=c+"px",this.width=c),this.height!=s&&(r.height=s*f,r.style.height=s+"px",this.height=s),g.restore(),g.save(),g.scale(f,f)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var c=this._textCache;for(var s in c)if(T.call(c,s)){var r=this.getTextLayer(s),g=c[s];r.hide();for(var f in g)if(T.call(g,f)){var o=g[f];for(var l in o)if(T.call(o,l)){for(var a=o[l].positions,m=0,d;d=a[m];m++)d.active?d.rendered||(r.append(d.element),d.rendered=!0):(a.splice(m--,1),d.rendered&&d.element.detach());a.length==0&&delete o[l]}}r.show()}},e.prototype.getTextLayer=function(c){var s=this.text[c];return s==null&&(this.textContainer==null&&(this.textContainer=H("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),s=this.text[c]=H("<div></div>").addClass(c).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),s},e.prototype.getTextInfo=function(c,s,r,g,f){var o,l,a,m;if(s=""+s,typeof r=="object"?o=r.style+" "+r.variant+" "+r.weight+" "+r.size+"px/"+r.lineHeight+"px "+r.family:o=r,l=this._textCache[c],l==null&&(l=this._textCache[c]={}),a=l[o],a==null&&(a=l[o]={}),m=a[s],m==null){var d=H("<div></div>").html(s).css({position:"absolute","max-width":f,top:-9999}).appendTo(this.getTextLayer(c));typeof r=="object"?d.css({font:o,color:r.color}):typeof r=="string"&&d.addClass(r),m=a[s]={element:d,positions:[]};var p=this._textSizeCache[s];p?(m.width=p.width,m.height=p.height):(m.width=d.outerWidth(!0),m.height=d.outerHeight(!0),this._textSizeCache[s]={width:m.width,height:m.height}),d.detach()}return m},e.prototype.addText=function(c,s,r,g,f,o,l,a,m){var d=this.getTextInfo(c,g,f,o,l),p=d.positions;a=="center"?s-=d.width/2:a=="right"&&(s-=d.width),m=="middle"?r-=d.height/2:m=="bottom"&&(r-=d.height);for(var h=0,y;y=p[h];h++)if(y.x==s&&y.y==r){y.active=!0;return}y={active:!0,rendered:!1,element:p.length?d.element.clone():d.element,x:s,y:r},p.push(y),y.element.css({top:Math.round(r),left:Math.round(s),"text-align":a})},e.prototype.removeText=function(c,s,r,g,f,o){if(g==null){var l=this._textCache[c];if(l!=null){for(var a in l)if(T.call(l,a)){var m=l[a];for(var d in m)if(T.call(m,d))for(var p=m[d].positions,h=0,y;y=p[h];h++)y.active=!1}}}else for(var p=this.getTextInfo(c,g,f,o).positions,h=0,y;y=p[h];h++)y.x==s&&y.y==r&&(y.active=!1)};function t(c,s,r,g){var f=[],o={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:16.666666666666668},hooks:{}},l=null,a=null,m=null,d=null,p=null,h=[],y=[],v={left:0,right:0,top:0,bottom:0},i=0,u=0,P={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},E=this;E.setData=M,E.setupGrid=Z,E.draw=re,E.getPlaceholder=function(){return c},E.getCanvas=function(){return l.element},E.getPlotOffset=function(){return v},E.width=function(){return i},E.height=function(){return u},E.offset=function(){var ce=m.offset();return ce.left+=v.left,ce.top+=v.top,ce},E.getData=function(){return f},E.getAxes=function(){var ce={},be;return H.each(h.concat(y),function(Te,Ke){Ke&&(ce[Ke.direction+(Ke.n!=1?Ke.n:"")+"axis"]=Ke)}),ce},E.getXAxes=function(){return h},E.getYAxes=function(){return y},E.c2p=B,E.p2c=w,E.getOptions=function(){return o},E.highlight=at,E.unhighlight=Xe,E.triggerRedrawOverlay=Je,E.pointOffset=function(ce){return{left:parseInt(h[O(ce,"x")-1].p2c(+ce.x)+v.left,10),top:parseInt(y[O(ce,"y")-1].p2c(+ce.y)+v.top,10)}},E.shutdown=F,E.destroy=function(){F(),c.removeData("plot").empty(),f=[],o=null,l=null,a=null,m=null,d=null,p=null,h=[],y=[],P=null,ue=[],E=null},E.resize=function(){var ce=c.width(),be=c.height();l.resize(ce,be),a.resize(ce,be)},E.hooks=P,b(E),S(r),I(),M(s),Z(),re(),N();function C(ce,be){be=[E].concat(be);for(var Te=0;Te<ce.length;++Te)ce[Te].apply(this,be)}function b(){for(var ce={Canvas:e},be=0;be<g.length;++be){var Te=g[be];Te.init(E,ce),Te.options&&H.extend(!0,o,Te.options)}}function S(ce){H.extend(!0,o,ce),ce&&ce.colors&&(o.colors=ce.colors),o.xaxis.color==null&&(o.xaxis.color=H.color.parse(o.grid.color).scale("a",.22).toString()),o.yaxis.color==null&&(o.yaxis.color=H.color.parse(o.grid.color).scale("a",.22).toString()),o.xaxis.tickColor==null&&(o.xaxis.tickColor=o.grid.tickColor||o.xaxis.color),o.yaxis.tickColor==null&&(o.yaxis.tickColor=o.grid.tickColor||o.yaxis.color),o.grid.borderColor==null&&(o.grid.borderColor=o.grid.color),o.grid.tickColor==null&&(o.grid.tickColor=H.color.parse(o.grid.color).scale("a",.22).toString());var be,Te,Ke,ge=c.css("font-size"),Me=ge?+ge.replace("px",""):13,ye={style:c.css("font-style"),size:Math.round(.8*Me),variant:c.css("font-variant"),weight:c.css("font-weight"),family:c.css("font-family")};for(Ke=o.xaxes.length||1,be=0;be<Ke;++be)Te=o.xaxes[be],Te&&!Te.tickColor&&(Te.tickColor=Te.color),Te=H.extend(!0,{},o.xaxis,Te),o.xaxes[be]=Te,Te.font&&(Te.font=H.extend({},ye,Te.font),Te.font.color||(Te.font.color=Te.color),Te.font.lineHeight||(Te.font.lineHeight=Math.round(Te.font.size*1.15)));for(Ke=o.yaxes.length||1,be=0;be<Ke;++be)Te=o.yaxes[be],Te&&!Te.tickColor&&(Te.tickColor=Te.color),Te=H.extend(!0,{},o.yaxis,Te),o.yaxes[be]=Te,Te.font&&(Te.font=H.extend({},ye,Te.font),Te.font.color||(Te.font.color=Te.color),Te.font.lineHeight||(Te.font.lineHeight=Math.round(Te.font.size*1.15)));for(o.xaxis.noTicks&&o.xaxis.ticks==null&&(o.xaxis.ticks=o.xaxis.noTicks),o.yaxis.noTicks&&o.yaxis.ticks==null&&(o.yaxis.ticks=o.yaxis.noTicks),o.x2axis&&(o.xaxes[1]=H.extend(!0,{},o.xaxis,o.x2axis),o.xaxes[1].position="top",o.x2axis.min==null&&(o.xaxes[1].min=null),o.x2axis.max==null&&(o.xaxes[1].max=null)),o.y2axis&&(o.yaxes[1]=H.extend(!0,{},o.yaxis,o.y2axis),o.yaxes[1].position="right",o.y2axis.min==null&&(o.yaxes[1].min=null),o.y2axis.max==null&&(o.yaxes[1].max=null)),o.grid.coloredAreas&&(o.grid.markings=o.grid.coloredAreas),o.grid.coloredAreasColor&&(o.grid.markingsColor=o.grid.coloredAreasColor),o.lines&&H.extend(!0,o.series.lines,o.lines),o.points&&H.extend(!0,o.series.points,o.points),o.bars&&H.extend(!0,o.series.bars,o.bars),o.shadowSize!=null&&(o.series.shadowSize=o.shadowSize),o.highlightColor!=null&&(o.series.highlightColor=o.highlightColor),be=0;be<o.xaxes.length;++be)R(h,be+1).options=o.xaxes[be];for(be=0;be<o.yaxes.length;++be)R(y,be+1).options=o.yaxes[be];for(var fe in P)o.hooks[fe]&&o.hooks[fe].length&&(P[fe]=P[fe].concat(o.hooks[fe]));C(P.processOptions,[o])}function M(ce){f=x(ce),A(),U()}function x(ce){for(var be=[],Te=0;Te<ce.length;++Te){var Ke=H.extend(!0,{},o.series);ce[Te].data!=null?(Ke.data=ce[Te].data,delete ce[Te].data,H.extend(!0,Ke,ce[Te]),ce[Te].data=Ke.data):Ke.data=ce[Te],be.push(Ke)}return be}function O(ce,be){var Te=ce[be+"axis"];return typeof Te=="object"&&(Te=Te.n),typeof Te!="number"&&(Te=1),Te}function L(){return H.grep(h.concat(y),function(ce){return ce})}function B(ce){var be={},Te,Ke;for(Te=0;Te<h.length;++Te)Ke=h[Te],Ke&&(be["x"+Ke.n]=Ke.c2p(ce.left));for(Te=0;Te<y.length;++Te)Ke=y[Te],Ke&&(be["y"+Ke.n]=Ke.c2p(ce.top));return be.x1!==void 0&&(be.x=be.x1),be.y1!==void 0&&(be.y=be.y1),be}function w(ce){var be={},Te,Ke,ge;for(Te=0;Te<h.length;++Te)if(Ke=h[Te],Ke&&Ke.used&&(ge="x"+Ke.n,ce[ge]==null&&Ke.n==1&&(ge="x"),ce[ge]!=null)){be.left=Ke.p2c(ce[ge]);break}for(Te=0;Te<y.length;++Te)if(Ke=y[Te],Ke&&Ke.used&&(ge="y"+Ke.n,ce[ge]==null&&Ke.n==1&&(ge="y"),ce[ge]!=null)){be.top=Ke.p2c(ce[ge]);break}return be}function R(ce,be){return ce[be-1]||(ce[be-1]={n:be,direction:ce==h?"x":"y",options:H.extend(!0,{},ce==h?o.xaxis:o.yaxis)}),ce[be-1]}function A(){var ce=f.length,be=-1,Te;for(Te=0;Te<f.length;++Te){var Ke=f[Te].color;Ke!=null&&(ce--,typeof Ke=="number"&&Ke>be&&(be=Ke))}ce<=be&&(ce=be+1);var ge,Me=[],ye=o.colors,fe=ye.length,he=0;for(Te=0;Te<ce;Te++)ge=H.color.parse(ye[Te%fe]||"#666"),Te%fe==0&&Te&&(he>=0?he<.5?he=-he-.2:he=0:he=-he),Me[Te]=ge.scale("rgb",1+he);var De=0,Ae;for(Te=0;Te<f.length;++Te){if(Ae=f[Te],Ae.color==null?(Ae.color=Me[De].toString(),++De):typeof Ae.color=="number"&&(Ae.color=Me[Ae.color].toString()),Ae.lines.show==null){var Ne,Ze=!0;for(Ne in Ae)if(Ae[Ne]&&Ae[Ne].show){Ze=!1;break}Ze&&(Ae.lines.show=!0)}Ae.lines.zero==null&&(Ae.lines.zero=!!Ae.lines.fill),Ae.xaxis=R(h,O(Ae,"x")),Ae.yaxis=R(y,O(Ae,"y"))}}function U(){var ce=Number.POSITIVE_INFINITY,be=Number.NEGATIVE_INFINITY,Te=Number.MAX_VALUE,Ke,ge,Me,ye,fe,he,De,Ae,Ne,Ze,Se,Ue,Qe,pt,bt,yt;function Mt(ut,nt,vt){nt<ut.datamin&&nt!=-Te&&(ut.datamin=nt),vt>ut.datamax&&vt!=Te&&(ut.datamax=vt)}for(H.each(L(),function(ut,nt){nt.datamin=ce,nt.datamax=be,nt.used=!1}),Ke=0;Ke<f.length;++Ke)he=f[Ke],he.datapoints={points:[]},C(P.processRawData,[he,he.data,he.datapoints]);for(Ke=0;Ke<f.length;++Ke){if(he=f[Ke],bt=he.data,yt=he.datapoints.format,!yt){if(yt=[],yt.push({x:!0,number:!0,required:!0}),yt.push({y:!0,number:!0,required:!0}),he.stack||he.bars.show||he.lines.show&&he.lines.fill){var At=!!(he.bars.show&&he.bars.zero||he.lines.show&&he.lines.zero);yt.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:At}),he.bars.horizontal&&(delete yt[yt.length-1].y,yt[yt.length-1].x=!0)}he.datapoints.format=yt}if(he.datapoints.pointsize==null){he.datapoints.pointsize=yt.length,Ae=he.datapoints.pointsize,De=he.datapoints.points;var Pt=he.lines.show&&he.lines.steps;for(he.xaxis.used=he.yaxis.used=!0,ge=Me=0;ge<bt.length;++ge,Me+=Ae){pt=bt[ge];var rn=pt==null;if(!rn)for(ye=0;ye<Ae;++ye)Ue=pt[ye],Qe=yt[ye],Qe&&(Qe.number&&Ue!=null&&(Ue=+Ue,isNaN(Ue)?Ue=null:Ue==1/0?Ue=Te:Ue==-1/0&&(Ue=-Te)),Ue==null&&(Qe.required&&(rn=!0),Qe.defaultValue!=null&&(Ue=Qe.defaultValue))),De[Me+ye]=Ue;if(rn)for(ye=0;ye<Ae;++ye)Ue=De[Me+ye],Ue!=null&&(Qe=yt[ye],Qe.autoscale!==!1&&(Qe.x&&Mt(he.xaxis,Ue,Ue),Qe.y&&Mt(he.yaxis,Ue,Ue))),De[Me+ye]=null;if(Pt&&Me>0&&(!rn||De[Me-Ae]!=null)){for(ye=0;ye<Ae;++ye)De[Me+Ae+ye]=De[Me+ye];De[Me+1]=De[Me-Ae+1]||0,rn&&(De[Me]=pt[0]),Me+=Ae}}}}for(Ke=0;Ke<f.length;++Ke){if(he=f[Ke],De=he.datapoints.points,Ae=he.datapoints.pointsize,he.transform==="negative-Y")for(ge=0;ge<De.length;ge+=Ae)De[ge]!=null&&(Ue=De[ge+1],De[ge+1]=-Ue);C(P.processDatapoints,[he,he.datapoints])}for(Ke=0;Ke<f.length;++Ke){he=f[Ke],De=he.datapoints.points,Ae=he.datapoints.pointsize,yt=he.datapoints.format;var Fn=ce,kn=ce,Jn=be,qn=be;for(ge=0;ge<De.length;ge+=Ae)if(De[ge]!=null)for(ye=0;ye<Ae;++ye)Ue=De[ge+ye],Qe=yt[ye],!(!Qe||Qe.autoscale===!1||Ue==Te||Ue==-Te)&&(Qe.x&&(Ue<Fn&&(Fn=Ue),Ue>Jn&&(Jn=Ue)),Qe.y&&(Ue<kn&&(kn=Ue),Ue>qn&&(qn=Ue)));if(he.bars.show){var Ut;switch(he.bars.align){case"left":Ut=0;break;case"right":Ut=-he.bars.barWidth;break;default:Ut=-he.bars.barWidth/2}he.bars.horizontal?(kn+=Ut,qn+=Ut+he.bars.barWidth):(Fn+=Ut,Jn+=Ut+he.bars.barWidth)}Mt(he.xaxis,Fn,Jn),Mt(he.yaxis,kn,qn)}H.each(L(),function(ut,nt){nt.datamin==ce&&(nt.datamin=null),nt.datamax==be&&(nt.datamax=null)})}function I(){c.find(".flot-temp-elem").remove(),c.css("position")=="static"&&c.css("position","relative"),l=new e("flot-base",c),a=new e("flot-overlay",c),d=l.context,p=a.context,m=H(a.element).unbind();var ce=c.data("plot");ce&&(ce.shutdown(),a.clear()),c.data("plot",E)}function N(){o.grid.hoverable&&(m.mousemove(Ie),m.bind("mouseleave",we),H(document).bind("touchend",_e)),o.grid.clickable&&m.click(Re),C(P.bindEvents,[m])}function F(){Oe&&clearTimeout(Oe),m.unbind("mousemove",Ie),m.unbind("mouseleave",we),m.unbind("click",Re),H(document).unbind("touchend",_e),C(P.shutdown,[m])}function D(ce){function be(ye){return ye}var Te,Ke,ge=ce.options.transform||be,Me=ce.options.inverseTransform;ce.direction=="x"?(Te=ce.scale=i/Math.abs(ge(ce.max)-ge(ce.min)),Ke=Math.min(ge(ce.max),ge(ce.min))):(Te=ce.scale=u/Math.abs(ge(ce.max)-ge(ce.min)),Te=-Te,Ke=Math.max(ge(ce.max),ge(ce.min))),ge==be?ce.p2c=function(ye){return(ye-Ke)*Te}:ce.p2c=function(ye){return(ge(ye)-Ke)*Te},Me?ce.c2p=function(ye){return Me(Ke+ye/Te)}:ce.c2p=function(ye){return Ke+ye/Te}}function Y(ce){for(var be=ce.options,Te=ce.ticks||[],Ke=be.labelWidth||0,ge=be.labelHeight||0,Me=Ke||(ce.direction=="x"?Math.floor(l.width/(Te.length||1)):null),ye=ce.direction+"Axis "+ce.direction+ce.n+"Axis",fe="flot-"+ce.direction+"-axis flot-"+ce.direction+ce.n+"-axis "+ye,he=be.font||"flot-tick-label tickLabel",De=0;De<Te.length;++De){var Ae=Te[De];if(Ae.label){var Ne=l.getTextInfo(fe,Ae.label,he,null,Me);Ke=Math.max(Ke,Ne.width+1),ge=Math.max(ge,Ne.height)}}ce.labelWidth=be.labelWidth||Ke,ce.labelHeight=be.labelHeight||ge}function j(ce){var be=ce.labelWidth,Te=ce.labelHeight,Ke=ce.options.position,ge=ce.direction==="x",Me=ce.options.tickLength,ye=o.grid.axisMargin,fe=o.grid.labelMargin,he=o.grid.eventSectionHeight,De=!0,Ae=!0,Ne=!0,Ze=!1;H.each(ge?h:y,function(Se,Ue){Ue&&(Ue.show||Ue.reserveSpace)&&(Ue===ce?Ze=!0:Ue.options.position===Ke&&(Ze?Ae=!1:De=!1),Ze||(Ne=!1))}),Ae&&(ye=0),Me==null&&(Me=Ne?"full":5),isNaN(+Me)||(fe+=+Me),ge?(Te+=fe,Te+=he,Ke=="bottom"?(v.bottom+=Te+ye,ce.box={top:l.height-v.bottom,height:Te}):(ce.box={top:v.top+ye,height:Te},v.top+=Te+ye)):(be+=fe,Ke=="left"?(ce.box={left:v.left+ye,width:be},v.left+=be+ye):(v.right+=be+ye,ce.box={left:l.width-v.right,width:be})),ce.position=Ke,ce.tickLength=Me,ce.box.padding=fe,ce.box.eventSectionPadding=he,ce.innermost=De}function K(ce){ce.direction=="x"?(ce.box.left=v.left-ce.labelWidth/2,ce.box.width=l.width-v.left-v.right+ce.labelWidth):(ce.box.top=v.top-ce.labelHeight/2,ce.box.height=l.height-v.bottom-v.top+ce.labelHeight)}function z(){var ce=o.grid.minBorderMargin,be,Te;if(ce==null)for(ce=0,Te=0;Te<f.length;++Te)ce=Math.max(ce,2*(f[Te].points.radius+f[Te].points.lineWidth/2));var Ke={left:ce,right:ce,top:ce,bottom:ce};H.each(L(),function(ge,Me){Me.reserveSpace&&Me.ticks&&Me.ticks.length&&(Me.direction==="x"?(Ke.left=Math.max(Ke.left,Me.labelWidth/2),Ke.right=Math.max(Ke.right,Me.labelWidth/2)):(Ke.bottom=Math.max(Ke.bottom,Me.labelHeight/2),Ke.top=Math.max(Ke.top,Me.labelHeight/2)))}),v.left=Math.ceil(Math.max(Ke.left,v.left)),v.right=Math.ceil(Math.max(Ke.right,v.right)),v.top=Math.ceil(Math.max(Ke.top,v.top)),v.bottom=Math.ceil(Math.max(Ke.bottom,v.bottom))}function Z(){var ce,be=L(),Te=o.grid.show;for(var Ke in v){var ge=o.grid.margin||0;v[Ke]=typeof ge=="number"?ge:ge[Ke]||0}C(P.processOffset,[v]);for(var Ke in v)typeof o.grid.borderWidth=="object"?v[Ke]+=Te?o.grid.borderWidth[Ke]:0:v[Ke]+=Te?o.grid.borderWidth:0;if(H.each(be,function(fe,he){var De=he.options;he.show=De.show==null?he.used:De.show,he.reserveSpace=De.reserveSpace==null?he.show:De.reserveSpace,ae(he)}),C(P.processRange,[]),Te){for(var Me=H.grep(be,function(fe){return fe.show||fe.reserveSpace}),ye=!1,ce=0;ce<2&&(H.each(Me,function(he,De){oe(De),Ee(De),ye=me(De,De.ticks)||ye,Y(De)}),ye&&P.processRange.length>0);ce++)C(P.processRange,[]),ye=!1;for(ce=Me.length-1;ce>=0;--ce)j(Me[ce]);z(),H.each(Me,function(fe,he){K(he)})}i=l.width-v.left-v.right,u=l.height-v.bottom-v.top,H.each(be,function(fe,he){D(he)}),Te&&se(),He()}function ae(ce){var be=ce.options,Te=+(be.min!=null?be.min:ce.datamin),Ke=+(be.max!=null?be.max:ce.datamax),ge=Ke-Te;if(ge==0){var Me=.25,ye=Math.abs(Ke==0?1:Ke*Me);be.min==null&&(Te-=ye),(be.max==null||be.min!=null)&&(Ke+=ye)}else{var fe=be.autoscaleMargin;fe!=null&&(be.min==null&&(Te-=ge*fe,Te<0&&ce.datamin!=null&&ce.datamin>=0&&(Te=0)),be.max==null&&(Ke+=ge*fe,Ke>0&&ce.datamax!=null&&ce.datamax<=0&&(Ke=0)))}ce.min=Te,ce.max=Ke}function J(ce){if(ce=Math.abs(String(ce).replace(".","")),ce==0)return 0;for(;ce!=0&&ce%10==0;)ce/=10;return Math.floor(Math.log(ce)/Math.LN10)+1}function oe(ce){var be=ce.options,Te;typeof be.ticks=="number"&&be.ticks>0?Te=be.ticks:Te=.3*Math.sqrt(ce.direction=="x"?l.width:l.height);var Ke=(ce.max-ce.min)/Te,ge=-Math.floor(Math.log(Ke)/Math.LN10),Me=be.tickDecimals;Me!=null&&ge>Me&&(ge=Me);var ye=Math.pow(10,-ge),fe=Ke/ye,he;if(fe<1.5?he=1:fe<3?(he=2,fe>2.25&&(Me==null||ge+1<=Me)&&(he=2.5,++ge)):fe<7.5?he=5:he=10,he*=ye,be.minTickSize!=null&&he<be.minTickSize&&(he=be.minTickSize),ce.delta=Ke,ce.tickDecimals=Math.max(0,Me??ge),ce.tickSize=be.tickSize||he,be.mode=="time"&&!ce.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(ce.tickGenerator||(ce.tickGenerator=function(Se){var Ue=[],Qe=n(Se.min,Se.tickSize),pt=0,bt=Number.NaN,yt;do yt=bt,bt=Qe+pt*Se.tickSize,Ue.push(bt),++pt;while(bt<Se.max&&bt!=yt);return Ue},ce.tickFormatter=function(Se,Ue){var Qe=Ue.tickDecimals?Math.pow(10,Ue.tickDecimals):1,pt=""+Math.round(Se*Qe)/Qe;if(Ue.tickDecimals!=null){var bt=pt.indexOf("."),yt=bt==-1?0:pt.length-bt-1;if(yt<Ue.tickDecimals)return(yt?pt:pt+".")+(""+Qe).substr(1,Ue.tickDecimals-yt)}return pt}),H.isFunction(be.tickFormatter)&&(ce.tickFormatter=function(Se,Ue){return""+be.tickFormatter(Se,Ue)}),be.alignTicksWithAxis!=null){var De=(ce.direction=="x"?h:y)[be.alignTicksWithAxis-1];if(De&&De.used&&De!=ce){var Ae=ce.tickGenerator(ce);if(Ae.length>0&&(be.min==null&&(ce.min=Math.min(ce.min,Ae[0])),be.max==null&&Ae.length>1&&(ce.max=Math.max(ce.max,Ae[Ae.length-1]))),ce.tickGenerator=function(Se){var Ue=[],Qe,pt;for(pt=0;pt<De.ticks.length;++pt)Qe=(De.ticks[pt].v-De.min)/(De.max-De.min),Qe=Se.min+Qe*(Se.max-Se.min),Ue.push(Qe);return Ue},!ce.mode&&be.tickDecimals==null){var Ne=Math.max(0,-Math.floor(Math.log(ce.delta)/Math.LN10)+1),Ze=ce.tickGenerator(ce);Ze.length>1&&/\..*0$/.test((Ze[1]-Ze[0]).toFixed(Ne))||(ce.tickDecimals=Ne)}}}}function Ee(ce){var be=ce.options.ticks,Te=[];be==null||typeof be=="number"&&be>0?Te=ce.tickGenerator(ce):be&&(H.isFunction(be)?Te=be(ce):Te=be);var Ke,ge;for(ce.ticks=[],Ke=0;Ke<Te.length;++Ke){var Me=null,ye=Te[Ke];typeof ye=="object"?(ge=+ye[0],ye.length>1&&(Me=ye[1])):ge=+ye,Me==null&&(Me=ce.tickFormatter(ge,ce)),isNaN(ge)||ce.ticks.push({v:ge,label:Me})}}function me(ce,be){var Te=!1;return ce.options.autoscaleMargin&&be.length>0&&(ce.options.min==null&&(ce.min=Math.min(ce.min,be[0].v),Te=!0),ce.options.max==null&&be.length>1&&(ce.max=Math.max(ce.max,be[be.length-1].v),Te=!0)),Te}function re(){l.clear(),C(P.drawBackground,[d]);var ce=o.grid;ce.show&&ce.backgroundColor&&pe(),ce.show&&!ce.aboveData&&ee();for(var be=0;be<f.length;++be)C(P.drawSeries,[d,f[be]]),G(f[be]);C(P.draw,[d]),ce.show&&ce.aboveData&&ee(),l.render(),Je()}function le(ce,be){for(var Te,Ke,ge,Me,ye=L(),fe=0;fe<ye.length;++fe)if(Te=ye[fe],Te.direction==be&&(Me=be+Te.n+"axis",!ce[Me]&&Te.n==1&&(Me=be+"axis"),ce[Me])){Ke=ce[Me].from,ge=ce[Me].to;break}if(ce[Me]||(Te=be=="x"?h[0]:y[0],Ke=ce[be+"1"],ge=ce[be+"2"]),Ke!=null&&ge!=null&&Ke>ge){var he=Ke;Ke=ge,ge=he}return{from:Ke,to:ge,axis:Te}}function pe(){d.save(),d.translate(v.left,v.top),d.fillStyle=mt(o.grid.backgroundColor,u,0,"rgba(255, 255, 255, 0)"),d.fillRect(0,0,i,u),d.restore()}function ee(){var ce,be,Te,Ke;d.save(),d.translate(v.left,v.top);var ge=o.grid.markings;if(ge)for(H.isFunction(ge)&&(be=E.getAxes(),be.xmin=be.xaxis.min,be.xmax=be.xaxis.max,be.ymin=be.yaxis.min,be.ymax=be.yaxis.max,ge=ge(be)),ce=0;ce<ge.length;++ce){var Me=ge[ce],ye=le(Me,"x"),fe=le(Me,"y");if(ye.from==null&&(ye.from=ye.axis.min),ye.to==null&&(ye.to=ye.axis.max),fe.from==null&&(fe.from=fe.axis.min),fe.to==null&&(fe.to=fe.axis.max),!(ye.to<ye.axis.min||ye.from>ye.axis.max||fe.to<fe.axis.min||fe.from>fe.axis.max)){ye.from=Math.max(ye.from,ye.axis.min),ye.to=Math.min(ye.to,ye.axis.max),fe.from=Math.max(fe.from,fe.axis.min),fe.to=Math.min(fe.to,fe.axis.max);var he=ye.from===ye.to,De=fe.from===fe.to;if(!(he&&De))if(ye.from=Math.floor(ye.axis.p2c(ye.from)),ye.to=Math.floor(ye.axis.p2c(ye.to)),fe.from=Math.floor(fe.axis.p2c(fe.from)),fe.to=Math.floor(fe.axis.p2c(fe.to)),he||De){var Ae=Me.lineWidth||o.grid.markingsLineWidth,Ne=Ae%2?.5:0;d.beginPath(),d.strokeStyle=Me.color||o.grid.markingsColor,d.lineWidth=Ae,he?(d.moveTo(ye.to+Ne,fe.from),d.lineTo(ye.to+Ne,fe.to)):(d.moveTo(ye.from,fe.to+Ne),d.lineTo(ye.to,fe.to+Ne)),d.stroke()}else d.fillStyle=Me.color||o.grid.markingsColor,d.fillRect(ye.from,fe.to,ye.to-ye.from,fe.from-fe.to)}}be=L(),Te=o.grid.borderWidth;for(var Ze=0;Ze<be.length;++Ze){var Se=be[Ze],Ue=Se.box,Qe=Se.tickLength,pt,bt,yt,Mt;if(!(!Se.show||Se.ticks.length==0)){for(d.lineWidth=1,Se.direction=="x"?(pt=0,Qe=="full"?bt=Se.position=="top"?0:u:bt=Ue.top-v.top+(Se.position=="top"?Ue.height:0)):(bt=0,Qe=="full"?pt=Se.position=="left"?0:i:pt=Ue.left-v.left+(Se.position=="left"?Ue.width:0)),Se.innermost||(d.strokeStyle=Se.options.color,d.beginPath(),yt=Mt=0,Se.direction=="x"?yt=i+1:Mt=u+1,d.lineWidth==1&&(Se.direction=="x"?bt=Math.floor(bt)+.5:pt=Math.floor(pt)+.5),d.moveTo(pt,bt),d.lineTo(pt+yt,bt+Mt),d.stroke()),d.strokeStyle=Se.options.tickColor,d.beginPath(),ce=0;ce<Se.ticks.length;++ce){var At=Se.ticks[ce].v;yt=Mt=0,!(isNaN(At)||At<Se.min||At>Se.max||Qe=="full"&&(typeof Te=="object"&&Te[Se.position]>0||Te>0)&&(At==Se.min||At==Se.max))&&(Se.direction=="x"?(pt=Se.p2c(At),Mt=Qe=="full"?-u:Qe,Se.position=="top"&&(Mt=-Mt)):(bt=Se.p2c(At),yt=Qe=="full"?-i:Qe,Se.position=="left"&&(yt=-yt)),d.lineWidth==1&&(Se.direction=="x"?pt=Math.floor(pt)+.5:bt=Math.floor(bt)+.5),d.moveTo(pt,bt),d.lineTo(pt+yt,bt+Mt))}d.stroke()}}Te&&(Ke=o.grid.borderColor,typeof Te=="object"||typeof Ke=="object"?(typeof Te!="object"&&(Te={top:Te,right:Te,bottom:Te,left:Te}),typeof Ke!="object"&&(Ke={top:Ke,right:Ke,bottom:Ke,left:Ke}),Te.top>0&&(d.strokeStyle=Ke.top,d.lineWidth=Te.top,d.beginPath(),d.moveTo(0-Te.left,0-Te.top/2),d.lineTo(i,0-Te.top/2),d.stroke()),Te.right>0&&(d.strokeStyle=Ke.right,d.lineWidth=Te.right,d.beginPath(),d.moveTo(i+Te.right/2,0-Te.top),d.lineTo(i+Te.right/2,u),d.stroke()),Te.bottom>0&&(d.strokeStyle=Ke.bottom,d.lineWidth=Te.bottom,d.beginPath(),d.moveTo(i+Te.right,u+Te.bottom/2),d.lineTo(0,u+Te.bottom/2),d.stroke()),Te.left>0&&(d.strokeStyle=Ke.left,d.lineWidth=Te.left,d.beginPath(),d.moveTo(0-Te.left/2,u+Te.bottom),d.lineTo(0-Te.left/2,0),d.stroke())):(d.lineWidth=Te,d.strokeStyle=o.grid.borderColor,d.strokeRect(-Te/2,-Te/2,i+Te,u+Te))),d.restore()}function se(){H.each(L(),function(ce,be){var Te=be.box,Ke=be.direction+"Axis "+be.direction+be.n+"Axis",ge="flot-"+be.direction+"-axis flot-"+be.direction+be.n+"-axis "+Ke,Me=be.options.font||"flot-tick-label tickLabel",ye,fe,he,De,Ae;if(l.removeText(ge),!(!be.show||be.ticks.length==0))for(var Ne=0;Ne<be.ticks.length;++Ne)ye=be.ticks[Ne],!(!ye.label||ye.v<be.min||ye.v>be.max)&&(be.direction=="x"?(De="center",fe=v.left+be.p2c(ye.v),be.position=="bottom"?he=Te.top+Te.padding+Te.eventSectionPadding:(he=Te.top+Te.height-Te.padding,Ae="bottom")):(Ae="middle",he=v.top+be.p2c(ye.v),be.position=="left"?(fe=Te.left+Te.width-Te.padding,De="right"):fe=Te.left+Te.padding),l.addText(ge,fe,he,ye.label,Me,null,null,De,Ae))})}function Q(ce){for(var be=[],Te=null,Ke=null,ge=ce.datapoints,Me=[],ye=0;ye<ge.pointsize-2;ye++)Me.push(0);for(var fe=0;fe<ge.points.length;fe+=ge.pointsize){var he=ge.points[fe],De=ge.points[fe+1];fe===ge.points.length-ge.pointsize?Ke=null:Ke=ge.points[fe+ge.pointsize],he!==null&&De!==null&&Te===null&&Ke===null&&(be.push(he),be.push(De),be.push.apply(be,Me)),Te=he}var Ae=ge.points;ge.points=be,ce.points.radius=ce.lines.lineWidth/2,X(ce),ge.points=Ae}function G(ce){ce.lines.show&&(q(ce),!ce.points.show&&!ce.bars.show&&Q(ce)),ce.bars.show&&Be(ce),ce.points.show&&X(ce)}function q(ce){function be(fe,he,De,Ae,Ne){var Ze=fe.points,Se=fe.pointsize,Ue=null,Qe=null;d.beginPath();for(var pt=Se;pt<Ze.length;pt+=Se){var bt=Ze[pt-Se],yt=Ze[pt-Se+1],Mt=Ze[pt],At=Ze[pt+1];if(!(bt==null||Mt==null)){if(yt<=At&&yt<Ne.min){if(At<Ne.min)continue;bt=(Ne.min-yt)/(At-yt)*(Mt-bt)+bt,yt=Ne.min}else if(At<=yt&&At<Ne.min){if(yt<Ne.min)continue;Mt=(Ne.min-yt)/(At-yt)*(Mt-bt)+bt,At=Ne.min}if(yt>=At&&yt>Ne.max){if(At>Ne.max)continue;bt=(Ne.max-yt)/(At-yt)*(Mt-bt)+bt,yt=Ne.max}else if(At>=yt&&At>Ne.max){if(yt>Ne.max)continue;Mt=(Ne.max-yt)/(At-yt)*(Mt-bt)+bt,At=Ne.max}if(bt<=Mt&&bt<Ae.min){if(Mt<Ae.min)continue;yt=(Ae.min-bt)/(Mt-bt)*(At-yt)+yt,bt=Ae.min}else if(Mt<=bt&&Mt<Ae.min){if(bt<Ae.min)continue;At=(Ae.min-bt)/(Mt-bt)*(At-yt)+yt,Mt=Ae.min}if(bt>=Mt&&bt>Ae.max){if(Mt>Ae.max)continue;yt=(Ae.max-bt)/(Mt-bt)*(At-yt)+yt,bt=Ae.max}else if(Mt>=bt&&Mt>Ae.max){if(bt>Ae.max)continue;At=(Ae.max-bt)/(Mt-bt)*(At-yt)+yt,Mt=Ae.max}(bt!=Ue||yt!=Qe)&&d.moveTo(Ae.p2c(bt)+he,Ne.p2c(yt)+De),Ue=Mt,Qe=At,d.lineTo(Ae.p2c(Mt)+he,Ne.p2c(At)+De)}}d.stroke()}function Te(fe,he,De){for(var Ae=fe.points,Ne=fe.pointsize,Ze=Math.min(Math.max(0,De.min),De.max),Se=0,Ue,Qe=!1,pt=1,bt=0,yt=0;!(Ne>0&&Se>Ae.length+Ne);){Se+=Ne;var Mt=Ae[Se-Ne],At=Ae[Se-Ne+pt],Pt=Ae[Se],rn=Ae[Se+pt];if(Qe){if(Ne>0&&Mt!=null&&Pt==null){yt=Se,Ne=-Ne,pt=2;continue}if(Ne<0&&Se==bt+Ne){d.fill(),Qe=!1,Ne=-Ne,pt=1,Se=bt=yt+Ne;continue}}if(!(Mt==null||Pt==null)){if(Mt<=Pt&&Mt<he.min){if(Pt<he.min)continue;At=(he.min-Mt)/(Pt-Mt)*(rn-At)+At,Mt=he.min}else if(Pt<=Mt&&Pt<he.min){if(Mt<he.min)continue;rn=(he.min-Mt)/(Pt-Mt)*(rn-At)+At,Pt=he.min}if(Mt>=Pt&&Mt>he.max){if(Pt>he.max)continue;At=(he.max-Mt)/(Pt-Mt)*(rn-At)+At,Mt=he.max}else if(Pt>=Mt&&Pt>he.max){if(Mt>he.max)continue;rn=(he.max-Mt)/(Pt-Mt)*(rn-At)+At,Pt=he.max}if(Qe||(d.beginPath(),d.moveTo(he.p2c(Mt),De.p2c(Ze)),Qe=!0),At>=De.max&&rn>=De.max){d.lineTo(he.p2c(Mt),De.p2c(De.max)),d.lineTo(he.p2c(Pt),De.p2c(De.max));continue}else if(At<=De.min&&rn<=De.min){d.lineTo(he.p2c(Mt),De.p2c(De.min)),d.lineTo(he.p2c(Pt),De.p2c(De.min));continue}var Fn=Mt,kn=Pt;At<=rn&&At<De.min&&rn>=De.min?(Mt=(De.min-At)/(rn-At)*(Pt-Mt)+Mt,At=De.min):rn<=At&&rn<De.min&&At>=De.min&&(Pt=(De.min-At)/(rn-At)*(Pt-Mt)+Mt,rn=De.min),At>=rn&&At>De.max&&rn<=De.max?(Mt=(De.max-At)/(rn-At)*(Pt-Mt)+Mt,At=De.max):rn>=At&&rn>De.max&&At<=De.max&&(Pt=(De.max-At)/(rn-At)*(Pt-Mt)+Mt,rn=De.max),Mt!=Fn&&d.lineTo(he.p2c(Fn),De.p2c(At)),d.lineTo(he.p2c(Mt),De.p2c(At)),d.lineTo(he.p2c(Pt),De.p2c(rn)),Pt!=kn&&(d.lineTo(he.p2c(Pt),De.p2c(rn)),d.lineTo(he.p2c(kn),De.p2c(rn)))}}}d.save(),d.translate(v.left,v.top),d.lineJoin="round";var Ke=ce.lines.lineWidth,ge=ce.shadowSize;if(Ke>0&&ge>0){d.lineWidth=ge,d.strokeStyle="rgba(0,0,0,0.1)";var Me=Math.PI/18;be(ce.datapoints,Math.sin(Me)*(Ke/2+ge/2),Math.cos(Me)*(Ke/2+ge/2),ce.xaxis,ce.yaxis),d.lineWidth=ge/2,be(ce.datapoints,Math.sin(Me)*(Ke/2+ge/4),Math.cos(Me)*(Ke/2+ge/4),ce.xaxis,ce.yaxis)}d.lineWidth=Ke,d.strokeStyle=ce.color;var ye=ke(ce.lines,ce.color,0,u);ye&&(d.fillStyle=ye,Te(ce.datapoints,ce.xaxis,ce.yaxis)),Ke>0&&be(ce.datapoints,0,0,ce.xaxis,ce.yaxis),d.restore()}function X(ce){function be(fe,he,De,Ae,Ne,Ze,Se,Ue){for(var Qe=fe.points,pt=fe.pointsize,bt=0;bt<Qe.length;bt+=pt){var yt=Qe[bt],Mt=Qe[bt+1];yt==null||yt<Ze.min||yt>Ze.max||Mt<Se.min||Mt>Se.max||(d.beginPath(),yt=Ze.p2c(yt),Mt=Se.p2c(Mt)+Ae,Ue=="circle"?d.arc(yt,Mt,he,0,Ne?Math.PI:Math.PI*2,!1):Ue(d,yt,Mt,he,Ne),d.closePath(),De&&(d.fillStyle=De,d.fill()),d.stroke())}}d.save(),d.translate(v.left,v.top);var Te=ce.points.lineWidth,Ke=ce.shadowSize,ge=ce.points.radius,Me=ce.points.symbol;if(Te==0&&(Te=1e-4),Te>0&&Ke>0){var ye=Ke/2;d.lineWidth=ye,d.strokeStyle="rgba(0,0,0,0.1)",be(ce.datapoints,ge,null,ye+ye/2,!0,ce.xaxis,ce.yaxis,Me),d.strokeStyle="rgba(0,0,0,0.2)",be(ce.datapoints,ge,null,ye/2,!0,ce.xaxis,ce.yaxis,Me)}d.lineWidth=Te,d.strokeStyle=ce.color,be(ce.datapoints,ge,ke(ce.points,ce.color),0,!1,ce.xaxis,ce.yaxis,Me),d.restore()}function de(ce,be,Te,Ke,ge,Me,ye,fe,he,De,Ae){var Ne,Ze,Se,Ue,Qe,pt,bt,yt,Mt;De?(yt=pt=bt=!0,Qe=!1,Ne=Te,Ze=ce,Ue=be+Ke,Se=be+ge,Ze<Ne&&(Mt=Ze,Ze=Ne,Ne=Mt,Qe=!0,pt=!1)):(Qe=pt=bt=!0,yt=!1,Ne=ce+Ke,Ze=ce+ge,Se=Te,Ue=be,Ue<Se&&(Mt=Ue,Ue=Se,Se=Mt,yt=!0,bt=!1)),!(Ze<ye.min||Ne>ye.max||Ue<fe.min||Se>fe.max)&&(Ne<ye.min&&(Ne=ye.min,Qe=!1),Ze>ye.max&&(Ze=ye.max,pt=!1),Se<fe.min&&(Se=fe.min,yt=!1),Ue>fe.max&&(Ue=fe.max,bt=!1),Ne=ye.p2c(Ne),Se=fe.p2c(Se),Ze=ye.p2c(Ze),Ue=fe.p2c(Ue),Me&&(he.fillStyle=Me(Se,Ue),he.fillRect(Ne,Ue,Ze-Ne,Se-Ue)),Ae>0&&(Qe||pt||bt||yt)&&(he.beginPath(),he.moveTo(Ne,Se),Qe?he.lineTo(Ne,Ue):he.moveTo(Ne,Ue),bt?he.lineTo(Ze,Ue):he.moveTo(Ze,Ue),pt?he.lineTo(Ze,Se):he.moveTo(Ze,Se),yt?he.lineTo(Ne,Se):he.moveTo(Ne,Se),he.stroke()))}function Be(ce){function be(ge,Me,ye,fe,he,De){for(var Ae=ge.points,Ne=ge.pointsize,Ze=0;Ze<Ae.length;Ze+=Ne)Ae[Ze]!=null&&de(Ae[Ze],Ae[Ze+1],Ae[Ze+2],Me,ye,fe,he,De,d,ce.bars.horizontal,ce.bars.lineWidth)}d.save(),d.translate(v.left,v.top),d.lineWidth=ce.bars.lineWidth,d.strokeStyle=ce.color;var Te;switch(ce.bars.align){case"left":Te=0;break;case"right":Te=-ce.bars.barWidth;break;default:Te=-ce.bars.barWidth/2}var Ke=ce.bars.fill?function(ge,Me){return ke(ce.bars,ce.color,ge,Me)}:null;be(ce.datapoints,Te,Te+ce.bars.barWidth,Ke,ce.xaxis,ce.yaxis),d.restore()}function ke(ce,be,Te,Ke){var ge=ce.fill;if(!ge)return null;if(ce.fillColor)return mt(ce.fillColor,Te,Ke,be);var Me=H.color.parse(be);return Me.a=typeof ge=="number"?ge:.4,Me.normalize(),Me.toString()}function He(){if(o.legend.container!=null?H.find(o.legend.container).html(""):c.find(".legend").remove(),!!o.legend.show){for(var ce=[],be=[],Te=!1,Ke=o.legend.labelFormatter,ge,Me,ye=0;ye<f.length;++ye)ge=f[ye],ge.label&&(Me=Ke?Ke(ge.label,ge):ge.label,Me&&be.push({label:Me,color:ge.color}));if(o.legend.sorted)if(H.isFunction(o.legend.sorted))be.sort(o.legend.sorted);else if(o.legend.sorted=="reverse")be.reverse();else{var fe=o.legend.sorted!="descending";be.sort(function(pt,bt){return pt.label==bt.label?0:pt.label<bt.label!=fe?1:-1})}for(var ye=0;ye<be.length;++ye){var he=be[ye];ye%o.legend.noColumns==0&&(Te&&ce.push("</tr>"),ce.push("<tr>"),Te=!0),ce.push('<td class="legendColorBox"><div style="border:1px solid '+o.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+he.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+he.label+"</td>")}if(Te&&ce.push("</tr>"),ce.length!=0){var De='<table style="font-size:smaller;color:'+o.grid.color+'">'+ce.join("")+"</table>";if(o.legend.container!=null)H(o.legend.container).html(De);else{var Ae="",Ne=o.legend.position,Ze=o.legend.margin;Ze[0]==null&&(Ze=[Ze,Ze]),Ne.charAt(0)=="n"?Ae+="top:"+(Ze[1]+v.top)+"px;":Ne.charAt(0)=="s"&&(Ae+="bottom:"+(Ze[1]+v.bottom)+"px;"),Ne.charAt(1)=="e"?Ae+="right:"+(Ze[0]+v.right)+"px;":Ne.charAt(1)=="w"&&(Ae+="left:"+(Ze[0]+v.left)+"px;");var Se=H('<div class="legend">'+De.replace('style="','style="position:absolute;'+Ae+";")+"</div>").appendTo(c);if(o.legend.backgroundOpacity!=0){var Ue=o.legend.backgroundColor;Ue==null&&(Ue=o.grid.backgroundColor,Ue&&typeof Ue=="string"?Ue=H.color.parse(Ue):Ue=H.color.extract(Se,"background-color"),Ue.a=1,Ue=Ue.toString());var Qe=Se.children();H('<div style="position:absolute;width:'+Qe.width()+"px;height:"+Qe.height()+"px;"+Ae+"background-color:"+Ue+';"> </div>').prependTo(Se).css("opacity",o.legend.backgroundOpacity)}}}}}var ue=[],Oe=null;function Fe(ce,be,Te){var Ke=o.grid.mouseActiveRadius,ge=Ke*Ke+1,Me=null,ye=!1,fe,he,De;for(fe=f.length-1;fe>=0;--fe)if(Te(f[fe])){var Ae=f[fe],Ne=Ae.xaxis,Ze=Ae.yaxis,Se=Ae.datapoints.points,Ue=Ne.c2p(ce),Qe=Ze.c2p(be),pt=Ke/Ne.scale,bt=Ke/Ze.scale;if(De=Ae.datapoints.pointsize,Ne.options.inverseTransform&&(pt=Number.MAX_VALUE),Ze.options.inverseTransform&&(bt=Number.MAX_VALUE),Ae.lines.show||Ae.points.show)for(he=0;he<Se.length;he+=De){var yt=Se[he],Mt=Se[he+1];if(yt!=null&&!(yt-Ue>pt||yt-Ue<-pt||Mt-Qe>bt||Mt-Qe<-bt)){var At=Math.abs(Ne.p2c(yt)-ce),Pt=Math.abs(Ze.p2c(Mt)-be),rn=At*At+Pt*Pt;rn<ge&&(ge=rn,Me=[fe,he/De])}}if(Ae.bars.show&&!Me){var Fn,kn;switch(Ae.bars.align){case"left":Fn=0;break;case"right":Fn=-Ae.bars.barWidth;break;default:Fn=-Ae.bars.barWidth/2}for(kn=Fn+Ae.bars.barWidth,he=0;he<Se.length;he+=De){var yt=Se[he],Mt=Se[he+1],Jn=Se[he+2];yt!=null&&(f[fe].bars.horizontal?Ue<=Math.max(Jn,yt)&&Ue>=Math.min(Jn,yt)&&Qe>=Mt+Fn&&Qe<=Mt+kn:Ue>=yt+Fn&&Ue<=yt+kn&&Qe>=Math.min(Jn,Mt)&&Qe<=Math.max(Jn,Mt))&&(Me=[fe,he/De])}}}return Me?(fe=Me[0],he=Me[1],De=f[fe].datapoints.pointsize,{datapoint:f[fe].datapoints.points.slice(he*De,(he+1)*De),dataIndex:he,series:f[fe],seriesIndex:fe}):null}function Ie(ce){o.grid.hoverable&&qe("plothover",ce,function(be){return be.hoverable!=!1})}function we(ce){o.grid.hoverable&&qe("plothover",ce,function(be){return!1})}function Re(ce){E.isSelecting||qe("plotclick",ce,function(be){return be.clickable!=!1})}function _e(ce){if(ce.cancelable){if(!m.is(ce.target)&&m.has(ce.target).length===0){qe("plotleave",ce,function(be){});return}Ie(et(ce)),ce.preventDefault()}}function et(ce){if(!ce||!ce.originalEvent||ce.pageX&&ce.pageY)return ce;var be=ce.originalEvent;if(be.changedTouches.length===0)return ce;var Te=be.changedTouches[0];return ce.pageX=Te.pageX,ce.pageY=Te.pageY,ce}function qe(ce,be,Te){var Ke=m.offset(),ge=be.pageX-Ke.left-v.left,Me=be.pageY-Ke.top-v.top,ye=B({left:ge,top:Me});ye.pageX=be.pageX,ye.pageY=be.pageY,ye.ctrlKey=be.ctrlKey,ye.metaKey=be.metaKey;var fe=Fe(ge,Me,Te);if(fe&&(fe.pageX=parseInt(fe.series.xaxis.p2c(fe.datapoint[0])+Ke.left+v.left,10),fe.pageY=parseInt(fe.series.yaxis.p2c(fe.datapoint[1])+Ke.top+v.top,10)),o.grid.autoHighlight){for(var he=0;he<ue.length;++he){var De=ue[he];De.auto==ce&&!(fe&&De.series==fe.series&&De.point[0]==fe.datapoint[0]&&De.point[1]==fe.datapoint[1])&&Xe(De.series,De.point)}fe&&at(fe.series,fe.datapoint,ce)}c.trigger(ce,[ye,fe])}function Je(){var ce=o.interaction.redrawOverlayInterval;if(ce==-1){lt();return}Oe||(Oe=setTimeout(lt,ce))}function lt(){Oe=null,p.save(),a.clear(),p.translate(v.left,v.top);var ce,be;for(ce=0;ce<ue.length;++ce)be=ue[ce],be.series.bars.show?Ye(be.series,be.point):ot(be.series,be.point);p.restore(),C(P.drawOverlay,[p])}function at(ce,be,Te){if(typeof ce=="number"&&(ce=f[ce]),typeof be=="number"){var Ke=ce.datapoints.pointsize;be=ce.datapoints.points.slice(Ke*be,Ke*(be+1))}var ge=gt(ce,be);ge==-1?(ue.push({series:ce,point:be,auto:Te}),Je()):Te||(ue[ge].auto=!1)}function Xe(ce,be){if(ce==null&&be==null){ue=[],Je();return}if(typeof ce=="number"&&(ce=f[ce]),typeof be=="number"){var Te=ce.datapoints.pointsize;be=ce.datapoints.points.slice(Te*be,Te*(be+1))}var Ke=gt(ce,be);Ke!=-1&&(ue.splice(Ke,1),Je())}function gt(ce,be){for(var Te=0;Te<ue.length;++Te){var Ke=ue[Te];if(Ke.series==ce&&Ke.point[0]==be[0]&&Ke.point[1]==be[1])return Te}return-1}function ot(ce,be){var Te=be[0],Ke=be[1],ge=ce.xaxis,Me=ce.yaxis,ye=typeof ce.highlightColor=="string"?ce.highlightColor:H.color.parse(ce.color).scale("a",.5).toString();if(!(Te<ge.min||Te>ge.max||Ke<Me.min||Ke>Me.max)){var fe=ce.points.radius+ce.points.lineWidth/2;p.lineWidth=fe,p.strokeStyle=ye;var he=1.5*fe;Te=ge.p2c(Te),Ke=Me.p2c(Ke),p.beginPath(),ce.points.symbol=="circle"?p.arc(Te,Ke,he,0,2*Math.PI,!1):ce.points.symbol(p,Te,Ke,he,!1),p.closePath(),p.stroke()}}function Ye(ce,be){var Te=typeof ce.highlightColor=="string"?ce.highlightColor:H.color.parse(ce.color).scale("a",.5).toString(),Ke=Te,ge;switch(ce.bars.align){case"left":ge=0;break;case"right":ge=-ce.bars.barWidth;break;default:ge=-ce.bars.barWidth/2}p.lineWidth=ce.bars.lineWidth,p.strokeStyle=Te,de(be[0],be[1],be[2]||0,ge,ge+ce.bars.barWidth,function(){return Ke},ce.xaxis,ce.yaxis,p,ce.bars.horizontal,ce.bars.lineWidth)}function mt(ce,be,Te,Ke){if(typeof ce=="string")return ce;for(var ge=d.createLinearGradient(0,Te,0,be),Me=0,ye=ce.colors.length;Me<ye;++Me){var fe=ce.colors[Me];if(typeof fe!="string"){var he=H.color.parse(Ke);fe.brightness!=null&&(he=he.scale("rgb",fe.brightness)),fe.opacity!=null&&(he.a*=fe.opacity),fe=he.toString()}ge.addColorStop(Me/(ye-1),fe)}return ge}}H.plot=function(c,s,r){var g=new t(H(c),s,r,H.plot.plugins);return g},H.plot.version="0.8.3",H.plot.plugins=[],H.fn.plot=function(c,s){return this.each(function(){H.plot(this,c,s)})};function n(c,s){return s*Math.floor(c/s)}}(jQuery)},4027:()=>{(function(H){function T(e){var t={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},n={},c=null;function s(v){t.active&&(m(v),e.getPlaceholder().trigger("plotselecting",[f()]))}function r(v){v.which==1&&(document.body.focus(),document.onselectstart!==void 0&&n.onselectstart==null&&(n.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),document.ondrag!==void 0&&n.ondrag==null&&(n.ondrag=document.ondrag,document.ondrag=function(){return!1}),a(t.first,v),t.active=!0,c=function(i){g(i)},H(document).one("mouseup",c))}function g(v){return c=null,document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag),t.active=!1,m(v),y()?o(v):(e.getPlaceholder().trigger("plotunselected",[]),e.getPlaceholder().trigger("plotselecting",[null])),setTimeout(function(){e.isSelecting=!1},10),!1}function f(){if(!y()||!t.show)return null;var v={},i=t.first,u=t.second,P=e.getAxes(),E=!0;return H.each(P,function(C,b){b.used&&(anyUsed=!1)}),H.each(P,function(C,b){if(b.used||E){var S=b.c2p(i[b.direction]),M=b.c2p(u[b.direction]);v[C]={from:Math.min(S,M),to:Math.max(S,M)}}}),v}function o(v){var i=f();i.ctrlKey=v.ctrlKey,i.metaKey=v.metaKey,e.getPlaceholder().trigger("plotselected",[i]),i.xaxis&&i.yaxis&&e.getPlaceholder().trigger("selected",[{x1:i.xaxis.from,y1:i.yaxis.from,x2:i.xaxis.to,y2:i.yaxis.to}])}function l(v,i,u){return i<v?v:i>u?u:i}function a(v,i){var u=e.getOptions(),P=e.getPlaceholder().offset(),E=e.getPlotOffset();v.x=l(0,i.pageX-P.left-E.left,e.width()),v.y=l(0,i.pageY-P.top-E.top,e.height()),u.selection.mode=="y"&&(v.x=v==t.first?0:e.width()),u.selection.mode=="x"&&(v.y=v==t.first?0:e.height())}function m(v){v.pageX!=null&&(a(t.second,v),y()?(e.isSelecting=!0,t.show=!0,e.triggerRedrawOverlay()):d(!0))}function d(v){t.show&&(t.show=!1,e.triggerRedrawOverlay(),v||e.getPlaceholder().trigger("plotunselected",[]))}function p(v,i){var u,P,E,C,b=e.getAxes();for(var S in b)if(u=b[S],u.direction==i&&(C=i+u.n+"axis",!v[C]&&u.n==1&&(C=i+"axis"),v[C])){P=v[C].from,E=v[C].to;break}if(v[C]||(u=i=="x"?e.getXAxes()[0]:e.getYAxes()[0],P=v[i+"1"],E=v[i+"2"]),P!=null&&E!=null&&P>E){var M=P;P=E,E=M}return{from:P,to:E,axis:u}}function h(v,i){var u,P,E=e.getOptions();E.selection.mode=="y"?(t.first.x=0,t.second.x=e.width()):(P=p(v,"x"),t.first.x=P.axis.p2c(P.from),t.second.x=P.axis.p2c(P.to)),E.selection.mode=="x"?(t.first.y=0,t.second.y=e.height()):(P=p(v,"y"),t.first.y=P.axis.p2c(P.from),t.second.y=P.axis.p2c(P.to)),t.show=!0,e.triggerRedrawOverlay(),!i&&y()&&o()}function y(){var v=e.getOptions().selection.minSize;return Math.abs(t.second.x-t.first.x)>=v&&Math.abs(t.second.y-t.first.y)>=v}e.clearSelection=d,e.setSelection=h,e.getSelection=f,e.hooks.bindEvents.push(function(v,i){var u=v.getOptions();u.selection.mode!=null&&(i.mousemove(s),i.mousedown(r))}),e.hooks.drawOverlay.push(function(v,i){if(t.show&&y()){var u=v.getPlotOffset(),P=v.getOptions();i.save(),i.translate(u.left,u.top);var E=H.color.parse(P.selection.color);i.strokeStyle=E.scale("a",.8).toString(),i.lineWidth=1,i.lineJoin=P.selection.shape,i.fillStyle=E.scale("a",.4).toString();var C=Math.min(t.first.x,t.second.x)+.5,b=Math.min(t.first.y,t.second.y)+.5,S=Math.abs(t.second.x-t.first.x)-1,M=Math.abs(t.second.y-t.first.y)-1;i.fillRect(C,b,S,M),i.strokeRect(C,b,S,M),i.restore()}}),e.hooks.shutdown.push(function(v,i){i.unbind("mousemove",s),i.unbind("mousedown",r),c&&(H(document).unbind("mouseup",c),document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag))})}H.plot.plugins.push({init:T,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery)},65103:()=>{(function(H){var T={series:{stack:null}};function e(t){function n(s,r){for(var g=null,f=0;f<r.length&&s!=r[f];++f)r[f].stack==s.stack&&(g=r[f]);return g}function c(s,r,g){if(!(r.stack==null||r.stack===!1)){var f=n(r,s.getData());if(f){for(var o=g.pointsize,l=g.points,a=f.datapoints.pointsize,m=f.datapoints.points,d=[],p,h,y,v,i,u,P=r.lines.show,E=r.bars.horizontal,C=o>2&&(E?g.format[2].x:g.format[2].y),b=P&&r.lines.steps,S=E?1:0,M=E?0:1,x=0,O=0,L,B;!(x>=l.length&&O>=m.length);){if(L=d.length,x<l.length&&l[x]==null){for(B=0;B<o;++B)d.push(l[x+B]);x+=o}else if(x>=l.length){for(B=0;B<o;++B)d.push(m[O+B]);C&&(d[L+2]=m[O+M]),O+=a}else if(O>=m.length){for(B=0;B<o;++B)d.push(l[x+B]);x+=o}else if(O<m.length&&m[O]==null)O+=a;else{if(p=l[x+S],h=l[x+M],v=m[O+S],i=m[O+M],u=0,p==v){for(B=0;B<o;++B)d.push(l[x+B]);d[L+M]+=i,u=i,x+=o,O+=a}else if(p>v){if(x==0){for(B=0;B<o;++B)d.push(m[O+B]);u=i}if(x>0&&l[x-o]!=null){for(y=0,d.push(v),d.push(y+i),B=2;B<o;++B)d.push(l[x+B]);u=i}O+=a}else{for(B=0;B<o;++B)d.push(l[x+B]);O>0&&m[O-a]!=null&&(u=0),d[L+M]+=u,x+=o}fromgap=!1,L!=d.length&&C&&(d[L+2]=u)}if(b&&L!=d.length&&L>0&&d[L]!=null&&d[L]!=d[L-o]&&d[L+1]!=d[L-o+1]){for(B=0;B<o;++B)d[L+o+B]=d[L+B];d[L+1]=d[L-o+1]}}g.points=d}}}t.hooks.processDatapoints.push(c)}H.plot.plugins.push({init:e,options:T,name:"stack",version:"1.2"})})(jQuery)},85095:()=>{(function(H){var T={series:{stackpercent:null}};function e(t){var n={},c=!1,s={};function r(o,l,a,m){if(c||(c=!0,s=g(o.getData())),l.stackpercent==!0){var d=a.length;l.percents=[];var p=0,h=1;l.bars&&l.bars.horizontal&&l.bars.horizontal===!0&&(p=1,h=0);for(var y=0;y<d;y++){var v=s[a[y][p]+""];v>0?l.percents.push(a[y][h]*100/v):l.percents.push(0)}}}function g(o){var l=o.length,a={};if(l>0){for(var m=0;m<l;m++)if(o[m].stackpercent){var d=0,p=1;o[m].bars&&o[m].bars.horizontal&&o[m].bars.horizontal===!0&&(d=1,p=0);for(var h=o[m].data.length,y=0;y<h;y++){var v=0;o[m].data[y][1]!=null&&(v=o[m].data[y][p]),a[o[m].data[y][d]+""]?a[o[m].data[y][d]+""]+=v:a[o[m].data[y][d]+""]=v}}}return a}function f(o,l,a){if(l.stackpercent){c||(s=g(o.getData()));var m=[],d=0,p=1;l.bars&&l.bars.horizontal&&l.bars.horizontal===!0&&(d=1,p=0);for(var h=0;h<a.points.length;h+=3)n[a.points[h+d]]||(n[a.points[h+d]]=0),m[h+d]=a.points[h+d],m[h+p]=a.points[h+p]+n[a.points[h+d]],m[h+2]=n[a.points[h+d]],n[a.points[h+d]]+=a.points[h+p],s[m[h+d]+""]>0?(m[h+p]=m[h+p]*100/s[m[h+d]+""],m[h+2]=m[h+2]*100/s[m[h+d]+""]):(m[h+p]=0,m[h+2]=0);a.points=m}}t.hooks.processRawData.push(r),t.hooks.processDatapoints.push(f)}H.plot.plugins.push({init:e,options:T,name:"stackpercent",version:"0.1"})})(jQuery)},59554:()=>{(function(H){var T={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}};function e(l,a){return a*Math.floor(l/a)}function t(l,a,m,d){if(typeof l.strftime=="function")return l.strftime(a);var p=function(C,b){return C=""+C,b=""+(b??"0"),C.length==1?b+C:C},h=[],y=!1,v=l.getHours(),i=v<12;m==null&&(m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),d==null&&(d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var u;v>12?u=v-12:v==0?u=12:u=v;for(var P=0;P<a.length;++P){var E=a.charAt(P);if(y){switch(E){case"a":E=""+d[l.getDay()];break;case"b":E=""+m[l.getMonth()];break;case"d":E=p(l.getDate(),"");break;case"e":E=p(l.getDate()," ");break;case"h":case"H":E=p(v);break;case"I":E=p(u);break;case"l":E=p(u," ");break;case"m":E=p(l.getMonth()+1,"");break;case"M":E=p(l.getMinutes());break;case"q":E=""+(Math.floor(l.getMonth()/3)+1);break;case"S":E=p(l.getSeconds());break;case"y":E=p(l.getFullYear()%100);break;case"Y":E=""+l.getFullYear();break;case"p":E=i?"am":"pm";break;case"P":E=i?"AM":"PM";break;case"w":E=""+l.getDay();break}h.push(E),y=!1}else E=="%"?y=!0:h.push(E)}return h.join("")}function n(l){function a(h,y,v,i){h[y]=function(){return v[i].apply(v,arguments)}}var m={date:l};l.strftime!=null&&a(m,"strftime",l,"strftime"),a(m,"getTime",l,"getTime"),a(m,"setTime",l,"setTime");for(var d=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],p=0;p<d.length;p++)a(m,"get"+d[p],l,"getUTC"+d[p]),a(m,"set"+d[p],l,"setUTC"+d[p]);return m}function c(l,a){if(a.timezone=="browser")return new Date(l);if(!a.timezone||a.timezone=="utc")return n(new Date(l));if(typeof timezoneJS<"u"&&typeof timezoneJS.Date<"u"){var m=new timezoneJS.Date;return m.setTimezone(a.timezone),m.setTime(l),m}else return n(new Date(l))}var s={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:30*24*60*60*1e3,quarter:3*30*24*60*60*1e3,year:365.2425*24*60*60*1e3},r=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],g=r.concat([[3,"month"],[6,"month"],[1,"year"]]),f=r.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function o(l){l.hooks.processOptions.push(function(a,m){H.each(a.getAxes(),function(d,p){var h=p.options;h.mode=="time"&&(p.tickGenerator=function(y){var v=[],i=c(y.min,h),u=0,P=h.tickSize&&h.tickSize[1]==="quarter"||h.minTickSize&&h.minTickSize[1]==="quarter"?f:g;h.minTickSize!=null&&(typeof h.tickSize=="number"?u=h.tickSize:u=h.minTickSize[0]*s[h.minTickSize[1]]);for(var E=0;E<P.length-1&&!(y.delta<(P[E][0]*s[P[E][1]]+P[E+1][0]*s[P[E+1][1]])/2&&P[E][0]*s[P[E][1]]>=u);++E);var C=P[E][0],b=P[E][1];if(b=="year"){if(h.minTickSize!=null&&h.minTickSize[1]=="year")C=Math.floor(h.minTickSize[0]);else{var S=Math.pow(10,Math.floor(Math.log(y.delta/s.year)/Math.LN10)),M=y.delta/s.year/S;M<1.5?C=1:M<3?C=2:M<7.5?C=5:C=10,C*=S}C<1&&(C=1)}y.tickSize=h.tickSize||[C,b];var x=y.tickSize[0];b=y.tickSize[1];var O=x*s[b];b=="second"?i.setSeconds(e(i.getSeconds(),x)):b=="minute"?i.setMinutes(e(i.getMinutes(),x)):b=="hour"?i.setHours(e(i.getHours(),x)):b=="month"?i.setMonth(e(i.getMonth(),x)):b=="quarter"?i.setMonth(3*e(i.getMonth()/3,x)):b=="year"&&i.setFullYear(e(i.getFullYear(),x)),i.setMilliseconds(0),O>=s.minute&&i.setSeconds(0),O>=s.hour&&i.setMinutes(0),O>=s.day&&i.setHours(0),O>=s.day*4&&i.setDate(1),O>=s.month*2&&i.setMonth(e(i.getMonth(),3)),O>=s.quarter*2&&i.setMonth(e(i.getMonth(),6)),O>=s.year&&i.setMonth(0);var L=0,B=Number.NaN,w;do if(w=B,B=i.getTime(),v.push(B),b=="month"||b=="quarter")if(x<1){i.setDate(1);var R=i.getTime();i.setMonth(i.getMonth()+(b=="quarter"?3:1));var A=i.getTime();i.setTime(B+L*s.hour+(A-R)*x),L=i.getHours(),i.setHours(0)}else i.setMonth(i.getMonth()+x*(b=="quarter"?3:1));else b=="year"?i.setFullYear(i.getFullYear()+x):i.setTime(B+O);while(B<y.max&&B!=w);return v},p.tickFormatter=function(y,v){var i=c(y,v.options);if(h.timeformat!=null)return t(i,h.timeformat,h.monthNames,h.dayNames);var u=v.options.tickSize&&v.options.tickSize[1]=="quarter"||v.options.minTickSize&&v.options.minTickSize[1]=="quarter",P=v.tickSize[0]*s[v.tickSize[1]],E=v.max-v.min,C=h.twelveHourClock?" %p":"",b=h.twelveHourClock?"%I":"%H",S;P<s.minute?S=b+":%M:%S"+C:P<s.day?E<2*s.day?S=b+":%M"+C:S="%b %d "+b+":%M"+C:P<s.month?S="%b %d":u&&P<s.quarter||!u&&P<s.year?E<s.year?S="%b":S="%b %Y":u&&P<s.year?E<s.year?S="Q%q":S="Q%q %Y":S="%Y";var M=t(i,S,h.monthNames,h.dayNames);return M})})})}H.plot.plugins.push({init:o,options:T,name:"time",version:"1.0"}),H.plot.formatDate=t})(jQuery)}}]);

//# sourceMappingURL=8224.b92602c725f297431921.js.map